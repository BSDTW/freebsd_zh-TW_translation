<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 29. APIs and Libraries</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="precision-math.html" title="Chapter 28. Precision Math"><link rel="next" href="connectors.html" title="Chapter 30. Connectors"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 29. APIs and Libraries</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="precision-math.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="connectors.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="apis"></a>Chapter 29. APIs and Libraries</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="apis.html#libmysqld">29.1. libmysqld, the Embedded MySQL Server Library</a></span></dt><dd><dl><dt><span class="section"><a href="apis.html#libmysqld-compiling">29.1.1. Compiling Programs with <code class="literal">libmysqld</code></a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-restrictions">29.1.2. Restrictions When Using the Embedded MySQL Server</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-options">29.1.3. Options with the Embedded Server</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-example">29.1.4. Embedded Server Examples</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-licensing">29.1.5. Licensing the Embedded Server</a></span></dt></dl></dd><dt><span class="section"><a href="apis.html#c">29.2. MySQL C API</a></span></dt><dd><dl><dt><span class="section"><a href="apis.html#c-api-datatypes">29.2.1. C API Data Types</a></span></dt><dt><span class="section"><a href="apis.html#c-api-function-overview">29.2.2. C API Function Overview</a></span></dt><dt><span class="section"><a href="apis.html#c-api-functions">29.2.3. C API Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statements">29.2.4. C API Prepared Statements</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-datatypes">29.2.5. C API Prepared Statement Data types</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-function-overview">29.2.6. C API Prepared Statement Function Overview</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-functions">29.2.7. C API Prepared Statement Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-problems">29.2.8. C API Prepared Statement Problems</a></span></dt><dt><span class="section"><a href="apis.html#c-api-multiple-queries">29.2.9. C API Handling of Multiple Statement Execution</a></span></dt><dt><span class="section"><a href="apis.html#c-api-date-handling">29.2.10. C API Handling of Date and Time Values</a></span></dt><dt><span class="section"><a href="apis.html#c-thread-functions">29.2.11. C API Threaded Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-embedded-server-func">29.2.12. C API Embedded Server Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#auto-reconnect">29.2.13. Controlling Automatic Reconnect Behavior</a></span></dt><dt><span class="section"><a href="apis.html#c-api-problems">29.2.14. Common Questions and Problems When Using the C API</a></span></dt><dt><span class="section"><a href="apis.html#building-clients">29.2.15. Building Client Programs</a></span></dt><dt><span class="section"><a href="apis.html#threaded-clients">29.2.16. How to Make a Threaded Client</a></span></dt></dl></dd><dt><span class="section"><a href="apis.html#php">29.3. MySQL PHP API</a></span></dt><dd><dl><dt><span class="section"><a href="apis.html#apis-php-mysql">29.3.1. MySQL</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli">29.3.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-ref.pdo-mysql">29.3.3. MySQL Functions (PDO_MYSQL)</a></span></dt><dt><span class="section"><a href="apis.html#php-problems">29.3.4. Common Problems with MySQL and PHP</a></span></dt><dt><span class="section"><a href="apis.html#php-mysql-mysqli">29.3.5. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</a></span></dt></dl></dd><dt><span class="section"><a href="apis.html#perl">29.4. MySQL Perl API</a></span></dt><dt><span class="section"><a href="apis.html#cplusplus">29.5. MySQL C++ API</a></span></dt><dt><span class="section"><a href="apis.html#python">29.6. MySQL Python API</a></span></dt><dt><span class="section"><a href="apis.html#tcl">29.7. MySQL Tcl API</a></span></dt><dt><span class="section"><a href="apis.html#eiffel">29.8. MySQL Eiffel Wrapper</a></span></dt></dl></div><a class="indexterm" name="id2461378"></a><a class="indexterm" name="id2461387"></a><a class="indexterm" name="id2461396"></a><a class="indexterm" name="id2461405"></a><a class="indexterm" name="id2461414"></a><a class="indexterm" name="id2461426"></a><a class="indexterm" name="id2461439"></a><p>
    This chapter describes the APIs available for MySQL, where to get
    them, and how to use them. The C API is the most extensively
    covered, because it was developed by the MySQL team, and is the
    basis for most of the other APIs. This chapter also covers the
    <code class="literal">libmysqld</code> library (the embedded server).
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="libmysqld"></a>29.1. libmysqld, the Embedded MySQL Server Library</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#libmysqld-compiling">29.1.1. Compiling Programs with <code class="literal">libmysqld</code></a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-restrictions">29.1.2. Restrictions When Using the Embedded MySQL Server</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-options">29.1.3. Options with the Embedded Server</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-example">29.1.4. Embedded Server Examples</a></span></dt><dt><span class="section"><a href="apis.html#libmysqld-licensing">29.1.5. Licensing the Embedded Server</a></span></dt></dl></div><a class="indexterm" name="id2461471"></a><a class="indexterm" name="id2461480"></a><p>
    The embedded MySQL server library makes it possible to run a
    full-featured MySQL server inside a client application. The main
    benefits are increased speed and more simple management for embedded
    applications.
  </p><p>
    The embedded server library is based on the client/server version of
    MySQL, which is written in C/C++. Consequently, the embedded server
    also is written in C/C++. There is no embedded server available in
    other languages.
  </p><p>
    The API is identical for the embedded MySQL version and the
    client/server version. To change an old threaded application to use
    the embedded library, you normally only have to add calls to the
    following functions:
  </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>When to Call</strong></span></td></tr><tr><td><a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a></td><td>Should be called before any other MySQL function is called, preferably
            early in the <code class="literal">main()</code> function.</td></tr><tr><td><a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a></td><td>Should be called before your program exits.</td></tr><tr><td><a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a></td><td>Should be called in each thread you create that accesses MySQL.</td></tr><tr><td><a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a></td><td>Should be called before calling <code class="literal">pthread_exit()</code></td></tr></tbody></table></div><p>
    Then you must link your code with <code class="filename">libmysqld.a</code>
    instead of <code class="filename">libmysqlclient.a</code>. To ensure binary
    compatibility between your application and the server library, be
    sure to compile your application against headers for the same series
    of MySQL that was used to compile the server library. For example,
    if <code class="literal">libmysqld</code> was compiled against MySQL 4.1
    headers, do not compile your application against MySQL 5.1 headers,
    or vice versa.
  </p><p>
    The
    <code class="literal">mysql_library_<em class="replaceable"><code>xxx</code></em>()</code>
    functions are also included in <code class="filename">libmysqlclient.a</code>
    to allow you to change between the embedded and the client/server
    version by just linking your application with the right library. See
    <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()">Section 29.2.3.40, “<code class="literal">mysql_library_init()</code>”</a>.
  </p><p>
    One difference between the embedded server and the standalone server
    is that for the embedded server, authentication for connections is
    disabled by default. To use authentication for the embedded server,
    specify the <code class="option">--with-embedded-privilege-control</code>
    option when you invoke <span><strong class="command">configure</strong></span> to configure
    your MySQL distribution.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-compiling"></a>29.1.1. Compiling Programs with <code class="literal">libmysqld</code></h3></div></div></div><p>
      In precompiled binary MySQL distributions that include
      <code class="literal">libmysqld</code>, the embedded server library, MySQL
      builds the library using the appropriate vendor compiler if there
      is one.
    </p><p>
      To get a <code class="literal">libmysqld</code> library if you build MySQL
      from source yourself, you should configure MySQL with the
      <code class="option">--with-embedded-server</code> option. See
      <a href="installing.html#configure-options" title="2.9.2. Typical configure Options">Section 2.9.2, “Typical <span><strong class="command">configure</strong></span> Options”</a>.
    </p><p>
      When you link your program with <code class="literal">libmysqld</code>, you
      must also include the system-specific <code class="literal">pthread</code>
      libraries and some libraries that the MySQL server uses. You can
      get the full list of libraries by executing <span><strong class="command">mysql_config
      --libmysqld-libs</strong></span>.
    </p><p>
      The correct flags for compiling and linking a threaded program
      must be used, even if you do not directly call any thread
      functions in your code.
    </p><p>
      To compile a C program to include the necessary files to embed the
      MySQL server library into an executable version of a program, the
      compiler will need to know where to find various files and need
      instructions on how to compile the program. The following example
      shows how a program could be compiled from the command line,
      assuming that you are using <span><strong class="command">gcc</strong></span>, use the GNU C
      compiler:
    </p><pre class="programlisting">gcc mysql_test.c -o mysql_test -lz \
`/usr/local/mysql/bin/mysql_config --include --libmysqld-libs`
</pre><p>
      Immediately following the <span><strong class="command">gcc</strong></span> command is the
      name of the C program source file. After it, the
      <code class="option">-o</code> option is given to indicate that the file name
      that follows is the name that the compiler is to give to the
      output file, the compiled program. The next line of code tells the
      compiler to obtain the location of the include files and libraries
      and other settings for the system on which it's compiled. Because
      of a problem with <span><strong class="command">mysql_config</strong></span>, the option
      <code class="option">-lz</code> (for compression) is added here. The
      <span><strong class="command">mysql_config</strong></span> command is contained in backticks,
      not single quotes.
    </p><p>
      On some non-<span><strong class="command">gcc</strong></span> platforms, the embedded library
      depends on C++ runtime libraries and linking against the embedded
      library might result in missing-symbol errors. To solve this, link
      using a C++ compiler or explicitly list the required libraries on
      the link command line.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-restrictions"></a>29.1.2. Restrictions When Using the Embedded MySQL Server</h3></div></div></div><p>
      The embedded server has the following limitations:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          No user-defined functions (UDFs).
        </p></li><li><p>
          No stack trace on core dump.
        </p></li><li><p>
          You cannot set this up as a master or a slave (no
          replication).
        </p></li><li><p>
          Very large result sets may be unusable on low memory systems.
        </p></li><li><p>
          You cannot connect to an embedded server from an outside
          process with sockets or TCP/IP. However, you can connect to an
          intermediate application, which in turn can connect to an
          embedded server on the behalf of a remote client or outside
          process.
        </p></li><li><p>
          <code class="literal">InnoDB</code> is not reentrant in the embedded
          server and cannot be used for multiple connections, either
          successively or simultaneously.
        </p></li><li><p>
          The Event Scheduler is not available. Because of this, the
          <code class="literal">event_scheduler</code> system variable is
          disabled.
        </p></li></ul></div><p>
      Some of these limitations can be changed by editing the
      <code class="filename">mysql_embed.h</code> include file and recompiling
      MySQL.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-options"></a>29.1.3. Options with the Embedded Server</h3></div></div></div><a class="indexterm" name="id2461902"></a><a class="indexterm" name="id2461914"></a><a class="indexterm" name="id2461927"></a><a class="indexterm" name="id2461939"></a><p>
      Any options that may be given with the <span><strong class="command">mysqld</strong></span>
      server daemon, may be used with an embedded server library. Server
      options may be given in an array as an argument to the
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>, which
      initializes the server. They also may be given in an option file
      like <code class="filename">my.cnf</code>. To specify an option file for a
      C program, use the <code class="option">--defaults-file</code> option as one
      of the elements of the second argument of the
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> function.
      See <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()">Section 29.2.3.40, “<code class="literal">mysql_library_init()</code>”</a>, for more information on
      the <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
      function.
    </p><p>
      Using option files can make it easier to switch between a
      client/server application and one where MySQL is embedded. Put
      common options under the <code class="literal">[server]</code> group. These
      are read by both MySQL versions. Client/server-specific options
      should go under the <code class="literal">[mysqld]</code> section. Put
      options specific to the embedded MySQL server library in the
      <code class="literal">[embedded]</code> section. Options specific to
      applications go under section labeled
      <code class="literal">[ApplicationName_SERVER]</code>. See
      <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-example"></a>29.1.4. Embedded Server Examples</h3></div></div></div><p>
      These two example programs should work without any changes on a
      Linux or FreeBSD system. For other operating systems, minor
      changes are needed, mostly with file paths. These examples are
      designed to give enough details for you to understand the problem,
      without the clutter that is a necessary part of a real
      application. The first example is very straightforward. The second
      example is a little more advanced with some error checking. The
      first is followed by a command-line entry for compiling the
      program. The second is followed by a GNUmake file that may be used
      for compiling instead.
    </p><p>
      <span class="bold"><strong>Example 1</strong></span>
    </p><p>
      <code class="filename">test1_libmysqld.c</code>
    </p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdarg.h&gt;
#include "mysql.h"

MYSQL *mysql;
MYSQL_RES *results;
MYSQL_ROW record;

static char *server_options[] = \
       { "mysql_test", "--defaults-file=my.cnf", NULL };
int num_elements = (sizeof(server_options) / sizeof(char *)) - 1;

static char *server_groups[] = { "libmysqld_server", 
                                 "libmysqld_client", NULL };

int main(void)
{
   mysql_library_init(num_elements, server_options, server_groups);
   mysql = mysql_init(NULL);
   mysql_options(mysql, MYSQL_READ_DEFAULT_GROUP, "libmysqld_client");
   mysql_options(mysql, MYSQL_OPT_USE_EMBEDDED_CONNECTION, NULL);

   mysql_real_connect(mysql, NULL,NULL,NULL, "database1", 0,NULL,0);

   mysql_query(mysql, "SELECT column1, column2 FROM table1");

   results = mysql_store_result(mysql);

   while((record = mysql_fetch_row(results))) {
      printf("%s - %s \n", record[0], record[1]);
   }

   mysql_free_result(results);
   mysql_close(mysql);
   mysql_library_end();

   return 0;
}
</pre><p>
      Here is the command line for compiling the above program:
    </p><pre class="programlisting">gcc test1_libmysqld.c -o test1_libmysqld -lz \
 `/usr/local/mysql/bin/mysql_config --include --libmysqld-libs`
</pre><p>
      <span class="bold"><strong>Example 2</strong></span>
    </p><p>
      To try out the example, create an
      <code class="filename">test2_libmysqld</code> directory at the same level
      as the MySQL source directory. Save the
      <code class="filename">test2_libmysqld.c</code> source and the
      <code class="filename">GNUmakefile</code> in the directory, and run GNU
      <code class="filename">make</code> from inside the
      <code class="filename">test2_libmysqld</code> directory.
    </p><p>
      <code class="filename">test2_libmysqld.c</code>
    </p><pre class="programlisting">/*
 * A simple example client, using the embedded MySQL server library
*/

#include &lt;mysql.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

MYSQL *db_connect(const char *dbname);
void db_disconnect(MYSQL *db);
void db_do_query(MYSQL *db, const char *query);

const char *server_groups[] = {
  "test2_libmysqld_SERVER", "embedded", "server", NULL
};

int
main(int argc, char **argv)
{
  MYSQL *one, *two;

  /* mysql_library_init() must be called before any other mysql
   * functions.
   *
   * You can use mysql_library_init(0, NULL, NULL), and it
   * initializes the server using groups = {
   *   "server", "embedded", NULL
   *  }.
   *
   * In your $HOME/.my.cnf file, you probably want to put:

[test2_libmysqld_SERVER]
language = /path/to/source/of/mysql/sql/share/english

   * You could, of course, modify argc and argv before passing
   * them to this function.  Or you could create new ones in any
   * way you like.  But all of the arguments in argv (except for
   * argv[0], which is the program name) should be valid options
   * for the MySQL server.
   *
   * If you link this client against the normal mysqlclient
   * library, this function is just a stub that does nothing.
   */
  mysql_library_init(argc, argv, (char **)server_groups);

  one = db_connect("test");
  two = db_connect(NULL);

  db_do_query(one, "SHOW TABLE STATUS");
  db_do_query(two, "SHOW DATABASES");

  mysql_close(two);
  mysql_close(one);

  /* This must be called after all other mysql functions */
  mysql_library_end();

  exit(EXIT_SUCCESS);
}

static void
die(MYSQL *db, char *fmt, ...)
{
  va_list ap;
  va_start(ap, fmt);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  (void)putc('\n', stderr);
  if (db)
    db_disconnect(db);
  exit(EXIT_FAILURE);
}

MYSQL *
db_connect(const char *dbname)
{
  MYSQL *db = mysql_init(NULL);
  if (!db)
    die(db, "mysql_init failed: no memory");
  /*
   * Notice that the client and server use separate group names.
   * This is critical, because the server does not accept the
   * client's options, and vice versa.
   */
  mysql_options(db, MYSQL_READ_DEFAULT_GROUP, "test2_libmysqld_CLIENT");
  if (!mysql_real_connect(db, NULL, NULL, NULL, dbname, 0, NULL, 0))
    die(db, "mysql_real_connect failed: %s", mysql_error(db));

  return db;
}

void
db_disconnect(MYSQL *db)
{
  mysql_close(db);
}

void
db_do_query(MYSQL *db, const char *query)
{
  if (mysql_query(db, query) != 0)
    goto err;

  if (mysql_field_count(db) &gt; 0)
  {
    MYSQL_RES   *res;
    MYSQL_ROW    row, end_row;
    int num_fields;

    if (!(res = mysql_store_result(db)))
      goto err;
    num_fields = mysql_num_fields(res);
    while ((row = mysql_fetch_row(res)))
    {
      (void)fputs("&gt;&gt; ", stdout);
      for (end_row = row + num_fields; row &lt; end_row; ++row)
        (void)printf("%s\t", row ? (char*)*row : "NULL");
      (void)fputc('\n', stdout);
    }
    (void)fputc('\n', stdout);
    mysql_free_result(res);
  }
  else
    (void)printf("Affected rows: %lld\n", mysql_affected_rows(db));

  return;

err:
  die(db, "db_do_query failed: %s [%s]", mysql_error(db), query);
}
</pre><p>
      <code class="filename">GNUmakefile</code>
    </p><pre class="programlisting"># This assumes the MySQL software is installed in /usr/local/mysql
inc      := /usr/local/mysql/include/mysql
lib      := /usr/local/mysql/lib

# If you have not installed the MySQL software yet, try this instead
#inc      := $(HOME)/mysql-5.1/include
#lib      := $(HOME)/mysql-5.1/libmysqld

CC       := gcc
CPPFLAGS := -I$(inc) -D_THREAD_SAFE -D_REENTRANT
CFLAGS   := -g -W -Wall
LDFLAGS  := -static
# You can change -lmysqld to -lmysqlclient to use the
# client/server library
LDLIBS    = -L$(lib) -lmysqld -lz -lm -ldl -lcrypt

ifneq (,$(shell grep FreeBSD /COPYRIGHT 2&gt;/dev/null))
# FreeBSD
LDFLAGS += -pthread
else
# Assume Linux
LDLIBS += -lpthread
endif

# This works for simple one-file test programs
sources := $(wildcard *.c)
objects := $(patsubst %c,%o,$(sources))
targets := $(basename $(sources))

all: $(targets)

clean:
        rm -f $(targets) $(objects) *.core
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="libmysqld-licensing"></a>29.1.5. Licensing the Embedded Server</h3></div></div></div><p>
      We encourage everyone to promote free software by releasing code
      under the GPL or a compatible license. For those who are not able
      to do this, another option is to purchase a commercial license for
      the MySQL code from MySQL AB. For details, please see
      <a href="http://www.mysql.com/company/legal/licensing/" target="_top">http://www.mysql.com/company/legal/licensing/</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="c"></a>29.2. MySQL C API</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#c-api-datatypes">29.2.1. C API Data Types</a></span></dt><dt><span class="section"><a href="apis.html#c-api-function-overview">29.2.2. C API Function Overview</a></span></dt><dt><span class="section"><a href="apis.html#c-api-functions">29.2.3. C API Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statements">29.2.4. C API Prepared Statements</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-datatypes">29.2.5. C API Prepared Statement Data types</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-function-overview">29.2.6. C API Prepared Statement Function Overview</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-functions">29.2.7. C API Prepared Statement Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-api-prepared-statement-problems">29.2.8. C API Prepared Statement Problems</a></span></dt><dt><span class="section"><a href="apis.html#c-api-multiple-queries">29.2.9. C API Handling of Multiple Statement Execution</a></span></dt><dt><span class="section"><a href="apis.html#c-api-date-handling">29.2.10. C API Handling of Date and Time Values</a></span></dt><dt><span class="section"><a href="apis.html#c-thread-functions">29.2.11. C API Threaded Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#c-embedded-server-func">29.2.12. C API Embedded Server Function Descriptions</a></span></dt><dt><span class="section"><a href="apis.html#auto-reconnect">29.2.13. Controlling Automatic Reconnect Behavior</a></span></dt><dt><span class="section"><a href="apis.html#c-api-problems">29.2.14. Common Questions and Problems When Using the C API</a></span></dt><dt><span class="section"><a href="apis.html#building-clients">29.2.15. Building Client Programs</a></span></dt><dt><span class="section"><a href="apis.html#threaded-clients">29.2.16. How to Make a Threaded Client</a></span></dt></dl></div><a class="indexterm" name="id2462269"></a><a class="indexterm" name="id2462281"></a><p>
    The C API code is distributed with MySQL. It is included in the
    <code class="literal">mysqlclient</code> library and allows C programs to
    access a database.
  </p><p>
    Many of the clients in the MySQL source distribution are written in
    C. If you are looking for examples that demonstrate how to use the C
    API, take a look at these clients. You can find these in the
    <code class="literal">clients</code> directory in the MySQL source
    distribution.
  </p><p>
    Most of the other client APIs (all except Connector/J and
    Connector/NET) use the <code class="literal">mysqlclient</code> library to
    communicate with the MySQL server. This means that, for example, you
    can take advantage of many of the same environment variables that
    are used by other client programs, because they are referenced from
    the library. See <a href="programs.html" title="Chapter 4. MySQL Programs">Chapter 4, <i>MySQL Programs</i></a>, for a list of these
    variables.
  </p><p>
    The client has a maximum communication buffer size. The size of the
    buffer that is allocated initially (16KB) is automatically increased
    up to the maximum size (the maximum is 16MB). Because buffer sizes
    are increased only as demand warrants, simply increasing the default
    maximum limit does not in itself cause more resources to be used.
    This size check is mostly a check for erroneous statements and
    communication packets.
  </p><p>
    The communication buffer must be large enough to contain a single
    SQL statement (for client-to-server traffic) and one row of returned
    data (for server-to-client traffic). Each thread's communication
    buffer is dynamically enlarged to handle any query or row up to the
    maximum limit. For example, if you have <code class="literal">BLOB</code>
    values that contain up to 16MB of data, you must have a
    communication buffer limit of at least 16MB (in both server and
    client). The client's default maximum is 16MB, but the default
    maximum in the server is 1MB. You can increase this by changing the
    value of the <code class="literal">max_allowed_packet</code> parameter when
    the server is started. See <a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">Section 7.5.2, “Tuning Server Parameters”</a>.
  </p><p>
    The MySQL server shrinks each communication buffer to
    <code class="literal">net_buffer_length</code> bytes after each query. For
    clients, the size of the buffer associated with a connection is not
    decreased until the connection is closed, at which time client
    memory is reclaimed.
  </p><p>
    For programming with threads, see
    <a href="apis.html#threaded-clients" title="29.2.16. How to Make a Threaded Client">Section 29.2.16, “How to Make a Threaded Client”</a>. For creating a standalone
    application which includes the "server" and "client" in the same
    program (and does not communicate with an external MySQL server),
    see <a href="apis.html#libmysqld" title="29.1. libmysqld, the Embedded MySQL Server Library">Section 29.1, “libmysqld, the Embedded MySQL Server Library”</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using the C API in the Knowledge Base articles,
      <a href="https://kb.mysql.com/search.php?cat=search&amp;pagerRow=0&amp;Category=17" target="_top">
      The C API</a>. Access to the MySQL Knowledge Base collection
      of articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information, see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-datatypes"></a>29.2.1. C API Data Types</h3></div></div></div><p>
      This section describes C API data types other than those used for
      prepared statements. For information about the latter, see
      <a href="apis.html#c-api-prepared-statement-datatypes" title="29.2.5. C API Prepared Statement Data types">Section 29.2.5, “C API Prepared Statement Data types”</a>.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2462440"></a>

          <code class="literal">MYSQL</code>
        </p><p>
          This structure represents a handle to one database connection.
          It is used for almost all MySQL functions. You should not try
          to make a copy of a <code class="literal">MYSQL</code> structure. There
          is no guarantee that such a copy will be usable.
        </p></li><li><p>
          <a class="indexterm" name="id2462472"></a>

          <code class="literal">MYSQL_RES</code>
        </p><p>
          This structure represents the result of a query that returns
          rows (<code class="literal">SELECT</code>, <code class="literal">SHOW</code>,
          <code class="literal">DESCRIBE</code>, <code class="literal">EXPLAIN</code>). The
          information returned from a query is called the
          <span class="emphasis"><em>result set</em></span> in the remainder of this
          section.
        </p></li><li><p>
          <a class="indexterm" name="id2462526"></a>

          <code class="literal">MYSQL_ROW</code>
        </p><p>
          This is a type-safe representation of one row of data. It is
          currently implemented as an array of counted byte strings.
          (You cannot treat these as null-terminated strings if field
          values may contain binary data, because such values may
          contain null bytes internally.) Rows are obtained by calling
          <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
        </p></li><li><p>
          <a class="indexterm" name="id2462560"></a>

          <code class="literal">MYSQL_FIELD</code>
        </p><p>
          This structure contains information about a field, such as the
          field's name, type, and size. Its members are described in
          more detail here. You may obtain the
          <code class="literal">MYSQL_FIELD</code> structures for each field by
          calling <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
          repeatedly. Field values are not part of this structure; they
          are contained in a <code class="literal">MYSQL_ROW</code> structure.
        </p></li><li><p>
          <a class="indexterm" name="id2462606"></a>

          <code class="literal">MYSQL_FIELD_OFFSET</code>
        </p><p>
          This is a type-safe representation of an offset into a MySQL
          field list. (Used by
          <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.) Offsets
          are field numbers within a row, beginning at zero.
        </p></li><li><p>
          <a class="indexterm" name="id2462639"></a>

          <a class="indexterm" name="id2462648"></a>

          <code class="literal">my_ulonglong</code>
        </p><p>
          The type used for the number of rows and for
          <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>,
          <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>, and
          <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>. This type
          provides a range of <code class="literal">0</code> to
          <code class="literal">1.84e19</code>.
        </p><p>
          On some systems, attempting to print a value of type
          <code class="literal">my_ulonglong</code> does not work. To print such a
          value, convert it to <code class="literal">unsigned long</code> and use
          a <code class="literal">%lu</code> print format. Example:
        </p><pre class="programlisting">printf ("Number of rows: %lu\n", 
        (unsigned long) mysql_num_rows(result));
</pre></li><li><p>
          <a class="indexterm" name="id2462738"></a>

          <a class="indexterm" name="id2462747"></a>

          <code class="literal">my_bool</code>
        </p><p>
          A boolean type, for values that are true (non-zero) or false
          (zero).
        </p></li></ul></div><p>
      The <code class="literal">MYSQL_FIELD</code> structure contains the members
      listed here:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">char * name</code>
        </p><p>
          The name of the field, as a null-terminated string. If the
          field was given an alias with an <code class="literal">AS</code> clause,
          the value of <code class="literal">name</code> is the alias.
        </p></li><li><p>
          <code class="literal">char * org_name</code>
        </p><p>
          The name of the field, as a null-terminated string. Aliases
          are ignored.
        </p></li><li><p>
          <code class="literal">char * table</code>
        </p><p>
          The name of the table containing this field, if it isn't a
          calculated field. For calculated fields, the
          <code class="literal">table</code> value is an empty string. If the
          column is selected from a view, <code class="literal">table</code> names
          the view. If the table or view was given an alias with an
          <code class="literal">AS</code> clause, the value of
          <code class="literal">table</code> is the alias. For a
          <code class="literal">UNION</code>, the value is the empty string.
        </p></li><li><p>
          <code class="literal">char * org_table</code>
        </p><p>
          The name of the table, as a null-terminated string. Aliases
          are ignored. If the column is selected from a view,
          <code class="literal">org_table</code> names the underlying table. For a
          <code class="literal">UNION</code>, the value is the empty string.
        </p></li><li><p>
          <code class="literal">char * db</code>
        </p><p>
          The name of the database that the field comes from, as a
          null-terminated string. If the field is a calculated field,
          <code class="literal">db</code> is an empty string. For a
          <code class="literal">UNION</code>, the value is the empty string.
        </p></li><li><p>
          <code class="literal">char * catalog</code>
        </p><p>
          The catalog name. This value is always
          <code class="literal">"def"</code>.
        </p></li><li><p>
          <code class="literal">char * def</code>
        </p><p>
          The default value of this field, as a null-terminated string.
          This is set only if you use
          <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>.
        </p></li><li><p>
          <code class="literal">unsigned long length</code>
        </p><p>
          The width of the field. This corresponds to the display
          length, in bytes.
        </p></li><li><p>
          <code class="literal">unsigned long max_length</code>
        </p><p>
          The maximum width of the field for the result set (the length
          in bytes of the longest field value for the rows actually in
          the result set). If you use
          <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
          <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>, this
          contains the maximum length for the field. If you use
          <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, the value
          of this variable is zero.
        </p><p>
          The value of <code class="literal">max_length</code> is the length of
          the string representation of the values in the result set. For
          example, if you retrieve a <code class="literal">FLOAT</code> column and
          the “<span class="quote">widest</span>” value is <code class="literal">-12.345</code>,
          <code class="literal">max_length</code> is 7 (the length of
          <code class="literal">'-12.345'</code>).
        </p><p>
          If you are using prepared statements,
          <code class="literal">max_length</code> is not set by default because
          for the binary protocol the lengths of the values depend on
          the types of the values in the result set. (See
          <a href="apis.html#c-api-prepared-statement-datatypes" title="29.2.5. C API Prepared Statement Data types">Section 29.2.5, “C API Prepared Statement Data types”</a>.) If you
          want the <code class="literal">max_length</code> values anyway, enable
          the <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code> option with
          <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> and the
          lengths will be set when you call
          <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
          (See <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()">Section 29.2.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>, and
          <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()">Section 29.2.7.27, “<code class="literal">mysql_stmt_store_result()</code>”</a>.)
        </p></li><li><p>
          <code class="literal">unsigned int name_length</code>
        </p><p>
          The length of <code class="literal">name</code>.
        </p></li><li><p>
          <code class="literal">unsigned int org_name_length</code>
        </p><p>
          The length of <code class="literal">org_name</code>.
        </p></li><li><p>
          <code class="literal">unsigned int table_length</code>
        </p><p>
          The length of <code class="literal">table</code>.
        </p></li><li><p>
          <code class="literal">unsigned int org_table_length</code>
        </p><p>
          The length of <code class="literal">org_table</code>.
        </p></li><li><p>
          <code class="literal">unsigned int db_length</code>
        </p><p>
          The length of <code class="literal">db</code>.
        </p></li><li><p>
          <code class="literal">unsigned int catalog_length</code>
        </p><p>
          The length of <code class="literal">catalog</code>.
        </p></li><li><p>
          <code class="literal">unsigned int def_length</code>
        </p><p>
          The length of <code class="literal">def</code>.
        </p></li><li><p>
          <code class="literal">unsigned int flags</code>
        </p><p>
          Different bit-flags for the field. The
          <code class="literal">flags</code> value may have zero or more of the
          following bits set:
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Value</strong></span></td><td><span class="bold"><strong>Flag Description</strong></span></td></tr><tr><td><code class="literal">NOT_NULL_FLAG</code></td><td>Field can't be <code class="literal">NULL</code></td></tr><tr><td><code class="literal">PRI_KEY_FLAG</code></td><td>Field is part of a primary key</td></tr><tr><td><code class="literal">UNIQUE_KEY_FLAG</code></td><td>Field is part of a unique key</td></tr><tr><td><code class="literal">MULTIPLE_KEY_FLAG</code></td><td>Field is part of a non-unique key</td></tr><tr><td><code class="literal">UNSIGNED_FLAG</code></td><td>Field has the <code class="literal">UNSIGNED</code> attribute</td></tr><tr><td><code class="literal">ZEROFILL_FLAG</code></td><td>Field has the <code class="literal">ZEROFILL</code> attribute</td></tr><tr><td><code class="literal">BINARY_FLAG</code></td><td>Field has the <code class="literal">BINARY</code> attribute</td></tr><tr><td><code class="literal">AUTO_INCREMENT_FLAG</code></td><td>Field has the <code class="literal">AUTO_INCREMENT</code> attribute</td></tr><tr><td><code class="literal">ENUM_FLAG</code></td><td>Field is an <code class="literal">ENUM</code> (deprecated)</td></tr><tr><td><code class="literal">SET_FLAG</code></td><td>Field is a <code class="literal">SET</code> (deprecated)</td></tr><tr><td><code class="literal">BLOB_FLAG</code></td><td>Field is a <code class="literal">BLOB</code> or <code class="literal">TEXT</code>
                  (deprecated)</td></tr><tr><td><code class="literal">TIMESTAMP_FLAG</code></td><td>Field is a <code class="literal">TIMESTAMP</code> (deprecated)</td></tr><tr><td><code class="literal">NO_DEFAULT_VALUE_FLAG</code></td><td>Field has no default value; see additional notes following table</td></tr></tbody></table></div><p>
          Use of the <code class="literal">BLOB_FLAG</code>,
          <code class="literal">ENUM_FLAG</code>, <code class="literal">SET_FLAG</code>, and
          <code class="literal">TIMESTAMP_FLAG</code> flags is deprecated because
          they indicate the type of a field rather than an attribute of
          its type. It is preferable to test
          <code class="literal">field-&gt;type</code> against
          <code class="literal">MYSQL_TYPE_BLOB</code>,
          <code class="literal">MYSQL_TYPE_ENUM</code>,
          <code class="literal">MYSQL_TYPE_SET</code>, or
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code> instead.
        </p><p>
          <code class="literal">NUM_FLAG</code> indicates that a column is
          numeric. This includes columns with a type of
          <code class="literal">MYSQL_TYPE_DECIMAL</code>,
          <code class="literal">MYSQL_TYPE_TINY</code>,
          <code class="literal">MYSQL_TYPE_SHORT</code>,
          <code class="literal">MYSQL_TYPE_LONG</code>,
          <code class="literal">MYSQL_TYPE_FLOAT</code>,
          <code class="literal">MYSQL_TYPE_DOUBLE</code>,
          <code class="literal">MYSQL_TYPE_NULL</code>,
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>,
          <code class="literal">MYSQL_TYPE_LONGLONG</code>,
          <code class="literal">MYSQL_TYPE_INT24</code>, and
          <code class="literal">MYSQL_TYPE_YEAR</code>.
        </p><p>
          <code class="literal">NO_DEFAULT_VALUE_FLAG</code> indicates that a
          column has no <code class="literal">DEFAULT</code> clause in its
          definition. This does not apply to <code class="literal">NULL</code>
          columns (because such columns have a default of
          <code class="literal">NULL</code>), or to
          <code class="literal">AUTO_INCREMENT</code> columns (which have an
          implied default value).
        </p><p>
          The following example illustrates a typical use of the
          <code class="literal">flags</code> value:
        </p><pre class="programlisting">if (field-&gt;flags &amp; NOT_NULL_FLAG)
    printf("Field can't be null\n");
</pre><p>
          You may use the following convenience macros to determine the
          boolean status of the <code class="literal">flags</code> value:
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Status</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">IS_NOT_NULL(flags)</code></td><td>True if this field is defined as <code class="literal">NOT NULL</code></td></tr><tr><td><code class="literal">IS_PRI_KEY(flags)</code></td><td>True if this field is a primary key</td></tr><tr><td><code class="literal">IS_BLOB(flags)</code></td><td>True if this field is a <code class="literal">BLOB</code> or
                  <code class="literal">TEXT</code> (deprecated; test
                  <code class="literal">field-&gt;type</code> instead)</td></tr></tbody></table></div></li><li><p>
          <code class="literal">unsigned int decimals</code>
        </p><p>
          The number of decimals for numeric fields.
        </p></li><li><p>
          <code class="literal">unsigned int charsetnr</code>
        </p><p>
          An ID number that indicates the character set/collation pair
          for the field.
        </p><p>
          To distinguish between binary and non-binary data for string
          data types, check whether the <code class="literal">charsetnr</code>
          value is 63. If so, the character set is
          <code class="literal">binary</code>, which indicates binary rather than
          non-binary data. This enables you to distinguish
          <code class="literal">BINARY</code> from <code class="literal">CHAR</code>,
          <code class="literal">VARBINARY</code> from <code class="literal">VARCHAR</code>,
          and the <code class="literal">BLOB</code> types from the
          <code class="literal">TEXT</code> types.
        </p><p>
          <code class="literal">charsetnr</code> values are the same as those
          displayed in the <code class="literal">Id</code> column of the
          <code class="literal">SHOW COLLATION</code> statement or the
          <code class="literal">ID</code> column of the
          <code class="literal">INFORMATION_SCHEMA</code>
          <code class="literal">COLLATIONS</code> table. You can use those
          information sources to see which character set and collation
          specific <code class="literal">charsetnr</code> values indicate:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE Id = 63;</code></strong>
+-----------+---------+----+---------+----------+---------+
| Collation | Charset | Id | Default | Compiled | Sortlen |
+-----------+---------+----+---------+----------+---------+
| binary    | binary  | 63 | Yes     | Yes      |       1 | 
+-----------+---------+----+---------+----------+---------+

mysql&gt; <strong class="userinput"><code>SELECT COLLATION_NAME, CHARACTER_SET_NAME</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.COLLATIONS WHERE ID = 33;</code></strong>
+-----------------+--------------------+
| COLLATION_NAME  | CHARACTER_SET_NAME |
+-----------------+--------------------+
| utf8_general_ci | utf8               | 
+-----------------+--------------------+
</pre></li><li><p>
          <code class="literal">enum enum_field_types type</code>
        </p><p>
          The type of the field. The <code class="literal">type</code> value may
          be one of the <code class="literal">MYSQL_TYPE_</code> symbols shown in
          the following table.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type Value</strong></span></td><td><span class="bold"><strong>Type Description</strong></span></td></tr><tr><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><code class="literal">TINYINT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">SMALLINT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><code class="literal">INTEGER</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_INT24</code></td><td><code class="literal">MEDIUMINT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><code class="literal">BIGINT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DECIMAL</code></td><td><code class="literal">DECIMAL</code> or <code class="literal">NUMERIC</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_NEWDECIMAL</code></td><td>Precision math <code class="literal">DECIMAL</code> or <code class="literal">NUMERIC</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><code class="literal">FLOAT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><code class="literal">DOUBLE</code> or <code class="literal">REAL</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_BIT</code></td><td><code class="literal">BIT</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><code class="literal">TIMESTAMP</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">DATE</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">TIME</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">DATETIME</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_YEAR</code></td><td><code class="literal">YEAR</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><code class="literal">CHAR</code> or <code class="literal">BINARY</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_VAR_STRING</code></td><td><code class="literal">VARCHAR</code> or <code class="literal">VARBINARY</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><code class="literal">BLOB</code> or <code class="literal">TEXT</code> field (use
                  <code class="literal">max_length</code> to determine the maximum
                  length)</td></tr><tr><td><code class="literal">MYSQL_TYPE_SET</code></td><td><code class="literal">SET</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_ENUM</code></td><td><code class="literal">ENUM</code> field</td></tr><tr><td><code class="literal">MYSQL_TYPE_GEOMETRY</code></td><td>Spatial field</td></tr><tr><td><code class="literal">MYSQL_TYPE_NULL</code></td><td><code class="literal">NULL</code>-type field</td></tr></tbody></table></div><p>
          You can use the <code class="literal">IS_NUM()</code> macro to test
          whether a field has a numeric type. Pass the
          <code class="literal">type</code> value to <code class="literal">IS_NUM()</code>
          and it evaluates to TRUE if the field is numeric:
        </p><pre class="programlisting">if (IS_NUM(field-&gt;type))
    printf("Field is numeric\n");
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-function-overview"></a>29.2.2. C API Function Overview</h3></div></div></div><a class="indexterm" name="id2464580"></a><a class="indexterm" name="id2464592"></a><p>
      The functions available in the C API are summarized here and
      described in greater detail in a later section. See
      <a href="apis.html#c-api-functions" title="29.2.3. C API Function Descriptions">Section 29.2.3, “C API Function Descriptions”</a>.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a></td><td>Initialize global variables, and thread handler in thread-safe programs</td></tr><tr><td><a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a></td><td>Returns the number of rows changed/deleted/inserted by the last
              <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, or
              <code class="literal">INSERT</code> query</td></tr><tr><td><a href="apis.html#mysql-autocommit" title="29.2.3.2. mysql_autocommit()"><code class="literal">mysql_autocommit()</code></a></td><td>Toggles autocommit mode on/off</td></tr><tr><td><a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a></td><td>Changes user and database on an open connection</td></tr><tr><td><a href="apis.html#mysql-character-set-name" title="29.2.3.4. mysql_character_set_name()"><code class="literal">mysql_character_set_name()</code></a></td><td>Return default character set name for current connection</td></tr><tr><td><a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a></td><td>Closes a server connection</td></tr><tr><td><a href="apis.html#mysql-commit" title="29.2.3.6. mysql_commit()"><code class="literal">mysql_commit()</code></a></td><td>Commits the transaction</td></tr><tr><td><a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a></td><td>Connects to a MySQL server (this function is deprecated; use
              <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
              instead)</td></tr><tr><td><a href="apis.html#mysql-create-db" title="29.2.3.8. mysql_create_db()"><code class="literal">mysql_create_db()</code></a></td><td>Creates a database (this function is deprecated; use the SQL statement
              <code class="literal">CREATE DATABASE</code> instead)</td></tr><tr><td><a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a></td><td>Seeks to an arbitrary row number in a query result set</td></tr><tr><td><a href="apis.html#mysql-debug" title="29.2.3.10. mysql_debug()"><code class="literal">mysql_debug()</code></a></td><td>Does a <code class="literal">DBUG_PUSH</code> with the given string</td></tr><tr><td><a href="apis.html#mysql-drop-db" title="29.2.3.11. mysql_drop_db()"><code class="literal">mysql_drop_db()</code></a></td><td>Drops a database (this function is deprecated; use the SQL statement
              <code class="literal">DROP DATABASE</code> instead)</td></tr><tr><td><a href="apis.html#mysql-dump-debug-info" title="29.2.3.12. mysql_dump_debug_info()"><code class="literal">mysql_dump_debug_info()</code></a></td><td>Makes the server write debug information to the log</td></tr><tr><td><a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a></td><td>Determines whether the last row of a result set has been read (this
              function is deprecated;
              <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
              <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be used
              instead)</td></tr><tr><td><a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a></td><td>Returns the error number for the most recently invoked MySQL function</td></tr><tr><td><a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a></td><td>Returns the error message for the most recently invoked MySQL function</td></tr><tr><td><a href="apis.html#mysql-escape-string" title="29.2.3.16. mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a></td><td>Escapes special characters in a string for use in an SQL statement</td></tr><tr><td><a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a></td><td>Returns the type of the next table field</td></tr><tr><td><a href="apis.html#mysql-fetch-field-direct" title="29.2.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a></td><td>Returns the type of a table field, given a field number</td></tr><tr><td><a href="apis.html#mysql-fetch-fields" title="29.2.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a></td><td>Returns an array of all field structures</td></tr><tr><td><a href="apis.html#mysql-fetch-lengths" title="29.2.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a></td><td>Returns the lengths of all columns in the current row</td></tr><tr><td><a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a></td><td>Fetches the next row from the result set</td></tr><tr><td><a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a></td><td>Returns the number of result columns for the most recent statement</td></tr><tr><td><a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a></td><td>Puts the column cursor on a specified column</td></tr><tr><td><a href="apis.html#mysql-field-tell" title="29.2.3.24. mysql_field_tell()"><code class="literal">mysql_field_tell()</code></a></td><td>Returns the position of the field cursor used for the last
              <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a></td></tr><tr><td><a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a></td><td>Frees memory used by a result set</td></tr><tr><td><a href="apis.html#mysql-get-character-set-info" title="29.2.3.26. mysql_get_character_set_info()"><code class="literal">mysql_get_character_set_info()</code></a></td><td>Return information about default character set</td></tr><tr><td><a href="apis.html#mysql-get-client-info" title="29.2.3.27. mysql_get_client_info()"><code class="literal">mysql_get_client_info()</code></a></td><td>Returns client version information as a string</td></tr><tr><td><a href="apis.html#mysql-get-client-version" title="29.2.3.28. mysql_get_client_version()"><code class="literal">mysql_get_client_version()</code></a></td><td>Returns client version information as an integer</td></tr><tr><td><a href="apis.html#mysql-get-host-info" title="29.2.3.29. mysql_get_host_info()"><code class="literal">mysql_get_host_info()</code></a></td><td>Returns a string describing the connection</td></tr><tr><td><a href="apis.html#mysql-get-proto-info" title="29.2.3.30. mysql_get_proto_info()"><code class="literal">mysql_get_proto_info()</code></a></td><td>Returns the protocol version used by the connection</td></tr><tr><td><a href="apis.html#mysql-get-server-info" title="29.2.3.31. mysql_get_server_info()"><code class="literal">mysql_get_server_info()</code></a></td><td>Returns the server version number</td></tr><tr><td><a href="apis.html#mysql-get-server-version" title="29.2.3.32. mysql_get_server_version()"><code class="literal">mysql_get_server_version()</code></a></td><td>Returns version number of server as an integer</td></tr><tr><td><a href="apis.html#mysql-get-ssl-cipher" title="29.2.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a></td><td>Return current SSL cipher</td></tr><tr><td><a href="apis.html#mysql-hex-string" title="29.2.3.34. mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a></td><td>Encode string in hexadecimal format</td></tr><tr><td><a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a></td><td>Returns information about the most recently executed query</td></tr><tr><td><a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a></td><td>Gets or initializes a <code class="literal">MYSQL</code> structure</td></tr><tr><td><a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a></td><td>Returns the ID generated for an <code class="literal">AUTO_INCREMENT</code> column
              by the previous query</td></tr><tr><td><a href="apis.html#mysql-kill" title="29.2.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a></td><td>Kills a given thread</td></tr><tr><td><a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a></td><td>Finalize the MySQL C API library</td></tr><tr><td><a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a></td><td>Initialize the MySQL C API library</td></tr><tr><td><a href="apis.html#mysql-list-dbs" title="29.2.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a></td><td>Returns database names matching a simple regular expression</td></tr><tr><td><a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a></td><td>Returns field names matching a simple regular expression</td></tr><tr><td><a href="apis.html#mysql-list-processes" title="29.2.3.43. mysql_list_processes()"><code class="literal">mysql_list_processes()</code></a></td><td>Returns a list of the current server threads</td></tr><tr><td><a href="apis.html#mysql-list-tables" title="29.2.3.44. mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a></td><td>Returns table names matching a simple regular expression</td></tr><tr><td><a href="apis.html#mysql-more-results" title="29.2.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a></td><td>Checks whether any more results exist</td></tr><tr><td><a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a></td><td>Returns/initiates the next result in multiple-statement executions</td></tr><tr><td><a href="apis.html#mysql-num-fields" title="29.2.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields()</code></a></td><td>Returns the number of columns in a result set</td></tr><tr><td><a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a></td><td>Returns the number of rows in a result set</td></tr><tr><td><a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a></td><td>Sets connect options for
              <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a></td></tr><tr><td><a href="apis.html#mysql-ping" title="29.2.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a></td><td>Checks whether the connection to the server is working, reconnecting as
              necessary</td></tr><tr><td><a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a></td><td>Executes an SQL query specified as a null-terminated string</td></tr><tr><td><a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a></td><td>Connects to a MySQL server</td></tr><tr><td><a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a></td><td>Escapes special characters in a string for use in an SQL statement,
              taking into account the current character set of the
              connection</td></tr><tr><td><a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a></td><td>Executes an SQL query specified as a counted string</td></tr><tr><td><a href="apis.html#mysql-refresh" title="29.2.3.55. mysql_refresh()"><code class="literal">mysql_refresh()</code></a></td><td>Flush or reset tables and caches</td></tr><tr><td><a href="apis.html#mysql-reload" title="29.2.3.56. mysql_reload()"><code class="literal">mysql_reload()</code></a></td><td>Tells the server to reload the grant tables</td></tr><tr><td><a href="apis.html#mysql-rollback" title="29.2.3.57. mysql_rollback()"><code class="literal">mysql_rollback()</code></a></td><td>Rolls back the transaction</td></tr><tr><td><a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a></td><td>Seeks to a row offset in a result set, using value returned from
              <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a></td></tr><tr><td><a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a></td><td>Returns the row cursor position</td></tr><tr><td><a href="apis.html#mysql-select-db" title="29.2.3.60. mysql_select_db()"><code class="literal">mysql_select_db()</code></a></td><td>Selects a database</td></tr><tr><td><a href="apis.html#mysql-server-end" title="29.2.12.2. mysql_server_end()"><code class="literal">mysql_server_end()</code></a></td><td>Finalize the MySQL C API library</td></tr><tr><td><a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a></td><td>Initialize the MySQL C API library</td></tr><tr><td><a href="apis.html#mysql-set-character-set" title="29.2.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a></td><td>Set default character set for current connection</td></tr><tr><td><a href="apis.html#mysql-set-local-infile-default" title="29.2.3.62. mysql_set_local_infile_default()"><code class="literal">mysql_set_local_infile_default()</code></a></td><td>Set the <code class="literal">LOAD DATA LOCAL INFILE</code> handler callbacks to
              their default values</td></tr><tr><td><a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a></td><td>Install application-specific <code class="literal">LOAD DATA LOCAL INFILE</code>
              handler callbacks</td></tr><tr><td><a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a></td><td>Sets an option for the connection (like
              <code class="literal">multi-statements</code>)</td></tr><tr><td><a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a></td><td>Returns the SQLSTATE error code for the last error</td></tr><tr><td><a href="apis.html#mysql-shutdown" title="29.2.3.65. mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a></td><td>Shuts down the database server</td></tr><tr><td><a href="apis.html#mysql-ssl-set" title="29.2.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a></td><td>Prepare to establish SSL connection to server</td></tr><tr><td><a href="apis.html#mysql-stat" title="29.2.3.68. mysql_stat()"><code class="literal">mysql_stat()</code></a></td><td>Returns the server status as a string</td></tr><tr><td><a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a></td><td>Retrieves a complete result set to the client</td></tr><tr><td><a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a></td><td>Finalize thread handler</td></tr><tr><td><a href="apis.html#mysql-thread-id" title="29.2.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a></td><td>Returns the current thread ID</td></tr><tr><td><a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a></td><td>Initialize thread handler</td></tr><tr><td><a href="apis.html#mysql-thread-safe" title="29.2.11.4. mysql_thread_safe()"><code class="literal">mysql_thread_safe()</code></a></td><td>Returns 1 if the clients are compiled as thread-safe</td></tr><tr><td><a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a></td><td>Initiates a row-by-row result set retrieval</td></tr><tr><td><a href="apis.html#mysql-warning-count" title="29.2.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a></td><td>Returns the warning count for the previous SQL statement</td></tr></tbody></table></div><p>
      Application programs should use this general outline for
      interacting with MySQL:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Initialize the MySQL library by calling
          <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. This
          function exists in both the <code class="literal">mysqlclient</code> C
          client library and the <code class="literal">mysqld</code> embedded
          server library, so it is used whether you build a regular
          client program by linking with the
          <code class="option">-libmysqlclient</code> flag, or an embedded server
          application by linking with the <code class="option">-libmysqld</code>
          flag.
        </p></li><li><p>
          Initialize a connection handler by calling
          <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> and connect to
          the server by calling
          <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
        </p></li><li><p>
          Issue SQL statements and process their results. (The following
          discussion provides more information about how to do this.)
        </p></li><li><p>
          Close the connection to the MySQL server by calling
          <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a>.
        </p></li><li><p>
          End use of the MySQL library by calling
          <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>.
        </p></li></ol></div><p>
      The purpose of calling
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> and
      <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> is to provide
      proper initialization and finalization of the MySQL library. For
      applications that are linked with the client library, they provide
      improved memory management. If you don't call
      <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>, a block of
      memory remains allocated. (This does not increase the amount of
      memory used by the application, but some memory leak detectors
      will complain about it.) For applications that are linked with the
      embedded server, these calls start and stop the server.
    </p><p>
      In a non-multi-threaded environment, the call to
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> may be
      omitted, because <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>
      will invoke it automatically as necessary. However,
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
      thread-safe in a multi-threaded environment, and thus neither is
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, which calls
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. You must
      either call <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
      prior to spawning any threads, or else use a mutex to protect the
      call, whether you invoke
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> or
      indirectly via <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>. This
      should be done prior to any other client library call.
    </p><p>
      To connect to the server, call
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> to initialize a
      connection handler, then call
      <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> with that
      handler (along with other information such as the hostname,
      username, and password). Upon connection,
      <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> sets the
      <code class="literal">reconnect</code> flag (part of the
      <code class="literal">MYSQL</code> structure) to a value of
      <code class="literal">1</code> in versions of the API older than 5.0.3, or
      <code class="literal">0</code> in newer versions. A value of
      <code class="literal">1</code> for this flag indicates that if a statement
      cannot be performed because of a lost connection, to try
      reconnecting to the server before giving up. You can use the
      <code class="literal">MYSQL_OPT_RECONNECT</code> option to
      <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> to control
      reconnection behavior. When you are done with the connection, call
      <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to terminate it.
    </p><p>
      While a connection is active, the client may send SQL statements
      to the server using <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>
      or <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>. The
      difference between the two is that
      <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> expects the query
      to be specified as a null-terminated string whereas
      <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> expects a
      counted string. If the string contains binary data (which may
      include null bytes), you must use
      <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>.
    </p><p>
      For each non-<code class="literal">SELECT</code> query (for example,
      <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
      <code class="literal">DELETE</code>), you can find out how many rows were
      changed (affected) by calling
      <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>.
    </p><p>
      For <code class="literal">SELECT</code> queries, you retrieve the selected
      rows as a result set. (Note that some statements are
      <code class="literal">SELECT</code>-like in that they return rows. These
      include <code class="literal">SHOW</code>, <code class="literal">DESCRIBE</code>, and
      <code class="literal">EXPLAIN</code>. They should be treated the same way as
      <code class="literal">SELECT</code> statements.)
    </p><p>
      There are two ways for a client to process result sets. One way is
      to retrieve the entire result set all at once by calling
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. This
      function acquires from the server all the rows returned by the
      query and stores them in the client. The second way is for the
      client to initiate a row-by-row result set retrieval by calling
      <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>. This function
      initializes the retrieval, but does not actually get any rows from
      the server.
    </p><p>
      In both cases, you access rows by calling
      <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. With
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
      <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> accesses rows
      that have previously been fetched from the server. With
      <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
      <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> actually
      retrieves the row from the server. Information about the size of
      the data in each row is available by calling
      <a href="apis.html#mysql-fetch-lengths" title="29.2.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a>.
    </p><p>
      After you are done with a result set, call
      <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> to free the
      memory used for it.
    </p><p>
      The two retrieval mechanisms are complementary. Client programs
      should choose the approach that is most appropriate for their
      requirements. In practice, clients tend to use
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> more
      commonly.
    </p><p>
      An advantage of
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> is that
      because the rows have all been fetched to the client, you not only
      can access rows sequentially, you can move back and forth in the
      result set using
      <a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> or
      <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> to change the
      current row position within the result set. You can also find out
      how many rows there are by calling
      <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>. On the other
      hand, the memory requirements for
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> may be very
      high for large result sets and you are more likely to encounter
      out-of-memory conditions.
    </p><p>
      An advantage of
      <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> is that the
      client requires less memory for the result set because it
      maintains only one row at a time (and because there is less
      allocation overhead,
      <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> can be
      faster). Disadvantages are that you must process each row quickly
      to avoid tying up the server, you don't have random access to rows
      within the result set (you can only access rows sequentially), and
      you don't know how many rows are in the result set until you have
      retrieved them all. Furthermore, you
      <span class="bold"><strong>must</strong></span> retrieve all the rows even
      if you determine in mid-retrieval that you've found the
      information you were looking for.
    </p><p>
      The API makes it possible for clients to respond appropriately to
      statements (retrieving rows only as necessary) without knowing
      whether the statement is a <code class="literal">SELECT</code>. You can do
      this by calling
      <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> after each
      <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> (or
      <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>). If the
      result set call succeeds, the statement was a
      <code class="literal">SELECT</code> and you can read the rows. If the result
      set call fails, call
      <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to determine
      whether a result was actually to be expected. If
      <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns zero,
      the statement returned no data (indicating that it was an
      <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
      <code class="literal">DELETE</code>, and so forth), and was not expected to
      return rows. If
      <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> is non-zero,
      the statement should have returned rows, but didn't. This
      indicates that the statement was a <code class="literal">SELECT</code> that
      failed. See the description for
      <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> for an
      example of how this can be done.
    </p><p>
      Both <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and
      <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> allow you to
      obtain information about the fields that make up the result set
      (the number of fields, their names and types, and so forth). You
      can access field information sequentially within the row by
      calling <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
      repeatedly, or by field number within the row by calling
      <a href="apis.html#mysql-fetch-field-direct" title="29.2.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a>. The
      current field cursor position may be changed by calling
      <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>. Setting the
      field cursor affects subsequent calls to
      <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>. You can also
      get information for fields all at once by calling
      <a href="apis.html#mysql-fetch-fields" title="29.2.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a>.
    </p><p>
      For detecting and reporting errors, MySQL provides access to error
      information by means of the
      <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> and
      <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> functions. These
      return the error code or error message for the most recently
      invoked function that can succeed or fail, allowing you to
      determine when an error occurred and what it was.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-functions"></a>29.2.3. C API Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#mysql-affected-rows">29.2.3.1. <code class="literal">mysql_affected_rows()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-autocommit">29.2.3.2. <code class="literal">mysql_autocommit()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-change-user">29.2.3.3. <code class="literal">mysql_change_user()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-character-set-name">29.2.3.4. <code class="literal">mysql_character_set_name()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-close">29.2.3.5. <code class="literal">mysql_close()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-commit">29.2.3.6. <code class="literal">mysql_commit()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-connect">29.2.3.7. <code class="literal">mysql_connect()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-create-db">29.2.3.8. <code class="literal">mysql_create_db()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-data-seek">29.2.3.9. <code class="literal">mysql_data_seek()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-debug">29.2.3.10. <code class="literal">mysql_debug()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-drop-db">29.2.3.11. <code class="literal">mysql_drop_db()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-dump-debug-info">29.2.3.12. <code class="literal">mysql_dump_debug_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-eof">29.2.3.13. <code class="literal">mysql_eof()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-errno">29.2.3.14. <code class="literal">mysql_errno()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-error">29.2.3.15. <code class="literal">mysql_error()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-escape-string">29.2.3.16. <code class="literal">mysql_escape_string()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-fetch-field">29.2.3.17. <code class="literal">mysql_fetch_field()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-fetch-field-direct">29.2.3.18. <code class="literal">mysql_fetch_field_direct()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-fetch-fields">29.2.3.19. <code class="literal">mysql_fetch_fields()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-fetch-lengths">29.2.3.20. <code class="literal">mysql_fetch_lengths()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-fetch-row">29.2.3.21. <code class="literal">mysql_fetch_row()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-field-count">29.2.3.22. <code class="literal">mysql_field_count()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-field-seek">29.2.3.23. <code class="literal">mysql_field_seek()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-field-tell">29.2.3.24. <code class="literal">mysql_field_tell()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-free-result">29.2.3.25. <code class="literal">mysql_free_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-character-set-info">29.2.3.26. <code class="literal">mysql_get_character_set_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-client-info">29.2.3.27. <code class="literal">mysql_get_client_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-client-version">29.2.3.28. <code class="literal">mysql_get_client_version()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-host-info">29.2.3.29. <code class="literal">mysql_get_host_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-proto-info">29.2.3.30. <code class="literal">mysql_get_proto_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-server-info">29.2.3.31. <code class="literal">mysql_get_server_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-server-version">29.2.3.32. <code class="literal">mysql_get_server_version()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-get-ssl-cipher">29.2.3.33. <code class="literal">mysql_get_ssl_cipher()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-hex-string">29.2.3.34. <code class="literal">mysql_hex_string()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-info">29.2.3.35. <code class="literal">mysql_info()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-init">29.2.3.36. <code class="literal">mysql_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-insert-id">29.2.3.37. <code class="literal">mysql_insert_id()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-kill">29.2.3.38. <code class="literal">mysql_kill()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-library-end">29.2.3.39. <code class="literal">mysql_library_end()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-library-init">29.2.3.40. <code class="literal">mysql_library_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-list-dbs">29.2.3.41. <code class="literal">mysql_list_dbs()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-list-fields">29.2.3.42. <code class="literal">mysql_list_fields()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-list-processes">29.2.3.43. <code class="literal">mysql_list_processes()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-list-tables">29.2.3.44. <code class="literal">mysql_list_tables()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-more-results">29.2.3.45. <code class="literal">mysql_more_results()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-next-result">29.2.3.46. <code class="literal">mysql_next_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-num-fields">29.2.3.47. <code class="literal">mysql_num_fields()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-num-rows">29.2.3.48. <code class="literal">mysql_num_rows()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-options">29.2.3.49. <code class="literal">mysql_options()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-ping">29.2.3.50. <code class="literal">mysql_ping()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-query">29.2.3.51. <code class="literal">mysql_query()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-real-connect">29.2.3.52. <code class="literal">mysql_real_connect()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-real-escape-string">29.2.3.53. <code class="literal">mysql_real_escape_string()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-real-query">29.2.3.54. <code class="literal">mysql_real_query()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-refresh">29.2.3.55. <code class="literal">mysql_refresh()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-reload">29.2.3.56. <code class="literal">mysql_reload()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-rollback">29.2.3.57. <code class="literal">mysql_rollback()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-row-seek">29.2.3.58. <code class="literal">mysql_row_seek()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-row-tell">29.2.3.59. <code class="literal">mysql_row_tell()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-select-db">29.2.3.60. <code class="literal">mysql_select_db()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-set-character-set">29.2.3.61. <code class="literal">mysql_set_character_set()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-set-local-infile-default">29.2.3.62. <code class="literal">mysql_set_local_infile_default()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-set-local-infile-handler">29.2.3.63. <code class="literal">mysql_set_local_infile_handler()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-set-server-option">29.2.3.64. <code class="literal">mysql_set_server_option()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-shutdown">29.2.3.65. <code class="literal">mysql_shutdown()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-sqlstate">29.2.3.66. <code class="literal">mysql_sqlstate()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-ssl-set">29.2.3.67. <code class="literal">mysql_ssl_set()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stat">29.2.3.68. <code class="literal">mysql_stat()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-store-result">29.2.3.69. <code class="literal">mysql_store_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-thread-id">29.2.3.70. <code class="literal">mysql_thread_id()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-use-result">29.2.3.71. <code class="literal">mysql_use_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-warning-count">29.2.3.72. <code class="literal">mysql_warning_count()</code></a></span></dt></dl></div><p>
      In the descriptions here, a parameter or return value of
      <code class="literal">NULL</code> means <code class="literal">NULL</code> in the sense
      of the C programming language, not a MySQL <code class="literal">NULL</code>
      value.
    </p><p>
      Functions that return a value generally return a pointer or an
      integer. Unless specified otherwise, functions returning a pointer
      return a non-<code class="literal">NULL</code> value to indicate success or
      a <code class="literal">NULL</code> value to indicate an error, and
      functions returning an integer return zero to indicate success or
      non-zero to indicate an error. Note that “<span class="quote">non-zero</span>”
      means just that. Unless the function description says otherwise,
      do not test against a value other than zero:
    </p><pre class="programlisting">if (result)                   /* correct */
    ... error ...

if (result &lt; 0)               /* incorrect */
    ... error ...

if (result == -1)             /* incorrect */
    ... error ...
</pre><p>
      When a function returns an error, the
      <span class="bold"><strong>Errors</strong></span> subsection of the function
      description lists the possible types of errors. You can find out
      which of these occurred by calling
      <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>. A string
      representation of the error may be obtained by calling
      <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>.
    </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
        MySQL Enterprise subscribers will find more information about
        the C API functions in the Knowledge Base articles,
        <a href="https://kb.mysql.com/search.php?cat=search&amp;pagerRow=0&amp;category=17" target="_top">
        The C API</a>. Access to the MySQL Knowledge Base collection
        of articles is one of the advantages of subscribing to MySQL
        Enterprise. For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-affected-rows"></a>29.2.3.1. <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a></h4></div></div></div><a class="indexterm" name="id2466767"></a><p>
        <code class="literal">my_ulonglong mysql_affected_rows(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After executing a statement with
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, returns the
        number of rows changed (for <code class="literal">UPDATE</code>), deleted
        (for <code class="literal">DELETE</code>), or inserted (for
        <code class="literal">INSERT</code>). For <code class="literal">SELECT</code>
        statements,
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> works
        like <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records were
        updated for an <code class="literal">UPDATE</code> statement, no rows
        matched the <code class="literal">WHERE</code> clause in the query or that
        no query has yet been executed. -1 indicates that the query
        returned an error or that, for a <code class="literal">SELECT</code>
        query, <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>
        was called prior to calling
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. Because
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
        an unsigned value, you can check for -1 by comparing the return
        value to <code class="literal">(my_ulonglong)-1</code> (or to
        <code class="literal">(my_ulonglong)~0</code>, which is equivalent).
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char *stmt = "UPDATE products SET cost=cost*1.25 WHERE group=10";
mysql_query(&amp;mysql,stmt);
printf("%ld products updated",
       (long) mysql_affected_rows(&amp;mysql));
</pre><p>
        For <code class="literal">UPDATE</code> statements, if you specify the
        <code class="literal">CLIENT_FOUND_ROWS</code> flag when connecting to
        <span><strong class="command">mysqld</strong></span>,
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
        the number of rows matched by the <code class="literal">WHERE</code>
        clause. Otherwise, the default behavior is to return the number
        of rows actually changed.
      </p><p>
        Note that when you use a <code class="literal">REPLACE</code> command,
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns 2
        if the new row replaced an old row, because in this case, one
        row was inserted after the duplicate was deleted.
      </p><p>
        If you use <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>
        to insert a row,
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns 1
        if the row is inserted as a new row and 2 if an existing row is
        updated.
      </p><p>
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> returns
        <code class="literal">0</code> following a <code class="literal">CALL</code>
        statement for a stored procedure that contains a statement that
        modifies rows because in this case
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> applies to
        <code class="literal">CALL</code> and not the statement within the
        procedure. Within the procedure, you can use
        <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> at the SQL level to
        obtain the <code class="literal">AUTO_INCREMENT</code> value.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-autocommit"></a>29.2.3.2. <a href="apis.html#mysql-autocommit" title="29.2.3.2. mysql_autocommit()"><code class="literal">mysql_autocommit()</code></a></h4></div></div></div><a class="indexterm" name="id2467082"></a><p>
        <code class="literal">my_bool mysql_autocommit(MYSQL *mysql, my_bool
        mode)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets autocommit mode on if <code class="literal">mode</code> is 1, off if
        <code class="literal">mode</code> is 0.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-change-user"></a>29.2.3.3. <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a></h4></div></div></div><a class="indexterm" name="id2467164"></a><p>
        <code class="literal">my_bool mysql_change_user(MYSQL *mysql, const char
        *user, const char *password, const char *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Changes the user and causes the database specified by
        <code class="literal">db</code> to become the default (current) database
        on the connection specified by <code class="literal">mysql</code>. In
        subsequent queries, this database is the default for table
        references that do not include an explicit database specifier.
      </p><p>
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> fails if
        the connected user cannot be authenticated or doesn't have
        permission to use the database. In this case, the user and
        database are not changed.
      </p><p>
        The <code class="literal">db</code> parameter may be set to
        <code class="literal">NULL</code> if you don't want to have a default
        database.
      </p><p>
        This command resets the state as if one had done a new connect.
        (See <a href="apis.html#auto-reconnect" title="29.2.13. Controlling Automatic Reconnect Behavior">Section 29.2.13, “Controlling Automatic Reconnect Behavior”</a>.) It always performs a
        <code class="literal">ROLLBACK</code> of any active transactions, closes
        and drops all temporary tables, and unlocks all locked tables.
        Session system variables are reset to the values of the
        corresponding global system variables. Prepared statements are
        released and <code class="literal">HANDLER</code> variables are closed.
        Locks acquired with <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
        are released. These effects occur even if the user didn't
        change.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        The same that you can get from
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li><li><p>
            <code class="literal">ER_UNKNOWN_COM_ERROR</code>
          </p><p>
            The MySQL server doesn't implement this command (probably an
            old server).
          </p></li><li><p>
            <code class="literal">ER_ACCESS_DENIED_ERROR</code>
          </p><p>
            The user or password was wrong.
          </p></li><li><p>
            <code class="literal">ER_BAD_DB_ERROR</code>
          </p><p>
            The database didn't exist.
          </p></li><li><p>
            <code class="literal">ER_DBACCESS_DENIED_ERROR</code>
          </p><p>
            The user did not have access rights to the database.
          </p></li><li><p>
            <code class="literal">ER_WRONG_DB_NAME</code>
          </p><p>
            The database name was too long.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if (mysql_change_user(&amp;mysql, "user", "password", "new_database"))
{
   fprintf(stderr, "Failed to change user.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-character-set-name"></a>29.2.3.4. <a href="apis.html#mysql-character-set-name" title="29.2.3.4. mysql_character_set_name()"><code class="literal">mysql_character_set_name()</code></a></h4></div></div></div><a class="indexterm" name="id2467478"></a><p>
        <code class="literal">const char *mysql_character_set_name(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the default character set name for the current
        connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The default character set name
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-close"></a>29.2.3.5. <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a></h4></div></div></div><a class="indexterm" name="id2467547"></a><p>
        <code class="literal">void mysql_close(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Closes a previously opened connection.
        <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> also deallocates
        the connection handle pointed to by <code class="literal">mysql</code> if
        the handle was allocated automatically by
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> or
        <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-commit"></a>29.2.3.6. <a href="apis.html#mysql-commit" title="29.2.3.6. mysql_commit()"><code class="literal">mysql_commit()</code></a></h4></div></div></div><a class="indexterm" name="id2467644"></a><p>
        <code class="literal">my_bool mysql_commit(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Commits the current transaction.
      </p><p>
        The action of this function is subject to the value of the
        <code class="literal">completion_type</code> system variable. In
        particular, if the value of <code class="literal">completion_type</code>
        is 2, the server performs a release after terminating a
        transaction and closes the client connection. The client program
        should call <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to
        close the connection from the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-connect"></a>29.2.3.7. <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a></h4></div></div></div><a class="indexterm" name="id2467739"></a><p>
        <code class="literal">MYSQL *mysql_connect(MYSQL *mysql, const char *host,
        const char *user, const char *passwd)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is deprecated. Use
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> instead.
      </p><p>
        <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> attempts to
        establish a connection to a MySQL database engine running on
        <code class="literal">host</code>.
        <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> must complete
        successfully before you can execute any of the other API
        functions, with the exception of
        <a href="apis.html#mysql-get-client-info" title="29.2.3.27. mysql_get_client_info()"><code class="literal">mysql_get_client_info()</code></a>.
      </p><p>
        The meanings of the parameters are the same as for the
        corresponding parameters for
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> with the
        difference that the connection parameter may be
        <code class="literal">NULL</code>. In this case, the C API allocates
        memory for the connection structure automatically and frees it
        when you call <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a>.
        The disadvantage of this approach is that you can't retrieve an
        error message if the connection fails. (To get error information
        from <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>, you must provide
        a valid <code class="literal">MYSQL</code> pointer.)
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Same as for
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        Same as for
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-create-db"></a>29.2.3.8. <a href="apis.html#mysql-create-db" title="29.2.3.8. mysql_create_db()"><code class="literal">mysql_create_db()</code></a></h4></div></div></div><a class="indexterm" name="id2467915"></a><p>
        <code class="literal">int mysql_create_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Creates the database named by the <code class="literal">db</code>
        parameter.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <code class="literal">CREATE DATABASE</code> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the database was created successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if(mysql_create_db(&amp;mysql, "my_database"))
{
   fprintf(stderr, "Failed to create new database.  Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-data-seek"></a>29.2.3.9. <a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a></h4></div></div></div><a class="indexterm" name="id2468094"></a><p>
        <code class="literal">void mysql_data_seek(MYSQL_RES *result, my_ulonglong
        offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Seeks to an arbitrary row in a query result set. The
        <code class="literal">offset</code> value is a row number and should be in
        the range from <code class="literal">0</code> to
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows(result)-1</code></a>.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> may be used
        only in conjunction with
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-debug"></a>29.2.3.10. <a href="apis.html#mysql-debug" title="29.2.3.10. mysql_debug()"><code class="literal">mysql_debug()</code></a></h4></div></div></div><a class="indexterm" name="id2468209"></a><p>
        <code class="literal">void mysql_debug(const char *debug)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Does a <code class="literal">DBUG_PUSH</code> with the given string.
        <a href="apis.html#mysql-debug" title="29.2.3.10. mysql_debug()"><code class="literal">mysql_debug()</code></a> uses the Fred
        Fish debug library. To use this function, you must compile the
        client library to support debugging. See
        <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
        Internals: Porting</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The call shown here causes the client library to generate a
        trace file in <code class="filename">/tmp/client.trace</code> on the
        client machine:
      </p><pre class="programlisting">mysql_debug("d:t:O,/tmp/client.trace");
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-drop-db"></a>29.2.3.11. <a href="apis.html#mysql-drop-db" title="29.2.3.11. mysql_drop_db()"><code class="literal">mysql_drop_db()</code></a></h4></div></div></div><a class="indexterm" name="id2468323"></a><p>
        <code class="literal">int mysql_drop_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Drops the database named by the <code class="literal">db</code> parameter.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <code class="literal">DROP DATABASE</code> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the database was dropped successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">if(mysql_drop_db(&amp;mysql, "my_database"))
  fprintf(stderr, "Failed to drop the database: Error: %s\n",
          mysql_error(&amp;mysql));
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-dump-debug-info"></a>29.2.3.12. <a href="apis.html#mysql-dump-debug-info" title="29.2.3.12. mysql_dump_debug_info()"><code class="literal">mysql_dump_debug_info()</code></a></h4></div></div></div><a class="indexterm" name="id2468502"></a><p>
        <code class="literal">int mysql_dump_debug_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Instructs the server to write some debug information to the log.
        For this to work, the connected user must have the
        <code class="literal">SUPER</code> privilege.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the command was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-eof"></a>29.2.3.13. <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a></h4></div></div></div><a class="indexterm" name="id2468642"></a><p>
        <code class="literal">my_bool mysql_eof(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is deprecated.
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> or
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be used
        instead.
      </p><p>
        <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> determines whether
        the last row of a result set has been read.
      </p><p>
        If you acquire a result set from a successful call to
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, the
        client receives the entire set in one operation. In this case, a
        <code class="literal">NULL</code> return from
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> always means
        the end of the result set has been reached and it is unnecessary
        to call <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>. When used
        with <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> always returns
        true.
      </p><p>
        On the other hand, if you use
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to initiate
        a result set retrieval, the rows of the set are obtained from
        the server one by one as you call
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> repeatedly.
        Because an error may occur on the connection during this
        process, a <code class="literal">NULL</code> return value from
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> does not
        necessarily mean the end of the result set was reached normally.
        In this case, you can use
        <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> to determine what
        happened. <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> returns a
        non-zero value if the end of the result set was reached and zero
        if an error occurred.
      </p><p>
        Historically, <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>
        predates the standard MySQL error functions
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> and
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>. Because those
        error functions provide the same information, their use is
        preferred over <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>,
        which is deprecated. (In fact, they provide more information,
        because <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a> returns
        only a boolean value whereas the error functions indicate a
        reason for the error when one occurs.)
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if no error occurred. Non-zero if the end of the result set
        has been reached.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example shows how you might use
        <a href="apis.html#mysql-eof" title="29.2.3.13. mysql_eof()"><code class="literal">mysql_eof()</code></a>:
      </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(!mysql_eof(result))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre><p>
        However, you can achieve the same effect with the standard MySQL
        error functions:
      </p><pre class="programlisting">mysql_query(&amp;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&amp;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(mysql_errno(&amp;mysql))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-errno"></a>29.2.3.14. <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a></h4></div></div></div><a class="indexterm" name="id2468926"></a><p>
        <code class="literal">unsigned int mysql_errno(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the connection specified by <code class="literal">mysql</code>,
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> returns the error
        code for the most recently invoked API function that can succeed
        or fail. A return value of zero means that no error occurred.
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file. Server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>.
        Errors also are listed at <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        Note that some functions like
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> don't set
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if they succeed.
      </p><p>
        A rule of thumb is that all functions that have to ask the
        server for information reset
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if they succeed.
      </p><p>
        MySQL-specific error numbers returned by
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> differ from
        SQLSTATE values returned by
        <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>. For example,
        the <span><strong class="command">mysql</strong></span> client program displays errors
        using the following format, where <code class="literal">1146</code> is the
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
        <code class="literal">'42S02'</code> is the corresponding
        <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last
        <code class="literal">mysql_<em class="replaceable"><code>xxx</code></em>()</code> call,
        if it failed. zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-error"></a>29.2.3.15. <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a></h4></div></div></div><a class="indexterm" name="id2469130"></a><p>
        <code class="literal">const char *mysql_error(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the connection specified by <code class="literal">mysql</code>,
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> returns a
        null-terminated string containing the error message for the most
        recently invoked API function that failed. If a function didn't
        fail, the return value of
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> may be the
        previous error or an empty string to indicate no error.
      </p><p>
        A rule of thumb is that all functions that have to ask the
        server for information reset
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> if they succeed.
      </p><p>
        For functions that reset
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a>, the following
        two tests are equivalent:
      </p><pre class="programlisting">if(*mysql_error(&amp;mysql))
{
  // an error occurred
}

if(mysql_error(&amp;mysql)[0])
{
  // an error occurred
}
</pre><p>
        The language of the client error messages may be changed by
        recompiling the MySQL client library. Currently, you can choose
        error messages in several different languages. See
        <a href="internationalization-localization.html#error-message-language" title="9.3. Setting the Error Message Language">Section 9.3, “Setting the Error Message Language”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string that describes the error. An
        empty string if no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-escape-string"></a>29.2.3.16. <a href="apis.html#mysql-escape-string" title="29.2.3.16. mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a></h4></div></div></div><a class="indexterm" name="id2469261"></a><p>
        You should use
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        instead!
      </p><p>
        This function is identical to
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        except that
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        takes a connection handler as its first argument and escapes the
        string according to the current character set.
        <a href="apis.html#mysql-escape-string" title="29.2.3.16. mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a> does not
        take a connection argument and does not respect the current
        character set.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-field"></a>29.2.3.17. <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a></h4></div></div></div><a class="indexterm" name="id2469322"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_field(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the definition of one column of a result set as a
        <code class="literal">MYSQL_FIELD</code> structure. Call this function
        repeatedly to retrieve information about all columns in the
        result set. <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
        returns <code class="literal">NULL</code> when no more fields are left.
      </p><p>
        <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> is reset to
        return information about the first field each time you execute a
        new <code class="literal">SELECT</code> query. The field returned by
        <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> is also
        affected by calls to
        <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
      </p><p>
        If you've called <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>
        to perform a <code class="literal">SELECT</code> on a table but have not
        called <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        MySQL returns the default blob length (8KB) if you call
        <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> to ask for
        the length of a <code class="literal">BLOB</code> field. (The 8KB size is
        chosen because MySQL doesn't know the maximum length for the
        <code class="literal">BLOB</code>. This should be made configurable
        sometime.) Once you've retrieved the result set,
        <code class="literal">field-&gt;max_length</code> contains the length of
        the largest value for this column in the specific query.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The <code class="literal">MYSQL_FIELD</code> structure for the current
        column. <code class="literal">NULL</code> if no columns are left.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_FIELD *field;

while((field = mysql_fetch_field(result)))
{
    printf("field name %s\n", field-&gt;name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-field-direct"></a>29.2.3.18. <a href="apis.html#mysql-fetch-field-direct" title="29.2.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a></h4></div></div></div><a class="indexterm" name="id2469524"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_field_direct(MYSQL_RES
        *result, unsigned int fieldnr)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Given a field number <code class="literal">fieldnr</code> for a column
        within a result set, returns that column's field definition as a
        <code class="literal">MYSQL_FIELD</code> structure. You may use this
        function to retrieve the definition for an arbitrary column. The
        value of <code class="literal">fieldnr</code> should be in the range from
        0 to
        <a href="apis.html#mysql-num-fields" title="29.2.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields(result)-1</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The <code class="literal">MYSQL_FIELD</code> structure for the specified
        column.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *field;

num_fields = mysql_num_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
    field = mysql_fetch_field_direct(result, i);
    printf("Field %u is %s\n", i, field-&gt;name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-fields"></a>29.2.3.19. <a href="apis.html#mysql-fetch-fields" title="29.2.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a></h4></div></div></div><a class="indexterm" name="id2469645"></a><p>
        <code class="literal">MYSQL_FIELD *mysql_fetch_fields(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns an array of all <code class="literal">MYSQL_FIELD</code>
        structures for a result set. Each structure provides the field
        definition for one column of the result set.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of <code class="literal">MYSQL_FIELD</code> structures for all
        columns of a result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *fields;

num_fields = mysql_num_fields(result);
fields = mysql_fetch_fields(result);
for(i = 0; i &lt; num_fields; i++)
{
   printf("Field %u is %s\n", i, fields[i].name);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-lengths"></a>29.2.3.20. <a href="apis.html#mysql-fetch-lengths" title="29.2.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a></h4></div></div></div><a class="indexterm" name="id2469744"></a><p>
        <code class="literal">unsigned long *mysql_fetch_lengths(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the lengths of the columns of the current row within a
        result set. If you plan to copy field values, this length
        information is also useful for optimization, because you can
        avoid calling <code class="literal">strlen()</code>. In addition, if the
        result set contains binary data, you
        <span class="bold"><strong>must</strong></span> use this function to
        determine the size of the data, because
        <code class="literal">strlen()</code> returns incorrect results for any
        field containing null characters.
      </p><p>
        The length for empty columns and for columns containing
        <code class="literal">NULL</code> values is zero. To see how to
        distinguish these two cases, see the description for
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of unsigned long integers representing the size of each
        column (not including any terminating null characters).
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="apis.html#mysql-fetch-lengths" title="29.2.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a> is valid
        only for the current row of the result set. It returns
        <code class="literal">NULL</code> if you call it before calling
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> or after
        retrieving all rows in the result.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_ROW row;
unsigned long *lengths;
unsigned int num_fields;
unsigned int i;

row = mysql_fetch_row(result);
if (row)
{
    num_fields = mysql_num_fields(result);
    lengths = mysql_fetch_lengths(result);
    for(i = 0; i &lt; num_fields; i++)
    {
         printf("Column %u is %lu bytes in length.\n", 
                i, lengths[i]);
    }
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-fetch-row"></a>29.2.3.21. <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a></h4></div></div></div><a class="indexterm" name="id2469898"></a><p>
        <code class="literal">MYSQL_ROW mysql_fetch_row(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Retrieves the next row of a result set. When used after
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
        <code class="literal">NULL</code> when there are no more rows to retrieve.
        When used after
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> returns
        <code class="literal">NULL</code> when there are no more rows to retrieve
        or if an error occurred.
      </p><p>
        The number of values in the row is given by
        <a href="apis.html#mysql-num-fields" title="29.2.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields(result)</code></a>. If
        <code class="literal">row</code> holds the return value from a call to
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>, pointers to
        the values are accessed as <code class="literal">row[0]</code> to
        <code class="literal">row[mysql_num_fields(result)-1]</code>.
        <code class="literal">NULL</code> values in the row are indicated by
        <code class="literal">NULL</code> pointers.
      </p><p>
        The lengths of the field values in the row may be obtained by
        calling <a href="apis.html#mysql-fetch-lengths" title="29.2.3.20. mysql_fetch_lengths()"><code class="literal">mysql_fetch_lengths()</code></a>.
        Empty fields and fields containing <code class="literal">NULL</code> both
        have length 0; you can distinguish these by checking the pointer
        for the field value. If the pointer is <code class="literal">NULL</code>,
        the field is <code class="literal">NULL</code>; otherwise, the field is
        empty.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_ROW</code> structure for the next row.
        <code class="literal">NULL</code> if there are no more rows to retrieve or
        if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        Note that error is not reset between calls to
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_ROW row;
unsigned int num_fields;
unsigned int i;

num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
   unsigned long *lengths;
   lengths = mysql_fetch_lengths(result);
   for(i = 0; i &lt; num_fields; i++)
   {
       printf("[%.*s] ", (int) lengths[i], 
              row[i] ? row[i] : "NULL");
   }
   printf("\n");
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-count"></a>29.2.3.22. <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a></h4></div></div></div><a class="indexterm" name="id2470161"></a><p>
        <code class="literal">unsigned int mysql_field_count(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns for the most recent query on the
        connection.
      </p><p>
        The normal use of this function is when
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returned
        <code class="literal">NULL</code> (and thus you have no result set
        pointer). In this case, you can call
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to
        determine whether
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> should
        have produced a non-empty result. This allows the client program
        to take proper action without knowing whether the query was a
        <code class="literal">SELECT</code> (or <code class="literal">SELECT</code>-like)
        statement. The example shown here illustrates how this may be
        done.
      </p><p>
        See <a href="apis.html#null-mysql-store-result" title="29.2.14.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 29.2.14.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
    }
}
</pre><p>
        An alternative is to replace the
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
        call with
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a>. In
        this case, you are checking directly for an error from
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> rather
        than inferring from the value of
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> whether the
        statement was a <code class="literal">SELECT</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-seek"></a>29.2.3.23. <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a></h4></div></div></div><a class="indexterm" name="id2470352"></a><p>
        <code class="literal">MYSQL_FIELD_OFFSET mysql_field_seek(MYSQL_RES *result,
        MYSQL_FIELD_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the field cursor to the given offset. The next call to
        <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a> retrieves
        the field definition of the column associated with that offset.
      </p><p>
        To seek to the beginning of a row, pass an
        <code class="literal">offset</code> value of zero.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the field cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-field-tell"></a>29.2.3.24. <a href="apis.html#mysql-field-tell" title="29.2.3.24. mysql_field_tell()"><code class="literal">mysql_field_tell()</code></a></h4></div></div></div><a class="indexterm" name="id2470439"></a><p>
        <code class="literal">MYSQL_FIELD_OFFSET mysql_field_tell(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the position of the field cursor used for the last
        <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>. This value
        can be used as an argument to
        <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the field cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-free-result"></a>29.2.3.25. <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a></h4></div></div></div><a class="indexterm" name="id2470523"></a><p>
        <code class="literal">void mysql_free_result(MYSQL_RES *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Frees the memory allocated for a result set by
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="apis.html#mysql-list-dbs" title="29.2.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a>, and so forth.
        When you are done with a result set, you must free the memory it
        uses by calling
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        Do not attempt to access a result set after freeing it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-character-set-info"></a>29.2.3.26. <a href="apis.html#mysql-get-character-set-info" title="29.2.3.26. mysql_get_character_set_info()"><code class="literal">mysql_get_character_set_info()</code></a></h4></div></div></div><a class="indexterm" name="id2470626"></a><p>
        <code class="literal">void mysql_get_character_set_info(MYSQL *mysql,
        MY_CHARSET_INFO *cs)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function provides information about the default client
        character set. The default character set may be changed with the
        <a href="apis.html#mysql-set-character-set" title="29.2.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
        function.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        This example shows the fields that are available in the
        <code class="literal">MY_CHARSET_INFO</code> structure:
      </p><pre class="programlisting">if (!mysql_set_character_set(&amp;mysql, "utf8"))
{
    MY_CHARSET_INFO cs;
    mysql_get_character_set_info(&amp;mysql, &amp;cs);
    printf("character set information:\n");
    printf("character set+collation number: %d\n", cs.number);
    printf("character set name: %s\n", cs.name);
    printf("collation name: %s\n", cs.csname);
    printf("comment: %s\n", cs.comment);
    printf("directory: %s\n", cs.dir);
    printf("multi byte character min. length: %d\n", cs.mbminlen);
    printf("multi byte character max. length: %d\n", cs.mbmaxlen);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-client-info"></a>29.2.3.27. <a href="apis.html#mysql-get-client-info" title="29.2.3.27. mysql_get_client_info()"><code class="literal">mysql_get_client_info()</code></a></h4></div></div></div><a class="indexterm" name="id2470714"></a><p>
        <code class="literal">const char *mysql_get_client_info(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string that represents the client library version.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that represents the MySQL client library
        version.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-client-version"></a>29.2.3.28. <a href="apis.html#mysql-get-client-version" title="29.2.3.28. mysql_get_client_version()"><code class="literal">mysql_get_client_version()</code></a></h4></div></div></div><a class="indexterm" name="id2470785"></a><p>
        <code class="literal">unsigned long mysql_get_client_version(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns an integer that represents the client library version.
        The value has the format <code class="literal">XYYZZ</code> where
        <code class="literal">X</code> is the major version, <code class="literal">YY</code>
        is the release level, and <code class="literal">ZZ</code> is the version
        number within the release level. For example, a value of
        <code class="literal">40102</code> represents a client library version of
        <code class="literal">4.1.2</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer that represents the MySQL client library version.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-host-info"></a>29.2.3.29. <a href="apis.html#mysql-get-host-info" title="29.2.3.29. mysql_get_host_info()"><code class="literal">mysql_get_host_info()</code></a></h4></div></div></div><a class="indexterm" name="id2470891"></a><p>
        <code class="literal">const char *mysql_get_host_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string describing the type of connection in use,
        including the server hostname.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server hostname and the
        connection type.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-proto-info"></a>29.2.3.30. <a href="apis.html#mysql-get-proto-info" title="29.2.3.30. mysql_get_proto_info()"><code class="literal">mysql_get_proto_info()</code></a></h4></div></div></div><a class="indexterm" name="id2470961"></a><p>
        <code class="literal">unsigned int mysql_get_proto_info(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the protocol version used by current connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the protocol version used by
        the current connection.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-server-info"></a>29.2.3.31. <a href="apis.html#mysql-get-server-info" title="29.2.3.31. mysql_get_server_info()"><code class="literal">mysql_get_server_info()</code></a></h4></div></div></div><a class="indexterm" name="id2471031"></a><p>
        <code class="literal">const char *mysql_get_server_info(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a string that represents the server version number.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that represents the server version number.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-server-version"></a>29.2.3.32. <a href="apis.html#mysql-get-server-version" title="29.2.3.32. mysql_get_server_version()"><code class="literal">mysql_get_server_version()</code></a></h4></div></div></div><a class="indexterm" name="id2471102"></a><p>
        <code class="literal">unsigned long mysql_get_server_version(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the version number of the server as an integer.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A number that represents the MySQL server version in this
        format:
      </p><pre class="programlisting">major_version*10000 + minor_version *100 + sub_version
</pre><p>
        For example, 5.1.5 is returned as 50105.
      </p><p>
        This function is useful in client programs for quickly
        determining whether some version-specific server capability
        exists.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-get-ssl-cipher"></a>29.2.3.33. <a href="apis.html#mysql-get-ssl-cipher" title="29.2.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a></h4></div></div></div><a class="indexterm" name="id2471186"></a><p>
        <code class="literal">const char *mysql_get_ssl_cipher(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-get-ssl-cipher" title="29.2.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a> returns
        the SSL cipher used for the given connection to the server.
        <code class="literal">mysql</code> is the connection handler returned from
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
      </p><p>
        This function was added in MySQL 5.1.11.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string naming the SSL cipher used for the connection, or
        <code class="literal">NULL</code> if no cipher is being used.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-hex-string"></a>29.2.3.34. <a href="apis.html#mysql-hex-string" title="29.2.3.34. mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a></h4></div></div></div><a class="indexterm" name="id2471274"></a><p>
        <code class="literal">unsigned long mysql_hex_string(char *to, const char
        *from, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. See <a href="language-structure.html#string-syntax" title="8.1.1. Strings">Section 8.1.1, “Strings”</a>.
      </p><p>
        The string in <code class="literal">from</code> is encoded to hexadecimal
        format, with each character encoded as two hexadecimal digits.
        The result is placed in <code class="literal">to</code> and a terminating
        null byte is appended.
      </p><p>
        The string pointed to by <code class="literal">from</code> must be
        <code class="literal">length</code> bytes long. You must allocate the
        <code class="literal">to</code> buffer to be at least
        <code class="literal">length*2+1</code> bytes long. When
        <a href="apis.html#mysql-hex-string" title="29.2.3.34. mysql_hex_string()"><code class="literal">mysql_hex_string()</code></a> returns, the
        contents of <code class="literal">to</code> is a null-terminated string.
        The return value is the length of the encoded string, not
        including the terminating null character.
      </p><p>
        The return value can be placed into an SQL statement using
        either <code class="literal">0x<em class="replaceable"><code>value</code></em></code> or
        <code class="literal">X'<em class="replaceable"><code>value</code></em>'</code> format.
        However, the return value does not include the
        <code class="literal">0x</code> or <code class="literal">X'...'</code>. The caller
        must supply whichever of those is desired.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
end = strmov(end,"0x");
end += mysql_hex_string(end,"What's this",11);
end = strmov(end,",0x");
end += mysql_hex_string(end,"binary data: \0\r\n",16);
*end++ = ')';

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
        The <code class="literal">strmov()</code> function used in the example is
        included in the <code class="literal">mysqlclient</code> library and works
        like <code class="literal">strcpy()</code> but returns a pointer to the
        terminating null of the first parameter.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the value placed into <code class="literal">to</code>, not
        including the terminating null character.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-info"></a>29.2.3.35. <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a></h4></div></div></div><a class="indexterm" name="id2471488"></a><p>
        <code class="literal">const char *mysql_info(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Retrieves a string providing information about the most recently
        executed statement, but only for the statements listed here. For
        other statements, <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>
        returns <code class="literal">NULL</code>. The format of the string varies
        depending on the type of statement, as described here. The
        numbers are illustrative only; the string contains values
        appropriate for the statement.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">INSERT INTO ... SELECT ...</code>
          </p><p>
            String format: <code class="literal">Records: 100 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <code class="literal">INSERT INTO ... VALUES
            (...),(...),(...)...</code>
          </p><p>
            String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <code class="literal">LOAD DATA INFILE ...</code>
          </p><p>
            String format: <code class="literal">Records: 1 Deleted: 0 Skipped: 0
            Warnings: 0</code>
          </p></li><li><p>
            <code class="literal">ALTER TABLE</code>
          </p><p>
            String format: <code class="literal">Records: 3 Duplicates: 0 Warnings:
            0</code>
          </p></li><li><p>
            <code class="literal">UPDATE</code>
          </p><p>
            String format: <code class="literal">Rows matched: 40 Changed: 40
            Warnings: 0</code>
          </p></li></ul></div><p>
        Note that <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> returns
        a non-<code class="literal">NULL</code> value for <code class="literal">INSERT ...
        VALUES</code> only for the multiple-row form of the statement
        (that is, only if multiple value lists are specified).
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing additional information about the
        most recently executed statement. <code class="literal">NULL</code> if no
        information is available for the statement.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-init"></a>29.2.3.36. <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a></h4></div></div></div><a class="indexterm" name="id2471716"></a><p>
        <code class="literal">MYSQL *mysql_init(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Allocates or initializes a <code class="literal">MYSQL</code> object
        suitable for
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. If
        <code class="literal">mysql</code> is a <code class="literal">NULL</code> pointer,
        the function allocates, initializes, and returns a new object.
        Otherwise, the object is initialized and the address of the
        object is returned. If
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> allocates a new
        object, it is freed when
        <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> is called to
        close the connection.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An initialized <code class="literal">MYSQL*</code> handle.
        <code class="literal">NULL</code> if there was insufficient memory to
        allocate a new object.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        In case of insufficient memory, <code class="literal">NULL</code> is
        returned.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-insert-id"></a>29.2.3.37. <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a></h4></div></div></div><a class="indexterm" name="id2471845"></a><p>
        <code class="literal">my_ulonglong mysql_insert_id(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the value generated for an
        <code class="literal">AUTO_INCREMENT</code> column by the previous
        <code class="literal">INSERT</code> or <code class="literal">UPDATE</code>
        statement. Use this function after you have performed an
        <code class="literal">INSERT</code> statement into a table that contains
        an <code class="literal">AUTO_INCREMENT</code> field, or have used
        <code class="literal">INSERT</code> or <code class="literal">UPDATE</code> to set a
        column value with
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
      </p><p>
        The return value of
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is always
        zero unless explicitly updated under one of the following
        conditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">INSERT</code> statements that store a value into
            an <code class="literal">AUTO_INCREMENT</code> column. This is true
            whether the value is automatically generated by storing the
            special values <code class="literal">NULL</code> or
            <code class="literal">0</code> into the column, or is an explicit
            non-special value.
          </p></li><li><p>
            In the case of a multiple-row <code class="literal">INSERT</code>
            statement, the return value of
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> depends
            on the MySQL server version.
          </p><p>
            In MySQL 5.1.12 and later,
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the <span class="emphasis"><em>first</em></span> automatically generated
            <code class="literal">AUTO_INCREMENT</code> value that was
            <span class="emphasis"><em>successfully</em></span> inserted. In MySQL 5.1.11
            and earlier,
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the <span class="emphasis"><em>first</em></span> automatically generated
            <code class="literal">AUTO_INCREMENT</code> value, regardless of
            whether insertion of that value was successful.
          </p><p>
            If no rows are successfully inserted,
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            0.
          </p></li><li><p>
            Starting in MySQL 5.1.12, if an <code class="literal">INSERT ...
            SELECT</code> statement is executed, and no automatically
            generated value is successfully inserted,
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the ID of the last inserted row.
          </p></li><li><p>
            Starting in MySQL 5.1.12, if an <code class="literal">INSERT ...
            SELECT</code> statement uses
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>,
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            <em class="replaceable"><code>expr</code></em>.
          </p></li><li><p>
            <code class="literal">INSERT</code> statements that generate an
            <code class="literal">AUTO_INCREMENT</code> value by inserting
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
            into any column or by updating any column to
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
          </p></li><li><p>
            If the previous statement returned an error, the value of
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is
            undefined.
          </p></li></ul></div><p>
        For 5.1.12 and later, the return value of
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> can be
        simplified to the following sequence:
      </p><div class="orderedlist"><ol type="1"><li><p>
            If there is an <code class="literal">AUTO_INCREMENT</code> column, and
            an automatically generated value was successfully inserted,
            return the first such value.
          </p></li><li><p>
            If
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
            occurred in the statement, return
            <em class="replaceable"><code>expr</code></em>, even if there was an
            <code class="literal">AUTO_INCREMENT</code> column in the affected
            table.
          </p></li><li><p>
            The return value varies depending on the statement used.
            When called after an <code class="literal">INSERT</code> statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                If there is an <code class="literal">AUTO_INCREMENT</code> column
                in the table, and there were some explicit values for
                this column that were successfully inserted into the
                table, return the last of the explicit values.
              </p></li></ul></div><p>
            When called after an <code class="literal">INSERT ... ON DUPLICATE
            KEY</code> statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                If there is an <code class="literal">AUTO_INCREMENT</code> column
                in the table and there were some explicit succesfully
                inserted values, or some updated rows, return the last
                of the inserted or updated values.
              </p></li></ul></div></li></ol></div><p>
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
        <code class="literal">0</code> if the previous statement does not use an
        <code class="literal">AUTO_INCREMENT</code> value. If you need to save the
        value for later, be sure to call
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> immediately
        after the statement that generates the value.
      </p><p>
        The value of <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
        is affected only by statements issued within the current client
        connection. It is not affected by statements issued by other
        clients.
      </p><p>
        The <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> SQL
        function returns the value of the first automatically generated
        value that was successfully inserted (starting from 5.1.12) or
        the first automatically generated value if any rows were
        successfully inserted (before 5.1.12).
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not reset
        between statements because the value of that function is
        maintained in the server. Another difference from
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not updated
        if you set an <code class="literal">AUTO_INCREMENT</code> column to a
        specific non-special value. See
        <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
      </p><p>
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
        <code class="literal">0</code> following a <code class="literal">CALL</code>
        statement for a stored procedure that generates an
        <code class="literal">AUTO_INCREMENT</code> value because in this case
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> applies to
        <code class="literal">CALL</code> and not the statement within the
        procedure. Within the procedure, you can use
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> at the SQL
        level to obtain the <code class="literal">AUTO_INCREMENT</code> value.
      </p><p>
        The reason for the differences between
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is that
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is made easy to
        use in scripts while
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> tries to
        provide more exact information about what happens to the
        <code class="literal">AUTO_INCREMENT</code> column.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Described in the preceding discussion.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-kill"></a>29.2.3.38. <a href="apis.html#mysql-kill" title="29.2.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a></h4></div></div></div><a class="indexterm" name="id2472502"></a><p>
        <code class="literal">int mysql_kill(MYSQL *mysql, unsigned long
        pid)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the server to kill the thread specified by
        <code class="literal">pid</code>.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <code class="literal">KILL</code> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-library-end"></a>29.2.3.39. <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a></h4></div></div></div><a class="indexterm" name="id2472664"></a><p>
        <code class="literal">void mysql_library_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function finalizes the MySQL library. You should call it
        when you are done using the library (for example, after
        disconnecting from the server). The action taken by the call
        depends on whether your application is linked to the MySQL
        client library or the MySQL embedded server library. For a
        client program linked against the
        <code class="literal">libmysqlclient</code> library by using the
        <code class="option">-lmysqlclient</code> flag,
        <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> performs
        some memory management to clean up. For an embedded server
        application linked against the <code class="literal">libmysqld</code>
        library by using the <code class="option">-lmysqld</code> flag,
        <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> shuts down
        the embedded server and then cleans up.
      </p><p>
        See <a href="apis.html#c-api-function-overview" title="29.2.2. C API Function Overview">Section 29.2.2, “C API Function Overview”</a>, and
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()">Section 29.2.3.40, “<code class="literal">mysql_library_init()</code>”</a>, for usage information.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-library-init"></a>29.2.3.40. <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a></h4></div></div></div><a class="indexterm" name="id2472759"></a><p>
        <code class="literal">int mysql_library_init(int argc, char **argv, char
        **groups)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function should be called to initialize the MySQL library
        before you call any other MySQL function. If your application
        uses the embedded server, this call starts the server and
        initializes any subsystems (<code class="literal">mysys</code>,
        <code class="literal">InnoDB</code>, and so forth) that the server uses.
      </p><p>
        In a non-multi-threaded environment, the call to
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> may be
        omitted, because <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>
        will invoke it automatically as necessary. However,
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> is not
        thread-safe in a multi-threaded environment, and thus neither is
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, which calls
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>. You must
        either call
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> prior to
        spawning any threads, or else use a mutex to protect the call,
        whether you invoke
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> or
        indirectly via <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
        This should be done prior to any other client library call.
      </p><p>
        After your application is done using the MySQL library, call
        <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> to clean
        up. See <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()">Section 29.2.3.39, “<code class="literal">mysql_library_end()</code>”</a>.
      </p><p>
        The <code class="literal">argc</code> and <code class="literal">argv</code>
        arguments are analogous to the arguments to
        <code class="literal">main()</code>. The first element of
        <code class="literal">argv</code> is ignored (it typically contains the
        program name). For convenience, <code class="literal">argc</code> may be
        <code class="literal">0</code> (zero) if there are no command-line
        arguments for the server.
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> makes a
        copy of the arguments so it is safe to destroy
        <code class="literal">argv</code> or <code class="literal">groups</code> after the
        call.
      </p><p>
        If you want to connect to an external server without starting
        the embedded server, you have to specify a negative value for
        <code class="literal">argc</code>.
      </p><p>
        The <code class="literal">groups</code> argument should be an array of
        strings that indicate the groups in option files from which
        options should be read. See <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>. The
        final entry in the array should be <code class="literal">NULL</code>. For
        convenience, if the <code class="literal">groups</code> argument itself is
        <code class="literal">NULL</code>, the <code class="literal">[server]</code> and
        <code class="literal">[embedded]</code> groups are used by default.
      </p><p>
        See <a href="apis.html#c-api-function-overview" title="29.2.2. C API Function Overview">Section 29.2.2, “C API Function Overview”</a>, for additional
        usage information.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">#include &lt;mysql.h&gt;
#include &lt;stdlib.h&gt;

static char *server_args[] = {
  "this_program",       /* this string is not used */
  "--datadir=.",
  "--key_buffer_size=32M"
};
static char *server_groups[] = {
  "embedded",
  "server",
  "this_program_SERVER",
  (char *)NULL
};

int main(void) {
  if (mysql_library_init(sizeof(server_args) / sizeof(char *),
                        server_args, server_groups)) {
    fprintf(stderr, "could not initialize MySQL library\n");
    exit(1);
  }

  /* Use any MySQL API functions here */

  mysql_library_end();

  return EXIT_SUCCESS;
}
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-dbs"></a>29.2.3.41. <a href="apis.html#mysql-list-dbs" title="29.2.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a></h4></div></div></div><a class="indexterm" name="id2473059"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_dbs(MYSQL *mysql, const char
        *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of database names on the server
        that match the simple regular expression specified by the
        <code class="literal">wild</code> parameter. <code class="literal">wild</code> may
        contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all databases. Calling
        <a href="apis.html#mysql-list-dbs" title="29.2.3.41. mysql_list_dbs()"><code class="literal">mysql_list_dbs()</code></a> is similar to
        executing the query <code class="literal">SHOW databases [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        You must free the result set with
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-fields"></a>29.2.3.42. <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a></h4></div></div></div><a class="indexterm" name="id2473280"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_fields(MYSQL *mysql, const char
        *table, const char *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of field names in the given
        table that match the simple regular expression specified by the
        <code class="literal">wild</code> parameter. <code class="literal">wild</code> may
        contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all fields. Calling
        <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a> is similar
        to executing the query <code class="literal">SHOW COLUMNS FROM
        <em class="replaceable"><code>tbl_name</code></em> [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        Note that it's recommended that you use <code class="literal">SHOW COLUMNS
        FROM <em class="replaceable"><code>tbl_name</code></em></code> instead of
        <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a>.
      </p><p>
        You must free the result set with
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-processes"></a>29.2.3.43. <a href="apis.html#mysql-list-processes" title="29.2.3.43. mysql_list_processes()"><code class="literal">mysql_list_processes()</code></a></h4></div></div></div><a class="indexterm" name="id2473509"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_processes(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set describing the current server threads. This
        is the same kind of information as that reported by
        <span><strong class="command">mysqladmin processlist</strong></span> or a <code class="literal">SHOW
        PROCESSLIST</code> query.
      </p><p>
        You must free the result set with
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-list-tables"></a>29.2.3.44. <a href="apis.html#mysql-list-tables" title="29.2.3.44. mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a></h4></div></div></div><a class="indexterm" name="id2473677"></a><p>
        <code class="literal">MYSQL_RES *mysql_list_tables(MYSQL *mysql, const char
        *wild)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a result set consisting of table names in the current
        database that match the simple regular expression specified by
        the <code class="literal">wild</code> parameter. <code class="literal">wild</code>
        may contain the wildcard characters
        “<span class="quote"><code class="literal">%</code></span>” or
        “<span class="quote"><code class="literal">_</code></span>”, or may be a
        <code class="literal">NULL</code> pointer to match all tables. Calling
        <a href="apis.html#mysql-list-tables" title="29.2.3.44. mysql_list_tables()"><code class="literal">mysql_list_tables()</code></a> is similar
        to executing the query <code class="literal">SHOW tables [LIKE
        <em class="replaceable"><code>wild</code></em>]</code>.
      </p><p>
        You must free the result set with
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result set for success.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-more-results"></a>29.2.3.45. <a href="apis.html#mysql-more-results" title="29.2.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a></h4></div></div></div><a class="indexterm" name="id2473883"></a><p>
        <code class="literal">my_bool mysql_more_results(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used when you execute multiple statements
        specified as a single statement string, or when you execute
        <code class="literal">CALL</code> statements, which can return multiple
        result sets.
      </p><p>
        <a href="apis.html#mysql-more-results" title="29.2.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a> true if
        more results exist from the currently executed statement, in
        which case the application must call
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to fetch
        the results.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="literal">TRUE</code> (1) if more results exist.
        <code class="literal">FALSE</code> (0) if no more results exist.
      </p><p>
        In most cases, you can call
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> instead to
        test whether more results exist and initiate retrieval if so.
      </p><p>
        See <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>, and
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()">Section 29.2.3.46, “<code class="literal">mysql_next_result()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-next-result"></a>29.2.3.46. <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a></h4></div></div></div><a class="indexterm" name="id2474014"></a><p>
        <code class="literal">int mysql_next_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used when you execute multiple statements
        specified as a single statement string, or when you execute
        <code class="literal">CALL</code> statements, which can return multiple
        result sets.
      </p><p>
        If more statement results exist,
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> reads the
        next statement result and returns the status back to the
        application.
      </p><p>
        Before calling
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, you must
        call <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> for
        the preceding statement if it is a query that returned a result
        set.
      </p><p>
        After calling
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> the state
        of the connection is as if you had called
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> or
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> for the next
        statement. This means that you can call
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="apis.html#mysql-warning-count" title="29.2.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a>,
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>, and so
        forth.
      </p><p>
        If <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> returns
        an error, no other statements are executed and there are no more
        results to fetch.
      </p><p>
        If your program executes stored procedures with the
        <code class="literal">CALL</code> SQL statement, you
        <span class="emphasis"><em>must</em></span> set the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag explicitly, or
        implicitly by setting <code class="literal">CLIENT_MULTI_STATEMENTS</code>
        when you call
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. This is
        because each <code class="literal">CALL</code> returns a result to
        indicate the call status, in addition to any results sets that
        might be returned by statements executed within the procedure.
        In addition, because <code class="literal">CALL</code> can return multiple
        results, you should process those results using a loop that
        calls <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
        determine whether there are more results.
      </p><p>
        For an example that shows how to use
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a>, see
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Return Value</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>0</td><td>Successful and there are more results</td></tr><tr><td>-1</td><td>Successful and there are no more results</td></tr><tr><td>&gt;0</td><td>An error occurred</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order. For example if
            you didn't call
            <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for a
            previous result set.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-num-fields"></a>29.2.3.47. <a href="apis.html#mysql-num-fields" title="29.2.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields()</code></a></h4></div></div></div><a class="indexterm" name="id2474383"></a><a class="indexterm" name="id2474392"></a><p>
        <code class="literal">unsigned int mysql_num_fields(MYSQL_RES
        *result)</code>
      </p><p>
        To pass a <code class="literal">MYSQL*</code> argument instead, use
        <code class="literal">unsigned int mysql_field_count(MYSQL *mysql)</code>.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns in a result set.
      </p><p>
        Note that you can get the number of columns either from a
        pointer to a result set or to a connection handle. You would use
        the connection handle if
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> returned
        <code class="literal">NULL</code> (and thus you have no result set
        pointer). In this case, you can call
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to
        determine whether
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> should
        have produced a non-empty result. This allows the client program
        to take proper action without knowing whether the query was a
        <code class="literal">SELECT</code> (or <code class="literal">SELECT</code>-like)
        statement. The example shown here illustrates how this may be
        done.
      </p><p>
        See <a href="apis.html#null-mysql-store-result" title="29.2.14.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 29.2.14.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&amp;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&amp;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if (mysql_errno(&amp;mysql))
        {
           fprintf(stderr, "Error: %s\n", mysql_error(&amp;mysql));
        }
        else if (mysql_field_count(&amp;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&amp;mysql);
        }
    }
}
</pre><p>
        An alternative (if you know that your query should have returned
        a result set) is to replace the
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno(&amp;mysql)</code></a> call
        with a check whether
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count(&amp;mysql)</code></a>
        returns 0. This happens only if something went wrong.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-num-rows"></a>29.2.3.48. <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a></h4></div></div></div><a class="indexterm" name="id2474585"></a><p>
        <code class="literal">my_ulonglong mysql_num_rows(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>
        depends on whether you use
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> to return
        the result set. If you use
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be called
        immediately. If you use
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> does not
        return the correct value until all the rows in the result set
        have been retrieved.
      </p><p>
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> is intended
        for use with statements that return a result set, such as
        <code class="literal">SELECT</code>. For statements such as
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or
        <code class="literal">DELETE</code>, the number of affected rows can be
        obtained with
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in the result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-options"></a>29.2.3.49. <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a></h4></div></div></div><a class="indexterm" name="id2474751"></a><p>
        <code class="literal">int mysql_options(MYSQL *mysql, enum mysql_option
        option, const void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to set extra connect options and affect behavior for
        a connection. This function may be called multiple times to set
        several options.
      </p><p>
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> should be
        called after <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> and
        before <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> or
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to set; the <code class="literal">arg</code> argument is the value
        for the option. If the option is an integer,
        <code class="literal">arg</code> should point to the value of the integer.
      </p><p>
        The following list describes the possible options, their effect,
        and how <code class="literal">arg</code> is used for each option. Several
        of the options apply only when the application is linked against
        the <code class="literal">libmysqld</code> embedded server library and are
        unused for applications linked against the
        <code class="literal">libmysql</code> client library. For option
        descriptions that indicate <code class="literal">arg</code> is unused, its
        value is irrelevant; it is conventional to pass 0.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">MYSQL_INIT_COMMAND</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            Statement to execute when connecting to the MySQL server.
            Automatically re-executed if reconnection occurs.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_COMPRESS</code> (argument: not used)
          </p><p>
            Use the compressed client/server protocol.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_CONNECT_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            Connect timeout in seconds.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_GUESS_CONNECTION</code> (argument: not
            used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            allows the library to guess whether to use the embedded
            server or a remote server. “<span class="quote">Guess</span>” means that
            if the hostname is set and is not
            <code class="literal">localhost</code>, it uses a remote server. This
            behavior is the default.
            <code class="literal">MYSQL_OPT_USE_EMBEDDED_CONNECTION</code> and
            <code class="literal">MYSQL_OPT_USE_REMOTE_CONNECTION</code> can be
            used to override it. This option is ignored for applications
            linked against the <code class="literal">libmysqlclient</code> client
            library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_LOCAL_INFILE</code> (argument type:
            optional pointer to <code class="literal">unsigned int</code>)
          </p><p>
            If no pointer is given or if pointer points to an
            <code class="literal">unsigned int</code> that has a non-zero value,
            the <code class="literal">LOAD LOCAL INFILE</code> statement is
            enabled.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_NAMED_PIPE</code> (argument: not used)
          </p><p>
            Use named pipes to connect to a MySQL server on Windows, if
            the server allows named-pipe connections.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_PROTOCOL</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            Type of protocol to use. Should be one of the enum values of
            <code class="literal">mysql_protocol_type</code> defined in
            <code class="filename">mysql.h</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_READ_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            The timeout in seconds for attempts to read from the server.
            Each attempt uses this timeout value and there are retries
            if necessary, so the total effective timeout value is three
            times the option value. You can set the value so that a lost
            connection can be detected earlier than the TCP/IP
            <code class="literal">Close_Wait_Timeout</code> value of 10 minutes.
            This option works only for TCP/IP connections, and only for
            Windows prior to MySQL 5.1.12.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_RECONNECT</code> (argument type:
            <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable automatic reconnection to the server if
            the connection is found to have been lost. Reconnect is off
            by default; this option provides a way to set reconnection
            behavior explicitly.
          </p><p>
            Note: <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
            incorrectly reset the <code class="literal">MYSQL_OPT_RECONNECT</code>
            option to its default value before MySQL 5.1.6. Therefore,
            prior to that version, if you want reconnect to be enabled
            for each connection, you must call
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
            <code class="literal">MYSQL_OPT_RECONNECT</code> option after each
            call to
            <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. This
            is not necessary as of 5.1.6: Call
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> only before
            <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> as
            usual.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_SET_CLIENT_IP</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library (when
            <code class="literal">libmysqld</code> is compiled with authentication
            support), this means that the user is considered to have
            connected from the specified IP address (specified as a
            string) for authentication purposes. This option is ignored
            for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code>
            (argument type: <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable verification of the server's Common Name
            value in its certificate against the hostname used when
            connecting to the server. The connection is rejected if
            there is a mismatch. This feature can be used to prevent
            man-in-the-middle attacks. Verification is disabled by
            default. Added in MySQL 5.1.11.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_EMBEDDED_CONNECTION</code>
            (argument: not used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            forces the use of the embedded server for the connection.
            This option is ignored for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_REMOTE_CONNECTION</code>
            (argument: not used)
          </p><p>
            For an application linked against the
            <code class="literal">libmysqld</code> embedded server library, this
            forces the use of a remote server for the connection. This
            option is ignored for applications linked against the
            <code class="literal">libmysqlclient</code> client library.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_USE_RESULT</code> (argument: not used)
          </p><p>
            This option is unused.
          </p></li><li><p>
            <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code> (argument type:
            <code class="literal">unsigned int *</code>)
          </p><p>
            The timeout in seconds for attempts to write to the server.
            Each attempt uses this timeout value and there are
            <code class="literal">net_retry_count</code> retries if necessary, so
            the total effective timeout value is
            <code class="literal">net_retry_count</code> times the option value.
            This option works only for TCP/IP connections, and only for
            Windows prior to MySQL 5.1.12.
          </p></li><li><p>
            <code class="literal">MYSQL_READ_DEFAULT_FILE</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            Read options from the named option file instead of from
            <code class="filename">my.cnf</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            Read options from the named group from
            <code class="filename">my.cnf</code> or the file specified with
            <code class="literal">MYSQL_READ_DEFAULT_FILE</code>.
          </p></li><li><p>
            <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code> (argument
            type: <code class="literal">my_bool *</code>)
          </p><p>
            Enable or disable reporting of data truncation errors for
            prepared statements via the <code class="literal">error</code> member
            of <code class="literal">MYSQL_BIND</code> structures. (Default:
            enabled.)
          </p></li><li><p>
            <code class="literal">MYSQL_SECURE_AUTH</code> (argument type:
            <code class="literal">my_bool *</code>)
          </p><p>
            Whether to connect to a server that does not support the
            password hashing used in MySQL 4.1.1 and later.
          </p></li><li><p>
            <code class="literal">MYSQL_SET_CHARSET_DIR</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            The pathname to the directory that contains character set
            definition files.
          </p></li><li><p>
            <code class="literal">MYSQL_SET_CHARSET_NAME</code> (argument type:
            <code class="literal">char *</code>)
          </p><p>
            The name of the character set to use as the default
            character set.
          </p></li><li><p>
            <code class="literal">MYSQL_SHARED_MEMORY_BASE_NAME</code> (argument
            type: <code class="literal">char *</code>)
          </p><p>
            The name of the shared-memory object for communication to
            the server on Windows, if the server supports shared-memory
            connections. Should have the same value as the
            <code class="option">--shared-memory-base-name</code> option used for
            the <span><strong class="command">mysqld</strong></span> server you want to connect to.
          </p></li></ul></div><p>
        The <code class="literal">client</code> group is always read if you use
        <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
        <code class="literal">MYSQL_READ_DEFAULT_GROUP</code>.
      </p><p>
        The specified group in the option file may contain the following
        options:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Option</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">character-sets-dir=<em class="replaceable"><code>path</code></em></code></td><td>The directory where character sets are installed.</td></tr><tr><td><code class="literal">compress</code></td><td>Use the compressed client/server protocol.</td></tr><tr><td><code class="literal">connect-timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Connect timeout in seconds. On Linux this timeout is also used for
                waiting for the first answer from the server.</td></tr><tr><td><code class="literal">database=<em class="replaceable"><code>db_name</code></em></code></td><td>Connect to this database if no database was specified in the connect
                command.</td></tr><tr><td><code class="literal">debug</code></td><td>Debug options.</td></tr><tr><td><code class="literal">default-character-set=<em class="replaceable"><code>charset_name</code></em></code></td><td>The default character set to use.</td></tr><tr><td><code class="literal">disable-local-infile</code></td><td>Disable use of <code class="literal">LOAD DATA LOCAL</code>.</td></tr><tr><td><code class="literal">host=<em class="replaceable"><code>host_name</code></em></code></td><td>Default hostname.</td></tr><tr><td><code class="literal">init-command=<em class="replaceable"><code>stmt</code></em></code></td><td>Statement to execute when connecting to MySQL server. Automatically
                re-executed if reconnection occurs.</td></tr><tr><td><code class="literal">interactive-timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Same as specifying <code class="literal">CLIENT_INTERACTIVE</code> to
                <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
                See <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()">Section 29.2.3.52, “<code class="literal">mysql_real_connect()</code>”</a>.</td></tr><tr><td><code class="literal">local-infile[={0|1}]</code></td><td>If no argument or non-zero argument, enable use of <code class="literal">LOAD DATA
                LOCAL</code>; otherwise disable.</td></tr><tr><td><code class="literal">max_allowed_packet=<em class="replaceable"><code>bytes</code></em></code></td><td>Maximum size of packet that client can read from server.</td></tr><tr><td><code class="literal">multi-queries</code>, <code class="literal">multi-results</code></td><td>Allow multiple result sets from multiple-statement executions or stored
                procedures.</td></tr><tr><td><code class="literal">multi-statements</code></td><td>Allow the client to send multiple statements in a single string
                (separated by “<span class="quote"><code class="literal">;</code></span>”).</td></tr><tr><td><code class="literal">password=<em class="replaceable"><code>password</code></em></code></td><td>Default password.</td></tr><tr><td><code class="literal">pipe</code></td><td>Use named pipes to connect to a MySQL server on Windows.</td></tr><tr><td><code class="literal">port=<em class="replaceable"><code>port_num</code></em></code></td><td>Default port number.</td></tr><tr><td><code class="literal">protocol={TCP|SOCKET|PIPE|MEMORY}</code></td><td>The protocol to use when connecting to the server.</td></tr><tr><td><code class="literal">return-found-rows</code></td><td>Tell <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> to return found rows
                instead of updated rows when using
                <code class="literal">UPDATE</code>.</td></tr><tr><td><code class="literal">shared-memory-base-name=<em class="replaceable"><code>name</code></em></code></td><td>Shared-memory name to use to connect to server.</td></tr><tr><td><code class="literal">socket=<em class="replaceable"><code>path</code></em></code></td><td>Default socket file.</td></tr><tr><td><code class="literal">ssl-ca=<em class="replaceable"><code>file_name</code></em></code></td><td>Certificate Authority file.</td></tr><tr><td><code class="literal">ssl-capath=<em class="replaceable"><code>path</code></em></code></td><td>Certificate Authority directory.</td></tr><tr><td><code class="literal">ssl-cert=<em class="replaceable"><code>file_name</code></em></code></td><td>Certificate file.</td></tr><tr><td><code class="literal">ssl-cipher=<em class="replaceable"><code>cipher_list</code></em></code></td><td>Allowable SSL ciphers.</td></tr><tr><td><code class="literal">ssl-key=<em class="replaceable"><code>file_name</code></em></code></td><td>Key file.</td></tr><tr><td><code class="literal">timeout=<em class="replaceable"><code>seconds</code></em></code></td><td>Like <code class="literal">connect-timeout</code>.</td></tr><tr><td><code class="literal">user</code></td><td>Default user.</td></tr></tbody></table></div><p>
        <code class="literal">timeout</code> has been replaced by
        <code class="literal">connect-timeout</code>, but
        <code class="literal">timeout</code> is still supported in MySQL
        5.1 for backward compatibility.
      </p><p>
        For more information about option files, see
        <a href="programs.html#option-files" title="4.2.3.2. Using Option Files">Section 4.2.3.2, “Using Option Files”</a>.
      </p><p>
        Before MySQL 5.1.18, the <code class="literal">arg</code> argument was
        declared as <code class="literal">char *</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if you specify an unknown option.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_OPT_COMPRESS,0);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"odbc");
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre><p>
        This code requests that the client use the compressed
        client/server protocol and read the additional options from the
        <code class="literal">odbc</code> section in the
        <code class="filename">my.cnf</code> file.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-ping"></a>29.2.3.50. <a href="apis.html#mysql-ping" title="29.2.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a></h4></div></div></div><a class="indexterm" name="id2476224"></a><p>
        <code class="literal">int mysql_ping(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Checks whether the connection to the server is working. If the
        connection has gone down, an attempt to reconnect is made unless
        auto-reconnect is disabled.
      </p><p>
        This function can be used by clients that remain idle for a long
        while, to check whether the server has closed the connection and
        reconnect if necessary.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the connection to the server is alive. Non-zero if an
        error occurred. A non-zero return does not indicate whether the
        MySQL server itself is down; the connection might be broken for
        other reasons such as network problems.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-query"></a>29.2.3.51. <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a></h4></div></div></div><a class="indexterm" name="id2476348"></a><p>
        <code class="literal">int mysql_query(MYSQL *mysql, const char
        *stmt_str)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Executes the SQL statement pointed to by the null-terminated
        string <code class="literal">stmt_str</code>. Normally, the string must
        consist of a single SQL statement and you should not add a
        terminating semicolon (“<span class="quote"><code class="literal">;</code></span>”) or
        <code class="literal">\g</code> to the statement. If multiple-statement
        execution has been enabled, the string can contain several
        statements separated by semicolons. See
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used
        for statements that contain binary data; you must use
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
        (Binary data may contain the
        “<span class="quote"><code class="literal">\0</code></span>” character, which
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> interprets as the
        end of the statement string.)
      </p><p>
        If you want to know whether the statement should return a result
        set, you can use
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check
        for this. See <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()">Section 29.2.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-connect"></a>29.2.3.52. <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a></h4></div></div></div><a class="indexterm" name="id2476556"></a><p>
        <code class="literal">MYSQL *mysql_real_connect(MYSQL *mysql, const char
        *host, const char *user, const char *passwd, const char *db,
        unsigned int port, const char *unix_socket, unsigned long
        client_flag)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> attempts
        to establish a connection to a MySQL database engine running on
        <code class="literal">host</code>.
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> must
        complete successfully before you can execute any other API
        functions that require a valid <code class="literal">MYSQL</code>
        connection handle structure.
      </p><p>
        The parameters are specified as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The first parameter should be the address of an existing
            <code class="literal">MYSQL</code> structure. Before calling
            <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> you
            must call <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> to
            initialize the <code class="literal">MYSQL</code> structure. You can
            change a lot of connect options with the
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> call. See
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()">Section 29.2.3.49, “<code class="literal">mysql_options()</code>”</a>.
          </p></li><li><p>
            The value of <code class="literal">host</code> may be either a
            hostname or an IP address. If <code class="literal">host</code> is
            <code class="literal">NULL</code> or the string
            <code class="literal">"localhost"</code>, a connection to the local
            host is assumed: For Windows, the client connects using a
            shared-memory connection, if the server has shared-memory
            connections enabled. Otherwise, TCP/IP is used. For Unix,
            the client connects using a Unix socket file. For local
            connections, you can also influence the type of connection
            to use with the <code class="literal">MYSQL_OPT_PROTOCOL</code> or
            <code class="literal">MYSQL_OPT_NAMED_PIPE</code> options to
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>. The type
            of connection must be supported by the server. For a
            <code class="literal">host</code> value of <code class="literal">"."</code> on
            Windows, the client connects using a named pipe, if the
            server has named-pipe connections enabled. If named-pipe
            connections are not enabled, an error occurs.
          </p></li><li><p>
            The <code class="literal">user</code> parameter contains the user's
            MySQL login ID. If <code class="literal">user</code> is
            <code class="literal">NULL</code> or the empty string
            <code class="literal">""</code>, the current user is assumed. Under
            Unix, this is the current login name. Under Windows ODBC,
            the current username must be specified explicitly. See the
            MyODBC section of <a href="connectors.html" title="Chapter 30. Connectors">Chapter 30, <i>Connectors</i></a>.
          </p></li><li><p>
            The <code class="literal">passwd</code> parameter contains the
            password for <code class="literal">user</code>. If
            <code class="literal">passwd</code> is <code class="literal">NULL</code>, only
            entries in the <code class="literal">user</code> table for the user
            that have a blank (empty) password field are checked for a
            match. This allows the database administrator to set up the
            MySQL privilege system in such a way that users get
            different privileges depending on whether they have
            specified a password.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              Do not attempt to encrypt the password before calling
              <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>;
              password encryption is handled automatically by the client
              API.
            </p></div></li><li><p>
            The <code class="literal">user</code> and <code class="literal">passwd</code>
            parameters use whatever character set has been configured
            for the <code class="literal">MYSQL</code> object. By default, this is
            <code class="literal">latin1</code>, but can be changed by calling
            <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options(mysql,
            MYSQL_SET_CHARSET_NAME,
            "<em class="replaceable"><code>charset_name</code></em>")</code></a> prior
            to connecting.
          </p></li><li><p>
            <code class="literal">db</code> is the database name. If
            <code class="literal">db</code> is not <code class="literal">NULL</code>, the
            connection sets the default database to this value.
          </p></li><li><p>
            If <code class="literal">port</code> is not 0, the value is used as
            the port number for the TCP/IP connection. Note that the
            <code class="literal">host</code> parameter determines the type of the
            connection.
          </p></li><li><p>
            If <code class="literal">unix_socket</code> is not
            <code class="literal">NULL</code>, the string specifies the socket or
            named pipe that should be used. Note that the
            <code class="literal">host</code> parameter determines the type of the
            connection.
          </p></li><li><p>
            The value of <code class="literal">client_flag</code> is usually 0,
            but can be set to a combination of the following flags to
            enable certain features:
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Flag Name</strong></span></td><td><span class="bold"><strong>Flag Description</strong></span></td></tr><tr><td><code class="literal">CLIENT_COMPRESS</code></td><td>Use compression protocol.</td></tr><tr><td><code class="literal">CLIENT_FOUND_ROWS</code></td><td>Return the number of found (matched) rows, not the number of changed
                    rows.</td></tr><tr><td><code class="literal">CLIENT_IGNORE_SIGPIPE</code></td><td>Prevents the client library from installing a <code class="literal">SIGPIPE</code>
                    signal handler. This can be used to avoid conflicts
                    with a handler that the application has already
                    installed.</td></tr><tr><td><code class="literal">CLIENT_IGNORE_SPACE</code></td><td>Allow spaces after function names. Makes all functions names reserved
                    words.</td></tr><tr><td><code class="literal">CLIENT_INTERACTIVE</code></td><td>Allow <code class="literal">interactive_timeout</code> seconds (instead of
                    <code class="literal">wait_timeout</code> seconds) of
                    inactivity before closing the connection. The
                    client's session <code class="literal">wait_timeout</code>
                    variable is set to the value of the session
                    <code class="literal">interactive_timeout</code> variable.</td></tr><tr><td><code class="literal">CLIENT_LOCAL_FILES</code></td><td>Enable <code class="literal">LOAD DATA LOCAL</code> handling.</td></tr><tr><td><code class="literal">CLIENT_MULTI_RESULTS</code></td><td>Tell the server that the client can handle multiple result sets from
                    multiple-statement executions or stored procedures.
                    This is automatically set if
                    <code class="literal">CLIENT_MULTI_STATEMENTS</code> is set.
                    See the note following this table for more
                    information about this flag.</td></tr><tr><td><code class="literal">CLIENT_MULTI_STATEMENTS</code></td><td>Tell the server that the client may send multiple statements in a single
                    string (separated by
                    “<span class="quote"><code class="literal">;</code></span>”). If this flag
                    is not set, multiple-statement execution is
                    disabled. See the note following this table for more
                    information about this flag.</td></tr><tr><td><code class="literal">CLIENT_NO_SCHEMA</code></td><td>Don't allow the <em class="replaceable"><code>db_name.tbl_name.col_name</code></em>
                    syntax. This is for ODBC. It causes the parser to
                    generate an error if you use that syntax, which is
                    useful for trapping bugs in some ODBC programs.</td></tr><tr><td><code class="literal">CLIENT_ODBC</code></td><td>Unused.</td></tr><tr><td><code class="literal">CLIENT_SSL</code></td><td>Use SSL (encrypted protocol). This option should not be set by
                    application programs; it is set internally in the
                    client library. Instead, use
                    <a href="apis.html#mysql-ssl-set" title="29.2.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a>
                    before calling
                    <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.</td></tr></tbody></table></div></li></ul></div><p>
        If your program uses the <code class="literal">CALL</code> SQL statement
        to execute stored procedures that produce result sets, you
        <span class="emphasis"><em>must</em></span> set the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag, either explicitly,
        or implicitly by setting
        <code class="literal">CLIENT_MULTI_STATEMENTS</code> when you call
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. This is
        because each such stored procedure produces multiple results:
        the result sets returned by statements executed within the
        procedure, as well as a result to indicate the call status.
      </p><p>
        If you enable <code class="literal">CLIENT_MULTI_STATEMENTS</code> or
        <code class="literal">CLIENT_MULTI_RESULTS</code>, you should process the
        result for every call to
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
        determine whether there are more results. For an example, see
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        For some parameters, it is possible to have the value taken from
        an option file rather than from an explicit value in the
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call. To
        do this, call <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>
        with the <code class="literal">MYSQL_READ_DEFAULT_FILE</code> or
        <code class="literal">MYSQL_READ_DEFAULT_GROUP</code> option before
        calling <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
        Then, in the
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call,
        specify the “<span class="quote">no-value</span>” value for each parameter to
        be read from an option file:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For <code class="literal">host</code>, specify a value of
            <code class="literal">NULL</code> or the empty string
            (<code class="literal">""</code>).
          </p></li><li><p>
            For <code class="literal">user</code>, specify a value of
            <code class="literal">NULL</code> or the empty string.
          </p></li><li><p>
            For <code class="literal">passwd</code>, specify a value of
            <code class="literal">NULL</code>. (For the password, a value of the
            empty string in the
            <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> call
            cannot be overridden in an option file, because the empty
            string indicates explicitly that the MySQL account must have
            an empty password.)
          </p></li><li><p>
            For <code class="literal">db</code>, specify a value of
            <code class="literal">NULL</code> or the empty string.
          </p></li><li><p>
            For <code class="literal">port</code>, specify a value of 0.
          </p></li><li><p>
            For <code class="literal">unix_socket</code>, specify a value of
            <code class="literal">NULL</code>.
          </p></li></ul></div><p>
        If no value is found in an option file for a parameter, its
        default value is used as indicated in the descriptions given
        earlier in this section.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL*</code> connection handle if the connection
        was successful, <code class="literal">NULL</code> if the connection was
        unsuccessful. For a successful connection, the return value is
        the same as the value of the first parameter.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_CONN_HOST_ERROR</code>
          </p><p>
            Failed to connect to the MySQL server.
          </p></li><li><p>
            <code class="literal">CR_CONNECTION_ERROR</code>
          </p><p>
            Failed to connect to the local MySQL server.
          </p></li><li><p>
            <code class="literal">CR_IPSOCK_ERROR</code>
          </p><p>
            Failed to create an IP socket.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SOCKET_CREATE_ERROR</code>
          </p><p>
            Failed to create a Unix socket.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_HOST</code>
          </p><p>
            Failed to find the IP address for the hostname.
          </p></li><li><p>
            <code class="literal">CR_VERSION_ERROR</code>
          </p><p>
            A protocol mismatch resulted from attempting to connect to a
            server with a client library that uses a different protocol
            version.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPEOPEN_ERROR</code>
          </p><p>
            Failed to create a named pipe on Windows.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPEWAIT_ERROR</code>
          </p><p>
            Failed to wait for a named pipe on Windows.
          </p></li><li><p>
            <code class="literal">CR_NAMEDPIPESETSTATE_ERROR</code>
          </p><p>
            Failed to get a pipe handler on Windows.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            If <code class="literal">connect_timeout</code> &gt; 0 and it took
            longer than <code class="literal">connect_timeout</code> seconds to
            connect to the server or if the server died while executing
            the <code class="literal">init-command</code>.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
mysql_options(&amp;mysql,MYSQL_READ_DEFAULT_GROUP,"your_prog_name");
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}
</pre><p>
        By using <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> the
        MySQL library reads the <code class="literal">[client]</code> and
        <code class="literal">[your_prog_name]</code> sections in the
        <code class="filename">my.cnf</code> file which ensures that your program
        works, even if someone has set up MySQL in some non-standard
        way.
      </p><p>
        Note that upon connection,
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> sets the
        <code class="literal">reconnect</code> flag (part of the
        <code class="literal">MYSQL</code> structure) to a value of
        <code class="literal">1</code> in versions of the API older than 5.0.3, or
        <code class="literal">0</code> in newer versions. A value of
        <code class="literal">1</code> for this flag indicates that if a statement
        cannot be performed because of a lost connection, to try
        reconnecting to the server before giving up. You can use the
        <code class="literal">MYSQL_OPT_RECONNECT</code> option to
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> to control
        reconnection behavior.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-escape-string"></a>29.2.3.53. <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a></h4></div></div></div><a class="indexterm" name="id2477831"></a><p>
        <code class="literal">unsigned long mysql_real_escape_string(MYSQL *mysql,
        char *to, const char *from, unsigned long length)</code>
      </p><p>
        Note that <code class="literal">mysql</code> must be a valid, open
        connection. This is needed because the escaping depends on the
        character set in use by the server.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. See <a href="language-structure.html#string-syntax" title="8.1.1. Strings">Section 8.1.1, “Strings”</a>.
      </p><p>
        The string in <code class="literal">from</code> is encoded to an escaped
        SQL string, taking into account the current character set of the
        connection. The result is placed in <code class="literal">to</code> and a
        terminating null byte is appended. Characters encoded are
        <code class="literal">NUL</code> (ASCII 0),
        “<span class="quote"><code class="literal">\n</code></span>”,
        “<span class="quote"><code class="literal">\r</code></span>”,
        “<span class="quote"><code class="literal">\</code></span>”,
        “<span class="quote"><code class="literal">'</code></span>”,
        “<span class="quote"><code class="literal">"</code></span>”, and Control-Z (see
        <a href="language-structure.html#literals" title="8.1. Literal Values">Section 8.1, “Literal Values”</a>). (Strictly speaking, MySQL requires
        only that backslash and the quote character used to quote the
        string in the query be escaped. This function quotes the other
        characters to make them easier to read in log files.)
      </p><p>
        The string pointed to by <code class="literal">from</code> must be
        <code class="literal">length</code> bytes long. You must allocate the
        <code class="literal">to</code> buffer to be at least
        <code class="literal">length*2+1</code> bytes long. (In the worst case,
        each character may need to be encoded as using two bytes, and
        you need room for the terminating null byte.) When
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        returns, the contents of <code class="literal">to</code> is a
        null-terminated string. The return value is the length of the
        encoded string, not including the terminating null character.
      </p><p>
        If you need to change the character set of the connection, you
        should use the
        <a href="apis.html#mysql-set-character-set" title="29.2.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a>
        function rather than executing a <code class="literal">SET NAMES</code>
        (or <code class="literal">SET CHARACTER SET</code>) statement.
        <a href="apis.html#mysql-set-character-set" title="29.2.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a> works
        like <code class="literal">SET NAMES</code> but also affects the character
        set used by
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>,
        which <code class="literal">SET NAMES</code> does not.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
*end++ = '\'';
end += mysql_real_escape_string(&amp;mysql, end,"What's this",11);
*end++ = '\'';
*end++ = ',';
*end++ = '\'';
end += mysql_real_escape_string(&amp;mysql, end,"binary data: \0\r\n",16);
*end++ = '\'';
*end++ = ')';

if (mysql_real_query(&amp;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&amp;mysql));
}
</pre><p>
        The <code class="literal">strmov()</code> function used in the example is
        included in the <code class="literal">mysqlclient</code> library and works
        like <code class="literal">strcpy()</code> but returns a pointer to the
        terminating null of the first parameter.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the value placed into <code class="literal">to</code>, not
        including the terminating null character.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-real-query"></a>29.2.3.54. <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a></h4></div></div></div><a class="indexterm" name="id2478123"></a><p>
        <code class="literal">int mysql_real_query(MYSQL *mysql, const char
        *stmt_str, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Executes the SQL statement pointed to by
        <code class="literal">stmt_str</code>, which should be a string
        <code class="literal">length</code> bytes long. Normally, the string must
        consist of a single SQL statement and you should not add a
        terminating semicolon (“<span class="quote"><code class="literal">;</code></span>”) or
        <code class="literal">\g</code> to the statement. If multiple-statement
        execution has been enabled, the string can contain several
        statements separated by semicolons. See
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> cannot be used
        for statements that contain binary data; you must use
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> instead.
        (Binary data may contain the
        “<span class="quote"><code class="literal">\0</code></span>” character, which
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> interprets as the
        end of the statement string.) In addition,
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> is faster
        than <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> because it
        does not call <code class="literal">strlen()</code> on the statement
        string.
      </p><p>
        If you want to know whether the statement should return a result
        set, you can use
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check
        for this. See <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()">Section 29.2.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-refresh"></a>29.2.3.55. <a href="apis.html#mysql-refresh" title="29.2.3.55. mysql_refresh()"><code class="literal">mysql_refresh()</code></a></h4></div></div></div><a class="indexterm" name="id2478358"></a><p>
        <code class="literal">int mysql_refresh(MYSQL *mysql, unsigned int
        options)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function flushes tables or caches, or resets replication
        server information. The connected user must have the
        <code class="literal">RELOAD</code> privilege.
      </p><p>
        The <code class="literal">options</code> argument is a bit mask composed
        from any combination of the following values. Multiple values
        can be OR'ed together to perform multiple operations with a
        single call.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">REFRESH_GRANT</code>
          </p><p>
            Refresh the grant tables, like <code class="literal">FLUSH
            PRIVILEGES</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_LOG</code>
          </p><p>
            Flush the logs, like <code class="literal">FLUSH LOGS</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_TABLES</code>
          </p><p>
            Flush the table cache, like <code class="literal">FLUSH TABLES</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_HOSTS</code>
          </p><p>
            Flush the host cache, like <code class="literal">FLUSH HOSTS</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_STATUS</code>
          </p><p>
            Reset status variables, like <code class="literal">FLUSH
            STATUS</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_THREADS</code>
          </p><p>
            Flush the thread cache.
          </p></li><li><p>
            <code class="literal">REFRESH_SLAVE</code>
          </p><p>
            On a slave replication server, reset the master server
            information and restart the slave, like <code class="literal">RESET
            SLAVE</code>.
          </p></li><li><p>
            <code class="literal">REFRESH_MASTER</code>
          </p><p>
            On a master replication server, remove the binary log files
            listed in the binary log index and truncate the index file,
            like <code class="literal">RESET MASTER</code>.
          </p></li></ul></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-reload"></a>29.2.3.56. <a href="apis.html#mysql-reload" title="29.2.3.56. mysql_reload()"><code class="literal">mysql_reload()</code></a></h4></div></div></div><a class="indexterm" name="id2478682"></a><p>
        <code class="literal">int mysql_reload(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the MySQL server to reload the grant tables. The connected
        user must have the <code class="literal">RELOAD</code> privilege.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> to issue an SQL
        <code class="literal">FLUSH PRIVILEGES</code> statement instead.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-rollback"></a>29.2.3.57. <a href="apis.html#mysql-rollback" title="29.2.3.57. mysql_rollback()"><code class="literal">mysql_rollback()</code></a></h4></div></div></div><a class="indexterm" name="id2478845"></a><p>
        <code class="literal">my_bool mysql_rollback(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Rolls back the current transaction.
      </p><p>
        The action of this function is subject to the value of the
        <code class="literal">completion_type</code> system variable. In
        particular, if the value of <code class="literal">completion_type</code>
        is 2, the server performs a release after terminating a
        transaction and closes the client connection. The client program
        should call <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> to
        close the connection from the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-row-seek"></a>29.2.3.58. <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a></h4></div></div></div><a class="indexterm" name="id2478939"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_row_seek(MYSQL_RES *result,
        MYSQL_ROW_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the row cursor to an arbitrary row in a query result set.
        The <code class="literal">offset</code> value is a row offset that should
        be a value returned from
        <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> or from
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>. This value is
        not a row number; if you want to seek to a row within a result
        set by number, use
        <a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a> instead.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> may be used
        only in conjunction with
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not with
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the row cursor. This value may be passed
        to a subsequent call to
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-row-tell"></a>29.2.3.59. <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a></h4></div></div></div><a class="indexterm" name="id2479071"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_row_tell(MYSQL_RES
        *result)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the current position of the row cursor for the last
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. This value
        can be used as an argument to
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>.
      </p><p>
        You should use <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a>
        only after
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>, not after
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the row cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-select-db"></a>29.2.3.60. <a href="apis.html#mysql-select-db" title="29.2.3.60. mysql_select_db()"><code class="literal">mysql_select_db()</code></a></h4></div></div></div><a class="indexterm" name="id2479180"></a><p>
        <code class="literal">int mysql_select_db(MYSQL *mysql, const char
        *db)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Causes the database specified by <code class="literal">db</code> to become
        the default (current) database on the connection specified by
        <code class="literal">mysql</code>. In subsequent queries, this database
        is the default for table references that do not include an
        explicit database specifier.
      </p><p>
        <a href="apis.html#mysql-select-db" title="29.2.3.60. mysql_select_db()"><code class="literal">mysql_select_db()</code></a> fails unless
        the connected user can be authenticated as having permission to
        use the database.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-character-set"></a>29.2.3.61. <a href="apis.html#mysql-set-character-set" title="29.2.3.61. mysql_set_character_set()"><code class="literal">mysql_set_character_set()</code></a></h4></div></div></div><a class="indexterm" name="id2479338"></a><p>
        <code class="literal">int mysql_set_character_set(MYSQL *mysql, const char
        *csname)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is used to set the default character set for the
        current connection. The string <code class="literal">csname</code>
        specifies a valid character set name. The connection collation
        becomes the default collation of the character set. This
        function works like the <code class="literal">SET NAMES</code> statement,
        but also sets the value of <code class="literal">mysql-&gt;charset</code>,
        and thus affects the character set used by
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><pre class="programlisting">MYSQL mysql;

mysql_init(&amp;mysql);
if (!mysql_real_connect(&amp;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&amp;mysql));
}

if (!mysql_set_character_set(&amp;mysql, "utf8")) 
{
    printf("New client character set: %s\n", 
           mysql_character_set_name(&amp;mysql));
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-local-infile-default"></a>29.2.3.62. <a href="apis.html#mysql-set-local-infile-default" title="29.2.3.62. mysql_set_local_infile_default()"><code class="literal">mysql_set_local_infile_default()</code></a></h4></div></div></div><a class="indexterm" name="id2479442"></a><a class="indexterm" name="id2479452"></a><p>
        <code class="literal">void mysql_set_local_infile_default(MYSQL
        *mysql);</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the <code class="literal">LOAD LOCAL DATA INFILE</code> handler
        callback functions to the defaults used internally by the C
        client library. The library calls this function automatically if
        <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        has not been called or does not supply valid functions for each
        of its callbacks.
      </p><p>
        The
        <a href="apis.html#mysql-set-local-infile-default" title="29.2.3.62. mysql_set_local_infile_default()"><code class="literal">mysql_set_local_infile_default()</code></a>
        function was added in MySQL 4.1.2.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-local-infile-handler"></a>29.2.3.63. <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a></h4></div></div></div><p>
        <code class="literal">void mysql_set_local_infile_handler(MYSQL *mysql, int
        (*local_infile_init)(void **, const char *, void *), int
        (*local_infile_read)(void *, char *, unsigned int), void
        (*local_infile_end)(void *), int (*local_infile_error)(void *,
        char*, unsigned int), void *userdata);</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function installs callbacks to be used during the execution
        of <code class="literal">LOAD DATA LOCAL INFILE</code> statements. It
        enables application programs to exert control over local
        (client-side) data file reading. The arguments are the
        connection handler, a set of pointers to callback functions, and
        a pointer to a data area that the callbacks can use to share
        information.
      </p><p>
        To use
        <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>,
        you must write the following callback functions:
      </p><pre class="programlisting">int
local_infile_init(void **ptr, const char *filename, void *userdata);
</pre><p>
        The initialization function. This is called once to do any setup
        necessary, open the data file, allocate data structures, and so
        forth. The first <code class="literal">void**</code> argument is a pointer
        to a pointer. You can set the pointer (that is,
        <code class="literal">*ptr</code>) to a value that will be passed to each
        of the other callbacks (as a <code class="literal">void*</code>). The
        callbacks can use this pointed-to value to maintain state
        information. The <code class="literal">userdata</code> argument is the
        same value that is passed to
        <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>.
      </p><p>
        The initialization function should return zero for success,
        non-zero for an error.
      </p><pre class="programlisting">int
local_infile_read(void *ptr, char *buf, unsigned int buf_len);
</pre><p>
        The data-reading function. This is called repeatedly to read the
        data file. <code class="literal">buf</code> points to the buffer where the
        read data should be stored, and <code class="literal">buf_len</code> is
        the maximum number of bytes that the callback can read and store
        in the buffer. (It can read fewer bytes, but should not read
        more.)
      </p><p>
        The return value is the number of bytes read, or zero when no
        more data could be read (this indicates EOF). Return a value
        less than zero if an error occurs.
      </p><pre class="programlisting">void
local_infile_end(void *ptr)
</pre><p>
        The termination function. This is called once after
        <code class="literal">local_infile_read()</code> has returned zero (EOF)
        or an error. This function should deallocate any memory
        allocated by <code class="literal">local_infile_init()</code> and perform
        any other cleanup necessary. It is invoked even if the
        initalization function returns an error.
      </p><pre class="programlisting">int
local_infile_error(void *ptr, 
                   char *error_msg, 
                   unsigned int error_msg_len);
</pre><p>
        The error-handling function. This is called to get a textual
        error message to return to the user in case any of your other
        functions returns an error. <code class="literal">error_msg</code> points
        to the buffer into which the message should be written, and
        <code class="literal">error_msg_len</code> is the length of the buffer.
        The message should be written as a null-terminated string, so
        the message can be at most
        <code class="literal">error_msg_len</code>–1 bytes long.
      </p><p>
        The return value is the error number.
      </p><p>
        Typically, the other callbacks store the error message in the
        data structure pointed to by <code class="literal">ptr</code>, so that
        <code class="literal">local_infile_error()</code> can copy the message
        from there into <code class="literal">error_msg</code>.
      </p><p>
        After calling
        <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        in your C code and passing pointers to your callback functions,
        you can then issue a <code class="literal">LOAD DATA LOCAL INFILE</code>
        statement (for example, by using
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>). The client
        library automatically invokes your callbacks. The filename
        specified in <code class="literal">LOAD DATA LOCAL INFILE</code> will be
        passed as the second parameter to the
        <code class="literal">local_infile_init()</code> callback.
      </p><p>
        The
        <a href="apis.html#mysql-set-local-infile-handler" title="29.2.3.63. mysql_set_local_infile_handler()"><code class="literal">mysql_set_local_infile_handler()</code></a>
        function was added in MySQL 4.1.2.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-set-server-option"></a>29.2.3.64. <a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a></h4></div></div></div><a class="indexterm" name="id2479837"></a><p>
        <code class="literal">int mysql_set_server_option(MYSQL *mysql, enum
        enum_mysql_set_option option)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Enables or disables an option for the connection.
        <code class="literal">option</code> can have one of the following values:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code></td><td>Enable multiple-statement support</td></tr><tr><td><code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_OFF</code></td><td>Disable multiple-statement support</td></tr></tbody></table></div><p>
        If you enable multiple-statement support, you should retrieve
        results from calls to
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
        determine whether there are more results. For an example, see
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        Enabling multiple-statement support with
        <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> does not
        have quite the same effect as enabling it by passing the
        <code class="literal">CLIENT_MULTI_STATEMENTS</code> flag to
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>:
        <code class="literal">CLIENT_MULTI_STATEMENTS</code> also enables
        <code class="literal">CLIENT_MULTI_RESULTS</code>. If you are using the
        <code class="literal">CALL</code> SQL statement in your programs,
        multiple-result support must be enabled; this means that
        <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> by itself is
        insufficient to allow the use of <code class="literal">CALL</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">ER_UNKNOWN_COM_ERROR</code>
          </p><p>
            The server didn't support
            <a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
            (which is the case that the server is older than 4.1.1) or
            the server didn't support the option one tried to set.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-shutdown"></a>29.2.3.65. <a href="apis.html#mysql-shutdown" title="29.2.3.65. mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a></h4></div></div></div><a class="indexterm" name="id2480118"></a><p>
        <code class="literal">int mysql_shutdown(MYSQL *mysql, enum
        mysql_enum_shutdown_level shutdown_level)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Asks the database server to shut down. The connected user must
        have <code class="literal">SHUTDOWN</code> privileges. MySQL
        5.1 servers support only one type of shutdown;
        <code class="literal">shutdown_level</code> must be equal to
        <code class="literal">SHUTDOWN_DEFAULT</code>. Additional shutdown levels
        are planned to make it possible to choose the desired level.
        Dynamically linked executables which have been compiled with
        older versions of the <code class="literal">libmysqlclient</code> headers
        and call <a href="apis.html#mysql-shutdown" title="29.2.3.65. mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a> need
        to be used with the old <code class="literal">libmysqlclient</code>
        dynamic library.
      </p><p>
        The shutdown process is described in
        <a href="server-administration.html#server-shutdown" title="5.1.10. The Shutdown Process">Section 5.1.10, “The Shutdown Process”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero for success. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-sqlstate"></a>29.2.3.66. <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a></h4></div></div></div><a class="indexterm" name="id2480299"></a><p>
        <code class="literal">const char *mysql_sqlstate(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a null-terminated string containing the SQLSTATE error
        code for the most recently executed SQL statement. The error
        code consists of five characters. <code class="literal">'00000'</code>
        means “<span class="quote">no error</span>”. The values are specified by ANSI
        SQL and ODBC. For a list of possible values, see
        <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        SQLSTATE values returned by
        <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> differ from
        MySQL-specific error numbers returned by
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>. For example, the
        <span><strong class="command">mysql</strong></span> client program displays errors using
        the following format, where <code class="literal">1146</code> is the
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> value and
        <code class="literal">'42S02'</code> is the corresponding
        <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> value:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>SELECT * FROM no_such_table;</code></strong>
ERROR 1146 (42S02): Table 'test.no_such_table' doesn't exist
</pre><p>
        Not all MySQL error numbers are mapped to SQLSTATE error codes.
        The value <code class="literal">'HY000'</code> (general error) is used for
        unmapped error numbers.
      </p><p>
        If you call <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a>
        after <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
        fails, <a href="apis.html#mysql-sqlstate" title="29.2.3.66. mysql_sqlstate()"><code class="literal">mysql_sqlstate()</code></a> might
        not return a useful value. For example, this happens if a host
        is blocked by the server and the connection is closed without
        any SQLSTATE value being sent to the client.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string containing the SQLSTATE error
        code.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        See <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()">Section 29.2.3.14, “<code class="literal">mysql_errno()</code>”</a>,
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()">Section 29.2.3.15, “<code class="literal">mysql_error()</code>”</a>, and
        <a href="apis.html#mysql-stmt-sqlstate" title="29.2.7.26. mysql_stmt_sqlstate()">Section 29.2.7.26, “<code class="literal">mysql_stmt_sqlstate()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-ssl-set"></a>29.2.3.67. <a href="apis.html#mysql-ssl-set" title="29.2.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a></h4></div></div></div><a class="indexterm" name="id2480499"></a><p>
        <code class="literal">my_bool mysql_ssl_set(MYSQL *mysql, const char *key,
        const char *cert, const char *ca, const char *capath, const char
        *cipher)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-ssl-set" title="29.2.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> is used for
        establishing secure connections using SSL. It must be called
        before <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>.
      </p><p>
        <a href="apis.html#mysql-ssl-set" title="29.2.3.67. mysql_ssl_set()"><code class="literal">mysql_ssl_set()</code></a> does nothing
        unless OpenSSL support is enabled in the client library.
      </p><p>
        <code class="literal">mysql</code> is the connection handler returned from
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>. The other
        parameters are specified as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">key</code> is the pathname to the key file.
          </p></li><li><p>
            <code class="literal">cert</code> is the pathname to the certificate
            file.
          </p></li><li><p>
            <code class="literal">ca</code> is the pathname to the certificate
            authority file.
          </p></li><li><p>
            <code class="literal">capath</code> is the pathname to a directory
            that contains trusted SSL CA certificates in pem format.
          </p></li><li><p>
            <code class="literal">cipher</code> is a list of allowable ciphers to
            use for SSL encryption.
          </p></li></ul></div><p>
        Any unused SSL parameters may be given as
        <code class="literal">NULL</code>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        This function always returns <code class="literal">0</code>. If SSL setup
        is incorrect,
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> returns an
        error when you attempt to connect.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stat"></a>29.2.3.68. <a href="apis.html#mysql-stat" title="29.2.3.68. mysql_stat()"><code class="literal">mysql_stat()</code></a></h4></div></div></div><a class="indexterm" name="id2480689"></a><p>
        <code class="literal">const char *mysql_stat(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns a character string containing information similar to
        that provided by the <span><strong class="command">mysqladmin status</strong></span>
        command. This includes uptime in seconds and the number of
        running threads, questions, reloads, and open tables.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string describing the server status.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-store-result"></a>29.2.3.69. <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a></h4></div></div></div><a class="indexterm" name="id2480836"></a><p>
        <code class="literal">MYSQL_RES *mysql_store_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After invoking <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you must
        call <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for every
        statement that successfully produces a result set
        (<code class="literal">SELECT</code>, <code class="literal">SHOW</code>,
        <code class="literal">DESCRIBE</code>, <code class="literal">EXPLAIN</code>,
        <code class="literal">CHECK TABLE</code>, and so forth). You must also
        call <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after
        you are done with the result set.
      </p><p>
        You don't have to call
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for other
        statements, but it does not do any harm or cause any notable
        performance degradation if you call
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> in all
        cases. You can detect whether the statement has a result set by
        checking whether
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns a
        non-zero value (more about this later on).
      </p><p>
        If you enable multiple-statement support, you should retrieve
        results from calls to
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> by using a
        loop that calls
        <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
        determine whether there are more results. For an example, see
        <a href="apis.html#c-api-multiple-queries" title="29.2.9. C API Handling of Multiple Statement Execution">Section 29.2.9, “C API Handling of Multiple Statement Execution”</a>.
      </p><p>
        If you want to know whether a statement should return a result
        set, you can use
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> to check
        for this. See <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()">Section 29.2.3.22, “<code class="literal">mysql_field_count()</code>”</a>.
      </p><p>
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> reads the
        entire result of a query to the client, allocates a
        <code class="literal">MYSQL_RES</code> structure, and places the result
        into this structure.
      </p><p>
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> returns a
        null pointer if the statement didn't return a result set (for
        example, if it was an <code class="literal">INSERT</code> statement).
      </p><p>
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> also
        returns a null pointer if reading of the result set failed. You
        can check whether an error occurred by checking whether
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> returns a
        non-empty string, <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>
        returns non-zero, or
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns
        zero.
      </p><p>
        An empty result set is returned if there are no rows returned.
        (An empty result set differs from a null pointer as a return
        value.)
      </p><p>
        After you have called
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> and gotten
        back a result that isn't a null pointer, you can call
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> to find out
        how many rows are in the result set.
      </p><p>
        You can call <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>
        to fetch rows from the result set, or
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a> and
        <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a> to obtain or
        set the current row position within the result set.
      </p><p>
        See <a href="apis.html#null-mysql-store-result" title="29.2.14.1. Why mysql_store_result() Sometimes
        Returns NULL After
        mysql_query() Returns Success">Section 29.2.14.1, “Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure with the
        results. <code class="literal">NULL</code> (0) if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> resets
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> and
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-id"></a>29.2.3.70. <a href="apis.html#mysql-thread-id" title="29.2.3.70. mysql_thread_id()"><code class="literal">mysql_thread_id()</code></a></h4></div></div></div><a class="indexterm" name="id2481292"></a><p>
        <code class="literal">unsigned long mysql_thread_id(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the thread ID of the current connection. This value can
        be used as an argument to
        <a href="apis.html#mysql-kill" title="29.2.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a> to kill the
        thread.
      </p><p>
        If the connection is lost and you reconnect with
        <a href="apis.html#mysql-ping" title="29.2.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a>, the thread ID
        changes. This means you should not get the thread ID and store
        it for later. You should get it when you need it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The thread ID of the current connection.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-use-result"></a>29.2.3.71. <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a></h4></div></div></div><a class="indexterm" name="id2481381"></a><p>
        <code class="literal">MYSQL_RES *mysql_use_result(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        After invoking <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
        <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, you must
        call <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> or
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> for every
        statement that successfully produces a result set
        (<code class="literal">SELECT</code>, <code class="literal">SHOW</code>,
        <code class="literal">DESCRIBE</code>, <code class="literal">EXPLAIN</code>,
        <code class="literal">CHECK TABLE</code>, and so forth). You must also
        call <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> after
        you are done with the result set.
      </p><p>
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> initiates a
        result set retrieval but does not actually read the result set
        into the client like
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> does.
        Instead, each row must be retrieved individually by making calls
        to <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>. This
        reads the result of a query directly from the server without
        storing it in a temporary table or local buffer, which is
        somewhat faster and uses much less memory than
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>. The
        client allocates memory only for the current row and a
        communication buffer that may grow up to
        <code class="literal">max_allowed_packet</code> bytes.
      </p><p>
        On the other hand, you shouldn't use
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> if you are
        doing a lot of processing for each row on the client side, or if
        the output is sent to a screen on which the user may type a
        <code class="literal">^S</code> (stop scroll). This ties up the server and
        prevent other threads from updating any tables from which the
        data is being fetched.
      </p><p>
        When using <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
        you must execute
        <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a> until a
        <code class="literal">NULL</code> value is returned, otherwise, the
        unfetched rows are returned as part of the result set for your
        next query. The C API gives the error <code class="literal">Commands out of
        sync; you can't run this command now</code> if you forget to
        do this!
      </p><p>
        You may not use
        <a href="apis.html#mysql-data-seek" title="29.2.3.9. mysql_data_seek()"><code class="literal">mysql_data_seek()</code></a>,
        <a href="apis.html#mysql-row-seek" title="29.2.3.58. mysql_row_seek()"><code class="literal">mysql_row_seek()</code></a>,
        <a href="apis.html#mysql-row-tell" title="29.2.3.59. mysql_row_tell()"><code class="literal">mysql_row_tell()</code></a>,
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>, or
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> with a
        result returned from
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, nor may you
        issue other queries until
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> has
        finished. (However, after you have fetched all the rows,
        <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> accurately
        returns the number of rows fetched.)
      </p><p>
        You must call
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> once you
        are done with the result set.
      </p><p>
        When using the <code class="literal">libmysqld</code> embedded server, the
        memory benefits are essentially lost because memory usage
        incrementally increases with each row retrieved until
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a> is called.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure.
        <code class="literal">NULL</code> if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a> resets
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> and
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a> if it succeeds.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-warning-count"></a>29.2.3.72. <a href="apis.html#mysql-warning-count" title="29.2.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a></h4></div></div></div><a class="indexterm" name="id2481815"></a><p>
        <code class="literal">unsigned int mysql_warning_count(MYSQL
        *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of warnings generated during execution of the
        previous SQL statement.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The warning count.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statements"></a>29.2.4. C API Prepared Statements</h3></div></div></div><a class="indexterm" name="id2481881"></a><p>
      The MySQL client/server protocol provides for the use of prepared
      statements. This capability uses the <code class="literal">MYSQL_STMT</code>
      statement handler data structure returned by the
      <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> initialization
      function. Prepared execution is an efficient way to execute a
      statement more than once. The statement is first parsed to prepare
      it for execution. Then it is executed one or more times at a later
      time, using the statement handle returned by the initialization
      function.
    </p><p>
      Prepared execution is faster than direct execution for statements
      executed more than once, primarily because the query is parsed
      only once. In the case of direct execution, the query is parsed
      every time it is executed. Prepared execution also can provide a
      reduction of network traffic because for each execution of the
      prepared statement, it is necessary only to send the data for the
      parameters.
    </p><p>
      Prepared statements might not provide a performance increase in
      some situations. For best results, test your application both with
      prepared and non-prepared statements and choose whichever yields
      best performance.
    </p><p>
      Another advantage of prepared statements is that it uses a binary
      protocol that makes data transfer between client and server more
      efficient.
    </p><p>
      The following statements can be used as prepared statements:
      <code class="literal">CREATE TABLE</code>, <code class="literal">DELETE</code>,
      <code class="literal">DO</code>, <code class="literal">INSERT</code>,
      <code class="literal">REPLACE</code>, <code class="literal">SELECT</code>,
      <code class="literal">SET</code>, <code class="literal">UPDATE</code>, and most
      <code class="literal">SHOW</code> statements.
    </p><p>
      As of MySQL 5.1.10, the following additional statements are
      supported:
    </p><pre class="programlisting">ANALYZE TABLE
OPTIMIZE TABLE
REPAIR TABLE
</pre><p>
      As of MySQL 5.1.12, the following additional statements are
      supported:
    </p><pre class="programlisting">CACHE INDEX
CHANGE MASTER
CHECKSUM {TABLE | TABLES}
{CREATE | RENAME | DROP} DATABASE
{CREATE | RENAME | DROP} USER
FLUSH {TABLE | TABLES | TABLES WITH READ LOCK | HOSTS | PRIVILEGES
  | LOGS | STATUS | MASTER | SLAVE | DES_KEY_FILE | USER_RESOURCES}
GRANT
REVOKE
KILL
LOAD INDEX INTO CACHE
RESET {MASTER | SLAVE | QUERY CACHE}
SHOW BINLOG EVENTS
SHOW CREATE {PROCEDURE | FUNCTION | EVENT | TABLE | VIEW}
SHOW {AUTHORS | CONTRIBUTORS | WARNINGS | ERRORS}
SHOW {MASTER | BINARY} LOGS
SHOW {MASTER | SLAVE} STATUS
SLAVE {START | STOP}
INSTALL PLUGIN
UNINSTALL PLUGIN
</pre><p>
      Other statements are not yet supported in MySQL 5.1.
    </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
        MySQL Enterprise subscribers will find more information about
        using prepared statements in the Knowledge Base article,
        <a href="https://kb.mysql.com/view.php?id=5931" target="_top"> How can I
        create server-side prepared statements?</a>. Access to the
        MySQL Knowledge Base collection of articles is one of the
        advantages of subscribing to MySQL Enterprise. For more
        information see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-datatypes"></a>29.2.5. C API Prepared Statement Data types</h3></div></div></div><p>
      Prepared statements use several data structures:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To prepare a statement, pass the statement string to
          <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, which
          returns a pointer to a <code class="literal">MYSQL_STMT</code> data
          structure.
        </p></li><li><p>
          To provide input parameters for a prepared statement, set up
          <code class="literal">MYSQL_BIND</code> structures and pass them to
          <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>. To
          receive output column values, set up
          <code class="literal">MYSQL_BIND</code> structures and pass them to
          <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        </p></li><li><p>
          The <code class="literal">MYSQL_TIME</code> structure is used to
          transfer temporal data in both directions.
        </p></li></ul></div><p>
      The following discussion describes the prepared statement data
      types in detail.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2482133"></a>

          <code class="literal">MYSQL_STMT</code>
        </p><p>
          This structure represents a prepared statement. A statement is
          created by calling
          <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, which
          returns a statement handle (that is, a pointer to a
          <code class="literal">MYSQL_STMT</code>). The handle is used for all
          subsequent operations with the statement until you close it
          with <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a>, at
          which point the handle becomes invalid.
        </p><p>
          The <code class="literal">MYSQL_STMT</code> structure has no members
          that are intended for application use. Also, you should not
          try to make a copy of a <code class="literal">MYSQL_STMT</code>
          structure. There is no guarantee that such a copy will be
          usable.
        </p><p>
          Multiple statement handles can be associated with a single
          connection. The limit on the number of handles depends on the
          available system resources.
        </p></li><li><p>
          <a class="indexterm" name="id2482203"></a>

          <code class="literal">MYSQL_BIND</code>
        </p><p>
          This structure is used both for statement input (data values
          sent to the server) and output (result values returned from
          the server):
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              For input, <code class="literal">MYSQL_BIND</code> is used with
              <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
              to bind parameter data values to buffers for use by
              <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
            </p></li><li><p>
              For output, <code class="literal">MYSQL_BIND</code> is used with
              <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>
              to bind result set buffers for use in fetching rows with
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
            </p></li></ul></div><p>
          To use a <code class="literal">MYSQL_BIND</code> structure, you should
          zero its contents to initialize it, and then set its members
          appropriately. For example, to declare and initialize an array
          of three <code class="literal">MYSQL_BIND</code> structures, use this
          code:
        </p><pre class="programlisting">MYSQL_BIND bind[3];
memset(bind, 0, sizeof(bind));
</pre><p>
          The <code class="literal">MYSQL_BIND</code> structure contains the
          following members for use by application programs. For several
          of the members, the manner of use depends on whether the
          structure is used for input or output.
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">enum enum_field_types buffer_type</code>
            </p><p>
              The type of the buffer. This member indicates the data
              type of the C language variable that you are binding to
              the statement parameter. The allowable
              <code class="literal">buffer_type</code> values are listed later in
              this section. For input, <code class="literal">buffer_type</code>
              indicates the type of the variable containing the value
              that you will send to the server. For output, it indicates
              the type of the variable into which you want a value
              received from the server to be stored.
            </p></li><li><p>
              <code class="literal">void *buffer</code>
            </p><p>
              A pointer to the buffer to be used for data transfer. This
              is the address of a variable.
            </p><p>
              For input, <code class="literal">buffer</code> is a pointer to the
              variable in which a statement parameter's data value is
              stored. When you call
              <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>,
              MySQL takes the value that you have stored in the variable
              and uses it in place of the corresponding parameter marker
              in the statement.
            </p><p>
              For output, <code class="literal">buffer</code> is a pointer to the
              variable in which to return a result set column value.
              When you call
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>, MySQL
              returns a column value and stores it in this variable. You
              can access the value when the call returns.
            </p><p>
              To minimize the need for MySQL to perform type conversions
              between C language values on the client side and SQL
              values on the server side, use variables that have types
              similar to those of the corresponding SQL values. For
              numeric data types, <code class="literal">buffer</code> should point
              to a variable of the proper numeric C type. (For
              <code class="literal">char</code> or integer variables, you should
              also indicate whether the variable has the
              <code class="literal">unsigned</code> attribute by setting the
              <code class="literal">is_unsigned</code> member, described later in
              this list.) For character (non-binary) and binary string
              data types, <code class="literal">buffer</code> should point to a
              character buffer. For date and time data types,
              <code class="literal">buffer</code> should point to a
              <code class="literal">MYSQL_TIME</code> structure.
            </p><p>
              See the notes about type conversions later in the section.
            </p></li><li><p>
              <code class="literal">unsigned long buffer_length</code>
            </p><p>
              The actual size of <code class="literal">*buffer</code> in bytes.
              This indicates the maximum amount of data that can be
              stored in the buffer. For character and binary C data, the
              <code class="literal">buffer_length</code> value specifies the
              length of <code class="literal">*buffer</code> when used with
              <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
              to specify input values, or the maximum number of output
              data bytes that can be fetched into the buffer when used
              with
              <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
            </p></li><li><p>
              <code class="literal">unsigned long *length</code>
            </p><p>
              A pointer to an <code class="literal">unsigned long</code> variable
              that indicates the actual number of bytes of data stored
              in <code class="literal">*buffer</code>. <code class="literal">length</code>
              is used for character or binary C data.
            </p><p>
              For input parameter data binding,
              <code class="literal">length</code> points to an <code class="literal">unsigned
              long</code> variable that indicates the actual length
              of the parameter value stored in
              <code class="literal">*buffer</code>; this is used by
              <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
            </p><p>
              For output value binding, the return value of
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
              determines the interpretation of the length:
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  If <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
                  returns 0, <code class="literal">*length</code> indicates the
                  actual length of the parameter value.
                </p></li><li><p>
                  If <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
                  returns <code class="literal">MYSQL_DATA_TRUNCATED</code>,
                  <code class="literal">*length</code> indicates the non-truncated
                  length of the parameter value. In this case, the
                  minimum of <code class="literal">*length</code> and
                  <code class="literal">buffer_length</code> indicates the actual
                  length of the value.
                </p></li></ul></div><p>
              <code class="literal">length</code> is ignored for numeric and
              temporal data types because the length of the data value
              is determined by the <code class="literal">buffer_type</code> value.
            </p><p>
              If you need to be able to determine the length of a
              returned value before fetching it with
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>, see
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()">Section 29.2.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>, for some strategies.
            </p></li><li><p>
              <code class="literal">my_bool *is_null</code>
            </p><p>
              This member points to a <code class="literal">my_bool</code>
              variable that is true if a value is
              <code class="literal">NULL</code>, false if it is not
              <code class="literal">NULL</code>. For input, set
              <code class="literal">*is_null</code> to true to indicate that you
              are passing a <code class="literal">NULL</code> value as a statement
              parameter.
            </p><p>
              The reason that <code class="literal">is_null</code> is not a
              boolean scalar but is instead a
              <span class="emphasis"><em>pointer</em></span> to a boolean scalar is to
              provide flexibility in how you specify
              <code class="literal">NULL</code> values:
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  If your data values are always
                  <code class="literal">NULL</code>, use
                  <code class="literal">MYSQL_TYPE_NULL</code> as the
                  <code class="literal">buffer_type</code> value when you bind the
                  column. The other members do not matter.
                </p></li><li><p>
                  If your data values are always <code class="literal">NOT
                  NULL</code>, set the other members appropriately
                  for the variable you are binding, and set
                  <code class="literal">is_null = (my_bool*) 0</code>.
                </p></li><li><p>
                  In all other cases, set the other members
                  appriopriately, and set <code class="literal">is_null</code> to
                  the address of a <code class="literal">my_bool</code> variable.
                  Set that variable's value to true or false
                  appropriately between executions to indicate whether
                  data values are <code class="literal">NULL</code> or
                  <code class="literal">NOT NULL</code>, respectively.
                </p></li></ul></div><p>
              For output, the value pointed to by
              <code class="literal">is_null</code> is set to true after you fetch
              a row if the result set column value returned from the
              statement is <code class="literal">NULL</code>.
            </p></li><li><p>
              <code class="literal">my_bool is_unsigned</code>
            </p><p>
              This member is used for C variables with data types that
              can be <code class="literal">unsigned</code>
              (<code class="literal">char</code>, <code class="literal">short int</code>,
              <code class="literal">int</code>, <code class="literal">long long int</code>).
              Set <code class="literal">is_unsigned</code> to true if the variable
              pointed to by <code class="literal">buffer</code> is
              <code class="literal">unsigned</code> and false otherwise. For
              example, if you bind a <code class="literal">signed char</code>
              variable to <code class="literal">buffer</code>, specify a type code
              of <code class="literal">MYSQL_TYPE_TINY</code> and set
              <code class="literal">is_unsigned</code> to false. If you bind an
              <code class="literal">unsigned char</code> instead, the type code is
              the same but <code class="literal">is_unsigned</code> should be
              true. (For <code class="literal">char</code>, it is not defined
              whether it is signed or unsigned, so it is best to be
              explicit about signedness by using <code class="literal">signed
              char</code> or <code class="literal">unsigned char</code>.)
            </p><p>
              <code class="literal">is_unsigned</code> applies only to the C
              language variable on the client side. It indicates nothing
              about the signedness of the corresponding SQL value on the
              server side. For example, if you use an
              <code class="literal">int</code> variable to supply a value for a
              <code class="literal">BIGINT UNSIGNED</code> column,
              <code class="literal">is_unsigned</code> should be false because
              <code class="literal">int</code> is a signed type. If you use an
              <code class="literal">unsigned int</code> variable to supply a value
              for a <code class="literal">BIGINT</code> column,
              <code class="literal">is_unsigned</code> should be true because
              <code class="literal">unsigned int</code> is an unsigned type. MySQL
              performs the proper conversion between signed and unsigned
              values in both directions, although a warning occurs if
              truncation results.
            </p></li><li><p>
              <code class="literal">my_bool *error</code>
            </p><p>
              For output, set this member to point to a
              <code class="literal">my_bool</code> variable to have truncation
              information for the parameter stored there after a row
              fetching operation. (Truncation reporting is enabled by
              default, but can be controlled by calling
              <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
              <code class="literal">MYSQL_REPORT_DATA_TRUNCATION</code> option.)
              When truncation reporting is enabled,
              <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
              returns <code class="literal">MYSQL_DATA_TRUNCATED</code> and
              <code class="literal">*error</code> is true in the
              <code class="literal">MYSQL_BIND</code> structures for parameters in
              which truncation occurred. Truncation indicates loss of
              sign or significant digits, or that a string was too long
              to fit in a column.
            </p></li></ul></div></li><li><p>
          <a class="indexterm" name="id2483102"></a>

          <code class="literal">MYSQL_TIME</code>
        </p><p>
          This structure is used to send and receive
          <code class="literal">DATE</code>, <code class="literal">TIME</code>,
          <code class="literal">DATETIME</code>, and <code class="literal">TIMESTAMP</code>
          data directly to and from the server. Set the
          <code class="literal">buffer_type</code> member of a
          <code class="literal">MYSQL_BIND</code> structure to one of the temporal
          types (<code class="literal">MYSQL_TYPE_TIME</code>,
          <code class="literal">MYSQL_TYPE_DATE</code>,
          <code class="literal">MYSQL_TYPE_DATETIME</code>,
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>), and set the
          <code class="literal">buffer</code> member to point to a
          <code class="literal">MYSQL_TIME</code> structure.
        </p><p>
          The <code class="literal">MYSQL_TIME</code> structure contains the
          members listed in the following table.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Member</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">unsigned int year</code></td><td>The year</td></tr><tr><td><code class="literal">unsigned int month</code></td><td>The month of the year</td></tr><tr><td><code class="literal">unsigned int day</code></td><td>The day of the month</td></tr><tr><td><code class="literal">unsigned int hour</code></td><td>The hour of the day</td></tr><tr><td><code class="literal">unsigned int minute</code></td><td>The minute of the hour</td></tr><tr><td><code class="literal">unsigned int second</code></td><td>The second of the minute</td></tr><tr><td><code class="literal">my_bool neg</code></td><td>A boolean flag to indicate whether the time is negative</td></tr><tr><td><code class="literal">unsigned long second_part</code></td><td>The fractional part of the second in microseconds; currently unused</td></tr></tbody></table></div><p>
          Only those parts of a <code class="literal">MYSQL_TIME</code> structure
          that apply to a given type of temporal value are used. The
          <code class="literal">year</code>, <code class="literal">month</code>, and
          <code class="literal">day</code> elements are used for
          <code class="literal">DATE</code>, <code class="literal">DATETIME</code>, and
          <code class="literal">TIMESTAMP</code> values. The
          <code class="literal">hour</code>, <code class="literal">minute</code>, and
          <code class="literal">second</code> elements are used for
          <code class="literal">TIME</code>, <code class="literal">DATETIME</code>, and
          <code class="literal">TIMESTAMP</code> values. See
          <a href="apis.html#c-api-date-handling" title="29.2.10. C API Handling of Date and Time Values">Section 29.2.10, “C API Handling of Date and Time Values”</a>.
        </p></li></ul></div><p>
      The following table shows the allowable values that may be
      specified in the <code class="literal">buffer_type</code> member of
      <code class="literal">MYSQL_BIND</code> structures for input values. The
      value should be chosen according to the data type of the C
      language variable that you are binding. If the variable is
      <code class="literal">unsigned</code>, you should also set the
      <code class="literal">is_unsigned</code> member to true. The table shows the
      C variable types that you can use, the corresponding type codes,
      and the SQL data types for which the supplied value can be used
      without conversion.
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Input Variable C Type</strong></span></td><td><code class="literal">buffer_type</code> <span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>SQL Type of Destination Value</strong></span></td></tr><tr><td><code class="literal">signed char</code></td><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><code class="literal">TINYINT</code></td></tr><tr><td><code class="literal">short int</code></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">SMALLINT</code></td></tr><tr><td><code class="literal">int</code></td><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><code class="literal">INT</code></td></tr><tr><td><code class="literal">long long int</code></td><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><code class="literal">BIGINT</code></td></tr><tr><td><code class="literal">float</code></td><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><code class="literal">FLOAT</code></td></tr><tr><td><code class="literal">double</code></td><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><code class="literal">DOUBLE</code></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">TIME</code></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">DATE</code></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">DATETIME</code></td></tr><tr><td><code class="literal">MYSQL_TIME</code></td><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><code class="literal">TIMESTAMP</code></td></tr><tr><td><code class="literal">char[]</code></td><td><code class="literal">MYSQL_TYPE_STRING</code> (for non-binary data)</td><td><code class="literal">TEXT, CHAR, VARCHAR</code></td></tr><tr><td><code class="literal">char[]</code></td><td><code class="literal">MYSQL_TYPE_BLOB</code> (for binary data)</td><td><code class="literal">BLOB, BINARY, VARBINARY</code></td></tr><tr><td> </td><td><code class="literal">MYSQL_TYPE_NULL</code></td><td><code class="literal">NULL</code></td></tr></tbody></table></div><p>
      The use of <code class="literal">MYSQL_TYPE_NULL</code> is described earlier
      in connection with the <code class="literal">is_null</code> member.
    </p><p>
      The following table shows the allowable values that may be
      specified in the <code class="literal">buffer_type</code> member of
      <code class="literal">MYSQL_BIND</code> structures for output values. The
      value should be chosen according to the data type of the C
      language variable that you are binding. If the variable is
      <code class="literal">unsigned</code>, you should also set the
      <code class="literal">is_unsigned</code> member to true. The table shows the
      SQL types of received values, the corresponding type code that
      such values have in result set metadata, and the recommended C
      language data types to bind to the <code class="literal">MYSQL_BIND</code>
      structure to receive the SQL values without conversion.
    </p><p>
      If there is a mismatch between the C variable type on the client
      side and the corresponding SQL value on the server side, MySQL
      performs implicit type conversions in both directions.
    </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>SQL Type of Received Value</strong></span></td><td><code class="literal">buffer_type</code> <span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Output Variable C Type</strong></span></td></tr><tr><td><code class="literal">TINYINT</code></td><td><code class="literal">MYSQL_TYPE_TINY</code></td><td><code class="literal">signed char</code></td></tr><tr><td><code class="literal">SMALLINT</code></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">short int</code></td></tr><tr><td><code class="literal">MEDIUMINT</code></td><td><code class="literal">MYSQL_TYPE_INT24</code></td><td><code class="literal">int</code></td></tr><tr><td><code class="literal">INT</code></td><td><code class="literal">MYSQL_TYPE_LONG</code></td><td><code class="literal">int</code></td></tr><tr><td><code class="literal">BIGINT</code></td><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td><code class="literal">long long int</code></td></tr><tr><td><code class="literal">FLOAT</code></td><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td><code class="literal">float</code></td></tr><tr><td><code class="literal">DOUBLE</code></td><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td><code class="literal">double</code></td></tr><tr><td><code class="literal">DECIMAL</code></td><td><code class="literal">MYSQL_TYPE_NEWDECIMAL</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">YEAR</code></td><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td><code class="literal">short int</code></td></tr><tr><td><code class="literal">TIME</code></td><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><code class="literal">DATE</code></td><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><code class="literal">DATETIME</code></td><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><code class="literal">TIMESTAMP</code></td><td><code class="literal">MYSQL_TYPE_TIMESTAMP</code></td><td><code class="literal">MYSQL_TIME</code></td></tr><tr><td><code class="literal">CHAR, BINARY</code></td><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">VARCHAR, VARBINARY</code></td><td><code class="literal">MYSQL_TYPE_VAR_STRING</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">TINYBLOB, TINYTEXT</code></td><td><code class="literal">MYSQL_TYPE_TINY_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">BLOB, TEXT</code></td><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">MEDIUMBLOB, MEDIUMTEXT</code></td><td><code class="literal">MYSQL_TYPE_MEDIUM_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">LONGBLOB, LONGTEXT</code></td><td><code class="literal">MYSQL_TYPE_LONG_BLOB</code></td><td><code class="literal">char[]</code></td></tr><tr><td><code class="literal">BIT</code></td><td><code class="literal">MYSQL_TYPE_BIT</code></td><td><code class="literal">char[]</code></td></tr></tbody></table></div><p>
      MySQL knows the type code for the SQL value on the server side.
      The <code class="literal">buffer_type</code> value indicates the MySQL the
      type code of the C variable that holds the value on the client
      side. The two codes together tell MySQL what conversion must be
      performed, if any. Here are some examples:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use <code class="literal">MYSQL_TYPE_LONG</code> with an
          <code class="literal">int</code> variable to pass an integer value to
          the server that is to be stored into a
          <code class="literal">FLOAT</code> column, MySQL converts the value to
          floating-point format before storing it.
        </p></li><li><p>
          If you fetch an SQL <code class="literal">MEDIUMINT</code> column value,
          but specify a <code class="literal">buffer_type</code> value of
          <code class="literal">MYSQL_TYPE_LONGLONG</code> and use a C variable of
          type <code class="literal">long long int</code> as the destination
          buffer, MySQL will convert the <code class="literal">MEDIUMINT</code>
          value (which requires less than 8 bytes) for storage into the
          <code class="literal">long long int</code> (an 8-byte variable).
        </p></li><li><p>
          If you fetch a numeric column with a value of 255 into a
          <code class="literal">char[4]</code> character array and specify a
          <code class="literal">buffer_type</code> value of
          <code class="literal">MYSQL_TYPE_STRING</code>, the resulting value in
          the array will be a 4-byte string containing
          <code class="literal">'255\0'</code>.
        </p></li><li><p>
          <code class="literal">DECIMAL</code> values are returned as strings,
          which is why the corresponding C type is
          <code class="literal">char[]</code>. <code class="literal">DECIMAL</code> values
          returned by the server correspond to the string representation
          of the original server-side value. For example,
          <code class="literal">12.345</code> is returned to the client as
          <code class="literal">'12.345'</code>. If you specify
          <code class="literal">MYSQL_TYPE_NEWDECIMAL</code> and bind a string
          buffer to the <code class="literal">MYSQL_BIND</code> structure,
          <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> stores the
          value in the buffer without conversion. If instead you specify
          a numeric variable and type code,
          <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> converts
          the string-format <code class="literal">DECIMAL</code> value to numeric
          form.
        </p></li><li><p>
          For the <code class="literal">MYSQL_TYPE_BIT</code> type code,
          <code class="literal">BIT</code> values are returned into a string
          buffer (thus, the corresponding C type is
          <code class="literal">char[]</code> here, too). The value represents a
          bit string that requires interpretation on the client side. To
          return the value as a type that is easier to deal with, you
          can cause the value to be cast to integer using either of the
          following types of expressions:
        </p><pre class="programlisting">SELECT bit_col + 0 FROM t
SELECT CAST(bit_col AS UNSIGNED) FROM t
</pre><p>
          To retrieve the value, bind an integer variable large enough
          to hold the value and specify the appropriate corresponding
          integer type code.
        </p></li></ul></div><p>
      Before binding variables to the <code class="literal">MYSQL_BIND</code>
      structures that are to be used for fetching column values, you can
      check the type codes for each column of the result set. This might
      be desirable if you want to determine which variable types would
      be best to use to avoid type conversions. To get the type codes,
      call <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
      after executing the prepared statement with
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. The
      metadata provides access to the type codes for the result set as
      described in <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()">Section 29.2.7.22, “<code class="literal">mysql_stmt_result_metadata()</code>”</a>, and
      <a href="apis.html#c-api-datatypes" title="29.2.1. C API Data Types">Section 29.2.1, “C API Data Types”</a>.
    </p><p>
      If you cause the <code class="literal">max_length</code> member of the
      <code class="literal">MYSQL_FIELD</code> column metadata structures to be
      set (by calling
      <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a>), be aware
      that the <code class="literal">max_length</code> values for the result set
      indicate the lengths of the longest string representation of the
      result values, not the lengths of the binary representation. That
      is, <code class="literal">max_length</code> does not necessarily correspond
      to the size of the buffers needed to fetch the values with the
      binary protocol used for prepared statements. The size of the
      buffers should be chosen according to the types of the variables
      into which you fetch the values.
    </p><p>
      For input character (non-binary) string data (indicated by
      <code class="literal">MYSQL_TYPE_STRING</code>), the value is assumed to be
      in the character set indicated by the
      <code class="literal">character_set_client</code> system variable. If the
      value is stored into a column with a different character set, the
      appropriate conversion to that character set occurs. For input
      binary string data (indicated by
      <code class="literal">MYSQL_TYPE_BLOB</code>), the value is treated as
      having the <code class="literal">binary</code> character set; that is, it is
      treated as a byte string and no conversion occurs.
    </p><p>
      To determine whether output string values in a result set returned
      from the server contain binary or non-binary data, check whether
      the <code class="literal">charsetnr</code> value of the result set metadata
      is 63 (see <a href="apis.html#c-api-datatypes" title="29.2.1. C API Data Types">Section 29.2.1, “C API Data Types”</a>). If so, the
      character set is <code class="literal">binary</code>, which indicates binary
      rather than non-binary data. This enables you to distinguish
      <code class="literal">BINARY</code> from <code class="literal">CHAR</code>,
      <code class="literal">VARBINARY</code> from <code class="literal">VARCHAR</code>, and
      the <code class="literal">BLOB</code> types from the <code class="literal">TEXT</code>
      types.
    </p><p>
      As of MySQL 5.1.25, metadata changes to tables or views referred
      to by prepared statements are detected and cause automatic
      repreparation of the statement when it is next executed. For more
      information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.1. Automatic Prepared Statement Repreparation">Section 12.7.1, “Automatic Prepared Statement Repreparation”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-function-overview"></a>29.2.6. C API Prepared Statement Function Overview</h3></div></div></div><a class="indexterm" name="id2484821"></a><a class="indexterm" name="id2484834"></a><p>
      The functions available for prepared statement processing are
      summarized here and described in greater detail in a later
      section. See <a href="apis.html#c-api-prepared-statement-functions" title="29.2.7. C API Prepared Statement Function Descriptions">Section 29.2.7, “C API Prepared Statement Function Descriptions”</a>.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Function</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a></td><td>Returns the number of rows changed, deleted, or inserted by prepared
              <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, or
              <code class="literal">INSERT</code> statement</td></tr><tr><td><a href="apis.html#mysql-stmt-attr-get" title="29.2.7.2. mysql_stmt_attr_get()"><code class="literal">mysql_stmt_attr_get()</code></a></td><td>Get value of an attribute for a prepared statement</td></tr><tr><td><a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a></td><td>Sets an attribute for a prepared statement</td></tr><tr><td><a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a></td><td>Associates application data buffers with the parameter markers in a
              prepared SQL statement</td></tr><tr><td><a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a></td><td>Associates application data buffers with columns in the result set</td></tr><tr><td><a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a></td><td>Frees memory used by prepared statement</td></tr><tr><td><a href="apis.html#mysql-stmt-data-seek" title="29.2.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a></td><td>Seeks to an arbitrary row number in a statement result set</td></tr><tr><td><a href="apis.html#mysql-stmt-errno" title="29.2.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a></td><td>Returns the error number for the last statement execution</td></tr><tr><td><a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a></td><td>Returns the error message for the last statement execution</td></tr><tr><td><a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a></td><td>Executes the prepared statement</td></tr><tr><td><a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a></td><td>Fetches the next row of data from the result set and returns data for
              all bound columns</td></tr><tr><td><a href="apis.html#mysql-stmt-fetch-column" title="29.2.7.12. mysql_stmt_fetch_column()"><code class="literal">mysql_stmt_fetch_column()</code></a></td><td>Fetch data for one column of the current row of the result set</td></tr><tr><td><a href="apis.html#mysql-stmt-field-count" title="29.2.7.13. mysql_stmt_field_count()"><code class="literal">mysql_stmt_field_count()</code></a></td><td>Returns the number of result columns for the most recent statement</td></tr><tr><td><a href="apis.html#mysql-stmt-free-result" title="29.2.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a></td><td>Free the resources allocated to the statement handle</td></tr><tr><td><a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a></td><td>Allocates memory for <code class="literal">MYSQL_STMT</code> structure and
              initializes it</td></tr><tr><td><a href="apis.html#mysql-stmt-insert-id" title="29.2.7.16. mysql_stmt_insert_id()"><code class="literal">mysql_stmt_insert_id()</code></a></td><td>Returns the ID generated for an <code class="literal">AUTO_INCREMENT</code> column
              by prepared statement</td></tr><tr><td><a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a></td><td>Returns total row count from the buffered statement result set</td></tr><tr><td><a href="apis.html#mysql-stmt-param-count" title="29.2.7.18. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a></td><td>Returns the number of parameters in a prepared SQL statement</td></tr><tr><td><a href="apis.html#mysql-stmt-param-metadata" title="29.2.7.19. mysql_stmt_param_metadata()"><code class="literal">mysql_stmt_param_metadata()</code></a></td><td>(Return parameter metadata in the form of a result set.) Currently, this
              function does nothing</td></tr><tr><td><a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a></td><td>Prepares an SQL string for execution</td></tr><tr><td><a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a></td><td>Reset the statement buffers in the server</td></tr><tr><td><a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a></td><td>Returns prepared statement metadata in the form of a result set</td></tr><tr><td><a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a></td><td>Seeks to a row offset in a statement result set, using value returned
              from
              <a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a></td></tr><tr><td><a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a></td><td>Returns the statement row cursor position</td></tr><tr><td><a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a></td><td>Sends long data in chunks to server</td></tr><tr><td><a href="apis.html#mysql-stmt-sqlstate" title="29.2.7.26. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a></td><td>Returns the SQLSTATE error code for the last statement execution</td></tr><tr><td><a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a></td><td>Retrieves the complete result set to the client</td></tr></tbody></table></div><p>
      Call <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> to create
      a statement handle, then
      <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> to prepare
      it, <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
      supply the parameter data, and
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to execute
      the statement. You can repeat the
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> by changing
      parameter values in the respective buffers supplied through
      <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>.
    </p><p>
      If the statement is a <code class="literal">SELECT</code> or any other
      statement that produces a result set,
      <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> also returns
      the result set metadata information in the form of a
      <code class="literal">MYSQL_RES</code> result set through
      <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>.
    </p><p>
      You can supply the result buffers using
      <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, so that
      the <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
      automatically returns data to these buffers. This is row-by-row
      fetching.
    </p><p>
      You can also send the text or binary data in chunks to server
      using
      <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>. See
      <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()">Section 29.2.7.25, “<code class="literal">mysql_stmt_send_long_data()</code>”</a>.
    </p><p>
      When statement execution has been completed, the statement handle
      must be closed using
      <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a> so that all
      resources associated with it can be freed.
    </p><p>
      If you obtained a <code class="literal">SELECT</code> statement's result set
      metadata by calling
      <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>, you
      should also free the metadata using
      <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>.
    </p><p>
      <span class="bold"><strong>Execution Steps</strong></span>
    </p><p>
      To prepare and execute a statement, an application follows these
      steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a prepared statement handle with
          <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>. To prepare
          the statement on the server, call
          <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> and pass
          it a string containing the SQL statement.
        </p></li><li><p>
          If the statement produces a result set, call
          <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
          to obtain the result set metadata. This metadata is itself in
          the form of result set, albeit a separate one from the one
          that contains the rows returned by the query. The metadata
          result set indicates how many columns are in the result and
          contains information about each column.
        </p></li><li><p>
          Set the values of any parameters using
          <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>. All
          parameters must be set. Otherwise, statement execution returns
          an error or produces unexpected results.
        </p></li><li><p>
          Call <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
          execute the statement.
        </p></li><li><p>
          If the statement produces a result set, bind the data buffers
          to use for retrieving the row values by calling
          <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        </p></li><li><p>
          Fetch the data into the buffers row by row by calling
          <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> repeatedly
          until no more rows are found.
        </p></li><li><p>
          Repeat steps 3 through 6 as necessary, by changing the
          parameter values and re-executing the statement.
        </p></li></ol></div><p>
      When <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> is
      called, the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The server parses the statement and sends the okay status back
          to the client by assigning a statement ID. It also sends total
          number of parameters, a column count, and its metadata if it
          is a result set oriented statement. All syntax and semantics
          of the statement are checked by the server during this call.
        </p></li><li><p>
          The client uses this statement ID for the further operations,
          so that the server can identify the statement from among its
          pool of statements.
        </p></li></ul></div><p>
      When <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> is
      called, the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The client uses the statement handle and sends the parameter
          data to the server.
        </p></li><li><p>
          The server identifies the statement using the ID provided by
          the client, replaces the parameter markers with the newly
          supplied data, and executes the statement. If the statement
          produces a result set, the server sends the data back to the
          client. Otherwise, it sends an okay status and total number of
          rows changed, deleted, or inserted.
        </p></li></ul></div><p>
      When <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is
      called, the MySQL client/server protocol performs these actions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The client reads the data from the packet row by row and
          places it into the application data buffers by doing the
          necessary conversions. If the application buffer type is same
          as that of the field type returned from the server, the
          conversions are straightforward.
        </p></li></ul></div><p>
      If an error occurs, you can get the statement error code, error
      message, and SQLSTATE value using
      <a href="apis.html#mysql-stmt-errno" title="29.2.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a>,
      <a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>, and
      <a href="apis.html#mysql-stmt-sqlstate" title="29.2.7.26. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a>,
      respectively.
    </p><p>
      <span class="bold"><strong>Prepared Statement Logging</strong></span>
    </p><p>
      For prepared statements that are executed with the
      <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> and
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> C API
      functions, the server writes <code class="literal">Prepare</code> and
      <code class="literal">Execute</code> lines to the general query log so that
      you can tell when statements are prepared and executed.
    </p><p>
      Suppose that you prepare and execute a statement as follows:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Call <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> to
          prepare the statement string <code class="literal">"SELECT ?"</code>.
        </p></li><li><p>
          Call <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
          to bind the value <code class="literal">3</code> to the parameter in the
          prepared statement.
        </p></li><li><p>
          Call <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to
          execute the prepared statement.
        </p></li></ol></div><p>
      As a result of the preceding calls, the server writes the
      following lines to the general query log:
    </p><pre class="programlisting">Prepare  [1] SELECT ?
Execute  [1] SELECT 3
</pre><p>
      Each <code class="literal">Prepare</code> and <code class="literal">Execute</code>
      line in the log is tagged with a
      <code class="literal">[<em class="replaceable"><code>N</code></em>]</code> statement
      identifier so that you can keep track of which prepared statement
      is being logged. <em class="replaceable"><code>N</code></em> is a positive
      integer. If there are multiple prepared statements active
      simultaneously for the client, <em class="replaceable"><code>N</code></em> may be
      greater than 1. Each <code class="literal">Execute</code> lines shows a
      prepared statement after substitution of data values for
      <code class="literal">?</code> parameters.
    </p><p>
      Version notes: <code class="literal">Prepare</code> lines are displayed
      without <code class="literal">[<em class="replaceable"><code>N</code></em>]</code> before
      MySQL 4.1.10. <code class="literal">Execute</code> lines are not displayed
      at all before MySQL 4.1.10.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-functions"></a>29.2.7. C API Prepared Statement Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#mysql-stmt-affected-rows">29.2.7.1. <code class="literal">mysql_stmt_affected_rows()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-attr-get">29.2.7.2. <code class="literal">mysql_stmt_attr_get()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-attr-set">29.2.7.3. <code class="literal">mysql_stmt_attr_set()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-bind-param">29.2.7.4. <code class="literal">mysql_stmt_bind_param()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-bind-result">29.2.7.5. <code class="literal">mysql_stmt_bind_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-close">29.2.7.6. <code class="literal">mysql_stmt_close()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-data-seek">29.2.7.7. <code class="literal">mysql_stmt_data_seek()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-errno">29.2.7.8. <code class="literal">mysql_stmt_errno()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-error">29.2.7.9. <code class="literal">mysql_stmt_error()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-execute">29.2.7.10. <code class="literal">mysql_stmt_execute()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-fetch">29.2.7.11. <code class="literal">mysql_stmt_fetch()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-fetch-column">29.2.7.12. <code class="literal">mysql_stmt_fetch_column()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-field-count">29.2.7.13. <code class="literal">mysql_stmt_field_count()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-free-result">29.2.7.14. <code class="literal">mysql_stmt_free_result()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-init">29.2.7.15. <code class="literal">mysql_stmt_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-insert-id">29.2.7.16. <code class="literal">mysql_stmt_insert_id()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-num-rows">29.2.7.17. <code class="literal">mysql_stmt_num_rows()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-param-count">29.2.7.18. <code class="literal">mysql_stmt_param_count()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-param-metadata">29.2.7.19. <code class="literal">mysql_stmt_param_metadata()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-prepare">29.2.7.20. <code class="literal">mysql_stmt_prepare()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-reset">29.2.7.21. <code class="literal">mysql_stmt_reset()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-result-metadata">29.2.7.22. <code class="literal">mysql_stmt_result_metadata()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-row-seek">29.2.7.23. <code class="literal">mysql_stmt_row_seek()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-row-tell">29.2.7.24. <code class="literal">mysql_stmt_row_tell()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-send-long-data">29.2.7.25. <code class="literal">mysql_stmt_send_long_data()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-sqlstate">29.2.7.26. <code class="literal">mysql_stmt_sqlstate()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-stmt-store-result">29.2.7.27. <code class="literal">mysql_stmt_store_result()</code></a></span></dt></dl></div><p>
      To prepare and execute queries, use the functions described in
      detail in the following sections.
    </p><p>
      All functions that operate with a <code class="literal">MYSQL_STMT</code>
      structure begin with the prefix <code class="literal">mysql_stmt_</code>.
    </p><p>
      To create a <code class="literal">MYSQL_STMT</code> handle, use the
      <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a> function.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-affected-rows"></a>29.2.7.1. <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a></h4></div></div></div><a class="indexterm" name="id2485967"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_affected_rows(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the total number of rows changed, deleted, or inserted
        by the last executed statement. May be called immediately after
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> for
        <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, or
        <code class="literal">INSERT</code> statements. For
        <code class="literal">SELECT</code> statements,
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>
        works like <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records were
        updated for an <code class="literal">UPDATE</code> statement, no rows
        matched the <code class="literal">WHERE</code> clause in the query, or
        that no query has yet been executed. -1 indicates that the query
        returned an error or that, for a <code class="literal">SELECT</code>
        query,
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a> was
        called prior to calling
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
        Because
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>
        returns an unsigned value, you can check for -1 by comparing the
        return value to <code class="literal">(my_ulonglong)-1</code> (or to
        <code class="literal">(my_ulonglong)~0</code>, which is equivalent).
      </p><p>
        See <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()">Section 29.2.3.1, “<code class="literal">mysql_affected_rows()</code>”</a>, for additional
        information on the return value.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>,
        refer to the Example from <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-attr-get"></a>29.2.7.2. <a href="apis.html#mysql-stmt-attr-get" title="29.2.7.2. mysql_stmt_attr_get()"><code class="literal">mysql_stmt_attr_get()</code></a></h4></div></div></div><a class="indexterm" name="id2486171"></a><p>
        <code class="literal">my_bool mysql_stmt_attr_get(MYSQL_STMT *stmt, enum
        enum_stmt_attr_type option, void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to get the current value for a statement attribute.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to get; the <code class="literal">arg</code> should point to a
        variable that should contain the option value. If the option is
        an integer, then <code class="literal">arg</code> should point to the
        value of the integer.
      </p><p>
        See <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()">Section 29.2.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>, for a list of options
        and option types.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          In MySQL 5.1,
          <a href="apis.html#mysql-stmt-attr-get" title="29.2.7.2. mysql_stmt_attr_get()"><code class="literal">mysql_stmt_attr_get()</code></a>
          originally used <code class="literal">unsigned int *</code>, not
          <code class="literal">my_bool *</code>, for
          <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code>. This was
          corrected in MySQL 5.1.7.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if <code class="literal">option</code> is
        unknown.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-attr-set"></a>29.2.7.3. <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a></h4></div></div></div><a class="indexterm" name="id2486310"></a><p>
        <code class="literal">my_bool mysql_stmt_attr_set(MYSQL_STMT *stmt, enum
        enum_stmt_attr_type option, const void *arg)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Can be used to affect behavior for a prepared statement. This
        function may be called multiple times to set several options.
      </p><p>
        The <code class="literal">option</code> argument is the option that you
        want to set. The <code class="literal">arg</code> argument is the value
        for the option. <code class="literal">arg</code> should point to a
        variable that is set to the desired attribute value. The
        variable type is as indicated in the following table.
      </p><p>
        Possible <code class="literal">option</code> values:
      </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Option</strong></span></td><td><span class="bold"><strong>Argument Type</strong></span></td><td><span class="bold"><strong>Function</strong></span></td></tr><tr><td><code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code></td><td><code class="literal">my_bool *</code></td><td>If set to 1, causes
                <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
                to update the metadata
                <code class="literal">MYSQL_FIELD-&gt;max_length</code> value.</td></tr><tr><td><code class="literal">STMT_ATTR_CURSOR_TYPE</code></td><td><code class="literal">unsigned long *</code></td><td>Type of cursor to open for statement when
                <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> is
                invoked. <code class="literal">*arg</code> can be
                <code class="literal">CURSOR_TYPE_NO_CURSOR</code> (the default)
                or <code class="literal">CURSOR_TYPE_READ_ONLY</code>.</td></tr><tr><td><code class="literal">STMT_ATTR_PREFETCH_ROWS</code></td><td><code class="literal">unsigned long *</code></td><td>Number of rows to fetch from server at a time when using a cursor.
                <code class="literal">*arg</code> can be in the range from 1 to
                the maximum value of <code class="literal">unsigned long</code>.
                The default is 1.</td></tr></tbody></table></div><p>
        If you use the <code class="literal">STMT_ATTR_CURSOR_TYPE</code> option
        with <code class="literal">CURSOR_TYPE_READ_ONLY</code>, a cursor is
        opened for the statement when you invoke
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. If there
        is already an open cursor from a previous
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> call, it
        closes the cursor before opening a new one.
        <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a> also closes
        any open cursor before preparing the statement for re-execution.
        <a href="apis.html#mysql-stmt-free-result" title="29.2.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a> closes
        any open cursor.
      </p><p>
        If you open a cursor for a prepared statement,
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> is
        unnecessary, because that function causes the result set to be
        buffered on the client side.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if <code class="literal">option</code> is
        unknown.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example opens a cursor for a prepared statement
        and sets the number of rows to fetch at a time to 5:
      </p><pre class="programlisting">MYSQL_STMT *stmt;
int rc;
unsigned long type;
unsigned long prefetch_rows = 5;

stmt = mysql_stmt_init(mysql);
type = (unsigned long) CURSOR_TYPE_READ_ONLY;
rc = mysql_stmt_attr_set(stmt, STMT_ATTR_CURSOR_TYPE, (void*) &amp;type);
/* ... check return value ... */
rc = mysql_stmt_attr_set(stmt, STMT_ATTR_PREFETCH_ROWS,
                         (void*) &amp;prefetch_rows);
/* ... check return value ... */
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-bind-param"></a>29.2.7.4. <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a></h4></div></div></div><a class="indexterm" name="id2486662"></a><p>
        <code class="literal">my_bool mysql_stmt_bind_param(MYSQL_STMT *stmt,
        MYSQL_BIND *bind)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> is used
        to bind input data for the parameter markers in the SQL
        statement that was passed to
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>. It uses
        <code class="literal">MYSQL_BIND</code> structures to supply the data.
        <code class="literal">bind</code> is the address of an array of
        <code class="literal">MYSQL_BIND</code> structures. The client library
        expects the array to contain one element for each
        “<span class="quote"><code class="literal">?</code></span>” parameter marker that is
        present in the query.
      </p><p>
        Suppose that you prepare the following statement:
      </p><pre class="programlisting">INSERT INTO mytbl VALUES(?,?,?)
</pre><p>
        When you bind the parameters, the array of
        <code class="literal">MYSQL_BIND</code> structures must contain three
        elements, and can be declared like this:
      </p><pre class="programlisting">MYSQL_BIND bind[3];
</pre><p>
        <a href="apis.html#c-api-prepared-statement-datatypes" title="29.2.5. C API Prepared Statement Data types">Section 29.2.5, “C API Prepared Statement Data types”</a>, describes
        the members of each <code class="literal">MYSQL_BIND</code> element and
        how they should be set to provide input values.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the bind operation was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The conversion is not supported. Possibly the
            <code class="literal">buffer_type</code> value is illegal or is not
            one of the supported types.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>, refer
        to the Example from <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-bind-result"></a>29.2.7.5. <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a></h4></div></div></div><a class="indexterm" name="id2486891"></a><p>
        <code class="literal">my_bool mysql_stmt_bind_result(MYSQL_STMT *stmt,
        MYSQL_BIND *bind)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> is
        used to associate (that is, bind) output columns in the result
        set to data buffers and length buffers. When
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is called to
        fetch data, the MySQL client/server protocol places the data for
        the bound columns into the specified buffers.
      </p><p>
        All columns must be bound to buffers prior to calling
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
        <code class="literal">bind</code> is the address of an array of
        <code class="literal">MYSQL_BIND</code> structures. The client library
        expects the array to contain one element for each column of the
        result set. If you do not bind columns to
        <code class="literal">MYSQL_BIND</code> structures,
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> simply
        ignores the data fetch. The buffers should be large enough to
        hold the data values, because the protocol doesn't return data
        values in chunks.
      </p><p>
        A column can be bound or rebound at any time, even after a
        result set has been partially retrieved. The new binding takes
        effect the next time
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> is called.
        Suppose that an application binds the columns in a result set
        and calls <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
        The client/server protocol returns data in the bound buffers.
        Then suppose that the application binds the columns to a
        different set of buffers. The protocol places data into the
        newly bound buffers when the next call to
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> occurs.
      </p><p>
        To bind a column, an application calls
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> and
        passes the type, address, and length of the output buffer into
        which the value should be stored.
        <a href="apis.html#c-api-prepared-statement-datatypes" title="29.2.5. C API Prepared Statement Data types">Section 29.2.5, “C API Prepared Statement Data types”</a>, describes
        the members of each <code class="literal">MYSQL_BIND</code> element and
        how they should be set to receive output values.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the bind operation was successful. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The conversion is not supported. Possibly the
            <code class="literal">buffer_type</code> value is illegal or is not
            one of the supported types.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, refer
        to the Example from <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()">Section 29.2.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-close"></a>29.2.7.6. <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a></h4></div></div></div><a class="indexterm" name="id2487147"></a><p>
        <code class="literal">my_bool mysql_stmt_close(MYSQL_STMT *)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Closes the prepared statement.
        <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a> also
        deallocates the statement handle pointed to by
        <code class="literal">stmt</code>.
      </p><p>
        If the current statement has pending or unread results, this
        function cancels them so that the next query can be executed.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was freed successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a>, refer to
        the Example from <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-data-seek"></a>29.2.7.7. <a href="apis.html#mysql-stmt-data-seek" title="29.2.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a></h4></div></div></div><a class="indexterm" name="id2487290"></a><p>
        <code class="literal">void mysql_stmt_data_seek(MYSQL_STMT *stmt,
        my_ulonglong offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Seeks to an arbitrary row in a statement result set. The
        <code class="literal">offset</code> value is a row number and should be in
        the range from <code class="literal">0</code> to
        <a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows(stmt)-1</code></a>.
      </p><p>
        This function requires that the statement result set structure
        contains the entire result of the last executed query, so
        <a href="apis.html#mysql-stmt-data-seek" title="29.2.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a> may be
        used only in conjunction with
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-errno"></a>29.2.7.8. <a href="apis.html#mysql-stmt-errno" title="29.2.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a></h4></div></div></div><a class="indexterm" name="id2487398"></a><p>
        <code class="literal">unsigned int mysql_stmt_errno(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="apis.html#mysql-stmt-errno" title="29.2.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a> returns the
        error code for the most recently invoked statement API function
        that can succeed or fail. A return value of zero means that no
        error occurred. Client error message numbers are listed in the
        MySQL <code class="filename">errmsg.h</code> header file. Server error
        message numbers are listed in
        <code class="filename">mysqld_error.h</code>. Errors also are listed at
        <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value. Zero if no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-error"></a>29.2.7.9. <a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a></h4></div></div></div><a class="indexterm" name="id2487499"></a><p>
        <code class="literal">const char *mysql_stmt_error(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a> returns a
        null-terminated string containing the error message for the most
        recently invoked statement API function that can succeed or
        fail. An empty string (<code class="literal">""</code>) is returned if no
        error occurred. This means the following two tests are
        equivalent:
      </p><pre class="programlisting">if(*mysql_stmt_errno(stmt))
{
  // an error occurred
}

if (mysql_stmt_error(stmt)[0])
{
  // an error occurred
}
</pre><p>
        The language of the client error messages may be changed by
        recompiling the MySQL client library. Currently, you can choose
        error messages in several different languages.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string that describes the error. An empty string if
        no error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-execute"></a>29.2.7.10. <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a></h4></div></div></div><a class="indexterm" name="id2487602"></a><p>
        <code class="literal">int mysql_stmt_execute(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> executes
        the prepared query associated with the statement handle. The
        currently bound parameter marker values are sent to server
        during this call, and the server replaces the markers with this
        newly supplied data.
      </p><p>
        If the statement is an <code class="literal">UPDATE</code>,
        <code class="literal">DELETE</code>, or <code class="literal">INSERT</code>, the
        total number of changed, deleted, or inserted rows can be found
        by calling
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>. If
        this is a statement such as <code class="literal">SELECT</code> that
        generates a result set, you must call
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to fetch the
        data prior to calling any other functions that result in query
        processing. For more information on how to fetch the results,
        refer to <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()">Section 29.2.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p><p>
        For statements that generate a result set, you can request that
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> open a
        cursor for the statement by calling
        <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> before
        executing the statement. If you execute a statement multiple
        times, <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>
        closes any open cursor before opening a new one.
      </p><p>
        As of MySQL 5.1.25, metadata changes to tables or views referred
        to by prepared statements are detected and cause automatic
        repreparation of the statement when it is next executed. For
        more information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.1. Automatic Prepared Statement Repreparation">Section 12.7.1, “Automatic Prepared Statement Repreparation”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if execution was successful. Non-zero if an error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to create and populate a
        table using <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>,
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>,
        <a href="apis.html#mysql-stmt-param-count" title="29.2.7.18. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a>,
        <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>,
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>, and
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>. The
        <code class="literal">mysql</code> variable is assumed to be a valid
        connection handle.
      </p><pre class="programlisting">#define STRING_SIZE 50

#define DROP_SAMPLE_TABLE "DROP TABLE IF EXISTS test_table"
#define CREATE_SAMPLE_TABLE "CREATE TABLE test_table(col1 INT,\
                                                 col2 VARCHAR(40),\
                                                 col3 SMALLINT,\
                                                 col4 TIMESTAMP)"
#define INSERT_SAMPLE "INSERT INTO \ 
                       test_table(col1,col2,col3) \
                       VALUES(?,?,?)"

MYSQL_STMT    *stmt;
MYSQL_BIND    bind[3];
my_ulonglong  affected_rows;
int           param_count;
short         small_data;
int           int_data;
char          str_data[STRING_SIZE];
unsigned long str_length;
my_bool       is_null;

if (mysql_query(mysql, DROP_SAMPLE_TABLE))
{
  fprintf(stderr, " DROP TABLE failed\n");
  fprintf(stderr, " %s\n", mysql_error(mysql));
  exit(0);
}

if (mysql_query(mysql, CREATE_SAMPLE_TABLE))
{
  fprintf(stderr, " CREATE TABLE failed\n");
  fprintf(stderr, " %s\n", mysql_error(mysql));
  exit(0);
}

/* Prepare an INSERT query with 3 parameters */
/* (the TIMESTAMP column is not named; the server */
/*  sets it to the current date and time) */
stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, INSERT_SAMPLE, strlen(INSERT_SAMPLE)))
{
  fprintf(stderr, " mysql_stmt_prepare(), INSERT failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
fprintf(stdout, " prepare, INSERT successful\n");

/* Get the parameter count from the statement */
param_count= mysql_stmt_param_count(stmt);
fprintf(stdout, " total parameters in INSERT: %d\n", param_count);

if (param_count != 3) /* validate parameter count */
{
  fprintf(stderr, " invalid parameter count returned by MySQL\n");
  exit(0);
}

/* Bind the data for all 3 parameters */

memset(bind, 0, sizeof(bind));

/* INTEGER PARAM */
/* This is a number type, so there is no need 
   to specify buffer_length */
bind[0].buffer_type= MYSQL_TYPE_LONG;
bind[0].buffer= (char *)&amp;int_data;
bind[0].is_null= 0;
bind[0].length= 0;

/* STRING PARAM */
bind[1].buffer_type= MYSQL_TYPE_STRING;
bind[1].buffer= (char *)str_data;
bind[1].buffer_length= STRING_SIZE;
bind[1].is_null= 0;
bind[1].length= &amp;str_length;

/* SMALLINT PARAM */
bind[2].buffer_type= MYSQL_TYPE_SHORT;
bind[2].buffer= (char *)&amp;small_data;
bind[2].is_null= &amp;is_null;
bind[2].length= 0;

/* Bind the buffers */
if (mysql_stmt_bind_param(stmt, bind))
{
  fprintf(stderr, " mysql_stmt_bind_param() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Specify the data values for the first row */
int_data= 10;             /* integer */
strncpy(str_data, "MySQL", STRING_SIZE); /* string  */
str_length= strlen(str_data);

/* INSERT SMALLINT data as NULL */
is_null= 1;

/* Execute the INSERT statement - 1*/
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute(), 1 failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get the total number of affected rows */
affected_rows= mysql_stmt_affected_rows(stmt);
fprintf(stdout, " total affected rows(insert 1): %lu\n",
                (unsigned long) affected_rows);

if (affected_rows != 1) /* validate affected rows */
{
  fprintf(stderr, " invalid affected rows by MySQL\n");
  exit(0);
}

/* Specify data values for second row, 
   then re-execute the statement */
int_data= 1000;
strncpy(str_data, "
        The most popular Open Source database", 
        STRING_SIZE);
str_length= strlen(str_data);
small_data= 1000;         /* smallint */
is_null= 0;               /* reset */

/* Execute the INSERT statement - 2*/
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute, 2 failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get the total rows affected */
affected_rows= mysql_stmt_affected_rows(stmt);
fprintf(stdout, " total affected rows(insert 2): %lu\n",
                (unsigned long) affected_rows);

if (affected_rows != 1) /* validate affected rows */
{
  fprintf(stderr, " invalid affected rows by MySQL\n");
  exit(0);
}

/* Close the statement */
if (mysql_stmt_close(stmt))
{
  fprintf(stderr, " failed while closing the statement\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For complete examples on the use of prepared statement
          functions, refer to the file
          <code class="filename">tests/mysql_client_test.c</code>. This file can
          be obtained from a MySQL source distribution or from the
          Bazaar source repository.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-fetch"></a>29.2.7.11. <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a></h4></div></div></div><a class="indexterm" name="id2488035"></a><p>
        <code class="literal">int mysql_stmt_fetch(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> returns the
        next row in the result set. It can be called only while the
        result set exists; that is, after a call to
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> for a
        statement such as <code class="literal">SELECT</code> that creates a
        result set.
      </p><p>
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> returns row
        data using the buffers bound by
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>. It
        returns the data in those buffers for all the columns in the
        current row set and the lengths are returned to the
        <code class="literal">length</code> pointer. All columns must be bound by
        the application before it calls
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        By default, result sets are fetched unbuffered a row at a time
        from the server. To buffer the entire result set on the client,
        call <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
        after binding the data buffers and before caling
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        If a fetched data value is a <code class="literal">NULL</code> value, the
        <code class="literal">*is_null</code> value of the corresponding
        <code class="literal">MYSQL_BIND</code> structure contains TRUE (1).
        Otherwise, the data and its length are returned in the
        <code class="literal">*buffer</code> and <code class="literal">*length</code>
        elements based on the buffer type specified by the application.
        Each numeric and temporal type has a fixed length, as listed in
        the following table. The length of the string types depends on
        the length of the actual data value, as indicated by
        <code class="literal">data_length</code>.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type</strong></span></td><td><span class="bold"><strong>Length</strong></span></td></tr><tr><td><code class="literal">MYSQL_TYPE_TINY</code></td><td>1</td></tr><tr><td><code class="literal">MYSQL_TYPE_SHORT</code></td><td>2</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONG</code></td><td>4</td></tr><tr><td><code class="literal">MYSQL_TYPE_LONGLONG</code></td><td>8</td></tr><tr><td><code class="literal">MYSQL_TYPE_FLOAT</code></td><td>4</td></tr><tr><td><code class="literal">MYSQL_TYPE_DOUBLE</code></td><td>8</td></tr><tr><td><code class="literal">MYSQL_TYPE_TIME</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_DATE</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_DATETIME</code></td><td><code class="literal">sizeof(MYSQL_TIME)</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_STRING</code></td><td><code class="literal">data length</code></td></tr><tr><td><code class="literal">MYSQL_TYPE_BLOB</code></td><td><code class="literal">data_length</code></td></tr></tbody></table></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Return Value</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td>0</td><td>Successful, the data has been fetched to application data buffers.</td></tr><tr><td>1</td><td>Error occurred. Error code and message can be obtained by calling
                <a href="apis.html#mysql-stmt-errno" title="29.2.7.8. mysql_stmt_errno()"><code class="literal">mysql_stmt_errno()</code></a> and
                <a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>.</td></tr><tr><td><code class="literal">MYSQL_NO_DATA</code></td><td>No more rows/data exists</td></tr><tr><td><code class="literal">MYSQL_DATA_TRUNCATED</code></td><td>Data truncation occurred</td></tr></tbody></table></div><p>
        <code class="literal">MYSQL_DATA_TRUNCATED</code> is returned when
        truncation reporting is enabled. (Reporting is enabled by
        default, but can be controlled with
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a>.) To determine
        which parameters were truncated when this value is returned,
        check the <code class="literal">error</code> members of the
        <code class="literal">MYSQL_BIND</code> parameter structures.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li><li><p>
            <code class="literal">CR_UNSUPPORTED_PARAM_TYPE</code>
          </p><p>
            The buffer type is <code class="literal">MYSQL_TYPE_DATE</code>,
            <code class="literal">MYSQL_TYPE_TIME</code>,
            <code class="literal">MYSQL_TYPE_DATETIME</code>, or
            <code class="literal">MYSQL_TYPE_TIMESTAMP</code>, but the data type
            is not <code class="literal">DATE</code>, <code class="literal">TIME</code>,
            <code class="literal">DATETIME</code>, or
            <code class="literal">TIMESTAMP</code>.
          </p></li><li><p>
            All other unsupported conversion errors are returned from
            <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to fetch data from a
        table using
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>,
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>, and
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. (This
        example expects to retrieve the two rows inserted by the example
        shown in <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.) The
        <code class="literal">mysql</code> variable is assumed to be a valid
        connection handle.
      </p><pre class="programlisting">#define STRING_SIZE 50

#define SELECT_SAMPLE "SELECT col1, col2, col3, col4 \
                       FROM test_table"

MYSQL_STMT    *stmt;
MYSQL_BIND    bind[4];
MYSQL_RES     *prepare_meta_result;
MYSQL_TIME    ts;
unsigned long length[4];
int           param_count, column_count, row_count;
short         small_data;
int           int_data;
char          str_data[STRING_SIZE];
my_bool       is_null[4];
my_bool       error[4];

/* Prepare a SELECT query to fetch data from test_table */
stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, SELECT_SAMPLE, strlen(SELECT_SAMPLE)))
{
  fprintf(stderr, " mysql_stmt_prepare(), SELECT failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
fprintf(stdout, " prepare, SELECT successful\n");

/* Get the parameter count from the statement */
param_count= mysql_stmt_param_count(stmt);
fprintf(stdout, " total parameters in SELECT: %d\n", param_count);

if (param_count != 0) /* validate parameter count */
{
  fprintf(stderr, " invalid parameter count returned by MySQL\n");
  exit(0);
}

/* Fetch result set meta information */
prepare_meta_result = mysql_stmt_result_metadata(stmt);
if (!prepare_meta_result)
{
  fprintf(stderr,
         " mysql_stmt_result_metadata(), \ 
           returned no meta information\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Get total columns in the query */
column_count= mysql_num_fields(prepare_meta_result);
fprintf(stdout, 
        " total columns in SELECT statement: %d\n", 
        column_count);

if (column_count != 4) /* validate column count */
{
  fprintf(stderr, " invalid column count returned by MySQL\n");
  exit(0);
}

/* Execute the SELECT query */
if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, " mysql_stmt_execute(), failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Bind the result buffers for all 4 columns before fetching them */

memset(bind, 0, sizeof(bind));

/* INTEGER COLUMN */
bind[0].buffer_type= MYSQL_TYPE_LONG;
bind[0].buffer= (char *)&amp;int_data;
bind[0].is_null= &amp;is_null[0];
bind[0].length= &amp;length[0];
bind[0].error= &amp;error[0];

/* STRING COLUMN */
bind[1].buffer_type= MYSQL_TYPE_STRING;
bind[1].buffer= (char *)str_data;
bind[1].buffer_length= STRING_SIZE;
bind[1].is_null= &amp;is_null[1];
bind[1].length= &amp;length[1];
bind[1].error= &amp;error[1];

/* SMALLINT COLUMN */
bind[2].buffer_type= MYSQL_TYPE_SHORT;
bind[2].buffer= (char *)&amp;small_data;
bind[2].is_null= &amp;is_null[2];
bind[2].length= &amp;length[2];
bind[2].error= &amp;error[2];

/* TIMESTAMP COLUMN */
bind[3].buffer_type= MYSQL_TYPE_TIMESTAMP;
bind[3].buffer= (char *)&amp;ts;
bind[3].is_null= &amp;is_null[3];
bind[3].length= &amp;length[3];
bind[3].error= &amp;error[3];

/* Bind the result buffers */
if (mysql_stmt_bind_result(stmt, bind))
{
  fprintf(stderr, " mysql_stmt_bind_result() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Now buffer all results to client (optional step) */
if (mysql_stmt_store_result(stmt))
{
  fprintf(stderr, " mysql_stmt_store_result() failed\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}

/* Fetch all rows */
row_count= 0;
fprintf(stdout, "Fetching results ...\n");
while (!mysql_stmt_fetch(stmt))
{
  row_count++;
  fprintf(stdout, "  row %d\n", row_count);

  /* column 1 */
  fprintf(stdout, "   column1 (integer)  : ");
  if (is_null[0])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %d(%ld)\n", int_data, length[0]);

  /* column 2 */
  fprintf(stdout, "   column2 (string)   : ");
  if (is_null[1])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %s(%ld)\n", str_data, length[1]);

  /* column 3 */
  fprintf(stdout, "   column3 (smallint) : ");
  if (is_null[2])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %d(%ld)\n", small_data, length[2]);

  /* column 4 */
  fprintf(stdout, "   column4 (timestamp): ");
  if (is_null[3])
    fprintf(stdout, " NULL\n");
  else
    fprintf(stdout, " %04d-%02d-%02d %02d:%02d:%02d (%ld)\n",
                     ts.year, ts.month, ts.day,
                     ts.hour, ts.minute, ts.second,
                     length[3]);
  fprintf(stdout, "\n");
}

/* Validate rows fetched */
fprintf(stdout, " total rows fetched: %d\n", row_count);
if (row_count != 2)
{
  fprintf(stderr, " MySQL failed to return all rows\n");
  exit(0);
}

/* Free the prepared result metadata */
mysql_free_result(prepare_meta_result);


/* Close the statement */
if (mysql_stmt_close(stmt))
{
  fprintf(stderr, " failed while closing the statement\n");
  fprintf(stderr, " %s\n", mysql_stmt_error(stmt));
  exit(0);
}
</pre><p>
        In some cases you might want to determine the length of a column
        value before fetching it with
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. For
        example, the value might be a long string or
        <code class="literal">BLOB</code> value for which you want to know how
        much space must be allocated. To accomplish this, you can use
        these strategies:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Before invoking
            <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to
            retrieve individual rows, invoke
            <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
            to buffer the entire result on the client side. Then the
            maximal length of column values will be indicated by the
            <code class="literal">max_length</code> member of the result set
            metadata returned by
            <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>.
            This strategy requires that you pass
            <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code> to
            <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set()</code></a> or
            the <code class="literal">max_length</code> values will not be
            calculated.
          </p></li><li><p>
            Invoke <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>
            with a zero-length buffer for the column in question and a
            pointer in which the real length can be stored. Then use the
            real length with
            <a href="apis.html#mysql-stmt-fetch-column" title="29.2.7.12. mysql_stmt_fetch_column()"><code class="literal">mysql_stmt_fetch_column()</code></a>.
          </p><pre class="programlisting">real_length= 0;

bind[0].buffer= 0;
bind[0].buffer_length= 0;
bind[0].length= &amp;real_length
mysql_stmt_bind_result(stmt, bind);

mysql_stmt_fetch(stmt);
if (real_length &gt; 0)
{
  data= malloc(real_length);
  bind[0].buffer= data;
  bind[0].buffer_length= real_length;
  mysql_stmt_fetch_column(stmt, 0, bind, 0);
}
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-fetch-column"></a>29.2.7.12. <a href="apis.html#mysql-stmt-fetch-column" title="29.2.7.12. mysql_stmt_fetch_column()"><code class="literal">mysql_stmt_fetch_column()</code></a></h4></div></div></div><a class="indexterm" name="id2488967"></a><p>
        <code class="literal">int mysql_stmt_fetch_column(MYSQL_STMT *stmt,
        MYSQL_BIND *bind, unsigned int column, unsigned long
        offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Fetch one column from the current result set row.
        <code class="literal">bind</code> provides the buffer where data should be
        placed. It should be set up the same way as for
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a>.
        <code class="literal">column</code> indicates which column to fetch. The
        first column is numbered 0. <code class="literal">offset</code> is the
        offset within the data value at which to begin retrieving data.
        This can be used for fetching the data value in pieces. The
        beginning of the value is offset 0.
      </p><p>
        As of MySQL 5.1.25, metadata changes to tables or views referred
        to by prepared statements are detected and cause automatic
        repreparation of the statement when it is next executed. For
        more information, see <a href="sql-syntax.html#statement-repreparation" title="12.7.1. Automatic Prepared Statement Repreparation">Section 12.7.1, “Automatic Prepared Statement Repreparation”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the value was fetched successfully. Non-zero if an error
        occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_INVALID_PARAMETER_NO</code>
          </p><p>
            Invalid column number.
          </p></li><li><p>
            <code class="literal">CR_NO_DATA</code>
          </p><p>
            The end of the result set has already been reached.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-field-count"></a>29.2.7.13. <a href="apis.html#mysql-stmt-field-count" title="29.2.7.13. mysql_stmt_field_count()"><code class="literal">mysql_stmt_field_count()</code></a></h4></div></div></div><a class="indexterm" name="id2489108"></a><p>
        <code class="literal">unsigned int mysql_stmt_field_count(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of columns for the most recent statement for
        the statement handler. This value is zero for statements such as
        <code class="literal">INSERT</code> or <code class="literal">DELETE</code> that do
        not produce result sets.
      </p><p>
        <a href="apis.html#mysql-stmt-field-count" title="29.2.7.13. mysql_stmt_field_count()"><code class="literal">mysql_stmt_field_count()</code></a> can be
        called after you have prepared a statement by invoking
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned integer representing the number of columns in a
        result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-free-result"></a>29.2.7.14. <a href="apis.html#mysql-stmt-free-result" title="29.2.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a></h4></div></div></div><a class="indexterm" name="id2489209"></a><p>
        <code class="literal">my_bool mysql_stmt_free_result(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Releases memory associated with the result set produced by
        execution of the prepared statement. If there is a cursor open
        for the statement,
        <a href="apis.html#mysql-stmt-free-result" title="29.2.7.14. mysql_stmt_free_result()"><code class="literal">mysql_stmt_free_result()</code></a> closes
        it.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the result set was freed successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-init"></a>29.2.7.15. <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a></h4></div></div></div><a class="indexterm" name="id2489284"></a><p>
        <code class="literal">MYSQL_STMT *mysql_stmt_init(MYSQL *mysql)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Create a <code class="literal">MYSQL_STMT</code> handle. The handle should
        be freed with <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close(MYSQL_STMT
        *)</code></a>.
      </p><p>
        <span class="bold"><strong>Return values</strong></span>
      </p><p>
        A pointer to a <code class="literal">MYSQL_STMT</code> structure in case
        of success. <code class="literal">NULL</code> if out of memory.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-insert-id"></a>29.2.7.16. <a href="apis.html#mysql-stmt-insert-id" title="29.2.7.16. mysql_stmt_insert_id()"><code class="literal">mysql_stmt_insert_id()</code></a></h4></div></div></div><a class="indexterm" name="id2489394"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_insert_id(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the value generated for an
        <code class="literal">AUTO_INCREMENT</code> column by the prepared
        <code class="literal">INSERT</code> or <code class="literal">UPDATE</code>
        statement. Use this function after you have executed a prepared
        <code class="literal">INSERT</code> statement on a table which contains an
        <code class="literal">AUTO_INCREMENT</code> field.
      </p><p>
        See <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()">Section 29.2.3.37, “<code class="literal">mysql_insert_id()</code>”</a>, for more information.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Value for <code class="literal">AUTO_INCREMENT</code> column which was
        automatically generated or explicitly set during execution of
        prepared statement, or value generated by
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
        function. Return value is undefined if statement does not set
        <code class="literal">AUTO_INCREMENT</code> value.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-num-rows"></a>29.2.7.17. <a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a></h4></div></div></div><a class="indexterm" name="id2489534"></a><p>
        <code class="literal">my_ulonglong mysql_stmt_num_rows(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of
        <a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a> depends
        on whether you used
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> to
        buffer the entire result set in the statement handle.
      </p><p>
        If you use
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>,
        <a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a> may be
        called immediately. Otherwise, the row count is unavailable
        unless you count the rows as you fetch them.
      </p><p>
        <a href="apis.html#mysql-stmt-num-rows" title="29.2.7.17. mysql_stmt_num_rows()"><code class="literal">mysql_stmt_num_rows()</code></a> is
        intended for use with statements that return a result set, such
        as <code class="literal">SELECT</code>. For statements such as
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or
        <code class="literal">DELETE</code>, the number of affected rows can be
        obtained with
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in the result set.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-param-count"></a>29.2.7.18. <a href="apis.html#mysql-stmt-param-count" title="29.2.7.18. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a></h4></div></div></div><a class="indexterm" name="id2489683"></a><p>
        <code class="literal">unsigned long mysql_stmt_param_count(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the number of parameter markers present in the prepared
        statement.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An unsigned long integer representing the number of parameters
        in a statement.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-param-count" title="29.2.7.18. mysql_stmt_param_count()"><code class="literal">mysql_stmt_param_count()</code></a>, refer
        to the Example from <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-param-metadata"></a>29.2.7.19. <a href="apis.html#mysql-stmt-param-metadata" title="29.2.7.19. mysql_stmt_param_metadata()"><code class="literal">mysql_stmt_param_metadata()</code></a></h4></div></div></div><a class="indexterm" name="id2489778"></a><p>
        <code class="literal">MYSQL_RES *mysql_stmt_param_metadata(MYSQL_STMT
        *stmt)</code>
      </p><p>
        This function currently does nothing.
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-prepare"></a>29.2.7.20. <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a></h4></div></div></div><a class="indexterm" name="id2489840"></a><p>
        <code class="literal">int mysql_stmt_prepare(MYSQL_STMT *stmt, const char
        *stmt_str, unsigned long length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Given the statement handle returned by
        <a href="apis.html#mysql-stmt-init" title="29.2.7.15. mysql_stmt_init()"><code class="literal">mysql_stmt_init()</code></a>, prepares the
        SQL statement pointed to by the string
        <code class="literal">stmt_str</code> and returns a status value. The
        string length should be given by the <code class="literal">length</code>
        argument. The string must consist of a single SQL statement. You
        should not add a terminating semicolon
        (“<span class="quote"><code class="literal">;</code></span>”) or <code class="literal">\g</code>
        to the statement.
      </p><p>
        The application can include one or more parameter markers in the
        SQL statement by embedding question mark
        (“<span class="quote"><code class="literal">?</code></span>”) characters into the SQL
        string at the appropriate positions.
      </p><p>
        The markers are legal only in certain places in SQL statements.
        For example, they are allowed in the <code class="literal">VALUES()</code>
        list of an <code class="literal">INSERT</code> statement (to specify
        column values for a row), or in a comparison with a column in a
        <code class="literal">WHERE</code> clause to specify a comparison value.
        However, they are not allowed for identifiers (such as table or
        column names), or to specify both operands of a binary operator
        such as the <code class="literal">=</code> equal sign. The latter
        restriction is necessary because it would be impossible to
        determine the parameter type. In general, parameters are legal
        only in Data Manipulation Language (DML) statements, and not in
        Data Definition Language (DDL) statements.
      </p><p>
        The parameter markers must be bound to application variables
        using <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a>
        before executing the statement.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was prepared successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        If the prepare operation was unsuccessful (that is,
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> returns
        non-zero), the error message can be obtained by calling
        <a href="apis.html#mysql-stmt-error" title="29.2.7.9. mysql_stmt_error()"><code class="literal">mysql_stmt_error()</code></a>.
      </p><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>, refer to
        the Example from <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()">Section 29.2.7.10, “<code class="literal">mysql_stmt_execute()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-reset"></a>29.2.7.21. <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a></h4></div></div></div><a class="indexterm" name="id2490122"></a><p>
        <code class="literal">my_bool mysql_stmt_reset(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Reset the prepared statement on the client and server to state
        after prepare. This is mainly used to reset data sent with
        <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>.
        Any open cursor for the statement is closed.
      </p><p>
        To re-prepare the statement with another query, use
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the statement was reset successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-result-metadata"></a>29.2.7.22. <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a></h4></div></div></div><a class="indexterm" name="id2490275"></a><p>
        <code class="literal">MYSQL_RES *mysql_stmt_result_metadata(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        If a statement passed to
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> is one
        that produces a result set,
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        returns the result set metadata in the form of a pointer to a
        <code class="literal">MYSQL_RES</code> structure that can be used to
        process the meta information such as total number of fields and
        individual field information. This result set pointer can be
        passed as an argument to any of the field-based API functions
        that process result set metadata, such as:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="apis.html#mysql-num-fields" title="29.2.3.47. mysql_num_fields()"><code class="literal">mysql_num_fields()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-fetch-field" title="29.2.3.17. mysql_fetch_field()"><code class="literal">mysql_fetch_field()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-fetch-field-direct" title="29.2.3.18. mysql_fetch_field_direct()"><code class="literal">mysql_fetch_field_direct()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-fetch-fields" title="29.2.3.19. mysql_fetch_fields()"><code class="literal">mysql_fetch_fields()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-field-seek" title="29.2.3.23. mysql_field_seek()"><code class="literal">mysql_field_seek()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-field-tell" title="29.2.3.24. mysql_field_tell()"><code class="literal">mysql_field_tell()</code></a>
          </p></li><li><p>
            <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>
          </p></li></ul></div><p>
        The result set structure should be freed when you are done with
        it, which you can do by passing it to
        <a href="apis.html#mysql-free-result" title="29.2.3.25. mysql_free_result()"><code class="literal">mysql_free_result()</code></a>. This is
        similar to the way you free a result set obtained from a call to
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
      </p><p>
        The result set returned by
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        contains only metadata. It does not contain any row results. The
        rows are obtained by using the statement handle with
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A <code class="literal">MYSQL_RES</code> result structure.
        <code class="literal">NULL</code> if no meta information exists for the
        prepared query.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        For the usage of
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>,
        refer to the Example from <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()">Section 29.2.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-row-seek"></a>29.2.7.23. <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a></h4></div></div></div><a class="indexterm" name="id2490584"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_stmt_row_seek(MYSQL_STMT *stmt,
        MYSQL_ROW_OFFSET offset)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Sets the row cursor to an arbitrary row in a statement result
        set. The <code class="literal">offset</code> value is a row offset that
        should be a value returned from
        <a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a> or from
        <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>. This
        value is not a row number; if you want to seek to a row within a
        result set by number, use
        <a href="apis.html#mysql-stmt-data-seek" title="29.2.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a> instead.
      </p><p>
        This function requires that the result set structure contains
        the entire result of the query, so
        <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a> may be
        used only in conjunction with
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The previous value of the row cursor. This value may be passed
        to a subsequent call to
        <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-row-tell"></a>29.2.7.24. <a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a></h4></div></div></div><a class="indexterm" name="id2490709"></a><p>
        <code class="literal">MYSQL_ROW_OFFSET mysql_stmt_row_tell(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Returns the current position of the row cursor for the last
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a>. This value
        can be used as an argument to
        <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>.
      </p><p>
        You should use
        <a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a> only
        after
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The current offset of the row cursor.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-send-long-data"></a>29.2.7.25. <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a></h4></div></div></div><a class="indexterm" name="id2490812"></a><p>
        <code class="literal">my_bool mysql_stmt_send_long_data(MYSQL_STMT *stmt,
        unsigned int parameter_number, const char *data, unsigned long
        length)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Allows an application to send parameter data to the server in
        pieces (or “<span class="quote">chunks</span>”). Call this function after
        <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> and
        before <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>. It
        can be called multiple times to send the parts of a character or
        binary data value for a column, which must be one of the
        <code class="literal">TEXT</code> or <code class="literal">BLOB</code> data types.
      </p><p>
        <code class="literal">parameter_number</code> indicates which parameter to
        associate the data with. Parameters are numbered beginning with
        0. <code class="literal">data</code> is a pointer to a buffer containing
        data to be sent, and <code class="literal">length</code> indicates the
        number of bytes in the buffer.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The next <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>
          call ignores the bind buffer for all parameters that have been
          used with
          <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a>
          since last
          <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> or
          <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a>.
        </p></div><p>
        If you want to reset/forget the sent data, you can do it with
        <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a>. See
        <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()">Section 29.2.7.21, “<code class="literal">mysql_stmt_reset()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the data is sent successfully to server. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_INVALID_BUFFER_USE</code>
          </p><p>
            The parameter does not have a string or binary type.
          </p></li><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div><p>
        <span class="bold"><strong>Example</strong></span>
      </p><p>
        The following example demonstrates how to send the data for a
        <code class="literal">TEXT</code> column in chunks. It inserts the data
        value <code class="literal">'MySQL - The most popular Open Source
        database'</code> into the <code class="literal">text_column</code>
        column. The <code class="literal">mysql</code> variable is assumed to be a
        valid connection handle.
      </p><pre class="programlisting">#define INSERT_QUERY "INSERT INTO \
                      test_long_data(text_column) VALUES(?)"

MYSQL_BIND bind[1];
long       length;

stmt = mysql_stmt_init(mysql);
if (!stmt)
{
  fprintf(stderr, " mysql_stmt_init(), out of memory\n");
  exit(0);
}
if (mysql_stmt_prepare(stmt, INSERT_QUERY, strlen(INSERT_QUERY)))
{
  fprintf(stderr, "\n mysql_stmt_prepare(), INSERT failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}
 memset(bind, 0, sizeof(bind));
 bind[0].buffer_type= MYSQL_TYPE_STRING;
 bind[0].length= &amp;length;
 bind[0].is_null= 0;

/* Bind the buffers */
if (mysql_stmt_bind_param(stmt, bind))
{
  fprintf(stderr, "\n param bind failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Supply data in chunks to server */
 if (mysql_stmt_send_long_data(stmt,0,"MySQL",5))
{
  fprintf(stderr, "\n send_long_data failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Supply the next piece of data */
 if (mysql_stmt_send_long_data(stmt,0,
           " - The most popular Open Source database",40))
{
  fprintf(stderr, "\n send_long_data failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}

 /* Now, execute the query */
 if (mysql_stmt_execute(stmt))
{
  fprintf(stderr, "\n mysql_stmt_execute failed");
  fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
  exit(0);
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-sqlstate"></a>29.2.7.26. <a href="apis.html#mysql-stmt-sqlstate" title="29.2.7.26. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a></h4></div></div></div><a class="indexterm" name="id2491143"></a><p>
        <code class="literal">const char *mysql_stmt_sqlstate(MYSQL_STMT
        *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        For the statement specified by <code class="literal">stmt</code>,
        <a href="apis.html#mysql-stmt-sqlstate" title="29.2.7.26. mysql_stmt_sqlstate()"><code class="literal">mysql_stmt_sqlstate()</code></a> returns a
        null-terminated string containing the SQLSTATE error code for
        the most recently invoked prepared statement API function that
        can succeed or fail. The error code consists of five characters.
        <code class="literal">"00000"</code> means “<span class="quote">no error.</span>” The
        values are specified by ANSI SQL and ODBC. For a list of
        possible values, see <a href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>.
      </p><p>
        Note that not all MySQL errors are yet mapped to SQLSTATE codes.
        The value <code class="literal">"HY000"</code> (general error) is used for
        unmapped errors.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A null-terminated character string containing the SQLSTATE error
        code.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-stmt-store-result"></a>29.2.7.27. <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a></h4></div></div></div><a class="indexterm" name="id2491241"></a><p>
        <code class="literal">int mysql_stmt_store_result(MYSQL_STMT *stmt)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Result sets are produced by executing prepared statements for
        SQL statements such as <code class="literal">SELECT</code>,
        <code class="literal">SHOW</code>, <code class="literal">DESCRIBE</code>, and
        <code class="literal">EXPLAIN</code>. By default, result sets for
        successfully executed prepared statements are not buffered on
        the client and
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> fetches them
        one at a time from the server. To cause the complete result set
        to be buffered on the client, call
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> after
        binding data buffers with
        <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> and
        before calling
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> to fetch
        rows. (For an example, see <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()">Section 29.2.7.11, “<code class="literal">mysql_stmt_fetch()</code>”</a>.)
      </p><p>
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> is
        optional for result set processing, unless you will call
        <a href="apis.html#mysql-stmt-data-seek" title="29.2.7.7. mysql_stmt_data_seek()"><code class="literal">mysql_stmt_data_seek()</code></a>,
        <a href="apis.html#mysql-stmt-row-seek" title="29.2.7.23. mysql_stmt_row_seek()"><code class="literal">mysql_stmt_row_seek()</code></a>, or
        <a href="apis.html#mysql-stmt-row-tell" title="29.2.7.24. mysql_stmt_row_tell()"><code class="literal">mysql_stmt_row_tell()</code></a>. Those
        functions require a seekable result set.
      </p><p>
        It is unnecessary to call
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a> after
        executing an SQL statement that does not produce a result set,
        but if you do, it does not harm or cause any notable performance
        problem. You can detect whether the statement produced a result
        set by checking if
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()"><code class="literal">mysql_stmt_result_metadata()</code></a>
        returns <code class="literal">NULL</code>. For more information, refer to
        <a href="apis.html#mysql-stmt-result-metadata" title="29.2.7.22. mysql_stmt_result_metadata()">Section 29.2.7.22, “<code class="literal">mysql_stmt_result_metadata()</code>”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          MySQL doesn't by default calculate
          <code class="literal">MYSQL_FIELD-&gt;max_length</code> for all columns
          in <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
          because calculating this would slow down
          <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
          considerably and most applications doesn't need
          <code class="literal">max_length</code>. If you want
          <code class="literal">max_length</code> to be updated, you can call
          <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()"><code class="literal">mysql_stmt_attr_set(MYSQL_STMT,
          STMT_ATTR_UPDATE_MAX_LENGTH, &amp;flag)</code></a> to enable
          this. See <a href="apis.html#mysql-stmt-attr-set" title="29.2.7.3. mysql_stmt_attr_set()">Section 29.2.7.3, “<code class="literal">mysql_stmt_attr_set()</code>”</a>.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if the results are buffered successfully. Non-zero if an
        error occurred.
      </p><p>
        <span class="bold"><strong>Errors</strong></span>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">CR_COMMANDS_OUT_OF_SYNC</code>
          </p><p>
            Commands were executed in an improper order.
          </p></li><li><p>
            <code class="literal">CR_OUT_OF_MEMORY</code>
          </p><p>
            Out of memory.
          </p></li><li><p>
            <code class="literal">CR_SERVER_GONE_ERROR</code>
          </p><p>
            The MySQL server has gone away.
          </p></li><li><p>
            <code class="literal">CR_SERVER_LOST</code>
          </p><p>
            The connection to the server was lost during the query.
          </p></li><li><p>
            <code class="literal">CR_UNKNOWN_ERROR</code>
          </p><p>
            An unknown error occurred.
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-prepared-statement-problems"></a>29.2.8. C API Prepared Statement Problems</h3></div></div></div><p>
      Here follows a list of the currently known problems with prepared
      statements:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">TIME</code>, <code class="literal">TIMESTAMP</code>, and
          <code class="literal">DATETIME</code> do not support parts of seconds
          (for example, from
          <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a>).
        </p></li><li><p>
          When converting an integer to string,
          <code class="literal">ZEROFILL</code> is honored with prepared
          statements in some cases where the MySQL server doesn't print
          the leading zeros. (For example, with
          <a href="functions.html#function_min"><code class="literal">MIN(<em class="replaceable"><code>number-with-zerofill</code></em>)</code></a>).
        </p></li><li><p>
          When converting a floating-point number to a string in the
          client, the rightmost digits of the converted value may differ
          slightly from those of the original value.
        </p></li><li><p>
          Before MySQL 5.1.17, prepared statements do not use the query
          cache. As of 5.1.17, prepared statements use the query cache
          under the conditions described in
          <a href="optimization.html#query-cache-how" title="7.5.4.1. How the Query Cache Operates">Section 7.5.4.1, “How the Query Cache Operates”</a>.
        </p></li><li><p>
          Prepared statements do not support multi-statements (that is,
          multiple statements within a single string separated by
          “<span class="quote"><code class="literal">;</code></span>” characters). This also
          means that prepared statements cannot invoke stored procedures
          that return result sets, because prepared statements do not
          support multiple result sets.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-multiple-queries"></a>29.2.9. C API Handling of Multiple Statement Execution</h3></div></div></div><p>
      By default, <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
      <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> interpret
      their statement string argument as a single statement to be
      executed, and you process the result according to whether the
      statement produces a result set (a set of rows, as for
      <code class="literal">SELECT</code>) or an affected-rows count (as for
      <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, and so
      forth).
    </p><p>
      MySQL 5.1 also supports the execution of a string
      containing multiple statements separated by semicolon
      (“<span class="quote"><code class="literal">;</code></span>”) characters. This capability
      is enabled by special options that are specified either when you
      connect to the server with
      <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> or after
      connecting by calling`
      <a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>.
    </p><p>
      Executing a multiple-statement string can produce multiple result
      sets or row-count indicators. Processing these results involves a
      different approach than for the single-statement case: After
      handling the result from the first statement, it is necessary to
      check whether more results exist and process them in turn if so.
      To support multiple-result processing, the C API includes the
      <a href="apis.html#mysql-more-results" title="29.2.3.45. mysql_more_results()"><code class="literal">mysql_more_results()</code></a> and
      <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> functions.
      These functions are used at the end of a loop that iterates as
      long as more results are available. <span class="emphasis"><em>Failure to process
      the result this way may result in a dropped connection to the
      server.</em></span>
    </p><p>
      Multiple-result processing also is required if you execute
      <code class="literal">CALL</code> statements for stored procedures. Results
      from a stored procedure have these characteristics:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Statements within the procedure may produce result sets (for
          example, if it executes <code class="literal">SELECT</code> statements).
          These result sets are returned in the order that they are
          produced as the procedure executes.
        </p><p>
          In general, the caller cannot know how many result sets a
          procedure will return. Procedure execution may depend on loops
          or conditional statements that cause the execution path to
          differ from one call to the next. Therefore, you must be
          prepared to retrieve multiple results.
        </p></li><li><p>
          The final result from the procedure is a status result that
          includes no result set. The status indicates whether the
          procedure succeeded or an error occurred.
        </p></li></ul></div><p>
      The multiple statement and result capabilities can be used only
      with <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
      <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>. They cannot
      be used with the prepared statement interface. Prepared statement
      handles are defined to work only with strings that contain a
      single statement. See <a href="apis.html#c-api-prepared-statements" title="29.2.4. C API Prepared Statements">Section 29.2.4, “C API Prepared Statements”</a>.
    </p><p>
      To enable multiple-statement execution and result processing, the
      following options may be used:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
          function has a <code class="literal">flags</code> argument for which two
          option values are relevent:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">CLIENT_MULTI_RESULTS</code> enables the client
              program to process multiple results. This option
              <span class="emphasis"><em>must</em></span> be enabled if you execute
              <code class="literal">CALL</code> statements for stored procedures
              that produce result sets. Otherwise, such procedures
              result in an error <code class="literal">Error 1312 (0A000): PROCEDURE
              <em class="replaceable"><code>proc_name</code></em> can't return a result
              set in the given context</code>.
            </p></li><li><p>
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> enables
              <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
              <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> to
              execute statement strings containing multiple statements
              separated by semicolons. This option also enables
              <code class="literal">CLIENT_MULTI_RESULTS</code> implicitly, so a
              <code class="literal">flags</code> argument of
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> to
              <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> is
              equivalent to an argument of
              <code class="literal">CLIENT_MULTI_STATEMENTS |
              CLIENT_MULTI_RESULTS</code>. That is,
              <code class="literal">CLIENT_MULTI_STATEMENTS</code> is sufficient
              to enable multiple-statement execution and all
              multiple-result processing.
            </p></li></ul></div></li><li><p>
          After the connection to the server has been established, you
          can use the
          <a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
          function to enable or disable multiple-statement execution by
          passing it an argument of
          <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_ON</code> or
          <code class="literal">MYSQL_OPTION_MULTI_STATEMENTS_OFF</code>. Enabling
          multiple-statement execution with this function also enables
          processing of “<span class="quote">simple</span>” results for a
          multiple-statement string where each statement produces a
          single result, but is <span class="emphasis"><em>not</em></span> sufficient to
          allow processing of stored procedures that produce result
          sets.
        </p></li></ul></div><p>
      The following procedure outlines a suggested strategy for handling
      multiple statements:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Pass <code class="literal">CLIENT_MULTI_STATEMENTS</code> to
          <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, to
          fully enable multiple-statement execution and multiple-result
          processing.
        </p></li><li><p>
          After calling <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>
          or <a href="apis.html#mysql-real-query" title="29.2.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a> and
          verifying that it succeeds, enter a loop within which you
          process statement results.
        </p></li><li><p>
          For each iteration of the loop, handle the current statement
          result, retrieving either a result set or an affected-rows
          count. If an error occurs, exit the loop.
        </p></li><li><p>
          At the end of the loop, call
          <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to check
          whether another result exists and initiate retrieval for it if
          so. If no more results are available, exit the loop.
        </p></li></ol></div><p>
      One possible implementation of the preceding strategy is shown
      following. The final part of the loop can be reduced to a simple
      test of whether
      <a href="apis.html#mysql-next-result" title="29.2.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> returns
      non-zero. The code as written distinguishes between no more
      results and an error, which allows a message to be printed for the
      latter occurrence.
    </p><pre class="programlisting">/* connect to server with the CLIENT_MULTI_STATEMENTS option */
if (mysql_real_connect (mysql, host_name, user_name, password,
    db_name, port_num, socket_name, CLIENT_MULTI_STATEMENTS) == NULL)
{
  printf("mysql_real_connect() failed\n");
  mysql_close(mysql);
  exit(1);
}

/* execute multiple statements */
status = mysql_query(mysql,
                     "DROP TABLE IF EXISTS test_table;\
                      CREATE TABLE test_table(id INT);\
                      INSERT INTO test_table VALUES(10);\
                      UPDATE test_table SET id=20 WHERE id=10;\
                      SELECT * FROM test_table;\
                      DROP TABLE test_table");
if (status)
{
  printf("Could not execute statement(s)");
  mysql_close(mysql);
  exit(0);
}

/* process each statement result */
do {
  /* did current statement return data? */
  result = mysql_store_result(mysql);
  if (result)
  {
    /* yes; process rows and free the result set */
    process_result_set(mysql, result);
    mysql_free_result(result);
  }
  else          /* no result set or error */
  {
    if (mysql_field_count(mysql) == 0)
    {
      printf("%lld rows affected\n",
            mysql_affected_rows(mysql));
    }
    else  /* some error occurred */
    {
      printf("Could not retrieve result set\n");
      break;
    }
  }
  /* more results? -1 = no, &gt;0 = error, 0 = yes (keep looping) */
  if ((status = mysql_next_result(mysql)) &gt; 0)
    printf("Could not execute statement\n");
} while (status == 0);

mysql_close(mysql);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-date-handling"></a>29.2.10. C API Handling of Date and Time Values</h3></div></div></div><p>
      The binary (prepared statement) protocol allows you to send and
      receive date and time values (<code class="literal">DATE</code>,
      <code class="literal">TIME</code>, <code class="literal">DATETIME</code>, and
      <code class="literal">TIMESTAMP</code>), using the
      <code class="literal">MYSQL_TIME</code> structure. The members of this
      structure are described in
      <a href="apis.html#c-api-prepared-statement-datatypes" title="29.2.5. C API Prepared Statement Data types">Section 29.2.5, “C API Prepared Statement Data types”</a>.
    </p><p>
      To send temporal data values, create a prepared statement using
      <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a>. Then,
      before calling
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> to execute
      the statement, use the following procedure to set up each temporal
      parameter:
    </p><div class="orderedlist"><ol type="1"><li><p>
          In the <code class="literal">MYSQL_BIND</code> structure associated with
          the data value, set the <code class="literal">buffer_type</code> member
          to the type that indicates what kind of temporal value you're
          sending. For <code class="literal">DATE</code>, <code class="literal">TIME</code>,
          <code class="literal">DATETIME</code>, or <code class="literal">TIMESTAMP</code>
          values, set <code class="literal">buffer_type</code> to
          <code class="literal">MYSQL_TYPE_DATE</code>,
          <code class="literal">MYSQL_TYPE_TIME</code>,
          <code class="literal">MYSQL_TYPE_DATETIME</code>, or
          <code class="literal">MYSQL_TYPE_TIMESTAMP</code>, respectively.
        </p></li><li><p>
          Set the <code class="literal">buffer</code> member of the
          <code class="literal">MYSQL_BIND</code> structure to the address of the
          <code class="literal">MYSQL_TIME</code> structure in which you pass the
          temporal value.
        </p></li><li><p>
          Fill in the members of the <code class="literal">MYSQL_TIME</code>
          structure that are appropriate for the type of temporal value
          to be passed.
        </p></li></ol></div><p>
      Use <a href="apis.html#mysql-stmt-bind-param" title="29.2.7.4. mysql_stmt_bind_param()"><code class="literal">mysql_stmt_bind_param()</code></a> to
      bind the parameter data to the statement. Then you can call
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>.
    </p><p>
      To retrieve temporal values, the procedure is similar, except that
      you set the <code class="literal">buffer_type</code> member to the type of
      value you expect to receive, and the <code class="literal">buffer</code>
      member to the address of a <code class="literal">MYSQL_TIME</code> structure
      into which the returned value should be placed. Use
      <a href="apis.html#mysql-stmt-bind-result" title="29.2.7.5. mysql_stmt_bind_result()"><code class="literal">mysql_stmt_bind_result()</code></a> to bind
      the buffers to the statement after calling
      <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> and before
      fetching the results.
    </p><p>
      Here is a simple example that inserts <code class="literal">DATE</code>,
      <code class="literal">TIME</code>, and <code class="literal">TIMESTAMP</code> data.
      The <code class="literal">mysql</code> variable is assumed to be a valid
      connection handle.
    </p><pre class="programlisting">
  MYSQL_TIME  ts;
  MYSQL_BIND  bind[3];
  MYSQL_STMT  *stmt;

  strmov(query, "INSERT INTO test_table(date_field, time_field, \
                               timestamp_field) VALUES(?,?,?");

  stmt = mysql_stmt_init(mysql);
  if (!stmt)
  {
    fprintf(stderr, " mysql_stmt_init(), out of memory\n");
    exit(0);
  }
  if (mysql_stmt_prepare(mysql, query, strlen(query)))
  {
    fprintf(stderr, "\n mysql_stmt_prepare(), INSERT failed");
    fprintf(stderr, "\n %s", mysql_stmt_error(stmt));
    exit(0);
  }

  /* set up input buffers for all 3 parameters */
  bind[0].buffer_type= MYSQL_TYPE_DATE;
  bind[0].buffer= (char *)&amp;ts;
  bind[0].is_null= 0;
  bind[0].length= 0;
  ...
  bind[1]= bind[2]= bind[0];
  ...

  mysql_stmt_bind_param(stmt, bind);

  /* supply the data to be sent in the ts structure */
  ts.year= 2002;
  ts.month= 02;
  ts.day= 03;

  ts.hour= 10;
  ts.minute= 45;
  ts.second= 20;

  mysql_stmt_execute(stmt);
  ..

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-thread-functions"></a>29.2.11. C API Threaded Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#my-init">29.2.11.1. <code class="literal">my_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-thread-end">29.2.11.2. <code class="literal">mysql_thread_end()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-thread-init">29.2.11.3. <code class="literal">mysql_thread_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-thread-safe">29.2.11.4. <code class="literal">mysql_thread_safe()</code></a></span></dt></dl></div><p>
      You need to use the following functions when you want to create a
      threaded client. See <a href="apis.html#threaded-clients" title="29.2.16. How to Make a Threaded Client">Section 29.2.16, “How to Make a Threaded Client”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="my-init"></a>29.2.11.1. <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a></h4></div></div></div><a class="indexterm" name="id2492443"></a><p>
        <code class="literal">void my_init(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a> initializes some
        global variables that MySQL needs. If you are using a
        thread-safe client library, it also calls
        <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> for this
        thread.
      </p><p>
        It is necessary for <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a>
        to be called early in the initialization phase of a program's
        use of the MySQL library. However,
        <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a> is automatically
        called by <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>,
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
        <a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a>, and
        <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you ensure
        that your program invokes one of those functions before any
        other MySQL calls, there is no need to invoke
        <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a> explicitly.
      </p><p>
        To access <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a>, your
        program must include the <code class="filename">my_sys.h</code> header
        file:
      </p><pre class="programlisting">#include &lt;my_sys.h&gt;
</pre><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-end"></a>29.2.11.2. <a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a></h4></div></div></div><a class="indexterm" name="id2492592"></a><p>
        <code class="literal">void mysql_thread_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function needs to be called before calling
        <code class="literal">pthread_exit()</code> to free memory allocated by
        <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a>.
      </p><p>
        <a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> <span class="emphasis"><em>is
        not invoked automatically by the client library</em></span>. It
        must be called explicitly to avoid a memory leak.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-init"></a>29.2.11.3. <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a></h4></div></div></div><a class="indexterm" name="id2492676"></a><p>
        <code class="literal">my_bool mysql_thread_init(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function must be called early within each created thread to
        initialize thread-specific variables. However, you may not
        necessarily need to invoke it explicitly:
        <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> is
        automatically called by
        <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a>, which itself is
        automatically called by
        <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>,
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
        <a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a>, and
        <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you invoke
        any of those functions,
        <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> will be
        called for you.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-thread-safe"></a>29.2.11.4. <a href="apis.html#mysql-thread-safe" title="29.2.11.4. mysql_thread_safe()"><code class="literal">mysql_thread_safe()</code></a></h4></div></div></div><a class="indexterm" name="id2492785"></a><p>
        <code class="literal">unsigned int mysql_thread_safe(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function indicates whether the client library is compiled
        as thread-safe.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        1 if the client library is thread-safe, 0 otherwise.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-embedded-server-func"></a>29.2.12. C API Embedded Server Function Descriptions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#mysql-server-init">29.2.12.1. <code class="literal">mysql_server_init()</code></a></span></dt><dt><span class="section"><a href="apis.html#mysql-server-end">29.2.12.2. <code class="literal">mysql_server_end()</code></a></span></dt></dl></div><p>
      MySQL applications can be written to use an embedded server. See
      <a href="apis.html#libmysqld" title="29.1. libmysqld, the Embedded MySQL Server Library">Section 29.1, “libmysqld, the Embedded MySQL Server Library”</a>. To write such an application, you
      must link it against the <code class="literal">libmysqld</code> library by
      using the <code class="option">-lmysqld</code> flag rather than linking it
      against the <code class="literal">libmysqlclient</code> client library by
      using the <code class="option">-lmysqlclient</code> flag. However, the calls
      to initialize and finalize the library are the same whether you
      write a client application or one that uses the embedded server:
      Call <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> to
      initialize the library and
      <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> when you are
      done with it. See <a href="apis.html#c-api-function-overview" title="29.2.2. C API Function Overview">Section 29.2.2, “C API Function Overview”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-server-init"></a>29.2.12.1. <a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a></h4></div></div></div><a class="indexterm" name="id2492901"></a><p>
        <code class="literal">int mysql_server_init(int argc, char **argv, char
        **groups)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function initializes the MySQL library, which must be done
        before you call any other MySQL function. However,
        <a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a> is
        deprecated and you should call
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> instead.
        See <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()">Section 29.2.3.40, “<code class="literal">mysql_library_init()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Zero if successful. Non-zero if an error occurred.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-server-end"></a>29.2.12.2. <a href="apis.html#mysql-server-end" title="29.2.12.2. mysql_server_end()"><code class="literal">mysql_server_end()</code></a></h4></div></div></div><a class="indexterm" name="id2492978"></a><p>
        <code class="literal">void mysql_server_end(void)</code>
      </p><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function finalizes the MySQL library, which should be done
        when you are done using the library. However,
        <a href="apis.html#mysql-server-end" title="29.2.12.2. mysql_server_end()"><code class="literal">mysql_server_end()</code></a> is
        deprecated and
        <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a> should be
        used instead. See <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()">Section 29.2.3.39, “<code class="literal">mysql_library_end()</code>”</a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        None.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="auto-reconnect"></a>29.2.13. Controlling Automatic Reconnect Behavior</h3></div></div></div><p>
      The MySQL client library can perform an automatic reconnect to the
      server if it finds that the connection is down when you attempt to
      send a statement to the server to be executed. In this case, the
      library tries once to reconnect to the server and send the
      statement again.
    </p><p>
      If it is important for your application to know that the
      connection has been dropped (so that is can exit or take action to
      adjust for the loss of state information), be sure to disable
      auto-reconnect. This can be done explicitly by calling
      <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> with the
      <code class="literal">MYSQL_OPT_RECONNECT</code> option:
    </p><pre class="programlisting">my_bool reconnect = 0;
mysql_options(&amp;mysql, MYSQL_OPT_RECONNECT, &amp;reconnect);
</pre><p>
      In MySQL 5.1, auto-reconnect is disabled by default.
    </p><p>
      Some client programs might provide the capability of controlling
      automatic reconnection. For example, <span><strong class="command">mysql</strong></span>
      reconnects by default, but the <code class="option">--skip-reconnect</code>
      option can be used to suppress this behavior.
    </p><p>
      Automatic reconnection can be convenient because you need not
      implement your own reconnect code, but if a reconnection does
      occur, several aspects of the connection state are reset and your
      application will not know about it. The connection-related state
      is affected as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Any active transactions are rolled back and autocommit mode is
          reset.
        </p></li><li><p>
          All table locks are released.
        </p></li><li><p>
          All <code class="literal">TEMPORARY</code> tables are closed (and
          dropped).
        </p></li><li><p>
          Session variables are reinitialized to the values of the
          corresponding variables. This also affects variables that are
          set implicitly by statements such as <code class="literal">SET
          NAMES</code>.
        </p></li><li><p>
          User variable settings are lost.
        </p></li><li><p>
          Prepared statements are released.
        </p></li><li><p>
          <code class="literal">HANDLER</code> variables are closed.
        </p></li><li><p>
          The value of <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
          is reset to 0.
        </p></li><li><p>
          Locks acquired with <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
          are released.
        </p></li><li><p>
          <a href="apis.html#mysql-ping" title="29.2.3.50. mysql_ping()"><code class="literal">mysql_ping()</code></a> does not attempt
          a reconnection if the connection is down. It returns an error
          instead.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="c-api-problems"></a>29.2.14. Common Questions and Problems When Using the C API</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#null-mysql-store-result">29.2.14.1. Why <code class="literal">mysql_store_result()</code> Sometimes
        Returns <code class="literal">NULL</code> After
        <code class="literal">mysql_query()</code> Returns Success</a></span></dt><dt><span class="section"><a href="apis.html#query-results">29.2.14.2. What Results You Can Get from a Query</a></span></dt><dt><span class="section"><a href="apis.html#getting-unique-id">29.2.14.3. How to Get the Unique ID for the Last Inserted Row</a></span></dt><dt><span class="section"><a href="apis.html#c-api-linking-problems">29.2.14.4. Problems Linking with the C API</a></span></dt></dl></div><a class="indexterm" name="id2493229"></a><a class="indexterm" name="id2493238"></a><p class="mnmas-kb"><b>MySQL Enterprise</b>
        Subscribers to MySQL Enterprise will find articles about the C
        API in the MySQL Knowledge Base. Access to the Knowledge Base
        collection of articles is one of the advantages of subscribing
        to MySQL Enterprise. For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="null-mysql-store-result"></a>29.2.14.1. Why <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> Sometimes
        Returns <code class="literal">NULL</code> After
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> Returns Success</h4></div></div></div><p>
        It is possible for
        <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> to return
        <code class="literal">NULL</code> following a successful call to
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a>. When this
        happens, it means one of the following conditions occurred:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            There was a <code class="literal">malloc()</code> failure (for
            example, if the result set was too large).
          </p></li><li><p>
            The data couldn't be read (an error occurred on the
            connection).
          </p></li><li><p>
            The query returned no data (for example, it was an
            <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or
            <code class="literal">DELETE</code>).
          </p></li></ul></div><p>
        You can always check whether the statement should have produced
        a non-empty result by calling
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a>. If
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns
        zero, the result is empty and the last query was a statement
        that does not return values (for example, an
        <code class="literal">INSERT</code> or a <code class="literal">DELETE</code>). If
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> returns a
        non-zero value, the statement should have produced a non-empty
        result. See the description of the
        <a href="apis.html#mysql-field-count" title="29.2.3.22. mysql_field_count()"><code class="literal">mysql_field_count()</code></a> function
        for an example.
      </p><p>
        You can test for an error by calling
        <a href="apis.html#mysql-error" title="29.2.3.15. mysql_error()"><code class="literal">mysql_error()</code></a> or
        <a href="apis.html#mysql-errno" title="29.2.3.14. mysql_errno()"><code class="literal">mysql_errno()</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="query-results"></a>29.2.14.2. What Results You Can Get from a Query</h4></div></div></div><p>
        In addition to the result set returned by a query, you can also
        get the following information:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a>
            returns the number of rows affected by the last query when
            doing an <code class="literal">INSERT</code>,
            <code class="literal">UPDATE</code>, or <code class="literal">DELETE</code>.
          </p><p>
            For a fast re-create, use <code class="literal">TRUNCATE TABLE</code>.
          </p></li><li><p>
            <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> returns
            the number of rows in a result set. With
            <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>,
            <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be
            called as soon as
            <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>
            returns. With
            <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>,
            <a href="apis.html#mysql-num-rows" title="29.2.3.48. mysql_num_rows()"><code class="literal">mysql_num_rows()</code></a> may be
            called only after you have fetched all the rows with
            <a href="apis.html#mysql-fetch-row" title="29.2.3.21. mysql_fetch_row()"><code class="literal">mysql_fetch_row()</code></a>.
          </p></li><li><p>
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> returns
            the ID generated by the last query that inserted a row into
            a table with an <code class="literal">AUTO_INCREMENT</code> index. See
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()">Section 29.2.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
          </p></li><li><p>
            Some queries (<code class="literal">LOAD DATA INFILE ...</code>,
            <code class="literal">INSERT INTO ... SELECT ...</code>,
            <code class="literal">UPDATE</code>) return additional information.
            The result is returned by
            <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>. See the
            description for
            <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> for the format
            of the string that it returns.
            <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> returns a
            <code class="literal">NULL</code> pointer if there is no additional
            information.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="getting-unique-id"></a>29.2.14.3. How to Get the Unique ID for the Last Inserted Row</h4></div></div></div><a class="indexterm" name="id2493636"></a><a class="indexterm" name="id2493645"></a><a class="indexterm" name="id2493657"></a><a class="indexterm" name="id2493670"></a><p>
        If you insert a record into a table that contains an
        <code class="literal">AUTO_INCREMENT</code> column, you can obtain the
        value stored into that column by calling the
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> function.
      </p><p>
        You can check from your C applications whether a value was
        stored in an <code class="literal">AUTO_INCREMENT</code> column by
        executing the following code (which assumes that you've checked
        that the statement succeeded). It determines whether the query
        was an <code class="literal">INSERT</code> with an
        <code class="literal">AUTO_INCREMENT</code> index:
      </p><pre class="programlisting">if ((result = mysql_store_result(&amp;mysql)) == 0 &amp;&amp;
    mysql_field_count(&amp;mysql) == 0 &amp;&amp;
    mysql_insert_id(&amp;mysql) != 0)
{
    used_id = mysql_insert_id(&amp;mysql);
}
</pre><p>
        When a new <code class="literal">AUTO_INCREMENT</code> value has been
        generated, you can also obtain it by executing a <code class="literal">SELECT
        LAST_INSERT_ID()</code> statement with
        <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and retrieving
        the value from the result set returned by the statement.
      </p><p>
        When inserting multiple values, the last automatically
        incremented value is returned.
      </p><p>
        For <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, the most
        recently generated ID is maintained in the server on a
        per-connection basis. It is not changed by another client. It is
        not even changed if you update another
        <code class="literal">AUTO_INCREMENT</code> column with a non-magic value
        (that is, a value that is not <code class="literal">NULL</code> and not
        <code class="literal">0</code>). Using
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
        <code class="literal">AUTO_INCREMENT</code> columns simultaneously from
        multiple clients is perfectly valid. Each client will receive
        the last inserted ID for the last statement
        <span class="emphasis"><em>that</em></span> client executed.
      </p><p>
        If you want to use the ID that was generated for one table and
        insert it into a second table, you can use SQL statements like
        this:
      </p><pre class="programlisting">INSERT INTO foo (auto,text)
    VALUES(NULL,'text');         # generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table
</pre><p>
        Note that <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>
        returns the value stored into an
        <code class="literal">AUTO_INCREMENT</code> column, whether that value is
        automatically generated by storing <code class="literal">NULL</code> or
        <code class="literal">0</code> or was specified as an explicit value.
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> returns only
        automatically generated <code class="literal">AUTO_INCREMENT</code>
        values. If you store an explicit value other than
        <code class="literal">NULL</code> or <code class="literal">0</code>, it does not
        affect the value returned by
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>.
      </p><p>
        For more information on obtaining the last ID in an
        <code class="literal">AUTO_INCREMENT</code> column:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For information on
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, which can
            be used within an SQL statement, see
            <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
          </p></li><li><p>
            For information on
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>, the
            function you use from within the C API, see
            <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()">Section 29.2.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
          </p></li><li><p>
            For information on obtaining the auto-incremented value when
            using Connector/J, see
            <a href="connectors.html#connector-j-usagenotes" title="30.4.5. Connector/J Notes and Tips">Section 30.4.5, “Connector/J Notes and Tips”</a>.
          </p></li><li><p>
            For information on obtaining the auto-incremented value when
            using Connector/ODBC, see
            <a href="connectors.html#myodbc-usagenotes-functionality-last-insert-id" title="30.1.7.1.1. Obtaining Auto-Increment Values">Section 30.1.7.1.1, “Obtaining Auto-Increment Values”</a>.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="c-api-linking-problems"></a>29.2.14.4. Problems Linking with the C API</h4></div></div></div><a class="indexterm" name="id2493966"></a><a class="indexterm" name="id2493978"></a><p>
        When linking with the C API, the following errors may occur on
        some systems:
      </p><pre class="programlisting">gcc -g -o client test.o -L/usr/local/lib/mysql \
                        -lmysqlclient -lsocket -lnsl

Undefined        first referenced
 symbol          in file
floor            /usr/local/lib/mysql/libmysqlclient.a(password.o)
ld: fatal: Symbol referencing errors. No output written to client
</pre><p>
        If this happens on your system, you must include the math
        library by adding <code class="option">-lm</code> to the end of the
        compile/link line.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="building-clients"></a>29.2.15. Building Client Programs</h3></div></div></div><a class="indexterm" name="id2494021"></a><a class="indexterm" name="id2494034"></a><a class="indexterm" name="id2494043"></a><a class="indexterm" name="id2494055"></a><p>
      If you compile MySQL clients that you've written yourself or that
      you obtain from a third-party, they must be linked using the
      <code class="option">-lmysqlclient -lz</code> options in the link command.
      You may also need to specify a <code class="option">-L</code> option to tell
      the linker where to find the library. For example, if the library
      is installed in <code class="filename">/usr/local/mysql/lib</code>, use
      <code class="option">-L/usr/local/mysql/lib -lmysqlclient -lz</code> in the
      link command.
    </p><p>
      For clients that use MySQL header files, you may need to specify
      an <code class="option">-I</code> option when you compile them (for example,
      <code class="option">-I/usr/local/mysql/include</code>), so that the compiler
      can find the header files.
    </p><p>
      To make it simpler to compile MySQL programs on Unix, we have
      provided the <span><strong class="command">mysql_config</strong></span> script for you. See
      <a href="programs.html#mysql-config" title="4.7.2. mysql_config — Get Compile Options for Compiling Clients">Section 4.7.2, “<span><strong class="command">mysql_config</strong></span> — Get Compile Options for Compiling Clients”</a>.
    </p><p>
      You can use it to compile a MySQL client as follows:
    </p><pre class="programlisting">CFG=/usr/local/mysql/bin/mysql_config
sh -c "gcc -o progname `$CFG --cflags` progname.c `$CFG --libs`"
</pre><p>
      The <code class="literal">sh -c</code> is needed to get the shell not to
      treat the output from <span><strong class="command">mysql_config</strong></span> as one word.
    </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
        Subscribers to MySQL Enterprise will find an example client
        program in the Knowledge Base article,
        <a href="https://kb.mysql.com/view.php?id=5264" target="_top"> Sample C
        program using the embedded MySQL server library </a>. Access
        to the MySQL Knowledge Base collection of articles is one of the
        advantages of subscribing to MySQL Enterprise. For more
        information see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="threaded-clients"></a>29.2.16. How to Make a Threaded Client</h3></div></div></div><a class="indexterm" name="id2494179"></a><a class="indexterm" name="id2494191"></a><p>
      The client library is almost thread-safe. The biggest problem is
      that the subroutines in <code class="filename">net.c</code> that read from
      sockets are not interrupt safe. This was done with the thought
      that you might want to have your own alarm that can break a long
      read to a server. If you install interrupt handlers for the
      <code class="literal">SIGPIPE</code> interrupt, the socket handling should
      be thread-safe.
    </p><p>
      To avoid aborting the program when a connection terminates, MySQL
      blocks <code class="literal">SIGPIPE</code> on the first call to
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>,
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, or
      <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>. If you want to
      use your own <code class="literal">SIGPIPE</code> handler, you should first
      call <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> and
      then install your handler.
    </p><p>
      Before MySQL 4.0, binary client libraries that we provided other
      than those for Windows were not normally compiled with the
      thread-safe option. Current binary distributions should have both
      a normal and a thread-safe client library.
    </p><p>
      To create a threaded client where you can interrupt the client
      from other threads and set timeouts when talking with the MySQL
      server, you should use the <code class="literal">net_serv.o</code> code that
      the server uses and the <code class="option">-lmysys</code>,
      <code class="option">-lmystrings</code>, and <code class="option">-ldbug</code>
      libraries.
    </p><p>
      If you don't need interrupts or timeouts, you can just compile a
      thread-safe client library <code class="literal">(mysqlclient_r)</code> and
      use it. In this case, you don't have to worry about the
      <code class="literal">net_serv.o</code> object file or the other MySQL
      libraries.
    </p><p>
      When using a threaded client and you want to use timeouts and
      interrupts, you can make great use of the routines in the
      <code class="filename">thr_alarm.c</code> file. If you are using routines
      from the <code class="literal">mysys</code> library, the only thing you must
      remember is to call <a href="apis.html#my-init" title="29.2.11.1. my_init()"><code class="literal">my_init()</code></a>
      first! See <a href="apis.html#c-thread-functions" title="29.2.11. C API Threaded Function Descriptions">Section 29.2.11, “C API Threaded Function Descriptions”</a>.
    </p><p>
      In all cases, be sure to initialize the client library by calling
      <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> before
      calling any other MySQL functions. When you are done with the
      library, call
      <a href="apis.html#mysql-library-end" title="29.2.3.39. mysql_library_end()"><code class="literal">mysql_library_end()</code></a>.
    </p><p>
      <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> is not
      thread-safe by default. The following notes describe how to
      compile a thread-safe client library and use it in a thread-safe
      manner. (The notes below for
      <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> also apply
      to the older <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>
      routine as well, although
      <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a> is deprecated and
      should no longer be used.)
    </p><p>
      To make <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
      thread-safe, you must configure your MySQL distribution with this
      command:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --enable-thread-safe-client</code></strong>
</pre><p>
      Then recompile the distribution to create a thread-safe client
      library, <code class="literal">libmysqlclient_r</code>. (Assuming that your
      operating system has a thread-safe
      <code class="literal">gethostbyname_r()</code> function.) This library is
      thread-safe per connection. You can let two threads share the same
      connection with the following caveats:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Two threads can't send a query to the MySQL server at the same
          time on the same connection. In particular, you have to ensure
          that between calls to
          <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
          <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> no other
          thread is using the same connection.
        </p></li><li><p>
          Many threads can access different result sets that are
          retrieved with
          <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
        </p></li><li><p>
          If you use
          <a href="apis.html#mysql-use-result" title="29.2.3.71. mysql_use_result()"><code class="literal">mysql_use_result()</code></a>, you must
          ensure that no other thread is using the same connection until
          the result set is closed. However, it really is best for
          threaded clients that share the same connection to use
          <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a>.
        </p></li><li><p>
          If you want to use multiple threads on the same connection,
          you must have a mutex lock around your pair of
          <a href="apis.html#mysql-query" title="29.2.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> and
          <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> calls.
          Once <a href="apis.html#mysql-store-result" title="29.2.3.69. mysql_store_result()"><code class="literal">mysql_store_result()</code></a> is
          ready, the lock can be released and other threads may query
          the same connection.
        </p></li><li><p>
          If you use POSIX threads, you can use
          <code class="literal">pthread_mutex_lock()</code> and
          <code class="literal">pthread_mutex_unlock()</code> to establish and
          release a mutex lock.
        </p></li></ul></div><p>
      You need to know the following if you have a thread that is
      calling MySQL functions which did not create the connection to the
      MySQL database:
    </p><p>
      When you call <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, MySQL
      creates a thread-specific variable for the thread that is used by
      the debug library (among other things). If you call a MySQL
      function before the thread has called
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, the thread does not
      have the necessary thread-specific variables in place and you are
      likely to end up with a core dump sooner or later. To get things
      to work smoothly you must do the following:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Call <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a>
          before any other MySQL functions. It is not thread-safe, so
          call it before threads are created, or protect the call with a
          mutex.
        </p></li><li><p>
          Arrange for
          <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> to be
          called early in the thread handler before calling any MySQL
          function. If you call
          <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>, they will call
          <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a> for you.
        </p></li><li><p>
          In the thread, call
          <a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a> before
          calling <code class="literal">pthread_exit()</code>. This frees the
          memory used by MySQL thread-specific variables.
        </p></li></ol></div><p>
      The preceding notes regarding
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a> also apply to
      <a href="apis.html#mysql-connect" title="29.2.3.7. mysql_connect()"><code class="literal">mysql_connect()</code></a>, which calls
      <a href="apis.html#mysql-init" title="29.2.3.36. mysql_init()"><code class="literal">mysql_init()</code></a>.
    </p><p>
      If “<span class="quote">undefined symbol</span>” errors occur when linking your
      client with <code class="literal">libmysqlclient_r</code>, in most cases
      this is because you haven't included the thread libraries on the
      link/compile command.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="php"></a>29.3. MySQL PHP API</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysql">29.3.1. MySQL</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli">29.3.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-ref.pdo-mysql">29.3.3. MySQL Functions (PDO_MYSQL)</a></span></dt><dt><span class="section"><a href="apis.html#php-problems">29.3.4. Common Problems with MySQL and PHP</a></span></dt><dt><span class="section"><a href="apis.html#php-mysql-mysqli">29.3.5. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</a></span></dt></dl></div><a class="indexterm" name="id2494695"></a><p>
    PHP is a server-side, HTML-embedded scripting language that may be
    used to create dynamic Web pages. It is available for most operating
    systems and Web servers, and can access most common databases,
    including MySQL. PHP may be run as a separate program or compiled as
    a module for use with the Apache Web server.
  </p><p>
    PHP actually provides two different MySQL API extensions:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">mysql</code>: Available for PHP versions 4 and 5,
        this extension is intended for use with MySQL versions prior to
        MySQL 4.1. This extension does not support the improved
        authentication protocol used in MySQL 4.1, nor does it support
        prepared statements or multiple statements. If you wish to use
        this extension with MySQL 4.1, you will likely want to configure
        the MySQL server to use the <span><strong class="command">--old-passwords</strong></span>
        option (see <a href="error-handling.html#old-client" title="B.1.2.4. Client does not support authentication protocol">Section B.1.2.4, “<code class="literal">Client does not support authentication protocol</code>”</a>). This extension is
        documented on the PHP Web site at
        <a href="http://php.net/mysql" target="_top">http://php.net/mysql</a>.
      </p></li><li><p>
        <a href="apis.html#apis-php-mysqli" title="29.3.2. MySQL Improved Extension (Mysqli)">Section 29.3.2, “MySQL Improved Extension (<code class="literal">Mysqli</code>)”</a> - Stands for “<span class="quote">MySQL,
        Improved</span>”; this extension is available only in PHP 5. It
        is intended for use with MySQL 4.1.1 and later. This extension
        fully supports the authentication protocol used in MySQL 5.0, as
        well as the Prepared Statements and Multiple Statements APIs. In
        addition, this extension provides an advanced, object-oriented
        programming interface. You can read the documentation for the
        <code class="literal">mysqli</code> extension at
        <a href="http://php.net/mysqli" target="_top">http://php.net/mysqli</a>. Helpful article can be
        found at <a href="http://devzone.zend.com/node/view/id/686" target="_top">http://devzone.zend.com/node/view/id/686</a>
        and <a href="http://devzone.zend.com/node/view/id/687" target="_top">http://devzone.zend.com/node/view/id/687</a>.
      </p></li></ul></div><p>
    If you're experiencing problems with enabling both the
    <code class="literal">mysql</code> and the <code class="literal">mysqli</code> extension
    when building PHP on Linux yourself, see
    <a href="apis.html#php-mysql-mysqli" title="29.3.5. Enabling Both mysql and mysqli in
      PHP">Section 29.3.5, “Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP”</a>.
  </p><p>
    The PHP distribution and documentation are available from the
    <a href="http://www.php.net/" target="_top">PHP Web site</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      MySQL and PHP in the Knowledge Base articles found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=23" target="_top">
      PHP</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information see
      <a href="http://www.mysql.com/products/enterprise/knowledgebase.html" target="_top">http://www.mysql.com/products/enterprise/knowledgebase.html</a>.
    </p><p><a name="php-api-copyright"></a>
    <span class="emphasis"><em>Portions of this section are Copyright (c) 1997-2008 the
    PHP Documentation Group</em></span> This material may be distributed
    only subject to the terms and conditions set forth in the Creative
    Commons Attribution 3.0 License or later. A copy of the Creative
    Commons Attribution 3.0 license is distributed with this manual. The
    latest version is presently available at This material may be
    distributed only subject to the terms and conditio\ ns set forth in
    the Open Publication License, v1.0.8 or later (the latest version is
    presently available at
    <a href="http://www.opencontent.org/openpub/" target="_top">http://www.opencontent.org/openpub/</a>).
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-mysql"></a>29.3.1. MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysql.setup">29.3.1.1. Installing/Configuring</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.constants">29.3.1.2. Predefined Constants</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.examples">29.3.1.3. Examples</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-ref.mysql">29.3.1.4. MySQL Functions</a></span></dt></dl></div><p>
    <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    These functions allow you to access MySQL database servers. More
    information about MySQL can be found at
    <a href="http://www.mysql.com/" target="_top">http://www.mysql.com/</a>.
  </p><p>
    Documentation for MySQL can be found at
    <a href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.setup"></a>29.3.1.1. Installing/Configuring</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysql.requirements">29.3.1.1.1. Requirements</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.installation">29.3.1.1.2. Installation</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.configuration">29.3.1.1.3. Runtime Configuration</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.resources">29.3.1.1.4. Resource Types</a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.requirements"></a>29.3.1.1.1. Requirements</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
        In order to have these functions available, you must compile PHP
        with MySQL support.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.installation"></a>29.3.1.1.2. Installation</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysql.installation.linux">29.3.1.1.2.1. Installation on Linux Systems</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.installation.windows">29.3.1.1.2.2. Installation on Windows Systems</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysql.installation.notes">29.3.1.1.2.3. MySQL Installation Notes</a></span></dt></dl></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p><a name="apis-php-mysql.configure"></a>
        For compiling, simply use the
        <code class="option">--with-mysql[=DIR]</code> configuration option where
        the optional <code class="literal">[DIR]</code> points to the MySQL
        installation directory.
      </p><p>
        Although this MySQL extension is compatible with MySQL 4.1.0 and
        greater, it doesn't support the extra functionality that
        these versions provide. For that, use the
        <a href="apis.html#apis-php-mysqli" title="29.3.2. MySQL Improved Extension (Mysqli)">MySQLi</a> extension.
      </p><p>
        If you would like to install the mysql extension along with the
        mysqli extension you have to use the same client library to
        avoid any conflicts.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.linux"></a>29.3.1.1.2.1. Installation on Linux Systems</h6></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#id2495012">29.3.1.1.2.1.1. PHP 4</a></span></dt><dt><span class="section"><a href="apis.html#id2495051">29.3.1.1.2.1.2. PHP 5+</a></span></dt></dl></div><p>
          <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
          PHP Documentation Group.</a>
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id2495012"></a>29.3.1.1.2.1.1. PHP 4</h6></div></div></div><p>
            <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008
            the PHP Documentation Group.</a>
          </p><p>
            The option <code class="option">--with-mysql</code> is enabled by
            default. This default behavior may be disabled with the
            <code class="option">--without-mysql</code> configure option. If MySQL
            is enabled without specifying the path to the MySQL install
            DIR, PHP will use the bundled MySQL client libraries.
          </p><p>
            Users who run other applications that use MySQL (for
            example, auth-mysql) should not use the bundled library, but
            rather specify the path to MySQL's install directory,
            like so: <code class="option">--with-mysql=/path/to/mysql</code>. This
            will force PHP to use the client libraries installed by
            MySQL, thus avoiding any conflicts.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id2495051"></a>29.3.1.1.2.1.2. PHP 5+</h6></div></div></div><p>
            <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008
            the PHP Documentation Group.</a>
          </p><p>
            MySQL is not enabled by default, nor is the MySQL library
            bundled with PHP. Read this
            <a href="http://www.php.net/manual/en/faq.databases.mysql.php5.php" target="_top">
            FAQ</a> for details on why. Use the
            <code class="option">--with-mysql[=DIR]</code> configure option to
            include MySQL support. You can download <span class="emphasis"><em>headers
            and libraries</em></span> from
            <a href="http://www.mysql.com/" target="_top">MySQL</a>.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.windows"></a>29.3.1.1.2.2. Installation on Windows Systems</h6></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#id2495111">29.3.1.1.2.2.1. PHP 4</a></span></dt><dt><span class="section"><a href="apis.html#id2495131">29.3.1.1.2.2.2. PHP 5+</a></span></dt></dl></div><p>
          <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
          PHP Documentation Group.</a>
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id2495111"></a>29.3.1.1.2.2.1. PHP 4</h6></div></div></div><p>
            <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008
            the PHP Documentation Group.</a>
          </p><p>
            The PHP MySQL extension is compiled into PHP.
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="id2495131"></a>29.3.1.1.2.2.2. PHP 5+</h6></div></div></div><p>
            <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008
            the PHP Documentation Group.</a>
          </p><p>
            MySQL is no longer enabled by default, so the
            <code class="filename">php_mysql.dll</code> DLL must be enabled
            inside of <code class="filename">php.ini</code>. Also, PHP needs
            access to the MySQL client library. A file named
            <code class="filename">libmysql.dll</code> is included in the Windows
            PHP distribution and in order for PHP to talk to MySQL this
            file needs to be available to the Windows systems
            <code class="envar">PATH</code>. See the FAQ titled
            "<a href="http://www.php.net/manual/en/faq.installation.addtopath.php" target="_top">How
            do I add my PHP directory to the PATH on
            Windows</a>" for information on how to do this.
            Although copying <code class="filename">libmysql.dll</code> to the
            Windows system directory also works (because the system
            directory is by default in the system's
            <code class="envar">PATH</code>), it's not recommended.
          </p><p>
            As with enabling any PHP extension (such as
            <code class="filename">php_mysql.dll</code>), the PHP directive
            <a href="http://www.php.net/manual/en/ini.extension-dir.php" target="_top">extension_dir</a>
            should be set to the directory where the PHP extensions are
            located. See also the
            <a href="http://www.php.net/manual/en/install.windows.manual.php" target="_top">Manual
            Windows Installation Instructions</a>. An example
            extension_dir value for PHP 5 is
            <code class="literal">c:\php\ext</code>
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              If when starting the web server an error similar to the
              following occurs: <code class="literal">"Unable to load dynamic
              library './php_mysql.dll'"</code>, this
              is because <code class="filename">php_mysql.dll</code> and/or
              <code class="filename">libmysql.dll</code> cannot be found by the
              system.
            </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysql.installation.notes"></a>29.3.1.1.2.3. MySQL Installation Notes</h6></div></div></div><p>
          <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
          PHP Documentation Group.</a>
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            Crashes and startup problems of PHP may be encountered when
            loading this extension in conjunction with the recode
            extension. See the
            <a href="http://www.php.net/manual/en/ref.recode.php" target="_top">recode</a>
            extension for more information.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If you need charsets other than <span class="emphasis"><em>latin</em></span>
            (default), you have to install external (not bundled)
            libmysql with compiled charset support.
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.configuration"></a>29.3.1.1.3. Runtime Configuration</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
The behaviour of these functions is affected by settings in <code class="filename">php.ini</code>.
</p><p>
        </p><div class="table"><a name="id2495325"></a><p class="title"><b>Table 29.1. MySQL Configuration Options</b></p><table summary="MySQL Configuration Options" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name</th><th>Default</th><th>Changeable</th><th>Changelog</th></tr></thead><tbody><tr><td>mysql.allow_persistent</td><td>"1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.max_persistent</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.max_links</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td> </td></tr><tr><td>mysql.trace_mode</td><td>"0"</td><td>PHP_INI_ALL</td><td>Available since PHP 4.3.0.</td></tr><tr><td>mysql.default_port</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_socket</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 4.0.1.</td></tr><tr><td>mysql.default_host</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_user</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.default_password</td><td>NULL</td><td>PHP_INI_ALL</td><td> </td></tr><tr><td>mysql.connect_timeout</td><td>"60"</td><td>PHP_INI_ALL</td><td>PHP_INI_SYSTEM in PHP &lt;= 4.3.2. Available since PHP 4.3.0.</td></tr></tbody></table></div><p>

        For further details and definitions of the PHP_INI_* constants,
        see the
        <a href="http://www.php.net/manual/en/ini.php" target="_top">http://www.php.net/manual/en/ini.php</a>.
      </p><p>
        Here's a short explanation of the configuration directives.
      </p><p>
        </p><div class="variablelist"><dl><dt><a name="apis-php-ini.mysql.allow-persistent"></a><span class="term">
              <em class="parameter"><code>mysql.allow_persistent</code></em>
              <span class="type">boolean</span>
            </span></dt><dd><p>
                Whether to allow
                <a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">persistent
                connections</a> to MySQL.
              </p></dd><dt><a name="apis-php-ini.mysql.max-persistent"></a><span class="term">
              <em class="parameter"><code>mysql.max_persistent</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of persistent MySQL connections per
                process.
              </p></dd><dt><a name="apis-php-ini.mysql.max-links"></a><span class="term">
              <em class="parameter"><code>mysql.max_links</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of MySQL connections per process,
                including persistent connections.
              </p></dd><dt><a name="apis-php-ini.mysql.trace-mode"></a><span class="term">
              <em class="parameter"><code>mysql.trace_mode</code></em>
              <span class="type">boolean</span>
            </span></dt><dd><p>
                Trace mode. When <code class="literal">mysql.trace_mode</code> is
                enabled, warnings for table/index scans, non free result
                sets, and SQL-Errors will be displayed. (Introduced in
                PHP 4.3.0)
              </p></dd><dt><a name="apis-php-ini.mysql.default-port"></a><span class="term">
              <em class="parameter"><code>mysql.default_port</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default TCP port number to use when connecting to
                the database server if no other port is specified. If no
                default is specified, the port will be obtained from the
                <code class="envar">MYSQL_TCP_PORT</code> environment variable, the
                <code class="literal">mysql-tcp</code> entry in
                <code class="filename">/etc/services</code> or the compile-time

                <code class="constant">MYSQL_PORT</code>

                constant, in that order. Win32 will only use the

                <code class="constant">MYSQL_PORT</code>

                constant.
              </p></dd><dt><a name="apis-php-ini.mysql.default-socket"></a><span class="term">
              <em class="parameter"><code>mysql.default_socket</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default socket name to use when connecting to a
                local database server if no other socket name is
                specified.
              </p></dd><dt><a name="apis-php-ini.mysql.default-host"></a><span class="term">
              <em class="parameter"><code>mysql.default_host</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default server host to use when connecting to the
                database server if no other host is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.default-user"></a><span class="term">
              <em class="parameter"><code>mysql.default_user</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default user name to use when connecting to the
                database server if no other name is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.default-password"></a><span class="term">
              <em class="parameter"><code>mysql.default_password</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default password to use when connecting to the
                database server if no other password is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysql.connect-timeout"></a><span class="term">
              <em class="parameter"><code>mysql.connect_timeout</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                Connect timeout in seconds. On Linux this timeout is
                also used for waiting for the first answer from the
                server.
              </p></dd></dl></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.resources"></a>29.3.1.1.4. Resource Types</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
        There are two resource types used in the MySQL module. The first
        one is the link identifier for a database connection, the second
        a resource which holds the result of a query.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.constants"></a>29.3.1.2. Predefined Constants</h4></div></div></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
The constants below are defined by this extension, and
will only be available when the extension has either
been compiled into PHP or dynamically loaded at runtime.
</p><p>
      Since PHP 4.3.0 it is possible to specify additional client flags
      for the
      <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
      and
      <a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>
      functions. The following constants are defined:

      </p><div class="table"><a name="apis-php-mysql.client-flags"></a><p class="title"><b>Table 29.2. MySQL client constants</b></p><table summary="MySQL client constants" border="1"><colgroup><col><col></colgroup><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td>MYSQL_CLIENT_COMPRESS</td><td>Use compression protocol</td></tr><tr><td>MYSQL_CLIENT_IGNORE_SPACE</td><td>Allow space after function names</td></tr><tr><td>MYSQL_CLIENT_INTERACTIVE</td><td>Allow interactive_timeout seconds (instead of wait_timeout) of
                inactivity before closing the connection.</td></tr><tr><td>MYSQL_CLIENT_SSL</td><td>Use SSL encryption. This flag is only available with version 4.x of the
                MySQL client library or newer. Version 3.23.x is bundled
                both with PHP 4 and Windows binaries of PHP 5.</td></tr></tbody></table></div><p>
    </p><p>
      The function
      <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
      uses a constant for the different types of result arrays. The
      following constants are defined:

      </p><div class="table"><a name="id2496032"></a><p class="title"><b>Table 29.3. MySQL fetch constants</b></p><table summary="MySQL fetch constants" border="1"><colgroup><col><col></colgroup><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td>MYSQL_ASSOC</td><td>Columns are returned into the array having the fieldname as the array
                index.</td></tr><tr><td>MYSQL_BOTH</td><td>Columns are returned into the array having both a numerical index and
                the fieldname as the array index.</td></tr><tr><td>MYSQL_NUM</td><td>Columns are returned into the array having a numerical index to the
                fields. This index starts with 0, the first field in the
                result.</td></tr></tbody></table></div><p>
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysql.examples"></a>29.3.1.3. Examples</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysql.examples-basic">29.3.1.3.1. Basic</a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysql.examples-basic"></a>29.3.1.3.1. Basic</h5></div></div></div><p>
        This simple example shows how to connect, execute a query, print
        resulting rows and disconnect from a MySQL database.

        </p><div class="example"><a name="id2496133"></a><p class="title"><b>Example 29.1. MySQL extension overview example</b></p><p>
            <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008
            the PHP Documentation Group.</a>
          </p><pre class="programlisting">
&lt;?php
// Connecting, selecting database
$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')
    or die('Could not connect: ' . mysql_error());
echo 'Connected successfully';
mysql_select_db('my_database') or die('Could not select database');

// Performing SQL query
$query = 'SELECT * FROM my_table';
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

// Printing results in HTML
echo "&lt;table&gt;\n";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "\t&lt;tr&gt;\n";
    foreach ($line as $col_value) {
        echo "\t\t&lt;td&gt;$col_value&lt;/td&gt;\n";
    }
    echo "\t&lt;/tr&gt;\n";
}
echo "&lt;/table&gt;\n";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?&gt;

    </pre></div><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.mysql"></a>29.3.1.4. MySQL Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-function.mysql-affected-rows">29.3.1.4.1. <code class="literal">mysql_affected_rows</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-change-user">29.3.1.4.2. <code class="literal">mysql_change_user</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-client-encoding">29.3.1.4.3. <code class="literal">mysql_client_encoding</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-close">29.3.1.4.4. <code class="literal">mysql_close</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-connect">29.3.1.4.5. <code class="literal">mysql_connect</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-create-db">29.3.1.4.6. <code class="literal">mysql_create_db</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-data-seek">29.3.1.4.7. <code class="literal">mysql_data_seek</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-db-name">29.3.1.4.8. <code class="literal">mysql_db_name</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-db-query">29.3.1.4.9. <code class="literal">mysql_db_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-drop-db">29.3.1.4.10. <code class="literal">mysql_drop_db</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-errno">29.3.1.4.11. <code class="literal">mysql_errno</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-error">29.3.1.4.12. <code class="literal">mysql_error</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-escape-string">29.3.1.4.13. <code class="literal">mysql_escape_string</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-array">29.3.1.4.14. <code class="literal">mysql_fetch_array</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-assoc">29.3.1.4.15. <code class="literal">mysql_fetch_assoc</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-field">29.3.1.4.16. <code class="literal">mysql_fetch_field</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-lengths">29.3.1.4.17. <code class="literal">mysql_fetch_lengths</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-object">29.3.1.4.18. <code class="literal">mysql_fetch_object</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-fetch-row">29.3.1.4.19. <code class="literal">mysql_fetch_row</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-flags">29.3.1.4.20. <code class="literal">mysql_field_flags</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-len">29.3.1.4.21. <code class="literal">mysql_field_len</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-name">29.3.1.4.22. <code class="literal">mysql_field_name</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-seek">29.3.1.4.23. <code class="literal">mysql_field_seek</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-table">29.3.1.4.24. <code class="literal">mysql_field_table</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-field-type">29.3.1.4.25. <code class="literal">mysql_field_type</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-free-result">29.3.1.4.26. <code class="literal">mysql_free_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-get-client-info">29.3.1.4.27. <code class="literal">mysql_get_client_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-get-host-info">29.3.1.4.28. <code class="literal">mysql_get_host_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-get-proto-info">29.3.1.4.29. <code class="literal">mysql_get_proto_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-get-server-info">29.3.1.4.30. <code class="literal">mysql_get_server_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-info">29.3.1.4.31. <code class="literal">mysql_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-insert-id">29.3.1.4.32. <code class="literal">mysql_insert_id</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-list-dbs">29.3.1.4.33. <code class="literal">mysql_list_dbs</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-list-fields">29.3.1.4.34. <code class="literal">mysql_list_fields</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-list-processes">29.3.1.4.35. <code class="literal">mysql_list_processes</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-list-tables">29.3.1.4.36. <code class="literal">mysql_list_tables</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-num-fields">29.3.1.4.37. <code class="literal">mysql_num_fields</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-num-rows">29.3.1.4.38. <code class="literal">mysql_num_rows</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-pconnect">29.3.1.4.39. <code class="literal">mysql_pconnect</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-ping">29.3.1.4.40. <code class="literal">mysql_ping</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-query">29.3.1.4.41. <code class="literal">mysql_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-real-escape-string">29.3.1.4.42. <code class="literal">mysql_real_escape_string</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-result">29.3.1.4.43. <code class="literal">mysql_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-select-db">29.3.1.4.44. <code class="literal">mysql_select_db</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-set-charset">29.3.1.4.45. <code class="literal">mysql_set_charset</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-stat">29.3.1.4.46. <code class="literal">mysql_stat</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-tablename">29.3.1.4.47. <code class="literal">mysql_tablename</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-thread-id">29.3.1.4.48. <code class="literal">mysql_thread_id</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysql-unbuffered-query">29.3.1.4.49. <code class="literal">mysql_unbuffered_query</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Most MySQL functions accept
        <em class="parameter"><code>link_identifier</code></em> as the last optional
        parameter. If it is not provided, last opened connection is
        used. If it doesn't exist, connection is tried to establish
        with default parameters defined in <code class="filename">php.ini</code>.
        If it is not successful, functions return

        <code class="constant">FALSE</code>

        .
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-affected-rows"></a>29.3.1.4.1. <code class="literal">mysql_affected_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_affected_rows</code>
          </p><p>
            Get number of affected rows in previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_affected_rows</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Get the number of affected rows by the last INSERT, UPDATE,
        REPLACE or DELETE query associated with
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the number of affected rows on success, and -1 if the
        last query failed.
      </p><p>
        If the last query was a DELETE query with no WHERE clause, all
        of the records will have been deleted from the table but this
        function will return zero with MySQL versions prior to 4.1.2.
      </p><p>
        When using UPDATE, MySQL will not update columns where the new
        value is the same as the old value. This creates the possibility
        that
        <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>
        may not actually equal the number of rows matched, only the
        number of rows that were literally affected by the query.
      </p><p>
        The REPLACE statement first deletes the record with the same
        primary key and then inserts the new record. This function
        returns the number of deleted records plus the number of
        inserted records.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2496394"></a><p class="title"><b>Example 29.2. <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

/* this should return the correct numbers of deleted records */
mysql_query('DELETE FROM mytable WHERE id &lt; 10');
printf("Records deleted: %d\n", mysql_affected_rows());

/* with a where clause that is never true, it should return 0 */
mysql_query('DELETE FROM mytable WHERE 0');
printf("Records deleted: %d\n", mysql_affected_rows());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Records deleted: 10
Records deleted: 0


          </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2496429"></a><p class="title"><b>Example 29.3. <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>
            example using transactions</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

/* Update records */
mysql_query("UPDATE mytable SET used=1 WHERE id &lt; 10");
printf ("Updated records: %d\n", mysql_affected_rows());
mysql_query("COMMIT");
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Updated Records: 10


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Transactions</h3><p>
          If you are using transactions, you need to call
          <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>
          after your INSERT, UPDATE, or DELETE query, not after the
          COMMIT.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">SELECT Statements</h3><p>
          To retrieve the number of rows returned by a SELECT, it is
          possible to use
          <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-info" title="29.3.1.4.31. mysql_info"><code class="literal">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-change-user"></a>29.3.1.4.2. <code class="literal">mysql_change_user</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_change_user</code>
          </p><p>
            Change logged in user of the active connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                      <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-change-user" title="29.3.1.4.2. mysql_change_user"><code class="literal">mysql_change_user</code></a>
        changes the logged in user of the current active connection, or
        the connection given by the optional
        <em class="parameter"><code>link_identifier</code></em> parameter. If a database
        is specified, this will be the current database after the user
        has been changed. If the new user and password authorization
        fails, the current connected user stays active.
      </p><p>
        This function is deprecated and no longer exists in PHP.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>user</code></em>
            </span></dt><dd><p>
                The new MySQL username.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The new MySQL password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The MySQL database. If not specified, the current
                selected database is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>3.0.14</td><td>This function was removed from PHP.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Requirements</h3><p>
          This function requires MySQL 3.23.3 or higher.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-client-encoding"></a>29.3.1.4.3. <code class="literal">mysql_client_encoding</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_client_encoding</code>
          </p><p>
            Returns the name of the character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_client_encoding</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the <code class="literal">character_set</code> variable from
        MySQL.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the default character set name for the current
        connection.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2497105"></a><p class="title"><b>Example 29.4. <a href="apis.html#apis-php-function.mysql-client-encoding" title="29.3.1.4.3. mysql_client_encoding"><code class="literal">mysql_client_encoding</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link    = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$charset = mysql_client_encoding($link);

echo "The current character set is: $charset\n";
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


The current character set is: latin1


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-set-charset" title="29.3.1.4.45. mysql_set_charset"><code class="literal">mysql_set_charset</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-close"></a>29.3.1.4.4. <code class="literal">mysql_close</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_close</code>
          </p><p>
            Close MySQL connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_close</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>
        closes the non-persistent connection to the MySQL server
        that's associated with the specified link identifier. If
        <em class="parameter"><code>link_identifier</code></em> isn't specified, the
        last opened link is used.
      </p><p>
        Using
        <a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>
        isn't usually necessary, as non-persistent open links are
        automatically closed at the end of the script's execution.
        See also
        <a href="http://www.php.net/manual/en/language.types.resource.self-destruct.php" target="_top">freeing
        resources</a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2497371"></a><p class="title"><b>Example 29.5. <a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


Connected successfully


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>
          will not close persistent links created by
          <a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-free-result" title="29.3.1.4.26. mysql_free_result"><code class="literal">mysql_free_result</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-connect"></a>29.3.1.4.5. <code class="literal">mysql_connect</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_connect</code>
          </p><p>
            Open a connection to a MySQL Server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">server</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                       <span class="methodparam"><span class="type">bool </span><span class="parameter">new_link</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">client_flags</span></span>);</code><p>
        Opens or reuses a connection to a MySQL server.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>server</code></em>
            </span></dt><dd><p>
                The MySQL server. It can also include a port number.
                e.g. "hostname:port" or a path to a local
                socket e.g. ":/path/to/socket" for the
                localhost.
              </p><p>
                If the PHP directive
                <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">
                mysql.default_host</a> is undefined (default), then
                the default value is 'localhost:3306'. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and value
                'localhost:3306' is always used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The username. Default value is defined by
                <a href="http://www.php.net/manual/en/ini.mysql.default-user.php" target="_top">mysql.default_user</a>.
                In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and the
                name of the user that owns the server process is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The password. Default value is defined by
                <a href="http://www.php.net/manual/en/ini.mysql.default-password.php" target="_top">mysql.default_password</a>.
                In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored and empty
                password is used.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>new_link</code></em>
            </span></dt><dd><p>
                If a second call is made to
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                with the same arguments, no new link will be
                established, but instead, the link identifier of the
                already opened link will be returned. The
                <em class="parameter"><code>new_link</code></em> parameter modifies this
                behavior and makes
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                always open a new link, even if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called before with the same parameters. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>client_flags</code></em>
            </span></dt><dd><p>
                The <em class="parameter"><code>client_flags</code></em> parameter can be
                a combination of the following constants: 128 (enable
                <code class="literal">LOAD DATA LOCAL</code> handling),

                <code class="constant">MYSQL_CLIENT_SSL</code>

                ,

                <code class="constant">MYSQL_CLIENT_COMPRESS</code>

                ,

                <code class="constant">MYSQL_CLIENT_IGNORE_SPACE</code>

                or

                <code class="constant">MYSQL_CLIENT_INTERACTIVE</code>

                . Read the section about
                <a href="apis.html#apis-php-mysql.client-flags" title="Table 29.2. MySQL client constants">Table 29.2, “MySQL client constants”</a> for
                further information. In
                <a href="http://www.php.net/manual/en/ini.sql.safe-mode.php" target="_top">SQL
                safe mode</a>, this parameter is ignored.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a MySQL link identifier on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.0</td><td>Added the <em class="parameter"><code>client_flags</code></em> parameter.</td></tr><tr><td>4.2.0</td><td>Added the <em class="parameter"><code>new_link</code></em> parameter.</td></tr><tr><td>3.0.10</td><td>Added support for ":/path/to/socket" with
                  <em class="parameter"><code>server</code></em>.</td></tr><tr><td>3.0.0</td><td>Added support for ":port" with <em class="parameter"><code>server</code></em>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2497983"></a><p class="title"><b>Example 29.6. <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2498007"></a><p class="title"><b>Example 29.7. <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
            example using <code class="literal">hostname:port</code> syntax</b></p><pre class="programlisting">
&lt;?php
// we connect to example.com and port 3307
$link = mysql_connect('example.com:3307', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);

// we connect to localhost at port 3307
$link = mysql_connect('127.0.0.1:3307', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2498043"></a><p class="title"><b>Example 29.8. <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
            example using ":/path/to/socket" syntax</b></p><pre class="programlisting">
&lt;?php
// we connect to localhost and socket e.g. /tmp/mysql.sock

//variant 1: ommit localhost
$link = mysql_connect(':/tmp/mysql', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);


// variant 2: with localhost
$link = mysql_connect('localhost:/tmp/mysql.sock', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Whenever you specify "localhost" or
          "localhost:port" as server, the MySQL client library
          will override this and try to connect to a local socket (named
          pipe on Windows). If you want to use TCP/IP, use
          "127.0.0.1" instead of "localhost". If the
          MySQL client library tries to connect to the wrong local
          socket, you should set the correct path as
          <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">http://www.php.net/manual/en/ini.mysql.default-host.php</a>
          in your PHP configuration and leave the server field blank.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The link to the server will be closed as soon as the execution
          of the script ends, unless it's closed earlier by
          explicitly calling
          <a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You can suppress the error message on failure by prepending a
          <a href="http://www.php.net/manual/en/language.operators.errorcontrol.php" target="_top">@</a>
          to the function name.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Error "Can't create TCP/IP socket (10106)"
          usually means that the
          <a href="http://www.php.net/manual/en/ini.variables-order.php" target="_top">variables_order</a>
          configure directive doesn't contain character
          <code class="literal">E</code>. On Windows, if the environment is not
          copied the <code class="literal">SYSTEMROOT</code> environment variable
          won't be available and PHP will have problems loading
          Winsock.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-create-db"></a>29.3.1.4.6. <code class="literal">mysql_create_db</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_create_db</code>
          </p><p>
            Create a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_create_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-create-db" title="29.3.1.4.6. mysql_create_db"><code class="literal">mysql_create_db</code></a>
        attempts to create a new database on the server associated with
        the specified link identifier.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database being created.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2498394"></a><p class="title"><b>Example 29.9. <a href="apis.html#apis-php-function.mysql-create-db" title="29.3.1.4.6. mysql_create_db"><code class="literal">mysql_create_db</code></a>
            alternative example</b></p><p>
            The function
            <a href="apis.html#apis-php-function.mysql-create-db" title="29.3.1.4.6. mysql_create_db"><code class="literal">mysql_create_db</code></a>
            is deprecated. It is preferable to use
            <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
            to issue an sql <code class="literal">CREATE DATABASE</code> statement
            instead.
          </p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$sql = 'CREATE DATABASE my_db';
if (mysql_query($sql, $link)) {
    echo "Database my_db created successfully\n";
} else {
    echo 'Error creating database: ' . mysql_error() . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Database my_db created successfully


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_createdb</code>
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function will not be available if the MySQL extension was
          built against a MySQL 4.x client library.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-data-seek"></a>29.3.1.4.7. <code class="literal">mysql_data_seek</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_data_seek</code>
          </p><p>
            Move internal result pointer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_data_seek</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                     <span class="methodparam"><span class="type">int </span><span class="parameter">row_number</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>
        moves the internal row pointer of the MySQL result associated
        with the specified result identifier to point to the specified
        row number. The next call to a MySQL fetch function, such as
        <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>,
        would return that row.
      </p><p>
        <em class="parameter"><code>row_number</code></em> starts at 0. The
        <em class="parameter"><code>row_number</code></em> should be a value in the range
        from 0 to
        <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
        - 1. However if the result set is empty
        (<a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
        == 0), a seek to 0 will fail with a
        <a href="http://www.php.net/manual/en/errorfunc.constants.errorlevels.e-warning.php" target="_top">E_WARNING</a>
        and
        <a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>
        will return

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row_number</code></em>
            </span></dt><dd><p>
                The desired row number of the new result pointer.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2498771"></a><p class="title"><b>Example 29.10. <a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$db_selected = mysql_select_db('sample_db');
if (!$db_selected) {
    die('Could not select database: ' . mysql_error());
}
$query = 'SELECT last_name, first_name FROM friends';
$result = mysql_query($query);
if (!$result) {
    die('Query failed: ' . mysql_error());
}
/* fetch rows in reverse order */
for ($i = mysql_num_rows($result) - 1; $i &gt;= 0; $i--) {
    if (!mysql_data_seek($result, $i)) {
        echo "Cannot seek to row $i: " . mysql_error() . "\n";
        continue;
    }

    if (!($row = mysql_fetch_assoc($result))) {
        continue;
    }

    echo $row['last_name'] . ' ' . $row['first_name'] . "&lt;br /&gt;\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The function
          <a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>
          can be used in conjunction only with
          <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>,
          not with
          <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-db-name"></a>29.3.1.4.8. <code class="literal">mysql_db_name</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_db_name</code>
          </p><p>
            Get result data
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_db_name</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                     <span class="methodparam"><span class="type">int </span><span class="parameter">row</span></span>,<br>                     <span class="methodparam"><span class="type">mixed </span><span class="parameter">field</span></span>);</code><p>
        Retrieve the database name from a call to
        <a href="apis.html#apis-php-function.mysql-list-dbs" title="29.3.1.4.33. mysql_list_dbs"><code class="literal">mysql_list_dbs</code></a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>result</code></em>
            </span></dt><dd><p>
                The result pointer from a call to
                <a href="apis.html#apis-php-function.mysql-list-dbs" title="29.3.1.4.33. mysql_list_dbs"><code class="literal">mysql_list_dbs</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row</code></em>
            </span></dt><dd><p>
                The index into the result set.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field</code></em>
            </span></dt><dd><p>
                The field name.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the database name on success, and

        <code class="constant">FALSE</code>

        on failure. If

        <code class="constant">FALSE</code>

        is returned, use
        <a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>
        to determine the nature of the error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2499148"></a><p class="title"><b>Example 29.11. <a href="apis.html#apis-php-function.mysql-db-name" title="29.3.1.4.8. mysql_db_name"><code class="literal">mysql_db_name</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
error_reporting(E_ALL);

$link = mysql_connect('dbhost', 'username', 'password');
$db_list = mysql_list_dbs($link);

$i = 0;
$cnt = mysql_num_rows($db_list);
while ($i &lt; $cnt) {
    echo mysql_db_name($db_list, $i) . "\n";
    $i++;
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_dbname</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-list-dbs" title="29.3.1.4.33. mysql_list_dbs"><code class="literal">mysql_list_dbs</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-db-query"></a>29.3.1.4.9. <code class="literal">mysql_db_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_db_query</code>
          </p><p>
            Send a MySQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_db_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                        <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-db-query" title="29.3.1.4.9. mysql_db_query"><code class="literal">mysql_db_query</code></a>
        selects a database, and executes a query on it.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The name of the database that will be selected.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The MySQL query.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a positive MySQL result resource to the query result, or

        <code class="constant">FALSE</code>

        on error. The function also returns

        <code class="constant">TRUE</code>

        /

        <code class="constant">FALSE</code>

        for
        <code class="literal">INSERT</code>/<code class="literal">UPDATE</code>/<code class="literal">DELETE</code>
        queries to indicate success/failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.0.6</td><td>This function is deprecated, do not use this function. Use
                  <a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>
                  and
                  <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
                  instead.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2499559"></a><p class="title"><b>Example 29.12. <a href="apis.html#apis-php-function.mysql-db-query" title="29.3.1.4.9. mysql_db_query"><code class="literal">mysql_db_query</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php

if (!$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

if (!mysql_select_db('mysql_dbname', $link)) {
    echo 'Could not select database';
    exit;
}

$sql    = 'SELECT foo FROM bar WHERE id = 42';
$result = mysql_query($sql, $link);

if (!$result) {
    echo "DB Error, could not query the database\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_assoc($result)) {
    echo $row['foo'];
}

mysql_free_result($result);

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Be aware that this function does <span class="emphasis"><em>NOT</em></span>
          switch back to the database you were connected before. In
          other words, you can't use this function to
          <span class="emphasis"><em>temporarily</em></span> run an sql query on another
          database, you would have to manually switch back. Users are
          strongly encouraged to use the
          <code class="literal">database.table</code> syntax in their sql queries
          or
          <a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>
          instead of this function.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-drop-db"></a>29.3.1.4.10. <code class="literal">mysql_drop_db</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_drop_db</code>
          </p><p>
            Drop (delete) a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_drop_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                   <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-drop-db" title="29.3.1.4.10. mysql_drop_db"><code class="literal">mysql_drop_db</code></a>
        attempts to drop (remove) an entire database from the server
        associated with the specified link identifier. This function is
        deprecated, it is preferable to use
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        to issue an sql <code class="literal">DROP DATABASE</code> statement
        instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that will be deleted.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2499884"></a><p class="title"><b>Example 29.13. <a href="apis.html#apis-php-function.mysql-drop-db" title="29.3.1.4.10. mysql_drop_db"><code class="literal">mysql_drop_db</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$sql = 'DROP DATABASE my_db';
if (mysql_query($sql, $link)) {
    echo "Database my_db was successfully dropped\n";
} else {
    echo 'Error dropping database: ' . mysql_error() . "\n";
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          This function will not be available if the MySQL extension was
          built against a MySQL 4.x client library.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_dropdb</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-errno"></a>29.3.1.4.11. <code class="literal">mysql_errno</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_errno</code>
          </p><p>
            Returns the numerical value of the error message from
            previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_errno</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns the error number from the last MySQL function.
      </p><p>
        Errors coming back from the MySQL database backend no longer
        issue warnings. Instead, use
        <a href="apis.html#apis-php-function.mysql-errno" title="29.3.1.4.11. mysql_errno"><code class="literal">mysql_errno</code></a>
        to retrieve the error code. Note that this function only returns
        the error code from the most recently executed MySQL function
        (not including
        <a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>
        and
        <a href="apis.html#apis-php-function.mysql-errno" title="29.3.1.4.11. mysql_errno"><code class="literal">mysql_errno</code></a>),
        so if you want to use it, make sure you check the value before
        calling another MySQL function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the error number from the last MySQL function, or
        <code class="literal">0</code> (zero) if no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2500155"></a><p class="title"><b>Example 29.14. <a href="apis.html#apis-php-function.mysql-errno" title="29.3.1.4.11. mysql_errno"><code class="literal">mysql_errno</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect("localhost", "mysql_user", "mysql_password");

if (!mysql_select_db("nonexistentdb", $link)) {
    echo mysql_errno($link) . ": " . mysql_error($link). "\n";
}

mysql_select_db("kossu", $link);
if (!mysql_query("SELECT * FROM nonexistenttable", $link)) {
    echo mysql_errno($link) . ": " . mysql_error($link) . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1049: Unknown database 'nonexistentdb'
1146: Table 'kossu.nonexistenttable' doesn't exist


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">MySQL error codes</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-error"></a>29.3.1.4.12. <code class="literal">mysql_error</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_error</code>
          </p><p>
            Returns the text of the error message from previous MySQL
            operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_error</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns the error text from the last MySQL function. Errors
        coming back from the MySQL database backend no longer issue
        warnings. Instead, use
        <a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>
        to retrieve the error text. Note that this function only returns
        the error text from the most recently executed MySQL function
        (not including
        <a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>
        and
        <a href="apis.html#apis-php-function.mysql-errno" title="29.3.1.4.11. mysql_errno"><code class="literal">mysql_errno</code></a>),
        so if you want to use it, make sure you check the value before
        calling another MySQL function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the error text from the last MySQL function, or
        <code class="literal">''</code> (empty string) if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2500414"></a><p class="title"><b>Example 29.15. <a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect("localhost", "mysql_user", "mysql_password");

mysql_select_db("nonexistentdb", $link);
echo mysql_errno($link) . ": " . mysql_error($link). "\n";

mysql_select_db("kossu", $link);
mysql_query("SELECT * FROM nonexistenttable", $link);
echo mysql_errno($link) . ": " . mysql_error($link) . "\n";
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1049: Unknown database 'nonexistentdb'
1146: Table 'kossu.nonexistenttable' doesn't exist


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-errno" title="29.3.1.4.11. mysql_errno"><code class="literal">mysql_errno</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">MySQL error codes</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-escape-string"></a>29.3.1.4.13. <code class="literal">mysql_escape_string</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_escape_string</code>
          </p><p>
            Escapes a string for use in a mysql_query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">unescaped_string</span></span>);</code><p>
        This function will escape the
        <em class="parameter"><code>unescaped_string</code></em>, so that it is safe to
        place it in a
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
        This function is deprecated.
      </p><p>
        This function is identical to
        <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
        except that
        <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
        takes a connection handler and escapes the string according to
        the current character set.
        <a href="apis.html#apis-php-function.mysql-escape-string" title="29.3.1.4.13. mysql_escape_string"><code class="literal">mysql_escape_string</code></a>
        does not take a connection argument and does not respect the
        current charset setting.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>unescaped_string</code></em>
            </span></dt><dd><p>
                The string that is to be escaped.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the escaped string.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.0</td><td>This function became deprecated, do not use this function. Instead, use
                  <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2500725"></a><p class="title"><b>Example 29.16. <a href="apis.html#apis-php-function.mysql-escape-string" title="29.3.1.4.13. mysql_escape_string"><code class="literal">mysql_escape_string</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$item = "Zak's Laptop";
$escaped_item = mysql_escape_string($item);
printf("Escaped string: %s\n", $escaped_item);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


Escaped string: Zak\'s Laptop


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="apis.html#apis-php-function.mysql-escape-string" title="29.3.1.4.13. mysql_escape_string"><code class="literal">mysql_escape_string</code></a>
          does not escape <code class="literal">%</code> and <code class="literal">_</code>.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>

          </td></tr><tr><td><code class="literal">addslashes</code>

          </td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a> directive.</td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-array"></a>29.3.1.4.14. <code class="literal">mysql_fetch_array</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_array</code>
          </p><p>
            Fetch a result row as an associative array, a numeric array,
            or both
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_array</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">result_type</span></span>);</code><p>
        Returns an array that corresponds to the fetched row and moves
        the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>result_type</code></em>
            </span></dt><dd><p>
                The type of array that is to be fetched. It's a
                constant and can take the following values:

                <code class="constant">MYSQL_ASSOC</code>

                ,

                <code class="constant">MYSQL_NUM</code>

                , and the default value of

                <code class="constant">MYSQL_BOTH</code>

                .
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of strings that corresponds to the fetched row,
        or

        <code class="constant">FALSE</code>

        if there are no more rows. The type of returned array depends on
        how <em class="parameter"><code>result_type</code></em> is defined. By using

        <code class="constant">MYSQL_BOTH</code>

        (default), you'll get an array with both associative and
        number indices. Using

        <code class="constant">MYSQL_ASSOC</code>

        , you only get associative indices (as
        <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>
        works), using

        <code class="constant">MYSQL_NUM</code>

        , you only get number indices (as
        <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>
        works).
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you must use the numeric index of
        the column or make an alias for the column. For aliased columns,
        you cannot access the contents with the original column name.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2501073"></a><p class="title"><b>Example 29.17. Query with aliased duplicate field names</b></p><pre class="programlisting">
SELECT table1.field AS foo, table2.field AS bar FROM table1, table2

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2501089"></a><p class="title"><b>Example 29.18. <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_NUM</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("ID: %s  Name: %s", $row[0], $row[1]);  
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2501119"></a><p class="title"><b>Example 29.19. <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_ASSOC</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    printf("ID: %s  Name: %s", $row["id"], $row["name"]);
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2501149"></a><p class="title"><b>Example 29.20. <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
            with

            <code class="constant">MYSQL_BOTH</code></b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_BOTH)) {
    printf ("ID: %s  Name: %s", $row[0], $row["name"]);
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          An important thing to note is that using
          <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
          is <span class="emphasis"><em>not significantly</em></span> slower than using
          <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>,
          while it provides a significant added value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-assoc"></a>29.3.1.4.15. <code class="literal">mysql_fetch_assoc</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_assoc</code>
          </p><p>
            Fetch a result row as an associative array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_assoc</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns an associative array that corresponds to the fetched row
        and moves the internal data pointer ahead.
        <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>
        is equivalent to calling
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
        with MYSQL_ASSOC for the optional second parameter. It only
        returns an associative array.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an associative array of strings that corresponds to the
        fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you either need to access the result
        with numeric indices by using
        <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>
        or add alias names. See the example at the
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>
        description about aliases.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2501478"></a><p class="title"><b>Example 29.21. An expanded
            <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$conn = mysql_connect("localhost", "mysql_user", "mysql_password");

if (!$conn) {
    echo "Unable to connect to DB: " . mysql_error();
    exit;
}
  
if (!mysql_select_db("mydbname")) {
    echo "Unable to select mydbname: " . mysql_error();
    exit;
}

$sql = "SELECT id as userid, fullname, userstatus 
        FROM   sometable
        WHERE  userstatus = 1";

$result = mysql_query($sql);

if (!$result) {
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

// While a row of data exists, put that row in $row as an associative array
// Note: If you're expecting just one row, no need to use a loop
// Note: If you put extract($row); inside the following loop, you'll
//       then create $userid, $fullname, and $userstatus
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
}

mysql_free_result($result);

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          An important thing to note is that using
          <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>
          is <span class="emphasis"><em>not significantly</em></span> slower than using
          <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>,
          while it provides a significant added value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-field"></a>29.3.1.4.16. <code class="literal">mysql_fetch_field</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_field</code>
          </p><p>
            Get column information from a result and return as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysql_fetch_field</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Returns an object containing field information. This function
        can be used to obtain information about fields in the provided
        query result.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. If the field offset is not
                specified, the next field that was not yet retrieved by
                this function is retrieved. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an <span class="type">object</span> containing field information. The
        properties of the object are:
      </p><p>
        </p><div class="itemizedlist"><ul type="disc"><li>
      name - column name
     </li><li>
      table - name of the table the column belongs to
     </li><li>
      def - default value of the column
     </li><li>
      max_length - maximum length of the column
     </li><li>
      not_null - 1 if the column cannot be <code class="constant">NULL</code>

            </li><li>
      primary_key - 1 if the column is a primary key
     </li><li>
      unique_key - 1 if the column is a unique key
     </li><li>
      multiple_key - 1 if the column is a non-unique key
     </li><li>
      numeric - 1 if the column is numeric
     </li><li>
      blob - 1 if the column is a BLOB
     </li><li>
      type - the type of the column
     </li><li>
      unsigned - 1 if the column is unsigned
     </li><li>
      zerofill - 1 if the column is zero-filled
     </li></ul></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2501940"></a><p class="title"><b>Example 29.22. <a href="apis.html#apis-php-function.mysql-fetch-field" title="29.3.1.4.16. mysql_fetch_field"><code class="literal">mysql_fetch_field</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$conn = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$conn) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('database');
$result = mysql_query('select * from table');
if (!$result) {
    die('Query failed: ' . mysql_error());
}
/* get column metadata */
$i = 0;
while ($i &lt; mysql_num_fields($result)) {
    echo "Information for column $i:&lt;br /&gt;\n";
    $meta = mysql_fetch_field($result, $i);
    if (!$meta) {
        echo "No information available&lt;br /&gt;\n";
    }
    echo "&lt;pre&gt;
blob:         $meta-&gt;blob
max_length:   $meta-&gt;max_length
multiple_key: $meta-&gt;multiple_key
name:         $meta-&gt;name
not_null:     $meta-&gt;not_null
numeric:      $meta-&gt;numeric
primary_key:  $meta-&gt;primary_key
table:        $meta-&gt;table
type:         $meta-&gt;type
default:      $meta-&gt;def
unique_key:   $meta-&gt;unique_key
unsigned:     $meta-&gt;unsigned
zerofill:     $meta-&gt;zerofill
&lt;/pre&gt;";
    $i++;
}
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-seek" title="29.3.1.4.23. mysql_field_seek"><code class="literal">mysql_field_seek</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-lengths"></a>29.3.1.4.17. <code class="literal">mysql_fetch_lengths</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_lengths</code>
          </p><p>
            Get the length of each output in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_lengths</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns an array that corresponds to the lengths of each field
        in the last row fetched by MySQL.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-fetch-lengths" title="29.3.1.4.17. mysql_fetch_lengths"><code class="literal">mysql_fetch_lengths</code></a>
        stores the lengths of each result column in the last row
        returned by
        <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>,
        <a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>,
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>,
        and
        <a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>
        in an array, starting at offset 0.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An <span class="type">array</span> of lengths on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2502212"></a><p class="title"><b>Example 29.23. A
            <a href="apis.html#apis-php-function.mysql-fetch-lengths" title="29.3.1.4.17. mysql_fetch_lengths"><code class="literal">mysql_fetch_lengths</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row     = mysql_fetch_assoc($result);
$lengths = mysql_fetch_lengths($result);

print_r($row);
print_r($lengths);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [id] =&gt; 42
    [email] =&gt; user@example.com
)
Array
(
    [0] =&gt; 2
    [1] =&gt; 16
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><code class="literal">strlen</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-object"></a>29.3.1.4.18. <code class="literal">mysql_fetch_object</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_object</code>
          </p><p>
            Fetch a result row as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysql_fetch_object</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                          <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><p>
        Returns an object with properties that correspond to the fetched
        row and moves the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>class_name</code></em>
            </span></dt><dd><p>
                The name of the class to instantiate, set the properties
                of and return. If not specified, a
                <code class="classname">stdClass</code> object is returned.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>params</code></em>
            </span></dt><dd><p>
                An optional <span class="type">array</span> of parameters to pass to
                the constructor for <em class="parameter"><code>class_name</code></em>
                objects.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an <span class="type">object</span> with string properties that
        correspond to the fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>
        fetches one row of data from the result associated with the
        specified result identifier. The row is returned as an array.
        Each result column is stored in an array offset, starting at
        offset 0.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.0.0</td><td>Added the ability to return as a different object.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2502598"></a><p class="title"><b>Example 29.24. <a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("hostname", "user", "password");
mysql_select_db("mydb");
$result = mysql_query("select * from mytable");
while ($row = mysql_fetch_object($result)) {
    echo $row-&gt;user_id;
    echo $row-&gt;fullname;
}
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2502623"></a><p class="title"><b>Example 29.25. <a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
class foo {
    public $name;
}

mysql_connect("hostname", "user", "password");
mysql_select_db("mydb");

$result = mysql_query("select name from mytable limit 1");
$obj = mysql_fetch_object($result, 'foo');
var_dump($obj);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Performance</h3><p>
          Speed-wise, the function is identical to
          <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>,
          and almost as quick as
          <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>
          (the difference is insignificant).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>
          is similar to
          <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>,
          with one difference - an object is returned, instead of an
          array. Indirectly, that means that you can only access the
          data by the field names, and not by their offsets (numbers are
          illegal property names).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-fetch-row"></a>29.3.1.4.19. <code class="literal">mysql_fetch_row</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_fetch_row</code>
          </p><p>
            Get a result row as an enumerated array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysql_fetch_row</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Returns a numerical array that corresponds to the fetched row
        and moves the internal data pointer ahead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an numerical array of strings that corresponds to the
        fetched row, or

        <code class="constant">FALSE</code>

        if there are no more rows.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>
        fetches one row of data from the result associated with the
        specified result identifier. The row is returned as an array.
        Each result column is stored in an array offset, starting at
        offset 0.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2502953"></a><p class="title"><b>Example 29.26. Fetching one row with
            <a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a></b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row = mysql_fetch_row($result);

echo $row[0]; // 42
echo $row[1]; // the email value
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-lengths" title="29.3.1.4.17. mysql_fetch_lengths"><code class="literal">mysql_fetch_lengths</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-result" title="29.3.1.4.43. mysql_result"><code class="literal">mysql_result</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-flags"></a>29.3.1.4.20. <code class="literal">mysql_field_flags</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_flags</code>
          </p><p>
            Get the flags associated with the specified field in a
            result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_flags</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-field-flags" title="29.3.1.4.20. mysql_field_flags"><code class="literal">mysql_field_flags</code></a>
        returns the field flags of the specified field. The flags are
        reported as a single word per flag separated by a single space,
        so that you can split the returned value using
        <code class="literal">explode</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string of flags associated with the result, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        The following flags are reported, if your version of MySQL is
        current enough to support them:
        <code class="literal">"not_null"</code>,
        <code class="literal">"primary_key"</code>,
        <code class="literal">"unique_key"</code>,
        <code class="literal">"multiple_key"</code>,
        <code class="literal">"blob"</code>,
        <code class="literal">"unsigned"</code>,
        <code class="literal">"zerofill"</code>,
        <code class="literal">"binary"</code>,
        <code class="literal">"enum"</code>,
        <code class="literal">"auto_increment"</code> and
        <code class="literal">"timestamp"</code>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2503359"></a><p class="title"><b>Example 29.27. A
            <a href="apis.html#apis-php-function.mysql-field-flags" title="29.3.1.4.20. mysql_field_flags"><code class="literal">mysql_field_flags</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$flags = mysql_field_flags($result, 0);

echo $flags;
print_r(explode(' ', $flags));
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


not_null primary_key auto_increment
Array
(
    [0] =&gt; not_null
    [1] =&gt; primary_key
    [2] =&gt; auto_increment
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_fieldflags</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-type" title="29.3.1.4.25. mysql_field_type"><code class="literal">mysql_field_type</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-len"></a>29.3.1.4.21. <code class="literal">mysql_field_len</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_len</code>
          </p><p>
            Returns the length of the specified field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_field_len</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>
        returns the length of the specified field.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The length of the specified field index on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2503667"></a><p class="title"><b>Example 29.28. <a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

// Will get the length of the id field as specified in the database
// schema. 
$length = mysql_field_len($result, 0);
echo $length;
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_fieldlen</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-lengths" title="29.3.1.4.17. mysql_fetch_lengths"><code class="literal">mysql_fetch_lengths</code></a>

          </td></tr><tr><td><code class="literal">strlen</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-name"></a>29.3.1.4.22. <code class="literal">mysql_field_name</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_name</code>
          </p><p>
            Get the name of the specified field in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_name</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-field-name" title="29.3.1.4.22. mysql_field_name"><code class="literal">mysql_field_name</code></a>
        returns the name of the specified field index.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the specified field index on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2503959"></a><p class="title"><b>Example 29.29. <a href="apis.html#apis-php-function.mysql-field-name" title="29.3.1.4.22. mysql_field_name"><code class="literal">mysql_field_name</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
/* The users table consists of three fields:
*   user_id
*   username
*   password.
*/
$link = @mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect to MySQL server: ' . mysql_error());
}
$dbname = 'mydb';
$db_selected = mysql_select_db($dbname, $link);
if (!$db_selected) {
    die("Could not set $dbname: " . mysql_error());
}
$res = mysql_query('select * from users', $link);

echo mysql_field_name($res, 0) . "\n";
echo mysql_field_name($res, 2);
?&gt;

    </pre><p>
            The above example will output:
          </p><pre class="screen">


user_id
password


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_fieldname</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-type" title="29.3.1.4.25. mysql_field_type"><code class="literal">mysql_field_type</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-seek"></a>29.3.1.4.23. <code class="literal">mysql_field_seek</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_seek</code>
          </p><p>
            Set result pointer to a specified field offset
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_field_seek</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Seeks to the specified field offset. If the next call to
        <a href="apis.html#apis-php-function.mysql-fetch-field" title="29.3.1.4.16. mysql_fetch_field"><code class="literal">mysql_fetch_field</code></a>
        doesn't include a field offset, the field offset specified
        in
        <a href="apis.html#apis-php-function.mysql-field-seek" title="29.3.1.4.23. mysql_field_seek"><code class="literal">mysql_field_seek</code></a>
        will be returned.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-field" title="29.3.1.4.16. mysql_fetch_field"><code class="literal">mysql_fetch_field</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-table"></a>29.3.1.4.24. <code class="literal">mysql_field_table</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_table</code>
          </p><p>
            Get name of the table the specified field is in
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_table</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        Returns the name of the table that the specified field is in.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the table on success.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2504510"></a><p class="title"><b>Example 29.30. A
            <a href="apis.html#apis-php-function.mysql-field-table" title="29.3.1.4.24. mysql_field_table"><code class="literal">mysql_field_table</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$query = "SELECT account.*, country.* FROM account, country WHERE country.name = 'Portugal' AND account.country_id = country.id";

// get the result from the DB
$result = mysql_query($query);

// Lists the table name and then the field name
for ($i = 0; $i &lt; mysql_num_fields($result); ++$i) {
    $table = mysql_field_table($result, $i);
    $field = mysql_field_name($result, $i);

    echo  "$table: $field\n";
}

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_fieldtable</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-list-tables" title="29.3.1.4.36. mysql_list_tables"><code class="literal">mysql_list_tables</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-field-type"></a>29.3.1.4.25. <code class="literal">mysql_field_type</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_field_type</code>
          </p><p>
            Get the type of the specified field in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_field_type</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">field_offset</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-field-type" title="29.3.1.4.25. mysql_field_type"><code class="literal">mysql_field_type</code></a>
        is similar to the
        <a href="apis.html#apis-php-function.mysql-field-name" title="29.3.1.4.22. mysql_field_name"><code class="literal">mysql_field_name</code></a>
        function. The arguments are identical, but the field type is
        returned instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> field_offset</code></em>
            </span></dt><dd><p>
                The numerical field offset. The
                <em class="parameter"><code>field_offset</code></em> starts at
                <code class="literal">0</code>. If
                <em class="parameter"><code>field_offset</code></em> does not exist, an
                error of level

                <code class="constant">E_WARNING</code>

                is also issued.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The returned field type will be one of
        <code class="literal">"int"</code>,
        <code class="literal">"real"</code>,
        <code class="literal">"string"</code>,
        <code class="literal">"blob"</code>, and others as detailed in
        the <a href="http://dev.mysql.com/doc/" target="_top">MySQL
        documentation</a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2504831"></a><p class="title"><b>Example 29.31. <a href="apis.html#apis-php-function.mysql-field-type" title="29.3.1.4.25. mysql_field_type"><code class="literal">mysql_field_type</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_username", "mysql_password");
mysql_select_db("mysql");
$result = mysql_query("SELECT * FROM func");
$fields = mysql_num_fields($result);
$rows   = mysql_num_rows($result);
$table  = mysql_field_table($result, 0);
echo "Your '" . $table . "' table has " . $fields . " fields and " . $rows . " record(s)\n";
echo "The table has the following fields:\n";
for ($i=0; $i &lt; $fields; $i++) {
    $type  = mysql_field_type($result, $i);
    $name  = mysql_field_name($result, $i);
    $len   = mysql_field_len($result, $i);
    $flags = mysql_field_flags($result, $i);
    echo $type . " " . $name . " " . $len . " " . $flags . "\n";
}
mysql_free_result($result);
mysql_close();
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Your 'func' table has 4 fields and 1 record(s)
The table has the following fields:
string name 64 not_null primary_key binary
int ret 1 not_null
string dl 128 not_null
string type 9 not_null enum


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_fieldtype</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-name" title="29.3.1.4.22. mysql_field_name"><code class="literal">mysql_field_name</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-free-result"></a>29.3.1.4.26. <code class="literal">mysql_free_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_free_result</code>
          </p><p>
            Free result memory
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_free_result</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-free-result" title="29.3.1.4.26. mysql_free_result"><code class="literal">mysql_free_result</code></a>
        will free all memory associated with the result identifier
        <em class="parameter"><code>result</code></em>.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-free-result" title="29.3.1.4.26. mysql_free_result"><code class="literal">mysql_free_result</code></a>
        only needs to be called if you are concerned about how much
        memory is being used for queries that return large result sets.
        All associated result memory is automatically freed at the end
        of the script's execution.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        If a non-resource is used for the <em class="parameter"><code>result</code></em>,
        an error of level E_WARNING will be emitted. It's worth
        noting that
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        only returns a <span class="type">resource</span> for SELECT, SHOW, EXPLAIN,
        and DESCRIBE queries.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2505127"></a><p class="title"><b>Example 29.32. A
            <a href="apis.html#apis-php-function.mysql-free-result" title="29.3.1.4.26. mysql_free_result"><code class="literal">mysql_free_result</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
/* Use the result, assuming we're done with it afterwards */
$row = mysql_fetch_assoc($result);

/* Now we free up the result and continue on with our script */
mysql_free_result($result);

echo $row['id'];
echo $row['email'];
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_freeresult</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><code class="literal">is_resource</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-client-info"></a>29.3.1.4.27. <code class="literal">mysql_get_client_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_client_info</code>
          </p><p>
            Get MySQL client info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_client_info</span>();</code><p>
        <a href="apis.html#apis-php-function.mysql-get-client-info" title="29.3.1.4.27. mysql_get_client_info"><code class="literal">mysql_get_client_info</code></a>
        returns a string that represents the client library version.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The MySQL client version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2505301"></a><p class="title"><b>Example 29.33. <a href="apis.html#apis-php-function.mysql-get-client-info" title="29.3.1.4.27. mysql_get_client_info"><code class="literal">mysql_get_client_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
printf("MySQL client info: %s\n", mysql_get_client_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL client info: 3.23.39


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-get-host-info" title="29.3.1.4.28. mysql_get_host_info"><code class="literal">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-proto-info" title="29.3.1.4.29. mysql_get_proto_info"><code class="literal">mysql_get_proto_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-server-info" title="29.3.1.4.30. mysql_get_server_info"><code class="literal">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-host-info"></a>29.3.1.4.28. <code class="literal">mysql_get_host_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_host_info</code>
          </p><p>
            Get MySQL host info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_host_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Describes the type of connection in use for the connection,
        including the server host name.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string describing the type of MySQL connection in use
        for the connection or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2505538"></a><p class="title"><b>Example 29.34. <a href="apis.html#apis-php-function.mysql-get-host-info" title="29.3.1.4.28. mysql_get_host_info"><code class="literal">mysql_get_host_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL host info: %s\n", mysql_get_host_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL host info: Localhost via UNIX socket


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-get-client-info" title="29.3.1.4.27. mysql_get_client_info"><code class="literal">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-proto-info" title="29.3.1.4.29. mysql_get_proto_info"><code class="literal">mysql_get_proto_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-server-info" title="29.3.1.4.30. mysql_get_server_info"><code class="literal">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-proto-info"></a>29.3.1.4.29. <code class="literal">mysql_get_proto_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_proto_info</code>
          </p><p>
            Get MySQL protocol info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_get_proto_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the MySQL protocol.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the MySQL protocol on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2505777"></a><p class="title"><b>Example 29.35. <a href="apis.html#apis-php-function.mysql-get-proto-info" title="29.3.1.4.29. mysql_get_proto_info"><code class="literal">mysql_get_proto_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL protocol version: %s\n", mysql_get_proto_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL protocol version: 10


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-get-client-info" title="29.3.1.4.27. mysql_get_client_info"><code class="literal">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-host-info" title="29.3.1.4.28. mysql_get_host_info"><code class="literal">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-server-info" title="29.3.1.4.30. mysql_get_server_info"><code class="literal">mysql_get_server_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-get-server-info"></a>29.3.1.4.30. <code class="literal">mysql_get_server_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_get_server_info</code>
          </p><p>
            Get MySQL server info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_get_server_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the MySQL server version.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the MySQL server version on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2506016"></a><p class="title"><b>Example 29.36. <a href="apis.html#apis-php-function.mysql-get-server-info" title="29.3.1.4.30. mysql_get_server_info"><code class="literal">mysql_get_server_info</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
printf("MySQL server version: %s\n", mysql_get_server_info());
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


MySQL server version: 4.0.1-alpha


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-get-client-info" title="29.3.1.4.27. mysql_get_client_info"><code class="literal">mysql_get_client_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-host-info" title="29.3.1.4.28. mysql_get_host_info"><code class="literal">mysql_get_host_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-get-proto-info" title="29.3.1.4.29. mysql_get_proto_info"><code class="literal">mysql_get_proto_info</code></a>

          </td></tr><tr><td><code class="literal">phpversion</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-info"></a>29.3.1.4.31. <code class="literal">mysql_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_info</code>
          </p><p>
            Get information about the most recent query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_info</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns detailed information about the last query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns information about the statement on success, or

        <code class="constant">FALSE</code>

        on failure. See the example below for which statements provide
        information, and what the returned value may look like.
        Statements that are not listed will return

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2506266"></a><p class="title"><b>Example 29.37. Relevant MySQL Statements</b></p><p>
            Statements that return string values. The numbers are only
            for illustrating purpose; their values will correspond to
            the query.
          </p><pre class="programlisting">
INSERT INTO ... SELECT ...
String format: Records: 23 Duplicates: 0 Warnings: 0 
INSERT INTO ... VALUES (...),(...),(...)...
String format: Records: 37 Duplicates: 0 Warnings: 0 
LOAD DATA INFILE ...
String format: Records: 42 Deleted: 0 Skipped: 0 Warnings: 0 
ALTER TABLE
String format: Records: 60 Duplicates: 0 Warnings: 0 
UPDATE
String format: Rows matched: 65 Changed: 65 Warnings: 0

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="apis.html#apis-php-function.mysql-info" title="29.3.1.4.31. mysql_info"><code class="literal">mysql_info</code></a>
          returns a non-

          <code class="constant">FALSE</code>

          value for the INSERT ... VALUES statement only if multiple
          value lists are specified in the statement.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-stat" title="29.3.1.4.46. mysql_stat"><code class="literal">mysql_stat</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-insert-id"></a>29.3.1.4.32. <code class="literal">mysql_insert_id</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_insert_id</code>
          </p><p>
            Get the ID generated from the previous INSERT operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_insert_id</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the ID generated for an AUTO_INCREMENT column by the
        previous INSERT query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The ID generated for an AUTO_INCREMENT column by the previous
        INSERT query on success, <code class="literal">0</code> if the previous
        query does not generate an AUTO_INCREMENT value, or

        <code class="constant">FALSE</code>

        if no MySQL connection was established.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2506528"></a><p class="title"><b>Example 29.38. <a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          <a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>
          converts the return type of the native MySQL C API function
          <code class="literal">mysql_insert_id()</code> to a type of
          <code class="literal">long</code> (named <span class="type">int</span> in PHP). If
          your AUTO_INCREMENT column has a column type of BIGINT, the
          value returned by
          <a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>
          will be incorrect. Instead, use the internal MySQL SQL
          function <code class="literal">LAST_INSERT_ID()</code> in an SQL query.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Because
          <a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>
          acts on the last performed query, be sure to call
          <a href="apis.html#apis-php-function.mysql-insert-id" title="29.3.1.4.32. mysql_insert_id"><code class="literal">mysql_insert_id</code></a>
          immediately after the query that generates the value.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The value of the MySQL SQL function
          <code class="literal">LAST_INSERT_ID()</code> always contains the most
          recently generated AUTO_INCREMENT value, and is not reset
          between queries.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-info" title="29.3.1.4.31. mysql_info"><code class="literal">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-dbs"></a>29.3.1.4.33. <code class="literal">mysql_list_dbs</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_dbs</code>
          </p><p>
            List databases available on a MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_dbs</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Returns a result pointer containing the databases available from
        the current mysql daemon.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure. Use the
        <a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2506858"></a><p class="title"><b>Example 29.39. <a href="apis.html#apis-php-function.mysql-list-dbs" title="29.3.1.4.33. mysql_list_dbs"><code class="literal">mysql_list_dbs</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$db_list = mysql_list_dbs($link);

while ($row = mysql_fetch_object($db_list)) {
     echo $row-&gt;Database . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


database1
database2
database3


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_listdbs</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-db-name" title="29.3.1.4.8. mysql_db_name"><code class="literal">mysql_db_name</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-fields"></a>29.3.1.4.34. <code class="literal">mysql_list_fields</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_fields</code>
          </p><p>
            List MySQL table fields
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_fields</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">table_name</span></span>,<br>                           <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves information about the given table name.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        to issue an SQL <code class="literal">SHOW COLUMNS FROM table [LIKE
        'name']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that's being queried.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>table_name</code></em>
            </span></dt><dd><p>
                The name of the table that's being queried.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        The returned result can be used with
        <a href="apis.html#apis-php-function.mysql-field-flags" title="29.3.1.4.20. mysql_field_flags"><code class="literal">mysql_field_flags</code></a>,
        <a href="apis.html#apis-php-function.mysql-field-len" title="29.3.1.4.21. mysql_field_len"><code class="literal">mysql_field_len</code></a>,
        <a href="apis.html#apis-php-function.mysql-field-name" title="29.3.1.4.22. mysql_field_name"><code class="literal">mysql_field_name</code></a>
        and
        <a href="apis.html#apis-php-function.mysql-field-type" title="29.3.1.4.25. mysql_field_type"><code class="literal">mysql_field_type</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2507231"></a><p class="title"><b>Example 29.40. Alternate to deprecated
            <a href="apis.html#apis-php-function.mysql-list-fields" title="29.3.1.4.34. mysql_list_fields"><code class="literal">mysql_list_fields</code></a></b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SHOW COLUMNS FROM sometable");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
if (mysql_num_rows($result) &gt; 0) {
    while ($row = mysql_fetch_assoc($result)) {
        print_r($row);
    }
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [Field] =&gt; id
    [Type] =&gt; int(7)
    [Null] =&gt;  
    [Key] =&gt; PRI
    [Default] =&gt;
    [Extra] =&gt; auto_increment
)
Array
(
    [Field] =&gt; email
    [Type] =&gt; varchar(100)
    [Null] =&gt;
    [Key] =&gt;
    [Default] =&gt;
    [Extra] =&gt;
)


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_listfields</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-field-flags" title="29.3.1.4.20. mysql_field_flags"><code class="literal">mysql_field_flags</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-info" title="29.3.1.4.31. mysql_info"><code class="literal">mysql_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-processes"></a>29.3.1.4.35. <code class="literal">mysql_list_processes</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_processes</code>
          </p><p>
            List MySQL processes
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_processes</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the current MySQL server threads.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2507486"></a><p class="title"><b>Example 29.41. <a href="apis.html#apis-php-function.mysql-list-processes" title="29.3.1.4.35. mysql_list_processes"><code class="literal">mysql_list_processes</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');

$result = mysql_list_processes($link);
while ($row = mysql_fetch_assoc($result)){
    printf("%s %s %s %s %s\n", $row["Id"], $row["Host"], $row["db"],
        $row["Command"], $row["Time"]);
}
mysql_free_result($result);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


1 localhost test Processlist 0
4 localhost mysql sleep 5


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-thread-id" title="29.3.1.4.48. mysql_thread_id"><code class="literal">mysql_thread_id</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-stat" title="29.3.1.4.46. mysql_stat"><code class="literal">mysql_stat</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-list-tables"></a>29.3.1.4.36. <code class="literal">mysql_list_tables</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_list_tables</code>
          </p><p>
            List tables in a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_list_tables</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>,<br>                           <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves a list of table names from a MySQL database.
      </p><p>
        This function is deprecated. It is preferable to use
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        to issue an SQL <code class="literal">SHOW TABLES [FROM db_name] [LIKE
        'pattern']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The name of the database
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A result pointer <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        Use the
        <a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.7</td><td>This function became deprecated.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2507849"></a><p class="title"><b>Example 29.42. <a href="apis.html#apis-php-function.mysql-list-tables" title="29.3.1.4.36. mysql_list_tables"><code class="literal">mysql_list_tables</code></a>
            alternative example</b></p><pre class="programlisting">
&lt;?php
$dbname = 'mysql_dbname';

if (!mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

$sql = "SHOW TABLES FROM $dbname";
$result = mysql_query($sql);

if (!$result) {
    echo "DB Error, could not list tables\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_row($result)) {
    echo "Table: {$row[0]}\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_listtables</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-list-dbs" title="29.3.1.4.33. mysql_list_dbs"><code class="literal">mysql_list_dbs</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-num-fields"></a>29.3.1.4.37. <code class="literal">mysql_num_fields</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_num_fields</code>
          </p><p>
            Get number of fields in result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_num_fields</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Retrieves the number of fields from a query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the number of fields in the result set
        <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2508086"></a><p class="title"><b>Example 29.43. A
            <a href="apis.html#apis-php-function.mysql-num-fields" title="29.3.1.4.37. mysql_num_fields"><code class="literal">mysql_num_fields</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

/* returns 2 because id,email === two fields */
echo mysql_num_fields($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_numfields</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-field" title="29.3.1.4.16. mysql_fetch_field"><code class="literal">mysql_fetch_field</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-num-rows"></a>29.3.1.4.38. <code class="literal">mysql_num_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_num_rows</code>
          </p><p>
            Get number of rows in result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_num_rows</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>);</code><p>
        Retrieves the number of rows from a result set. This command is
        only valid for statements like SELECT or SHOW that return an
        actual result set. To retrieve the number of rows affected by a
        INSERT, UPDATE, REPLACE or DELETE query, use
        <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of rows in a result set on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2508345"></a><p class="title"><b>Example 29.44. <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM table1", $link);
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you use
          <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>,
          <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
          will not return the correct value until all the rows in the
          result set have been retrieved.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_numrows</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-pconnect"></a>29.3.1.4.39. <code class="literal">mysql_pconnect</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_pconnect</code>
          </p><p>
            Open a persistent connection to a MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_pconnect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">server</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">client_flags</span></span>);</code><p>
        Establishes a persistent connection to a MySQL server.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>
        acts very much like
        <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
        with two major differences.
      </p><p>
        First, when connecting, the function would first try to find a
        (persistent) link that's already open with the same host,
        username and password. If one is found, an identifier for it
        will be returned instead of opening a new connection.
      </p><p>
        Second, the connection to the SQL server will not be closed when
        the execution of the script ends. Instead, the link will remain
        open for future use
        (<a href="apis.html#apis-php-function.mysql-close" title="29.3.1.4.4. mysql_close"><code class="literal">mysql_close</code></a>
        will not close links established by
        <a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>).
      </p><p>
        This type of link is therefore called 'persistent'.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>server</code></em>
            </span></dt><dd><p>
                The MySQL server. It can also include a port number.
                e.g. "hostname:port" or a path to a local
                socket e.g. ":/path/to/socket" for the
                localhost.
              </p><p>
                If the PHP directive
                <a href="http://www.php.net/manual/en/ini.mysql.default-host.php" target="_top">
                mysql.default_host</a> is undefined (default), then
                the default value is 'localhost:3306'
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The username. Default value is the name of the user that
                owns the server process.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The password. Default value is an empty password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>client_flags</code></em>
            </span></dt><dd><p>
                The <em class="parameter"><code>client_flags</code></em> parameter can be
                a combination of the following constants: 128 (enable
                <code class="literal">LOAD DATA LOCAL</code> handling),

                <code class="constant">MYSQL_CLIENT_SSL</code>

                ,

                <code class="constant">MYSQL_CLIENT_COMPRESS</code>

                ,

                <code class="constant">MYSQL_CLIENT_IGNORE_SPACE</code>

                or

                <code class="constant">MYSQL_CLIENT_INTERACTIVE</code>

                .
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a MySQL persistent link identifier on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>4.3.0</td><td>Added the <em class="parameter"><code>client_flags</code></em> parameter.</td></tr><tr><td>3.0.10</td><td>Added support for ":/path/to/socket" with
                  <em class="parameter"><code>server</code></em>.</td></tr><tr><td>3.0.0</td><td>Added support for ":port" with <em class="parameter"><code>server</code></em>.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note, that these kind of links only work if you are using a
          module version of PHP. See the
          <a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">Persistent
          Database Connections</a> section for more information.
        </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          Using persistent connections can require a bit of tuning of
          your Apache and MySQL configurations to ensure that you do not
          exceed the number of connections allowed by MySQL.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You can suppress the error message on failure by prepending a
          <a href="http://www.php.net/manual/en/language.operators.errorcontrol.php" target="_top">@</a>
          to the function name.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="http://www.php.net/manual/en/features.persistent-connections.php" target="_top">Persistent
    Database Connections</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-ping"></a>29.3.1.4.40. <code class="literal">mysql_ping</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_ping</code>
          </p><p>
            Ping a server connection or reconnect if there is no
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_ping</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Checks whether or not the connection to the server is working.
        If it has gone down, an automatic reconnection is attempted.
        This function can be used by scripts that remain idle for a long
        while, to check whether or not the server has closed the
        connection and reconnect if necessary.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Since MySQL 5.0.13, automatic reconnection feature is
          disabled.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        if the connection to the server MySQL server is working,
        otherwise

        <code class="constant">FALSE</code>

        .
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2509144"></a><p class="title"><b>Example 29.45. A
            <a href="apis.html#apis-php-function.mysql-ping" title="29.3.1.4.40. mysql_ping"><code class="literal">mysql_ping</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
set_time_limit(0);

$conn = mysql_connect('localhost', 'mysqluser', 'mypass');
$db   = mysql_select_db('mydb');

/* Assuming this query will take a long time */
$result = mysql_query($sql);
if (!$result) {
    echo 'Query #1 failed, exiting.';
    exit;
}

/* Make sure the connection is still alive, if not, try to reconnect */
if (!mysql_ping($conn)) {
    echo 'Lost connection, exiting after query #1';
    exit;
}
mysql_free_result($result);

/* So the connection is still alive, let's run another query */
$result2 = mysql_query($sql2);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-thread-id" title="29.3.1.4.48. mysql_thread_id"><code class="literal">mysql_thread_id</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-list-processes" title="29.3.1.4.35. mysql_list_processes"><code class="literal">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-query"></a>29.3.1.4.41. <code class="literal">mysql_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_query</code>
          </p><p>
            Send a MySQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        sends an unique query (multiple queries are not supported) to
        the currently active database on the server that's
        associated with the specified
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                an SQL query
              </p><p>
                The query string should not end with a semicolon.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        For SELECT, SHOW, DESCRIBE, EXPLAIN and other statements
        returning resultset,
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        returns a <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        For other type of SQL statements, INSERT, UPDATE, DELETE, DROP,
        etc,
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        The returned result resource should be passed to
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>,
        and other functions for dealing with result tables, to access
        the returned data.
      </p><p>
        Use
        <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
        to find out how many rows were returned for a SELECT statement
        or
        <a href="apis.html#apis-php-function.mysql-affected-rows" title="29.3.1.4.1. mysql_affected_rows"><code class="literal">mysql_affected_rows</code></a>
        to find out how many rows were affected by a DELETE, INSERT,
        REPLACE, or UPDATE statement.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        will also fail and return

        <code class="constant">FALSE</code>

        if the user does not have permission to access the table(s)
        referenced by the query.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2509501"></a><p class="title"><b>Example 29.46. Invalid Query</b></p><p>
            The following query is syntactically invalid, so
            <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
            fails and returns

            <code class="constant">FALSE</code>

            .
          </p><pre class="programlisting">
&lt;?php
$result = mysql_query('SELECT * WHERE 1=1');
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2509534"></a><p class="title"><b>Example 29.47. Valid Query</b></p><p>
            The following query is valid, so
            <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
            returns a <span class="type">resource</span>.
          </p><pre class="programlisting">
&lt;?php
// This could be supplied by a user, for example
$firstname = 'fred';
$lastname  = 'fox';

// Formulate Query
// This is the best way to perform a SQL query
// For more examples, see mysql_real_escape_string()
$query = sprintf("SELECT firstname, lastname, address, age FROM friends WHERE firstname='%s' AND lastname='%s'",
    mysql_real_escape_string($firstname),
    mysql_real_escape_string($lastname));

// Perform Query
$result = mysql_query($query);

// Check result
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$result) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    $message .= 'Whole query: ' . $query;
    die($message);
}

// Use result
// Attempting to print $result won't allow access to information in the resource
// One of the mysql result functions must be used
// See also mysql_result(), mysql_fetch_array(), mysql_fetch_row(), etc.
while ($row = mysql_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['address'];
    echo $row['age'];
}

// Free the resources associated with the result set
// This is done automatically at the end of the script
mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-error" title="29.3.1.4.12. mysql_error"><code class="literal">mysql_error</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-result" title="29.3.1.4.43. mysql_result"><code class="literal">mysql_result</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-real-escape-string"></a>29.3.1.4.42. <code class="literal">mysql_real_escape_string</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_real_escape_string</code>
          </p><p>
            Escapes special characters in a string for use in an SQL
            statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_real_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">unescaped_string</span></span>,<br>                                <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Escapes special characters in the
        <em class="parameter"><code>unescaped_string</code></em>, taking into account the
        current character set of the connection so that it is safe to
        place it in a
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
        If binary data is to be inserted, this function must be used.
      </p><p>
        <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
        calls MySQL's library function mysql_real_escape_string,
        which prepends backslashes to the following characters:
        <code class="literal">\x00</code>, <code class="literal">\n</code>,
        <code class="literal">\r</code>, <code class="literal">\</code>,
        <code class="literal">'</code>, <code class="literal">"</code> and
        <code class="literal">\x1a</code>.
      </p><p>
        This function must always (with few exceptions) be used to make
        data safe before sending a query to MySQL.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>unescaped_string</code></em>
            </span></dt><dd><p>
                The string that is to be escaped.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the escaped string, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2509914"></a><p class="title"><b>Example 29.48. Simple
            <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
// Connect
$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')
    OR die(mysql_error());

// Query
$query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
            mysql_real_escape_string($user),
            mysql_real_escape_string($password));
?&gt;

    </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2509942"></a><p class="title"><b>Example 29.49. An example SQL Injection Attack</b></p><pre class="programlisting">
&lt;?php
// Query database to check if there are any matching users
$query = "SELECT * FROM users WHERE user='{$_POST['username']}' AND password='{$_POST['password']}'";
mysql_query($query);

// We didn't check $_POST['password'], it could be anything the user wanted! For example:
$_POST['username'] = 'aidan';
$_POST['password'] = "' OR ''='";

// This means the query sent to MySQL would be:
echo $query;
?&gt;

    </pre><p>
            The query sent to MySQL:
          </p><pre class="screen">


SELECT * FROM users WHERE user='aidan' AND password='' OR ''=''


          </pre><p>
            This would allow anyone to log in without a valid password.
          </p></div><p>
      </p><p>
        </p><div class="example"><a name="id2509979"></a><p class="title"><b>Example 29.50. A "Best Practice" query</b></p><p>
            Using
            <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
            around each variable prevents SQL Injection. This example
            demonstrates the "best practice" method for
            querying a database, independent of the
            <a href="http://www.php.net/manual/en/security.magicquotes.php" target="_top">Magic
            Quotes</a> setting.
          </p><pre class="programlisting">
&lt;?php

if (isset($_POST['product_name']) &amp;&amp; isset($_POST['product_description']) &amp;&amp; isset($_POST['user_id'])) {
    // Connect

    $link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password');

    if(!is_resource($link)) {

        echo "Failed to connect to the server\n";
        // ... log the error properly

    } else {
        
        // Reverse magic_quotes_gpc/magic_quotes_sybase effects on those vars if ON.

        if(get_magic_quotes_gpc()) {
            $product_name        = stripslashes($_POST['product_name']);
            $product_description = stripslashes($_POST['product_description']);
        } else {
            $product_name        = $_POST['product_name'];
            $product_description = $_POST['product_description'];
        }

        // Make a safe query
        $query = sprintf("INSERT INTO products (`name`, `description`, `user_id`) VALUES ('%s', '%s', %d)",
                    mysql_real_escape_string($product_name, $link),
                    mysql_real_escape_string($product_description, $link),
                    $_POST['user_id']);

        mysql_query($query, $link);

        if (mysql_affected_rows($link) &gt; 0) {
            echo "Product inserted\n";
        }
    }
} else {
    echo "Fill the form properly\n";
}
?&gt;

    </pre><p>
            The query will now execute correctly, and SQL Injection
            attacks will not work.
          </p></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          A MySQL connection is required before using
          <a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a>
          otherwise an error of level <code class="literal">E_WARNING</code> is
          generated, and

          <code class="constant">FALSE</code>

          is returned. If <em class="parameter"><code>link_identifier</code></em>
          isn't defined, the last MySQL connection is used.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If
          <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a>
          is enabled, first apply <code class="literal">stripslashes</code> to
          the data. Using this function on data which has already been
          escaped will escape the data twice.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If this function is not used to escape data, the query is
          vulnerable to
          <a href="http://www.php.net/manual/en/security.database.sql-injection.php" target="_top">SQL
          Injection Attacks</a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a href="apis.html#apis-php-function.mysql-real-escape-string" title="29.3.1.4.42. mysql_real_escape_string"><code class="literal">mysql_real_escape_string</code></a> does not escape
    <code class="literal">%</code> and <code class="literal">_</code>. These are wildcards in
    MySQL if combined with <code class="literal">LIKE</code>, <code class="literal">GRANT</code>,
    or <code class="literal">REVOKE</code>.
   </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-client-encoding" title="29.3.1.4.3. mysql_client_encoding"><code class="literal">mysql_client_encoding</code></a>

          </td></tr><tr><td><code class="literal">addslashes</code>

          </td></tr><tr><td><code class="literal">stripslashes</code>

          </td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-gpc.php" target="_top">magic_quotes_gpc</a> directive</td></tr><tr><td>The <a href="http://www.php.net/manual/en/ini.magic-quotes-runtime.php" target="_top">magic_quotes_runtime</a> directive</td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-result"></a>29.3.1.4.43. <code class="literal">mysql_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_result</code>
          </p><p>
            Get result data
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_result</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">row</span></span>,<br>                    <span class="methodparam"><span class="type">mixed </span><span class="parameter">field</span></span>);</code><p>
        Retrieves the contents of one cell from a MySQL result set.
      </p><p>
        When working on large result sets, you should consider using one
        of the functions that fetch an entire row (specified below). As
        these functions return the contents of multiple cells in one
        function call, they're MUCH quicker than
        <a href="apis.html#apis-php-function.mysql-result" title="29.3.1.4.43. mysql_result"><code class="literal">mysql_result</code></a>.
        Also, note that specifying a numeric offset for the field
        argument is much quicker than specifying a fieldname or
        tablename.fieldname argument.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                The result <span class="type">resource</span> that is being
                evaluated. This result comes from a call to
                <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>row</code></em>
            </span></dt><dd><p>
                The row number from the result that's being
                retrieved. Row numbers start at <code class="literal">0</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>field</code></em>
            </span></dt><dd><p>
                The name or offset of the field being retrieved.
              </p><p>
                It can be the field's offset, the field's
                name, or the field's table dot field name
                (tablename.fieldname). If the column name has been
                aliased ('select foo as bar from...'), use the
                alias instead of the column name. If undefined, the
                first field is retrieved.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The contents of one cell from a MySQL result set on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2510462"></a><p class="title"><b>Example 29.51. <a href="apis.html#apis-php-function.mysql-result" title="29.3.1.4.43. mysql_result"><code class="literal">mysql_result</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$result = mysql_query('SELECT name FROM work.employee');
if (!$result) {
    die('Could not query:' . mysql_error());
}
echo mysql_result($result, 2); // outputs third employee's name

mysql_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Calls to
          <a href="apis.html#apis-php-function.mysql-result" title="29.3.1.4.43. mysql_result"><code class="literal">mysql_result</code></a>
          should not be mixed with calls to other functions that deal
          with the result set.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-fetch-row" title="29.3.1.4.19. mysql_fetch_row"><code class="literal">mysql_fetch_row</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-assoc" title="29.3.1.4.15. mysql_fetch_assoc"><code class="literal">mysql_fetch_assoc</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-fetch-object" title="29.3.1.4.18. mysql_fetch_object"><code class="literal">mysql_fetch_object</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-select-db"></a>29.3.1.4.44. <code class="literal">mysql_select_db</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_select_db</code>
          </p><p>
            Select a MySQL database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">database_name</span></span>,<br>                     <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Sets the current active database on the server that's
        associated with the specified link identifier. Every subsequent
        call to
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        will be made on the active database.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>database_name</code></em>
            </span></dt><dd><p>
                The name of the database that is to be selected.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2510773"></a><p class="title"><b>Example 29.52. <a href="apis.html#apis-php-function.mysql-select-db" title="29.3.1.4.44. mysql_select_db"><code class="literal">mysql_select_db</code></a>
            example</b></p><pre class="programlisting">
&lt;?php

$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For backward compatibility, the following deprecated alias may
          be used: <code class="literal">mysql_selectdb</code>
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-pconnect" title="29.3.1.4.39. mysql_pconnect"><code class="literal">mysql_pconnect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-set-charset"></a>29.3.1.4.45. <code class="literal">mysql_set_charset</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_set_charset</code>
          </p><p>
            Sets the client character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysql_set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>,<br>                       <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Sets the default character set for the current connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                A valid character set name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function requires MySQL 5.0.7 or later.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This is the preferred way to change the charset. Using
          <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
          to execute <code class="literal">SET NAMES ..</code> is not reccomended.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-client-encoding" title="29.3.1.4.3. mysql_client_encoding"><code class="literal">mysql_client_encoding</code></a>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/refman/5.1/en/charset-charsets.html" target="_top">List of character sets that MySQL supports</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-stat"></a>29.3.1.4.46. <code class="literal">mysql_stat</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_stat</code>
          </p><p>
            Get current system status
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_stat</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-stat" title="29.3.1.4.46. mysql_stat"><code class="literal">mysql_stat</code></a>
        returns the current server status.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string with the status for uptime, threads, queries,
        open tables, flush tables and queries per second. For a complete
        list of other status variables, you have to use the
        <code class="literal">SHOW STATUS</code> SQL command. If
        <em class="parameter"><code>link_identifier</code></em> is invalid,

        <code class="constant">NULL</code>

        is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2511304"></a><p class="title"><b>Example 29.53. <a href="apis.html#apis-php-function.mysql-stat" title="29.3.1.4.46. mysql_stat"><code class="literal">mysql_stat</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link   = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$status = explode('  ', mysql_stat($link));
print_r($status);
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


Array
(
    [0] =&gt; Uptime: 5380
    [1] =&gt; Threads: 2
    [2] =&gt; Questions: 1321299
    [3] =&gt; Slow queries: 0
    [4] =&gt; Opens: 26
    [5] =&gt; Flush tables: 1
    [6] =&gt; Open tables: 17
    [7] =&gt; Queries per second avg: 245.595
)


          </pre></div><p>
      </p><p>
        </p><div class="example"><a name="id2511340"></a><p class="title"><b>Example 29.54. Alternative
            <a href="apis.html#apis-php-function.mysql-stat" title="29.3.1.4.46. mysql_stat"><code class="literal">mysql_stat</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link   = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$result = mysql_query('SHOW VARIABLES', $link);
while ($row = mysql_fetch_assoc($result)) {
    echo $row['Variable_name'] . ' = ' . $row['Value'] . "\n";
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


back_log = 50
basedir = /usr/local/
bdb_cache_size = 8388600
bdb_log_buffer_size = 32768
bdb_home = /var/db/mysql/
bdb_max_lock = 10000
bdb_logdir = 
bdb_shared_data = OFF
bdb_tmpdir = /var/tmp/
...


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-get-server-info" title="29.3.1.4.30. mysql_get_server_info"><code class="literal">mysql_get_server_info</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-list-processes" title="29.3.1.4.35. mysql_list_processes"><code class="literal">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-tablename"></a>29.3.1.4.47. <code class="literal">mysql_tablename</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_tablename</code>
          </p><p>
            Get table name of field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysql_tablename</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">result</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">i</span></span>);</code><p>
        Retrieves the table name from a <em class="parameter"><code>result</code></em>.
      </p><p>
        This function deprecated. It is preferable to use
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        to issue an SQL <code class="literal">SHOW TABLES [FROM db_name] [LIKE
        'pattern']</code> statement instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>result</code></em>
            </span></dt><dd><p>
                A result pointer <span class="type">resource</span> that's
                returned from
                <a href="apis.html#apis-php-function.mysql-list-tables" title="29.3.1.4.36. mysql_list_tables"><code class="literal">mysql_list_tables</code></a>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>i</code></em>
            </span></dt><dd><p>
                The integer index (row/table number)
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The name of the table on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        Use the
        <a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>
        function to traverse this result pointer, or any function for
        result tables, such as
        <a href="apis.html#apis-php-function.mysql-fetch-array" title="29.3.1.4.14. mysql_fetch_array"><code class="literal">mysql_fetch_array</code></a>.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2511639"></a><p class="title"><b>Example 29.55. <a href="apis.html#apis-php-function.mysql-tablename" title="29.3.1.4.47. mysql_tablename"><code class="literal">mysql_tablename</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
mysql_connect("localhost", "mysql_user", "mysql_password");
$result = mysql_list_tables("mydb");
$num_rows = mysql_num_rows($result);
for ($i = 0; $i &lt; $num_rows; $i++) {
    echo "Table: ", mysql_tablename($result, $i), "\n";
}

mysql_free_result($result);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The
          <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
          function may be used to determine the number of tables in the
          result pointer.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-list-tables" title="29.3.1.4.36. mysql_list_tables"><code class="literal">mysql_list_tables</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-field-table" title="29.3.1.4.24. mysql_field_table"><code class="literal">mysql_field_table</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-db-name" title="29.3.1.4.8. mysql_db_name"><code class="literal">mysql_db_name</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-thread-id"></a>29.3.1.4.48. <code class="literal">mysql_thread_id</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_thread_id</code>
          </p><p>
            Return the current thread ID
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysql_thread_id</span>(<span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        Retrieves the current thread ID. If the connection is lost, and
        a reconnect with
        <a href="apis.html#apis-php-function.mysql-ping" title="29.3.1.4.40. mysql_ping"><code class="literal">mysql_ping</code></a>
        is executed, the thread ID will change. This means only retrieve
        the thread ID when needed.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The thread ID on success, or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2511899"></a><p class="title"><b>Example 29.56. <a href="apis.html#apis-php-function.mysql-thread-id" title="29.3.1.4.48. mysql_thread_id"><code class="literal">mysql_thread_id</code></a>
            example</b></p><pre class="programlisting">
&lt;?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
$thread_id = mysql_thread_id($link);
if ($thread_id){
    printf("current thread id is %d\n", $thread_id);
}
?&gt;

    </pre><p>
            The above example will output something similar to:
          </p><pre class="screen">


current thread id is 73


          </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-ping" title="29.3.1.4.40. mysql_ping"><code class="literal">mysql_ping</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-function.mysql-list-processes" title="29.3.1.4.35. mysql_list_processes"><code class="literal">mysql_list_processes</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysql-unbuffered-query"></a>29.3.1.4.49. <code class="literal">mysql_unbuffered_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysql_unbuffered_query</code>
          </p><p>
            Send an SQL query to MySQL, without fetching and buffering
            the result rows
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">resource </span><span class="methodname">mysql_unbuffered_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                                <span class="methodparam"><span class="type">resource </span><span class="parameter">link_identifier</span></span>);</code><p>
        <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>
        sends an SQL query <em class="parameter"><code>query</code></em> to MySQL, without
        fetching and buffering the result rows automatically, as
        <a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>
        does. On the one hand, this saves a considerable amount of
        memory with SQL queries that produce large result sets. On the
        other hand, you can start working on the result set immediately
        after the first row has been retrieved: you don't have to
        wait until the complete SQL query has been performed. When using
        multiple DB-connects, you have to specify the optional parameter
        <em class="parameter"><code>link_identifier</code></em>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                an SQL query
              </p></dd><dt><span class="term">
              <em class="parameter"><code> link_identifier</code></em>
            </span></dt><dd><p>
                The MySQL connection. If the link identifier is not
                specified, the last link opened by
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                is assumed. If no such link is found, it will try to
                create one as if
                <a href="apis.html#apis-php-function.mysql-connect" title="29.3.1.4.5. mysql_connect"><code class="literal">mysql_connect</code></a>
                was called with no arguments. If by chance no connection
                is found or established, an

                <code class="constant">E_WARNING</code>

                level error is generated.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        For SELECT, SHOW, DESCRIBE or EXPLAIN statements,
        <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>
        returns a <span class="type">resource</span> on success, or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        For other type of SQL statements, UPDATE, DELETE, DROP, etc,
        <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>
        returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on error.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The benefits of
          <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>
          come at a cost: You cannot use
          <a href="apis.html#apis-php-function.mysql-num-rows" title="29.3.1.4.38. mysql_num_rows"><code class="literal">mysql_num_rows</code></a>
          and
          <a href="apis.html#apis-php-function.mysql-data-seek" title="29.3.1.4.7. mysql_data_seek"><code class="literal">mysql_data_seek</code></a>
          on a result set returned from
          <a href="apis.html#apis-php-function.mysql-unbuffered-query" title="29.3.1.4.49. mysql_unbuffered_query"><code class="literal">mysql_unbuffered_query</code></a>.
          You also have to fetch all result rows from an unbuffered SQL
          query, before you can send a new SQL query to MySQL.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-function.mysql-query" title="29.3.1.4.41. mysql_query"><code class="literal">mysql_query</code></a>

          </td></tr></table><p>
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-mysqli"></a>29.3.2. MySQL Improved Extension (<code class="literal">Mysqli</code>)</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli.examples">29.3.2.1. Examples</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.setup">29.3.2.2. Installing/Configuring</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.constants">29.3.2.3. Predefined Constants</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-class.mysqli">29.3.2.4. The MySQLi class</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-class.mysqli-stmt">29.3.2.5. The MySQLi_STMT class</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-class.mysqli-result">29.3.2.6. The MySQLi_Result class</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-class.mysqli-driver">29.3.2.7. The MySQLi_Driver class</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-ref.mysqli">29.3.2.8. Aliases and deprecated Mysqli Functions</a></span></dt></dl></div><p>
    <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    The mysqli extension allows you to access the functionality provided
    by MySQL 4.1 and above. More information about the MySQL Database
    server can be found at
    <a href="http://www.mysql.com/" target="_top">http://www.mysql.com/</a>
  </p><p>
    Documentation for MySQL can be found at
    <a href="http://dev.mysql.com/doc/" target="_top">http://dev.mysql.com/doc/</a>.
  </p><p>
    Parts of this documentation included from MySQL manual with
    permissions of MySQL AB.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.examples"></a>29.3.2.1. Examples</h4></div></div></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      All Examples in the MySQLI documentation use the world database
      from MySQL AB. The world database can be found at
      <a href="http://dev.mysql.com/get/Downloads/Manual/world.sql.gz/from/pick" target="_top">http://dev.mysql.com/get/Downloads/Manual/world.sql.gz/from/pick</a>
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.setup"></a>29.3.2.2. Installing/Configuring</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli.requirements">29.3.2.2.1. Requirements</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.installation">29.3.2.2.2. Installation</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.configuration">29.3.2.2.3. Runtime Configuration</a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.resources">29.3.2.2.4. Resource Types</a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.requirements"></a>29.3.2.2.1. Requirements</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
        In order to have these functions available, you must compile PHP
        with support for the mysqli extension.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The mysqli extension is designed to work with the version
          4.1.3 or above of MySQL. For previous versions, please see the
          <a href="apis.html#apis-php-mysql" title="29.3.1. MySQL">MySQL</a> extension
          documentation.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.installation"></a>29.3.2.2.2. Installation</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli.installation.windows">29.3.2.2.2.1. Installation on Windows Systems</a></span></dt></dl></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p><a name="apis-php-mysqli.configure"></a>
        To install the mysqli extension for PHP, use the
        <code class="option">--with-mysqli=mysql_config_path/mysql_config</code>
        configuration option where <code class="literal">mysql_config_path</code>
        represents the location of the <code class="literal">mysql_config</code>
        program that comes with MySQL versions greater than 4.1.
      </p><p>
        If you would like to install the mysql extension along with the
        mysqli extension you have to use the same client library to
        avoid any conflicts.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="apis-php-mysqli.installation.windows"></a>29.3.2.2.2.1. Installation on Windows Systems</h6></div></div></div><p>
          <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
          PHP Documentation Group.</a>
        </p><p>
          MySQLi is not enabled by default, so the
          <code class="filename">php_mysqli.dll</code> DLL must be enabled inside
          of <code class="filename">php.ini</code>. Also, PHP needs access to the
          MySQL client library. A file named
          <code class="filename">libmysql.dll</code> is included in the Windows
          PHP distribution and in order for PHP to talk to MySQL this
          file needs to be available to the Windows systems
          <code class="envar">PATH</code>. See the FAQ titled
          "<a href="http://www.php.net/manual/en/faq.installation.addtopath.php" target="_top">How
          do I add my PHP directory to the PATH on Windows</a>"
          for information on how to do this. Although copying
          <code class="filename">libmysql.dll</code> to the Windows system
          directory also works (because the system directory is by
          default in the system's <code class="envar">PATH</code>), it's
          not recommended.
        </p><p>
          As with enabling any PHP extension (such as
          <code class="filename">php_mysqli.dll</code>), the PHP directive
          <a href="http://www.php.net/manual/en/ini.extension-dir.php" target="_top">extension_dir</a>
          should be set to the directory where the PHP extensions are
          located. See also the
          <a href="http://www.php.net/manual/en/install.windows.manual.php" target="_top">Manual
          Windows Installation Instructions</a>. An example
          extension_dir value for PHP 5 is <code class="literal">c:\php\ext</code>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If when starting the web server an error similar to the
            following occurs: <code class="literal">"Unable to load dynamic
            library './php_mysqli.dll'"</code>, this
            is because <code class="filename">php_mysqli.dll</code> and/or
            <code class="filename">libmysql.dll</code> cannot be found by the
            system.
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.configuration"></a>29.3.2.2.3. Runtime Configuration</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
The behaviour of these functions is affected by settings in <code class="filename">php.ini</code>.
</p><p>
        </p><div class="table"><a name="id2512617"></a><p class="title"><b>Table 29.4. MySQLi Configuration Options</b></p><table summary="MySQLi Configuration Options" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name</th><th>Default</th><th>Changeable</th><th>Changelog</th></tr></thead><tbody><tr><td>mysqli.max_links</td><td>"-1"</td><td>PHP_INI_SYSTEM</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_port</td><td>"3306"</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_socket</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_host</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_user</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr><tr><td>mysqli.default_pw</td><td>NULL</td><td>PHP_INI_ALL</td><td>Available since PHP 5.0.0.</td></tr></tbody></table></div><p>
      </p><p>
        For further details and definitions of the above PHP_INI_*
        constants, see the chapter on
        <a href="http://www.php.net/manual/en/configuration.changes.php" target="_top">configuration
        changes</a>.
      </p><p>
        Here's a short explanation of the configuration directives.
      </p><p>
        </p><div class="variablelist"><dl><dt><a name="apis-php-ini.mysqli.max-links"></a><span class="term">
              <em class="parameter"><code>mysqli.max_links</code></em>
              <span class="type">integer</span>
            </span></dt><dd><p>
                The maximum number of MySQL connections per process.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-port"></a><span class="term">
              <em class="parameter"><code>mysqli.default_port</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default TCP port number to use when connecting to
                the database server if no other port is specified. If no
                default is specified, the port will be obtained from the
                <code class="literal">MYSQL_TCP_PORT</code> environment variable,
                the <code class="literal">mysql-tcp</code> entry in
                <code class="filename">/etc/services</code> or the compile-time
                <code class="literal">MYSQL_PORT</code> constant, in that order.
                Win32 will only use the <code class="literal">MYSQL_PORT</code>
                constant.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-socket"></a><span class="term">
              <em class="parameter"><code>mysqli.default_socket</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default socket name to use when connecting to a
                local database server if no other socket name is
                specified.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-host"></a><span class="term">
              <em class="parameter"><code>mysqli.default_host</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default server host to use when connecting to the
                database server if no other host is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-user"></a><span class="term">
              <em class="parameter"><code>mysqli.default_user</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default user name to use when connecting to the
                database server if no other name is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd><dt><a name="apis-php-ini.mysqli.default-pw"></a><span class="term">
              <em class="parameter"><code>mysqli.default_pw</code></em>
              <span class="type">string</span>
            </span></dt><dd><p>
                The default password to use when connecting to the
                database server if no other password is specified.
                Doesn't apply in
                <a href="http://www.php.net/manual/en/ini.safe-mode.php" target="_top">safe
                mode</a>.
              </p></dd></dl></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.resources"></a>29.3.2.2.4. Resource Types</h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><p>
        This extension has no resource types defined.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-mysqli.constants"></a>29.3.2.3. Predefined Constants</h4></div></div></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="variablelist"><dl><dt><a name="apis-php-constantmysqli-read-default-group"></a><span class="term">
          <code class="constant">MYSQLI_READ_DEFAULT_GROUP</code>
        </span></dt><dd><p>
            Read options from the named group from
            <code class="filename">my.cnf</code> or the file specified with

            <code class="constant">MYSQLI_READ_DEFAULT_FILE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-read-default-file"></a><span class="term">
          <code class="constant">MYSQLI_READ_DEFAULT_FILE</code>
        </span></dt><dd><p>
            Read options from the named option file instead of from
            <code class="filename">my.cnf</code>
          </p></dd><dt><a name="apis-php-constantmysqli-opt-connect-timeout"></a><span class="term">
          <code class="constant">MYSQLI_OPT_CONNECT_TIMEOUT</code>
        </span></dt><dd><p>
            Connect timeout in seconds
          </p></dd><dt><a name="apis-php-constantmysqli-opt-local-infile"></a><span class="term">
          <code class="constant">MYSQLI_OPT_LOCAL_INFILE</code>
        </span></dt><dd><p>
            Enables command <code class="literal">LOAD LOCAL INFILE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-init-command"></a><span class="term">
          <code class="constant">MYSQLI_INIT_COMMAND</code>
        </span></dt><dd><p>
            Command to execute when connecting to MySQL server. Will
            automatically be re-executed when reconnecting.
          </p></dd><dt><a name="apis-php-constantmysqli-client-ssl"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_SSL</code>
        </span></dt><dd><p>
            Use SSL (encrypted protocol). This option should not be set
            by application programs; it is set internally in the MySQL
            client library
          </p></dd><dt><a name="apis-php-constantmysqli-client-compress"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_COMPRESS</code>
        </span></dt><dd><p>
            Use compression protocol
          </p></dd><dt><a name="apis-php-constantmysqli-client-interactive"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_INTERACTIVE</code>
        </span></dt><dd><p>
            Allow interactive_timeout seconds (instead of wait_timeout
            seconds) of inactivity before closing the connection. The
            client's session wait_timeout variable will be set to
            the value of the session interactive_timeout variable.
          </p></dd><dt><a name="apis-php-constantmysqli-client-ignore-space"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_IGNORE_SPACE</code>
        </span></dt><dd><p>
            Allow spaces after function names. Makes all functions names
            reserved words.
          </p></dd><dt><a name="apis-php-constantmysqli-client-no-schema"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_NO_SCHEMA</code>
        </span></dt><dd><p>
            Don't allow the
            <code class="literal">db_name.tbl_name.col_name</code> syntax.
          </p></dd><dt><a name="apis-php-constantmysqli-client-multi-queries"></a><span class="term">
          <code class="constant">MYSQLI_CLIENT_MULTI_QUERIES</code>
        </span></dt><dd><p>
            Allows multiple semicolon-delimited queries in a single
            <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>
            call.
          </p></dd><dt><a name="apis-php-constantmysqli-store-result"></a><span class="term">
          <code class="constant">MYSQLI_STORE_RESULT</code>
        </span></dt><dd><p>
            For using buffered resultsets
          </p></dd><dt><a name="apis-php-constantmysqli-use-result"></a><span class="term">
          <code class="constant">MYSQLI_USE_RESULT</code>
        </span></dt><dd><p>
            For using unbuffered resultsets
          </p></dd><dt><a name="apis-php-constantmysqli-assoc"></a><span class="term">
          <code class="constant">MYSQLI_ASSOC</code>
        </span></dt><dd><p>
            Columns are returned into the array having the fieldname as
            the array index.
          </p></dd><dt><a name="apis-php-constantmysqli-num"></a><span class="term">
          <code class="constant">MYSQLI_NUM</code>
        </span></dt><dd><p>
            Columns are returned into the array having an enumerated
            index.
          </p></dd><dt><a name="apis-php-constantmysqli-both"></a><span class="term">
          <code class="constant">MYSQLI_BOTH</code>
        </span></dt><dd><p>
            Columns are returned into the array having both a numerical
            index and the fieldname as the associative index.
          </p></dd><dt><a name="apis-php-constantmysqli-not-null-flag"></a><span class="term">
          <code class="constant">MYSQLI_NOT_NULL_FLAG</code>
        </span></dt><dd><p>
            Indicates that a field is defined as <code class="literal">NOT
            NULL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-pri-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_PRI_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of a primary index
          </p></dd><dt><a name="apis-php-constantmysqli-unique-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_UNIQUE_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of a unique index.
          </p></dd><dt><a name="apis-php-constantmysqli-multiple-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_MULTIPLE_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of an index.
          </p></dd><dt><a name="apis-php-constantmysqli-blob-flag"></a><span class="term">
          <code class="constant">MYSQLI_BLOB_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-unsigned-flag"></a><span class="term">
          <code class="constant">MYSQLI_UNSIGNED_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">UNSIGNED</code>
          </p></dd><dt><a name="apis-php-constantmysqli-zerofill-flag"></a><span class="term">
          <code class="constant">MYSQLI_ZEROFILL_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">ZEROFILL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-auto-increment-flag"></a><span class="term">
          <code class="constant">MYSQLI_AUTO_INCREMENT_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">AUTO_INCREMENT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-timestamp-flag"></a><span class="term">
          <code class="constant">MYSQLI_TIMESTAMP_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIMESTAMP</code>
          </p></dd><dt><a name="apis-php-constantmysqli-set-flag"></a><span class="term">
          <code class="constant">MYSQLI_SET_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">SET</code>
          </p></dd><dt><a name="apis-php-constantmysqli-num-flag"></a><span class="term">
          <code class="constant">MYSQLI_NUM_FLAG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">NUMERIC</code>
          </p></dd><dt><a name="apis-php-constantmysqli-part-key-flag"></a><span class="term">
          <code class="constant">MYSQLI_PART_KEY_FLAG</code>
        </span></dt><dd><p>
            Field is part of an multi-index
          </p></dd><dt><a name="apis-php-constantmysqli-group-flag"></a><span class="term">
          <code class="constant">MYSQLI_GROUP_FLAG</code>
        </span></dt><dd><p>
            Field is part of <code class="literal">GROUP BY</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-decimal"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DECIMAL</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DECIMAL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-newdecimal"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NEWDECIMAL</code>
        </span></dt><dd><p>
            Precision math <code class="literal">DECIMAL</code> or
            <code class="literal">NUMERIC</code> field (MySQL 5.0.3 and up)
          </p></dd><dt><a name="apis-php-constantmysqli-type-bit"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_BIT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BIT</code> (MySQL 5.0.3 and
            up)
          </p></dd><dt><a name="apis-php-constantmysqli-type-tiny"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TINY</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TINYINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-short"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_SHORT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">INT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-long"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">INT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-fload"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_FLOAT</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">FLOAT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-double"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DOUBLE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DOUBLE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-null"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NULL</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DEFAULT NULL</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-timestamp"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TIMESTAMP</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIMESTAMP</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-longlong"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONGLONG</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BIGINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-int24"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_INT24</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">MEDIUMINT</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-date"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DATE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-time"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TIME</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TIME</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-datetime"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_DATETIME</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATETIME</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-year"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_YEAR</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">YEAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-newdate"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_NEWDATE</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">DATE</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-enum"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_ENUM</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">ENUM</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-set"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_SET</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">SET</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-tiny-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_TINY_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">TINYBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-medium-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_MEDIUM_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">MEDIUMBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-long-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_LONG_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">LONGBLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-blob"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_BLOB</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">BLOB</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-string"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_VAR_STRING</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">VARCHAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-char"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_STRING</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">CHAR</code>
          </p></dd><dt><a name="apis-php-constantmysqli-type-geometry"></a><span class="term">
          <code class="constant">MYSQLI_TYPE_GEOMETRY</code>
        </span></dt><dd><p>
            Field is defined as <code class="literal">GEOMETRY</code>
          </p></dd><dt><a name="apis-php-constantmysqli-need-data"></a><span class="term">
          <code class="constant">MYSQLI_NEED_DATA</code>
        </span></dt><dd><p>
            More data available for bind variable
          </p></dd><dt><a name="apis-php-constantmysqli-no-data"></a><span class="term">
          <code class="constant">MYSQLI_NO_DATA</code>
        </span></dt><dd><p>
            No more data available for bind variable
          </p></dd><dt><a name="apis-php-constantmysqli-data-truncated"></a><span class="term">
          <code class="constant">MYSQLI_DATA_TRUNCATED</code>
        </span></dt><dd><p>
            Data truncation occurred. Available since PHP 5.1.0 and
            MySQL 5.0.5.
          </p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli"></a>29.3.2.4. The MySQLi class</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli.affected-rows">29.3.2.4.1. <code class="literal">mysqli-&gt;affected_rows</code>,
        <code class="literal">mysqli_affected_rows</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.autocommit">29.3.2.4.2. <code class="literal">mysqli::autocommit</code>,
        <code class="literal">mysqli_autocommit</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.change-user">29.3.2.4.3. <code class="literal">mysqli::change_user</code>,
        <code class="literal">mysqli_change_user</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.character-set-name">29.3.2.4.4. <code class="literal">mysqli::character_set_name</code>,
        <code class="literal">mysqli_character_set_name</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.close">29.3.2.4.5. <code class="literal">mysqli::close</code>, <code class="literal">mysqli_close</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.commit">29.3.2.4.6. <code class="literal">mysqli::commit</code>, <code class="literal">mysqli_commit</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.connect-errno">29.3.2.4.7. <code class="literal">mysqli-&gt;connect_errno</code>,
        <code class="literal">mysqli_connect_errno</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.connect-error">29.3.2.4.8. <code class="literal">mysqli-&gt;connect_error</code>,
        <code class="literal">mysqli_connect_error</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.connect">29.3.2.4.9. <code class="literal">mysqli::__construct</code>,
        <code class="literal">mysqli_connect</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.debug">29.3.2.4.10. <code class="literal">mysqli::debug</code>, <code class="literal">mysqli_debug</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.dump-debug-info">29.3.2.4.11. <code class="literal">mysqli::dump_debug_info</code>,
        <code class="literal">mysqli_dump_debug_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.errno">29.3.2.4.12. <code class="literal">mysqli-&gt;errno</code>, <code class="literal">mysqli_errno</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.error">29.3.2.4.13. <code class="literal">mysqli-&gt;error</code>, <code class="literal">mysqli_error</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.field-count">29.3.2.4.14. <code class="literal">mysqli-&gt;field_count</code>,
        <code class="literal">mysqli_field_count</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-charset">29.3.2.4.15. <code class="literal">mysqli::get_charset</code>,
        <code class="literal">mysqli_get_charset</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-client-info">29.3.2.4.16. <code class="literal">mysqli::get_client_info</code>,
        <code class="literal">mysqli_get_client_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-client-version">29.3.2.4.17. <code class="literal">mysqli::get_client_version</code>,
        <code class="literal">mysqli_get_client_version</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-host-info">29.3.2.4.18. <code class="literal">mysqli-&gt;host_info</code>,
        <code class="literal">mysqli_get_host_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-proto-info">29.3.2.4.19. <code class="literal">mysqli-&gt;protocol_version</code>,
        <code class="literal">mysqli_get_proto_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-server-info">29.3.2.4.20. <code class="literal">mysqli-&gt;server_info</code>,
        <code class="literal">mysqli_get_server_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-server-version">29.3.2.4.21. <code class="literal">mysqli-&gt;server_version</code>,
        <code class="literal">mysqli_get_server_version</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.get-warnings">29.3.2.4.22. <code class="literal">mysqli::get_warnings</code>,
        <code class="literal">mysqli_get_warnings</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.info">29.3.2.4.23. <code class="literal">mysqli-&gt;info</code>, <code class="literal">mysqli_info</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.init">29.3.2.4.24. <code class="literal">mysqli::init</code>, <code class="literal">mysqli_init</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.insert-id">29.3.2.4.25. <code class="literal">mysqli-&gt;insert_id</code>,
        <code class="literal">mysqli_insert_id</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.kill">29.3.2.4.26. <code class="literal">mysqli::kill</code>, <code class="literal">mysqli_kill</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.more-results">29.3.2.4.27. <code class="literal">mysqli::more_results</code>,
        <code class="literal">mysqli_more_results</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.multi-query">29.3.2.4.28. <code class="literal">mysqli::multi_query</code>,
        <code class="literal">mysqli_multi_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.next-result">29.3.2.4.29. <code class="literal">mysqli::next_result</code>,
        <code class="literal">mysqli_next_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.options">29.3.2.4.30. <code class="literal">mysqli::options</code>, <code class="literal">mysqli_options</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.ping">29.3.2.4.31. <code class="literal">mysqli::ping</code>, <code class="literal">mysqli_ping</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.prepare">29.3.2.4.32. <code class="literal">mysqli::prepare</code>, <code class="literal">mysqli_prepare</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.query">29.3.2.4.33. <code class="literal">mysqli::query</code>, <code class="literal">mysqli_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.real-connect">29.3.2.4.34. <code class="literal">mysqli::real_connect</code>,
        <code class="literal">mysqli_real_connect</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.real-escape-string">29.3.2.4.35. <code class="literal">mysqli::real_escape_string</code>,
        <code class="literal">mysqli_real_escape_string</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.real-query">29.3.2.4.36. <code class="literal">mysqli::real_query</code>,
        <code class="literal">mysqli_real_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.rollback">29.3.2.4.37. <code class="literal">mysqli::rollback</code>, <code class="literal">mysqli_rollback</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.select-db">29.3.2.4.38. <code class="literal">mysqli::select_db</code>,
        <code class="literal">mysqli_select_db</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.set-charset">29.3.2.4.39. <code class="literal">mysqli::set_charset</code>,
        <code class="literal">mysqli_set_charset</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.set-local-infile-default">29.3.2.4.40. <code class="literal">mysqli::set_local_infile_default</code>,
        <code class="literal">mysqli_set_local_infile_default</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.set-local-infile-handler">29.3.2.4.41. <code class="literal">mysqli::set_local_infile_handler</code>,
        <code class="literal">mysqli_set_local_infile_handler</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.sqlstate">29.3.2.4.42. <code class="literal">mysqli-&gt;sqlstate</code>,
        <code class="literal">mysqli_sqlstate</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.ssl-set">29.3.2.4.43. <code class="literal">mysqli::ssl_set</code>, <code class="literal">mysqli_ssl_set</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.stat">29.3.2.4.44. <code class="literal">mysqli::stat</code>, <code class="literal">mysqli_stat</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.stmt-init">29.3.2.4.45. <code class="literal">mysqli::stmt_init</code>,
        <code class="literal">mysqli_stmt_init</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.store-result">29.3.2.4.46. <code class="literal">mysqli::store_result</code>,
        <code class="literal">mysqli_store_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.thread-id">29.3.2.4.47. <code class="literal">mysqli::thread_id</code>,
        <code class="literal">mysqli_thread_id</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.thread-safe">29.3.2.4.48. <code class="literal">mysqli::thread_safe</code>,
        <code class="literal">mysqli_thread_safe</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.use-result">29.3.2.4.49. <code class="literal">mysqli::use_result</code>,
        <code class="literal">mysqli_use_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli.warning-count">29.3.2.4.50. <code class="literal">mysqli::warning_count</code>,
        <code class="literal">mysqli_warning_count</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents a connection between PHP and a MySQL database.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">host_info </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">protocol_version </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">server_info </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">server_version </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">info </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">thread_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">warning_count </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_affected_rows</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::autocommit</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::character_set_name</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::close</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::commit</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_connect_errno</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_connect_error</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli </span><span class="methodname">mysqli_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                        <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::dump_debug_info</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_errno</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_error</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_field_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli::get_charset</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::get_client_info</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli::get_client_version</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_get_host_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_get_proto_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_get_server_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_get_server_version</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli::get_warnings</span>();</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mysqli </span><span class="methodname">init</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_insert_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::kill</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::more_results</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::multi_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::next_result</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::options</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                       <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::ping</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli::query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::real_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">real_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::rollback</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_set_local_infile_default</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                       <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_sqlstate</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli::ssl_set</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli::stat</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">stmt_init</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">store_result</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_thread_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_thread_safe</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">use_result</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_warning_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.affected-rows"></a>29.3.2.4.1. <code class="literal">mysqli-&gt;affected_rows</code>,
        <code class="literal">mysqli_affected_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;affected_rows</code>
          </p><p>
            <code class="literal">mysqli_affected_rows</code>
          </p><p>
            Gets the number of affected rows in a previous MySQL
            operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_affected_rows</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of rows affected by the last
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
        <code class="literal">REPLACE</code> or <code class="literal">DELETE</code> query.
      </p><p>
        For SELECT statements <code class="literal">mysqli_affected_rows</code>
        works like <code class="literal">mysqli_num_rows</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records where
        updated for an UPDATE statement, no rows matched the
        <code class="literal">WHERE</code> clause in the query or that no query
        has yet been executed. -1 indicates that the query returned an
        error.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of affected rows is greater than maximal int
          value, the number of affected rows will be returned as a
          string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2516105"></a><p class="title"><b>Example 29.57. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Insert rows */
$mysqli-&gt;query("CREATE TABLE Language SELECT * from CountryLanguage");
printf("Affected rows (INSERT): %d\n", $mysqli-&gt;affected_rows);

$mysqli-&gt;query("ALTER TABLE Language ADD Status int default 0");

/* update rows */
$mysqli-&gt;query("UPDATE Language SET Status=1 WHERE Percentage &gt; 50");
printf("Affected rows (UPDATE): %d\n", $mysqli-&gt;affected_rows);

/* delete rows */
$mysqli-&gt;query("DELETE FROM Language WHERE Percentage &lt; 50");
printf("Affected rows (DELETE): %d\n", $mysqli-&gt;affected_rows);

/* select all rows */
$result = $mysqli-&gt;query("SELECT CountryCode FROM Language");
printf("Affected rows (SELECT): %d\n", $mysqli-&gt;affected_rows);

$result-&gt;close();

/* Delete table Language */
$mysqli-&gt;query("DROP TABLE Language");

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2516126"></a><p class="title"><b>Example 29.58. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
    exit();
}

/* Insert rows */
mysqli_query($link, "CREATE TABLE Language SELECT * from CountryLanguage");
printf("Affected rows (INSERT): %d\n", mysqli_affected_rows($link));

mysqli_query($link, "ALTER TABLE Language ADD Status int default 0");

/* update rows */
mysqli_query($link, "UPDATE Language SET Status=1 WHERE Percentage &gt; 50");
printf("Affected rows (UPDATE): %d\n", mysqli_affected_rows($link));

/* delete rows */
mysqli_query($link, "DELETE FROM Language WHERE Percentage &lt; 50");
printf("Affected rows (DELETE): %d\n", mysqli_affected_rows($link));

/* select all rows */
$result = mysqli_query($link, "SELECT CountryCode FROM Language");
printf("Affected rows (SELECT): %d\n", mysqli_affected_rows($link));

mysqli_free_result($result);

/* Delete table Language */
mysqli_query($link, "DROP TABLE Language");

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Affected rows (INSERT): 984
Affected rows (UPDATE): 168
Affected rows (DELETE): 815
Affected rows (SELECT): 169


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_num_rows</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.info" title="29.3.2.4.23. mysqli-&gt;info, mysqli_info"><code class="literal">mysqli_info</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.autocommit"></a>29.3.2.4.2. <code class="literal">mysqli::autocommit</code>,
        <code class="literal">mysqli_autocommit</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::autocommit</code>
          </p><p>
            <code class="literal">mysqli_autocommit</code>
          </p><p>
            Turns on or off auto-commiting database modifications
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::autocommit</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_autocommit</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">bool </span><span class="parameter">mode</span></span>);</code><p>
        Turns on or off auto-commit mode on queries for the database
        connection.
      </p><p>
        To determine the current state of autocommit use the SQL command
        <code class="literal">SELECT @@autocommit</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>mode</code></em>
            </span></dt><dd><p>
                Whether to turn on auto-commit or not.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function doesn't work with non transactional table
          types (like MyISAM or ISAM).
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2516469"></a><p class="title"><b>Example 29.59. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* turn autocommit on */
$mysqli-&gt;autocommit(TRUE);

if ($result = $mysqli-&gt;query("SELECT @@autocommit")) {
    $row = $result-&gt;fetch_row();
    printf("Autocommit is %s\n", $row[0]);
    $result-&gt;free();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2516485"></a><p class="title"><b>Example 29.60. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
    exit();
}

/* turn autocommit on */
mysqli_autocommit($link, TRUE);

if ($result = mysqli_query($link, "SELECT @@autocommit")) {
    $row = mysqli_fetch_row($result);
    printf("Autocommit is %s\n", $row[0]);
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Autocommit is 1


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.commit" title="29.3.2.4.6. mysqli::commit, mysqli_commit"><code class="literal">mysqli_commit</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.rollback" title="29.3.2.4.37. mysqli::rollback, mysqli_rollback"><code class="literal">mysqli_rollback</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.change-user"></a>29.3.2.4.3. <code class="literal">mysqli::change_user</code>,
        <code class="literal">mysqli_change_user</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::change_user</code>
          </p><p>
            <code class="literal">mysqli_change_user</code>
          </p><p>
            Changes the user of the specified database connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::change_user</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_change_user</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">user</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">password</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">database</span></span>);</code><p>
        Changes the user of the specified database connection and sets
        the current database.
      </p><p>
        In order to successfully change users a valid
        <em class="parameter"><code>username</code></em> and
        <em class="parameter"><code>password</code></em> parameters must be provided and
        that user must have sufficient permissions to access the desired
        database. If for any reason authorization fails, the current
        user authentication will remain.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>user</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>password</code></em>
            </span></dt><dd><p>
                The MySQL password.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>database</code></em>
            </span></dt><dd><p>
                The database to change to.
              </p><p>
                If desired, the

                <code class="constant">NULL</code>

                value may be passed resulting in only changing the user
                and not selecting a database. To select a database in
                this case use the <code class="literal">mysqli_select_db</code>
                function.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Using this command will always cause the current database
          connection to behave as if was a completely new database
          connection, regardless of if the operation was completed
          successfully. This reset includes performing a rollback on any
          active transactions, closing all temporary tables, and
          unlocking all locked tables.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2516938"></a><p class="title"><b>Example 29.61. Object oriented style</b></p><pre class="programlisting">
&lt;?php

/* connect database test */
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Set Variable a */
$mysqli-&gt;query("SET @a:=1");

/* reset all and select a new database */
$mysqli-&gt;change_user("my_user", "my_password", "world");

if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database: %s\n", $row[0]);
    $result-&gt;close();
}

if ($result = $mysqli-&gt;query("SELECT @a")) {
    $row = $result-&gt;fetch_row();
    if ($row[0] === NULL) {
        printf("Value of variable a is NULL\n");
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><div class="example"><a name="id2516960"></a><p class="title"><b>Example 29.62. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* connect database test */
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Set Variable a */
mysqli_query($link, "SET @a:=1");

/* reset all and select a new database */
mysqli_change_user($link, "my_user", "my_password", "world");

if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database: %s\n", $row[0]);
    mysqli_free_result($result);
}

if ($result = mysqli_query($link, "SELECT @a")) {
    $row = mysqli_fetch_row($result);
    if ($row[0] === NULL) {
        printf("Value of variable a is NULL\n");
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Default database: world
Value of variable a is NULL


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><code class="literal">mysqli_select_db</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.character-set-name"></a>29.3.2.4.4. <code class="literal">mysqli::character_set_name</code>,
        <code class="literal">mysqli_character_set_name</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::character_set_name</code>
          </p><p>
            <code class="literal">mysqli_character_set_name</code>
          </p><p>
            Returns the default character set for the database
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::character_set_name</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_character_set_name</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the current character set for the database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The default character set for the current connection
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2517211"></a><p class="title"><b>Example 29.63. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Print current character set */
$charset = $mysqli-&gt;character_set_name();
printf ("Current character set is %s\n", $charset);

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2517228"></a><p class="title"><b>Example 29.64. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Print current character set */
$charset = mysqli_character_set_name($link);
printf ("Current character set is %s\n",$charset);

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Current character set is latin1_swedish_ci


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_client_encoding</code>

          </td></tr><tr><td><code class="literal">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.close"></a>29.3.2.4.5. <code class="literal">mysqli::close</code>, <code class="literal">mysqli_close</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::close</code>
          </p><p>
            <code class="literal">mysqli_close</code>
          </p><p>
            Closes a previously opened database connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::close</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_close</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Closes a previously opened database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>

          </td></tr><tr><td><code class="literal">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.commit"></a>29.3.2.4.6. <code class="literal">mysqli::commit</code>, <code class="literal">mysqli_commit</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::commit</code>
          </p><p>
            <code class="literal">mysqli_commit</code>
          </p><p>
            Commits the current transaction
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::commit</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_commit</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Commits the current transaction for the database connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2517699"></a><p class="title"><b>Example 29.65. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE Language LIKE CountryLanguage Type=InnoDB");

/* set autocommit to off */
$mysqli-&gt;autocommit(FALSE);

/* Insert some values */
$mysqli-&gt;query("INSERT INTO Language VALUES ('DEU', 'Bavarian', 'F', 11.2)");
$mysqli-&gt;query("INSERT INTO Language VALUES ('DEU', 'Swabian', 'F', 9.4)");

/* commit transaction */
$mysqli-&gt;commit();

/* drop table */
$mysqli-&gt;query("DROP TABLE Language");

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id2517719"></a><p class="title"><b>Example 29.66. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* set autocommit to off */
mysqli_autocommit($link, FALSE);

mysqli_query($link, "CREATE TABLE Language LIKE CountryLanguage Type=InnoDB");

/* Insert some values */
mysqli_query($link, "INSERT INTO Language VALUES ('DEU', 'Bavarian', 'F', 11.2)");
mysqli_query($link, "INSERT INTO Language VALUES ('DEU', 'Swabian', 'F', 9.4)");

/* commit transaction */
mysqli_commit($link);

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.autocommit" title="29.3.2.4.2. mysqli::autocommit,
        mysqli_autocommit"><code class="literal">mysqli_autocommit</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.rollback" title="29.3.2.4.37. mysqli::rollback, mysqli_rollback"><code class="literal">mysqli_rollback</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect-errno"></a>29.3.2.4.7. <code class="literal">mysqli-&gt;connect_errno</code>,
        <code class="literal">mysqli_connect_errno</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;connect_errno</code>
          </p><p>
            <code class="literal">mysqli_connect_errno</code>
          </p><p>
            Returns the error code from last connect call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_errno </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_connect_errno</span>();</code><p>
        Returns the last error code number from the last call to
        <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Client error message numbers are listed in the MySQL
          <code class="filename">errmsg.h</code> header file, server error
          message numbers are listed in
          <code class="filename">mysqld_error.h</code>. In the MySQL source
          distribution you can find a complete list of error messages
          and error numbers in the file
          <code class="filename">Docs/mysqld_error.txt</code>.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last call to
        <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>,
        if it failed. zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2517944"></a><p class="title"><b>Example 29.67. <code class="literal">mysqli_connect_errno</code> example</b></p><pre class="programlisting">
&lt;?php

$link = @mysqli_connect("localhost", "nonexisting_user", "");

if (!$link) {
    printf("Can't connect to localhost. Errorcode: %d\n", mysqli_connect_errno());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><code class="literal">mysqli_connect_error</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.sqlstate" title="29.3.2.4.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="literal">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect-error"></a>29.3.2.4.8. <code class="literal">mysqli-&gt;connect_error</code>,
        <code class="literal">mysqli_connect_error</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;connect_error</code>
          </p><p>
            <code class="literal">mysqli_connect_error</code>
          </p><p>
            Returns a string description of the last connect error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">connect_error </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_connect_error</span>();</code><p>
        Returns the last error message string from the last call to
        <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2518152"></a><p class="title"><b>Example 29.68. <code class="literal">mysqli_connect_error</code> example</b></p><pre class="programlisting">
&lt;?php

$link = @mysqli_connect("localhost", "nonexisting_user", "");

if (!$link) {
    printf("Can't connect to localhost. Error: %s\n", mysqli_connect_error());
}
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><code class="literal">mysqli_connect_errno</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.sqlstate" title="29.3.2.4.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="literal">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.connect"></a>29.3.2.4.9. <code class="literal">mysqli::__construct</code>,
        <code class="literal">mysqli_connect</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::__construct</code>
          </p><p>
            <code class="literal">mysqli_connect</code>
          </p><p>
            Open a new connection to the MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (constructor):
      </p><code class="constructorsynopsis"><span class="methodname">mysqli::__construct</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">mysqli_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>);</code><p>
        Opens a connection to the MySQL Server running on.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>host</code></em>
            </span></dt><dd><p>
                Can be either a host name or an IP address. Passing the

                <code class="constant">NULL</code>

                value or the string "localhost" to this
                parameter, the local host is assumed. When possible,
                pipes will be used instead of the TCP/IP protocol.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>passwd</code></em>
            </span></dt><dd><p>
                If not provided or

                <code class="constant">NULL</code>

                , the MySQL server will attempt to authenticate the user
                against those user records which have no password only.
                This allows one username to be used with different
                permissions (depending on if a password as provided or
                not).
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                If provided will specify the default database to be used
                when performing queries.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>port</code></em>
            </span></dt><dd><p>
                Specifies the port number to attempt to connect to the
                MySQL server.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>socket</code></em>
            </span></dt><dd><p>
                Specifies the socket or named pipe that should be used.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  Specifying the <em class="parameter"><code>socket</code></em> parameter
                  will not explicitly determine the type of connection
                  to be used when connecting to the MySQL server. How
                  the connection is made to the MySQL database is
                  determined by the <em class="parameter"><code>host</code></em>
                  parameter.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a object which represents the connection to a MySQL
        Server or

        <code class="constant">FALSE</code>

        if the connection failed.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2518698"></a><p class="title"><b>Example 29.69. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("Host information: %s\n", $mysqli-&gt;host_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2518714"></a><p class="title"><b>Example 29.70. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("Host information: %s\n", mysqli_get_host_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Host information: Localhost via UNIX socket


      </pre><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Error "Can't create TCP/IP socket (10106)"
          usually means that the
          <a href="http://www.php.net/manual/en/ini.variables-order.php" target="_top">variables_order</a>
          configure directive doesn't contain character
          <code class="literal">E</code>. On Windows, if the environment is not
          copied the <code class="literal">SYSTEMROOT</code> environment variable
          won't be available and PHP will have problems loading
          Winsock.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.debug"></a>29.3.2.4.10. <code class="literal">mysqli::debug</code>, <code class="literal">mysqli_debug</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::debug</code>
          </p><p>
            <code class="literal">mysqli_debug</code>
          </p><p>
            Performs debugging operations
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_debug</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">message</span></span>);</code><p>
        Performs debugging operations using the Fred Fish debugging
        library.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>message</code></em>
            </span></dt><dd><p>
                A string representing the debugging operation to perform
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        .
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To use the
          <a href="apis.html#apis-php-mysqli.debug" title="29.3.2.4.10. mysqli::debug, mysqli_debug"><code class="literal">mysqli_debug</code></a>
          function you must complile the MySQL client library to support
          debugging.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2518988"></a><p class="title"><b>Example 29.71. Generating a Trace File</b></p><pre class="programlisting">
&lt;?php

/* Create a trace file in '/tmp/client.trace' on the local (client) machine: */
mysqli_debug("d:t:0,/tmp/client.trace");

?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_dump_debug_info</code>

          </td></tr><tr><td><code class="literal">mysqli_report</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.dump-debug-info"></a>29.3.2.4.11. <code class="literal">mysqli::dump_debug_info</code>,
        <code class="literal">mysqli_dump_debug_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::dump_debug_info</code>
          </p><p>
            <code class="literal">mysqli_dump_debug_info</code>
          </p><p>
            Dump debugging information into the log
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::dump_debug_info</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_dump_debug_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        This function is designed to be executed by an user with the
        SUPER privilege and is used to dump debugging information into
        the log for the MySQL Server relating to the connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.debug" title="29.3.2.4.10. mysqli::debug, mysqli_debug"><code class="literal">mysqli_debug</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.errno"></a>29.3.2.4.12. <code class="literal">mysqli-&gt;errno</code>, <code class="literal">mysqli_errno</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;errno</code>
          </p><p>
            <code class="literal">mysqli_errno</code>
          </p><p>
            Returns the error code for the most recent function call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_errno</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the last error code for the most recent MySQLi function
        call that can succeed or fail.
      </p><p>
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file, server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>. In
        the MySQL source distribution you can find a complete list of
        error messages and error numbers in the file
        <code class="filename">Docs/mysqld_error.txt</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value for the last call, if it failed. zero means
        no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2519454"></a><p class="title"><b>Example 29.72. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!$mysqli-&gt;query("SET a=1")) {
    printf("Errorcode: %d\n", $mysqli-&gt;errno);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2519470"></a><p class="title"><b>Example 29.73. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!mysqli_query($link, "SET a=1")) {
    printf("Errorcode: %d\n", mysqli_errno($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Errorcode: 1193


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_connect_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_connect_error</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.sqlstate" title="29.3.2.4.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="literal">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.error"></a>29.3.2.4.13. <code class="literal">mysqli-&gt;error</code>, <code class="literal">mysqli_error</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;error</code>
          </p><p>
            <code class="literal">mysqli_error</code>
          </p><p>
            Returns a string description of the last error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_error</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the last error message for the most recent MySQLi
        function call that can succeed or fail.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2519735"></a><p class="title"><b>Example 29.74. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!$mysqli-&gt;query("SET a=1")) {
    printf("Errormessage: %s\n", $mysqli-&gt;error);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2519751"></a><p class="title"><b>Example 29.75. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if (!mysqli_query($link, "SET a=1")) {
    printf("Errormessage: %s\n", mysqli_error($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Errormessage: Unknown system variable 'a'


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_connect_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_connect_error</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.sqlstate" title="29.3.2.4.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="literal">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.field-count"></a>29.3.2.4.14. <code class="literal">mysqli-&gt;field_count</code>,
        <code class="literal">mysqli_field_count</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_field_count</code>
          </p><p>
            Returns the number of columns for the most recent query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_field_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of columns for the most recent query on the
        connection represented by the <em class="parameter"><code>link</code></em>
        parameter. This function can be useful when using the
        <code class="literal">mysqli_store_result</code> function to determine
        if the query should have produced a non-empty result set or not
        without knowing the nature of the query.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the number of fields in a result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2520030"></a><p class="title"><b>Example 29.76. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

$mysqli-&gt;query( "DROP TABLE IF EXISTS friends");
$mysqli-&gt;query( "CREATE TABLE friends (id int, name varchar(20))");

$mysqli-&gt;query( "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");


$mysqli-&gt;real_query("SELECT * FROM friends");

if ($mysqli-&gt;field_count) {
    /* this was a select/show or describe query */
    $result = $mysqli-&gt;store_result();

    /* process resultset */
    $row = $result-&gt;fetch_row();

    /* free resultset */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id2520051"></a><p class="title"><b>Example 29.77. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

mysqli_query($link, "DROP TABLE IF EXISTS friends");
mysqli_query($link, "CREATE TABLE friends (id int, name varchar(20))");

mysqli_query($link, "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

mysqli_real_query($link, "SELECT * FROM friends");

if (mysqli_field_count($link)) {
    /* this was a select/show or describe query */
    $result = mysqli_store_result($link);

    /* process resultset */
    $row = mysqli_fetch_row($result);

    /* free resultset */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-charset"></a>29.3.2.4.15. <code class="literal">mysqli::get_charset</code>,
        <code class="literal">mysqli_get_charset</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_charset</code>
          </p><p>
            <code class="literal">mysqli_get_charset</code>
          </p><p>
            Returns a character set object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli::get_charset</span>();</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_get_charset</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a character set object providing several properties of
        the current active characer set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The function returns a character set object with the following
        properties:

        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                Character set name
              </p></dd><dt><span class="term">
              <em class="parameter"><code>collation</code></em>
            </span></dt><dd><p>
                Collation name
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dir</code></em>
            </span></dt><dd><p>
                Directory the charset description was fetched from (?)
                or "" for builtin character sets
              </p></dd><dt><span class="term">
              <em class="parameter"><code>min_length</code></em>
            </span></dt><dd><p>
                Minimum character lenght in bytes
              </p></dd><dt><span class="term">
              <em class="parameter"><code>max_length</code></em>
            </span></dt><dd><p>
                Maximum character length in bytes
              </p></dd><dt><span class="term">
              <em class="parameter"><code>number</code></em>
            </span></dt><dd><p>
                Internal character set number
              </p></dd><dt><span class="term">
              <em class="parameter"><code>state</code></em>
            </span></dt><dd><p>
                Characer set status (?)
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2520388"></a><p class="title"><b>Example 29.78. Object oriented style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  $db-&gt;real_connect("localhost","root","","test");
  var_dump($db-&gt;get_charset());
?&gt;

   </pre></div><div class="example"><a name="id2520403"></a><p class="title"><b>Example 29.79. Procedural style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  mysqli_real_connect($db, "localhost","root","","test");
  var_dump($db-&gt;get_charset());
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


object(stdClass)#2 (7) {
  ["charset"]=&gt;
  string(6) "latin1"
  ["collation"]=&gt;
  string(17) "latin1_swedish_ci"
  ["dir"]=&gt;
  string(0) ""
  ["min_length"]=&gt;
  int(1)
  ["max_length"]=&gt;
  int(1)
  ["number"]=&gt;
  int(8)
  ["state"]=&gt;
  int(801)
}


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_characters_set_name</code>

          </td></tr><tr><td><code class="literal">mysqli_set_charset</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-client-info"></a>29.3.2.4.16. <code class="literal">mysqli::get_client_info</code>,
        <code class="literal">mysqli_get_client_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_client_info</code>
          </p><p>
            <code class="literal">mysqli_get_client_info</code>
          </p><p>
            Returns the MySQL client version as a string
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::get_client_info</span>();</code><br><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_client_info</span>();</code><p>
        The <code class="literal">mysqli_get_client_info</code> function is used
        to return a string representing the client version being used in
        the MySQLi extension.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that represents the MySQL client library version
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2520577"></a><p class="title"><b>Example 29.80. mysqli_get_client_info</b></p><pre class="programlisting">
&lt;?php

/* We don't need a connection to determine
   the version of mysql client library */

printf("Client library version: %s\n", mysqli_get_client_info());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_info</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-client-version"></a>29.3.2.4.17. <code class="literal">mysqli::get_client_version</code>,
        <code class="literal">mysqli_get_client_version</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_client_version</code>
          </p><p>
            <code class="literal">mysqli_get_client_version</code>
          </p><p>
            Get MySQL client info
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli::get_client_version</span>();</code><br><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_client_version</span>();</code><p>
        Returns client version number as an integer.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A number that represents the MySQL client library version in
        format: <code class="literal">main_version*10000 + minor_version *100 +
        sub_version</code>. For example, 4.1.0 is returned as 40100.
      </p><p>
        This is useful to quickly determine the version of the client
        library to know if some capability exits.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2520754"></a><p class="title"><b>Example 29.81. mysqli_get_client_version</b></p><pre class="programlisting">
&lt;?php

/* We don't need a connection to determine
   the version of mysql client library */

printf("Client library version: %d\n", mysqli_get_client_version());
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_info</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-host-info"></a>29.3.2.4.18. <code class="literal">mysqli-&gt;host_info</code>,
        <code class="literal">mysqli_get_host_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;host_info</code>
          </p><p>
            <code class="literal">mysqli_get_host_info</code>
          </p><p>
            Returns a string representing the type of connection used
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">host_info </span>;</code><br>}</pre><p>
        Procdural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_host_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="literal">mysqli_get_host_info</code> function returns a
        string describing the connection represented by the
        <em class="parameter"><code>link</code></em> parameter is using (including the
        server host name).
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server hostname and the
        connection type.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2521005"></a><p class="title"><b>Example 29.82. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print host information */
printf("Host info: %s\n", $mysqli-&gt;host_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2521022"></a><p class="title"><b>Example 29.83. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print host information */
printf("Host info: %s\n", mysqli_get_host_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Host info: Localhost via UNIX socket


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_proto_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-proto-info"></a>29.3.2.4.19. <code class="literal">mysqli-&gt;protocol_version</code>,
        <code class="literal">mysqli_get_proto_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;protocol_version</code>
          </p><p>
            <code class="literal">mysqli_get_proto_info</code>
          </p><p>
            Returns the version of the MySQL protocol used
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">protocol_version </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_proto_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns an integer representing the MySQL protocol version used
        by the connection represented by the <em class="parameter"><code>link</code></em>
        parameter.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an integer representing the protocol version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2521270"></a><p class="title"><b>Example 29.84. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print protocol version */
printf("Protocol version: %d\n", $mysqli-&gt;protocol_version);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2521287"></a><p class="title"><b>Example 29.85. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print protocol version */
printf("Protocol version: %d\n", mysqli_get_proto_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Protocol version: 10


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_host_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-server-info"></a>29.3.2.4.20. <code class="literal">mysqli-&gt;server_info</code>,
        <code class="literal">mysqli_get_server_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;server_info</code>
          </p><p>
            <code class="literal">mysqli_get_server_info</code>
          </p><p>
            Returns the version of the MySQL server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">server_info </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_get_server_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a string representing the version of the MySQL server
        that the MySQLi extension is connected to.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing the server version.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2521529"></a><p class="title"><b>Example 29.86. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %s\n", $mysqli-&gt;server_info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2521546"></a><p class="title"><b>Example 29.87. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %s\n", mysqli_get_server_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Server version: 4.1.2-alpha-debug


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="literal">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_version</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-server-version"></a>29.3.2.4.21. <code class="literal">mysqli-&gt;server_version</code>,
        <code class="literal">mysqli_get_server_version</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;server_version</code>
          </p><p>
            <code class="literal">mysqli_get_server_version</code>
          </p><p>
            Returns the version of the MySQL server as an integer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">server_version </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_get_server_version</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="literal">mysqli_get_server_version</code> function
        returns the version of the server connected to (represented by
        the <em class="parameter"><code>link</code></em> parameter) as an integer.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the server version.
      </p><p>
        The form of this version number is <code class="literal">main_version * 10000
        + minor_version * 100 + sub_version</code> (i.e. version
        4.1.0 is 40100).
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2521820"></a><p class="title"><b>Example 29.88. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %d\n", $mysqli-&gt;server_version);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2521837"></a><p class="title"><b>Example 29.89. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* print server version */
printf("Server version: %d\n", mysqli_get_server_version($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Server version: 40102


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_client_info</code>

          </td></tr><tr><td><code class="literal">mysqli_get_client_version</code>

          </td></tr><tr><td><code class="literal">mysqli_get_server_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.get-warnings"></a>29.3.2.4.22. <code class="literal">mysqli::get_warnings</code>,
        <code class="literal">mysqli_get_warnings</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::get_warnings</code>
          </p><p>
            <code class="literal">mysqli_get_warnings</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli::get_warnings</span>();</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_get_warnings</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.info"></a>29.3.2.4.23. <code class="literal">mysqli-&gt;info</code>, <code class="literal">mysqli_info</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;info</code>
          </p><p>
            <code class="literal">mysqli_info</code>
          </p><p>
            Retrieves information about the most recently executed query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">info </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_info</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The
        <a href="apis.html#apis-php-mysqli.info" title="29.3.2.4.23. mysqli-&gt;info, mysqli_info"><code class="literal">mysqli_info</code></a>
        function returns a string providing information about the last
        query executed. The nature of this string is provided below:
      </p><p>
        </p><div class="table"><a name="id2522132"></a><p class="title"><b>Table 29.5. Possible mysqli_info return values</b></p><table summary="Possible mysqli_info return values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Query type</th><th>Example result string</th></tr></thead><tbody><tr><td>INSERT INTO...SELECT...</td><td>Records: 100 Duplicates: 0 Warnings: 0</td></tr><tr><td>INSERT INTO...VALUES (...),(...),(...)</td><td>Records: 3 Duplicates: 0 Warnings: 0</td></tr><tr><td>LOAD DATA INFILE ...</td><td>Records: 1 Deleted: 0 Skipped: 0 Warnings: 0</td></tr><tr><td>ALTER TABLE ...</td><td>Records: 3 Duplicates: 0 Warnings: 0</td></tr><tr><td>UPDATE ...</td><td>Rows matched: 40 Changed: 40 Warnings: 0</td></tr></tbody></table></div><p>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Queries which do not fall into one of the above formats are
          not supported. In these situations,
          <a href="apis.html#apis-php-mysqli.info" title="29.3.2.4.23. mysqli-&gt;info, mysqli_info"><code class="literal">mysqli_info</code></a>
          will return an empty string.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A character string representing additional information about the
        most recently executed query.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2522307"></a><p class="title"><b>Example 29.90. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TEMPORARY TABLE t1 LIKE City");

/* INSERT INTO .. SELECT */
$mysqli-&gt;query("INSERT INTO t1 SELECT * FROM City ORDER BY ID LIMIT 150");
printf("%s\n", $mysqli-&gt;info);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2522327"></a><p class="title"><b>Example 29.91. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TEMPORARY TABLE t1 LIKE City");

/* INSERT INTO .. SELECT */
mysqli_query($link, "INSERT INTO t1 SELECT * FROM City ORDER BY ID LIMIT 150");
printf("%s\n", mysqli_info($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Records: 150  Duplicates: 0  Warnings: 0


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_affected_rows</code>

          </td></tr><tr><td><code class="literal">mysqli_warning_count</code>

          </td></tr><tr><td><code class="literal">mysqli_num_rows</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.init"></a>29.3.2.4.24. <code class="literal">mysqli::init</code>, <code class="literal">mysqli_init</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::init</code>
          </p><p>
            <code class="literal">mysqli_init</code>
          </p><p>
            Initializes MySQLi and returns a resource for use with
            mysqli_real_connect()
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">init</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli </span><span class="methodname">mysqli_init</span>();</code><p>
        Allocates or initializes a MYSQL object suitable for
        <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>
        and <code class="literal">mysqli_real_connect</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Any subsequent calls to any mysqli function (except
          <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>)
          will fail until <code class="literal">mysqli_real_connect</code> was
          called.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.close" title="29.3.2.4.5. mysqli::close, mysqli_close"><code class="literal">mysqli_close</code></a>

          </td></tr><tr><td><code class="literal">mysqli_real_connect</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.insert-id"></a>29.3.2.4.25. <code class="literal">mysqli-&gt;insert_id</code>,
        <code class="literal">mysqli_insert_id</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;insert_id</code>
          </p><p>
            <code class="literal">mysqli_insert_id</code>
          </p><p>
            Returns the auto generated id used in the last query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_insert_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="literal">mysqli_insert_id</code> function returns the
        ID generated by a query on a table with a column having the
        AUTO_INCREMENT attribute. If the last query wasn't an
        INSERT or UPDATE statement or if the modified table does not
        have a column with the AUTO_INCREMENT attribute, this function
        will return zero.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Performing an INSERT or UPDATE statement using the
          LAST_INSERT_ID() function will also modify the value returned
          by the <code class="literal">mysqli_insert_id</code> function.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The value of the <code class="literal">AUTO_INCREMENT</code> field that
        was updated by the previous query. Returns zero if there was no
        previous query on the connection or if the query did not update
        an <code class="literal">AUTO_INCREMENT</code> value.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number is greater than maximal int value,
          <code class="literal">mysqli_insert_id</code> will return a string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2522809"></a><p class="title"><b>Example 29.92. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
$mysqli-&gt;query($query);

printf ("New Record has id %d.\n", $mysqli-&gt;insert_id);

/* drop table */
$mysqli-&gt;query("DROP TABLE myCity");

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2522829"></a><p class="title"><b>Example 29.93. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

$query = "INSERT INTO myCity VALUES (NULL, 'Stuttgart', 'DEU', 'Stuttgart', 617000)";
mysqli_query($link, $query);

printf ("New Record has id %d.\n", mysqli_insert_id($link));

/* drop table */
mysqli_query($link, "DROP TABLE myCity");

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


New Record has id 1.


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.kill"></a>29.3.2.4.26. <code class="literal">mysqli::kill</code>, <code class="literal">mysqli_kill</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::kill</code>
          </p><p>
            <code class="literal">mysqli_kill</code>
          </p><p>
            Asks the server to kill a MySQL thread
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::kill</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_kill</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                 <span class="methodparam"><span class="type">int </span><span class="parameter">processid</span></span>);</code><p>
        This function is used to ask the server to kill a MySQL thread
        specified by the <em class="parameter"><code>processid</code></em> parameter.
        This value must be retrieved by calling the
        <code class="literal">mysqli_thread_id</code> function.
      </p><p>
        To stop a running query you should use the SQL command
        <code class="literal">KILL QUERY processid</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2523099"></a><p class="title"><b>Example 29.94. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = $mysqli-&gt;thread_id;

/* Kill connection */
$mysqli-&gt;kill($thread_id);

/* This should produce an error */
if (!$mysqli-&gt;query("CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", $mysqli-&gt;error);
    exit;
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2523115"></a><p class="title"><b>Example 29.95. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = mysqli_thread_id($link);

/* Kill connection */
mysqli_kill($link, $thread_id);

/* This should produce an error */
if (!mysqli_query($link, "CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", mysqli_error($link));
    exit;
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: MySQL server has gone away


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_thread_id</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.more-results"></a>29.3.2.4.27. <code class="literal">mysqli::more_results</code>,
        <code class="literal">mysqli_more_results</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::more_results</code>
          </p><p>
            <code class="literal">mysqli_more_results</code>
          </p><p>
            Check if there are any more query results from a multi query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::more_results</span>();</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_more_results</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Indicates if one or more result sets are available from a
        previous call to <code class="literal">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="literal">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_multi_query</code>

          </td></tr><tr><td><code class="literal">mysqli_next_result</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.multi-query"></a>29.3.2.4.28. <code class="literal">mysqli::multi_query</code>,
        <code class="literal">mysqli_multi_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::multi_query</code>
          </p><p>
            <code class="literal">mysqli_multi_query</code>
          </p><p>
            Performs a query on the database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::multi_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_multi_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Executes one or multiple queries which are concatenated by a
        semicolon.
      </p><p>
        To retrieve the resultset from the first query you can use
        <code class="literal">mysqli_use_result</code> or
        <code class="literal">mysqli_store_result</code>. All subsequent query
        results can be processed using
        <code class="literal">mysqli_more_results</code> and
        <code class="literal">mysqli_next_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">FALSE</code>

        if the first statement failed. To retrieve subsequent errors
        from other statements you have to call
        <code class="literal">mysqli_next_result</code> first.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2523661"></a><p class="title"><b>Example 29.96. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli-&gt;multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli-&gt;store_result()) {
            while ($row = $result-&gt;fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result-&gt;free();
        }
        /* print divider */
        if ($mysqli-&gt;more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli-&gt;next_result());
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2523686"></a><p class="title"><b>Example 29.97. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if (mysqli_multi_query($link, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_store_result($link)) {
            while ($row = mysqli_fetch_row($result)) {
                printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($link)) {
            printf("-----------------\n");
        }
    } while (mysqli_next_result($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output something similar to:
      </p><pre class="screen">


my_user@localhost
-----------------
Amersfoort
Maastricht
Dordrecht
Leiden
Haarlemmermeer


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_next_result</code>

          </td></tr><tr><td><code class="literal">mysqli_more_results</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.next-result"></a>29.3.2.4.29. <code class="literal">mysqli::next_result</code>,
        <code class="literal">mysqli_next_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::next_result</code>
          </p><p>
            <code class="literal">mysqli_next_result</code>
          </p><p>
            Prepare next result from multi_query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::next_result</span>();</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_next_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Prepares next result set from a previous call to
        <code class="literal">mysqli_multi_query</code> which can be retrieved
        by <code class="literal">mysqli_store_result</code> or
        <code class="literal">mysqli_use_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="literal">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_multi_query</code>

          </td></tr><tr><td><code class="literal">mysqli_more_results</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.options"></a>29.3.2.4.30. <code class="literal">mysqli::options</code>, <code class="literal">mysqli_options</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::options</code>
          </p><p>
            <code class="literal">mysqli_options</code>
          </p><p>
            Set options
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::options</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                     <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_options</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">option</span></span>,<br>                    <span class="methodparam"><span class="type">mixed </span><span class="parameter">value</span></span>);</code><p>
        Used to set extra connect options and affect behavior for a
        connection.
      </p><p>
        This function may be called multiple times to set several
        options.
      </p><p>
        <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>
        should be called after
        <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
        and before <code class="literal">mysqli_real_connect</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>option</code></em>
            </span></dt><dd><p>
                The option that you want to set. It can be one of the
                following values:

                </p><div class="table"><a name="id2524264"></a><p class="title"><b>Table 29.6. Valid options</b></p><table summary="Valid options" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_OPT_CONNECT_TIMEOUT</code></td><td>connection timeout in seconds</td></tr><tr><td><code class="constant">MYSQLI_OPT_LOCAL_INFILE</code></td><td>enable/disable use of <code class="literal">LOAD LOCAL INFILE</code></td></tr><tr><td><code class="constant">MYSQLI_INIT_COMMAND</code></td><td>command to execute after when connecting to MySQL server</td></tr><tr><td><code class="constant">MYSQLI_READ_DEFAULT_FILE</code></td><td>Read options from named option file instead of
                          <code class="filename">my.cnf</code></td></tr><tr><td><code class="constant">MYSQLI_READ_DEFAULT_GROUP</code></td><td>Read options from the named group from <code class="filename">my.cnf</code> or
                          the file specified with

                          <code class="constant">MYSQL_READ_DEFAULT_FILE</code>

                          .</td></tr></tbody></table></div><p>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>value</code></em>
            </span></dt><dd><p>
                The value for the option.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="literal">mysqli_real_connect</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>

          </td></tr><tr><td><code class="literal">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.ping"></a>29.3.2.4.31. <code class="literal">mysqli::ping</code>, <code class="literal">mysqli_ping</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::ping</code>
          </p><p>
            <code class="literal">mysqli_ping</code>
          </p><p>
            Pings a server connection, or tries to reconnect if the
            connection has gone down
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::ping</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_ping</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Checks whether the connection to the server is working. If it
        has gone down, and global option
        <code class="literal">mysqli.reconnect</code> is enabled an automatic
        reconnection is attempted.
      </p><p>
        This function can be used by clients that remain idle for a long
        while, to check whether the server has closed the connection and
        reconnect if necessary.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2524672"></a><p class="title"><b>Example 29.98. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* check if server is alive */
if ($mysqli-&gt;ping()) {
    printf ("Our connection is ok!\n");
} else {
    printf ("Error: %s\n", $mysqli-&gt;error);
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2524689"></a><p class="title"><b>Example 29.99. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* check if server is alive */
if (mysqli_ping($link)) {
    printf ("Our connection is ok!\n");
} else {
    printf ("Error: %s\n", mysqli_error($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Our connection is ok!


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.prepare"></a>29.3.2.4.32. <code class="literal">mysqli::prepare</code>, <code class="literal">mysqli_prepare</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::prepare</code>
          </p><p>
            <code class="literal">mysqli_prepare</code>
          </p><p>
            Prepare an SQL statement for execution
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedure style:
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">mysqli_prepare</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Prepares the SQL query pointed to by the null-terminated string
        query, and returns a statement handle to be used for further
        operations on the statement. The query must consist of a single
        SQL statement.
      </p><p>
        The parameter markers must be bound to application variables
        using <code class="literal">mysqli_stmt_bind_param</code> and/or
        <code class="literal">mysqli_stmt_bind_result</code> before executing
        the statement or fetching rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  You should not add a terminating semicolon or
                  <code class="literal">\g</code> to the statement.
                </p></div><p>
                This parameter can include one or more parameter markers
                in the SQL statement by embedding question mark
                (<code class="literal">?</code>) characters at the appropriate
                positions.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  The markers are legal only in certain places in SQL
                  statements. For example, they are allowed in the
                  <code class="literal">VALUES()</code> list of an
                  <code class="literal">INSERT</code> statement (to specify column
                  values for a row), or in a comparison with a column in
                  a <code class="literal">WHERE</code> clause to specify a
                  comparison value.
                </p><p>
                  However, they are not allowed for identifiers (such as
                  table or column names), in the select list that names
                  the columns to be returned by a
                  <code class="literal">SELECT</code> statement, or to specify
                  both operands of a binary operator such as the
                  <code class="literal">=</code> equal sign. The latter
                  restriction is necessary because it would be
                  impossible to determine the parameter type. It's
                  not allowed to compare marker with
                  <code class="literal">NULL</code> by <code class="literal">? IS
                  NULL</code> too. In general, parameters are legal
                  only in Data Manipulation Languange (DML) statements,
                  and not in Data Defination Language (DDL) statements.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>
        returns a statement object or

        <code class="constant">FALSE</code>

        if an error occured.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2525056"></a><p class="title"><b>Example 29.100. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli-&gt;prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt-&gt;bind_param("s", $city);

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($district);

    /* fetch value */
    $stmt-&gt;fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2525080"></a><p class="title"><b>Example 29.101. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = mysqli_prepare($link, "SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Amersfoort is in district Utrecht


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_fetch</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_bind_param</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_bind_result</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_close</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.query"></a>29.3.2.4.33. <code class="literal">mysqli::query</code>, <code class="literal">mysqli_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::query</code>
          </p><p>
            <code class="literal">mysqli_query</code>
          </p><p>
            Performs a query on the database
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli::query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                    <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                   <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>,<br>                   <span class="methodparam"><span class="type">int </span><span class="parameter">resultmode</span></span>);</code><p>
        Performs a <em class="parameter"><code>query</code></em> against the database.
      </p><p>
        Functionally, using this function is identical to calling
        <code class="literal">mysqli_real_query</code> followed either by
        <code class="literal">mysqli_use_result</code> or
        <code class="literal">mysqli_store_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query string.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>resultmode</code></em>
            </span></dt><dd><p>
                Either the constant

                <code class="constant">MYSQLI_USE_RESULT</code>

                or

                <code class="constant">MYSQLI_STORE_RESULT</code>

                depending on the desired behavior. By default,

                <code class="constant">MYSQLI_STORE_RESULT</code>

                is used.
              </p><p>
                If you use

                <code class="constant">MYSQLI_USE_RESULT</code>

                all subsequent calls will return error <code class="literal">Commands
                out of sync</code> unless you call
                <code class="literal">mysqli_free_result</code>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure. For <code class="literal">SELECT, SHOW, DESCRIBE</code> or
        <code class="literal">EXPLAIN</code>
        <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>
        will return a result object.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2525517"></a><p class="title"><b>Example 29.102. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Create table doesn't return a resultset */
if ($mysqli-&gt;query("CREATE TEMPORARY TABLE myCity LIKE City") === TRUE) {
    printf("Table myCity successfully created.\n");
}

/* Select queries return a resultset */
if ($result = $mysqli-&gt;query("SELECT Name FROM City LIMIT 10")) {
    printf("Select returned %d rows.\n", $result-&gt;num_rows);

    /* free result set */
    $result-&gt;close();
}

/* If we have to retrieve large amount of data we use MYSQLI_USE_RESULT */
if ($result = $mysqli-&gt;query("SELECT * FROM City", MYSQLI_USE_RESULT)) {

    /* Note, that we can't execute any functions which interact with the
       server until result set was closed. All calls will return an
       'out of sync' error */
    if (!$mysqli-&gt;query("SET @a:='this will not work'")) {
        printf("Error: %s\n", $mysqli-&gt;error);
    }
    $result-&gt;close();
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2525540"></a><p class="title"><b>Example 29.103. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Create table doesn't return a resultset */
if (mysqli_query($link, "CREATE TEMPORARY TABLE myCity LIKE City") === TRUE) {
    printf("Table myCity successfully created.\n");
}

/* Select queries return a resultset */
if ($result = mysqli_query($link, "SELECT Name FROM City LIMIT 10")) {
    printf("Select returned %d rows.\n", mysqli_num_rows($result));

    /* free result set */
    mysqli_free_result($result);
}

/* If we have to retrieve large amount of data we use MYSQLI_USE_RESULT */
if ($result = mysqli_query($link, "SELECT * FROM City", MYSQLI_USE_RESULT)) {

    /* Note, that we can't execute any functions which interact with the
       server until result set was closed. All calls will return an
       'out of sync' error */
    if (!mysqli_query($link, "SET @a:='this will not work'")) {
        printf("Error: %s\n", mysqli_error($link));
    }
    mysqli_free_result($result);
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Table myCity successfully created.
Select returned 10 rows.
Error: Commands out of sync;  You can't run this command now


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_real_query</code>

          </td></tr><tr><td><code class="literal">mysqli_multi_query</code>

          </td></tr><tr><td><code class="literal">mysqli_free_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-connect"></a>29.3.2.4.34. <code class="literal">mysqli::real_connect</code>,
        <code class="literal">mysqli_real_connect</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_connect</code>
          </p><p>
            <code class="literal">mysqli_real_connect</code>
          </p><p>
            Opens a connection to a mysql server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::real_connect</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_real_connect</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">host</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">username</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">passwd</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">port</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">socket</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><p>
        Establish a connection to a MySQL database engine.
      </p><p>
        This function differs from
        <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_real_connect</code> needs a valid
            object which has to be created by function
            <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>.
          </p></li><li><p>
            With function
            <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>
            you can set various options for connection.
          </p></li><li><p>
            There is a <em class="parameter"><code>flags</code></em> parameter.
          </p></li></ul></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>host</code></em>
            </span></dt><dd><p>
                Can be either a host name or an IP address. Passing the

                <code class="constant">NULL</code>

                value or the string "localhost" to this
                parameter, the local host is assumed. When possible,
                pipes will be used instead of the TCP/IP protocol.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>username</code></em>
            </span></dt><dd><p>
                The MySQL user name.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>passwd</code></em>
            </span></dt><dd><p>
                If provided or

                <code class="constant">NULL</code>

                , the MySQL server will attempt to authenticate the user
                against those user records which have no password only.
                This allows one username to be used with different
                permissions (depending on if a password as provided or
                not).
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                If provided will specify the default database to be used
                when performing queries.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>port</code></em>
            </span></dt><dd><p>
                Specifies the port number to attempt to connect to the
                MySQL server.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>socket</code></em>
            </span></dt><dd><p>
                Specifies the socket or named pipe that should be used.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  Specifying the <em class="parameter"><code>socket</code></em> parameter
                  will not explicitly determine the type of connection
                  to be used when connecting to the MySQL server. How
                  the connection is made to the MySQL database is
                  determined by the <em class="parameter"><code>host</code></em>
                  parameter.
                </p></div></dd><dt><span class="term">
              <em class="parameter"><code>flags</code></em>
            </span></dt><dd><p>
                With the parameter <em class="parameter"><code>flags</code></em> you can
                set different connection options:
              </p><div class="table"><a name="id2526221"></a><p class="title"><b>Table 29.7. Supported flags</b></p><table summary="Supported flags" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_CLIENT_COMPRESS</code></td><td>Use compression protocol</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_FOUND_ROWS</code></td><td>return number of matched rows, not the number of affected rows</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_IGNORE_SPACE</code></td><td>Allow spaces after function names. Makes all function names reserved
                        words.</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_INTERACTIVE</code></td><td>Allow <code class="literal">interactive_timeout</code> seconds (instead of
                        <code class="literal">wait_timeout</code> seconds) of
                        inactivity before closing the connection</td></tr><tr><td><code class="constant">MYSQLI_CLIENT_SSL</code></td><td>Use SSL (encryption)</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  For security reasons the

                  <code class="constant">MULTI_STATEMENT</code>

                  flag is not supported in PHP. If you want to execute
                  multiple queries use the
                  <code class="literal">mysqli_multi_query</code> function.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2526377"></a><p class="title"><b>Example 29.104. Object oriented style</b></p><pre class="programlisting">
&lt;?php

/* create a connection object which is not connected */
$mysqli = mysqli_init();

/* set connection options */
$mysqli-&gt;options(MYSQLI_INIT_COMMAND, "SET AUTOCOMMIT=0");
$mysqli-&gt;options(MYSQLI_OPT_CONNECT_TIMEOUT, 5);

/* connect to server */
$mysqli-&gt;real_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("Connection: %s\n.", $mysqli-&gt;host_info);

$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2526397"></a><p class="title"><b>Example 29.105. Procedural style</b></p><pre class="programlisting">
&lt;?php

/* create a connection object which is not connected */
$link = mysqli_init();

/* set connection options */
mysqli_options($link, MYSQLI_INIT_COMMAND, "SET AUTOCOMMIT=0");
mysqli_options($link, MYSQLI_OPT_CONNECT_TIMEOUT, 5);

/* connect to server */
mysqli_real_connect($link, 'localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("Connection: %s\n.", mysqli_get_host_info($link));

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Connection: Localhost via UNIX socket



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>

          </td></tr><tr><td><code class="literal">mysqli_ssl_set</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.close" title="29.3.2.4.5. mysqli::close, mysqli_close"><code class="literal">mysqli_close</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-escape-string"></a>29.3.2.4.35. <code class="literal">mysqli::real_escape_string</code>,
        <code class="literal">mysqli_real_escape_string</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_escape_string</code>
          </p><p>
            <code class="literal">mysqli_real_escape_string</code>
          </p><p>
            Escapes special characters in a string for use in an SQL
            statement, taking into account the current charset of the
            connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (both methods are equivalent):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><code class="methodsynopsis"><span class="type">string </span><span class="methodname">real_escape_string</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_real_escape_string</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                 <span class="methodparam"><span class="type">string </span><span class="parameter">escapestr</span></span>);</code><p>
        This function is used to create a legal SQL string that you can
        use in an SQL statement. The given string is encoded to an
        escaped SQL string, taking into account the current character
        set of the connection.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>escapestr</code></em>
            </span></dt><dd><p>
                The string to be escaped.
              </p><p>
                Characters encoded are <code class="literal">NUL (ASCII 0), \n, \r,
                \, ', ", and Control-Z</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an escaped string.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2526756"></a><p class="title"><b>Example 29.106. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TEMPORARY TABLE myCity LIKE City");

$city = "'s Hertogenbosch";

/* this query will fail, cause we didn't escape $city */
if (!$mysqli-&gt;query("INSERT into myCity (Name) VALUES ('$city')")) {
    printf("Error: %s\n", $mysqli-&gt;sqlstate);
}

$city = $mysqli-&gt;real_escape_string($city);

/* this query with escaped $city will work */
if ($mysqli-&gt;query("INSERT into myCity (Name) VALUES ('$city')")) {
    printf("%d Row inserted.\n", $mysqli-&gt;affected_rows);
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2526777"></a><p class="title"><b>Example 29.107. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TEMPORARY TABLE myCity LIKE City");

$city = "'s Hertogenbosch";

/* this query will fail, cause we didn't escape $city */
if (!mysqli_query($link, "INSERT into myCity (Name) VALUES ('$city')")) {
    printf("Error: %s\n", mysqli_sqlstate($link));
}

$city = mysqli_real_escape_string($link, $city);

/* this query with escaped $city will work */
if (mysqli_query($link, "INSERT into myCity (Name) VALUES ('$city')")) {
    printf("%d Row inserted.\n", mysqli_affected_rows($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 42000
1 Row inserted.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_character_set_name</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.real-query"></a>29.3.2.4.36. <code class="literal">mysqli::real_query</code>,
        <code class="literal">mysqli_real_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::real_query</code>
          </p><p>
            <code class="literal">mysqli_real_query</code>
          </p><p>
            Execute an SQL query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">real_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedural style
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_real_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Executes a single query against the database whose result can
        then be retrieved or stored using the
        <code class="literal">mysqli_store_result</code> or
        <code class="literal">mysqli_use_result</code> functions.
      </p><p>
        In order to determine if a given query should return a result
        set or not, see <code class="literal">mysqli_field_count</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.rollback"></a>29.3.2.4.37. <code class="literal">mysqli::rollback</code>, <code class="literal">mysqli_rollback</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::rollback</code>
          </p><p>
            <code class="literal">mysqli_rollback</code>
          </p><p>
            Rolls back current transaction
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::rollback</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_rollback</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Rollbacks the current transaction for the database.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2527306"></a><p class="title"><b>Example 29.108. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* disable autocommit */
$mysqli-&gt;autocommit(FALSE);

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");
$mysqli-&gt;query("ALTER TABLE myCity Type=InnoDB");
$mysqli-&gt;query("INSERT INTO myCity SELECT * FROM City LIMIT 50");

/* commit insert */
$mysqli-&gt;commit();

/* delete all rows */
$mysqli-&gt;query("DELETE FROM myCity");

if ($result = $mysqli-&gt;query("SELECT COUNT(*) FROM myCity")) {
    $row = $result-&gt;fetch_row();
    printf("%d rows in table myCity.\n", $row[0]);
    /* Free result */
    $result-&gt;close();
}

/* Rollback */
$mysqli-&gt;rollback();

if ($result = $mysqli-&gt;query("SELECT COUNT(*) FROM myCity")) {
    $row = $result-&gt;fetch_row();
    printf("%d rows in table myCity (after rollback).\n", $row[0]);
    /* Free result */
    $result-&gt;close();
}

/* Drop table myCity */
$mysqli-&gt;query("DROP TABLE myCity");

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2527336"></a><p class="title"><b>Example 29.109. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* disable autocommit */
mysqli_autocommit($link, FALSE);

mysqli_query($link, "CREATE TABLE myCity LIKE City");
mysqli_query($link, "ALTER TABLE myCity Type=InnoDB");
mysqli_query($link, "INSERT INTO myCity SELECT * FROM City LIMIT 50");

/* commit insert */
mysqli_commit($link);

/* delete all rows */
mysqli_query($link, "DELETE FROM myCity");

if ($result = mysqli_query($link, "SELECT COUNT(*) FROM myCity")) {
    $row = mysqli_fetch_row($result);
    printf("%d rows in table myCity.\n", $row[0]);
    /* Free result */
    mysqli_free_result($result);
}

/* Rollback */
mysqli_rollback($link);

if ($result = mysqli_query($link, "SELECT COUNT(*) FROM myCity")) {
    $row = mysqli_fetch_row($result);
    printf("%d rows in table myCity (after rollback).\n", $row[0]);
    /* Free result */
    mysqli_free_result($result);
}

/* Drop table myCity */
mysqli_query($link, "DROP TABLE myCity");

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


0 rows in table myCity.
50 rows in table myCity (after rollback).


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.commit" title="29.3.2.4.6. mysqli::commit, mysqli_commit"><code class="literal">mysqli_commit</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.autocommit" title="29.3.2.4.2. mysqli::autocommit,
        mysqli_autocommit"><code class="literal">mysqli_autocommit</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.select-db"></a>29.3.2.4.38. <code class="literal">mysqli::select_db</code>,
        <code class="literal">mysqli_select_db</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::select_db</code>
          </p><p>
            <code class="literal">mysqli_select_db</code>
          </p><p>
            Selects the default database for database queries
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::select_db</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_select_db</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                      <span class="methodparam"><span class="type">string </span><span class="parameter">dbname</span></span>);</code><p>
        Selects the default database to be used when performing queries
        against the database connection.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function should only be used to change the default
          database for the connection. You can select the default
          database with 4th parameter in
          <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>dbname</code></em>
            </span></dt><dd><p>
                The database name.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2527667"></a><p class="title"><b>Example 29.110. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* return name of current default database */
if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database is %s.\n", $row[0]);
    $result-&gt;close();
}

/* change db to world db */
$mysqli-&gt;select_db("world");

/* return name of current default database */
if ($result = $mysqli-&gt;query("SELECT DATABASE()")) {
    $row = $result-&gt;fetch_row();
    printf("Default database is %s.\n", $row[0]);
    $result-&gt;close();
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2527689"></a><p class="title"><b>Example 29.111. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* return name of current default database */
if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database is %s.\n", $row[0]);
    mysqli_free_result($result);
}

/* change db to world db */
mysqli_select_db($link, "world");

/* return name of current default database */
if ($result = mysqli_query($link, "SELECT DATABASE()")) {
    $row = mysqli_fetch_row($result);
    printf("Default database is %s.\n", $row[0]);
    mysqli_free_result($result);
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Default database is test.
Default database is world.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>

          </td></tr><tr><td><code class="literal">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-charset"></a>29.3.2.4.39. <code class="literal">mysqli::set_charset</code>,
        <code class="literal">mysqli_set_charset</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_charset</code>
          </p><p>
            <code class="literal">mysqli_set_charset</code>
          </p><p>
            Sets the default client character set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::set_charset</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_set_charset</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">charset</span></span>);</code><p>
        Sets the default character set to be used when sending data from
        and to the database server.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>charset</code></em>
            </span></dt><dd><p>
                The charset to be set as default.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To use this function on a Windows platform you need MySQL
          client library version 4.1.11 or above (for MySQL 5.0 you need
          5.0.6 or above).
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This is the preferred way to change the charset. Using
          <code class="literal">mysqli::query</code> to execute <code class="literal">SET
          NAMES ..</code> is not reccomended.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2528034"></a><p class="title"><b>Example 29.112. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* change character set to utf8 */
if (!$mysqli-&gt;set_charset("utf8")) {
    printf("Error loading character set utf8: %s\n", $mysqli-&gt;error);
} else {
    printf("Current character set: %s\n", $mysqli-&gt;character_set_name());
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2528050"></a><p class="title"><b>Example 29.113. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'test');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* change character set to utf8 */
if (!mysqli_set_charset($link, "utf8")) {
    printf("Error loading character set utf8: %s\n", mysqli_error($link));
} else {
    printf("Current character set: %s\n", mysqli_character_set_name($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Current character set: utf8


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_character_set_name</code>

          </td></tr><tr><td><code class="literal">mysqli_real_escape_string</code>

          </td></tr><tr><td><a href="http://dev.mysql.com/doc/refman/5.1/en/charset-charsets.html" target="_top">List of character sets that MySQL supports</a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-local-infile-default"></a>29.3.2.4.40. <code class="literal">mysqli::set_local_infile_default</code>,
        <code class="literal">mysqli_set_local_infile_default</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_local_infile_default</code>
          </p><p>
            <code class="literal">mysqli_set_local_infile_default</code>
          </p><p>
            Unsets user defined handler for load local infile command
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_set_local_infile_default</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Deactivates a <code class="literal">LOAD DATA INFILE LOCAL</code> handler
        previously set with
        <code class="literal">mysqli_set_local_infile_handler</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="literal">mysqli_set_local_infile_handler</code>
        examples
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_set_local_infile_handler</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.set-local-infile-handler"></a>29.3.2.4.41. <code class="literal">mysqli::set_local_infile_handler</code>,
        <code class="literal">mysqli_set_local_infile_handler</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::set_local_infile_handler</code>
          </p><p>
            <code class="literal">mysqli_set_local_infile_handler</code>
          </p><p>
            Set callback function for LOAD DATA LOCAL INFILE command
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                     <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">set_local_infile_handler</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                                <span class="methodparam"><span class="type">callback </span><span class="parameter">read_func</span></span>);</code><br>}</pre><p>
        Set callback function for LOAD DATA LOCAL INFILE command
      </p><p>
        The callbacks task is to read input from the file specified in
        the <code class="literal">LOAD DATA LOCAL INFILE</code> and to reformat it
        into the format understood by <code class="literal">LOAD DATA
        INFILE</code>.
      </p><p>
        The returned data needs to match the format speficied in the
        <code class="literal">LOAD DATA</code>
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>read_func</code></em>
            </span></dt><dd><p>
                A callback function or object method taking the
                following parameters:
              </p><div class="variablelist"><dl><dt><span class="term">
                    <em class="parameter"><code>stream</code></em>
                  </span></dt><dd><p>
                      A PHP stream associated with the SQL commands
                      INFILE
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>&amp;buffer</code></em>
                  </span></dt><dd><p>
                      A string buffer to store the rewritten input into
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>buflen</code></em>
                  </span></dt><dd><p>
                      The maximum number of characters to be stored in
                      the buffer
                    </p></dd><dt><span class="term">
                    <em class="parameter"><code>&amp;errormsg</code></em>
                  </span></dt><dd><p>
                      If an error occures you can store an error message
                      in here
                    </p></dd></dl></div></dd></dl></div><p>
      </p><p>
        The callback function should return the number of characters
        stored in the <em class="parameter"><code>buffer</code></em> or a negative value
        if an error occured.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2528703"></a><p class="title"><b>Example 29.114. Object oriented style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  $db-&gt;real_connect("localhost","root","","test");

  function callme($stream, &amp;$buffer, $buflen, &amp;$errmsg)
  {
    $buffer = fgets($stream);

    echo $buffer;

    // convert to upper case and replace "," delimiter with [TAB]
    $buffer = strtoupper(str_replace(",", "\t", $buffer));

    return strlen($buffer);
  }


  echo "Input:\n";

  $db-&gt;set_local_infile_handler("callme");
  $db-&gt;query("LOAD DATA LOCAL INFILE 'input.txt' INTO TABLE t1");
  $db-&gt;set_local_infile_default();

  $res = $db-&gt;query("SELECT * FROM t1");

  echo "\nResult:\n";
  while ($row = $res-&gt;fetch_assoc()) {
    echo join(",", $row)."\n";
  }
?&gt;

   </pre></div><div class="example"><a name="id2528725"></a><p class="title"><b>Example 29.115. Procedural style</b></p><pre class="programlisting">
&lt;?php
  $db = mysqli_init();
  mysqli_real_connect($db, "localhost","root","","test");

  function callme($stream, &amp;$buffer, $buflen, &amp;$errmsg)
  {
    $buffer = fgets($stream);

    echo $buffer;

    // convert to upper case and replace "," delimiter with [TAB]
    $buffer = strtoupper(str_replace(",", "\t", $buffer));

    return strlen($buffer);
  }


  echo "Input:\n";

  mysqli_set_local_infile_handler($db, "callme");
  mysqli_query($db, "LOAD DATA LOCAL INFILE 'input.txt' INTO TABLE t1");
  mysqli_set_local_infile_default($db);

  $res = mysqli_query($db, "SELECT * FROM t1");


  echo "\nResult:\n";
  while ($row = mysqli_fetch_assoc($res)) {
    echo join(",", $row)."\n";
  }
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Input:
23,foo
42,bar

Output:
23,FOO
42,BAR


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_set_local_infile_default</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.sqlstate"></a>29.3.2.4.42. <code class="literal">mysqli-&gt;sqlstate</code>,
        <code class="literal">mysqli_sqlstate</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli-&gt;sqlstate</code>
          </p><p>
            <code class="literal">mysqli_sqlstate</code>
          </p><p>
            Returns the SQLSTATE error from previous MySQL operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_sqlstate</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error. The values
        are specified by ANSI SQL and ODBC. For a list of possible
        values, see
        <a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">http://dev.mysql.com/doc/mysql/en/error-handling.html</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that not all MySQL errors are yet mapped to
          SQLSTATE's. The value <code class="literal">HY000</code> (general
          error) is used for unmapped errors.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2529008"></a><p class="title"><b>Example 29.116. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Table City already exists, so we should get an error */
if (!$mysqli-&gt;query("CREATE TABLE City (ID INT, Name VARCHAR(30))")) {
    printf("Error - SQLSTATE %s.\n", $mysqli-&gt;sqlstate);
}

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2529025"></a><p class="title"><b>Example 29.117. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* Table City already exists, so we should get an error */
if (!mysqli_query($link, "CREATE TABLE City (ID INT, Name VARCHAR(30))")) {
    printf("Error - SQLSTATE %s.\n", mysqli_sqlstate($link));
}

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error - SQLSTATE 42S01.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.ssl-set"></a>29.3.2.4.43. <code class="literal">mysqli::ssl_set</code>, <code class="literal">mysqli_ssl_set</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::ssl_set</code>
          </p><p>
            <code class="literal">mysqli_ssl_set</code>
          </p><p>
            Used for establishing secure connections using SSL
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli::ssl_set</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                     <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_ssl_set</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">key</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">cert</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">ca</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">capath</span></span>,<br>                    <span class="methodparam"><span class="type">string </span><span class="parameter">cipher</span></span>);</code><p>
        Used for establishing secure connections using SSL. It must be
        called before <code class="literal">mysqli_real_connect</code>. This
        function does nothing unless OpenSSL support is enabled.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>key</code></em>
            </span></dt><dd><p>
                The path name to the key file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>cert</code></em>
            </span></dt><dd><p>
                The path name to the certificate file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>ca</code></em>
            </span></dt><dd><p>
                The path name to the certificate authority file.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>capath</code></em>
            </span></dt><dd><p>
                The pathname to a directory that contains trusted SSL CA
                certificates in PEM format.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>cipher</code></em>
            </span></dt><dd><p>
                A list of allowable ciphers to use for SSL encryption.
              </p></dd></dl></div><p>
      </p><p>
        Any unused SSL parameters may be given as

        <code class="constant">NULL</code>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        This function always returns

        <code class="constant">TRUE</code>

        value. If SSL setup is incorrect
        <code class="literal">mysqli_real_connect</code> will return an error
        when you attempt to connect.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>

          </td></tr><tr><td><code class="literal">mysqli_real_connect</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.stat"></a>29.3.2.4.44. <code class="literal">mysqli::stat</code>, <code class="literal">mysqli_stat</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::stat</code>
          </p><p>
            <code class="literal">mysqli_stat</code>
          </p><p>
            Gets the current system status
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli::stat</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stat</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        <a href="apis.html#apis-php-mysqli.stat" title="29.3.2.4.44. mysqli::stat, mysqli_stat"><code class="literal">mysqli_stat</code></a>
        returns a string containing information similar to that provided
        by the 'mysqladmin status' command. This includes
        uptime in seconds and the number of running threads, questions,
        reloads, and open tables.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string describing the server status.

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2529758"></a><p class="title"><b>Example 29.118. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf ("System status: %s\n", $mysqli-&gt;stat());

$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2529774"></a><p class="title"><b>Example 29.119. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

printf("System status: %s\n", mysqli_stat($link));

mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


System status: Uptime: 272  Threads: 1  Questions: 5340  Slow queries: 0
Opens: 13  Flush tables: 1  Open tables: 0  Queries per second avg: 19.632
Memory in use: 8496K  Max memory used: 8560K


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_get_server_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.stmt-init"></a>29.3.2.4.45. <code class="literal">mysqli::stmt_init</code>,
        <code class="literal">mysqli_stmt_init</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::stmt_init</code>
          </p><p>
            <code class="literal">mysqli_stmt_init</code>
          </p><p>
            Initializes a statement and returns an object for use with
            mysqli_stmt_prepare
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">mysqli_stmt </span><span class="methodname">stmt_init</span>();</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">mysqli_stmt </span><span class="methodname">mysqli_stmt_init</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Allocates and initializes a statement object suitable for
        <code class="literal">mysqli_stmt_prepare</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Any subsequent calls to any mysqli_stmt function will fail
          until <code class="literal">mysqli_stmt_prepare</code> was called.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_prepare</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.store-result"></a>29.3.2.4.46. <code class="literal">mysqli::store_result</code>,
        <code class="literal">mysqli_store_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::store_result</code>
          </p><p>
            <code class="literal">mysqli_store_result</code>
          </p><p>
            Transfers a result set from the last query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">store_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_store_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Transfers the result set from the last query on the database
        connection represented by the <em class="parameter"><code>link</code></em>
        parameter to be used with the
        <code class="literal">mysqli_data_seek</code> function.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a buffered result object or

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_store_result</code> returns

          <code class="constant">FALSE</code>

          in case the query didn't return a result set (if the
          query was, for example an INSERT statement). This function
          also returns

          <code class="constant">FALSE</code>

          if the reading of the result set failed. You can check if you
          have got an error by checking if
          <a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>
          doesn't return an empty string, if
          <a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>
          returns a non zero value, or if
          <code class="literal">mysqli_field_count</code> returns a non zero
          value. Also possible reason for this function returning

          <code class="constant">FALSE</code>

          after successfull call to
          <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>
          can be too large result set (memory for it cannot be
          allocated). If <code class="literal">mysqli_field_count</code> returns
          a non-zero value, the statement should have produced a
          non-empty result set.
        </p></div><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Although it is always good practice to free the memory used by
          the result of a query using the
          <code class="literal">mysqli_free_result</code> function, when
          transfering large result sets using the
          <code class="literal">mysqli_store_result</code> this becomes
          particularly important.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        See <code class="literal">mysqli_multi_query</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_real_query</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.thread-id"></a>29.3.2.4.47. <code class="literal">mysqli::thread_id</code>,
        <code class="literal">mysqli_thread_id</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::thread_id</code>
          </p><p>
            <code class="literal">mysqli_thread_id</code>
          </p><p>
            Returns the thread ID for the current connection
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">thread_id </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_thread_id</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        The <code class="literal">mysqli_thread_id</code> function returns the
        thread ID for the current connection which can then be killed
        using the
        <a href="apis.html#apis-php-mysqli.kill" title="29.3.2.4.26. mysqli::kill, mysqli_kill"><code class="literal">mysqli_kill</code></a>
        function. If the connection is lost and you reconnect with
        <a href="apis.html#apis-php-mysqli.ping" title="29.3.2.4.31. mysqli::ping, mysqli_ping"><code class="literal">mysqli_ping</code></a>,
        the thread ID will be other. Therefore you should get the thread
        ID only when you need it.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The thread ID is assigned on a connection-by-connection basis.
          Hence, if the connection is broken and then re-established a
          new thread ID will be assigned.
        </p><p>
          To kill a running query you can use the SQL command
          <code class="literal">KILL QUERY processid</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns the Thread ID for the current connection.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2530587"></a><p class="title"><b>Example 29.120. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = $mysqli-&gt;thread_id;

/* Kill connection */
$mysqli-&gt;kill($thread_id);

/* This should produce an error */
if (!$mysqli-&gt;query("CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", $mysqli-&gt;error);
    exit;
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2530604"></a><p class="title"><b>Example 29.121. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* determine our thread id */
$thread_id = mysqli_thread_id($link);

/* Kill connection */
mysqli_kill($link, $thread_id);

/* This should produce an error */
if (!mysqli_query($link, "CREATE TABLE myCity LIKE City")) {
    printf("Error: %s\n", mysqli_error($link));
    exit;
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: MySQL server has gone away


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.kill" title="29.3.2.4.26. mysqli::kill, mysqli_kill"><code class="literal">mysqli_kill</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.thread-safe"></a>29.3.2.4.48. <code class="literal">mysqli::thread_safe</code>,
        <code class="literal">mysqli_thread_safe</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::thread_safe</code>
          </p><p>
            <code class="literal">mysqli_thread_safe</code>
          </p><p>
            Returns whether thread safety is given or not
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_thread_safe</span>();</code><p>
        Tells whether the client library is compiled as thread-safe.
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="constant">TRUE</code>

        if the client library is thread-safe, otherwise

        <code class="constant">FALSE</code>

        .
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.use-result"></a>29.3.2.4.49. <code class="literal">mysqli::use_result</code>,
        <code class="literal">mysqli_use_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::use_result</code>
          </p><p>
            <code class="literal">mysqli_use_result</code>
          </p><p>
            Initiate a result set retrieval
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">use_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_use_result</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Used to initiate the retrieval of a result set from the last
        query executed using the <code class="literal">mysqli_real_query</code>
        function on the database connection.
      </p><p>
        Either this or the <code class="literal">mysqli_store_result</code>
        function must be called before the results of a query can be
        retrieved, and one or the other must be called to prevent the
        next query on that database connection from failing.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="literal">mysqli_use_result</code> function does not
          transfer the entire result set from the database and hence
          cannot be used functions such as
          <code class="literal">mysqli_data_seek</code> to move to a particular
          row within the set. To use this functionality, the result set
          must be stored using <code class="literal">mysqli_store_result</code>.
          One should not use <code class="literal">mysqli_use_result</code> if a
          lot of processing on the client side is performed, since this
          will tie up the server and prevent other threads from updating
          any tables from which the data is being fetched.
        </p></div><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an unbuffered result object or

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2530941"></a><p class="title"><b>Example 29.122. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli-&gt;multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli-&gt;use_result()) {
            while ($row = $result-&gt;fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result-&gt;close();
        }
        /* print divider */
        if ($mysqli-&gt;more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli-&gt;next_result());
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2530966"></a><p class="title"><b>Example 29.123. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if (mysqli_multi_query($link, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_use_result($link)) {
            while ($row = mysqli_fetch_row($result)) {
                printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($link)) {
            printf("-----------------\n");
        }
    } while (mysqli_next_result($link));
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


my_user@localhost
-----------------
Amersfoort
Maastricht
Dordrecht
Leiden
Haarlemmermeer


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_real_query</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli.warning-count"></a>29.3.2.4.50. <code class="literal">mysqli::warning_count</code>,
        <code class="literal">mysqli_warning_count</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli::warning_count</code>
          </p><p>
            <code class="literal">mysqli_warning_count</code>
          </p><p>
            Returns the number of warnings from the last query for the
            given link
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">warning_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_warning_count</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Returns the number of warnings from the last query in the
        connection.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          For retrieving warning messages you can use the SQL command
          <code class="literal">SHOW WARNINGS [limit row_count]</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> link</code></em>
            </span></dt><dd><p>
                Procedural style only: A link identifier returned by
                <a href="apis.html#apis-php-mysqli.connect" title="29.3.2.4.9. mysqli::__construct,
        mysqli_connect"><code class="literal">mysqli_connect</code></a>
                or
                <a href="apis.html#apis-php-mysqli.init" title="29.3.2.4.24. mysqli::init, mysqli_init"><code class="literal">mysqli_init</code></a>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Number of warnings or zero if there are no warnings.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2531235"></a><p class="title"><b>Example 29.124. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

/* a remarkable city in Wales */
$query = "INSERT INTO myCity (CountryCode, Name) VALUES('GBR',
        'Llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch')";

$mysqli-&gt;query($query);

if ($mysqli-&gt;warning_count) {
    if ($result = $mysqli-&gt;query("SHOW WARNINGS")) {
        $row = $result-&gt;fetch_row();
        printf("%s (%d): %s\n", $row[0], $row[1], $row[2]);
        $result-&gt;close();
    }
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2531255"></a><p class="title"><b>Example 29.125. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

/* a remarkable long city name in Wales */
$query = "INSERT INTO myCity (CountryCode, Name) VALUES('GBR',
        'Llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch')";

mysqli_query($link, $query);

if (mysqli_warning_count($link)) {
    if ($result = mysqli_query($link, "SHOW WARNINGS")) {
        $row = mysqli_fetch_row($result);
        printf("%s (%d): %s\n", $row[0], $row[1], $row[2]);
        mysqli_free_result($result);
    }
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Warning (1264): Data truncated for column 'Name' at row 1


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.errno" title="29.3.2.4.12. mysqli-&gt;errno, mysqli_errno"><code class="literal">mysqli_errno</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.error" title="29.3.2.4.13. mysqli-&gt;error, mysqli_error"><code class="literal">mysqli_error</code></a>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.sqlstate" title="29.3.2.4.42. mysqli-&gt;sqlstate,
        mysqli_sqlstate"><code class="literal">mysqli_sqlstate</code></a>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-stmt"></a>29.3.2.5. The MySQLi_STMT class</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.affected-rows">29.3.2.5.1. <code class="literal">mysqli_stmt-&gt;affected_rows</code>,
        <code class="literal">mysqli_stmt_affected_rows</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.attr-get">29.3.2.5.2. <code class="literal">mysqli_stmt::attr_get</code>,
        <code class="literal">mysqli_stmt_attr_get</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.attr-set">29.3.2.5.3. <code class="literal">mysqli_stmt::attr_set</code>,
        <code class="literal">mysqli_stmt_attr_set</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.bind-param">29.3.2.5.4. <code class="literal">mysqli_stmt::bind_param</code>,
        <code class="literal">mysqli_stmt_bind_param</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.bind-result">29.3.2.5.5. <code class="literal">mysqli_stmt::bind_result</code>,
        <code class="literal">mysqli_stmt_bind_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.close">29.3.2.5.6. <code class="literal">mysqli_stmt::close</code>,
        <code class="literal">mysqli_stmt_close</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.data-seek">29.3.2.5.7. <code class="literal">mysqli_stmt::data_seek</code>,
        <code class="literal">mysqli_stmt_data_seek</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.errno">29.3.2.5.8. <code class="literal">mysqli_stmt-&gt;errno</code>,
        <code class="literal">mysqli_stmt_errno</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.error">29.3.2.5.9. <code class="literal">mysqli_stmt-&gt;error</code>,
        <code class="literal">mysqli_stmt_error</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.execute">29.3.2.5.10. <code class="literal">mysqli_stmt-&gt;execute</code>,
        <code class="literal">mysqli_stmt_execute</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.fetch">29.3.2.5.11. <code class="literal">mysqli_stmt::fetch</code>,
        <code class="literal">mysqli_stmt_fetch</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.field-count">29.3.2.5.12. <code class="literal">mysqli_stmt-&gt;field_count</code>,
        <code class="literal">mysqli_stmt_field_count</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.free-result">29.3.2.5.13. <code class="literal">stmt::free_result</code>,
        <code class="literal">mysqli_stmt_free_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.get-warnings">29.3.2.5.14. <code class="literal">mysqli_stmt::get_warnings</code>,
        <code class="literal">mysqli_stmt_get_warnings</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.insert-id">29.3.2.5.15. <code class="literal">mysqli_stmt-&gt;insert_id</code>,
        <code class="literal">mysqli_stmt_insert_id</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.num-rows">29.3.2.5.16. <code class="literal">mysqli_stmt::num_rows</code>,
        <code class="literal">mysqli_stmt_num_rows</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.param-count">29.3.2.5.17. <code class="literal">mysqli_stmt-&gt;param_count</code>,
        <code class="literal">mysqli_stmt_param_count</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.prepare">29.3.2.5.18. <code class="literal">mysqli_stmt::prepare</code>,
        <code class="literal">mysqli_stmt_prepare</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.reset">29.3.2.5.19. <code class="literal">mysqli_stmt::reset</code>,
        <code class="literal">mysqli_stmt_reset</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.result-metadata">29.3.2.5.20. <code class="literal">mysqli_stmt::result_metadata</code>,
        <code class="literal">mysqli_stmt_result_metadata</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.send-long-data">29.3.2.5.21. <code class="literal">mysqli_stmt::send_long_data</code>,
        <code class="literal">mysqli_stmt_send_long_data</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.sqlstate">29.3.2.5.22. <code class="literal">mysqli_stmt::sqlstate</code>,
        <code class="literal">mysqli_stmt_sqlstate</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-stmt.store-result">29.3.2.5.23. <code class="literal">mysqli_stmt::store_result</code>,
        <code class="literal">mysqli_stmt_store_result</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents a prepared statement.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_STMT</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_STMT</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">param_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_affected_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_attr_get</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                           <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt_attr_set</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>,<br>                            <span class="methodparam"><span class="type">int </span><span class="parameter">mode</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::bind_param</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                               <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                               <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::bind_result</span>(<span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                                <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::close</span>();</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_stmt::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_errno</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_stmt_error</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::execute</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::fetch</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_field_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_stmt::free_result</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_stmt::get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_stmt_insert_id</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_num_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_stmt_param_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_stmt::prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::reset</span>();</code><br><code class="methodsynopsis">  <span class="type">mysqli_result </span><span class="methodname">mysqli_stmt::result_metadata</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::send_long_data</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                   <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><br><code class="methodsynopsis">  <span class="type">string </span><span class="methodname">mysqli_stmt_sqlstate</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_stmt::store_result</span>();</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.affected-rows"></a>29.3.2.5.1. <code class="literal">mysqli_stmt-&gt;affected_rows</code>,
        <code class="literal">mysqli_stmt_affected_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;affected_rows</code>
          </p><p>
            <code class="literal">mysqli_stmt_affected_rows</code>
          </p><p>
            Returns the total number of rows changed, deleted, or
            inserted by the last executed statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">affected_rows </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_affected_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of rows affected by
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or
        <code class="literal">DELETE</code> query.
      </p><p>
        This function only works with queries which update a table. In
        order to get the number of rows from a SELECT query, use
        <code class="literal">mysqli_stmt_num_rows</code> instead.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer greater than zero indicates the number of rows
        affected or retrieved. Zero indicates that no records where
        updated for an UPDATE/DELETE statement, no rows matched the
        WHERE clause in the query or that no query has yet been
        executed. -1 indicates that the query has returned an error.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of affected rows is greater than maximal PHP int
          value, the number of affected rows will be returned as a
          string value.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2532254"></a><p class="title"><b>Example 29.126. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* create temp table */
$mysqli-&gt;query("CREATE TEMPORARY TABLE myCountry LIKE Country");

$query = "INSERT INTO myCountry SELECT * FROM Country WHERE Code LIKE ?";

/* prepare statement */
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* Bind variable for placeholder */
    $code = 'A%';
    $stmt-&gt;bind_param("s", $code);

    /* execute statement */
    $stmt-&gt;execute();

    printf("rows inserted: %d\n", $stmt-&gt;affected_rows);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2532276"></a><p class="title"><b>Example 29.127. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* create temp table */
mysqli_query($link, "CREATE TEMPORARY TABLE myCountry LIKE Country");

$query = "INSERT INTO myCountry SELECT * FROM Country WHERE Code LIKE ?";

/* prepare statement */
if ($stmt = mysqli_prepare($link, $query)) {

    /* Bind variable for placeholder */
    $code = 'A%';
    mysqli_stmt_bind_param($stmt, "s", $code);

    /* execute statement */
    mysqli_stmt_execute($stmt);

    printf("rows inserted: %d\n", mysqli_stmt_affected_rows($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


rows inserted: 17


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_num_rows</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.attr-get"></a>29.3.2.5.2. <code class="literal">mysqli_stmt::attr_get</code>,
        <code class="literal">mysqli_stmt_attr_get</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::attr_get</code>
          </p><p>
            <code class="literal">mysqli_stmt_attr_get</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_attr_get</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.attr-set"></a>29.3.2.5.3. <code class="literal">mysqli_stmt::attr_set</code>,
        <code class="literal">mysqli_stmt_attr_set</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::attr_set</code>
          </p><p>
            <code class="literal">mysqli_stmt_attr_set</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_attr_set</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">attr</span></span>,<br>                          <span class="methodparam"><span class="type">int </span><span class="parameter">mode</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.bind-param"></a>29.3.2.5.4. <code class="literal">mysqli_stmt::bind_param</code>,
        <code class="literal">mysqli_stmt_bind_param</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::bind_param</code>
          </p><p>
            <code class="literal">mysqli_stmt_bind_param</code>
          </p><p>
            Binds variables to a prepared statement as parameters
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::bind_param</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_bind_param</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                            <span class="methodparam"><span class="type">string </span><span class="parameter">types</span></span>,<br>                            <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                            <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><p>
        Bind variables for the parameter markers in the SQL statement
        that was passed to
        <a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If data size of a variable exceeds max. allowed packet size
          (max_allowed_packet), you have to specify <code class="literal">b</code>
          in <em class="parameter"><code>types</code></em> and use
          <code class="literal">mysqli_stmt_send_long_data</code> to send the
          data in packets.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>types</code></em>
            </span></dt><dd><p>
                A string that contains one or more characters which
                specify the types for the corresponding bind variables:

                </p><div class="table"><a name="id2532861"></a><p class="title"><b>Table 29.8. Type specification chars</b></p><table summary="Type specification chars" border="1"><colgroup><col><col></colgroup><thead><tr><th>Character</th><th>Description</th></tr></thead><tbody><tr><td>i</td><td>corresponding variable has type integer</td></tr><tr><td>d</td><td>corresponding variable has type double</td></tr><tr><td>s</td><td>corresponding variable has type string</td></tr><tr><td>b</td><td>corresponding variable is a blob and will be sent in packets</td></tr></tbody></table></div><p>
              </p></dd><dt><span class="term">
              <em class="parameter"><code>var1</code></em>
            </span></dt><dd><p>
                The number of variables and length of string
                <em class="parameter"><code>types</code></em> must match the parameters
                in the statement.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2532999"></a><p class="title"><b>Example 29.128. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = $mysqli-&gt;prepare("INSERT INTO CountryLanguage VALUES (?, ?, ?, ?)");
$stmt-&gt;bind_param('sssd', $code, $language, $official, $percent);

$code = 'DEU';
$language = 'Bavarian';
$official = "F";
$percent = 11.2;

/* execute prepared statement */
$stmt-&gt;execute();

printf("%d Row inserted.\n", $stmt-&gt;affected_rows);

/* close statement and connection */
$stmt-&gt;close();

/* Clean up table CountryLanguage */
$mysqli-&gt;query("DELETE FROM CountryLanguage WHERE Language='Bavarian'");
printf("%d Row deleted.\n", $mysqli-&gt;affected_rows);

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2533022"></a><p class="title"><b>Example 29.129. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = mysqli_prepare($link, "INSERT INTO CountryLanguage VALUES (?, ?, ?, ?)");
mysqli_stmt_bind_param($stmt, 'sssd', $code, $language, $official, $percent);

$code = 'DEU';
$language = 'Bavarian';
$official = "F";
$percent = 11.2;

/* execute prepared statement */
mysqli_stmt_execute($stmt);

printf("%d Row inserted.\n", mysqli_stmt_affected_rows($stmt));

/* close statement and connection */
mysqli_stmt_close($stmt);

/* Clean up table CountryLanguage */
mysqli_query($link, "DELETE FROM CountryLanguage WHERE Language='Bavarian'");
printf("%d Row deleted.\n", mysqli_affected_rows($link));

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


1 Row inserted.
1 Row deleted.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_bind_result</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_fetch</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_send_long_data</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.bind-result"></a>29.3.2.5.5. <code class="literal">mysqli_stmt::bind_result</code>,
        <code class="literal">mysqli_stmt_bind_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::bind_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_bind_result</code>
          </p><p>
            Binds variables to a prepared statement for result storage
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::bind_result</span>(<span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                              <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_bind_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">var1</span></span>,<br>                             <span class="methodparam"><span class="type">mixed </span><span class="parameter">...</span></span>);</code><p>
        Binds columns in the result set to variables.
      </p><p>
        When <code class="literal">mysqli_stmt_fetch</code> is called to fetch
        data, the MySQL client/server protocol places the data for the
        bound columns into the specified variables <em class="parameter"><code>var1,
        ...</code></em>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that all columns must be bound after
          <code class="literal">mysqli_stmt_execute</code> and prior to calling
          <code class="literal">mysqli_stmt_fetch</code>. Depending on column
          types bound variables can silently change to the corresponding
          PHP type.
        </p><p>
          A column can be bound or rebound at any time, even after a
          result set has been partially retrieved. The new binding takes
          effect the next time <code class="literal">mysqli_stmt_fetch</code> is
          called.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>var1</code></em>
            </span></dt><dd><p>
                The variable to be bound.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2533412"></a><p class="title"><b>Example 29.130. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* prepare statement */
if ($stmt = $mysqli-&gt;prepare("SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
    $stmt-&gt;execute();

    /* bind variables to prepared statement */
    $stmt-&gt;bind_result($col1, $col2);

    /* fetch values */
    while ($stmt-&gt;fetch()) {
        printf("%s %s\n", $col1, $col2);
    }

    /* close statement */
    $stmt-&gt;close();
}
/* close connection */
$mysqli-&gt;close();

?&gt;

  </pre></div><div class="example"><a name="id2533434"></a><p class="title"><b>Example 29.131. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* prepare statement */
if ($stmt = mysqli_prepare($link, "SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
    mysqli_stmt_execute($stmt);

    /* bind variables to prepared statement */
    mysqli_stmt_bind_result($stmt, $col1, $col2);

    /* fetch values */
    while (mysqli_stmt_fetch($stmt)) {
        printf("%s %s\n", $col1, $col2);
    }

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


AFG Afghanistan
ALB Albania
DZA Algeria
ASM American Samoa
AND Andorra


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_bind_param</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_execute</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_fetch</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_prepare</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_init</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.close"></a>29.3.2.5.6. <code class="literal">mysqli_stmt::close</code>,
        <code class="literal">mysqli_stmt_close</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::close</code>
          </p><p>
            <code class="literal">mysqli_stmt_close</code>
          </p><p>
            Closes a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::close</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_close</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Closes a prepared statement.
        <code class="literal">mysqli_stmt_close</code> also deallocates the
        statement handle. If the current statement has pending or unread
        results, this function cancels them so that the next query can
        be executed.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.data-seek"></a>29.3.2.5.7. <code class="literal">mysqli_stmt::data_seek</code>,
        <code class="literal">mysqli_stmt_data_seek</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::data_seek</code>
          </p><p>
            <code class="literal">mysqli_stmt_data_seek</code>
          </p><p>
            Seeks to an arbitray row in statement result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt_data_seek</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                           <span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><p>
        Seeks to an arbitrary result pointer in the statement result
        set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>offset</code></em>
            </span></dt><dd><p>
                Must be between zero and the total number of rows minus
                one (0.. <code class="literal">mysqli_stmt_num_rows</code> - 1).
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2533959"></a><p class="title"><b>Example 29.132. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($name, $code);

    /* store result */
    $stmt-&gt;store_result();

    /* seek to row no. 400 */
    $stmt-&gt;data_seek(399);

    /* fetch values */
    $stmt-&gt;fetch();

    printf ("City: %s  Countrycode: %s\n", $name, $code);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2533983"></a><p class="title"><b>Example 29.133. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $name, $code);

    /* store result */
    mysqli_stmt_store_result($stmt);

    /* seek to row no. 400 */
    mysqli_stmt_data_seek($stmt, 399);

    /* fetch values */
    mysqli_stmt_fetch($stmt);

    printf ("City: %s  Countrycode: %s\n", $name, $code);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


City: Benin City  Countrycode: NGA


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.errno"></a>29.3.2.5.8. <code class="literal">mysqli_stmt-&gt;errno</code>,
        <code class="literal">mysqli_stmt_errno</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;errno</code>
          </p><p>
            <code class="literal">mysqli_stmt_errno</code>
          </p><p>
            Returns the error code for the most recent statement call
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">errno </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_errno</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the error code for the most recently invoked statement
        function that can succeed or fail.
      </p><p>
        Client error message numbers are listed in the MySQL
        <code class="filename">errmsg.h</code> header file, server error message
        numbers are listed in <code class="filename">mysqld_error.h</code>. In
        the MySQL source distribution you can find a complete list of
        error messages and error numbers in the file
        <code class="filename">Docs/mysqld_error.txt</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An error code value. Zero means no error occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2534250"></a><p class="title"><b>Example 29.134. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %d.\n", $stmt-&gt;errno);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2534270"></a><p class="title"><b>Example 29.135. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %d.\n", mysqli_stmt_errno($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 1146.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_error</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_sqlstate</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.error"></a>29.3.2.5.9. <code class="literal">mysqli_stmt-&gt;error</code>,
        <code class="literal">mysqli_stmt_error</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;error</code>
          </p><p>
            <code class="literal">mysqli_stmt_error</code>
          </p><p>
            Returns a string description for last statement error
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">error </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stmt_error</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns a containing the error message for the most recently
        invoked statement function that can succeed or fail.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        A string that describes the error. An empty string if no error
        occurred.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2534511"></a><p class="title"><b>Example 29.136. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %s.\n", $stmt-&gt;error);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2534532"></a><p class="title"><b>Example 29.137. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %s.\n", mysqli_stmt_error($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: Table 'world.myCountry' doesn't exist.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_sqlstate</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.execute"></a>29.3.2.5.10. <code class="literal">mysqli_stmt-&gt;execute</code>,
        <code class="literal">mysqli_stmt_execute</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;execute</code>
          </p><p>
            <code class="literal">mysqli_stmt_execute</code>
          </p><p>
            Executes a prepared Query
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::execute</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_execute</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Executes a query that has been previously prepared using the
        <a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>
        function. When executed any parameter markers which exist will
        automatically be replaced with the appropiate data.
      </p><p>
        If the statement is <code class="literal">UPDATE</code>,
        <code class="literal">DELETE</code>, or <code class="literal">INSERT</code>, the
        total number of affected rows can be determined by using the
        <code class="literal">mysqli_stmt_affected_rows</code> function.
        Likewise, if the query yields a result set the
        <code class="literal">mysqli_stmt_fetch</code> function is used.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When using <code class="literal">mysqli_stmt_execute</code>, the
          <code class="literal">mysqli_stmt_fetch</code> function must be used
          to fetch the data prior to performing any additional queries.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2534828"></a><p class="title"><b>Example 29.138. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCity LIKE City");

/* Prepare an insert statement */
$query = "INSERT INTO myCity (Name, CountryCode, District) VALUES (?,?,?)";
$stmt = $mysqli-&gt;prepare($query);

$stmt-&gt;bind_param("sss", $val1, $val2, $val3);

$val1 = 'Stuttgart';
$val2 = 'DEU';
$val3 = 'Baden-Wuerttemberg';

/* Execute the statement */
$stmt-&gt;execute();

$val1 = 'Bordeaux';
$val2 = 'FRA';
$val3 = 'Aquitaine';

/* Execute the statement */
$stmt-&gt;execute();

/* close statement */
$stmt-&gt;close();

/* retrieve all rows from myCity */
$query = "SELECT Name, CountryCode, District FROM myCity";
if ($result = $mysqli-&gt;query($query)) {
    while ($row = $result-&gt;fetch_row()) {
        printf("%s (%s,%s)\n", $row[0], $row[1], $row[2]);
    }
    /* free result set */
    $result-&gt;close();
}

/* remove table */
$mysqli-&gt;query("DROP TABLE myCity");

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2534850"></a><p class="title"><b>Example 29.139. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCity LIKE City");

/* Prepare an insert statement */
$query = "INSERT INTO myCity (Name, CountryCode, District) VALUES (?,?,?)";
$stmt = mysqli_prepare($link, $query);

mysqli_stmt_bind_param($stmt, "sss", $val1, $val2, $val3);

$val1 = 'Stuttgart';
$val2 = 'DEU';
$val3 = 'Baden-Wuerttemberg';

/* Execute the statement */
mysqli_stmt_execute($stmt);

$val1 = 'Bordeaux';
$val2 = 'FRA';
$val3 = 'Aquitaine';

/* Execute the statement */
mysqli_stmt_execute($stmt);

/* close statement */
mysqli_stmt_close($stmt);

/* retrieve all rows from myCity */
$query = "SELECT Name, CountryCode, District FROM myCity";
if ($result = mysqli_query($link, $query)) {
    while ($row = mysqli_fetch_row($result)) {
        printf("%s (%s,%s)\n", $row[0], $row[1], $row[2]);
    }
    /* free result set */
    mysqli_free_result($result);
}

/* remove table */
mysqli_query($link, "DROP TABLE myCity");

/* close connection */
mysqli_close($link);
?&gt;

     </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Stuttgart (DEU,Baden-Wuerttemberg)
Bordeaux (FRA,Aquitaine)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.fetch"></a>29.3.2.5.11. <code class="literal">mysqli_stmt::fetch</code>,
        <code class="literal">mysqli_stmt_fetch</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::fetch</code>
          </p><p>
            <code class="literal">mysqli_stmt_fetch</code>
          </p><p>
            Fetch results from a prepared statement into the bound
            variables
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::fetch</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_fetch</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Fetch the result from a prepared statement into the variables
        bound by <code class="literal">mysqli_stmt_bind_result</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that all columns must be bound by the application before
          calling <code class="literal">mysqli_stmt_fetch</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><div class="table"><a name="id2535099"></a><p class="title"><b>Table 29.9. Return Values</b></p><table summary="Return Values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">TRUE</code></td><td>Success. Data has been fetched</td></tr><tr><td><code class="constant">FALSE</code></td><td>Error occured</td></tr><tr><td><code class="constant">NULL</code></td><td>No more rows/data exists or data truncation occurred</td></tr></tbody></table></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2535179"></a><p class="title"><b>Example 29.140. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 150,5";

if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute statement */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($name, $code);

    /* fetch values */
    while ($stmt-&gt;fetch()) {
        printf ("%s (%s)\n", $name, $code);
    }

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2535202"></a><p class="title"><b>Example 29.141. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 150,5";

if ($stmt = mysqli_prepare($link, $query)) {

    /* execute statement */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $name, $code);

    /* fetch values */
    while (mysqli_stmt_fetch($stmt)) {
        printf ("%s (%s)\n", $name, $code);
    }

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Rockford (USA)
Tallahassee (USA)
Salinas (USA)
Santa Clarita (USA)
Springfield (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_error</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_bind_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.field-count"></a>29.3.2.5.12. <code class="literal">mysqli_stmt-&gt;field_count</code>,
        <code class="literal">mysqli_stmt_field_count</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_stmt_field_count</code>
          </p><p>
            Returns the number of field in the given statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_field_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.free-result"></a>29.3.2.5.13. <code class="literal">stmt::free_result</code>,
        <code class="literal">mysqli_stmt_free_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">stmt::free_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_free_result</code>
          </p><p>
            Frees stored result memory for the given statement handle
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt::free_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_stmt_free_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Frees the result memory associated with the statement, which was
        allocated by <code class="literal">mysqli_stmt_store_result</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.get-warnings"></a>29.3.2.5.14. <code class="literal">mysqli_stmt::get_warnings</code>,
        <code class="literal">mysqli_stmt_get_warnings</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::get_warnings</code>
          </p><p>
            <code class="literal">mysqli_stmt_get_warnings</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_stmt::get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><br><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_stmt_get_warnings</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.insert-id"></a>29.3.2.5.15. <code class="literal">mysqli_stmt-&gt;insert_id</code>,
        <code class="literal">mysqli_stmt_insert_id</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;insert_id</code>
          </p><p>
            <code class="literal">mysqli_stmt_insert_id</code>
          </p><p>
            Get the ID generated from the previous INSERT operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">insert_id </span>;</code><br>}</pre><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_stmt_insert_id</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.num-rows"></a>29.3.2.5.16. <code class="literal">mysqli_stmt::num_rows</code>,
        <code class="literal">mysqli_stmt_num_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::num_rows</code>
          </p><p>
            <code class="literal">mysqli_stmt_num_rows</code>
          </p><p>
            Return the number of rows in statements result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>}</pre><p>
        Procedural style :
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_num_rows</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of rows in the result set. The use of
        <code class="literal">mysqli_stmt_num_rows</code> depends on whether or
        not you used <code class="literal">mysqli_stmt_store_result</code> to
        buffer the entire result set in the statement handle.
      </p><p>
        If you use <code class="literal">mysqli_stmt_store_result</code>,
        <code class="literal">mysqli_stmt_num_rows</code> may be called
        immediately.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An integer representing the number of rows in result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2536019"></a><p class="title"><b>Example 29.142. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* store result */
    $stmt-&gt;store_result();

    printf("Number of rows: %d.\n", $stmt-&gt;num_rows);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2536037"></a><p class="title"><b>Example 29.143. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* store result */
    mysqli_stmt_store_result($stmt);

    printf("Number of rows: %d.\n", mysqli_stmt_num_rows($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Number of rows: 20.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_affected_rows</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_store_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.param-count"></a>29.3.2.5.17. <code class="literal">mysqli_stmt-&gt;param_count</code>,
        <code class="literal">mysqli_stmt_param_count</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt-&gt;param_count</code>
          </p><p>
            <code class="literal">mysqli_stmt_param_count</code>
          </p><p>
            Returns the number of parameter for the given statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">param_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_stmt_param_count</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns the number of parameter markers present in the prepared
        statement.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an integer representing the number of parameters.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2536293"></a><p class="title"><b>Example 29.144. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($stmt = $mysqli-&gt;prepare("SELECT Name FROM Country WHERE Name=? OR Code=?")) {

    $marker = $stmt-&gt;param_count;
    printf("Statement has %d markers.\n", $marker);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2536313"></a><p class="title"><b>Example 29.145. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($stmt = mysqli_prepare($link, "SELECT Name FROM Country WHERE Name=? OR Code=?")) {

    $marker = mysqli_stmt_param_count($stmt);
    printf("Statement has %d markers.\n", $marker);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Statement has 2 markers.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.prepare"></a>29.3.2.5.18. <code class="literal">mysqli_stmt::prepare</code>,
        <code class="literal">mysqli_stmt_prepare</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::prepare</code>
          </p><p>
            <code class="literal">mysqli_stmt_prepare</code>
          </p><p>
            Prepare an SQL statement for execution
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_stmt::prepare</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br><p>
        Procedure style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_prepare</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Prepares the SQL query pointed to by the null-terminated string
        query.
      </p><p>
        The parameter markers must be bound to application variables
        using <code class="literal">mysqli_stmt_bind_param</code> and/or
        <code class="literal">mysqli_stmt_bind_result</code> before executing
        the statement or fetching rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>query</code></em>
            </span></dt><dd><p>
                The query, as a string. It must consist of a single SQL
                statement.
              </p><p>
                You can include one or more parameter markers in the SQL
                statement by embedding question mark
                (<code class="literal">?</code>) characters at the appropriate
                positions.
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  You should not add a terminating semicolon or
                  <code class="literal">\g</code> to the statement.
                </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                  The markers are legal only in certain places in SQL
                  statements. For example, they are allowed in the
                  VALUES() list of an INSERT statement (to specify
                  column values for a row), or in a comparison with a
                  column in a WHERE clause to specify a comparison
                  value.
                </p><p>
                  However, they are not allowed for identifiers (such as
                  table or column names), in the select list that names
                  the columns to be returned by a SELECT statement), or
                  to specify both operands of a binary operator such as
                  the <code class="literal">=</code> equal sign. The latter
                  restriction is necessary because it would be
                  impossible to determine the parameter type. In
                  general, parameters are legal only in Data
                  Manipulation Languange (DML) statements, and not in
                  Data Definition Language (DDL) statements.
                </p></div></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2536658"></a><p class="title"><b>Example 29.146. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt =  $mysqli-&gt;stmt_init();
if ($stmt-&gt;prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt-&gt;bind_param("s", $city);

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($district);

    /* fetch value */
    $stmt-&gt;fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2536681"></a><p class="title"><b>Example 29.147. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt = mysqli_stmt_init($link);
if (mysqli_stmt_prepare($stmt, 'SELECT District FROM City WHERE Name=?')) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Amersfoort is in district Utrecht


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        <code class="literal">mysqli_stmt_init</code>,
        <code class="literal">mysqli_stmt_execute</code>,
        <code class="literal">mysqli_stmt_fetch</code>,
        <code class="literal">mysqli_stmt_bind_param</code>,
        <code class="literal">mysqli_stmt_bind_result</code>
        <code class="literal">mysqli_stmt_close</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.reset"></a>29.3.2.5.19. <code class="literal">mysqli_stmt::reset</code>,
        <code class="literal">mysqli_stmt_reset</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::reset</code>
          </p><p>
            <code class="literal">mysqli_stmt_reset</code>
          </p><p>
            Resets a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::reset</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_reset</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Resets a prepared statement on client and server to state after
        prepare.
      </p><p>
        For now this is mainly used to reset data sent with
        <code class="literal">mysqli_stmt_send_long_data</code>.
      </p><p>
        To prepare a statement with another query use function
        <code class="literal">mysqli_stmt_prepare</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.result-metadata"></a>29.3.2.5.20. <code class="literal">mysqli_stmt::result_metadata</code>,
        <code class="literal">mysqli_stmt_result_metadata</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::result_metadata</code>
          </p><p>
            <code class="literal">mysqli_stmt_result_metadata</code>
          </p><p>
            Returns result set metadata from a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_stmt::result_metadata</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mysqli_result </span><span class="methodname">mysqli_stmt_result_metadata</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        If a statement passed to
        <a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>
        is one that produces a result set,
        <code class="literal">mysqli_stmt_result_metadata</code> returns the
        result object that can be used to process the meta information
        such as total number of fields and individual field information.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This result set pointer can be passed as an argument to any of
          the field-based functions that process result set metadata,
          such as:

          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <code class="literal">mysqli_num_fields</code>
              </p></li><li><p>
                <code class="literal">mysqli_fetch_field</code>
              </p></li><li><p>
                <code class="literal">mysqli_fetch_field_direct</code>
              </p></li><li><p>
                <code class="literal">mysqli_fetch_fields</code>
              </p></li><li><p>
                <code class="literal">mysqli_field_count</code>
              </p></li><li><p>
                <code class="literal">mysqli_field_seek</code>
              </p></li><li><p>
                <code class="literal">mysqli_field_tell</code>
              </p></li><li><p>
                <code class="literal">mysqli_free_result</code>
              </p></li></ul></div><p>
        </p></div><p>
        The result set structure should be freed when you are done with
        it, which you can do by passing it to
        <code class="literal">mysqli_free_result</code>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The result set returned by
          <code class="literal">mysqli_stmt_result_metadata</code> contains only
          metadata. It does not contain any row results. The rows are
          obtained by using the statement handle with
          <code class="literal">mysqli_stmt_fetch</code>.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a result object or

        <code class="constant">FALSE</code>

        if an error occured.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2537269"></a><p class="title"><b>Example 29.148. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

$mysqli-&gt;query("DROP TABLE IF EXISTS friends");
$mysqli-&gt;query("CREATE TABLE friends (id int, name varchar(20))");

$mysqli-&gt;query("INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

$stmt = $mysqli-&gt;prepare("SELECT id, name FROM friends");
$stmt-&gt;execute();

/* get resultset for metadata */
$result = $stmt-&gt;result_metadata();

/* retrieve field information from metadata result set */
$field = $result-&gt;fetch_field();

printf("Fieldname: %s\n", $field-&gt;name);

/* close resultset */
$result-&gt;close();

/* close connection */
$mysqli-&gt;close();
?&gt;

    </pre></div><p>

        </p><div class="example"><a name="id2537290"></a><p class="title"><b>Example 29.149. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "test");

mysqli_query($link, "DROP TABLE IF EXISTS friends");
mysqli_query($link, "CREATE TABLE friends (id int, name varchar(20))");

mysqli_query($link, "INSERT INTO friends VALUES (1,'Hartmut'), (2, 'Ulf')");

$stmt = mysqli_prepare($link, "SELECT id, name FROM friends");
mysqli_stmt_execute($stmt);

/* get resultset for metadata */
$result = mysqli_stmt_result_metadata($stmt);

/* retrieve field information from metadata result set */
$field = mysqli_fetch_field($result);

printf("Fieldname: %s\n", $field-&gt;name);

/* close resultset */
mysqli_free_result($result);

/* close connection */
mysqli_close($link);
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_free_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.send-long-data"></a>29.3.2.5.21. <code class="literal">mysqli_stmt::send_long_data</code>,
        <code class="literal">mysqli_stmt_send_long_data</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::send_long_data</code>
          </p><p>
            <code class="literal">mysqli_stmt_send_long_data</code>
          </p><p>
            Send data in blocks
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method)
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::send_long_data</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                 <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_send_long_data</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>,<br>                                <span class="methodparam"><span class="type">int </span><span class="parameter">param_nr</span></span>,<br>                                <span class="methodparam"><span class="type">string </span><span class="parameter">data</span></span>);</code><p>
        Allows to send parameter data to the server in pieces (or
        chunks), e.g. if the size of a blob exceeds the size of
        <code class="literal">max_allowed_packet</code>. This function can be
        called multiple times to send the parts of a character or binary
        data value for a column, which must be one of the TEXT or BLOB
        datatypes.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>param_nr</code></em>
            </span></dt><dd><p>
                Indicates which parameter to associate the data with.
                Parameters are numbered beginning with 0.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>data</code></em>
            </span></dt><dd><p>
                A string containing data to be sent.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2537632"></a><p class="title"><b>Example 29.150. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$stmt = $mysqli-&gt;prepare("INSERT INTO messages (message) VALUES (?)");
$null = NULL;
$stmt-&gt;bind_param("b", $null);
$fp = fopen("messages.txt", "r");
while (!feof($fp)) {
    $stmt-&gt;send_long_data(0, fread($fp, 8192));
}
fclose($fp);
$stmt-&gt;execute();
?&gt;

  </pre></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.sqlstate"></a>29.3.2.5.22. <code class="literal">mysqli_stmt::sqlstate</code>,
        <code class="literal">mysqli_stmt_sqlstate</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::sqlstate</code>
          </p><p>
            <code class="literal">mysqli_stmt_sqlstate</code>
          </p><p>
            Returns SQLSTATE error from previous statement operation
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_stmt</span></span> {<br><code class="fieldsynopsis">  <span class="type">string </span><span class="varname">sqlstate </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">string </span><span class="methodname">mysqli_stmt_sqlstate</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        Returns a string containing the SQLSTATE error code for the most
        recently invoked prepared statement function that can succeed or
        fail. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error. The values
        are specified by ANSI SQL and ODBC. For a list of possible
        values, see
        <a href="http://dev.mysql.com/doc/mysql/en/error-handling.html" target="_top">http://dev.mysql.com/doc/mysql/en/error-handling.html</a>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns a string containing the SQLSTATE error code for the last
        error. The error code consists of five characters.
        <code class="literal">'00000'</code> means no error.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Note that not all MySQL errors are yet mapped to
          SQLSTATE's. The value <code class="literal">HY000</code> (general
          error) is used for unmapped errors.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2537905"></a><p class="title"><b>Example 29.151. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli-&gt;query("CREATE TABLE myCountry LIKE Country");
$mysqli-&gt;query("INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* drop table */
    $mysqli-&gt;query("DROP TABLE myCountry");

    /* execute query */
    $stmt-&gt;execute();

    printf("Error: %s.\n", $stmt-&gt;sqlstate);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2537926"></a><p class="title"><b>Example 29.152. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

mysqli_query($link, "CREATE TABLE myCountry LIKE Country");
mysqli_query($link, "INSERT INTO myCountry SELECT * FROM Country");


$query = "SELECT Name, Code FROM myCountry ORDER BY Name";
if ($stmt = mysqli_prepare($link, $query)) {

    /* drop table */
    mysqli_query($link, "DROP TABLE myCountry");

    /* execute query */
    mysqli_stmt_execute($stmt);

    printf("Error: %s.\n", mysqli_stmt_sqlstate($stmt));

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Error: 42S02.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_errno</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_error</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-stmt.store-result"></a>29.3.2.5.23. <code class="literal">mysqli_stmt::store_result</code>,
        <code class="literal">mysqli_stmt_store_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_stmt::store_result</code>
          </p><p>
            <code class="literal">mysqli_stmt_store_result</code>
          </p><p>
            Transfers a result set from a prepared statement
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt::store_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_stmt_store_result</span>(<span class="methodparam"><span class="type">mysqli_stmt </span><span class="parameter">stmt</span></span>);</code><p>
        You must call <code class="literal">mysqli_stmt_store_result</code> for
        every query that successfully produces a result set
        (<code class="literal">SELECT, SHOW, DESCRIBE, EXPLAIN</code>), and only
        if you want to buffer the complete result set by the client, so
        that the subsequent <code class="literal">mysqli_stmt_fetch</code> call
        returns buffered data.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          It is unnecessary to call
          <code class="literal">mysqli_stmt_store_result</code> for other
          queries, but if you do, it will not harm or cause any notable
          performance in all cases. You can detect whether the query
          produced a result set by checking if
          <code class="literal">mysqli_stmt_result_metadata</code> returns NULL.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> stmt</code></em>
            </span></dt><dd><p>
                Procedural style only: A statement identifier returned
                by <code class="literal">mysqli_stmt_init</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2538201"></a><p class="title"><b>Example 29.153. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli-&gt;prepare($query)) {

    /* execute query */
    $stmt-&gt;execute();

    /* store result */
    $stmt-&gt;store_result();

    printf("Number of rows: %d.\n", $stmt-&gt;num_rows);

    /* free result */
    $stmt-&gt;free_result();

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2538218"></a><p class="title"><b>Example 29.154. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = mysqli_prepare($link, $query)) {

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* store result */
    mysqli_stmt_store_result($stmt);

    printf("Number of rows: %d.\n", mysqli_stmt_num_rows($stmt));

    /* free result */
    mysqli_stmt_free_result($stmt);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Number of rows: 20.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.prepare" title="29.3.2.4.32. mysqli::prepare, mysqli_prepare"><code class="literal">mysqli_prepare</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_result_metadata</code>

          </td></tr><tr><td><code class="literal">mysqli_stmt_fetch</code>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-result"></a>29.3.2.6. The MySQLi_Result class</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.current-field">29.3.2.6.1. <code class="literal">mysqli_result-&gt;current_field</code>,
        <code class="literal">mysqli_field_tell</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.data-seek">29.3.2.6.2. <code class="literal">mysqli_result::data_seek</code>,
        <code class="literal">mysqli_data_seek</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-array">29.3.2.6.3. <code class="literal">mysqli_result::fetch_array</code>,
        <code class="literal">mysqli_fetch_array</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-assoc">29.3.2.6.4. <code class="literal">mysqli_result::fetch_assoc</code>,
        <code class="literal">mysqli_fetch_assoc</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-field-direct">29.3.2.6.5. <code class="literal">mysqli_result::fetch_field_direct</code>,
        <code class="literal">mysqli_fetch_field_direct</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-field">29.3.2.6.6. <code class="literal">mysqli_result::fetch_field</code>,
        <code class="literal">mysqli_fetch_field</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-fields">29.3.2.6.7. <code class="literal">mysqli_result::fetch_fields</code>,
        <code class="literal">mysqli_fetch_fields</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-object">29.3.2.6.8. <code class="literal">mysqli_result::fetch_object</code>,
        <code class="literal">mysqli_fetch_object</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.fetch-row">29.3.2.6.9. <code class="literal">mysqli_result::fetch_row</code>,
        <code class="literal">mysqli_fetch_row</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.field-count">29.3.2.6.10. <code class="literal">mysqli_result-&gt;field_count</code>,
        <code class="literal">mysqli_num_fields</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.field-seek">29.3.2.6.11. <code class="literal">mysqli_result::field_seek</code>,
        <code class="literal">mysqli_field_seek</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.free">29.3.2.6.12. <code class="literal">mysqli_result::free</code>,
        <code class="literal">mysqli_free_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.lengths">29.3.2.6.13. <code class="literal">mysqli_result-&gt;lengths</code>,
        <code class="literal">mysqli_fetch_lengths</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-result.num-rows">29.3.2.6.14. <code class="literal">mysqli_result-&gt;num_rows</code>,
        <code class="literal">mysqli_num_rows</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      Represents the result set obtained from a query against the
      database.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_Result</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_Result</span></span>

      Properties<code class="fieldsynopsis">  <span class="type">int </span><span class="varname">current_field </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br><code class="fieldsynopsis">  <span class="type">array </span><span class="varname">lengths </span>;</code><br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_field_tell</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_result::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_result::fetch_array</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_result::fetch_assoc</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_field_direct</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_field</span>();</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_result::fetch_fields</span>();</code><br><code class="methodsynopsis">  <span class="type">object </span><span class="methodname">mysqli_result::fetch_object</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                                     <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><br><code class="methodsynopsis">  <span class="type">mixed </span><span class="methodname">mysqli_result::fetch_row</span>();</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_num_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_result::field_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_result::free</span>();</code><br><code class="methodsynopsis">  <span class="type">array </span><span class="methodname">mysqli_fetch_lengths</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">mysqli_num_rows</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><br>}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.current-field"></a>29.3.2.6.1. <code class="literal">mysqli_result-&gt;current_field</code>,
        <code class="literal">mysqli_field_tell</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;current_field</code>
          </p><p>
            <code class="literal">mysqli_field_tell</code>
          </p><p>
            Get current field offset of a result pointer
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">current_field </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_field_tell</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the position of the field cursor used for the last
        <code class="literal">mysqli_fetch_field</code> call. This value can be
        used as an argument to <code class="literal">mysqli_field_seek</code>.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns current offset of field cursor.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2538869"></a><p class="title"><b>Example 29.155. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    while ($finfo = $result-&gt;fetch_field()) {

        /* get fieldpointer offset */
        $currentfield = $result-&gt;current_field;

        printf("Column %d:\n", $currentfield);
        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2538893"></a><p class="title"><b>Example 29.156. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all fields */
    while ($finfo = mysqli_fetch_field($result)) {

        /* get fieldpointer offset */
        $currentfield = mysqli_field_tell($result);

        printf("Column %d:\n", $currentfield);
        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Column 1:
Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Column 2:
Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_field</code>

          </td></tr><tr><td><code class="literal">mysqli_field_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.data-seek"></a>29.3.2.6.2. <code class="literal">mysqli_result::data_seek</code>,
        <code class="literal">mysqli_data_seek</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::data_seek</code>
          </p><p>
            <code class="literal">mysqli_data_seek</code>
          </p><p>
            Adjusts the result pointer to an arbitary row in the result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_result::data_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_data_seek</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                      <span class="methodparam"><span class="type">int </span><span class="parameter">offset</span></span>);</code><p>
        The <code class="literal">mysqli_data_seek</code> function seeks to an
        arbitrary result pointer specified by the
        <em class="parameter"><code>offset</code></em> in the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>offset</code></em>
            </span></dt><dd><p>
                The field offset. Must be between zero and the total
                number of rows minus one
                (0..<code class="literal">mysqli_num_rows</code> - 1).
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This function can only be used with buffered results attained
          from the use of the <code class="literal">mysqli_store_result</code>
          or
          <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>
          functions.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2539235"></a><p class="title"><b>Example 29.157. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";
if ($result = $mysqli-&gt;query( $query)) {

    /* seek to row no. 400 */
    $result-&gt;data_seek(399);

    /* fetch row */
    $row = $result-&gt;fetch_row();

    printf ("City: %s  Countrycode: %s\n", $row[0], $row[1]);

    /* free result set*/
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2539253"></a><p class="title"><b>Example 29.158. Procedural style</b></p><pre class="programlisting">
&lt;?php
/* Open a connection */
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name";

if ($result = mysqli_query($link, $query)) {

    /* seek to row no. 400 */
    mysqli_data_seek($result, 399);

    /* fetch row */
    $row = mysqli_fetch_row($result);

    printf ("City: %s  Countrycode: %s\n", $row[0], $row[1]);

    /* free result set*/
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


City: Benin City  Countrycode: NGA


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_num_rows</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-array"></a>29.3.2.6.3. <code class="literal">mysqli_result::fetch_array</code>,
        <code class="literal">mysqli_fetch_array</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_array</code>
          </p><p>
            <code class="literal">mysqli_fetch_array</code>
          </p><p>
            Fetch a result row as an associative, a numeric array, or
            both
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_result::fetch_array</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_fetch_array</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                         <span class="methodparam"><span class="type">int </span><span class="parameter">resulttype</span></span>);</code><p>
        Returns an array that corresponds to the fetched row or

        <code class="constant">NULL</code>

        if there are no more rows for the resultset represented by the
        <em class="parameter"><code>result</code></em> parameter.
      </p><p>
        <code class="literal">mysqli_fetch_array</code> is an extended version
        of the <code class="literal">mysqli_fetch_row</code> function. In
        addition to storing the data in the numeric indices of the
        result array, the <code class="literal">mysqli_fetch_array</code>
        function can also store the data in associative indices, using
        the field names of the result set as keys.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence and overwrite the earlier
        data. In order to access multiple columns with the same name,
        the numerically indexed version of the row must be used.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>resulttype</code></em>
            </span></dt><dd><p>
                This optional parameter is a constant indicating what
                type of array should be produced from the current row
                data. The possible values for this parameter are the
                constants

                <code class="constant">MYSQLI_ASSOC</code>

                ,

                <code class="constant">MYSQLI_NUM</code>

                , or

                <code class="constant">MYSQLI_BOTH</code>

                . Defaults to

                <code class="constant">MYSQLI_BOTH</code>

                .
              </p><p>
                By using the

                <code class="constant">MYSQLI_ASSOC</code>

                constant this function will behave identically to the
                <code class="literal">mysqli_fetch_assoc</code>, while

                <code class="constant">MYSQLI_NUM</code>

                will behave identically to the
                <code class="literal">mysqli_fetch_row</code> function. The
                final option

                <code class="constant">MYSQLI_BOTH</code>

                will create a single array with the attributes of both.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of strings that corresponds to the fetched row
        or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2539674"></a><p class="title"><b>Example 29.159. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = $mysqli-&gt;query($query);

/* numeric array */
$row = $result-&gt;fetch_array(MYSQLI_NUM);
printf ("%s (%s)\n", $row[0], $row[1]);

/* associative array */
$row = $result-&gt;fetch_array(MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);

/* associative and numeric array */
$row = $result-&gt;fetch_array(MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]);

/* free result set */
$result-&gt;close();

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2539698"></a><p class="title"><b>Example 29.160. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = mysqli_query($link, $query);

/* numeric array */
$row = mysqli_fetch_array($result, MYSQLI_NUM);
printf ("%s (%s)\n", $row[0], $row[1]);

/* associative array */
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);

/* associative and numeric array */
$row = mysqli_fetch_array($result, MYSQLI_BOTH);
printf ("%s (%s)\n", $row[0], $row["CountryCode"]);

/* free result set */
mysqli_free_result($result);

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Kabul (AFG)
Qandahar (AFG)
Herat (AFG)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-assoc"></a>29.3.2.6.4. <code class="literal">mysqli_result::fetch_assoc</code>,
        <code class="literal">mysqli_fetch_assoc</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_assoc</code>
          </p><p>
            <code class="literal">mysqli_fetch_assoc</code>
          </p><p>
            Fetch a result row as an associative array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_result::fetch_assoc</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_assoc</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns an associative array that corresponds to the fetched row
        or

        <code class="constant">NULL</code>

        if there are no more rows.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an associative array of strings representing the fetched
        row in the result set, where each key in the array represents
        the name of one of the result set's columns or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><p>
        If two or more columns of the result have the same field names,
        the last column will take precedence. To access the other
        column(s) of the same name, you either need to access the result
        with numeric indices by using
        <code class="literal">mysqli_fetch_row</code> or add alias names.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2540001"></a><p class="title"><b>Example 29.161. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch associative array */
    while ($row = $result-&gt;fetch_assoc()) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2540018"></a><p class="title"><b>Example 29.162. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_row</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-field-direct"></a>29.3.2.6.5. <code class="literal">mysqli_result::fetch_field_direct</code>,
        <code class="literal">mysqli_fetch_field_direct</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_field_direct</code>
          </p><p>
            <code class="literal">mysqli_fetch_field_direct</code>
          </p><p>
            Fetch meta-data for a single field
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_field_direct</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_field_direct</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                                 <span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><p>
        Returns an object which contains field definition informations
        from specified resultset.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>fieldnr</code></em>
            </span></dt><dd><p>
                The field number. This value must be in the range from
                <code class="literal">0</code> to <code class="literal">number of fields -
                1</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object which contains field definition information or

        <code class="constant">FALSE</code>

        if no field information for specified <code class="literal">fieldnr</code>
        is available.
      </p><p>
        </p><div class="table"><a name="id2540347"></a><p class="title"><b>Table 29.10. Object attributes</b></p><table summary="Object attributes" border="1"><colgroup><col><col></colgroup><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the tabl definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2540508"></a><p class="title"><b>Example 29.163. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Name LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for column 'SurfaceArea' */
    $finfo = $result-&gt;fetch_field_direct(1);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n", $finfo-&gt;type);

    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2540531"></a><p class="title"><b>Example 29.164. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Name LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for column 'SurfaceArea' */
    $finfo = mysqli_fetch_field_direct($result, 1);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n", $finfo-&gt;type);

    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_num_fields</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_field</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_fields</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-field"></a>29.3.2.6.6. <code class="literal">mysqli_result::fetch_field</code>,
        <code class="literal">mysqli_fetch_field</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_field</code>
          </p><p>
            <code class="literal">mysqli_fetch_field</code>
          </p><p>
            Returns the next field in the result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_field</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_field</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the definition of one column of a result set as an
        object. Call this function repeatedly to retrieve information
        about all columns in the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object which contains field definition information or

        <code class="constant">FALSE</code>

        if no field information is available.
      </p><p>
        </p><div class="table"><a name="id2540778"></a><p class="title"><b>Table 29.11. Object properties</b></p><table summary="Object properties" border="1"><colgroup><col><col></colgroup><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the table definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2540938"></a><p class="title"><b>Example 29.165. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    while ($finfo = $result-&gt;fetch_field()) {

        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2540962"></a><p class="title"><b>Example 29.166. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all fields */
    while ($finfo = mysqli_fetch_field($result)) {

        printf("Name:     %s\n", $finfo-&gt;name);
        printf("Table:    %s\n", $finfo-&gt;table);
        printf("max. Len: %d\n", $finfo-&gt;max_length);
        printf("Flags:    %d\n", $finfo-&gt;flags);
        printf("Type:     %d\n\n", $finfo-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_num_fields</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_field_direct</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_fields</code>

          </td></tr><tr><td><code class="literal">mysqli_field_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-fields"></a>29.3.2.6.7. <code class="literal">mysqli_result::fetch_fields</code>,
        <code class="literal">mysqli_fetch_fields</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_fields</code>
          </p><p>
            <code class="literal">mysqli_fetch_fields</code>
          </p><p>
            Returns an array of objects representing the fields in a
            result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_result::fetch_fields</span>();</code><br><p>
        Procedural Style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        This function serves an identical purpose to the
        <code class="literal">mysqli_fetch_field</code> function with the single
        difference that, instead of returning one object at a time for
        each field, the columns are returned as an array of objects.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an array of objects which contains field definition
        information or

        <code class="constant">FALSE</code>

        if no field information is available.
      </p><p>
        </p><div class="table"><a name="id2541219"></a><p class="title"><b>Table 29.12. Object properties</b></p><table summary="Object properties" border="1"><colgroup><col><col></colgroup><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the column</td></tr><tr><td>orgname</td><td>Original column name if an alias was specified</td></tr><tr><td>table</td><td>The name of the table this field belongs to (if not calculated)</td></tr><tr><td>orgtable</td><td>Original table name if an alias was specified</td></tr><tr><td>def</td><td>The default value for this field, represented as a string</td></tr><tr><td>max_length</td><td>The maximum width of the field for the result set.</td></tr><tr><td>length</td><td>The width of the field, as specified in the table definition.</td></tr><tr><td>charsetnr</td><td>The character set number for the field.</td></tr><tr><td>flags</td><td>An integer representing the bit-flags for the field.</td></tr><tr><td>type</td><td>The data type used for this field</td></tr><tr><td>decimals</td><td>The number of decimals used (for integer fields)</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2541380"></a><p class="title"><b>Example 29.167. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for all columns */
    $finfo = $result-&gt;fetch_fields();

    foreach ($finfo as $val) {
        printf("Name:     %s\n", $val-&gt;name);
        printf("Table:    %s\n", $val-&gt;table);
        printf("max. Len: %d\n", $val-&gt;max_length);
        printf("Flags:    %d\n", $val-&gt;flags);
        printf("Type:     %d\n\n", $val-&gt;type);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2541403"></a><p class="title"><b>Example 29.168. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for all columns */
    $finfo = mysqli_fetch_fields($result);

    foreach ($finfo as $val) {
        printf("Name:     %s\n", $val-&gt;name);
        printf("Table:    %s\n", $val-&gt;table);
        printf("max. Len: %d\n", $val-&gt;max_length);
        printf("Flags:    %d\n", $val-&gt;flags);
        printf("Type:     %d\n\n", $val-&gt;type);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     Name
Table:    Country
max. Len: 11
Flags:    1
Type:     254

Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_num_fields</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_field_direct</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-object"></a>29.3.2.6.8. <code class="literal">mysqli_result::fetch_object</code>,
        <code class="literal">mysqli_fetch_object</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_object</code>
          </p><p>
            <code class="literal">mysqli_fetch_object</code>
          </p><p>
            Returns the current row of a result set as an object
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_result::fetch_object</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                                   <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">object </span><span class="methodname">mysqli_fetch_object</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                           <span class="methodparam"><span class="type">string </span><span class="parameter">class_name</span></span>,<br>                           <span class="methodparam"><span class="type">array </span><span class="parameter">params</span></span>);</code><p>
        The <code class="literal">mysqli_fetch_object</code> will return the
        current row result set as an object where the attributes of the
        object represent the names of the fields found within the result
        set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>class_name</code></em>
            </span></dt><dd><p></p></dd><dt><span class="term">
              <em class="parameter"><code>params</code></em>
            </span></dt><dd><p></p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns an object with string properties that corresponds to the
        fetched row or

        <code class="constant">NULL</code>

        if there are no more rows in resultset.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Field names returned by this function
are <span class="emphasis"><em>case-sensitive</em></span>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>ChangeLog</strong></span>
      </p><p>
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>5.0.0</td><td>Added the ability to return as a different object.</td></tr></tbody></table></div><p>
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2541833"></a><p class="title"><b>Example 29.169. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
 
$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch object array */
    while ($obj = $result-&gt;fetch_object()) {
        printf ("%s (%s)\n", $obj-&gt;Name, $obj-&gt;CountryCode);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2541851"></a><p class="title"><b>Example 29.170. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($obj = mysqli_fetch_object($result)) {
        printf ("%s (%s)\n", $obj-&gt;Name, $obj-&gt;CountryCode);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_row</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.fetch-row"></a>29.3.2.6.9. <code class="literal">mysqli_result::fetch_row</code>,
        <code class="literal">mysqli_fetch_row</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::fetch_row</code>
          </p><p>
            <code class="literal">mysqli_fetch_row</code>
          </p><p>
            Get a result row as an enumerated array
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_result::fetch_row</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">mixed </span><span class="methodname">mysqli_fetch_row</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Fetches one row of data from the result set and returns it as an
        enumerated array, where each column is stored in an array offset
        starting from 0 (zero). Each subsequent call to this function
        will return the next row within the result set, or

        <code class="constant">NULL</code>

        if there are no more rows.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        <code class="literal">mysqli_fetch_row</code> returns an array of
        strings that corresponds to the fetched row or

        <code class="constant">NULL</code>

        if there are no more rows in result set.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This function sets NULL fields to
the PHP <code class="constant">NULL</code> value.</p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2542137"></a><p class="title"><b>Example 29.171. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = $mysqli-&gt;query($query)) {

    /* fetch object array */
    while ($row = $result-&gt;fetch_row()) {
        printf ("%s (%s)\n", $row[0], $row[1]);
    }

    /* free result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2542155"></a><p class="title"><b>Example 29.172. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_row($result)) {
        printf ("%s (%s)\n", $row[0], $row[1]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_array</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_assoc</code>

          </td></tr><tr><td><code class="literal">mysqli_fetch_object</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_data_seek</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.field-count"></a>29.3.2.6.10. <code class="literal">mysqli_result-&gt;field_count</code>,
        <code class="literal">mysqli_num_fields</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;field_count</code>
          </p><p>
            <code class="literal">mysqli_num_fields</code>
          </p><p>
            Get the number of fields in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">field_count </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_num_fields</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the number of fields from specified result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        The number of fields from a result set.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2542426"></a><p class="title"><b>Example 29.173. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = $mysqli-&gt;query("SELECT * FROM City ORDER BY ID LIMIT 1")) {

    /* determine number of fields in result set */
    $field_cnt = $result-&gt;field_count;

    printf("Result set has %d fields.\n", $field_cnt);

    /* close result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2542448"></a><p class="title"><b>Example 29.174. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = mysqli_query($link, "SELECT * FROM City ORDER BY ID LIMIT 1")) {

    /* determine number of fields in result set */
    $field_cnt = mysqli_num_fields($result);

    printf("Result set has %d fields.\n", $field_cnt);

    /* close result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Result set has 5 fields.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.field-seek"></a>29.3.2.6.11. <code class="literal">mysqli_result::field_seek</code>,
        <code class="literal">mysqli_field_seek</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::field_seek</code>
          </p><p>
            <code class="literal">mysqli_field_seek</code>
          </p><p>
            Set result pointer to a specified field offset
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (method):
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_result::field_seek</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_field_seek</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>,<br>                       <span class="methodparam"><span class="type">int </span><span class="parameter">fieldnr</span></span>);</code><p>
        Sets the field cursor to the given offset. The next call to
        <code class="literal">mysqli_fetch_field</code> will retrieve the field
        definition of the column associated with that offset.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To seek to the beginning of a row, pass an offset value of
          zero.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd><dt><span class="term">
              <em class="parameter"><code>fieldnr</code></em>
            </span></dt><dd><p>
                The field number. This value must be in the range from
                <code class="literal">0</code> to <code class="literal">number of fields -
                1</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2542765"></a><p class="title"><b>Example 29.175. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = $mysqli-&gt;query($query)) {

    /* Get field information for 2nd column */
    $result-&gt;field_seek(1);
    $finfo = $result-&gt;fetch_field();

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n\n", $finfo-&gt;type);

    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2542788"></a><p class="title"><b>Example 29.176. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, SurfaceArea from Country ORDER BY Code LIMIT 5";

if ($result = mysqli_query($link, $query)) {

    /* Get field information for 2nd column */
    mysqli_field_seek($result, 1);
    $finfo = mysqli_fetch_field($result);

    printf("Name:     %s\n", $finfo-&gt;name);
    printf("Table:    %s\n", $finfo-&gt;table);
    printf("max. Len: %d\n", $finfo-&gt;max_length);
    printf("Flags:    %d\n", $finfo-&gt;flags);
    printf("Type:     %d\n\n", $finfo-&gt;type);

    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Name:     SurfaceArea
Table:    Country
max. Len: 10
Flags:    32769
Type:     4



      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_fetch_field</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.free"></a>29.3.2.6.12. <code class="literal">mysqli_result::free</code>,
        <code class="literal">mysqli_free_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result::free</code>
          </p><p>
            <code class="literal">mysqli_free_result</code>
          </p><p>
            Frees the memory associated with a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (all methods are equivalent):
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::free</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::close</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_result::free_result</span>();</code><br><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_free_result</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Frees the memory associated with the result.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You should always free your result with
          <code class="literal">mysqli_free_result</code>, when your result
          object is not needed anymore.
        </p></div><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        No value is returned.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr><tr><td><code class="literal">mysqli_stmt_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.lengths"></a>29.3.2.6.13. <code class="literal">mysqli_result-&gt;lengths</code>,
        <code class="literal">mysqli_fetch_lengths</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;lengths</code>
          </p><p>
            <code class="literal">mysqli_fetch_lengths</code>
          </p><p>
            Returns the lengths of the columns of the current row in the
            result set
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">array </span><span class="varname">lengths </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">array </span><span class="methodname">mysqli_fetch_lengths</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        The <code class="literal">mysqli_fetch_lengths</code> function returns
        an array containing the lengths of every column of the current
        row within the result set.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        An array of integers representing the size of each column (not
        including any terminating null characters).

        <code class="constant">FALSE</code>

        if an error occurred.
      </p><p>
        <code class="literal">mysqli_fetch_lengths</code> is valid only for the
        current row of the result set. It returns

        <code class="constant">FALSE</code>

        if you call it before calling mysqli_fetch_row/array/object or
        after retrieving all rows in the result.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2543305"></a><p class="title"><b>Example 29.177. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * from Country ORDER BY Code LIMIT 1";

if ($result = $mysqli-&gt;query($query)) {

    $row = $result-&gt;fetch_row();

    /* display column lengths */
    foreach ($result-&gt;lengths as $i =&gt; $val) {
        printf("Field %2d has Length %2d\n", $i+1, $val);
    }
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

  </pre></div><div class="example"><a name="id2543322"></a><p class="title"><b>Example 29.178. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * from Country ORDER BY Code LIMIT 1";

if ($result = mysqli_query($link, $query)) {

    $row = mysqli_fetch_row($result);

    /* display column lengths */
    foreach (mysqli_fetch_lengths($result) as $i =&gt; $val) {
        printf("Field %2d has Length %2d\n", $i+1, $val);
    }
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Field  1 has Length  3
Field  2 has Length  5
Field  3 has Length 13
Field  4 has Length  9
Field  5 has Length  6
Field  6 has Length  1
Field  7 has Length  6
Field  8 has Length  4
Field  9 has Length  6
Field 10 has Length  6
Field 11 has Length  5
Field 12 has Length 44
Field 13 has Length  7
Field 14 has Length  3
Field 15 has Length  2


      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-result.num-rows"></a>29.3.2.6.14. <code class="literal">mysqli_result-&gt;num_rows</code>,
        <code class="literal">mysqli_num_rows</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_result-&gt;num_rows</code>
          </p><p>
            <code class="literal">mysqli_num_rows</code>
          </p><p>
            Gets the number of rows in a result
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Object oriented style (property):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli_result</span></span> {<br><code class="fieldsynopsis">  <span class="type">int </span><span class="varname">num_rows </span>;</code><br>}</pre><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_num_rows</span>(<span class="methodparam"><span class="type">mysqli_result </span><span class="parameter">result</span></span>);</code><p>
        Returns the number of rows in the result set.
      </p><p>
        The use of <code class="literal">mysqli_num_rows</code> depends on
        whether you use buffered or unbuffered result sets. In case you
        use unbuffered resultsets <code class="literal">mysqli_num_rows</code>
        will not correct the correct number of rows until all the rows
        in the result have been retrieved.
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code> result</code></em>
            </span></dt><dd><p>
                Procedural style only: A result set identifier returned
                by
                <a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>,
                <code class="literal">mysqli_store_result</code> or
                <code class="literal">mysqli_use_result</code>.
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns number of rows in the result set.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the number of rows is greater than maximal int value, the
          number will be returned as a string.
        </p></div><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><div class="example"><a name="id2543565"></a><p class="title"><b>Example 29.179. Object oriented style</b></p><pre class="programlisting">
&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = $mysqli-&gt;query("SELECT Code, Name FROM Country ORDER BY Name")) {

    /* determine number of rows result set */
    $row_cnt = $result-&gt;num_rows;

    printf("Result set has %d rows.\n", $row_cnt);

    /* close result set */
    $result-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;

   </pre></div><div class="example"><a name="id2543586"></a><p class="title"><b>Example 29.180. Procedural style</b></p><pre class="programlisting">
&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = mysqli_query($link, "SELECT Code, Name FROM Country ORDER BY Name")) {

    /* determine number of rows result set */
    $row_cnt = mysqli_num_rows($result);

    printf("Result set has %d rows.\n", $row_cnt);

    /* close result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?&gt;

   </pre></div><p>
        The above example will output:
      </p><pre class="screen">


Result set has 239 rows.


      </pre><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_affected_rows</code>

          </td></tr><tr><td><code class="literal">mysqli_store_result</code>

          </td></tr><tr><td><code class="literal">mysqli_use_result</code>

          </td></tr><tr><td><a href="apis.html#apis-php-mysqli.query" title="29.3.2.4.33. mysqli::query, mysqli_query"><code class="literal">mysqli_query</code></a>

          </td></tr></table><p>
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-class.mysqli-driver"></a>29.3.2.7. The MySQLi_Driver class</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-mysqli-driver.embedded-server-end">29.3.2.7.1. <code class="literal">mysqli_driver::embedded_server_end</code>,
        <code class="literal">mysqli_embedded_server_end</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-mysqli-driver.embedded-server-start">29.3.2.7.2. <code class="literal">mysqli_driver::embedded_server_start</code>,
        <code class="literal">mysqli_embedded_server_start</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><p>
      MySQLi Driver.
    </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">MySQLi_Driver</span></span> {<br> <span class="ooclass"><span class="classname">MySQLi_Driver</span></span>

      Properties<code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">client_info </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">client_version </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">driver_version </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="modifier">readonly </span><span class="type">string </span><span class="varname">embedded </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="type">bool </span><span class="varname">reconnect </span>;</code><br><code class="fieldsynopsis">  <span class="modifier">public </span><span class="type">int </span><span class="varname">report-mode </span>;</code><br>Methods<code class="methodsynopsis">  <span class="type">void </span><span class="methodname">mysqli_driver::embedded_server_end</span>();</code><br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">mysqli_driver::embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                            <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                            <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><br>}</pre><div class="variablelist"><dl><dt><a name="apis-php-mysqli-driver.props.client-info"></a><span class="term">
          <code class="varname">client_info</code>
        </span></dt><dd><p>
            The Client API header version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.client-version"></a><span class="term">
          <code class="varname">client_version</code>
        </span></dt><dd><p>
            The Client version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.driver-version"></a><span class="term">
          <code class="varname">driver_version</code>
        </span></dt><dd><p>
            The MySQLi Driver version
          </p></dd><dt><a name="apis-php-mysqli-driver.props.embedded"></a><span class="term">
          <code class="varname">embedded</code>
        </span></dt><dd><p>
            Wether MySQLi Embedded support is enabled
          </p></dd><dt><a name="apis-php-mysqli-driver.props.reconnect"></a><span class="term">
          <code class="varname">reconnect</code>
        </span></dt><dd><p>
            Allow or prevent reconnect (see the mysqli.reconnect INI
            directive)
          </p></dd><dt><a name="apis-php-mysqli-driver.props.report-mode"></a><span class="term">
          <code class="varname">report_mode</code>
        </span></dt><dd><p>
            Set to

            <code class="constant">MYSQLI_REPORT_STRICT</code>

            to throw Exceptions for errors
          </p></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-driver.embedded-server-end"></a>29.3.2.7.1. <code class="literal">mysqli_driver::embedded_server_end</code>,
        <code class="literal">mysqli_embedded_server_end</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_driver::embedded_server_end</code>
          </p><p>
            <code class="literal">mysqli_embedded_server_end</code>
          </p><p>
            Stop embedded server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_driver::embedded_server_end</span>();</code><br><code class="methodsynopsis"><span class="type">void </span><span class="methodname">mysqli_embedded_server_end</span>();</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-mysqli-driver.embedded-server-start"></a>29.3.2.7.2. <code class="literal">mysqli_driver::embedded_server_start</code>,
        <code class="literal">mysqli_embedded_server_start</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_driver::embedded_server_start</code>
          </p><p>
            <code class="literal">mysqli_embedded_server_start</code>
          </p><p>
            Initialize and start embedded server
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_driver::embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                          <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                          <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><br><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_embedded_server_start</span>(<span class="methodparam"><span class="type">bool </span><span class="parameter">start</span></span>,<br>                                  <span class="methodparam"><span class="type">array </span><span class="parameter">arguments</span></span>,<br>                                  <span class="methodparam"><span class="type">array </span><span class="parameter">groups</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.mysqli"></a>29.3.2.8. Aliases and deprecated Mysqli Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-bind-param">29.3.2.8.1. <code class="literal">mysqli_bind_param</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-bind-result">29.3.2.8.2. <code class="literal">mysqli_bind_result</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-client-encoding">29.3.2.8.3. <code class="literal">mysqli_client_encoding</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-disable-reads-from-master">29.3.2.8.4. <code class="literal">mysqli_disable_reads_from_master</code>,
        <code class="literal">mysqli-&gt;disable_reads_from_master</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-disable-rpl-parse">29.3.2.8.5. <code class="literal">mysqli_disable_rpl_parse</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-enable-reads-from-master">29.3.2.8.6. <code class="literal">mysqli_enable_reads_from_master</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-enable-rpl-parse">29.3.2.8.7. <code class="literal">mysqli_enable_rpl_parse</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-escape-string">29.3.2.8.8. <code class="literal">mysqli_escape_string</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-execute">29.3.2.8.9. <code class="literal">mysqli_execute</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-fetch">29.3.2.8.10. <code class="literal">mysqli_fetch</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-get-metadata">29.3.2.8.11. <code class="literal">mysqli_get_metadata</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-master-query">29.3.2.8.12. <code class="literal">mysqli_master_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-param-count">29.3.2.8.13. <code class="literal">mysqli_param_count</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-report">29.3.2.8.14. <code class="literal">mysqli_report</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-rpl-parse-enabled">29.3.2.8.15. <code class="literal">mysqli_rpl_parse_enabled</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-rpl-probe">29.3.2.8.16. <code class="literal">mysqli_rpl_probe</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-rpl-query-type">29.3.2.8.17. <code class="literal">mysqli_rpl_query_type</code>,
        <code class="literal">mysqli-&gt;rpl_query_type</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-send-long-data">29.3.2.8.18. <code class="literal">mysqli_send_long_data</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-send-query">29.3.2.8.19. <code class="literal">mysqli_send_query</code>,
        <code class="literal">mysqli-&gt;send_query</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-set-opt">29.3.2.8.20. <code class="literal">mysqli_set_opt</code></a></span></dt><dt><span class="section"><a href="apis.html#apis-php-function.mysqli-slave-query">29.3.2.8.21. <code class="literal">mysqli_slave_query</code></a></span></dt></dl></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-bind-param"></a>29.3.2.8.1. <code class="literal">mysqli_bind_param</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_bind_param</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_bind_param</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_bind_param</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_bind_param</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_bind_param</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-bind-result"></a>29.3.2.8.2. <code class="literal">mysqli_bind_result</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_bind_result</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_bind_result</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_bind_result</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_bind_result</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_bind_result</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-client-encoding"></a>29.3.2.8.3. <code class="literal">mysqli_client_encoding</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_client_encoding</code>
          </p><p>
            Alias of <code class="literal">mysqli_character_set_name</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_character_set_name</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-disable-reads-from-master"></a>29.3.2.8.4. <code class="literal">mysqli_disable_reads_from_master</code>,
        <code class="literal">mysqli-&gt;disable_reads_from_master</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_disable_reads_from_master</code>
          </p><p>
            <code class="literal">mysqli-&gt;disable_reads_from_master</code>
          </p><p>
            Disable reads from master
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_disable_reads_from_master</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><p>
        Object oriented style (method):
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">void </span><span class="methodname">disable_reads_from_master</span>();</code><br>}</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-disable-rpl-parse"></a>29.3.2.8.5. <code class="literal">mysqli_disable_rpl_parse</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_disable_rpl_parse</code>
          </p><p>
            Disable RPL parse
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_disable_rpl_parse</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-enable-reads-from-master"></a>29.3.2.8.6. <code class="literal">mysqli_enable_reads_from_master</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_enable_reads_from_master</code>
          </p><p>
            Enable reads from master
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_enable_reads_from_master</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-enable-rpl-parse"></a>29.3.2.8.7. <code class="literal">mysqli_enable_rpl_parse</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_enable_rpl_parse</code>
          </p><p>
            Enable RPL parse
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_enable_rpl_parse</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-escape-string"></a>29.3.2.8.8. <code class="literal">mysqli_escape_string</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_escape_string</code>
          </p><p>
            Alias of <code class="literal">mysqli_real_escape_string</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_real_escape_string</code>.
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_real_escape_string</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-execute"></a>29.3.2.8.9. <code class="literal">mysqli_execute</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_execute</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_execute</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_execute</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_execute</code> is deprecated and will be
          removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_execute</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-fetch"></a>29.3.2.8.10. <code class="literal">mysqli_fetch</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_fetch</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_fetch</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_fetch</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_fetch</code> is deprecated and will be
          removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_fetch</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-get-metadata"></a>29.3.2.8.11. <code class="literal">mysqli_get_metadata</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_get_metadata</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_result_metadata</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_result_metadata</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_get_metadata</code> is deprecated and
          will be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_result_metadata</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-master-query"></a>29.3.2.8.12. <code class="literal">mysqli_master_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_master_query</code>
          </p><p>
            Enforce execution of a query on the master in a master/slave
            setup
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_master_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                         <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-param-count"></a>29.3.2.8.13. <code class="literal">mysqli_param_count</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_param_count</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_param_count</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_param_count</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_param_count</code> is deprecated and will
          be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_param_count</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-report"></a>29.3.2.8.14. <code class="literal">mysqli_report</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_report</code>
          </p><p>
            Enables or disables internal report functions
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_report</span>(<span class="methodparam"><span class="type">int </span><span class="parameter">flags</span></span>);</code><p>
        <code class="literal">mysqli_report</code> is a powerful function to
        improve your queries and code during development and testing
        phase. Depending on the flags it reports errors from mysqli
        function calls or queries which don't use an index (or use
        a bad index).
      </p><p>
        <span class="bold"><strong>Parameters</strong></span>
      </p><p>
        </p><div class="variablelist"><dl><dt><span class="term">
              <em class="parameter"><code>flags</code></em>
            </span></dt><dd><p>
                </p><div class="table"><a name="id2545735"></a><p class="title"><b>Table 29.13. Supported flags</b></p><table summary="Supported flags" border="1"><colgroup><col><col></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="constant">MYSQLI_REPORT_OFF</code></td><td>Turns reporting off</td></tr><tr><td><code class="constant">MYSQLI_REPORT_ERROR</code></td><td>Report errors from mysqli function calls</td></tr><tr><td><code class="constant">MYSQLI_REPORT_STRICT</code></td><td>Report warnings from mysqli function calls</td></tr><tr><td><code class="constant">MYSQLI_REPORT_INDEX</code></td><td>Report if no index or bad index was used in a query</td></tr><tr><td><code class="constant">MYSQLI_REPORT_ALL</code></td><td>Set all options (report all)</td></tr></tbody></table></div><p>
              </p></dd></dl></div><p>
      </p><p>
        <span class="bold"><strong>Return Values</strong></span>
      </p><p>
        Returns

        <code class="constant">TRUE</code>

        on success or

        <code class="constant">FALSE</code>

        on failure.
      </p><p>
        <span class="bold"><strong>Examples</strong></span>
      </p><p>
        </p><div class="example"><a name="id2545865"></a><p class="title"><b>Example 29.181. Object oriented style</b></p><pre class="programlisting">
&lt;?php
/* activate reporting */
mysqli_report(MYSQLI_REPORT_ALL);

$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* this query should report an error */
$result = $mysqli-&gt;query("SELECT Name FROM Nonexistingtable WHERE population &gt; 50000");

/* this query should report a warning */
$result = $mysqli-&gt;query("SELECT Name FROM City WHERE population &gt; 50000");
$result-&gt;close();

$mysqli-&gt;close();
?&gt;

    </pre></div><p>
      </p><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="apis.html#apis-php-mysqli.debug" title="29.3.2.4.10. mysqli::debug, mysqli_debug"><code class="literal">mysqli_debug</code></a>

          </td></tr><tr><td><code class="literal">mysqli_dump_debug_info</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-parse-enabled"></a>29.3.2.8.15. <code class="literal">mysqli_rpl_parse_enabled</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_parse_enabled</code>
          </p><p>
            Check if RPL parse is enabled
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_rpl_parse_enabled</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-probe"></a>29.3.2.8.16. <code class="literal">mysqli_rpl_probe</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_probe</code>
          </p><p>
            RPL probe
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_rpl_probe</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-rpl-query-type"></a>29.3.2.8.17. <code class="literal">mysqli_rpl_query_type</code>,
        <code class="literal">mysqli-&gt;rpl_query_type</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_rpl_query_type</code>
          </p><p>
            <code class="literal">mysqli-&gt;rpl_query_type</code>
          </p><p>
            Returns RPL query type
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">int </span><span class="methodname">mysqli_rpl_query_type</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                          <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">int </span><span class="methodname">rpl_query_type</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br>}</pre><p>
        Returns

        <code class="constant">MYSQLI_RPL_MASTER</code>

        ,

        <code class="constant">MYSQLI_RPL_SLAVE</code>

        or

        <code class="constant">MYSQLI_RPL_ADMIN</code>

        depending on a query type. <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code> and similar are
        <span class="emphasis"><em>master</em></span> queries, <code class="literal">SELECT</code>
        is <span class="emphasis"><em>slave</em></span>, and <code class="literal">FLUSH</code>,
        <code class="literal">REPAIR</code> and similar are
        <span class="emphasis"><em>admin</em></span>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-send-long-data"></a>29.3.2.8.18. <code class="literal">mysqli_send_long_data</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_send_long_data</code>
          </p><p>
            Alias for <code class="literal">mysqli_stmt_send_long_data</code>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <code class="literal">mysqli_stmt_send_long_data</code>.
      </p><p>
        <span class="bold"><strong>Notes</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">mysqli_send_long_data</code> is deprecated and
          will be removed.
        </p></div><p>
        <span class="bold"><strong>See Also</strong></span>
      </p><p>
        </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">mysqli_stmt_send_long_data</code>

          </td></tr></table><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-send-query"></a>29.3.2.8.19. <code class="literal">mysqli_send_query</code>,
        <code class="literal">mysqli-&gt;send_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_send_query</code>
          </p><p>
            <code class="literal">mysqli-&gt;send_query</code>
          </p><p>
            Send the query and return
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        Procedural style:
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_send_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                       <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><p>
        Object oriented style (method)
      </p><pre class="classsynopsis"> <span class="ooclass"><span class="classname">mysqli</span></span> {<br><code class="methodsynopsis">  <span class="type">bool </span><span class="methodname">send_query</span>(<span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><br>}</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-set-opt"></a>29.3.2.8.20. <code class="literal">mysqli_set_opt</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_set_opt</code>
          </p><p>
            Alias of
            <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><p>
        This function is an alias of
        <a href="apis.html#apis-php-mysqli.options" title="29.3.2.4.30. mysqli::options, mysqli_options"><code class="literal">mysqli_options</code></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="apis-php-function.mysqli-slave-query"></a>29.3.2.8.21. <code class="literal">mysqli_slave_query</code></h5></div></div></div><p>
        <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the
        PHP Documentation Group.</a>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">mysqli_slave_query</code>
          </p><p>
            Force execution of a query on a slave in a master/slave
            setup
          </p></li></ul></div><p>
        <span class="bold"><strong>Description</strong></span>
      </p><code class="methodsynopsis"><span class="type">bool </span><span class="methodname">mysqli_slave_query</span>(<span class="methodparam"><span class="type">mysqli </span><span class="parameter">link</span></span>,<br>                        <span class="methodparam"><span class="type">string </span><span class="parameter">query</span></span>);</code><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function is
currently not documented; only its argument list is available.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This function has been
<span class="emphasis"><em>DEPRECATED</em></span> and <span class="emphasis"><em>REMOVED</em></span> as of PHP 5.3.0.</p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="apis-php-ref.pdo-mysql"></a>29.3.3. MySQL Functions (PDO_MYSQL)</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="apis.html#apis-php-ref.pdo-mysql.connection">29.3.3.1. <code class="literal">PDO_MYSQL DSN</code></a></span></dt></dl></div><p>
    <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
    Documentation Group.</a>
  </p><p>
    PDO_MYSQL is a driver that implements the
    <a href="http://www.php.net/manual/en/intro.pdo.php" target="_top">PHP Data
    Objects (PDO) interface</a> to enable access from PHP to MySQL
    3.x, 4.x and 5.x databases.
  </p><p>
    PDO_MYSQL will take advantage of native prepared statement support
    present in MySQL 4.1 and higher. If you're using an older
    version of the mysql client libraries, PDO will emulate them for
    you.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      Beware: Some MySQL table types (storage engines) do not support
      transactions. When writing transactional database code using a
      table type that does not support transactions, MySQL will pretend
      that a transaction was initiated successfully. In addition, any
      DDL queries issued will implicitly commit any pending
      transactions.
    </p></div><p>The constants below are defined by
this driver, and will only be available when the extension has been either
compiled into PHP or dynamically loaded at runtime. In addition, these
driver-specific constants should only be used if you are using this driver.
Using mysql-specific attributes with the postgres driver may result in
unexpected behaviour. <code class="literal">PDO::getAttribute</code> may be used to
obtain the <code class="constant">PDO_ATTR_DRIVER_NAME</code> attribute to check the
driver, if your code can run against multiple drivers.</p><div class="variablelist"><dl><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
     If this attribute is set to <code class="constant">TRUE</code> on a
     <code class="classname">PDOStatement</code>, the MySQL driver will use the
     buffered versions of the MySQL API.  If you're writing portable code, you
     should use <code class="literal">PDOStatement::fetchAll</code> instead.
    </p><p>
          </p><div class="example"><a name="id2546879"></a><p class="title"><b>Example 29.182. Forcing queries to be buffered in mysql</b></p><pre class="programlisting">
&lt;?php
if ($db-&gt;getAttribute(PDO::ATTR_DRIVER_NAME) == 'mysql') {
    $stmt = $db-&gt;prepare('select * from foo',
        array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY =&gt; true));
} else {
    die("my application only works with mysql; I should use \$stmt-&gt;fetchAll() instead");
}
?&gt;

      </pre></div><p>
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_LOCAL_INFILE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Enable <code class="literal">LOAD LOCAL INFILE</code>.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_INIT_COMMAND</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Command to execute when connecting to the MySQL server. Will
          automatically be re-executed when reconnecting.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_READ_DEFAULT_FILE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Read options from the named option file instead of from
          <code class="filename">my.cnf</code>.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Read options from the named group from
          <code class="filename">my.cnf</code> or the file specified with

          <code class="constant">MYSQL_READ_DEFAULT_FILE</code>

          .
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_MAX_BUFFER_SIZE</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Maximum buffer size. Defaults to 1 MiB.
        </p></dd><dt><span class="term">
        <code class="constant">PDO::MYSQL_ATTR_DIRECT_QUERY</code>

        (<span class="type">integer</span>)
      </span></dt><dd><p>
          Perform direct queries, don't use prepared statements.
        </p></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="apis-php-ref.pdo-mysql.connection"></a>29.3.3.1. <code class="literal">PDO_MYSQL DSN</code></h4></div></div></div><p>
      <a href="apis.html#php-api-copyright">Copyright (c) 1997-2008 the PHP
      Documentation Group.</a>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">PDO_MYSQL DSN</code>
        </p><p>
          Connecting to MySQL databases
        </p></li></ul></div><p>
      <span class="bold"><strong>Description</strong></span>
    </p><p>
      The PDO_MYSQL Data Source Name (DSN) is composed of the following
      elements:

      </p><div class="variablelist"><dl><dt><span class="term">
            DSN prefix
          </span></dt><dd><p>
              The DSN prefix is <strong class="userinput"><code>mysql:</code></strong>.
            </p></dd><dt><span class="term">
            <code class="constant">host</code>
          </span></dt><dd><p>
              The hostname on which the database server resides.
            </p></dd><dt><span class="term">
            <code class="constant">port</code>
          </span></dt><dd><p>
              The port number where the database server is listening.
            </p></dd><dt><span class="term">
            <code class="constant">dbname</code>
          </span></dt><dd><p>
              The name of the database.
            </p></dd><dt><span class="term">
            <code class="constant">unix_socket</code>
          </span></dt><dd><p>
              The MySQL Unix socket (shouldn't be used with
              <code class="literal">host</code> or <code class="literal">port</code>).
            </p></dd></dl></div><p>
    </p><p>
      <span class="bold"><strong>Examples</strong></span>
    </p><p>
      </p><div class="example"><a name="id2547216"></a><p class="title"><b>Example 29.183. PDO_MYSQL DSN examples</b></p><p>
          The following example shows a PDO_MYSQL DSN for connecting to
          MySQL databases:

</p><pre class="programlisting">
mysql:host=localhost;dbname=testdb

       </pre><p>

          More complete examples:

</p><pre class="programlisting">
mysql:host=localhost;port=3307;dbname=testdb
mysql:unix_socket=/tmp/mysql.sock;dbname=testdb

       </pre><p>
        </p></div><p>
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="php-problems"></a>29.3.4. Common Problems with MySQL and PHP</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">Error: Maximum Execution Time Exceeded</code>:
          This is a PHP limit; go into the <code class="filename">php.ini</code>
          file and set the maximum execution time up from 30 seconds to
          something higher, as needed. It is also not a bad idea to
          double the RAM allowed per script to 16MB instead of 8MB.
        </p></li><li><p>
          <code class="literal">Fatal error: Call to unsupported or undefined
          function mysql_connect() in ...</code>: This means that
          your PHP version isn't compiled with MySQL support. You can
          either compile a dynamic MySQL module and load it into PHP or
          recompile PHP with built-in MySQL support. This process is
          described in detail in the PHP manual.
        </p></li><li><p>
          <code class="literal">Error: Undefined reference to 'uncompress'</code>:
          This means that the client library is compiled with support
          for a compressed client/server protocol. The fix is to add
          <code class="option">-lz</code> last when linking with
          <code class="option">-lmysqlclient</code>.
        </p></li><li><p>
          <code class="literal">Error: Client does not support authentication
          protocol</code>: This is most often encountered when trying
          to use the older <code class="literal">mysql</code> extension with MySQL
          4.1.1 and later. Possible solutions are: downgrade to MySQL
          4.0; switch to PHP 5 and the newer <code class="literal">mysqli</code>
          extension; or configure the MySQL server with
          <code class="option">--old-passwords</code>. (See
          <a href="error-handling.html#old-client" title="B.1.2.4. Client does not support authentication protocol">Section B.1.2.4, “<code class="literal">Client does not support authentication protocol</code>”</a>, for more information.)
        </p></li></ul></div><p>
      Those with PHP4 legacy code can make use of a compatibility layer
      for the old and new MySQL libraries, such as this one:
      <a href="http://www.coggeshall.org/oss/mysql2i" target="_top">http://www.coggeshall.org/oss/mysql2i</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="php-mysql-mysqli"></a>29.3.5. Enabling Both <code class="literal">mysql</code> and <code class="literal">mysqli</code> in
      PHP</h3></div></div></div><p>
      If you're experiencing problems with enabling both the
      <code class="literal">mysql</code> and the <code class="literal">mysqli</code>
      extension when building PHP on Linux yourself, you should try the
      following procedure.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Configure PHP like this:

</p><pre class="programlisting">./configure --with-mysqli=/usr/bin/mysql_config --with-mysql=/usr  
</pre><p>
        </p></li><li><p>
          Edit the <code class="filename">Makefile</code> and search for a line
          that starts with <code class="literal">EXTRA_LIBS</code>. It might look
          like this (all on one line):

</p><pre class="programlisting">EXTRA_LIBS = -lcrypt -lcrypt -lmysqlclient -lz -lresolv -lm -ldl -lnsl
-lxml2 -lz -lm -lxml2 -lz -lm -lmysqlclient -lz -lcrypt -lnsl -lm
-lxml2 -lz -lm -lcrypt -lxml2 -lz -lm -lcrypt
</pre><p>

          Remove all duplicates, so that the line looks like this (all
          on one line):

</p><pre class="programlisting">EXTRA_LIBS = -lcrypt -lcrypt -lmysqlclient -lz -lresolv -lm -ldl -lnsl
-lxml2
</pre><p>
        </p></li><li><p>
          Build and install PHP:

</p><pre class="programlisting">make
make install
</pre><p>
        </p></li></ol></div><p class="mnmas-kb"><b>MySQL Enterprise</b>
        MySQL Enterprise subscribers will find more information about
        the mysqli extension in the Knowledge Base articles found at
        <a href="https://kb.mysql.com/search.php?cat=search&amp;cat=search&amp;keywords=mysqli&amp;go=Go" target="_top">
        mysqli</a>. Access to the MySQL Knowledge Base collection of
        articles is one of the advantages of subscribing to MySQL
        Enterprise. For more information see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="perl"></a>29.4. MySQL Perl API</h2></div></div></div><a class="indexterm" name="id2547498"></a><a class="indexterm" name="id2547511"></a><a class="indexterm" name="id2547520"></a><a class="indexterm" name="id2547529"></a><p>
    The Perl <code class="literal">DBI</code> module provides a generic interface
    for database access. You can write a DBI script that works with many
    different database engines without change. To use DBI, you must
    install the <code class="literal">DBI</code> module, as well as a DataBase
    Driver (DBD) module for each type of server you want to access. For
    MySQL, this driver is the <code class="literal">DBD::mysql</code> module.
  </p><p>
    Perl DBI is the recommended Perl interface. It replaces an older
    interface called <code class="literal">mysqlperl</code>, which should be
    considered obsolete.
  </p><p>
    Installation instructions for Perl DBI support are given in
    <a href="installing.html#perl-support" title="2.15. Perl Installation Notes">Section 2.15, “Perl Installation Notes”</a>.
  </p><p>
    DBI information is available at the command line, online, or in
    printed form:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Once you have the <code class="literal">DBI</code> and
        <code class="literal">DBD::mysql</code> modules installed, you can get
        information about them at the command line with the
        <code class="literal">perldoc</code> command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perldoc DBI</code></strong>
shell&gt; <strong class="userinput"><code>perldoc DBI::FAQ</code></strong>
shell&gt; <strong class="userinput"><code>perldoc DBD::mysql</code></strong>
</pre><p>
        You can also use <code class="literal">pod2man</code>,
        <code class="literal">pod2html</code>, and so forth to translate this
        information into other formats.
      </p></li><li><p>
        For online information about Perl DBI, visit the DBI Web site,
        <a href="http://dbi.perl.org/" target="_top">http://dbi.perl.org/</a>. That site hosts a general
        DBI mailing list. MySQL AB hosts a list specifically about
        <code class="literal">DBD::mysql</code>; see
        <a href="introduction.html#mailing-lists" title="1.6.1. MySQL Mailing Lists">Section 1.6.1, “MySQL Mailing Lists”</a>.
      </p></li><li><p>
        For printed information, the official DBI book is
        <em class="citetitle">Programming the Perl DBI</em> (Alligator
        Descartes and Tim Bunce, O'Reilly &amp; Associates, 2000).
        Information about the book is available at the DBI Web site,
        <a href="http://dbi.perl.org/" target="_top">http://dbi.perl.org/</a>.
      </p><p>
        For information that focuses specifically on using DBI with
        MySQL, see <em class="citetitle">MySQL and Perl for the Web</em>
        (Paul DuBois, New Riders, 2001). This book's Web site is
        <a href="http://www.kitebird.com/mysql-perl/" target="_top">http://www.kitebird.com/mysql-perl/</a>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cplusplus"></a>29.5. MySQL C++ API</h2></div></div></div><a class="indexterm" name="id2547725"></a><a class="indexterm" name="id2547734"></a><p>
    <code class="literal">MySQL++</code> is a MySQL API for C++. Warren Young has
    taken over this project. More information can be found at
    <a href="http://tangentsoft.net/mysql++/doc" target="_top">http://tangentsoft.net/mysql++/doc</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using C++ with the MySQL API in the MySQL Knowledge Base. articles
      found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;pagerRow=0&amp;category=18" target="_top">
      C++</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="python"></a>29.6. MySQL Python API</h2></div></div></div><a class="indexterm" name="id2547795"></a><p>
    <code class="literal">MySQLdb</code> provides MySQL support for Python,
    compliant with the Python DB API version 2.0. It can be found at
    <a href="http://sourceforge.net/projects/mysql-python/" target="_top">http://sourceforge.net/projects/mysql-python/</a>.
  </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
      MySQL Enterprise subscribers will find more information about
      using Python with the MySQL API in the MySQL Knowledge Base
      articles found at
      <a href="https://kb.mysql.com/search.php?cat=search&amp;category=24" target="_top">
      Python</a>. Access to the MySQL Knowledge Base collection of
      articles is one of the advantages of subscribing to MySQL
      Enterprise. For more information see
      <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tcl"></a>29.7. MySQL Tcl API</h2></div></div></div><a class="indexterm" name="id2547856"></a><p>
    <code class="literal">MySQLtcl</code> is a simple API for accessing a MySQL
    database server from the Tcl programming language. It can be found
    at <a href="http://www.xdobry.de/mysqltcl/" target="_top">http://www.xdobry.de/mysqltcl/</a>.
  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eiffel"></a>29.8. MySQL Eiffel Wrapper</h2></div></div></div><a class="indexterm" name="id2547891"></a><a class="indexterm" name="id2547900"></a><p>
    Eiffel MySQL is an interface to the MySQL database server using the
    Eiffel programming language, written by Michael Ravits. It can be
    found at
    <a href="http://efsa.sourceforge.net/archive/ravits/mysql.htm" target="_top">http://efsa.sourceforge.net/archive/ravits/mysql.htm</a>.
  </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="precision-math.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="connectors.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 28. Precision Math </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 30. Connectors</td></tr></table></div></body></html>
