<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>

<head>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">

<title>Debian Reference - Debian fundamentals</title>

</head>

<body>

<p><a name="ch-system"></a></p>
<hr>

<p>
[ <a href="ch-preface.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ 2 ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ <a href="ch-tune.en.html">9</a> ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ <a href="ch-program.en.html">13</a> ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-install.en.html">next</a> ]
</p>

<hr>

<h1>
Debian Reference
<br>Chapter 2 - Debian fundamentals
</h1>

<hr>

<p>
This chapter provides fundamental information on the Debian system for
non-developers.  For authoritative information, see:
</p>

<ul>
<li>
<p>
Debian Policy Manual
</p>
</li>
<li>
<p>
Debian Developer's Reference
</p>
</li>
<li>
<p>
Debian New Maintainers' Guide
</p>
</li>
</ul>

<p>
listed under <a href="ch-support.en.html#s-references">References, Section
15.1</a>.
</p>

<p>
If you are looking for less detailed &quot;how-to&quot; explanations, jump
directly to <a href="ch-package.en.html">Debian package management, Chapter
6</a> or other relevant chapters.
</p>

<p>
This chapter is based on documents taken from the &quot;Debian FAQ&quot;,
greatly reorganized to allow the ordinary Debian system administrator to get
started.
</p>

<hr>

<h2><a name="s-ftparchives"></a>2.1 The Debian archives</h2>

<hr>

<h3><a name="s-dirtree"></a>2.1.1 Directory structures</h3>

<p>
The software that has been packaged for Debian is available in one of several
directory trees on each <code><a href="http://www.debian.org/mirror/">Debian
mirror site</a></code> through FTP or HTTP.
</p>

<p>
The following directories can be found on each Debian mirror site under the
<code>debian</code> directory:
</p>
<dl>
<dt><code>dists/</code>:</dt>
<dd>
<p>
This directory contains the &quot;distributions&quot;, and this used to be the
canonical way to access the currently available packages in Debian releases and
pre-releases.  Some old packages, the <code>Contents-*.gz</code> and
<code>Packages.gz</code> files are still in here.
</p>
</dd>
</dl>
<dl>
<dt><code>pool/</code>:</dt>
<dd>
<p>
The new physical location for all packages of Debian releases and pre-releases.
</p>
</dd>
</dl>
<dl>
<dt><code>tools/</code>:</dt>
<dd>
<p>
DOS utilities for creating boot disks, partitioning your disk drive,
compressing/decompressing files, and booting Linux.
</p>
</dd>
</dl>
<dl>
<dt><code>doc/</code>:</dt>
<dd>
<p>
The basic Debian documentation, such as the FAQ, the bug reporting system
instructions, etc.
</p>
</dd>
</dl>
<dl>
<dt><code>indices/</code>:</dt>
<dd>
<p>
The Maintainers file and the override files.
</p>
</dd>
</dl>
<dl>
<dt><code>project/</code>:</dt>
<dd>
<p>
mostly developer-only materials, such as:
</p>
<dl>
<dt><code>project/experimental/</code>:</dt>
<dd>
<p>
This directory contains packages and tools which are still being developed, and
are still in the alpha testing stage.  Users shouldn't be using packages from
here, because they can be dangerous and harmful even for the most experienced.
</p>
</dd>
</dl>
<dl>
<dt><code>project/orphaned/</code>:</dt>
<dd>
<p>
Packages that have been orphaned by their old maintainers, and withdrawn from
the distribution.
</p>
</dd>
</dl>
</dd>
</dl>

<hr>

<h3><a name="s-dists"></a>2.1.2 Debian distributions</h3>

<p>
Normally there are three Debian distributions in the <code>dists</code>
directory.  They are named the <samp>stable</samp> distribution, the
<samp>testing</samp> distribution, and the <samp>unstable</samp> distribution.
Sometimes there was also a <samp>frozen</samp> distribution (currently it is
just a development stage of the testing distribution).  Each distribution is
defined as a symlink to the actual directory with a codename in the
<code>dists</code> directory.
</p>

<hr>

<h3><a name="s-stable"></a>2.1.3 The <samp>stable</samp> distribution</h3>

<p>
Package entries for the <samp>stable</samp> distribution, Debian Etch (4.0),
are recorded into the <code>stable</code> (symlink to <code>etch/</code>)
directory:
</p>
<ul>
<li>
<p>
<code>stable/main/</code>: This directory contains the package versions
belonging to the most recent official release of the Debian system.
</p>

<p>
These packages are all free; that is, they all comply with the <code><a
href="http://www.debian.org/social_contract#guidelines">Debian Free Software
Guidelines</a></code> (DFSG) (also available as
<code>file:///usr/share/doc/debian/social-contract.txt</code> installed by
<code>debian-doc</code>).
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>stable/non-free/</code>: This directory contains packages that fail to
qualify as free according to the DFSG.
</p>

<p>
For example, some packages have licenses that prohibit commercial distribution.
Others can be redistributed but are shareware.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>stable/contrib/</code>: Each package in this directory is itself
DFSG-free but somehow Depends on a package that is <strong>not</strong>
DFSG-free.
</p>
</li>
</ul>

<p>
Now, in addition to the above locations, nowadays physical packages are located
under the <code>pool</code> directory (<a href="#s-pools">The <code>pool</code>
directory, Section 2.1.10</a>).
</p>

<p>
The current status of <samp>stable</samp> distribution bugs is reported on the
<code><a href="http://ftp-master.debian.org/testing/stable_probs.html">Stable
Problems</a></code> web page.
</p>

<hr>

<h3><a name="s-testing"></a>2.1.4 The <samp>testing</samp> distribution</h3>

<p>
Package entries for the <samp>testing</samp> distribution, Debian Lenny, are
recorded into the <code>testing</code> (symlink to <code>lenny/</code>)
directory after they have undergone some degree of testing in
<samp>unstable</samp>.  Nowadays physical packages are located under the
<code>pool</code> directory (<a href="#s-pools">The <code>pool</code>
directory, Section 2.1.10</a>).  There are also <code>main</code>,
<code>contrib</code>, and <code>non-free</code> subdirectories in
<code>testing/</code>, which serve the same functions as in
<code>stable/</code>.
</p>

<p>
These packages must be in sync on all architectures where they have been built
and must be installable; they must also have fewer release-critical bugs than
the versions currently in <samp>unstable</samp>.  This way, we hope that
<samp>testing</samp> is always close to being a release candidate.  More
details of the testing mechanism are at <code><a
href="http://www.debian.org/devel/testing">http://www.debian.org/devel/testing</a></code>.
</p>

<p>
The latest status of the <samp>testing</samp> distribution is reported at these
sites:
</p>
<ul>
<li>
<p>
<code><a href="http://ftp-master.debian.org/testing/update_excuses.html">update
excuses</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://ftp-master.debian.org/testing/testing_probs.html">testing
problems</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://bugs.debian.org/release-critical/">release-critical
bugs</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://bugs.qa.debian.org/cgi-bin/base.cgi">base system
bugs</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://bugs.qa.debian.org/cgi-bin/standard.cgi">bugs in standard
and task packages</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://bugs.qa.debian.org/">other bugs and bug-squashing party
notes</a></code>
</p>
</li>
</ul>

<hr>

<h3><a name="s-unstable"></a>2.1.5 The <samp>unstable</samp> distribution</h3>

<p>
Package entries for the <samp>unstable</samp> distribution, always codenamed
&quot;Sid&quot;, are recorded into the <code>unstable</code> (symlink to
<code>sid/</code>) directory after they are uploaded to the Debian archive and
stay here until they are moved to <code>testing/</code>.  Nowadays physical
packages are located under the <code>pool</code> directory (<a
href="#s-pools">The <code>pool</code> directory, Section 2.1.10</a>).  There
are also <code>main</code>, <code>contrib</code>, and <code>non-free</code>
subdirectories in <code>unstable/</code>, which serve the same functions as in
<code>stable/</code>.
</p>

<p>
The <samp>unstable</samp> distribution contains a snapshot of the most current
development system.  Users are welcome to use and test these packages, but are
warned about their state of readiness.  The advantage of using the
<samp>unstable</samp> distribution is that you are always up-to-date with the
latest in the Debian software project&mdash;but if it breaks, you get to keep
both parts.  :-)
</p>

<p>
The current status of <samp>unstable</samp> distribution bugs is reported on
the <code><a
href="http://ftp-master.debian.org/testing/unstable_probs.html">Unstable
Problems</a></code> web page.
</p>

<hr>

<h3><a name="s-frozen"></a>2.1.6 The <samp>frozen</samp> distribution</h3>

<p>
When the <samp>testing</samp> distribution is mature enough, it becomes frozen,
meaning no new code is accepted anymore, just bugfixes, if necessary.  Also, a
new testing tree is created in the <code>dists</code> directory, assigned a new
codename.  The frozen distribution passes through a few months of testing, with
intermittent updates and deep freezes called &quot;test cycles&quot;.
</p>

<p>
We keep a record of bugs in the frozen distribution that can delay a package
from being released or bugs that can hold back the whole release.  Once that
bug count lowers to maximum acceptable values, the frozen distribution becomes
<samp>stable</samp>, it is released, and the previous stable distribution
becomes obsolete (and moves to the archive).
</p>

<hr>

<h3><a name="s-codenames"></a>2.1.7 Debian distribution codenames</h3>

<p>
Physical directory names in the <code>dists</code> directory, such as
<code>etch/</code> and <code>lenny/</code>, are just &quot;codenames&quot;.
When a Debian distribution is in the development stage, it has no version
number, but a codename instead.  The purpose of these codenames is to make the
mirroring of the Debian distributions easier.  (If <code>unstable</code> would
be a real directory and it's name would suddenly change to
<code>stable/</code>, a lot of stuff would have to be needlessly downloaded
again).
</p>

<p>
Currently, <code>stable/</code> is a symbolic link to <code>etch/</code>, and
<code>testing/</code> is a symbolic link to <code>lenny/</code>.  This means
that <samp>Etch</samp> is the current stable distribution and
<samp>Lenny</samp> is the current testing distribution.
</p>

<p>
<code>unstable/</code> is a permanent symbolic link to <code>sid/</code>, as
Sid is always the unstable distribution.
</p>

<hr>

<h3><a name="s-oldcodenames"></a>2.1.8 Codenames used in the past</h3>

<p>
Codenames that have already been used are: &quot;Buzz&quot; for release 1.1,
&quot;Rex&quot; for release 1.2, &quot;Bo&quot; for releases 1.3.x,
&quot;Hamm&quot; for release 2.0, &quot;Slink&quot; for release 2.1,
&quot;Potato&quot; for release 2.2, &quot;Woody&quot; for release 3.0, and
&quot;Sarge&quot; for release 3.1.
</p>

<hr>

<h3><a name="s-sourceforcodenames"></a>2.1.9 The source for codenames</h3>

<p>
So far they have been characters taken from the movie <em>Toy Story</em> by
Pixar.
</p>
<ul>
<li>
<p>
<strong>Buzz</strong> (Buzz Lightyear) was the spaceman,
</p>
</li>
<li>
<p>
<strong>Rex</strong> was the tyrannosaurus,
</p>
</li>
<li>
<p>
<strong>Bo</strong> (Bo Peep) was the girl who took care of the sheep,
</p>
</li>
<li>
<p>
<strong>Hamm</strong> was the piggy bank,
</p>
</li>
<li>
<p>
<strong>Slink</strong> (Slinky Dog) was the toy dog,
</p>
</li>
<li>
<p>
<strong>Potato</strong> was, of course, Mr. Potato Head,
</p>
</li>
<li>
<p>
<strong>Woody</strong> was the cowboy,
</p>
</li>
<li>
<p>
<strong>Sarge</strong> was a leader of the Green Plastic Army Men,
</p>
</li>
<li>
<p>
<strong>Etch</strong> (Etch-a-Sketch) was the blackboard,
</p>
</li>
<li>
<p>
<strong>Sid</strong> was a boy next door who destroyed toys.
</p>
</li>
</ul>

<hr>

<h3><a name="s-pools"></a>2.1.10 The <code>pool</code> directory</h3>

<p>
Historically, packages were kept in the subdirectory of <code>dists</code>
corresponding to the distribution that contained them.  This turned out to
cause various problems, such as large bandwidth consumption on mirrors when
major changes were made.
</p>

<p>
Packages are now kept in a large &quot;pool&quot;, structured according to the
name of the source package.  To make this manageable, the pool is subdivided by
section (<samp>main</samp>, <samp>contrib</samp>, and <samp>non-free</samp>)
and by the first letter of the source package name.  These directories contain
several files: the binary packages for each architecture, and the source
packages from which the binary packages were generated.
</p>

<p>
You can find out where each package is placed by executing a command like
<samp>apt-cache showsrc <var>mypackagename</var></samp> and looking at the
&quot;Directory:&quot; line.  For example, the <code>apache</code> packages are
stored in <code>pool/main/a/apache/</code>.  Since there are so many
<samp>lib*</samp> packages, these are treated specially: for instance,
<code>libpaper</code> packages are stored in
<code>pool/main/libp/libpaper/</code>.
</p>

<p>
The <code>dists</code> directories are still used for the index files used by
programs like <code>apt</code>.
</p>

<p>
Normally, you won't have to worry about any of this, as new <code>apt</code>
and probably older <code>dpkg-ftp</code> will handle it seamlessly.  If you
want more information, see the <code><a
href="http://lists.debian.org/debian-devel-announce/2000/debian-devel-announce-200010/msg00007.html">RFC:
implementation of package pools</a></code>.
</p>

<hr>

<h3><a name="s-sid-history"></a>2.1.11 Historical notes about Sid</h3>

<p>
When the present-day Sid did not exist, the Debian archive site organization
had one major flaw: there was an assumption that when an architecture was
created in the current <code>unstable/</code>, it would be released when that
distribution became the new <samp>stable</samp>.  For many architectures that
wasn't the case, with the result that those directories had to be moved at
release time.  This was impractical because the move would chew up lots of
bandwidth.
</p>

<p>
The archive administrators worked around this problem for several years by
placing binaries for unreleased architectures in a special directory called
<code>sid</code>.  When an architecture was released the first time there was a
link from the current <code>stable/</code> to <code>sid/</code>, and from then
on they were created inside the <code>unstable/</code> tree as usual.  This
layout was somewhat confusing to users.
</p>

<p>
With the advent of package pools (see <a href="#s-pools">The <code>pool</code>
directory, Section 2.1.10</a>) during the Woody distribution development,
binary packages began to be stored in a canonical location in the pool,
regardless of the distribution, so releasing a distribution no longer causes
large bandwidth consumption on the mirrors (there is, however, a lot of gradual
bandwidth consumption throughout the development process).
</p>

<hr>

<h3><a name="s-incoming"></a>2.1.12 Uploaded packages in <code>incoming/</code></h3>

<p>
Uploaded packages are first located at <code><a
href="http://incoming.debian.org/">http://incoming.debian.org/</a></code> after
being checked to insure that they really come from a Debian developer (and are
put in the <code>DELAYED</code> subdirectory in the case of a Non-Maintainer
Upload (NMU)).  Once a day, they are moved out of <code>incoming/</code> to
<code>unstable/</code>.
</p>

<p>
In an emergency, you may want to install packages from <code>incoming/</code>
before they reach <code>unstable/</code>.
</p>

<hr>

<h3><a name="s-snapshot"></a>2.1.13 Retrieving an older package</h3>

<p>
While the most recent Debian distributions are kept under the
<code>debian</code> directory on each <code><a
href="http://www.debian.org/mirror/">Debian mirror site</a></code>, archives
for older Debian distributions such as Slink are kept on <code><a
href="http://archive.debian.org/">http://archive.debian.org/</a></code> or
under the <code>debian-archive</code> directory on each Debian mirror site.
</p>

<p>
Older <samp>testing</samp> and <samp>unstable</samp> packages can be located at
<code><a
href="http://snapshot.debian.net/">http://snapshot.debian.net/</a></code>.
</p>

<hr>

<h3><a name="s-archsections"></a>2.1.14 Architecture sections</h3>

<p>
Within each of the major directory trees (<code>dists/stable/main</code>,
<code>dists/stable/contrib</code>, <code>dists/stable/non-free</code>,
<code>dists/unstable/main</code>, etc.), the binary package entries reside in
subdirectories whose names indicate the chip architecture for which they were
compiled.
</p>
<ul>
<li>
<p>
<code>binary-all/</code>, for packages which are architecture-independent.
These include, for example, Perl scripts, or pure documentation.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>binary-<var>platform</var>/</code>, for packages which execute on a
particular binary platform.
</p>
</li>
</ul>

<p>
Please note that the actual binary packages no longer reside in these
directories, but in the top-level <code>pool</code> directory.  The index files
(<code>Packages</code> and <code>Packages.gz</code>) have been kept, though,
for backwards compatibility.
</p>

<p>
For the actual binary architectures supported, see the Release Notes for each
distribution.  They can be located at the Release Notes sites for <code><a
href="http://www.debian.org/releases/stable/releasenotes">stable</a></code> and
<code><a
href="http://www.debian.org/releases/testing/releasenotes">testing</a></code>.
</p>

<hr>

<h3><a name="s-source"></a>2.1.15 The source code</h3>

<p>
Source code is included for everything in the Debian system.  Moreover, the
license terms of most programs in the system <strong>require</strong> that
source code be distributed along with the programs, or that an offer to provide
the source code accompany the programs.
</p>

<p>
Normally the source code is distributed in the <code>source</code> directories,
which are parallel to all the architecture-specific binary directories, or more
recently in the <code>pool</code> directory (see <a href="#s-pools">The
<code>pool</code> directory, Section 2.1.10</a>).  To retrieve the source code
without having to be familiar with the structure of the Debian archive, try a
command like <samp>apt-get source <var>mypackagename</var></samp>.
</p>

<p>
Some packages, notably <code>pine</code>, are only available in a source
package due to their licensing limitations.  (Recently the
<code>pine-tracker</code> package has been provided to facilitate Pine
installation.) The procedures described in <a
href="ch-package.en.html#s-port">Port a package to the <samp>stable</samp>
system, Section 6.4.10</a> and <a
href="ch-program.en.html#s-packaging">Packaging, Section 13.10</a> provide ways
to build a package manually.
</p>

<p>
Source code may or may not be available for packages in the
<code>contrib</code> and <code>non-free</code> directories, which are not
formally part of the Debian system.
</p>

<hr>

<h2><a name="s-pkg-basics"></a>2.2 The Debian package management system</h2>

<hr>

<h3><a name="s-package-basics"></a>2.2.1 Overview of Debian packages</h3>

<p>
Packages generally contain all of the files necessary to implement a set of
related commands or features.  There are two types of Debian packages:
</p>
<ul>
<li>
<p>
<strong>Binary packages</strong>, which contain executables, configuration
files, man/info pages, copyright information, and other documentation.  These
packages are distributed in a Debian-specific archive format (see <a
href="#s-deb-format">Debian package format, Section 2.2.2</a>); they are
usually distinguished by having a <samp>.deb</samp> file extension.  Binary
packages can be unpacked using the Debian utility <code>dpkg</code>; details
are given in its manual page.
</p>
</li>
</ul>
<ul>
<li>
<p>
<strong>Source packages</strong>, which consist of a <samp>.dsc</samp> file
describing the source package (including the names of the following files), a
<samp>.orig.tar.gz</samp> file that contains the original unmodified source in
gzip-compressed tar format, and usually a <samp>.diff.gz</samp> file that
contains the Debian-specific changes to the original source.  The utility
<code>dpkg-source</code> packs and unpacks Debian source archives; details are
provided in its manual page.
</p>
</li>
</ul>

<p>
Installation of software by the package system uses &quot;dependencies&quot;
which are declared by the package maintainers.  These dependencies are
documented in the <code>control</code> file associated with each package.  For
example, the package containing the GNU C compiler (<code>gcc</code>) Depends
on the package <code>binutils</code> which includes the linker and assembler.
If a user attempts to install <code>gcc</code> without having first installed
<code>binutils</code>, the package management system (dpkg) will print an error
message that it also needs <code>binutils</code>, and stop installing
<code>gcc</code>.  (However, this facility can be overridden by the insistent
user; see <code>dpkg(8)</code>.) For additional details, see <a
href="#s-depends">Package dependencies, Section 2.2.8</a> below.
</p>

<p>
Debian's packaging tools can be used to:
</p>
<ul>
<li>
<p>
manipulate and manage packages or parts of packages,
</p>
</li>
</ul>
<ul>
<li>
<p>
aid the user in the splitting of packages that must be transmitted through a
limited-size medium such as floppy disks,
</p>
</li>
</ul>
<ul>
<li>
<p>
aid developers in the construction of package archives, and
</p>
</li>
</ul>
<ul>
<li>
<p>
aid users in the installation of packages which reside on a remote Debian
archive site.
</p>
</li>
</ul>

<hr>

<h3><a name="s-deb-format"></a>2.2.2 Debian package format</h3>

<p>
A Debian &quot;package&quot;, or a Debian archive file, contains the executable
files, libraries, and documentation associated with a particular program suite
or set of related programs.  Normally, a Debian archive file has a filename
that ends in <samp>.deb</samp>.  [<a href="footnotes.en.html#f1"
name="fr1">1</a>]
</p>

<p>
The internals of this Debian binary package format are described in the
<code>deb(5)</code> manual page.  Because this internal format is subject to
change (between major releases of Debian), always use <code>dpkg-deb(1)</code>
for manipulating <samp>.deb</samp> files.
</p>

<p>
Through at least the Sarge distribution, all Debian archive files have been
manipulable by the standard Unix commands <code>ar</code> and <code>tar</code>,
even when <code>dpkg</code> commands are not available.
</p>

<hr>

<h3><a name="s-pkgname"></a>2.2.3 Naming conventions for Debian package filenames</h3>

<p>
The Debian package filenames conform to the following convention:
</p>

<pre>
     <var>foo</var>_<var>ver</var>-<var>rev</var>_<var>arch</var>.deb
</pre>

<p>
where, usually, <var>foo</var> is the package name, <var>ver</var> is the
upstream version number, <var>rev</var> is the Debian revision number, and
<var>arch</var> is the target architecture.  Files are easily renamed, of
course.  You can find out what package is really contained in any given file of
name <var>filename</var> by running the following command:
</p>

<pre>
     dpkg --info <var>filename</var>
</pre>

<p>
The Debian revision number is specified by the Debian developer or by whoever
built the package.  A change in revision number usually indicates that some
aspect of the packaging has changed.
</p>

<hr>

<h3><a name="s-conffile"></a>2.2.4 Preservation of local configuration</h3>

<p>
Files that are intended to be changeable by the local administrator are kept in
<code>/etc/</code>.  Debian policy dictates that all changes to locally
configurable files be preserved across package upgrades.
</p>

<p>
If a default version of a locally configurable file is shipped in the package
itself then the file is listed as a &quot;conffile&quot;.  The package
management system does not upgrade conffiles that have been changed by the
administrator since the package was last installed without getting the
administrator's permission.  On the other hand, if the conffile has not been
changed by the administrator then the conffile will be upgraded along with the
rest of the package.  This is almost always desirable and so it is advantageous
to minimize changes to conffiles.
</p>

<p>
To list the conffiles belonging to a package run the following command:
</p>

<pre>
     dpkg --status <var>package</var>
</pre>

<p>
The list follows the &quot;Conffiles:&quot; line.
</p>

<p>
For more information about conffiles you can read the section of the Debian
Policy Manual entitled &quot;Configuration files&quot;.  (See <a
href="ch-support.en.html#s-references">References, Section 15.1</a>).
</p>

<hr>

<h3><a name="s-maintscripts"></a>2.2.5 Debian maintenance scripts</h3>

<p>
Debian maintenance scripts are executable scripts which are automatically run
before or after a package is installed.  Along with a file named
<code>control</code>, all of these files are part of the &quot;control&quot;
section of a Debian archive file.
</p>

<p>
The individual files are:
</p>
<dl>
<dt>preinst</dt>
<dd>
<p>
This script executes before its package is unpacked from its Debian archive
(<samp>.deb</samp>) file.  Many &quot;preinst&quot; scripts stop services for
packages which are being upgraded until their installation or upgrade is
completed (following the successful execution of the &quot;postinst&quot;
script).
</p>
</dd>
</dl>
<dl>
<dt>postinst</dt>
<dd>
<p>
This script typically completes any required configuration of a package once it
has been unpacked from its Debian archive (<samp>.deb</samp>) file.  Often,
&quot;postinst&quot; scripts ask the user for input, and/or warn the user that
if he accepts default values, he should remember to go back and reconfigure the
package as the situation warrants.  Many &quot;postinst&quot; scripts then
execute any commands necessary to start or restart a service once a new package
has been installed or upgraded.
</p>
</dd>
</dl>
<dl>
<dt>prerm</dt>
<dd>
<p>
This script typically stops any daemons which are associated with a package.
It is executed before the removal of files associated with the package.
</p>
</dd>
</dl>
<dl>
<dt>postrm</dt>
<dd>
<p>
This script typically modifies links or other files associated with a package,
and/or removes files created by it.  (Also see <a href="#s-virtual">Virtual
packages, Section 2.2.7</a>.)
</p>
</dd>
</dl>

<p>
Currently all of the control files can be found in the directory
<code>/var/lib/dpkg/info</code>.  The files relevant to package
<samp>foo</samp> begin with the name &quot;foo&quot; and have file extensions
of &quot;preinst&quot;, &quot;postinst&quot;, etc., as appropriate.  The file
<code>foo.list</code> in that directory lists all of the files that were
installed with the package <samp>foo</samp>.  (Note that the location of these
files is a <code>dpkg</code> internal, and may be subject to change.)
</p>

<hr>

<h3><a name="s-priority"></a>2.2.6 Package priorities</h3>

<p>
Each Debian package is assigned a <strong>priority</strong> by the distribution
maintainers, as an aid to the package management system.  The priorities are:
</p>
<ul>
<li>
<p>
<strong>Required</strong> packages are necessary for the proper functioning of
the system.
</p>

<p>
This includes all tools that are necessary to repair system defects.  You must
not remove these packages or your system may become totally broken and you may
not even be able to use <code>dpkg</code> to restore things.  Systems with only
the Required packages are probably inadequate for most purposes, but they do
have enough functionality to allow the sysadmin to boot and install more
software.
</p>
</li>
</ul>
<ul>
<li>
<p>
<strong>Important</strong> packages should be found on any Unix-like system.
</p>

<p>
Other packages without which the system will not run well or be usable will
carry this priority.  This does <strong>not</strong> include Emacs or X11 or
TeX or any other large applications.  These packages only constitute the bare
infrastructure.
</p>
</li>
</ul>
<ul>
<li>
<p>
<strong>Standard</strong> packages are standard on any Linux system, including
a reasonably small but not too limited character-mode system.
</p>

<p>
This is what will install by default if users do not select anything else.
&quot;Standard&quot; does not include many large applications, but it does
include Emacs (this is more a piece of infrastructure than an application) and
a reasonable subset of TeX and LaTeX (if this turns out to be possible without
X).
</p>
</li>
</ul>
<ul>
<li>
<p>
<strong>Optional</strong> packages include all those that you might reasonably
want to install even if you are unfamiliar with them, and if you don't have
specialized requirements.
</p>

<p>
This includes X11, a full TeX distribution, and lots of applications.
</p>
</li>
</ul>
<ul>
<li>
<p>
<strong>Extra</strong> packages either conflict with others with higher
priorities, have little use to users who are unfamiliar with them, or have
specialized requirements that make them unsuitable for &quot;Optional&quot;.
</p>
</li>
</ul>

<p>
Please note the differences among &quot;Priority: required&quot;,
&quot;Section: base&quot; and &quot;Essential: yes&quot; in the package
description.  &quot;Section: base&quot; means that this package is installed
before everything else on a new system.  Most of the packages in &quot;Section:
base&quot; have the &quot;Priority: required&quot; or at least &quot;Priority:
important&quot;, and many of them are tagged with &quot;Essential: yes&quot;.
&quot;Essential: yes&quot; means that this package requires to specify an extra
force option to the package management system such as <code>dpkg</code> when
removing from the system.  For example, <code>libc6</code>, <code>mawk</code>,
and <code>makedev</code> are &quot;Priority: required&quot; and &quot;Section:
base&quot; but are not &quot;Essential: yes&quot;.
</p>

<hr>

<h3><a name="s-virtual"></a>2.2.7 Virtual packages</h3>

<p>
A virtual package is a generic name that applies to any one of a group of
packages, all of which provide similar basic functionality.  For example, both
the <code>tin</code> and <code>trn</code> programs are news readers, and either
one should therefore satisfy the need of a program that requires a news reader
on the system in order to be useful.  They are therefore both said to Provide
the &quot;virtual package&quot; called <code>news-reader</code>.
</p>

<p>
Similarly, many packages such as <code>exim</code>, <code>exim4</code>,
<code>sendmail</code>, and <code>postfix</code>, provide the functionality of a
mail transport agent.  They are therefore said to Provide the virtual package
<code>mail-transport-agent</code>.  If either one is installed, then any
program that Depends on the installation of a mail transport agent will be
satisfied by the existence of this virtual package.
</p>

<p>
Debian has a mechanism such that, if more than one package which Provides the
same virtual package is installed on a system, the system administrator can set
one as the preferred package.  The relevant command is
<code>update-alternatives</code>, and is described further in <a
href="ch-package.en.html#s-alternatives">Alternative commands, Section
6.5.3</a>.
</p>

<hr>

<h3><a name="s-depends"></a>2.2.8 Package dependencies</h3>

<p>
The Debian packaging system handles dependency declarations which are used to
express the fact that one package requires another package to be installed in
order to work or in order to work better.
</p>
<ul>
<li>
<p>
Package A <strong>Depends</strong> on Package B if B absolutely must be
installed in order to use A.  In some cases, A Depends not only on B, but on a
specific version of B.  In this case, the version dependency is usually a lower
limit, in the sense that A Depends on any version of B more recent than some
specified version.
</p>
</li>
</ul>
<ul>
<li>
<p>
Package A <strong>Recommends</strong> Package B if the package maintainer
judges that most users would not want A without also having the functionality
provided by B.
</p>
</li>
</ul>
<ul>
<li>
<p>
Package A <strong>Suggests</strong> Package B if B contains files that are
related to and enhance the functionality of A.  The same relationship is
expressed by declaring that Package B <strong>Enhances</strong> Package A.
</p>
</li>
</ul>
<ul>
<li>
<p>
Package A <strong>Conflicts</strong> with Package B when A will not operate
properly if B is installed on the system.  &quot;Conflicts&quot; status is
often combined with &quot;Replaces&quot;.
</p>
</li>
</ul>
<ul>
<li>
<p>
Package A <strong>Replaces</strong> Package B when files installed by B are
removed or overwritten by files in A.
</p>
</li>
</ul>
<ul>
<li>
<p>
Package A <strong>Provides</strong> Package B when all of the files and
functionality of B are incorporated into A.
</p>
</li>
</ul>

<p>
More detailed information on the use of each these terms can be found in the
<em>Packaging Manual</em> and the <em>Policy Manual</em>.
</p>

<p>
Note that <code>aptitude</code> and <code>dselect</code> have more fine-grained
control over packages specified by <strong>Recommends</strong> and
<strong>Suggests</strong> than <code>apt-get</code>, which simply pulls all the
packages specified by <strong>Depends</strong> and leaves all the packages
specified by <strong>Recommends</strong> and <strong>Suggests</strong>.  Both
programs in modern form use APT as their back end.
</p>

<hr>

<h3><a name="s-pre-depends"></a>2.2.9 The meaning of &quot;Pre-Depends&quot;</h3>

<p>
<code>dpkg</code> always configures a package upon which another package
Depends before it configures the package that Depends on it.  However,
<code>dpkg</code> normally unpacks archive files in arbitrary order,
independently of dependencies.  (Unpacking consists of extracting files from
the archive file and putting them in the right place.) If, however, a package
<strong>Pre-Depends</strong> on another then the other package is unpacked and
configured before the one that Pre-Depends is even unpacked.  [<a
href="footnotes.en.html#f2" name="fr2">2</a>] The use of this dependency is
kept to a minimum.
</p>

<hr>

<h3><a name="s-pkgstatus"></a>2.2.10 Package status</h3>

<p>
Package status can be &quot;unknown&quot;, &quot;install&quot;,
&quot;remove&quot;, &quot;purge&quot;, or &quot;hold&quot;.  These
&quot;want&quot; flags indicate what the user wanted to do with a package
(either by making choices in the &quot;Select&quot; section of
<code>dselect</code>, or by directly invoking <code>dpkg</code>).
</p>

<p>
Their meanings are:
</p>
<ul>
<li>
<p>
<strong>unknown</strong> - the user has never indicated whether he wants the
package.
</p>
</li>
<li>
<p>
<strong>install</strong> - the user wants the package installed or upgraded.
</p>
</li>
<li>
<p>
<strong>remove</strong> - the user wants the package removed, but does not want
to remove any existing configuration files.
</p>
</li>
<li>
<p>
<strong>purge</strong> - the user wants the package to be removed completely,
including its configuration files.
</p>
</li>
<li>
<p>
<strong>hold</strong> - the user wants this package not to be processed, i.e.,
he wants to keep the current version with the current status, whatever that is.
</p>
</li>
</ul>

<hr>

<h3><a name="s-puttingonhold"></a>2.2.11 Holding back packages from an upgrade</h3>

<p>
There are two mechanisms for holding back packages from an upgrade, through
<code>dpkg</code>, or, beginning with Woody, through APT.
</p>

<p>
With <code>dpkg</code>, first export the list of package selections:
</p>

<pre>
     dpkg --get-selections \* &gt; <var>selections.txt</var>
</pre>

<p>
Then edit the resulting file <code><var>selections.txt</var></code>, changing
the line containing the package you wish to hold, e.g.  <code>libc6</code>,
from this:
</p>

<pre>
     libc6                       install
</pre>

<p>
to this:
</p>

<pre>
     libc6                       hold
</pre>

<p>
Save the file, and reload it into <code>dpkg</code> database with:
</p>

<pre>
     dpkg --set-selections &lt; <var>selections.txt</var>
</pre>

<p>
Or, if you know the package name to hold, simply run:
</p>

<pre>
     echo libc6 hold | dpkg --set-selections
</pre>

<p>
This procedure holds packages at the install process of each package file.
</p>

<p>
The same effect can be obtained through <code>dselect</code>.  Simply enter the
[S]elect screen, find the package you wish to hold in its present state, and
press the `=' key (or `H').  The changes will take effect immediately after you
exit the [S]elect screen.
</p>

<p>
The APT system in the Woody distribution has a new alternative mechanism for
holding packages during the archive retrieval process using
<samp>Pin-Priority</samp>.  See the manual page
<code>apt_preferences(5)</code>, along with <code><a
href="http://www.debian.org/doc/manuals/apt-howto/">http://www.debian.org/doc/manuals/apt-howto/</a></code>
or the <code>apt-howto</code> package.
</p>

<hr>

<h3><a name="s-sourcepkgs"></a>2.2.12 Source packages</h3>

<p>
Source packages are distributed in a directory called <code>source</code>, and
you can either download them manually, or use
</p>

<pre>
     apt-get source <var>foo</var>
</pre>

<p>
to fetch them (see the <code>apt-get(8)</code> manual page on how to set up APT
for doing that).
</p>

<hr>

<h3><a name="s-sourcebuild"></a>2.2.13 Building binary packages from a source package</h3>

<p>
For a package <samp><var>foo</var></samp>, you will need all of
<code><var>foo_*</var>.dsc</code>, <code><var>foo_*</var>.tar.gz</code>, and
<code><var>foo_*.diff</var>.gz</code> to compile the source (note: there is no
<samp>.diff.gz</samp> for a Debian native package).
</p>

<p>
Once you have them, if you have the <code>dpkg-dev</code> package installed,
the command
</p>

<pre>
     $ dpkg-source -x <var>foo_version-revision</var>.dsc
</pre>

<p>
will extract the package into a directory called
<samp><var>foo-version</var></samp>.
</p>

<p>
Issue the following command to build the binary package:
</p>

<pre>
     $ cd foo-version
     $ su -c &quot;apt-get update ; apt-get install fakeroot&quot;
     $ dpkg-buildpackage -rfakeroot -us -uc
</pre>

<p>
Then,
</p>

<pre>
     # su -c &quot;dpkg -i ../<var>foo_version-revision_arch</var>.deb&quot;
</pre>

<p>
to install the newly built package.  See <a
href="ch-package.en.html#s-port">Port a package to the <samp>stable</samp>
system, Section 6.4.10</a>.
</p>

<hr>

<h3><a name="s-creatingdebs"></a>2.2.14 Creating new Debian packages</h3>

<p>
For detailed information on creating new packages, read the <em>New
Maintainers' Guide</em>, available in the <code>maint-guide</code> package, or
at <code><a
href="http://www.debian.org/doc/manuals/maint-guide/">http://www.debian.org/doc/manuals/maint-guide/</a></code>.
</p>

<hr>

<h2><a name="s-uptodate"></a>2.3 Upgrading a Debian system</h2>

<p>
One of Debian's goals is to provide a smooth, secure and reliable upgrade
process.  The packaging system alerts the administrator to important changes
and sometimes asks the administrator to take decisions.  You should also read
the Release Notes; it is shipped on all Debian CDs and is available on the WWW
at <code><a
href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></code>
or <code><a
href="http://www.debian.org/releases/testing/releasenotes">http://www.debian.org/releases/testing/releasenotes</a></code>.
</p>

<p>
A practical guide to upgrades is provided in <a
href="ch-package.en.html">Debian package management, Chapter 6</a>.  This
section merely provides an outline, beginning with the packaging tools.
</p>

<hr>

<h3><a name="s-dpkg"></a>2.3.1 <code>dpkg</code></h3>

<p>
This is the main program for manipulating package files; read
<code>dpkg(8)</code> for a full description.
</p>

<p>
<code>dpkg</code> comes with several primitive supplemental programs.
</p>
<ul>
<li>
<p>
<code>dpkg-deb</code>: Manipulate <samp>.deb</samp> files.
<code>dpkg-deb(1)</code>
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>dpkg-ftp</code>: An older package file retrieval command.
<code>dpkg-ftp(1)</code>
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>dpkg-mountable</code>: An older package file retrieval command.
<code>dpkg-mountable(1)</code>
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>dpkg-split</code>: Splits a large package into smaller files.
<code>dpkg-split(1)</code>
</p>
</li>
</ul>

<p>
<code>dpkg-ftp</code> and <code>dpkg-mountable</code> have been superseded by
the introduction of the APT system.
</p>

<hr>

<h3><a name="s-apt"></a>2.3.2 APT</h3>

<p>
APT (the Advanced Packaging Tool) is an advanced interface to the Debian
packaging system consisting of several programs whose names typically begin
with &quot;apt-&quot;.  <code>apt-get</code>, <code>apt-cache</code>, and
<code>apt-cdrom</code> are the command-line tools for handling packages.  These
also function as the user's &quot;back end&quot; programs to other tools, such
as <code>dselect</code> and <code>aptitude</code>.  Currently
<code>aptitude</code> is the preferred tool for system maintenance.
</p>

<p>
For more information, install packages <code>apt</code> and
<code>aptitude</code> and read <code>aptitude(8)</code>,
<code>apt-get(8)</code>, <code>apt-cache(8)</code>, <code>apt-cdrom(8)</code>,
<code>apt.conf(5)</code>, <code>sources.list(5)</code>, and
<code>apt_preferences(5)</code>.
</p>

<p>
An alternative source of information is the <code><a
href="http://www.debian.org/doc/manuals/apt-howto/">APT HOWTO</a></code>.  This
can be installed by <code>apt-howto</code> at
<code>file:///usr/share/doc/Debian/apt-howto/</code>.
</p>

<p>
<samp>apt-get upgrade</samp> and <samp>apt-get dist-upgrade</samp> pull only
the packages listed under &quot;Depends:&quot; and overlook all the packages
listed under &quot;Recommends:&quot; and &quot;Suggests:&quot;.  To avoid this,
use <code>dselect</code>.
</p>

<hr>

<h3><a name="s-dselect-basics"></a>2.3.3 <code>dselect</code></h3>

<p>
This program is a menu-driven user interface to the Debian package management
system.  It is particularly useful for first-time installations and large-scale
upgrades.  See <a href="ch-package.en.html#s-dselect"><code>dselect</code>,
Section 6.2.4</a>.
</p>

<p>
For more information, read <code><a
href="http://www.debian.org/releases/woody/i386/dselect-beginner">dselect
Documentation for Beginners</a></code>.
</p>

<hr>

<h3><a name="s-updaterunning"></a>2.3.4 Upgrading a running system</h3>

<p>
The kernel (filesystem) in Debian systems supports replacing files even while
they're being used.  When packages are upgraded any services provided by those
packages are restarted if they are configured to run in the current runlevel.
The Debian system does not require use of the single-user mode to upgrade a
running system.
</p>

<hr>

<h3><a name="s-savedebs"></a>2.3.5 Downloaded and cached <samp>.deb</samp> archive files</h3>

<p>
If you have manually downloaded package files to your disk (which is not
absolutely necessary, see above for the description of <code>dpkg-ftp</code> or
APT), then after you have installed the packages, you can remove the
<samp>.deb</samp> files from your system.
</p>

<p>
If APT is used, these files are cached in the
<code>/var/cache/apt/archives</code> directory.  You may erase them after
installation (<samp>apt-get clean</samp>) or copy them to another machine's
<code>/var/cache/apt/archives</code> directory to save downloading during
subsequent installations.
</p>

<hr>

<h3><a name="s-keepingalog"></a>2.3.6 Record-keeping for upgrades</h3>

<p>
<code>dpkg</code> keeps a record of the packages that have been unpacked,
configured, removed, and/or purged, but does not (currently) keep a log of
terminal activity that occurred while a package was being so manipulated.
</p>

<p>
The simplest way to work around this is to run your <code>dpkg</code>,
<code>dselect</code>, <code>apt-get</code>, etc., sessions within the
<code>script(1)</code> program.
</p>

<hr>

<h2><a name="s-boot"></a>2.4 The Debian boot process</h2>

<hr>

<h3><a name="s-init"></a>2.4.1 The <code>init</code> program</h3>

<p>
Like all Unixes, Debian boots up by executing the program <code>init</code>.
The configuration file for <code>init</code> (which is
<code>/etc/inittab</code>) specifies that the first script to be executed
should be <code>/etc/init.d/rcS</code>.
</p>

<p>
What happens next depends on whether the <code>sysv-rc</code> package or the
<code>file-rc</code> package is installed.  The following assumes that the
<code>sysv-rc</code> package is installed.  (<code>file-rc</code> contains its
own <code>/etc/init.d/rcS</code> script and uses a file instead of symlinks in
rc directories to control which services are started in which runlevels.)
</p>

<p>
The <code>/etc/init.d/rcS</code> file from the <code>sysv-rc</code> package
runs all of the scripts in <code>/etc/rcS.d/</code> in order to perform
initialization such as checking and mounting file systems, loading modules,
starting the network services, setting the clock, and so on.  Then, for
compatibility, it also runs all the files (except those with a `.'  in the
filename) in <code>/etc/rc.boot/</code>.  The latter directory is reserved for
system administrator use, and using it is deprecated.  See <a
href="ch-tune.en.html#s-init-hints">System initialization, Section 9.1</a> and
<code><a
href="http://www.debian.org/doc/debian-policy/ch-opersys#s-sysvinit">System run
levels and init.d scripts</a></code> in the Debian Policy Manual for more info.
</p>

<p>
Debian does not use a BSD-style <samp>rc.local</samp> directory.
</p>

<hr>

<h3><a name="s-runlevels"></a>2.4.2 Runlevels</h3>

<p>
After completing the boot process, <code>init</code> starts all services that
are configured to run in the default runlevel.  The default runlevel is given
by the entry for <samp>id</samp> in <code>/etc/inittab</code>.  Debian ships
with <samp>id=2</samp>.
</p>

<p>
Debian uses the following runlevels:
</p>
<ul>
<li>
<p>
1 (single-user mode),
</p>
</li>
<li>
<p>
2 through 5 (multiuser modes), and
</p>
</li>
<li>
<p>
0 (halt the system),
</p>
</li>
<li>
<p>
6 (reboot the system).
</p>
</li>
</ul>

<p>
Runlevels 7, 8, and 9 can also be used but their rc directories are not
populated when packages are installed.
</p>

<p>
Switch runlevels using the <code>telinit</code> command.
</p>

<p>
When entering a runlevel all scripts in
<code>/etc/rc<var>runlevel</var>.d/</code> are executed.  The first letter in
the name of the script determines the <strong>way</strong> in which the script
is run: scripts whose names begin with <samp>K</samp> are run with the argument
<samp>stop</samp>.  Scripts beginning with <samp>S</samp> are run with the
argument <samp>start</samp>.  The scripts are run in the alphabetical order of
their names; thus &quot;stop&quot; scripts are run before &quot;start&quot;
scripts and the two-digit numbers following the <samp>K</samp> or
<samp>S</samp> determine the order in which the scripts are run.
</p>

<p>
The scripts in <code>/etc/rc<var>runlevel</var>.d</code> are in fact just
symbolic links back to scripts in <code>/etc/init.d/</code>.  These scripts
also accept &quot;restart&quot; and &quot;force-reload&quot; as argument; the
latter methods can be used after a system has been booted in order to restart
services or force them to reload their configuration files.
</p>

<p>
For example:
</p>

<pre>
     # /etc/init.d/exim4 force-reload
</pre>

<hr>

<h3><a name="s-custombootscripts"></a>2.4.3 Customizing runlevels</h3>

<p>
Customizing runlevels is an advanced system administration task.  The following
advice holds for most services.
</p>

<p>
To enable service <var>service</var> in runlevel <var>R</var> create the
symbolic link
<code>/etc/rc<var>R</var>.d/S<var>xy</var><var>service</var></code> with target
<code>../init.d/<var>service</var></code>.  The sequence number <var>xy</var>
should be the sequence number that was assigned to the service when the package
was installed.
</p>

<p>
To disable the service, rename the symbolic link so that its name begins with a
<samp>K</samp> instead of with an <samp>S</samp> and its sequence number is 100
minus <var>xy</var>.
</p>

<p>
It is convenient to use a runlevel editor such as <code>sysv-rc-conf</code> or
<code>ksysv</code> for these purposes.
</p>

<p>
It is possible to delete the <samp>S</samp> symlink for a service in a
particular runlevel directory instead of renaming it.  This does not disable
the service but leaves it in a &quot;floating&quot; state as far as the
<code>sysv-rc</code> init system is concerned: on runlevel changes the service
will be neither started nor stopped but will be left as it was, whether running
or not running.  Note, however, that a service left in such a floating state
will be started if its package is upgraded whether or not it was running before
the upgrade.  This is a known shortcoming of the current Debian system.  Note
also that you should retain a service's <samp>K</samp> symlinks in runlevels 0
and 6.  If you delete all the symlinks for a service then on upgrade the
service's package will restore the symlinks to their factory default state.
</p>

<p>
It is <strong>not</strong> advisable to make any changes to symlinks in
<code>/etc/rcS.d/</code>.
</p>

<hr>

<h2><a name="s-diverse"></a>2.5 Supporting diversity</h2>

<p>
Debian offers several avenues to accommodate any wishes of the system
administrator without breaking the system.
</p>
<ul>
<li>
<p>
<code>dpkg-divert</code>, see <a href="ch-package.en.html#s-dpkg-divert">The
<code>dpkg-divert</code> command, Section 6.5.1</a>.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>equivs</code>, see <a href="ch-package.en.html#s-equivs">The
<code>equivs</code> package, Section 6.5.2</a>.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>update-alternative</code>, see <a
href="ch-package.en.html#s-alternatives">Alternative commands, Section
6.5.3</a>.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>make-kpkg</code> can accommodate many boot loaders.  See
<code>make-kpkg(1)</code> and <a
href="ch-kernel.en.html#s-kernel-compile">Kernel (re)compile, Section 7.1</a>.
</p>
</li>
</ul>

<p>
Any files under <code>/usr/local/</code> belong to the system administrator and
Debian will not touch them.  Most files under <code>/etc/</code> are
<samp>conffiles</samp> and Debian will not overwrite them upon upgrade unless
the system administrator requests so explicitly.
</p>

<hr>

<h2><a name="s-i18n"></a>2.6 Internationalization</h2>

<p>
The Debian system is internationalized and provides support for character
display and entry in many languages, both within the console and under X.  Many
documents, manual pages, and system messages have been translated into a
growing number of languages.  During installation, Debian prompts the user to
choose an installation language (and sometimes a local language variant).
</p>

<p>
If your installed system does not support all the language features you need,
or if you need to change languages or install a different keyboard to support
your language, see <a href="ch-tune.en.html#s-l10n">Localization (l10n),
Section 9.7</a>.
</p>

<hr>

<h2><a name="s-kernel-details"></a>2.7 Debian and the kernel</h2>

<p>
See <a href="ch-kernel.en.html">The Linux kernel under Debian, Chapter 7</a>.
</p>

<hr>

<h3><a name="s-non-debian-kernel"></a>2.7.1 Compiling a kernel from non-Debian source</h3>

<p>
One has to understand the Debian policy with respect to headers.
</p>

<p>
The Debian C libraries are built with the most recent <strong>stable</strong>
releases of the <strong>kernel</strong> headers.
</p>

<p>
For example, the Debian-1.2 release used version 5.4.13 of the headers.  This
practice contrasts with the Linux kernel source packages distributed at all
Linux FTP archive sites, which use even more recent versions of the headers.
The kernel headers distributed with the kernel source are located in
<code>/usr/include/linux/include/</code>.
</p>

<p>
If you need to compile a program with kernel headers that are newer than those
provided by <code>libc6-dev</code>, then you must add
<samp>-I/usr/src/linux/include/</samp> to your command line when compiling.
This came up at one point, for example, with the packaging of the automounter
daemon (<code>amd</code>).  When new kernels changed some internals dealing
with NFS, <code>amd</code> needed to know about them.  This required the
inclusion of the latest kernel headers.
</p>

<hr>

<h3><a name="s-customkernel"></a>2.7.2 Tools to build custom kernels</h3>

<p>
Users who wish to (or must) build a custom kernel are encouraged to download
the package <code>kernel-package</code>.  This package contains the script to
build the kernel package, and provides the capability to create a Debian
kernel-image package just by running the command
</p>

<pre>
     # make-kpkg kernel_image
</pre>

<p>
in the top-level kernel source directory.  Help is available by executing the
command
</p>

<pre>
     # make-kpkg --help
</pre>

<p>
and through the manual page <code>make-kpkg(1)</code> and <a
href="ch-kernel.en.html">The Linux kernel under Debian, Chapter 7</a>.
</p>

<p>
Users must separately download the source code for the most recent kernel (or
the kernel of their choice) from their favorite Linux archive site, unless a
kernel-source-<var>version</var> package is available (where <var>version</var>
stands for the kernel version).  The Debian <code>initrd</code> boot script
requires a special kernel patch called <code>initrd</code>; see <code><a
href="http://bugs.debian.org/149236">http://bugs.debian.org/149236</a></code>.
</p>

<p>
Detailed instructions for using the <code>kernel-package</code> package are
given in the file <code>/usr/share/doc/kernel-package/README.gz</code>.
</p>

<hr>

<h3><a name="s-modules"></a>2.7.3 Special provisions for dealing with modules</h3>

<p>
Debian's <code>modconf</code> package provides a shell script
(<code>/usr/sbin/modconf</code>) which can be used to customize the
configuration of modules.  This script presents a menu-based interface,
prompting the user for particulars on the loadable device drivers in his
system.  The responses are used to customize the file
<code>/etc/modules.conf</code> (which lists aliases, and other arguments that
must be used in conjunction with various modules) through files in
<code>/etc/modutils/</code>, and <code>/etc/modules</code> (which lists the
modules that must be loaded at boot time).
</p>

<p>
Like the (new) <code>Configure.help</code> files that are now available to
support the construction of custom kernels, the <code>modconf</code> package
comes with a series of help files (in <code>/usr/share/modconf/</code>) which
provide detailed information on appropriate arguments for each of the modules.
</p>

<hr>

<h3><a name="s-removeoldkernel"></a>2.7.4 De-installing an old kernel package</h3>

<p>
The <code>kernel-image-<var>NNN</var>.prerm</code> script checks to see whether
the kernel you are currently running is the same as the kernel you are trying
to de-install.  Therefore you can safely remove unwanted kernel image packages
using this command:
</p>

<pre>
     # dpkg --purge --force-remove-essential kernel-image-<var>NNN</var>
</pre>

<p>
(Replace <var>NNN</var> with your kernel version and revision number, of
course.)
</p>

<hr>

<p>
[ <a href="ch-preface.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ 2 ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ <a href="ch-tune.en.html">9</a> ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ <a href="ch-program.en.html">13</a> ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-install.en.html">next</a> ]
</p>

<hr>

<p>
Debian Reference
</p>

<address>
CVS, Mon Jun 16 21:20:26 UTC 2008<br>
<br>
Osamu Aoki <code><a href="mailto:osamu#at#debian.org">osamu#at#debian.org</a></code><br>
<a href="ap-appendix.en.html#s-authors">Authors, Section A.1</a><br>
<br>
</address>
<hr>

</body>

</html>

