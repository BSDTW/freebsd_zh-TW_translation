<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>

<head>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">

<title>Debian Reference - Programming</title>

</head>

<body>

<p><a name="ch-program"></a></p>
<hr>

<p>
[ <a href="ch-vcs.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ <a href="ch-system.en.html">2</a> ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ <a href="ch-tune.en.html">9</a> ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ 13 ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-gnupg.en.html">next</a> ]
</p>

<hr>

<h1>
Debian Reference
<br>Chapter 13 - Programming
</h1>

<hr>

<p>
Do not use &quot;test&quot; as the name of an executable test file.
<code>test</code> is a shell built-in.
</p>

<hr>

<h2><a name="s13.1"></a>13.1 Where to start</h2>

<p>
References:
</p>
<ul>
<li>
<p>
Documents and examples under
<code>file:///usr/share/doc/<var>package</var></code>
</p>
</li>
<li>
<p>
<code><a href="http://arioch.unomaha.edu/~jclark/#info">Unix / Programming
Information</a></code>
</p>
</li>
<li>
<p>
<em>Linux Programming Bible</em> (John Goerzen/IDG books)
</p>
</li>
</ul>

<p>
Many long info documents can be obtained as paperbacks from <code><a
href="http://www.gnu.org/">GNU</a></code>.
</p>

<p>
The next four sections contain sample scripts in different languages for
creating a text file of account information to be added to
<code>/etc/passwd</code> using a batch processor such as the
<code>newusers</code> program.  Each script requires as input a file with lines
of the form <samp>first_name last_name password</samp>.  (Actual user home
directories will not be created via these scripts.)
</p>

<hr>

<h2><a name="s-shell"></a>13.2 Shell</h2>

<p>
Reading shell scripts is the <strong>best</strong> way to understand how a
Unix-like system works.  Here, I give some pointers and reminders for shell
programming.  See <code><a
href="http://www.greenend.org.uk/rjk/2001/04/shell.html">Shell
Mistakes</a></code> to learn from mistakes.
</p>

<hr>

<h3><a name="s-bash"></a>13.2.1 Bash &ndash; <strong>GNU</strong> standard interactive shell</h3>

<p>
References for Bash:
</p>
<ul>
<li>
<p>
<code>bash(1)</code>
</p>
</li>
<li>
<p>
<samp>info bash</samp>
</p>
</li>
<li>
<p>
the LDP <code><a
href="http://www.tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html">BASH Programming -
Introduction HOWTO</a></code> as starter information.
</p>
</li>
<li>
<p>
<samp>mc file:///usr/share/doc/bash/examples/
file:///usr/share/doc/bash/</samp>
</p>
<p>
(Install the <code>bash-doc</code> package to see the example files.)
</p>
</li>
<li>
<p>
<em>Learning the bash Shell</em>, 2nd edition (O'Reilly)
</p>
</li>
</ul>

<p>
Short program example (creates account entries for <code>newusers</code> from
standard input):
</p>

<pre>
     #!/bin/bash
     # (C) Osamu Aoki Sun Aug 26 16:53:55 UTC 2001 Public Domain
     pid=1000;
     while read n1 n2 n3 ; do
     if [ ${n1:0:1} != &quot;#&quot; ]; then
     let pid=$pid+1
     echo ${n1}_${n2}:password:${pid}:${pid}:,,,/home/${n1}_${n2}:/bin/bash
     fi
     done
</pre>

<hr>

<h3><a name="s-posix-shell"></a>13.2.2 POSIX shells</h3>

<p>
Several packages provide a POSIX shell in Debian:
</p>
<ul>
<li>
<p>
<code>dash</code> (Sarge)
</p>
<ul>
<li>
<p>
Priority: optional
</p>
</li>
<li>
<p>
Installed-Size: 176
</p>
</li>
<li>
<p>
Smallest and fastest by far &ndash; best for initial boot
</p>
</li>
</ul>
</li>
<li>
<p>
<code>ash</code> (Woody)
</p>
<ul>
<li>
<p>
Priority: optional
</p>
</li>
<li>
<p>
Installed-Size: 180
</p>
</li>
<li>
<p>
Smaller and much faster &ndash; good for initial boot
</p>
</li>
</ul>
</li>
<li>
<p>
<code>bash</code>
</p>
<ul>
<li>
<p>
Essential: yes
</p>
</li>
<li>
<p>
Priority: required
</p>
</li>
<li>
<p>
Installed-Size: 580
</p>
</li>
<li>
<p>
Larger and featureful &ndash; many extensions implemented
</p>
</li>
</ul>
</li>
<li>
<p>
<code>pdksh</code>
</p>
<ul>
<li>
<p>
Priority: optional
</p>
</li>
<li>
<p>
Installed-Size: 408
</p>
</li>
<li>
<p>
Complete AT&amp;T ksh look-alike
</p>
</li>
</ul>
</li>
</ul>

<p>
If you are writing a shell script for portability, it is best to write it as a
POSIX shell script.  Use <code>/bin/sh</code> linked to <code>ash</code> (or
<code>dash</code>) to test its POSIX compliance.  Avoid writing scripts with
&quot;bashisms&quot; or the &quot;zshisms&quot;.  For example, avoid:
</p>
<ul>
<li>
<p>
<samp>if [ <var>foo</var> == <var>bar</var> ] ; then ...</samp>
</p>
</li>
<li>
<p>
<samp>diff -u <var>file</var>.c{.orig,}</samp>
</p>
</li>
<li>
<p>
<samp>mkdir <var>/foo</var>{<var>bar</var>,<var>baz</var>}</samp>
</p>
</li>
</ul>

<p>
The description for the shell in this document applies only for the POSIX type
shells and thus does not apply for the <code>csh</code> type shells including
<code>tcsh</code>.
</p>

<hr>

<h3><a name="s-shell-param"></a>13.2.3 Shell parameters</h3>

<p>
Several <strong>special parameters</strong> to remember:
</p>
<pre>
     $0      = name of the shell or shell script
     $1      = first(1) shell argument
      ...
     $9      = ninth(9) shell argument
     $#      = number of positional parameters
     &quot;$*&quot;    = &quot;$1 $2 $3 $4 ... $<var>n</var>&quot;
     &quot;$@&quot;    = &quot;$1&quot; &quot;$2&quot; &quot;$3&quot; &quot;$4&quot; ... &quot;$<var>n</var>&quot;
     $?      = exit status of the most recent command
     $$      = PID of this shell script
     $!      = PID of most recently started background job
</pre>

<p>
Basic <strong>parameter expansions</strong> to remember:
</p>
<pre>
         Form        If <var>var</var> is set       If <var>var</var> is not set
     ${<var>var</var>:-<var>string</var>}  $<var>var</var>                <var>string</var>
     ${<var>var</var>:+<var>string</var>}  <var>string</var>              null
     ${<var>var</var>:=<var>string</var>}  $<var>var</var>                <var>string</var> 
                                         (and run <var>var</var>=<var>string</var>)
     ${<var>var</var>:?<var>string</var>}  $<var>var</var>                (echo <var>string</var> and then exit)
</pre>

<p>
Here, the colon `:' in all of these operators is actually optional.
</p>
<ul>
<li>
<p>
With `:' = operator test for &quot;exist&quot; and &quot;not null&quot;.
</p>
</li>
<li>
<p>
Without `:' = operator test for &quot;exist&quot; only.
</p>
</li>
</ul>

<p>
Basic <strong>parameter substitutions</strong> to remember:
</p>
<pre>
         Form        Result
     ${<var>var</var>%<var>suffix</var>}   Remove smallest <var>suffix</var> pattern
     ${<var>var</var>%%<var>suffix</var>}  Remove largest <var>suffix</var> pattern
     ${<var>var</var>#<var>prefix</var>}   Remove smallest <var>prefix</var> pattern
     ${<var>var</var>##<var>prefix</var>}  Remove largest <var>prefix</var> pattern
</pre>

<hr>

<h3><a name="s-shell-redirect"></a>13.2.4 Shell redirection</h3>

<p>
Basic <strong>redirection</strong> to remember (here the [<var>n</var>] is an
optional number to specify the file descriptor):
</p>
<pre>
     [<var>n</var>]&gt; <var>file</var>      Redirect stdout (or <var>n</var>) to <var>file</var>.
     [<var>n</var>]&gt;&gt; <var>file</var>     Append stdout (or <var>n</var>) to <var>file</var>.
     [<var>n</var>]&lt; <var>file</var>      Redirect stdin (or <var>n</var>) from <var>file</var>.
     [<var>n1</var>]&gt;&amp;<var>n2</var>       Redirect stdout (or <var>n1</var>) to <var>n2</var>.
     2&gt; <var>file</var>  &gt;&amp;2   Redirect stdout and stderr to <var>file</var>.
      &gt; <var>file</var> 2&gt;&amp;1   Redirect stdout and stderr to <var>file</var>.
     | <var>command</var>      Pipe stdout to <var>command</var>.
     2&gt;&amp;1 | <var>command</var> Pipe stderr and stdout to <var>command</var>.
</pre>

<p>
Here,
</p>
<ul>
<li>
<p>
stdin: standard input (file descriptor = 0)
</p>
</li>
<li>
<p>
stdout: standard output (file descriptor = 1)
</p>
</li>
<li>
<p>
stderr: standard error (file descriptor = 2)
</p>
</li>
</ul>

<p>
The shell allows you to open files using the <code>exec</code> built-in with an
arbitrary file descriptor.
</p>

<pre>
     $ echo Hello &gt;foo
     $ exec 3&lt;foo 4&gt;bar  # open files
     $ cat &lt;&amp;3 &gt;&amp;4       # redirect stdin to 3, stdout to 4
     $ exec 3&lt;&amp;- 4&gt;&amp;-    # close files
     $ cat bar
     Hello
</pre>

<p>
Here <var>n</var><samp>&lt;&amp;-</samp> and
<var>n</var><samp>&gt;&amp;-</samp> mean to close the file descriptor
<var>n</var>.
</p>

<hr>

<h3><a name="s-shell-cond"></a>13.2.5 Shell conditionals</h3>

<p>
Each command returns an <strong>exit status</strong> which can be used for
conditional expressions:
</p>
<ul>
<li>
<p>
Success: 0 (True)
</p>
</li>
<li>
<p>
Error: 1&ndash;255 (False)
</p>
</li>
</ul>

<p>
Note that the use here of a 0 value to mean &quot;true&quot; differs from the
usual convention in some other areas of computing.  Also, `[' is the equivalent
of the <code>test</code> command, which evaluates its arguments up to `]' as a
conditional expression.
</p>

<p>
Basic <strong>conditional idioms</strong> to remember are:
</p>
<pre>
     <var>command</var> &amp;&amp; <var>if_success_run_this_command_too</var> || true
     <var>command</var> || <var>if_not_success_run_this_command_instead</var>
     
     if [ <var>conditional_expression</var> ]; then  
      <var>if_success_run_this_command</var>
     else
      <var>if_not_success_run_this_command</var>
     fi
</pre>

<p>
Here <samp>|| true</samp> was needed to ensure this shell script will not exit
at this line accidentally when shell is invoked with <samp>-e</samp> flag.
</p>

<p>
<strong>File</strong> comparison operators in the conditional expression are:
</p>
<pre>
     -e <var>file</var>         True if <var>file</var> exists.
     -d <var>file</var>         True if <var>file</var> exists and is a directory.
     -f <var>file</var>         True if <var>file</var> exists and is a regular file.
     -w <var>file</var>         True if <var>file</var> exists and is writable.
     -x <var>file</var>         True if <var>file</var> exists and is executable.
     <var>file1</var> -nt <var>file2</var> True if <var>file1</var> is newer than <var>file2</var>. (modification)
     <var>file1</var> -ot <var>file2</var> True if <var>file1</var> is older than <var>file2</var>. (modification)
     <var>file1</var> -ef <var>file2</var> True if they are the same device and inode numbers.
</pre>

<p>
<strong>String</strong> comparison operators in the conditional expression are:
</p>
<pre>
          -z <var>str</var>    True if the length of <var>str</var> is zero.
          -n <var>str</var>    True if the length of <var>str</var> is non-zero.
     <var>str1</var> == <var>str2</var>   True if the strings are equal.
     <var>str1</var> =  <var>str2</var>   True if the strings are equal.
         (&quot;=&quot; should be used in place of &quot;==&quot; for strict POSIX compliance) 
     <var>str1</var> != <var>str2</var>   True if the strings are not equal.
     <var>str1</var> &lt;  <var>str2</var>   True if <var>str1</var> sorts before <var>str2</var> (locale dependent).
     <var>str1</var> &gt;  <var>str2</var>   True if <var>str1</var> sorts after <var>str2</var> (locale dependent).
</pre>

<p>
<strong>Arithmetic</strong> integer comparison operators in the conditional
expression are <samp>-eq</samp>, <samp>-ne</samp>, <samp>-lt</samp>,
<samp>-le</samp>, <samp>-gt</samp>, and <samp>-ge</samp>.
</p>

<hr>

<h3><a name="s-clprocess"></a>13.2.6 Command-line processing</h3>

<p>
The shell processes a script as follows:
</p>
<ul>
<li>
<p>
split into <strong>tokens</strong> by the metacharacters: SPACE, TAB, NEWLINE,
;, (, ), &lt;, &gt;, |, &amp;
</p>
</li>
<li>
<p>
check <strong>keyword</strong> if not within &quot;...&quot; or '...'  (loop)
</p>
</li>
<li>
<p>
expand <strong>alias</strong> if not within &quot;...&quot; or '...'  (loop)
</p>
</li>
<li>
<p>
expand <strong>brace</strong>, <samp>a{1,2}</samp> -&gt; <samp>a1 a2</samp>, if
not within &quot;...&quot; or '...'
</p>
</li>
<li>
<p>
expand <strong>tilde</strong>, ~<var>user</var> -&gt; <var>user</var>'s home
directory, if not within &quot;...&quot; or '...'
</p>
</li>
<li>
<p>
expand <strong>parameter</strong>, $<var>PARAMETER</var>, if not within '...'
</p>
</li>
<li>
<p>
expand <strong>command substitution</strong>, $(<var>command</var>), if not
within '...'
</p>
</li>
<li>
<p>
split into <strong>words</strong> with $IFS if not within &quot;...&quot; or
'...'
</p>
</li>
<li>
<p>
expand *?[] in <strong>pathname</strong> if not within &quot;...&quot; or '...'
</p>
</li>
<li>
<p>
look up <strong>command</strong>
</p>
<ul>
<li>
<p>
function
</p>
</li>
<li>
<p>
built-in
</p>
</li>
<li>
<p>
file in $PATH
</p>
</li>
</ul>
</li>
<li>
<p>
loop
</p>
</li>
</ul>

<p>
Single quotes within double quotes have no effect.
</p>

<p>
Executing <samp>set -x</samp> in the shell or invoking the shell with
<samp>-x</samp> option make the shell to print all of commands executed.  This
is quite handy for debugging.
</p>

<hr>

<h2><a name="s-awk"></a>13.3 Awk</h2>

<p>
References for Awk:
</p>
<ul>
<li>
<p>
<em>Effective awk Programming</em>, 3rd edition (O'Reilly)
</p>
</li>
<li>
<p>
<em>Sed &amp; awk</em>, 2nd edition (O'Reilly)
</p>
</li>
<li>
<p>
<code>mawk(1)</code> and <code>gawk(1)</code>
</p>
</li>
<li>
<p>
<samp>info gawk</samp>
</p>
</li>
</ul>

<p>
Short program example (creates <code>newusers</code> command entry):
</p>

<pre>
     #!/usr/bin/awk -f
     # Script to create a file suitable for use in the 'newusers' command,
     # from a file consisting of user IDs and passwords in the form:
     # first_name last_name password
     # Copyright (c) KMSelf Sat Aug 25 20:47:38 PDT 2001
     # Distributed under GNU GPL v 2, or at your option, any later version.
     # This program is distributed WITHOUT ANY WARRANTY.
     
     BEGIN {
         # Assign starting UID, GID
         if ( ARGC &gt; 2 ) {
             startuid = ARGV[1]
             delete ARGV[1]
         }
         else {
             printf( &quot;Usage:  newusers startUID file\n&quot; \
               &quot;  where:\n&quot; \ 
               &quot;    startUID is the starting userid to add, and\n&quot; \
               &quot;    file is an input file in form:\n&quot; \
               &quot;      first_name last_name password\n&quot; \
             )
             exit
         }
     
         infile = ARGV[1]
         printf( &quot;Starting UID: %s\n\n&quot;, startuid )
     }
     
     /^#/ { next }
     
     {
         ++record
         first = $1
         last = $2
         passwd = $3
         user= substr( tolower( first ), 1, 1 ) tolower( last )
         uid = startuid + record - 1
         gid = uid
         printf( &quot;%s:%s:%d:%d:%s %s,,/home/%s:/bin/bash\n&quot;,  \
             user, passwd, uid, gid, first, last, user \
             )
     }
</pre>

<p>
Two packages provide POSIX <code>awk</code> in Debian:
</p>
<ul>
<li>
<p>
<code>mawk</code>
</p>
<ul>
<li>
<p>
Priority: required
</p>
</li>
<li>
<p>
Installed-Size: 228
</p>
</li>
<li>
<p>
Smaller and much faster &ndash; good for default install
</p>
</li>
<li>
<p>
Compile-time limits exist
</p>
<ul>
<li>
<p>
NF = 32767
</p>
</li>
<li>
<p>
sprintf buffer = 1020
</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>
<code>gawk</code>
</p>
<ul>
<li>
<p>
Priority: optional
</p>
</li>
<li>
<p>
Installed-Size: 1708
</p>
</li>
<li>
<p>
Larger and featureful &ndash; many extensions implemented
</p>
<ul>
<li>
<p>
System V Release 4 version of UNIX
</p>
</li>
<li>
<p>
Bell Labs awk
</p>
</li>
<li>
<p>
GNU-specific
</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<hr>

<h2><a name="s-perl"></a>13.4 Perl</h2>

<p>
This is <strong>the</strong> interpreter on a Unix-like system.
</p>

<p>
References for Perl:
</p>
<ul>
<li>
<p>
<code>perl(1)</code>
</p>
</li>
<li>
<p>
<em>Programming Perl</em>, 3rd edition (O'Reilly)
</p>
</li>
<li>
<p>
<code><a href="http://www.perl.org/">The Perl Directory</a></code>
</p>
</li>
</ul>

<p>
Short program example (creates <code>newusers</code> command entry):
</p>

<pre>
     #!/usr/bin/perl
     # (C) Osamu Aoki Sun Aug 26 16:53:55 UTC 2001 Public Domain
     $pid=1000;
     while (&lt;STDIN&gt;) {
             if (/^#/) { next;}
             chop;
             $pid++;
             ($n1, $n2, $n3) = split / /;
             print $n1,&quot;_&quot;,$n2,&quot;:&quot;, $n3, &quot;:&quot;,$pid,
                       &quot;:&quot;,$pid,&quot;,,,/home/&quot;,$n1,&quot;_&quot;,$n2,&quot;:/bin/bash\n&quot;
     }
</pre>

<p>
Install Perl module <var>module_name</var>:
</p>

<pre>
     # perl -MCPAN -e 'install <var>module_name</var>'
</pre>

<hr>

<h2><a name="s-python"></a>13.5 Python</h2>

<p>
It's a nice object-oriented interpreter.
</p>

<p>
References for Python:
</p>
<ul>
<li>
<p>
<code>python(1)</code>
</p>
</li>
<li>
<p>
<em>Learning Python</em> (O'Reilly).
</p>
</li>
<li>
<p>
<code><a href="http://www.python.org/">Python Programming Language</a></code>
</p>
</li>
</ul>

<p>
Short program example (creates <code>newusers</code> command entry):
</p>

<pre>
     #! /usr/bin/env python
     import sys, string
     
     # (C) Osamu Aoki Sun Aug 26 16:53:55 UTC 2001 Public Domain
     # Ported from awk script by KMSelf Sat Aug 25 20:47:38 PDT 2001
     # This program is distributed WITHOUT ANY WARRANTY.
     
     def usages():
         print \
     &quot;Usage:  &quot;, sys.argv[0], &quot; start_UID [filename]\n&quot; \
     &quot;\tstartUID is the starting userid to add.\n&quot; \
     &quot;\tfilename is input filename. If not specified, standard input.\n\n&quot; \
     &quot;Input file format:\n&quot;\
     &quot;\tfirst_name last_name password\n&quot;
                     return 1
     
     def parsefile(startuid):
         #
         # main filtering
         #
         uid = startuid
         while 1:
             line = infile.readline()
             if not line:
                 break
             if line[0] == '#':
                 continue
             (first, last, passwd) = string.split(string.lower(line))
             # above crashes with wrong # of parameters :-)
             user = first[0] + last
             gid = uid
             lineout = &quot;%s:%s:%d:%d:%s %s,,/home/%s:/bin/bash\n&quot; %  \
                 (user, passwd, uid, gid, first, last, user)
             sys.stdout.write(lineout)
             +uid
     
     if __name__ == '__main__':
         if len(sys.argv) == 1:
             usages()
         else:
             uid = int(sys.argv[1])
             #print &quot;# UID start from: %d\n&quot; % uid
             if len(sys.argv) &gt; 1:
                 infilename   = string.join(sys.argv[2:])
                 infile = open(infilename, 'r')
                 #print &quot;# Read file from: %s\n\n&quot; % infilename
             else:
                 infile = sys.stdin
             parsefile(uid)
</pre>

<hr>

<h2><a name="s-make"></a>13.6 Make</h2>

<p>
References for Make:
</p>
<ul>
<li>
<p>
<samp>info make</samp>
</p>
</li>
<li>
<p>
<code>make(1)</code>
</p>
</li>
<li>
<p>
<em>Managing Projects with make</em>, 2nd edition (O'Reilly)
</p>
</li>
</ul>

<p>
Simple automatic variables:
</p>

<p>
Rule syntax:
</p>

<pre>
     <var>target</var>: [ <var>prerequisites</var> ... ]
      [TAB]  <var>command1</var>
      [TAB]  -<var>command2</var> # ignore errors
      [TAB]  @<var>command3</var> # suppress echoing
</pre>

<p>
Here <samp>[TAB]</samp> is a TAB code.  Each line is interpreted by the shell
after <code>make</code> variable substitution.  Use <samp>\</samp> at the end
of a line to continue the script.  Use <samp>$$</samp> to enter <samp>$</samp>
for environment values for a shell script.
</p>

<p>
<strong>Implicit rules</strong> for the <var>target</var> and
<var>prerequisites</var> can be written, for example, as:
</p>

<pre>
     %: %.c header.h
</pre>

<p>
or,
</p>

<pre>
     %.o: %.c header.h
</pre>

<p>
Here, the <var>target</var> contains the character <samp>%</samp> (exactly one
of them).  The <samp>%</samp> can match any nonempty substring in the actual
target filenames.  The <var>prerequisites</var> likewise use <samp>%</samp> to
show how their names relate to the actual target name.
</p>

<p>
<strong>Suffix rules</strong> are the <strong>obsolete</strong> way of defining
implicit rules for <code>make</code>.  They are still supported in GNU
<code>make</code> for compatibility, but use equivalent pattern rules whenever
possible:
</p>

<pre>
     old suffix rule --&gt; new pattern rule
     .c:             --&gt; %  : %.c
     .c.o:           --&gt; %.o: %.c
</pre>

<p>
Automatic variables for the rule:
</p>

<pre>
     foo.o: new1.c new2.c old1.c new3.c
     $@ == foo.o                         (target)
     $&lt; == new1.c                        (first one)
     $? == new1.c new2.c new3.c          (newer ones)
     $^ == new1.c new2.c old1.c new3.c   (all)
     $* == `%' matched stem in the target pattern.
</pre>

<p>
Variable references:
</p>

<pre>
     foo1 := bar    # One-time expansion
     foo2  = bar    # Recursive expansion
     foo3 += bar    # Append
     SRCS := $(wildcard *.c)
     OBJS := $(foo:c=o)
     OBJS := $(foo:%.c=%.o) 
     OBJS := $(patsubst %.c,%.o,$(foo)) 
     DIRS  = $(dir directory/filename.ext) # Extracts &quot;directory&quot;
      $(notdir NAMES...), $(basename NAMES...), $(suffix NAMES...) ...
</pre>

<p>
Run <samp>make -p -f/dev/null</samp> to see automatic internal rules.
</p>

<hr>

<h2><a name="s-c"></a>13.7 C</h2>

<p>
Preparation:
</p>

<pre>
     # apt-get install glibc-doc manpages-dev libc6-dev gcc
</pre>

<p>
References for C:
</p>
<ul>
<li>
<p>
<samp>info libc</samp> (C library function reference)
</p>
</li>
<li>
<p>
<code>gcc(1)</code>
</p>
</li>
<li>
<p>
<code>each_C_library_function_name(3)</code>
</p>
</li>
<li>
<p>
Kernighan &amp; Ritchie, <em>The C Programming Language</em>, 2nd edition
(Prentice Hall).  <code><a
href="http://cm.bell-labs.com/cm/cs/cbook/">http://cm.bell-labs.com/cm/cs/cbook/</a></code>
</p>
</li>
<li>
<p>
ISO C standard.  <code><a
href="http://www.open-std.org/jtc1/sc22/wg14/">http://www.open-std.org/jtc1/sc22/wg14/</a></code>
</p>
</li>
</ul>

<hr>

<h3><a name="s13.7.1"></a>13.7.1 Simple C program (<code>gcc</code>)</h3>

<p>
A simple example to compile <code>example.c</code> with a library
<code>libm</code> into an executable <code>run_example</code>:
</p>

<pre>
     $ cat &gt; example.c &lt;&lt; EOF
     #include &lt;stdio.h&gt;
     #include &lt;math.h&gt;
     #include &lt;string.h&gt;
     
     int main(int argc, char **argv, char **envp){
             double x;
             char y[11];
             x=sqrt(argc+7.5);
             strncpy(y, argv[0], 10); /* prevent buffer overflow */
             y[10] = '\0'; /* fill to make sure string ends with '\0' */
             printf(&quot;%5i, %5.3f, %10s, %10s\n&quot;, argc, x, y, argv[1]);
             return 0;
     }
     EOF
     $ gcc -Wall -g -o run_example example.c -lm
     $ ./run_example
             1, 2.915, ./run_exam,     (null)
     $ ./run_example 1234567890qwerty
             2, 3.082, ./run_exam, 1234567890qwerty
</pre>

<p>
Here, <samp>-l<strong>m</strong></samp> is needed to link library
<code>lib<strong>m</strong></code> for <code>sqrt()</code>.  The actual library
is in <code>/lib/</code> with filename <code>libm.so.6</code>, which is a
symlink to <code>libm-2.1.3.so</code>.
</p>

<p>
Look at the last parameter in the output text.  There are more than 10
characters even though <samp>%10s</samp> is specified.
</p>

<p>
The use of pointer memory operation functions without boundary checks, such as
<code>sprintf</code> and <code>strcpy</code>, is deprecated to prevent buffer
overflow exploits that leverage the above overrun effects.  Instead, use
<code>snprintf</code> and <code>strncpy</code>.
</p>

<hr>

<h3><a name="s13.7.2"></a>13.7.2 Debugging</h3>

<hr>

<h4><a name="s13.7.2.1"></a>13.7.2.1 Debugging with <code>gdb</code></h4>

<p>
Preparation:
</p>

<pre>
     # apt-get install gdb
</pre>

<p>
References for <code>gdb</code>:
</p>
<ul>
<li>
<p>
<samp>info gdb</samp> (tutorial)
</p>
</li>
<li>
<p>
<code>gdb(1)</code>
</p>
</li>
<li>
<p>
<code><a
href="http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html">http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html</a></code>
</p>
</li>
</ul>

<p>
Use <code>gdb</code> to debug a program compiled with the <samp>-g</samp>
option.  Many commands can be abbreviated.  Tab expansion works as in the
shell.
</p>

<pre>
     $ gdb program
     (gdb) b 1                # set breakpoint at line 1
     (gdb) run <var>arg1 arg2 arg3</var> # run program
     (gdb) next               # next line
     ...
     (gdb) step               # step forward
     ...
     (gdb) p parm             # print parm 
     ...
     (gdb) p parm=12          # set value to 12
</pre>

<p>
For debugging from within Emacs, refer to <a
href="ch-edit.en.html#s-editkey">Editor command summary (Emacs, Vim), Section
11.3.4</a>.
</p>

<p>
Since all installed binaries should be stripped on the Debian system by
default, most debugging symbols are removed.  In order to make <code>gdb</code>
useful for debugging Debian packages, pertinent packages need to be rebuild
with following care:
</p>
<ul>
<li>
<p>
Edit <code>debian/control</code> to bump the package <code><a
href="http://www.debian.org/doc/debian-policy/ch-controlfields#s-f-Version">version</a></code>.
</p>
</li>
<li>
<p>
Check build scripts and ensure to use <samp>CFLAGS=-g -Wall</samp> for
compiling binaries.
</p>
</li>
<li>
<p>
Export <samp>DEB_BUILD_OPTIONS=nostrip,noopt</samp> for building the Debian
package.
</p>
</li>
</ul>

<p>
See <code><a
href="http://www.debian.org/doc/debian-policy/ch-files#s10.1">Policy
10.1</a></code> for more info.
</p>

<hr>

<h4><a name="s-ss-ldd"></a>13.7.2.2 Check dependency on libraries</h4>

<p>
Use <code>ldd</code> to find out a program's dependency on libraries:
</p>

<pre>
     $ ldd /bin/ls
             librt.so.1 =&gt; /lib/librt.so.1 (0x4001e000)
             libc.so.6 =&gt; /lib/libc.so.6 (0x40030000)
             libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x40153000)
             /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x40000000)
</pre>

<p>
For <code>ls</code> to work in a <code>chroot</code>ed environment, the above
libraries must be available in your <code>chroot</code>ed environment.
</p>

<p>
The following commands will also be useful:
</p>
<ul>
<li>
<p>
<code>strace</code>: trace system calls and signals
</p>
</li>
<li>
<p>
<code>ltrace</code>: trace library calls
</p>
</li>
</ul>

<hr>

<h4><a name="s13.7.2.3"></a>13.7.2.3 Debugging with memory leak detection tools</h4>

<p>
There are several memory leak detection tools available in Debian.
</p>

<ul>
<li>
<p>
<code>njamd</code>
</p>
</li>
<li>
<p>
<code>valgrind</code>
</p>
</li>
<li>
<p>
<code>dmalloc</code>
</p>
</li>
<li>
<p>
<code>electric-fence</code>
</p>
</li>
<li>
<p>
<code>memprof</code>
</p>
</li>
<li>
<p>
<code>memwatch</code> (not packaged, get this from <code><a
href="http://directory.fsf.org/devel/debug/memwatch.html">memwatch</a></code>.)
</p>
</li>
<li>
<p>
<code>mpatrol</code>
</p>
</li>
<li>
<p>
<code>leaktracer</code>
</p>
</li>
<li>
<p>
<code>libgc6</code>
</p>
</li>
<li>
<p>
<samp>Insure++</samp> from <code><a
href="http://www.parasoft.com">Parasoft</a></code>.  (non-free, commercial for
fee)
</p>
</li>
</ul>

<p>
Also check out <code><a
href="http://www.cs.colorado.edu/homes/zorn/public_html/MallocDebug.html">Debugging
Tools for Dynamic Storage Allocation and Memory Management</a></code>.
</p>

<hr>

<h3><a name="s13.7.3"></a>13.7.3 Flex &ndash; a better Lex</h3>

<p>
<code>flex</code> is a fast lexical analyzer generator.
</p>

<p>
References for <code>flex</code>:
</p>
<ul>
<li>
<p>
<samp>info flex</samp> (tutorial)
</p>
</li>
<li>
<p>
<code>flex(1)</code>
</p>
</li>
</ul>

<p>
You need to provide your own <code>main()</code> and <code>yywrap()</code>, or
your <code>program.l</code> should look like this to compile without a library
(<code>yywrap</code> is a macro; <samp>%option main</samp> turns on
<samp>%option noyywrap</samp> implicitly):
</p>

<pre>
     %option main
     %%
     .|\n    ECHO ;
     %%
</pre>

<p>
Alternatively, you may compile with the <samp>-lfl</samp> linker option at the
end of your <code>cc</code> command line (like AT&amp;T-Lex with
<samp>-ll</samp>).  No <samp>%option</samp> is needed in this case.
</p>

<hr>

<h3><a name="s13.7.4"></a>13.7.4 Bison &ndash; a better Yacc</h3>

<p>
Several packages provide a Yacc-compatible LALR parser generator in Debian:
</p>

<ul>
<li>
<p>
<code>bison</code>: GNU LALR parser generator
</p>
</li>
<li>
<p>
<code>byacc</code>: The Berkeley LALR parser generator
</p>
</li>
<li>
<p>
<code>btyacc</code>: Backtracking parser generator based on <code>byacc</code>
</p>
</li>
</ul>

<p>
References for <code>bison</code>:
</p>
<ul>
<li>
<p>
<samp>info bison</samp> (tutorial)
</p>
</li>
<li>
<p>
<code>bison(1)</code>
</p>
</li>
</ul>

<p>
You need to provide your own <code>main()</code> and <code>yyerror()</code>.
<code>main()</code> calls <code>yyparse()</code> which calls
<code>yylex()</code>, usually created with FleX.
</p>

<pre>
     %%
     
     %%
</pre>

<hr>

<h3><a name="s13.7.5"></a>13.7.5 Autoconf</h3>

<p>
<code>autoconf</code> is a tool for producing shell scripts that automatically
configure software source code packages to adapt to many kinds of UNIX-like
systems using the entire GNU build system.
</p>

<p>
<code>autoconf</code> produces the configuration script <code>configure</code>.
<code>configure</code> automatically creates a customized <code>Makefile</code>
using the <code>Makefile.in</code> template.
</p>

<hr>

<h4><a name="s13.7.5.1"></a>13.7.5.1 Compile and install a program</h4>

<p>
Debian does not touch files in <code>/usr/local/</code> (see <a
href="ch-system.en.html#s-diverse">Supporting diversity, Section 2.5</a>).  So
if you compile a program from source, install it into <code>/usr/local/</code>
so it will not interfere with Debian.
</p>

<pre>
     $ cd src
     $ ./configure --prefix=/usr/local
     $ make
     $ make install # this puts the files in the system
</pre>

<hr>

<h4><a name="s13.7.5.2"></a>13.7.5.2 Uninstall program</h4>

<p>
If you still have the source and if it uses
<code>autoconf</code>/<code>automake</code> and if you can remember how you
configured it:
</p>

<pre>
     $ ./configure <var>all-of-the-options-you-gave-it</var>
     # make uninstall
</pre>

<p>
Alternatively, if you are absolutely sure that the install process puts files
only under <code>/usr/local/</code> and there is nothing important there, you
can erase all its contents by:
</p>

<pre>
     # find /usr/local -type f -print0 | xargs -0 rm -f
</pre>

<p>
If you are not sure where files are installed, you should consider using
<code>checkinstall</code>, which provides a clean path for the uninstall.
</p>

<hr>

<h2><a name="s-cgi"></a>13.8 Web</h2>

<p>
Basic interactive dynamic web pages can be made as follows:
</p>
<ul>
<li>
<p>
Queries are presented to the browser user using HTML forms.
</p>
</li>
<li>
<p>
Filling and clicking on the form entries will send an URL with encoded
parameters [<a href="footnotes.en.html#f64" name="fr64">64</a>] from the
browser to the web server.  For example:
</p>
<ul>
<li>
<p>
<samp>http://www.foo.dom/cgi-bin/program.pl?VAR1=VAL1&amp;VAR2=VAL2&amp;VAR3=VAL3</samp>
</p>
</li>
<li>
<p>
<samp>http://www.foo.dom/cgi-bin/program.py?VAR1=VAL1&amp;VAR2=VAL2&amp;VAR3=VAL3</samp>
</p>
</li>
<li>
<p>
<samp>http://www.foo.dom/program.php?VAR1=VAL1&amp;VAR2=VAL2&amp;VAR3=VAL3</samp>
</p>
</li>
</ul>
</li>
<li>
<p>
CGI program (any one of <code>program.*</code>) on the web server will receive
decoded parameters &quot;<samp>VAR1=VAL1 VAR2=VAL2 VAR3=VAL3</samp>&quot; as
the contents of environment variable &quot;<samp>QUERY_STRING</samp>&quot; and
executes itself.
</p>
</li>
<li>
<p>
<samp>stdout</samp> of CGI program will be sent to the web browser and is
presented as an interactive dynamic web page.
</p>
</li>
</ul>

<p>
For security reasons it is better not to hand craft new hacks for parsing CGI
parameters.  There are established modules for them in Perl (see <a
href="#s-perl">Perl, Section 13.4</a>) and Python (see <a
href="#s-python">Python, Section 13.5</a>).  <code><a
href="http://www.php.net/">PHP</a></code> comes with these functionality.  When
client data storage is needed, cookies are used.  When client side data
processing is needed, javascript is frequently used.
</p>

<p>
For more, see <code><a href="http://hoohoo.ncsa.uiuc.edu/cgi/">The Common
Gateway Interface</a></code>, <code><a href="http://www.apache.org/">The Apache
Software Foundation</a></code>, and <code><a
href="http://www.mozilla.org/js/">JavaScript</a></code>.
</p>

<p>
Searching &quot;CGI tutorial&quot; on Google by typing encoded URL
<samp>http://www.google.com/search?hl=en&amp;ie=UTF-8&amp;q=CGI+tutorial</samp>
directly to the browser address is a good way to see the CGI script in action
on the Google server.
</p>

<hr>

<h2><a name="s-doc-prep"></a>13.9 Document preparation</h2>

<hr>

<h3><a name="s-roff"></a>13.9.1 <samp>roff</samp> typesetting</h3>

<p>
Traditionally, <samp>roff</samp> is the main Unix text processing system.
</p>

<p>
See <code>roff(7)</code>, <code>groff(7)</code>, <code>groff(1)</code>,
<code>grotty(1)</code>, <code>troff(1)</code>, <code>groff_mdoc(7)</code>,
<code>groff_man(7)</code>, <code>groff_ms(7)</code>, <code>groff_me(7)</code>,
<code>groff_mm(7)</code>, and <samp>info groff</samp>.
</p>

<p>
A good tutorial on <code>-me</code> macros exists.  If you have
<code>groff</code> (1.18 or newer), find
<code>file:///usr/share/doc/groff/meintro.me.gz</code> and do the following:
</p>

<pre>
     $ zcat file:///usr/share/doc/groff/meintro.me.gz | \
          groff -Tascii -me - | less -R
</pre>

<p>
The following will make a completely plain text file:
</p>

<pre>
     $ zcat file:///usr/share/doc/groff/meintro.me.gz | \
         GROFF_NO_SGR=1 groff -Tascii -me - | col -b -x &gt; <var>meintro.txt</var>
</pre>

<p>
For printing, use PostScript output.
</p>

<pre>
     $ groff -Tps <var>meintro.txt</var> | lpr
     $ groff -Tps <var>meintro.txt</var> | mpage -2 | lpr
</pre>

<hr>

<h3><a name="s-sgml"></a>13.9.2 SGML</h3>

<p>
Preparation:
</p>

<pre>
     # apt-get install debiandoc-sgml debiandoc-sgml-doc
</pre>

<p>
References for <code>debiandoc-sgml</code>:
</p>
<ul>
<li>
<p>
<code>file:///usr/share/doc/debiandoc-sgml-doc</code>
</p>
</li>
<li>
<p>
<code>debiandoc-sgml(1)</code>
</p>
</li>
<li>
<p>
<em><code><a
href="file:///usr/share/doc/docbook-defguide/html/docbook.html">DocBook: The
Definitive Guide</a></code></em>, by Walsh and Muellner, (O'Reilly) (package
<code>docbook-defguide</code>)
</p>
</li>
</ul>

<p>
SGML enables management of multiple formats of a document.  One easy SGML
system is Debiandoc, which is used here.  This requires minor conversion from
original text files for the following characters:
</p>
<ul>
<li>
<p>
&quot;&lt;&quot; --&gt; <samp>&amp;lt;</samp>
</p>
</li>
<li>
<p>
&quot;&gt;&quot; --&gt; <samp>&amp;gt;</samp>
</p>
</li>
<li>
<p>
&quot;&nbsp;&quot; --&gt; <samp>&amp;nbsp;</samp> (nonbreakable space)
</p>
</li>
<li>
<p>
&quot;&amp;&quot; --&gt; <samp>&amp;amp;</samp>
</p>
</li>
<li>
<p>
&quot;%&quot; --&gt; <samp>&amp;percnt;</samp>
</p>
</li>
<li>
<p>
&quot;&copy;&quot; --&gt; <samp>&amp;copy;</samp>
</p>
</li>
<li>
<p>
&quot;&ndash;&quot; --&gt; <samp>&amp;ndash;</samp>
</p>
</li>
<li>
<p>
&quot;&mdash;&quot; --&gt; <samp>&amp;mdash;</samp>
</p>
</li>
</ul>

<p>
To mark a section as a nonprintable comment, enter:
</p>

<pre>
     &lt;!-- State issue here ... --&gt;
</pre>

<p>
To mark a section with a switchable comment, enter:
</p>

<pre>
     &lt;![ %FIXME; [ State issue here ... ]]&gt;
</pre>

<p>
In SGML, the <em>first definition</em> of an entity wins.  For example:
</p>

<pre>
     &lt;!entity % qref &quot;INCLUDE&quot;&gt;
     &lt;![ %qref; [ &lt;!entity param &quot;Data 1&quot;&gt; ]]&gt;
     &lt;!entity param &quot;Data 2&quot;&gt;
     &amp;param;
</pre>

<p>
This ends up as &quot;Data 1&quot;.  If the first line has &quot;IGNORE&quot;
instead of &quot;INCLUDE&quot;, this ends up as &quot;Data 2&quot; (the second
line is a conditional statement).  Also, repeating phrases can be defined in
advance separately from the context.
</p>

<pre>
     &lt;!entity <var>whoisthis</var> &quot;my&quot;&gt;
     Hello &amp;<var>whoisthis</var>; friend.
     This is &amp;<var>whoisthis</var>; book.
</pre>

<p>
This results in the following:
</p>

<pre>
     Hello my friend.
     This is my book.
</pre>

<p>
See the short SGML example <code>sample.sgml</code> in the <code><a
href="examples/">examples</a></code>.
</p>

<p>
When SGML documents become bigger, sometimes TeX which is used as the backend
text processor may cause errors.  See <a href="#s-texlatex">TeX/LaTeX, Section
13.9.3</a>.
</p>

<hr>

<h3><a name="s-texlatex"></a>13.9.3 TeX/LaTeX</h3>

<p>
Preparation:
</p>

<pre>
     # tasksel # select Miscellaneous  --&gt; TeX/LaTeX environment
</pre>

<p>
References for LaTeX:
</p>
<ul>
<li>
<p>
<code><a href="http://www.tldp.org/HOWTO/TeTeX-HOWTO.html">The teTeX HOWTO: The
Linux-teTeX Local Guide</a></code>
</p>
</li>
<li>
<p>
<code>tex(1)</code>
</p>
</li>
<li>
<p>
<code>latex(1)</code>
</p>
</li>
<li>
<p>
<em>The TeXbook</em>, by Donald E.  Knuth, (Addison-Wesley) [<a
href="footnotes.en.html#f65" name="fr65">65</a>]
</p>
</li>
<li>
<p>
<em>LaTeX - A Document Preparation System</em>, by Leslie Lamport,
(Addison-Wesley)
</p>
</li>
<li>
<p>
<em>The LaTeX Companion</em>, by Goossens, Mittelbach, Samarin,
(Addison-Wesley)
</p>
</li>
</ul>

<p>
This is the most powerful typesetting environment.  Many SGML processors use
this as their back end text processor.  Lyx provided by <code>lyx</code>,
<code>lyx-xforms</code>, or <code>lyx-qt</code> and GNU TeXmacs provided by
<code>texmacs</code> package offers nice WYSIWYG editing environment for LaTeX
while many use Emacs and Vim as the choice for the source editor.
</p>

<p>
There are many online resources available:
</p>
<ul>
<li>
<p>
<code><a href="file:///usr/share/doc/texmf/newhelpindex.html">teTeX - A
Documentation Guide</a></code> (<code>tetex-doc</code> package)
</p>
</li>
<li>
<p>
<code><a href="http://www.msu.edu/user/pfaffben/writings/">A Quick Introduction
to LaTeX</a></code>
</p>
</li>
<li>
<p>
<code><a href="http://www.stat.rice.edu/~helpdesk/howto/lyxguide.html">A Simple
Guide to Latex/Lyx</a></code>
</p>
</li>
<li>
<p>
<code><a
href="http://www-h.eng.cam.ac.uk/help/tpl/textprocessing/latex_basic/latex_basic.html">Word
Processing Using LaTeX</a></code>
</p>
</li>
<li>
<p>
<code><a
href="http://supportweb.cs.bham.ac.uk/documentation/LaTeX/lguide/local-guide/local-guide.html">Local
User Guide to teTeX/LaTeX</a></code>
</p>
</li>
</ul>

<p>
When documents become bigger, sometimes TeX may cause errors.  You must
increase pool size in <code>/etc/texmf/texmf.cnf</code> (or more appropriately
edit <code>/etc/texmf/texmf.d/95NonPath</code> and run
<code>update-texmf</code>) to fix this.
</p>

<hr>

<h3><a name="s-literate"></a>13.9.4 Literate Programming</h3>

<p>
Instead of writing code containing documentation, the literate programmer
writes documentation containing code.  This approach ensures a good
documentation for a program.
</p>

<p>
For more on literate-programming, see <code><a
href="http://www.literateprogramming.com/">Literate Programming</a></code>.
</p>

<hr>

<h4><a name="s-noweb"></a>13.9.4.1 Noweb</h4>

<p>
Preparation:
</p>

<pre>
     # apt-get install nowebm
</pre>

<p>
References for Noweb:
</p>
<ul>
<li>
<p>
<code><a href="http://www.eecs.harvard.edu/~nr/noweb/">Noweb --- A Simple,
Extensible Tool for Literate Programming</a></code>
</p>
</li>
<li>
<p>
<code>noweb(1)</code>
</p>
</li>
</ul>

<p>
This is a WEB-like literate-programming tool which is simpler while providing
extensibility and language-independence.  [<a href="footnotes.en.html#f66"
name="fr66">66</a>] When <code>noweb</code> is invoked, it writes the program
source code to the output files mentioned in the noweb file, and it writes a
TeX file for typeset documentation.
</p>

<p>
The Debian <code>ifupdown</code> package is a fine example.
</p>

<pre>
     $ apt-get source ifupdown
     $ cd ifupdown*
     $ make ifupdown.pdf ifupdown.ps
</pre>

<hr>

<h4><a name="s-doxygen"></a>13.9.4.2 Doxygen</h4>

<p>
Preparation:
</p>

<pre>
     # apt-get install doxygen doxygen-doc doxygen-gui
</pre>

<p>
References for Doxygen (created by <code>doxygen</code>!):
</p>
<ul>
<li>
<p>
<code><a href="http://www.doxygen.org/">Homepage</a></code>
</p>
</li>
<li>
<p>
<code><a
href="/usr/share/doc/doxygen-doc/html/index.html">/usr/share/doc/doxygen-doc/html/index.html</a></code>
</p>
</li>
</ul>

<p>
It can generate HTML, RTF, Unix manual pages, PostScript, and PDF (using LaTeX)
documentation for C++, C, Java, IDL, and to some extent PHP and C# programs.
Doxygen is compatible to JavaDoc (1.1), Qt-Doc, KDOC and was specifically
designed to be used for projects that make use of Troll Tech's <code><a
href="http://www.trolltech.no/qt/">Qt</a></code> toolkit.  It creates include
dependency graphs, collaboration diagrams, and graphical class hierarchy graphs
even for not documented programs.  The output is similar to Qt's documentation.
</p>

<hr>

<h2><a name="s-packaging"></a>13.10 Packaging</h2>

<p>
Preparation:
</p>

<pre>
     # apt-get install debian-policy developers-reference \
                       maint-guide dh-make debhelper
     # apt-get install packaging-manual # if Potato
</pre>

<p>
References for packaging:
</p>
<ul>
<li>
<p>
<a href="ch-system.en.html#s-pkg-basics">The Debian package management system,
Section 2.2</a> (basics)
</p>
</li>
<li>
<p>
Debian New Maintainers' Guide (tutorial)
</p>
</li>
<li>
<p>
<code>dh-make(1)</code>
</p>
</li>
<li>
<p>
Debian Developer's Reference (best practice)
</p>
</li>
<li>
<p>
Debian Policy Manual (authoritative)
</p>
</li>
<li>
<p>
Packaging Manual (Potato)
</p>
</li>
</ul>

<hr>

<h3><a name="s-pack-binary"></a>13.10.1 Packaging a single binary</h3>

<p>
Quick-and-dirty method to Package a single binary per Joey Hess.
</p>

<pre>
     # mkdir -p mypkg/usr/bin mypkg/DEBIAN
     # cp binary mypkg/usr/bin
     # cat &gt; mypkg/DEBIAN/control
     Package: mypackage
     Version: 1
     Architecture: i386
     Maintainer: Joey Hess &lt;joeyh@debian.org&gt;
     Description: my little package
      Don't expect much.
     ^D
     # dpkg-deb -b mypkg
</pre>

<hr>

<h3><a name="s-pack-dh-make"></a>13.10.2 Packaging with tools</h3>

<p>
Use <code>dh_make</code> from the <code>dh-make</code> package to create a
baseline package.  Then, proceed according to instructions in
<code>dh-make(1)</code>.  This uses <code>debhelper</code> in
<code>debian/rules</code>.
</p>

<p>
An older approach is to use <code>deb-make</code> from the <code>debmake</code>
package.  This uses no <code>debhelper</code> scripts and depends only on the
shell.  Do not use this any more.
</p>

<p>
For examples of multiple-source packages, see &quot;mc&quot; (<samp>dpkg-source
-x mc_4.5.54.dsc</samp>), which uses &quot;sys-build.mk&quot; by Adam Heath
(<code><a href="mailto:doogie@debian.org">doogie@debian.org</a></code>), and
&quot;glibc&quot; (<samp>dpkg-source -x glibc_2.2.4-1.dsc</samp>), which uses
another system by the late Joel Klecker (<code><a
href="mailto:espy@debian.org">espy@debian.org</a></code>).
</p>

<hr>

<p>
[ <a href="ch-vcs.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ <a href="ch-system.en.html">2</a> ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ <a href="ch-tune.en.html">9</a> ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ 13 ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-gnupg.en.html">next</a> ]
</p>

<hr>

<p>
Debian Reference
</p>

<address>
CVS, Mon Jun 16 21:20:26 UTC 2008<br>
<br>
Osamu Aoki <code><a href="mailto:osamu#at#debian.org">osamu#at#debian.org</a></code><br>
<a href="ap-appendix.en.html#s-authors">Authors, Section A.1</a><br>
<br>
</address>
<hr>

</body>

</html>

