<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"xml:lang="en-US"><head><title>Corrections to Chapter 6 of Java Network Programming, The InetAddress Class</title></head><body><h1>Corrections to Chapter 6 of Java Network Programming, The InetAddress Class</h1><p>p. 162: The caption for Example 6-7, should be "Determining whether an IP address is v4 or v6".</p><p>p. 164: In the fifth paragraph change "Organization multicast addresses begin with FF05 or FF15"to "Site-wide multicast addresses begin with FF05 or FF15".</p><p>p. 165: In the caption for Example 6-8, change "(Java 1.4 only)" to "(Java 1.4 and later)"</p><p>p. 180: There are three errors in Example 6-13. First, change <code>new BufferedReader</code> to <code>new SafeBufferedReader</code>. Then in the ,code>main()</code> method, change <code>e.printStackTrace()</code> to <code>ex.printStackTrace()</code>. Finally, several lines from the <code>processLogFile()</code> method were omitted. The complete, corrected program is:</p><pre><code>import java.io.*;import java.util.*;import com.macfaq.io.SafeBufferedReader;public class PooledWeblog {  private BufferedReader in;  private BufferedWriter out;  private int numberOfThreads;  private List entries = Collections.synchronizedList(new LinkedList());  private boolean finished = false;  private int test = 0;  public PooledWeblog(InputStream in, OutputStream out, int numberOfThreads) {    this.in = new SafeBufferedReader(new InputStreamReader(in));    this.out = new BufferedWriter(new OutputStreamWriter(out));    this.numberOfThreads = numberOfThreads;  }    public boolean isFinished() {    return this.finished;   }    public int getNumberOfThreads() {    return numberOfThreads;   }    public void processLogFile() {      for (int i = 0; i < numberOfThreads; i++) {      Thread t = new LookupThread(entries, this);      t.start();    }        try {      String entry = in.readLine();      while (entry != null) {                if (entries.size() > numberOfThreads) {          try {            Thread.sleep((long) (1000.0/numberOfThreads));          }          catch (InterruptedException e) {}          continue;        }        synchronized (entries) {          entries.add(0, entry);          entries.notifyAll();         }                entry = in.readLine();        Thread.yield();              } // end while          }    catch (IOException e) {      System.out.println("Exception: " + e);    }        this.finished = true;        // finish any threads that are still waiting    synchronized (entries) {      entries.notifyAll();     }  }    public void log(String entry) throws IOException {    out.write(entry + System.getProperty("line.separator", "\r\n"));    out.flush();  }    public static void main(String[] args) {    try {      PooledWeblog tw = new PooledWeblog(new FileInputStream(args[0]),        System.out, 100);      tw.processLogFile();    }    catch (FileNotFoundException e) {      System.err.println("Usage: java PooledWeblog logfile_name");    }    catch (ArrayIndexOutOfBoundsException e) {      System.err.println("Usage: java PooledWeblog logfile_name");    }    catch (Exception ex) {      System.err.println(ex);      ex.printStackTrace();    }  }  // end main}</code></pre><div align="center">[ <a href="index.html">Java Network Programming Corrections</a> | <a href="../index.html">Java Network Programming Home Page</a> | <a href="../index.html#toc">Table of Contents</a> | <a href="../examples/">Examples</a> | <a href="http://www.amazon.com/exec/obidos/ISBN%3D0596007213/ref%3Dnosim/cafeaulaitA/">Order from Amazon</a> ]]</div><hr>Copyright 2004, 2005 <a href="http://www.elharo.com/">Elliotte Rusty Harold</a><br><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;elharo%40metalab%2Eunc%2Eedu">elharo&#64;metalab&#46;unc&#46;edu</a><br>Last Modified July 31, 2005</body></html>