<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>製作安裝片</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="HOME" title="FreeBSD 使用手冊" href="index.html" />
<link rel="UP" title="安裝 FreeBSD" href="install.html" />
<link rel="PREVIOUS" title="進階安裝指南" href="install-advanced.html" />
<link rel="NEXT" title="UNIX 基礎概念" href="basics.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD 使用手冊</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="install-advanced.html"
accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom">Chapter 2 安裝 FreeBSD</td>
<td width="10%" align="right" valign="bottom"><a href="basics.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="SECT1">
<h1 class="SECT1"><a id="INSTALL-DIFF-MEDIA" name="INSTALL-DIFF-MEDIA">2.13
製作安裝片</a></h1>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 為避免重覆說明，在文中所提到的「FreeBSD 光碟」，
在這裡指的是您所購買或自行燒錄的 FreeBSD CDROM 或 DVD。</p>
</blockquote>
</div>

<p>There may be some situations in which you need to create your own FreeBSD installation
media and/or source. This might be physical media, such as a tape, or a source that <b
class="APPLICATION">sysinstall</b> can use to retrieve the files, such as a local FTP
site, or an <span class="TRADEMARK">MS-DOS</span>&reg; partition.</p>

<p>For example:</p>

<ul>
<li>
<p>You have many machines connected to your local network, and one FreeBSD disc. You want
to create a local FTP site using the contents of the FreeBSD disc, and then have your
machines use this local FTP site instead of needing to connect to the Internet.</p>
</li>

<li>
<p>You have a FreeBSD disc, and FreeBSD does not recognize your CD/DVD drive, but <span
class="TRADEMARK">MS-DOS</span>/<span class="TRADEMARK">Windows</span>&reg; does. You
want to copy the FreeBSD installation files to a DOS partition on the same computer, and
then install FreeBSD using those files.</p>
</li>

<li>
<p>The computer you want to install on does not have a CD/DVD drive or a network card,
but you can connect a “Laplink-style” serial or parallel cable to a computer that
does.</p>
</li>

<li>
<p>You want to create a tape that can be used to install FreeBSD.</p>
</li>
</ul>

<div class="SECT2">
<h2 class="SECT2"><a id="INSTALL-CDROM" name="INSTALL-CDROM">2.13.1 Creating an
Installation CDROM</a></h2>

<p>As part of each release, the FreeBSD project makes available at least two CDROM images
(“ISO images”) per supported architecture. These images can be written (“burned”) to
CDs if you have a CD writer, and then used to install FreeBSD. If you have a CD writer,
and bandwidth is cheap, then this is the easiest way to install FreeBSD.</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p><b>Download the Correct ISO Images</b></p>

<p>The ISO images for each release can be downloaded from <tt
class="FILENAME">ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-<tt
class="REPLACEABLE"><i>arch</i></tt>/<tt class="REPLACEABLE"><i>version</i></tt></tt> or
the closest mirror. Substitute <tt class="REPLACEABLE"><i>arch</i></tt> and <tt
class="REPLACEABLE"><i>version</i></tt> as appropriate.</p>

<p>That directory will normally contain the following images:</p>

<div class="TABLE"><a id="AEN3126" name="AEN3126"></a>
<p><b>Table 2-4. FreeBSD 5.<tt class="REPLACEABLE"><i>X</i></tt> and 6.<tt
class="REPLACEABLE"><i>X</i></tt> ISO Image Names and Meanings</b></p>

<table border="0" frame="void" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>檔名</th>
<th>內容</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="FILENAME"><tt class="REPLACEABLE"><i>版本</i></tt>-RELEASE-<tt
class="REPLACEABLE"><i>架構</i></tt>-bootonly.iso</tt></td>
<td>Everything you need to boot into a FreeBSD kernel and start the installation
interface. The installable files have to be pulled over FTP or some other supported
source.</td>
</tr>

<tr>
<td><tt class="FILENAME"><tt class="REPLACEABLE"><i>版本</i></tt>-RELEASE-<tt
class="REPLACEABLE"><i>架構</i></tt>-disc1.iso</tt></td>
<td>Everything you need to install FreeBSD and a “live filesystem”, which is used in
conjunction with the “Repair” facility in <b class="APPLICATION">sysinstall</b>.</td>
</tr>

<tr>
<td><tt class="FILENAME"><tt class="REPLACEABLE"><i>版本</i></tt>-RELEASE-<tt
class="REPLACEABLE"><i>架構</i></tt>-disc2.iso</tt></td>
<td>FreeBSD 文件(FreeBSD 6.2 之前的)，以及許多 third-party packages。</td>
</tr>

<tr>
<td><tt class="FILENAME"><tt class="REPLACEABLE"><i>版本</i></tt>-RELEASE-<tt
class="REPLACEABLE"><i>架構</i></tt>-docs.iso</tt></td>
<td>FreeBSD 文件(FreeBSD 6.2 及之後)。</td>
</tr>
</tbody>
</table>
</div>

<p>You <span class="emphasis"><b class="EMPHASIS">must</b></span> download one of either
the bootonly ISO image (if available), or the image of disc one. Do not download both of
them, since the disc one image contains everything that the bootonly ISO image
contains.</p>

<p>Use the bootonly ISO if Internet access is cheap for you. It will let you install
FreeBSD, and you can then install third-party packages by downloading them using the
ports/packages system (see <a href="ports.html">Chapter 4</a>) as necessary.</p>

<p>Use the image of disc one if you want to install a FreeBSD release and want a
reasonable selection of third-party packages on the disc as well.</p>

<p>The additional disc images are useful, but not essential, especially if you have
high-speed access to the Internet.</p>
</li>

<li class="STEP">
<p><b>Write the CDs</b></p>

<p>You must then write the CD images to disc. If you will be doing this on another
FreeBSD system then see <a href="creating-cds.html">Section 18.6</a> for more information
(in particular, <a href="creating-cds.html#BURNCD">Section 18.6.3</a> and <a
href="creating-cds.html#CDRECORD">Section 18.6.4</a>).</p>

<p>If you will be doing this on another platform then you will need to use whatever
utilities exist to control your CD writer on that platform. The images provided are in
the standard ISO format, which many CD writing applications support.</p>
</li>
</ol>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> If you are interested in building a customized release of FreeBSD, please
see the <a href="../../../../doc/zh_TW.Big5/articles/releng" target="_top">Release
Engineering Article</a>.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="INSTALL-FTP" name="INSTALL-FTP">2.13.2 Creating a Local FTP Site
with a FreeBSD Disc</a></h2>

<p>FreeBSD discs are laid out in the same way as the FTP site. This makes it very easy
for you to create a local FTP site that can be used by other machines on your network
when installing FreeBSD.</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>On the FreeBSD computer that will host the FTP site, ensure that the CDROM is in the
drive, and mounted on <tt class="FILENAME">/cdrom</tt>.</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /cdrom</kbd>
</pre>
</li>

<li class="STEP">
<p>Create an account for anonymous FTP in <tt class="FILENAME">/etc/passwd</tt>. Do this
by editing <tt class="FILENAME">/etc/passwd</tt> using <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">vipw</span>(8)</span></a> and adding
this line:</p>

<pre class="PROGRAMLISTING">
ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent
</pre>
</li>

<li class="STEP">
<p>Ensure that the FTP service is enabled in <tt
class="FILENAME">/etc/inetd.conf</tt>.</p>
</li>
</ol>
</div>

<p>Anyone with network connectivity to your machine can now chose a media type of FTP and
type in <kbd class="USERINPUT">ftp://<tt class="REPLACEABLE"><i>your
machine</i></tt></kbd> after picking “Other” in the FTP sites menu during the
install.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> If the boot media (floppy disks, usually) for your FTP clients is not
precisely the same version as that provided by the local FTP site, then <b
class="APPLICATION">sysinstall</b> will not let you complete the installation. If the
versions are not similar and you want to override this, you must go into the <span
class="GUIMENU">Options</span> menu and change distribution name to <span
class="GUIMENUITEM">any</span>.</p>
</blockquote>
</div>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> This approach is OK for a machine that is on your local network, and
that is protected by your firewall. Offering up FTP services to other machines over the
Internet (and not your local network) exposes your computer to the attention of crackers
and other undesirables. We strongly recommend that you follow good security practices if
you do this.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="AEN3215" name="AEN3215">2.13.3 建立安裝用的磁片</a></h2>

<p>若您必須從磁片安裝(雖然我們<span class="emphasis"><b
class="EMPHASIS">不</b></span>建議這樣做)，
不論是因為硬體不支援或是您堅持要用這麼刻苦的方式， 您都必須先準備一些磁片以供安裝。</p>

<p>磁片至少得是 1.44&nbsp;MB At a minimum, you will need as many 1.44&nbsp;MB floppies as
it takes to hold all the files in the <tt class="FILENAME">base</tt> (base distribution)
directory. If you are preparing the floppies from DOS, then they <span
class="emphasis"><b class="EMPHASIS">must</b></span> be formatted using the <span
class="TRADEMARK">MS-DOS</span> <tt class="COMMAND">FORMAT</tt> command. If you are using
<span class="TRADEMARK">Windows</span>, use Explorer to format the disks (right-click on
the <tt class="DEVICENAME">A:</tt> drive, and select “Format”).</p>

<p>Do <span class="emphasis"><b class="EMPHASIS">not</b></span> trust factory
pre-formatted floppies. Format them again yourself, just to be sure. Many problems
reported by our users in the past have resulted from the use of improperly formatted
media, which is why we are making a point of it now.</p>

<p>If you are creating the floppies on another FreeBSD machine, a format is still not a
bad idea, though you do not need to put a DOS filesystem on each floppy. You can use the
<tt class="COMMAND">disklabel</tt> and <tt class="COMMAND">newfs</tt> commands to put a
UFS filesystem on them instead, as the following sequence of commands (for a 3.5"
1.44&nbsp;MB floppy) illustrates:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fdformat -f 1440 fd0.1440</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">bsdlabel -w fd0.1440 floppy3</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</kbd>
</pre>

<p>Then you can mount and write to them like any other filesystem.</p>

<p>After you have formatted the floppies, you will need to copy the files to them. The
distribution files are split into chunks conveniently sized so that five of them will fit
on a conventional 1.44&nbsp;MB floppy. Go through all your floppies, packing as many
files as will fit on each one, until you have all of the distributions you want packed up
in this fashion. Each distribution should go into a subdirectory on the floppy, e.g.: <tt
class="FILENAME">a:\base\base.aa</tt>, <tt class="FILENAME">a:\base\base.ab</tt>, and so
on.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> The <tt class="FILENAME">base.inf</tt> file also needs to go on the
first floppy of the <tt class="FILENAME">base</tt> set since it is read by the
installation program in order to figure out how many additional pieces to look for when
fetching and concatenating the distribution.</p>
</blockquote>
</div>

<p>Once you come to the Media screen during the install process, select <span
class="GUIMENUITEM">Floppy</span> and you will be prompted for the rest.</p>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="INSTALL-MSDOS" name="INSTALL-MSDOS">2.13.4 從 <span
class="TRADEMARK">MS-DOS</span>&reg; 分割區安裝</a></h2>

<p>若準備要從 <span class="TRADEMARK">MS-DOS</span> 分割區進行安裝，
請把所有安裝檔都複製到該分割區根目錄內的 <tt class="FILENAME">freebsd</tt> 目錄。
比如：<tt class="FILENAME">c:\freebsd</tt>。 此目錄結構必須與光碟或 FTP
內的目錄結構一致， 因此若是要從光碟複製檔案，建議使用 DOS 的 <tt
class="COMMAND">xcopy</tt> 指令。 例如，要複製 FreeBSD 最小安裝所需的檔案：</p>

<pre class="SCREEN">
<samp class="PROMPT">C:\&gt;</samp> <kbd class="USERINPUT">md c:\freebsd</kbd>
<samp class="PROMPT">C:\&gt;</samp> <kbd
class="USERINPUT">xcopy e:\bin c:\freebsd\bin\ /s</kbd>
<samp class="PROMPT">C:\&gt;</samp> <kbd
class="USERINPUT">xcopy e:\manpages c:\freebsd\manpages\ /s</kbd>
</pre>

<p>假設 <tt class="DEVICENAME">C:</tt> 槽有多餘空間，可以放 FreeBSD 安裝檔；<tt
class="DEVICENAME">E:</tt>則是光碟機代號。</p>

<p>若沒有光碟機，可以到 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/7.0-RELEASE/"
target="_top">ftp.FreeBSD.org</a> 去下載安裝檔。 每個安裝套件都有其相對應的目錄；比如
<span class="emphasis"><b class="EMPHASIS">base</b></span> 是放在 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/7.0-RELEASE/base/"
target="_top">7.0/base/</a> 目錄內。</p>

<p>請將您要安裝的套件(當然空間要夠)放到 <span class="TRADEMARK">MS-DOS</span> 分割區的
<tt class="FILENAME">c:\freebsd</tt> 裡 —— 因為這個 <tt class="LITERAL">BIN</tt>
安裝套件僅供最精簡安裝而已。</p>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="AEN3281" name="AEN3281">2.13.5 製作安裝用的磁帶</a></h2>

<p>從磁帶上安裝也許是最簡單的方式，比用 FTP 或光碟安裝還快。
安裝程式假設所有檔案都會壓縮放在磁帶上。 在取得所有要裝的安裝檔之後
，可以用下列指令把它們壓縮放在磁帶上：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /freebsd/distdir</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">tar cvf /dev/rwt0 dist1 ... dist2</kbd>
</pre>

<p>當要安裝時，必須先確認磁帶還有足夠空間，
以便讓安裝過程暫存空間(可以自行選擇要放在哪個目錄)， 可以容納磁帶安裝時的<span
class="emphasis"><b class="EMPHASIS">全部</b></span>檔案。
由於磁帶本身並不能隨機存取，因此用磁帶安裝會需要很大的暫存空間。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 在使用安裝磁片開機<span class="emphasis"><b
class="EMPHASIS">之前</b></span>，
磁帶一定要先放入磁帶機內，否則在偵測硬體時可能會無法偵測到磁帶機。</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="AEN3297" name="AEN3297">2.13.6 Before Installing over a
Network</a></h2>

<p>有三種網路安裝方式： Ethernet (標準 Ethernet 晶片)、Serial port(SLIP 或 PPP)、
Parallel port (PLIP (laplink cable))。</p>

<p>透過網路安裝的最快方式，就是使用 Ethernet 網路卡！ FreeBSD 支援大多數常見的 Ethernet
網路卡； 所有支援的網路卡(及其所需的設定)都有在各版本的 FreeBSD 內的 Hardware Note
說明文件內列出。 若您所用的是有支援的 PCMCIA 網路卡， 請務必在開機<span
class="emphasis"><b class="EMPHASIS">之前</b></span>，先把該網路卡插上。 因為 FreeBSD
的安裝過程，目前並不支援 PCMCIA 卡的熱插拔。</p>

<p>此外，還需要知道該用的 IP 位址以及相對應的 netmask 為何， 以及機器名稱。 若所用的是
PPP 連線，而且沒有固定 IP，別擔心， 因為您的 ISP 會自動分配 IP 給您。
關於這些網路的細部設定， 可以洽詢您網路環境的系統管理者。
若要能以機器名稱就能連到相對應的機器，而非直接使用 IP位址去連， 那麼您還需要 DNS 以及
gateway 的位址(若用的是 PPP 連線， gateway 位址就是 ISP 所分配給你的 IP 位址)。 若想透過
HTTP proxy 來使用 FTP 安裝，那麼必須知道 proxy 的網址為何。
若您對上述所需資訊不甚了解，那麼請在安裝<span class="emphasis"><b
class="EMPHASIS">之前</b></span>， 先詢問系統管理者或 ISP。</p>

<p>SLIP 的支援相當原始，並且主要受限於電腦之間的實體線路(hard-wired)
，比如筆記型電腦與其他電腦之間的 serial 線。 之所以得以電腦間以直接線路連結，乃是由於
SLIP 安裝目前並不支援撥接功能。 PPP 才有提供撥接功能， 所以請儘可能優先採用 PPP 而非
SLIP。</p>

<p>若要透過數據機(modem)來安裝，那 PPP 幾乎是您唯一選擇。 請先準備好 ISP
所提供的相關資料，因為在安裝之初就會用到。</p>

<p>若使用 PAP 或 CHAP 來連到 ISP(換句話說，若在 <span class="TRADEMARK">Windows</span>
可以不透過 script 就可以連線到 ISP)，那麼您僅需在 <b class="APPLICATION">ppp</b>
提示符號下輸入 <tt class="COMMAND">dial</tt> 指令即可撥號。
否則，您必須知道如何以該數據機所採用的 “AT 指令集”來連到 ISP，因為 PPP
撥號程式僅提供非常陽春的 終端模擬器(terminal emulator)而起。 請參閱 Handbook 中 <a
href="userppp.html">user-ppp</a> 章節以及 <a
href="../../../../doc/zh_TW.Big5/books/faq/ppp.html" target="_top">FAQ</a> 中的相關項目。
若有操作上的疑問，可以打 <tt class="COMMAND">set log local ...</tt>
指令，以便在螢幕上顯示相關記錄。</p>

<p>若可直接以 hard-wired 方式連到另外的 FreeBSD(2.0-R 及之後) 機器， 那麼可以考慮透過
“laplink” 平行電纜來安裝。 平行埠的傳輸速率比序列埠高很多(最高可達每秒
50&nbsp;kbytes/sec)， 所以安裝速度會更快一些。</p>

<div class="SECT3">
<h3 class="SECT3"><a id="AEN3328" name="AEN3328">2.13.6.1 Before Installing via
NFS</a></h3>

<p>NFS 安裝方式相當簡便，只需將 FreeBSD 安裝檔案都放到某台 NFS server
上，然後再指定使用這台 NFS 作為安裝來源即可。</p>

<p>若該 server 只允許 “privileged port”(通常這是 Sun
工作站的預設值)，那麼在安裝之前，必須先到 <span class="GUIMENU">Options</span> 選單去指定
<tt class="LITERAL">NFS Secure</tt> 設定值。</p>

<p>若網路卡的連線品質不佳，那可能需要調整一下 <tt class="LITERAL">NFS Slow</tt>
設定。</p>

<p>為了讓 NFS 安裝能順利完成，NFS 主機必須要可以支援子目錄的掛載
(mount)，例如：FreeBSD&nbsp;7.0 安裝目錄是在： <tt
class="FILENAME">ziggy:/usr/archive/stuff/FreeBSD</tt>，那麼 <tt
class="HOSTID">ziggy</tt> 必須允許直接掛載在 <tt
class="FILENAME">/usr/archive/stuff/FreeBSD</tt>，而非僅 <tt class="FILENAME">/usr</tt>
或是 <tt class="FILENAME">/usr/archive/stuff</tt>。</p>

<p>在 FreeBSD 的 <tt class="FILENAME">/etc/exports</tt> 檔，上述功能是由 <code
class="OPTION">-alldirs</code> 選項所設定。 其他的 NFS server 可能會有不同的設定方式。
若看到 “<tt class="ERRORNAME">permission denied</tt>” 錯誤訊息，
則表示可能由於沒有啟用這選項所造成的。</p>
</div>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="install-advanced.html"
accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="basics.html"
accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">進階安裝指南</td>
<td width="34%" align="center" valign="top"><a href="install.html"
accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">UNIX 基礎概念</td>
</tr>
</table>
</div>

<p align="center"><small>本文及其他文件，可由此下載：<a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p>

<p align="center"><small>若有 FreeBSD 方面疑問，請先閱讀 <a
href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。<br />
關於本文件的問題，請洽詢 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

