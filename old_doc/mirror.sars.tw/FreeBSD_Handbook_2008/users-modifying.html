<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>更改帳號</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="HOME" title="FreeBSD 使用手冊" href="index.html" />
<link rel="UP" title="使用者與基本帳號管理" href="users.html" />
<link rel="PREVIOUS" title="使用者帳號" href="users-user.html" />
<link rel="NEXT" title="使用者資源限制" href="users-limiting.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD 使用手冊</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="users-user.html"
accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom">Chapter 13 使用者與基本帳號管理</td>
<td width="10%" align="right" valign="bottom"><a href="users-limiting.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="SECT1">
<h1 class="SECT1"><a id="USERS-MODIFYING" name="USERS-MODIFYING">13.6 更改帳號</a></h1>

<p>在 <span class="TRADEMARK">UNIX</span>&reg;
的環境之中提供了各式不同的指令管理使用者帳號，
以下為較常使用的指令摘要及更詳細的使用範例。</p>

<div class="INFORMALTABLE"><a id="AEN17697" name="AEN17697"></a>
<table border="0" frame="void" width="100%" class="CALSTABLE">
<col width="33%" />
<col width="67%" />
<thead>
<tr>
<th>指令</th>
<th>摘要</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">adduser</span>(8)</span></a></td>
<td>新增使用者。</td>
</tr>

<tr>
<td><a href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a></td>
<td>移除使用者。</td>
</tr>

<tr>
<td><a href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a></td>
<td>更改使用者資料。</td>
</tr>

<tr>
<td><a href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">passwd</span>(1)</span></a></td>
<td>更改使用者密碼。</td>
</tr>

<tr>
<td><a href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a></td>
<td>修改使用者的各種資料。</td>
</tr>
</tbody>
</table>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="USERS-ADDUSER" name="USERS-ADDUSER">13.6.1 <tt
class="COMMAND">adduser</tt></a></h2>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">adduser</span>(8)</span></a>
是一支新增使用者的簡單程式。 它會建立資料於系統的 <tt class="FILENAME">passwd</tt> 與 <tt
class="FILENAME">group</tt> 檔案之中。 同時也會建立使用者的家目錄，從 <tt
class="FILENAME">/usr/share/skel</tt> 複製預設的組態檔(“dotfiles”)，
並可以選擇性的郵件通知新使用者歡迎訊息。</p>

<div class="EXAMPLE"><a id="AEN17758" name="AEN17758"></a>
<p><b>Example 13-1. 在 FreeBSD 內新增使用者</b></p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">adduser</kbd>
Username: <kbd class="USERINPUT">jru</kbd>
Full name: <kbd class="USERINPUT">J. Random User</kbd>
Uid (Leave empty for default):
Login group [jru]:
Login group is jru. Invite jru into other groups? []: <kbd class="USERINPUT">wheel</kbd>
Login class [default]:
Shell (sh csh tcsh zsh nologin) [sh]: <kbd class="USERINPUT">zsh</kbd>
Home directory [/home/jru]:
Use password-based authentication? [yes]:
Use an empty password? (yes/no) [no]:
Use a random password? (yes/no) [no]:
Enter password:
Enter password again:
Lock out the account after creation? [no]:
Username   : jru
Password   : ****
Full Name  : J. Random User
Uid        : 1001
Class      :
Groups     : jru wheel
Home       : /home/jru
Shell      : /usr/local/bin/zsh
Locked     : no
OK? (yes/no): <kbd class="USERINPUT">yes</kbd>
adduser: INFO: Successfully added (jru) to the user database.
Add another user? (yes/no): <kbd class="USERINPUT">no</kbd>
Goodbye!
<samp class="PROMPT">#</samp>
</pre>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 您輸入的密碼並不會回應到螢幕，所以不會以星號顯示 。
請確定您所輸入的密碼無誤。</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="USERS-RMUSER" name="USERS-RMUSER">13.6.2 <tt
class="COMMAND">rmuser</tt></a></h2>

<p>您可以使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a>
來將使用者從系統之中完全移除 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a>
會執行以下動作:</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>移除該使用者的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(1)</span></a> 資料
(如果存在)。</p>
</li>

<li class="STEP">
<p>移除所有屬於該使用者的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">at</span>(1)</span></a> 工作。</p>
</li>

<li class="STEP">
<p>中止所有該使用者擁有的程序。</p>
</li>

<li class="STEP">
<p>移除系統本機密碼檔中該使用者的資料。</p>
</li>

<li class="STEP">
<p>移除該使用者的家目錄 (如果為該使用者所有)。</p>
</li>

<li class="STEP">
<p>移除 <tt class="FILENAME">/var/mail</tt> 中屬於該使用者的郵件。</p>
</li>

<li class="STEP">
<p>移除暫存空間 (如: <tt class="FILENAME">/tmp</tt>) 中所有屬於該使用者的檔案。</p>
</li>

<li class="STEP">
<p>最後，在 <tt class="FILENAME">/etc/group</tt> 檔內移除該使用者帳號。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 若該群組已無成員，或者是群組名稱與該使用者名稱相同時， 則群組將會被移除；
此操作會與 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">adduser</span>(8)</span></a>
所建立的帳號群組相對應。</p>
</blockquote>
</div>
</li>
</ol>
</div>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a>
無法移除系統管理者帳號帳號， 因為這即代表嚴重的破壞行為。</p>

<p>為了確認您的操作，預設採互動模式。</p>

<div class="EXAMPLE"><a id="AEN17824" name="AEN17824"></a>
<p><b>Example 13-2. <tt class="COMMAND">rmuser</tt> 帳號移除</b></p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">rmuser jru</kbd>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/zsh
Is this the entry you wish to remove? <kbd class="USERINPUT">y</kbd>
Remove user's home directory (/home/jru)? <kbd class="USERINPUT">y</kbd>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<samp class="PROMPT">#</samp>
</pre>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="USERS-CHPASS" name="USERS-CHPASS">13.6.3 <tt
class="COMMAND">chpass</tt></a></h2>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a>
可更改使用者資料如: 密碼、Shell及個人資訊。</p>

<p>僅系統管理者即系統管理者帳號可利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a>
更改其他使用者的資訊及密碼</p>

<p>除了指定使用者名稱，當不加參數時，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a>
會將使用者資訊顯示於編輯器當中。 並於使用者離開編輯器時更新使用者資訊。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 若您並非系統管理者帳號，在離開編輯器前會詢問您的密碼。</p>
</blockquote>
</div>

<div class="EXAMPLE"><a id="AEN17853" name="AEN17853"></a>
<p><b>Example 13-3. 系統管理者帳號 <tt class="COMMAND">chpass</tt></b></p>

<pre class="SCREEN">
#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1001
Gid [# or name]: 1001
Change [month day year]:
Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:
</pre>
</div>

<p>一般使用者僅可更改自己的少部份資訊。</p>

<div class="EXAMPLE"><a id="AEN17858" name="AEN17858"></a>
<p><b>Example 13-4. 一般使用者 <tt class="COMMAND">chpass</tt></b></p>

<pre class="SCREEN">
#Changing user database information for jru.
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:
</pre>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chfn&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chfn</span>(1)</span></a> 與 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chsh&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chsh</span>(1)</span></a> 即為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a>，也同 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ypchpass</span>(1)</span></a>、<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchfn&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ypchfn</span>(1)</span></a> 與 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchsh&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ypchsh</span>(1)</span></a>。 NIS
支援是自動的，所以無需在指令前加上 <tt class="LITERAL">yp</tt>。
若這會困擾您，請不必擔心，<a href="network-servers.html">Chapter 27</a> 將函蓋 NIS
的部份的說明。</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="USERS-PASSWD" name="USERS-PASSWD">13.6.4 <tt
class="COMMAND">passwd</tt></a></h2>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">passwd</span>(1)</span></a>
是更改密碼常用的方式，除了超級管理者可更改其他使用者的密碼外
使用者僅能更改自己的密碼。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 為了避免意外或未經同意的修改，在更新密碼前需輸入原密碼。</p>
</blockquote>
</div>

<div class="EXAMPLE"><a id="AEN17899" name="AEN17899"></a>
<p><b>Example 13-5. 更改您的密碼</b></p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">passwd</kbd>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done
</pre>
</div>

<div class="EXAMPLE"><a id="AEN17904" name="AEN17904"></a>
<p><b>Example 13-6. 以系統管理者帳號去更改其他使用者的密碼</b></p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">passwd jru</kbd>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done
</pre>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chpass</span>(1)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=yppasswd&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">yppasswd</span>(1)</span></a> 即為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">passwd</span>(1)</span></a>，皆支援
NIS。</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<h2 class="SECT2"><a id="USERS-PW" name="USERS-PW">13.6.5 <tt
class="COMMAND">pw</tt></a></h2>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a>
用來建立、移除、修改及查詢使用者及群組。 其功能即為系統使用者及群組檔案的前端。<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a>
擁有大量的指令參數 較適合使用於 shell script
中，對新手來說會此指令較其他指令複雜許多。</p>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="users-user.html"
accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="users-limiting.html"
accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">使用者帳號</td>
<td width="34%" align="center" valign="top"><a href="users.html"
accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">使用者資源限制</td>
</tr>
</table>
</div>

<p align="center"><small>本文及其他文件，可由此下載：<a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p>

<p align="center"><small>若有 FreeBSD 方面疑問，請先閱讀 <a
href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。<br />
關於本文件的問題，請洽詢 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

