<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD 4.X、5.X、6.X 常見問答集</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="BOOK" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="BOOK"><a id="AEN1" name="AEN1"></a>
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD 4.X、5.X、6.X 常見問答集</a></h1>

<h3 class="CORPAUTHOR">FreeBSD 文件計畫</h3>

<p class="COPYRIGHT">Copyright &copy; 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
2003, 2004, 2005, 2006 FreeBSD 文件計畫</p>

<div>
<div class="ABSTRACT"><a id="AEN53" name="AEN53"></a>
<p>這份文件是 FreeBSD 4.X，5.X 及 6.X 的常見問答集。 除非有特別加註，否則這些項目都適用於
FreeBSD 4.0 及以後的版本。 (如果條目內容中有 &lt;XXX&gt; 則是尚未完成中譯的部份。)
如果您對協助本計畫 的進行有興趣的話，請寄 e-mail 到 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">FreeBSD
文件計畫的郵遞論壇</a>。此外，隨時可從 <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/faq/index.html"
target="_top">FreeBSD 網站</a> 拿到這份文件的最新版本。 也可以利用 HTTP 來下載一份龐大的
<a href="book.html" target="_top">HTML</a> 文件，或是經由 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/" target="_top">FreeBSD FTP 站</a>
下載純文字、<span class="TRADEMARK">PostScript</span>&reg;、或 PDF 版本的檔案。
您也可以在這裡使用 <a href="http://www.FreeBSD.org/search/search.html"
target="_top">搜尋資料</a> 的功能。</p>
</div>
</div>

<div class="LEGALNOTICE"><a id="LEGALNOTICE" name="LEGALNOTICE"></a>
<p>Redistribution and use in source (SGML DocBook) and 'compiled' forms (SGML, HTML, PDF,
PostScript, RTF and so forth) with or without modification, are permitted provided that
the following conditions are met:</p>

<ol type="1">
<li>
<p>Redistributions of source code (SGML DocBook) must retain the above copyright notice,
this list of conditions and the following disclaimer as the first lines of this file
unmodified.</p>
</li>

<li>
<p>Redistributions in compiled form (transformed to other DTDs, converted to PDF,
PostScript, RTF and other formats) must reproduce the above copyright notice, this list
of conditions and the following disclaimer in the documentation and/or other materials
provided with the distribution.</p>
</li>
</ol>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION PROJECT
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
EVENT SHALL THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</blockquote>
</div>
</div>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD is a registered trademark of the FreeBSD Foundation.</p>

<p>3Com and HomeConnect are registered trademarks of 3Com Corporation.</p>

<p>Adobe, Acrobat, Acrobat Reader, and PostScript are either registered trademarks or
trademarks of Adobe Systems Incorporated in the United States and/or other countries.</p>

<p>Sound Blaster is a trademark of Creative Technology Ltd. in the United States and/or
other countries.</p>

<p>CVSup is a registered trademark of John D. Polstra.</p>

<p>IBM, AIX, EtherJet, Netfinity, OS/2, PowerPC, PS/2, S/390, and ThinkPad are trademarks
of International Business Machines Corporation in the United States, other countries, or
both.</p>

<p>IEEE, POSIX, and 802 are registered trademarks of Institute of Electrical and
Electronics Engineers, Inc. in the United States.</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium, and Xeon are trademarks or
registered trademarks of Intel Corporation or its subsidiaries in the United States and
other countries.</p>

<p>Iomega, Zip, and Jaz are either registered trademarks or trademarks of Iomega
Corporation in the United States and/or other countries.</p>

<p>Linux is a registered trademark of Linus Torvalds.</p>

<p>Microsoft, IntelliMouse, MS-DOS, Outlook, Windows, Windows Media and Windows NT are
either registered trademarks or trademarks of Microsoft Corporation in the United States
and/or other countries.</p>

<p>MIPS and R4000 are registered trademarks of MIPS Technologies, Inc. in the United
States and other countries.</p>

<p>Netscape and the Netscape Navigator are registered trademarks of Netscape
Communications Corporation in the U.S. and other countries.</p>

<p>Motif, OSF/1, and UNIX are registered trademarks and IT DialTone and The Open Group
are trademarks of The Open Group in the United States and other countries.</p>

<p>Oracle is a registered trademark of Oracle Corporation.</p>

<p>Silicon Graphics, SGI, and OpenGL are registered trademarks of Silicon Graphics, Inc.,
in the United States and/or other countries worldwide.</p>

<p>Sparc, Sparc64, SPARCEngine, and UltraSPARC are trademarks of SPARC International, Inc
in the United States and other countries. Products bearing SPARC trademarks are based
upon architecture developed by Sun Microsystems, Inc.</p>

<p>Sun, Sun Microsystems, Java, Java Virtual Machine, JavaServer Pages, JDK, JSP, JVM,
Netra, Solaris, StarOffice, Sun Blade, Sun Enterprise, Sun Fire, SunOS, and Ultra are
trademarks or registered trademarks of Sun Microsystems, Inc. in the United States and
other countries.</p>

<p>U.S. Robotics and Sportster are registered trademarks of U.S. Robotics
Corporation.</p>

<p>XFree86 is a trademark of The XFree86 Project, Inc.</p>

<p>Many of the designations used by manufacturers and sellers to distinguish their
products are claimed as trademarks. Where those designations appear in this document, and
the FreeBSD Project was aware of the trademark claim, the designations have been followed
by the “&trade;” or the “&reg;” symbol.</p>
</div>

<div class="DOCFORAMTNAVI">[ <a href="./index.html">章節模式</a> / <a
href="./book.html">完整模式</a> ]</div>

<hr />
</div>

<div class="TOC">
<dl>
<dt><b>Table of Contents</b></dt>

<dt>1 <a href="#INTRODUCTION">前言、一般問題</a></dt>

<dt>2 <a href="#SUPPORT">文件與技術支援</a></dt>

<dt>3 <a href="#INSTALL">安裝</a></dt>

<dt>4 <a href="#HARDWARE">硬體支援方面</a></dt>

<dd>
<dl>
<dt>4.1 <a href="#COMPATIBILITY-GENERAL">一般問題</a></dt>

<dt>4.2 <a href="#COMPATIBILITY-PROCESSORS">硬體架構及 CPU</a></dt>

<dt>4.3 <a href="#COMPATIBILITY-DRIVES">硬碟、磁帶機以及光碟、DVD、燒錄機</a></dt>

<dt>4.4 <a href="#COMPATIBILITY-KBD-MICE">鍵盤、滑鼠</a></dt>

<dt>4.5 <a href="#COMPATIBILITY-NETWORKING">網路跟 serial 設備</a></dt>

<dt>4.6 <a href="#COMPATIBILITY-SOUND">音效卡</a></dt>

<dt>4.7 <a href="#COMPATIBILITY-OTHER">其他硬體</a></dt>
</dl>
</dd>

<dt>5 <a href="#TROUBLESHOOT">常見問題解決</a></dt>

<dt>6 <a href="#COMMERCIAL">商業軟體</a></dt>

<dt>7 <a href="#APPLICATIONS">一般應用程式</a></dt>

<dt>8 <a href="#KERNELCONFIG">kernel 設定</a></dt>

<dt>9 <a href="#DISKS">硬碟、檔案系統、Boot Loader</a></dt>

<dt>10 <a href="#ADMIN">系統管理</a></dt>

<dt>11 <a href="#X">X Window System 及 Virtual Consoles</a></dt>

<dt>12 <a href="#NETWORKING">Networking</a></dt>

<dt>13 <a href="#SECURITY">系統安全篇</a></dt>

<dt>14 <a href="#PPP">PPP</a></dt>

<dt>15 <a href="#SERIAL">Serial Communications</a></dt>

<dt>16 <a href="#MISC">其它各式各樣的問題</a></dt>

<dt>17 <a href="#FUNNIES">The FreeBSD Funnies</a></dt>

<dt>18 <a href="#ADVANCED">進階主題</a></dt>

<dt>19 <a href="#ACKNOWLEDGMENTS">感謝</a></dt>

<dt><a href="#BIBLIOGRAPHY">Bibliography</a></dt>
</dl>
</div>

<div class="LOT">
<dl class="LOT">
<dt><b>List of Tables</b></dt>

<dt>3-1. <a href="#AEN1003">檔案大小的最大限制</a></dt>

<dt>12-1. <a href="#AEN4418">Network cards based on the DEC PCI chipset</a></dt>
</dl>
</div>

<div class="LOT">
<dl class="LOT">
<dt><b>List of Examples</b></dt>

<dt>11-1. <a href="#AEN3789">在 XFree86 3.3.x 系列的 XF86Config 設定檔的 “Pointer”
區塊中，以 moused 作轉換 的滾輪鼠的設定範例</a></dt>

<dt>11-2. <a href="#AEN3793">在 XFree86 4.x 系列的 XF86Config 設定檔的 “InputDevice”
區塊中，以 X Server 作轉換 的滾輪鼠的設定範例</a></dt>

<dt>11-3. <a href="#AEN3797">在 “.emacs” 中，設定滾輪鼠的原生 頁面滾動支援範例</a></dt>

<dt>11-4. <a href="#AEN3822">在 XF86Config 設定檔的 “Pointer” 區塊中，以 X Server
作轉換的滾輪鼠的設定範例</a></dt>

<dt>11-5. <a href="#AEN3826">在 XFree86 4.x 系列的 XF86Config 設定檔的 “InputDevice”
區塊中，以 X Server 作轉換 的滾輪鼠的設定範例</a></dt>

<dt>11-6. <a href="#AEN3830">在 “.emacs” 中，設定滾輪鼠的原生 頁面滾動支援範例</a></dt>

<dt>11-7. <a href="#AEN3857"><b class="APPLICATION">Imwheel</b> 的 <b
class="APPLICATION">Emacs</b> 設定</a></dt>

<dt>11-8. <a href="#AEN3865"><b class="APPLICATION">Imwheel</b> 的 <b
class="APPLICATION">Xemacs</b> 設定</a></dt>
</dl>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="INTRODUCTION" name="INTRODUCTION"></a>Chapter 1 前言、一般問題</h1>

Ying-Chieh Liao

<p>歡迎使用 FreeBSD 4.X-6.X FAQ!</p>

<p>跟其他 Usenet 上的 FAQ 一樣，這份文件涵蓋了有關 FreeBSD 這套作業 系統最常被問到的問題
(當然包括了回答！)。雖然說我們本來的目的是為了
減少網路頻寬的浪費以及避免同樣的問題一再出現，但事實上 FAQ 已經被視
為是一種值得閱讀的文件資源。</p>

<p>我們已經儘可能地使這份 FAQ 更豐富了。如果您對如何改善、進步方面有任
何建議，請隨時寄電子郵件給 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">FreeBSD
文件計畫的郵遞論壇</a>。</p>

<div class="QANDASET">
<dl>
<dt>1.1. <a href="#WHAT-IS-FREEBSD">什麼是 FreeBSD？</a></dt>

<dt>1.2. <a href="#FREEBSD-GOALS">發展 FreeBSD 的目的是什麼？</a></dt>

<dt>1.3. <a href="#BSD-LICENSE-RESTRICTIONS">FreeBSD 版權有任何限制嗎？</a></dt>

<dt>1.4. <a href="#REPLACE-CURRENT-OS">FreeBSD 可以取代我現在在用的作業系統嗎？</a></dt>

<dt>1.5. <a href="#WHY-CALLED-FREEBSD">為什麼要叫做 FreeBSD？</a></dt>

<dt>1.6. <a href="#DIFFERENCES-TO-OTHER-BSDS">FreeBSD 及 NetBSD, OpenBSD 以及其他 open
source BSD 作業系統之間有何不同之處呢？</a></dt>

<dt>1.7. <a href="#LATEST-VERSION">最新版的 FreeBSD 是那一版？</a></dt>

<dt>1.8. <a href="#CURRENT">什麼是 FreeBSD-CURRENT？</a></dt>

<dt>1.9. <a href="#STABLE">什麼是 FreeBSD-STABLE？</a></dt>

<dt>1.10. <a href="#NAMING">FreeBSD 版本命名原則是什麼呢？</a></dt>

<dt>1.11. <a href="#RELEASE-FREQ">每次新的 FreeBSD 將於什麼時候推出？</a></dt>

<dt>1.12. <a href="#RESPONSIBLE">誰負責 FreeBSD 的發展？</a></dt>

<dt>1.13. <a href="#WHERE-GET">我要如何取得 FreeBSD？</a></dt>

<dt>1.14. <a href="#ACCESS-PR">我要如何去查詢、提交問題回報(Problem
Report，簡稱PR)資料庫呢？</a></dt>

<dt>1.15. <a href="#OTHER-INFO-SOURCES">還有其他有關 FreeBSD 的資訊嗎？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WHAT-IS-FREEBSD" name="WHAT-IS-FREEBSD"></a><b>1.1.</b> 什麼是 FreeBSD？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地來說，FreeBSD 是一套可以在 Alpha/AXP, AMD64 及 <span
class="TRADEMARK">Intel</span>&reg; EM64T, <span class="TRADEMARK">i386</span>&#8482;
IA-64, PC-98, <span class="TRADEMARK">UltraSPARC</span>&reg; 上執行的 UN*X-like
作業系統，它是根據 U.C. Berkeley 所開發出來的 “4.4BSD-Lite”，並加上了許多
“4.4BSD-Lite2” 的增強功能。它同時也間接使用了 U.C. Berkeley 所開發出來並由 William
Jolitz 移植到 i386 的 “Net/2”，也就是 “386BSD”，不過現在 386BSD
的程式碼只剩下極少數還留 存在 FreeBSD 中。您可以在 <a
href="http://www.FreeBSD.org/index.html" target="_top">FreeBSD 首頁</a>找到有關 什麼是
FreeBSD 以及它可以幫您做些什麼的相關資訊。</p>

<p>FreeBSD 已被廣泛地被世界各地的公司行號、ISP、研究人員、電腦
專家、學生，以及家庭用戶所使用，用在工作、教育以及娛樂上。</p>

<p>如果想看關於 FreeBSD 更深入的資料，請看 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/index.html"
target="_top">FreeBSD 使用手冊</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FREEBSD-GOALS" name="FREEBSD-GOALS"></a><b>1.2.</b> 發展 FreeBSD
的目的是什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 計畫的目的是提供可以任意使用且沒有限制的軟體。我們在 程式碼
(以及計晝本身) 上付出了大量心血，當然不會介意來點金錢上的
回饋，不過我們絕對不會如此堅持。我們相信我們首要的 “任務”
就是提供程式碼給每一個使用者，不管他們打算用
來幹嘛；這麼一來，這些程式碼才能被用在最多地方，也才能發揮它們最
大的利益。我們相信這就是自由軟體最基本的目標之一，而且我們會盡全 力去支持它。</p>

<p>在我們 source tree 中有部份的程式碼是採用所謂的<a
href="http://www.FreeBSD.org/copyright/COPYING" target="_top">GPL</a>或是 <a
href="http://www.FreeBSD.org/copyright/COPYING.LIB" target="_top">LGPL</a>
版權宣告，雖然這些版權宣告是用來保障而非限制使用者的權 利，畢竟是不那麼自由了些。由於這些
GPL 的軟體在商業使用上會引起 非常複雜的版權問題，因此只要有機會，我們會盡量以採用比較鬆的
<a href="http://www.FreeBSD.org/copyright/freebsd-license.html" target="_top">FreeBSD
版權</a>的軟體來取代這些 GPL 版權宣告的軟體。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BSD-LICENSE-RESTRICTIONS" name="BSD-LICENSE-RESTRICTIONS"></a><b>1.3.</b>
FreeBSD 版權有任何限制嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>有的。但是這並不是限制你怎麼去使用這些程式碼，而是你怎麼看待 FreeBSD
這個計畫。如果你有版權焦慮症的話，請閱讀 <a
href="http://www.FreeBSD.org/copyright/freebsd-license.html"
target="_top">版權本文</a>。簡單地來說，這份版權的重點可以條列如下。</p>

<ul>
<li>
<p>請勿宣稱是您寫了這個程式。</p>
</li>

<li>
<p>如果它出問題了，不要控告我們。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REPLACE-CURRENT-OS" name="REPLACE-CURRENT-OS"></a><b>1.4.</b> FreeBSD
可以取代我現在在用的作業系統嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>對大部份的人來說是這樣沒錯，但事實上這問題並沒有這麼好回 答。</p>

<p>大部份的人並不是真正在使用一個作業系統。他們使用的是應用程式
；而那些應用程式才是真正用到作業系統的東西。FreeBSD 是設計用來提
供一個強韌且功能完整的作業環境給應用程式來執行。它支援了多種瀏覽
器，辦公室套件軟體，電子郵件閱讀軟體，繪圖程式，程式設計環境，網
路伺服器軟體，以及幾乎所有你想要的東西。大部份的程式都可以靠<a
href="http://www.freebsd.org/ports/" target="_top">Ports Collection</a>來管 理。</p>

<p>但是如果你想要使用的應用程式只能在某個特定的作業系統上面執行
的話，你就不能輕易地把它換掉，或者指望在 FreeBSD 上有很相似的應用
程式才有機會。如果你想要的是一個強健的辦公室或是網路伺服器，或是
一部穩定的工作站，或是想在不被中斷的環境下工作的話，FreeBSD 無疑
是您的最佳選擇。世界各地有很多使用者，包括初學或資深的 <span
class="TRADEMARK">UNIX</span>&reg; 管理 人員都選用 FreeBSD 當他們唯一的桌上作業系統。</p>

<p>如果你是從其他的 <span class="TRADEMARK">UNIX</span> 環境轉換到 FreeBSD
的話，基本上是大同小 異的。但是如果你之前用的是圖形界面的作業系統，例如說是 <span
class="TRADEMARK">Windows</span>&reg; 或是 比較古老的 <span
class="TRADEMARK">Mac&nbsp;OS</span>&reg; 的話，可能就要多花一點時間來學習怎麼用 <span
class="TRADEMARK">UNIX</span> 的 方法來做事。你可以從這份 FAQ 和 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/index.html"
target="_top">FreeBSD 使用手冊</a> 來入門。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WHY-CALLED-FREEBSD" name="WHY-CALLED-FREEBSD"></a><b>1.5.</b> 為什麼要叫做
FreeBSD？</p>
</div>

<div class="ANSWER">
<p><b></b></p>

<ul class="noindent">
<li>
<p>您可以免費使用它，即使是用於商業用途。</p>
</li>

<li>
<p>整個 FreeBSD 作業系統完整的原始程式都可以免費取得，而且不
管是在使用，散佈或是整合進其他程式等各方面也只受到最小的限 制
(不論是否用於商業用途)。</p>
</li>

<li>
<p>任何人都可以自由地把他對系統的改良或錯誤修正的程式碼加入 source tree 之中
(當然要符合幾個先決條件)。</p>
</li>

<li style="list-style: none">
<p>特別值得注意的是這裡的 “free” 出現了兩次，而且它們 的意思是不一樣的：一種代表
“免費”，另一種代表 “自由”。您可以拿 FreeBSD 去做任何您想要做的事，除了一些 <span
class="emphasis"><i class="EMPHASIS">例外</i></span>，例如您宣稱 FreeBSD 是您寫的。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DIFFERENCES-TO-OTHER-BSDS" name="DIFFERENCES-TO-OTHER-BSDS"></a><b>1.6.</b>
FreeBSD 及 NetBSD, OpenBSD 以及其他 open source BSD 作業系統之間有何不同之處呢？</p>
</div>

<div class="ANSWER">
<p><b></b>James Howard 在 <a href="http://www.daemonnews.org/"
target="_top">DaemonNews</a> 上寫了 <a
href="http://ezine.daemonnews.org/200104/bsd_family.html" target="_top">The BSD Family
Tree</a> 的文件，裡面說明了這些歷史淵源及這些 *BSD 家族計畫之間的差異。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LATEST-VERSION" name="LATEST-VERSION"></a><b>1.7.</b> 最新版的 FreeBSD
是那一版？</p>
</div>

<div class="ANSWER">
<p><b></b>就 FreeBSD 目前的發展而言，有四個主要發展分支(其中三個已有 RELEASE)： 由 <span
class="emphasis"><i class="EMPHASIS">4-STABLE</i></span> 所發行(release)的 4.X 系列、 由
<span class="emphasis"><i class="EMPHASIS">5-STABLE</i></span> 所發行(release)的 5.X
系列、 由 <span class="emphasis"><i class="EMPHASIS">6-STABLE</i></span>
所發行(release)的 6.X 系列， 以及 <span class="emphasis"><i
class="EMPHASIS">7-CURRENT</i></span> 分支。</p>

<p>在 5.3 release 之前，4.X 系列仍屬 <span class="emphasis"><i
class="EMPHASIS">-STABLE</i></span> 分支。 自從 5.3 開始，5.X 系列開始規劃新的 <span
class="emphasis"><i class="EMPHASIS">-STABLE</i></span> 分支發展重點， 而 4.X
將只著重在重大問題上(比如：漏洞修補、安全維護)以及 &quot;extended support&quot;
，不再會有新的突破性發展。</p>

<p>於 Nov 2005 所發行的 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/6.0-RELEASE" target="_top">6.0</a>
版是目前最新的 <span class="emphasis"><i class="EMPHASIS">6-STABLE</i></span> 分支； 而於
May 2005 所發行的 <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/5.4-RELEASE/"
target="_top">5.4</a> 版則是目前最新的 <span class="emphasis"><i
class="EMPHASIS">5-STABLE</i></span> 分支。</p>

<p>簡單的說，<span class="emphasis"><i class="EMPHASIS">-STABLE</i></span>
的主要訴求對象是對於 穩定性及低變異性的需求遠勝過對最新 <span class="emphasis"><i
class="EMPHASIS">-CURRENT</i></span> snapshot 中特別新功能的需求，例如 ISP
或公司行號的使用者。這兩個 branch 都有可能會產生 release 版，但只有當你能接受 <span
class="emphasis"><i class="EMPHASIS">-CURRENT</i></span> 遠比 <span class="emphasis"><i
class="EMPHASIS">-STABLE</i></span> 容易更動這一點，才應該用 <span class="emphasis"><i
class="EMPHASIS">-CURRENT</i></span>。</p>

<p>Release 版<a href="#RELEASE-FREQ">每幾個月</a>才會發 行一次。雖然如此，有很多人和
FreeBSD 原始碼同步更新（詳見 <a href="#CURRENT">FreeBSD-CURRENT</a> 和 <a
href="#STABLE">FreeBSD-STABLE</a> 的相關問題)，但因為原始碼
是一直不斷地在變動的，所以如果要這麼做的話得要花上更多的精 力。</p>

<p>其他更多相關 FreeBSD 發行情報，可由 FreeBSD 網站上的 <a
href="http://www.FreeBSD.org/releng/index.html" target="_top">Release Engineering</a>
得知</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CURRENT" name="CURRENT"></a><b>1.8.</b> 什麼是 FreeBSD-CURRENT？</p>
</div>

<div class="ANSWER">
<p><b></b><a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/cutting-edge.html#CURRENT"
target="_top">FreeBSD-CURRENT</a> 指的是正在發展中的作業系統版本，它終將在適當的時機成為
FreeBSD-STABLE 分支。它實在是只適合給系統發展者以及有毅力的業餘愛好者使用
。如果想要得到有關如何使用 -CURRENT 的深入資訊，請參考 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/index.html"
target="_top">使用手冊</a> 的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/cutting-edge.html#CURRENT"
target="_top">相關部份</a>。</p>

<p>如果您對作業系統本身並不是很熟悉，或是您沒辦法分辨您遇到的問
題是真的發生了問題亦或是暫時性的小狀況，那麼您就不應該使用
FreeBSD-CURRENT。這個分支的程式碼有時候變動得很快，而且可能會因此
而使您有好幾天的時間無法更新您的系統。我們假設使用 FreeBSD-CURRENT
的使用者都有能力去分析他們所遇到的問題並且只回報 真正的問題而非“小狀況”。如果您在
-CURRENT mailing list 中提到類似“make world 造成一些有關 groups 的錯
誤”之類的問題的話，也許會被其他人輕視。</p>

<p>我們每天都會根據目前 -CURRENT 和 -STABLE 的狀況對這兩個分支各 發行一個<a
href="http://www.FreeBSD.org/releases/snapshots.html" target="_top">snapshot</a>
版。有的時候甚至還會發行可供取得的版本。發表這些 snapshot 的目的在於：</p>

<ul>
<li>
<p>測試最新版的安裝程式。</p>
</li>

<li>
<p>提供一個簡單的方法給那些喜歡使用 -CURRENT 或是 -STABLE 但
是沒有時間和頻寬去每天昇級的使用者。</p>
</li>

<li>
<p>為了替我們發展中的程式保留一個固定的參考點，以防止我們未 來造成不幸。(雖然一般而言 CVS
可以防止類似這種的可怕事件 :)</p>
</li>

<li>
<p>為了確保所有需要測試的新功能都可以得到最多的測試。</p>
</li>
</ul>

<p>我們不對 -CURRENT snapshot 做任何形式的“品質保
證”。如果你想要的是一個穩定且經過充分測試過的系統的話， 最好選擇使用完整 release
的版本，或是使用 -STABLE snapshots。</p>

<p>您可以直接從 <a href="ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/"
target="_top">ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/</a> 取得 -CURRENT 的
snapshot release</p>

<p>對每個有在活動的分支而言，平均每天都會產生一次 snapshots。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STABLE" name="STABLE"></a><b>1.9.</b> 什麼是 FreeBSD-STABLE？</p>
</div>

<div class="ANSWER">
<p><b></b>回溯到 FreeBSD 2.0.5 剛發表的時候，我們決定把 FreeBSD 的發展 分成兩支。一支叫做
<a href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/current-stable.html#STABLE"
target="_top">-STABLE</a> ，我們只對它做錯誤修正及小幅度的修改 (這是給 ISP
和商業公司等，對實驗中功能不感興趣的單位所使用的)。 另外一支叫做 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/current-stable.html#CURRENT"
target="_top">-CURRENT</a>，從 2.0 版發行以後，就不斷地朝著 6.0-RELEASE
(含後續的版本)前進著。</p>

<p>6-STABLE 分支是從 6.0-RELEASE 開始(5-STABLE 分支算是 5.3-RELEASE 之後才開始的)，
然後原本的 FreeBSD-CURRENT 就會成為 7-CURRENT。</p>

<p>下面就是版本演進的示意圖：</p>

<pre class="PROGRAMLISTING">
                 2.0
                  |
                  |
                  |  [2.1-STABLE]
 *BRANCH*       2.0.5 -&gt; 2.1 -&gt; 2.1.5 -&gt; 2.1.6 -&gt; 2.1.7.1  [2.1-STABLE ends]
                  |                            (Mar 1997)
                  |
                  |
                  |  [2.2-STABLE]
 *BRANCH*       2.2.1 -&gt; 2.2.2-RELEASE -&gt; 2.2.5 -&gt; 2.2.6 -&gt; 2.2.7 -&gt; 2.2.8 [end]
                  |       (Mar 1997)    (Oct 97) (Apr 98) (Jul 98) (Dec 98)
                  |
                  |
               3.0-SNAPs  (started Q1 1997)
                  |
                  |
               3.0-RELEASE (Oct 1998)
                  |
                  |  [3.0-STABLE]
 *BRANCH*      3.1-RELEASE  (Feb 1999) -&gt; 3.2 -&gt; 3.3 -&gt; 3.4 -&gt; 3.5 -&gt; 3.5.1
                  |                     (May 1999) (Sep 1999) (Dec 1999) (June 2000) (July 2000)
                  |
                  |  [4.0-STABLE]
 *BRANCH*        4.0  (Mar 2000) -&gt; 4.1 -&gt; 4.1.1 -&gt; 4.2 -&gt; 4.3 -&gt; 4.4 -&gt; ... -&gt; 4.11
                  |
                  |              (July 2000)   (Sep 2000)   (Nov 2000)          (Jan 2005)
                  |
                  |  [5.0-STABLE]
 *BRANCH*        5.0  (2001) -&gt; 5.1 -&gt; 5.2 -&gt; 5.3 -&gt; 5.4 -&gt; ... future 5.x releases...
                  |
                  |              ( 2001)               (Nov 2004) (May 2005)
                  |
                  |  [6.0-STABLE]
 *BRANCH*        6.0  (Nov 2005) ... future 6.x releases...
                  |
                 \|/
                  +
          [7.0-CURRENT continues]
</pre>

<p>2.2-STABLE 這個分支隨著 2.2.8 的發表而功成身退。3-STABLE 這個 分支則是結束在 3.5.1
發表之後，它也是 3.X 的最後一次發表。之後除了
安全相關的修正之外，這兩個分支就幾乎沒有再更動過。4-STABLE 分支的支援 會持續到
2007/01/31，但主要焦點在於安全方面的漏洞、臭蟲及其他嚴重問題的修補。</p>

<p>5-STABLE 是目前正在發展中的 -STABLE 分支。5-STABLE 的最新的一 次發表是在 May 2005
發行的 5.4-RELEASE。</p>

<p>6-STABLE 是目前正在發展中的 -STABLE 分支。6-STABLE 的最新的一 次發表是在 Nov 2005
發行的 6.0-RELEASE。</p>

<p>7-CURRENT 這個分支是 FreeBSD 的 -CURRENT 分支，仍然不斷地在發展當中。
如果想要知道更多關於這個分支的資訊的話，請參考 <a href="#CURRENT">什麼是
FreeBSD-CURRENT？</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NAMING" name="NAMING"></a><b>1.10.</b> FreeBSD 版本命名原則是什麼呢？</p>
</div>

<div class="ANSWER">
<p><b></b>您可能會看到以下幾種 FreeBSD 的版本名稱：</p>

<ul>
<li>
<p>1) 4.4.2-RELEASE、4.4-BETA： 最前面的數字 A.B.C 裡，A 表示主要的作業系統版本(Major)，B
表示 次要的作業系統版本(Minor)，C 表示些微修正版本(Patch)。後面的英文
表示是否為正式版，通常是測試版(ALPHA、BETA、GAMMA)、正式版(RELEASE)。</p>
</li>

<li>
<p>2) 6.0-STABLE、7.0-CURRENT： 通常 FreeBSD 會有一個以發展新功能為主的版本，稱為
CURRENT，目前的 CURRENT 版本是 7.0；FreeBSD 也會有一個以維護穩定性及系統安全為主
的版本，稱為 STABLE，目前 STABLE 的版本是 6.0。雖然如此，並不代表 STABLE
就沒有新功能，也不代表 CURRENT 就不穩定不安全，這兩個版本 是相輔相成的，而且終有一天
7.0-CURRENT 會變成 7.0-STABLE，而開始 8.0-CURRENT 的發展。不過一般來說，由於 CURRENT
系統開發的速度相當 快，跟 STABLE 相比較不穩定，而且最好是有相當經驗的使用者才來使用。
如果是商業環境或是伺服器站台，最好還是跑 STABLE 與 RELEASE 比較好。 由於 STABLE 與
CURRENT 都是一直在開發維護中的版本，因此沒有一個
特定的數字版本可以稱呼，因此通常我們會以編譯日期來代表是哪個時候 的 STABLE 或
CURRENT，例如「4.4-STABLE、編譯日期 2001/10/08」。</p>
</li>

<li>
<p>3) 5.0-011025-SNAP、4.2-010816-RELENG： SNAP 與 RELENG 並不是正式發行的版本，其中
3.0-970625-SNAP 表示是 在 2001 年 10 月 25 日發行的 5.0 測試版(SNAPshot)，通常是指
CURRENT 的版本。而 4.2-010816-RELENG 表示是在 2001 年 8 月 16 日發行的 4.2
非正式的穩定版，通常是指 STABLE 的版本。 通常 FreeBSD 核心小組會不定時釋出 SNAP
以供測試，然後有一天 SNAP 會變成 ALPHA-&#62;BETA-&#62;GAMMA，再來是
RELEASE，而後可能會有不定時的 RELENG 以供測試使用，但是 RELENG 的穩定性通常又比前期的
RELEASE 來的好。</p>
</li>
</ul>

<p>您要是習慣微軟的術語，這樣說好了，SNAP 是開發期間的內部流出版，
那個日期(011025)就是Build Number，而 ALPHA 與 BETA 是搶鮮版， RELEASE(RELENG
勉強也算)是正式版，這樣應該了解了吧。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RELEASE-FREQ" name="RELEASE-FREQ"></a><b>1.11.</b> 每次新的 FreeBSD
將於什麼時候推出？</p>
</div>

<div class="ANSWER">
<p><b></b>一般而言，Release Engineering Team <code class="EMAIL">&#60;<a
href="mailto:re@FreeBSD.org">re@FreeBSD.org</a>&#62;</code> 平均每四個月發行一次
release，每次新版本的發表時程都會事先公告，
相關的開發人員就會知道，什麼時候該先把手邊的計劃完成並且測試過，
此外，這些更動都已經完整地測試過，且不會影響系統穩定度。 雖然，等這些好東西進入 -STABLE
的時間令人等得有些不耐煩， 但是大多數的使用者都認為這種謹慎的態度是 FreeBSD
最好的優點之一。</p>

<p>有關發行情報的更多細節部分(包括 release 的行程表、進度)，都可在 FreeBSD 網站上的 <a
href="http://www.FreeBSD.org/releng/index.html" target="_top">發行情報</a> 上面獲得。</p>

<p>為了滿足那些需要 (或想要) 新鮮刺激感的使用者，
上面(-CURRENT的部分)已經提到我們每天都會發行 snapshots 版可供使用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RESPONSIBLE" name="RESPONSIBLE"></a><b>1.12.</b> 誰負責 FreeBSD 的發展？</p>
</div>

<div class="ANSWER">
<p><b></b>如果是一些有關 FreeBSD 計畫的關鍵性決定，像是整個計畫的走向 或是決定誰可以改
source tree 裡的程式碼這類的事，是由一個由 9 個 人所組成的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/contributors/article.html#STAFF-CORE"
 target="_top">core team</a> 來決定。而有另一群超過 300 個人的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/contributors/article.html#STAFF-COMMITTERS"
 target="_top">commiters</a> 有權利可以直接修改 FreeBSD 的 source tree。</p>

<p>無論如何，大多數的改變都會事前在 <a href="#MAILING">mailing lists</a>
先討論過，而且不分角色，每個人都可以參與討論。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WHERE-GET" name="WHERE-GET"></a><b>1.13.</b> 我要如何取得 FreeBSD？</p>
</div>

<div class="ANSWER">
<p><b></b>每個 FreeBSD 的重要版本都可以經由匿名 ftp 從 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">FreeBSD FTP 站</a>取得：</p>

<ul>
<li>
<p>如果需要 6-STABLE 的最新版，也就是 6.0-RELEASE，請到 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/6.0-RELEASE/"
target="_top">6.0-RELEASE</a> 這個目錄</p>
</li>

<li>
<p><a href="ftp://current.FreeBSD.org/pub/FreeBSD/" target="_top">7-CURRENT Snapshot</a>
通常也是每天都會做一份，這是從 <a href="#CURRENT">-CURRENT</a> 分支做出來的，
主要是為了提供給那些熱心的測試者和開發人員。</p>
</li>

<li>
<p>如果需要 5-STABLE 的最新版，也就是 5.4-RELEASE，請到 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/5.4-RELEASE/"
target="_top">5.4-RELEASE</a> 這個目錄</p>
</li>

<li>
<p>如果需要 4-STABLE 的最新版，也就是 4.11-RELEASE，請到 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/4.11-RELEASE/"
target="_top">4.11-RELEASE</a> 這個目錄</p>
</li>

<li>
<p><a href="ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/" target="_top">4.X、5.X、6X
snapshots</a> 通常每天都會做一份。</p>
</li>
</ul>

<p>FreeBSD 的 CD、DVD，還有其他取得方式可以在 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/mirrors.html"
target="_top">使用手冊</a> 中找到解答。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ACCESS-PR" name="ACCESS-PR"></a><b>1.14.</b>
我要如何去查詢、提交問題回報(Problem Report，簡稱PR)資料庫呢？</p>
</div>

<div class="ANSWER">
<p><b></b>所有使用者的變更要求都可以經由網頁介面的 <a
href="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?query" target="_top">PR查詢介面</a>
來察看 (或是回報) 我們的錯誤回報資料庫。</p>

<p>也可以使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">send-pr</span>(1)</span></a>
這個指令透過電子郵件來回報問題、要求變更。 或者是經由 <a
href="http://www.FreeBSD.org/send-pr.html" target="_top">網頁介面的 PR</a>
來送出問題回報。</p>

<p>然而，在您回報問題之前，請先閱讀 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/problem-reports/article.html"
target="_top">如何撰寫 FreeBSD 的問題回報單</a>，這是一篇告訴你怎樣才能寫出一篇真正有用的
問題回報單。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="OTHER-INFO-SOURCES" name="OTHER-INFO-SOURCES"></a><b>1.15.</b> 還有其他有關
FreeBSD 的資訊嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>詳見 <a href="http://www.FreeBSD.org" target="_top">FreeBSD</a> 網站上的 <a
href="http://www.FreeBSD.org/docs.html" target="_top">文件</a> 列表。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="SUPPORT" name="SUPPORT"></a>Chapter 2 文件與技術支援</h1>

Chin-San Huang

<div class="QANDASET">
<dl>
<dt>2.1. <a href="#BOOKS">關於 FreeBSD 有哪些好書可以推薦閱讀的嗎？</a></dt>

<dt>2.2. <a href="#DOC-FORMATS">這些文件有其他格式的嗎？像是：純文字(ASCII)或 <span
class="TRADEMARK">PostScript</span> 之類的格式？</a></dt>

<dt>2.3. <a href="#MAILING">哪裡有關於 FreeBSD 的郵遞論壇(mailing lists)呢？</a></dt>

<dt>2.4. <a href="#NEWSGROUPS">有哪些可以使用的 FreeBSD 新聞群組(news groups)呢?</a></dt>

<dt>2.5. <a href="#IRC">有哪些 FreeBSD IRC (Internet Relay Chat)頻道呢？</a></dt>

<dt>2.6. <a href="#TRAINING">可以從哪邊獲得 FreeBSD 的商業課程訓練及技術支援呢？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOKS" name="BOOKS"></a><b>2.1.</b> 關於 FreeBSD
有哪些好書可以推薦閱讀的嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 文件計畫已陸續發表了相當廣泛範圍的文件，可在 <a
href="http://www.FreeBSD.org/docs.html"
target="_top">http://www.FreeBSD.org/docs.html</a> 取得。另外， FreeBSD 本身的
manual(一般通稱的man)、doc也如同套件軟體一樣，可以輕鬆地裝在您系統上。</p>

<p>此外，也建議參閱本份 FAQ 最後所列的參考書目表(Bibliography)與 FreeBSD 使用手冊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DOC-FORMATS" name="DOC-FORMATS"></a><b>2.2.</b>
這些文件有其他格式的嗎？像是：純文字(ASCII)或 <span class="TRADEMARK">PostScript</span>
之類的格式？</p>
</div>

<div class="ANSWER">
<p><b></b>有的。這些文件都分別以不同格式儲存以及壓縮處理，放在 FTP 上面，可以從各 FreeBSD
FTP 站的 <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/"
target="_top">/pub/FreeBSD/doc/</a> 目錄內找到你要的。</p>

<p>文件的分類方面主要是一些不同性質所組成：</p>

<ul>
<li>
<p>文件名稱，比如：<tt class="LITERAL">faq(常見問答集)</tt>或是 <tt
class="LITERAL">handbook(FreeBSD 使用手冊)</tt>等等。</p>
</li>

<li>
<p>各國翻譯的的文件：這主要是由 locale 名稱來決定的 (不清楚的話，可參考您的 FreeBSD
作業系統上的 <tt class="FILENAME">/usr/share/locale</tt>)
目前文件總共有下列幾種語言(及編碼)有翻譯：</p>

<div class="INFORMALTABLE"><a id="AEN330" name="AEN330"></a>
<table border="0" frame="void" width="90%" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>Locale 名稱</th>
<th>說明(所代表的語系、編碼)</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="LITERAL">en_US.ISO8859-1</tt></td>
<td>美式英文(US English)</td>
</tr>

<tr>
<td><tt class="LITERAL">de_DE.ISO8859-1</tt></td>
<td>德文(German)</td>
</tr>

<tr>
<td><tt class="LITERAL">es_ES.ISO8859-1</tt></td>
<td>西班牙文(Spanish)</td>
</tr>

<tr>
<td><tt class="LITERAL">fr_FR.ISO8859-1</tt></td>
<td>法文(French)</td>
</tr>

<tr>
<td><tt class="LITERAL">it_IT.ISO8859-15</tt></td>
<td>義大利文(Italian)</td>
</tr>

<tr>
<td><tt class="LITERAL">ja_JP.eucJP</tt></td>
<td>日文(Japanese，編碼方式：EUC)</td>
</tr>

<tr>
<td><tt class="LITERAL">ru_RU.KOI8-R</tt></td>
<td>俄文(Russian，編碼方式：KOI8-R)</td>
</tr>

<tr>
<td><tt class="LITERAL">zh_TW.Big5</tt></td>
<td>正體中文(Chinese，編碼方式：Big5)</td>
</tr>
</tbody>
</table>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 上列的各國翻譯語系文件中，並非所有文件都有翻譯。</p>
</blockquote>
</div>
</li>

<li>
<p>文件的格式：每份文件都以各種不同格式儲存，每種格式都各有好壞，
有些格式適合線上閱讀，而有些則適合列印出美觀的文件。
我們都提供這些不同格式的文件，來確保無論是螢幕上、列印紙本，每個人都可以正常地閱讀內容，
目前可供使用的格式如下:</p>

<div class="INFORMALTABLE"><a id="AEN373" name="AEN373"></a>
<table border="0" frame="void" width="90%" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>格式</th>
<th>說明</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="LITERAL">html-split</tt></td>
<td>章節模式</td>
</tr>

<tr>
<td><tt class="LITERAL">html</tt></td>
<td>完整模式</td>
</tr>

<tr>
<td><tt class="LITERAL">pdb</tt></td>
<td>Palm Pilot 資料格式，使用 <a href="http://www.iSilo.com/" target="_top">iSilo</a>
程式來閱讀</td>
</tr>

<tr>
<td><tt class="LITERAL">pdf</tt></td>
<td>Adobe's PDF 格式</td>
</tr>

<tr>
<td><tt class="LITERAL">ps</tt></td>
<td><span class="TRADEMARK">PostScript</span> 格式</td>
</tr>

<tr>
<td><tt class="LITERAL">rtf</tt></td>
<td>Microsoft's RTF格式<a id="AEN406" name="AEN406" href="#FTN.AEN406"><span
class="footnote">[a]</span></a> </td>
</tr>

<tr>
<td><tt class="LITERAL">txt</tt></td>
<td>純文字(ASCII)</td>
</tr>
</tbody>

<tr>
<td colspan="2">Notes:<br />
<a id="FTN.AEN406" name="FTN.AEN406">a.</a> 當使用 MS Word 來開啟 RTF
格式的話，頁數顯示並不會自動更新。 (在開啟文件後，要按 <b class="KEYCAP">CTRL</b>+<b
class="KEYCAP">A</b>, <b class="KEYCAP">CTRL</b>+<b class="KEYCAP">END</b>, <b
class="KEYCAP">F9</b>，這樣子才會更新頁數的顯示。)<br />
</td>
</tr>
</table>
</div>
</li>

<li>
<p>文件的壓縮、打包方式：目前有三種方式：</p>

<ol type="1">
<li>
<p>當採用 <tt class="LITERAL">章節模式(html-split)</tt>，章節模式所產生的各檔案會先使用
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a>
來壓縮。檔名結尾有 <tt class="FILENAME">.tar</tt> 的檔案就是 tar 格式。
接著，會再以下列方式再壓縮。</p>
</li>

<li>
<p>其他格式的檔案都會是單一檔案，檔名通常會是： <tt class="FILENAME">book.<tt
class="REPLACEABLE"><i>格式</i></tt></tt> (舉例： <tt class="FILENAME">book.pdb</tt>，
<tt class="FILENAME">book.html</tt> 等等..後面通常加上『.格式』).</p>

<p>而這些檔案會分別以兩種壓縮型態進行壓縮，而存成兩種壓縮型態。</p>

<div class="INFORMALTABLE"><a id="AEN436" name="AEN436"></a>
<table border="0" frame="void" width="90%" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>格式</th>
<th>說明</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="LITERAL">zip</tt></td>
<td>Zip 格式，若要在 FreeBSD 上解壓 zip 檔，則必須先安裝 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/chinese/unzip/pkg-descr"><tt
class="FILENAME">chinese/unzip</tt></a> 或 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/archivers/unzip/pkg-descr"><tt
class="FILENAME">archivers/unzip</tt></a>。</td>
</tr>

<tr>
<td><tt class="LITERAL">bz2</tt></td>
<td>BZip2 格式，雖然不如 zip 格式的廣泛使用，但是好處在於可壓縮成更小的檔案。 要解壓 bz2
格式的話，需先安裝 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/archivers/bzip2 /pkg-descr"><tt
class="FILENAME">archivers/bzip2</tt></a> 。</td>
</tr>
</tbody>
</table>
</div>

<p>所以像是 Handbook 的 <span class="TRADEMARK">PostScript</span> 版格式，會以 BZip2
格式壓縮， 存放在 <tt class="FILENAME">handbook/</tt> 目錄內， 檔名就是<tt
class="FILENAME">book.ps.bz2</tt>。</p>
</li>
</ol>
</li>
</ul>

<p>選擇想要下載的文件格式與壓縮型態之後，則要決定是否以 FreeBSD <span class="emphasis"><i
class="EMPHASIS">套件(package)</i></span> 型態來下載。</p>

<p>下載、安裝『package』的好處在於：可以透過一般 FreeBSD 套件管理方式來進行管理，比如 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a> 及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_delete</span>(1)</span></a>。</p>

<p>若決定好要下載、安裝『package』的話，必須要確認所要下載的檔名。
文件計畫的套件(package)通常是放在是 <tt class="FILENAME">packages</tt> 的目錄內，
每個文件計畫的套件檔名通常是： <tt class="FILENAME"><tt
class="REPLACEABLE"><i>文件名稱</i></tt>.<tt class="REPLACEABLE"><i>語系</i></tt>.<tt
class="REPLACEABLE"><i>編碼</i></tt>.<tt class="REPLACEABLE"><i>格式</i></tt>.tgz</tt>
。</p>

<p>舉個例子，英文版的 FAQ (格式選擇 PDF)在 package 就叫做 <tt
class="FILENAME">faq.en_US.ISO8859-1.pdf.tgz</tt>。</p>

<p>再舉個例子，中文版的 FAQ (格式選擇 PDF)在 package 就叫做 <tt
class="FILENAME">faq.zh_TW.Big5.pdf.tgz</tt>。</p>

<p>知道這點之後，就可以用下面指令來安裝中文版 FAQ 套件：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">pkg_add ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/packages/faq.zh_TW.Big5.pdf.tgz</kbd>
</pre>

<p>完成之後，可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_info</span>(1)</span></a>
來找出檔案裝在哪邊：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_info -f faq.zh_TW.Big5.pdf</kbd>
Information for faq.zh_TW.Big5.pdf:

Packing list:
        Package name: faq.zh_TW.Big5.pdf
        CWD to /usr/share/doc/zh_TW.Big5/books/faq
File: book.pdf
        CWD to .
File: +COMMENT (ignored)
File: +DESC (ignored)
</pre>

<p>如同您所看到的 <tt class="FILENAME">book.pdf</tt> 會被安裝到 <tt
class="FILENAME">/usr/share/doc/zh_TW.Big5/books/faq</tt> 內。</p>

<p>若不想用 package 方式安裝，那麼就需手動下載、解壓縮、複製到你想要擺放的位置去。</p>

<p>舉例，章節模式(split HTML)版的英文 FAQ (壓縮為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">bzip2</span>(1)</span></a>)會放在 <tt
class="FILENAME">doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</tt>
要下載、解壓的話，則要打：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">bzip2 -d book.html-split.tar.bz2</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">tar xvf book.html-split.tar</kbd>
</pre>

<p>這時你會看到一堆 <tt class="FILENAME">.html</tt> 的檔案， 主要的目錄檔為 <tt
class="FILENAME">index.html</tt>
內含主目錄及連結到其他文件。(若有需要的話，也可以複製或搬移這些檔案到同一目錄下)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAILING" name="MAILING"></a><b>2.3.</b> 哪裡有關於 FreeBSD 的郵遞論壇(mailing
lists)呢？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題，可以從 FreeBSD 使用手冊上面的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/eresources.html#ERESOURCES-MAIL"
 target="_top">郵遞論壇(mailing-lists)</a> 部分獲得答案。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEWSGROUPS" name="NEWSGROUPS"></a><b>2.4.</b> 有哪些可以使用的 FreeBSD
新聞群組(news groups)呢?</p>
</div>

<div class="ANSWER">
<p><b></b>這答案可以從 FreeBSD 使用手冊上面的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/eresources-news.html"
target="_top">新聞群組(newsgroups)</a> 部分獲得答案。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IRC" name="IRC"></a><b>2.5.</b> 有哪些 FreeBSD IRC (Internet Relay
Chat)頻道呢？</p>
</div>

<div class="ANSWER">
<p><b></b>有的，大部分的 IRC 主機都有 FreeBSD 聊天頻道：</p>

<ul>
<li>
<p><a href="http://www.efnet.org/index.php" target="_top">EFNet</a> 的 <tt
class="LITERAL">#FreeBSD</tt> 頻道是個 FreeBSD 論壇，
但可不適合那些想不勞而獲或者搬救兵用的。
這裡是聊天用的頻道，話題範圍甚至涉及『性、運動、核武』等，
請注意：我們已經警告過你了！本頻道可經由 <tt class="HOSTID">irc.chat.org</tt> 進入。</p>
</li>

<li>
<p><a href="http://www.efnet.org/index.php" target="_top">EFNet</a> 的 <tt
class="LITERAL">#FreeBSDhelp</tt> 頻道 乃是給 FreeBSD 使用者之間交流的， 來這裡提問會比
<tt class="LITERAL">#FreeBSD</tt> 好一些，當然請不要一股腦隨便亂問。</p>
</li>

<li>
<p><a href="http://www.dal.net/" target="_top">DALNET</a> 的 <tt
class="LITERAL">#FreeBSD</tt> 頻道，可由 <tt class="HOSTID">irc.dal.net</tt>(位於美國)及
<tt class="HOSTID">irc.eu.dal.net</tt>(位於歐洲)進入。</p>
</li>

<li>
<p><a href="http://www.dal.net/" target="_top">DALNET</a> 的 <tt
class="LITERAL">#FreeBSDHelp</tt> 頻道，可由 <tt
class="HOSTID">irc.dal.net</tt>(位於美國)及 <tt
class="HOSTID">irc.eu.dal.net</tt>(位於歐洲)進入。 本頻道的主持者有建立有關該頻道與
FreeBSD 的網頁，在 <a href="http://www.freebsdhelp.net/"
target="_top">http://www.freebsdhelp.net/</a>.</p>
</li>

<li>
<p><a href="http://www.undernet.org/" target="_top">UNDERNET</a> 的 <tt
class="LITERAL">#FreeBSD</tt> 頻道，可由 <tt
class="HOSTID">us.undernet.org</tt>(位於美國)及 <tt
class="HOSTID">eu.undernet.org</tt>(位於歐洲)進入。由於這是個輔助新手用的頻道，
請記得閱讀別人向你提及的連結或檔案。</p>
</li>

<li>
<p><a href="http://www.rusnet.org.ru/" target="_top">RUSNET</a> 的 <tt
class="LITERAL">#FreeBSD</tt> 頻道是俄語國家的 FreeBSD 使用者頻道。
這裡同時也是一般交流的討論好去處。</p>
</li>

<li>
<p><a href="http://freenode.net/irc_servers.shtml" target="_top">freebsd-gnome</a> 的 <tt
class="LITERAL">#FreeBSD</tt> 頻道，可由 <tt class="HOSTID">irc.freenode.net</tt> 進入，
這是 Gnome 的 FreeBSD 使用者頻道。</p>
</li>

<li>
<p><a href="http://bsdchat.com/" target="_top">IRCNet</a> 的 <tt
class="LITERAL">#BSDChat</tt> 頻道，可由 <tt class="HOSTID">irc.seed.net.tw</tt> 或 <tt
class="HOSTID">irc.csie.nctu.edu.tw</tt> 或 <tt class="HOSTID">irc.tw.freebsd.org</tt>
進入 這是台灣的 FreeBSD 使用者頻道。</p>
</li>
</ul>

<p>上述每個頻道都不一樣，風格迥異而各具特色，且並沒有相連，
因此，你得多方嘗試才能找到適合自己的頻道。而有些地方與所有的 IRC 文化類似，
就是請注意自己言行是否恰當，另外可能跟頻道內一些年輕/老一輩的，會有些代溝需要適應。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TRAINING" name="TRAINING"></a><b>2.6.</b> 可以從哪邊獲得 FreeBSD
的商業課程訓練及技術支援呢？</p>
</div>

<div class="ANSWER">
<p><b></b>DaemonNews 有專門提供 FreeBSD 的商業課程訓練及技術支援。 詳情請到 <a
href="http://www.bsdmall.com/" target="_top">BSD Mall</a> 察看，謝謝。</p>

<p>FreeBSD Mall 有提供商業化的 BSD 技術支援， 詳情請到 <a
href="http://www.freebsdmall.com/" target="_top">FreeBSD Mall</a> 察看，謝謝。</p>

<p>其他任何有提供課程訓練及技術支援的組織、單位，若也想列表於此的話， 請與 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">FreeBSD
文件計畫的郵遞論壇</a> 聯絡，謝謝。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="INSTALL" name="INSTALL"></a>Chapter 3 安裝</h1>

Nik Clayton

<div class="QANDASET">
<dl>
<dt>3.1. <a href="#FLOPPY-DOWNLOAD">若要用軟碟片開機來安裝 FreeBSD
的話，要下載哪些檔案呢？</a></dt>

<dt>3.2. <a href="#FLOPPY-IMAGE-TOO-LARGE">若磁片裝不下 image
檔的話，該怎麼辦呢？</a></dt>

<dt>3.3. <a href="#INSTALL-INSTRUCTIONS-LOCATION">可以在哪邊找到安裝 FreeBSD
的解說步驟呢？</a></dt>

<dt>3.4. <a href="#NEED-TO-RUN">要跑 FreeBSD 需要什麼的配備呢？</a></dt>

<dt>3.5. <a href="#FOUR-MEG-RAM-INSTALL">我電腦 RAM 只有 4MB 而已，可以裝 FreeBSD
嗎？</a></dt>

<dt>3.6. <a
href="#CUSTOM-BOOT-FLOPPY">要怎樣才能自行打造專用的開機、安裝磁片呢？</a></dt>

<dt>3.7. <a href="#MULTIBOOT">我電腦上可以有多重作業系統嗎？</a></dt>

<dt>3.8. <a href="#WINDOWS-COEXIST"><span class="TRADEMARK">Windows</span> 可以與 FreeBSD
共存於電腦上嗎？</a></dt>

<dt>3.9. <a href="#WIN95-DAMAGED-BOOT-MANAGER">嗚.. <span
class="TRADEMARK">Windows</span> 把我的多重開機管理員(boot
manager)拿掉了！要怎麼救回來呢？</a></dt>

<dt>3.10. <a href="#BOOT-ON-THINKPAD">IBM Thinkpad A系列、T系列或 X系列的筆記型電腦裝完
FreeBSD 之後重開機，就當了，該怎麼辦呢？</a></dt>

<dt>3.11. <a href="#INSTALL-BAD-BLOCKS">有壞軌的硬碟可以拿來裝 FreeBSD 嘛？</a></dt>

<dt>3.12. <a
href="#BOOT-FLOPPY-STRANGENESS">用安裝磁片開機時，卻有些怪現象發生！這是什麼情況呢？</a></dt>

<dt>3.13. <a
href="#NO-INSTALL-CDROM">用光碟開機片來安裝，但光碟開機後，安裝程式說找不到光碟...這是怎麼了？</a></dt>

<dt>3.14. <a href="#INSTALL-PLIP">我可以用 PLIP(Parallel Line IP)方式來安裝 FreeBSD
到筆記型電腦上嗎？</a></dt>

<dt>3.15. <a href="#GEOMETRY">該用哪一種硬碟設定參數(geometry)呢？</a></dt>

<dt>3.16. <a href="#DISK-DIVIDE-RESTRICTIONS">分割磁碟機時有任何限制嗎﹖</a></dt>

<dt>3.17. <a href="#DISK-MANAGER">可以使用哪些磁碟管理程式(disk managers)呢？</a></dt>

<dt>3.18. <a href="#MISSING-OS">FreeBSD 安裝完畢後重開機，但是電腦卻說 “<tt
class="ERRORNAME">Missing Operating System</tt>”這是怎麼了？</a></dt>

<dt>3.19. <a href="#STOP-AT-BOOT-MANAGER">為什麼機器上多重開機管理員(boot manager)出現了
<samp class="PROMPT">F?</samp> 這個選單畫面， 但卻不會自動跳過而繼續開機呢？</a></dt>

<dt>3.20. <a href="#NEED-COMPLETE-SOURCES">安裝 FreeBSD 時，需要安裝完整的 sources
嗎？</a></dt>

<dt>3.21. <a href="#NEED-KERNEL">需要重新 build kernel 嗎？</a></dt>

<dt>3.22. <a href="#PASSWORD-ENCRYPTION">密碼編碼該採用 DES、Blowfish 或 MD5
的哪一種？該怎麼設定呢？</a></dt>

<dt>3.23. <a href="#BOOT-FLOPPY-HANGS">為什麼開機磁片開到一半，就出現 <tt
class="LITERAL">Probing Devices...</tt> 的畫面訊息，然後就停住了？</a></dt>

<dt>3.24. <a href="#PANIC-ON-INSTALL-REBOOT">系統裝完並重開機後，為什麼卻出現 “<tt
class="ERRORNAME">panic: can't mount root</tt>”？</a></dt>

<dt>3.25. <a href="#MEMORY-LIMITS">記憶體最大限制為多少？</a></dt>

<dt>3.26. <a href="#FFS-LIMITS">檔案系統最大限制為多少？</a></dt>

<dt>3.27. <a href="#ARCHSW-READIN-FAILED-ERROR">為何在啟動新的 kernel 時，看到 “<tt
class="ERRORNAME">archsw.readin.failed</tt>” 錯誤訊息？</a></dt>

<dt>3.28. <a href="#SECURITY-PROFILES">“security profiles” 是指什麼？</a></dt>

<dt>3.29. <a href="#BOOT-ACPI">在開機時，選擇使用 ACPI
則在安裝過程就掛了，該怎麼辦？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FLOPPY-DOWNLOAD" name="FLOPPY-DOWNLOAD"></a><b>3.1.</b> 若要用軟碟片開機來安裝
FreeBSD 的話，要下載哪些檔案呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 4.X 的話，需要兩個 image 檔： <tt
class="FILENAME">floppies/kernel.flp</tt> 及 <tt
class="FILENAME">floppies/mfsroot.flp</tt>。image 檔必須用工具像是 <tt
class="COMMAND">fdimage</tt> 或 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dd</span>(1)</span></a> 來傳送到磁片上。
若是在 FreeBSD 5.3 (及之後版本)有重新規劃開機片架構，所以要抓的是 <tt
class="FILENAME">floppies/boot.flp</tt> 以及 <tt class="FILENAME">floppies/kern<tt
class="REPLACEABLE"><i>X</i></tt></tt> 檔案(目前 X 為 1 跟 2 兩個，加上 <tt
class="FILENAME">floppies/boot.flp</tt>，總共是 3 個檔案)。</p>

<p>若想自己下載 distributions 的話(比如以 <span class="TRADEMARK">MS-DOS</span>&reg;
檔案系統格式安裝)， 以下是建議要抓的 distributions ：</p>

<ul>
<li>
<p>base/ (4.X 版本則為 bin/)</p>
</li>

<li>
<p>manpages/</p>
</li>

<li>
<p>compat*/</p>
</li>

<li>
<p>doc/</p>
</li>

<li>
<p>src/ssys.*</p>
</li>
</ul>

<p>完整安裝步驟以及大部分的安裝問題，請參閱 FreeBSD 使用手冊的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install.html"
target="_top">安裝 FreeBSD</a> 章節</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FLOPPY-IMAGE-TOO-LARGE" name="FLOPPY-IMAGE-TOO-LARGE"></a><b>3.2.</b>
若磁片裝不下 image 檔的話，該怎麼辦呢？</p>
</div>

<div class="ANSWER">
<p><b></b>一張 3.5 英吋(1.44MB) 的磁碟片是可以裝上 1474560 bytes 的資料 ，而開機片的
image 檔案大小實際上也是 1474560 bytes。</p>

<p>在製作開機片時，常見錯誤有：</p>

<ul>
<li>
<p>使用 <acronym class="ACRONYM">FTP</acronym> 來下載檔案時， 未選擇 <span
class="emphasis"><i class="EMPHASIS">binary</i></span> 傳輸模式來下載。</p>

<p>有些 FTP client端程式，是預設將傳輸模式設定為 <span class="emphasis"><i
class="EMPHASIS">ascii</i></span> 模式，而且會修改接收到的檔案行尾字串為 client
端的作業系統方式 ，比如 newline(<span class="TRADEMARK">UNIX</span>格式) 到了作業系統為
<span class="TRADEMARK">Windows</span> 的 client 端會被改為 CR-LF(<span
class="TRADEMARK">MS-DOS</span>格式)， 這會使得 image
檔本身遭到修改而無法正常使用。因此，如果下載的 image 檔案大小若與 FTP
主機上面的檔案『<span class="emphasis"><i class="EMPHASIS">不一致</i></span>』
的話，請重新使用 binary 傳輸模式下載即可。</p>

<p>FTP 指令: 進入 FTP 之後，打 <span class="emphasis"><i
class="EMPHASIS">binary</i></span> 指令，即可切換到 binary 傳輸模式，然後再下載相關 image
檔案。</p>
</li>

<li>
<p>直接用 <span class="TRADEMARK">MS-DOS</span> 的 <tt class="COMMAND">copy</tt>
指令(或類似 的 GUI 程式、或是視窗上直接複製)來複製開機用的 image 檔到磁片上。</p>

<p>不可以用像是 <tt class="COMMAND">copy</tt> 這類程式直接將 image 檔複製到磁片上，因為
image 檔本身包含了完整的磁軌資料，所以不能單純用複製方式， 而必須使用低階工具程式(像是
<tt class="COMMAND">fdimage</tt> 或 <tt class="COMMAND">rawrite</tt>)， 以 “raw”
方式傳送到磁片上。(這部分可參閱 FreeBSD 使用手冊上的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install.html"
target="_top">安裝 FreeBSD</a>)</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INSTALL-INSTRUCTIONS-LOCATION"
name="INSTALL-INSTRUCTIONS-LOCATION"></a><b>3.3.</b> 可以在哪邊找到安裝 FreeBSD
的解說步驟呢？</p>
</div>

<div class="ANSWER">
<p><b></b>安裝步驟的解說，請參閱 FreeBSD 使用手冊上的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install.html"
target="_top">安裝 FreeBSD</a> 章節部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEED-TO-RUN" name="NEED-TO-RUN"></a><b>3.4.</b> 要跑 FreeBSD
需要什麼的配備呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 4.X 之前的版本，硬體需求為 386 或更高級的 PC ，記憶體(RAM)至少要 5 MB
或更多，硬碟空間至少要 60 MB 或更多。 不過，FreeBSD
『系統安裝程式』的記憶體(RAM)需求為至少 16 MB。</p>

<p>從 FreeBSD 5.X 起，硬體需求為 486 或更高級的 PC ，記憶體(RAM)至少要 24 MB
或更多，硬碟空間至少要 150 MB 或更多。</p>

<p>FreeBSD 的所有版本都可以只用低階的 MDA 規格顯示卡，不過...要跑 X11R6 視窗的話，
還是至少用 VGA 或更好規格的顯示卡來用吧。</p>

<p>這部分也可參閱 <a href="#HARDWARE">Chapter 4</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FOUR-MEG-RAM-INSTALL" name="FOUR-MEG-RAM-INSTALL"></a><b>3.5.</b> 我電腦 RAM
只有 4MB 而已，可以裝 FreeBSD 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>安裝 FreeBSD 4.X 的記憶體需求為至少 5 MB ，而 安裝 FreeBSD 5.X (含之後版本)
則是至少要 8 MB 。</p>

<p>在 5.X 之前的所有 FreeBSD 版本，都可以只用 4 MB 的記憶體來 <span class="emphasis"><i
class="EMPHASIS">『運作』</i></span>，不過，前面那節我們說過了『系統安裝程式』的話，
則無法只用 4 MB 的記憶體來執行。因此，你可以先在『系統安裝程式』這步驟之前，
先將記憶體加到 16 MB 以上，安裝完 FreeBSD 之後，就可以把多餘的記憶體拿下來。
或者是，先把要安裝的硬碟拿到有足夠記憶體的機器上先裝好， 然後再把硬碟放回原機器。</p>

<p>此外，只用 4 MB 的記憶體來運作的話，必須要自製 kernel(拿掉不必要的以及犧牲一些東西)。
也有人成功只用 2 MB 的記憶體以 FreeBSD 開機(雖然這樣的系統幾乎等於廢了..)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CUSTOM-BOOT-FLOPPY" name="CUSTOM-BOOT-FLOPPY"></a><b>3.6.</b>
要怎樣才能自行打造專用的開機、安裝磁片呢？</p>
</div>

<div class="ANSWER">
<p><b></b>目前，還沒有辦法<span class="emphasis"><i
class="EMPHASIS">『只』</i></span>自製專用的開機、安裝磁片。
必須透過自行打造完整作業系統的 release(發行)，這樣裡面才會包括自己的開機、安裝磁片。</p>

<p>若想自行打造、發行(release)一個完整的作業系統，請參閱這篇 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/releng/article.html"
target="_top">Release Engineering</a> 文章。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTIBOOT" name="MULTIBOOT"></a><b>3.7.</b> 我電腦上可以有多重作業系統嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以呀，請參閱 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/multi-os/index.html"
target="_top">多重作業系統</a> 這篇文章。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WINDOWS-COEXIST" name="WINDOWS-COEXIST"></a><b>3.8.</b> <span
class="TRADEMARK">Windows</span> 可以與 FreeBSD 共存於電腦上嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>先裝 <span class="TRADEMARK">Windows</span> 再裝 FreeBSD。 那麼 FreeBSD
多重開機管理員(boot manager)就會出現選單讓你選擇要以 <span
class="TRADEMARK">Windows</span> 或 FreeBSD 來開機。不過，若你是先裝 FreeBSD 再裝 <span
class="TRADEMARK">Windows</span> 的話， 那麼 <span class="TRADEMARK">Windows</span>
將會不問先宰，把 FreeBSD 的多重開機管理員(boot manager)蓋掉，
當你遇上這種情況時，請參考下一節說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WIN95-DAMAGED-BOOT-MANAGER" name="WIN95-DAMAGED-BOOT-MANAGER"></a><b>3.9.</b>
嗚.. <span class="TRADEMARK">Windows</span> 把我的多重開機管理員(boot
manager)拿掉了！要怎麼救回來呢？</p>
</div>

<div class="ANSWER">
<p><b></b>可以用以下三種方式之一，來救回你的 FreeBSD 多重開機管理員(boot manager)：</p>

<ul>
<li>
<p>可以從各 FreeBSD FTP 站的 <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/"
target="_top">/pub/FreeBSD/tools/</a> 找到 <tt class="FILENAME">bootinst.exe</tt> 及 <tt
class="FILENAME">boot.bin</tt> 這兩個檔， 以 binary 傳輸模式下載後，複製到磁片上，再用
DOS 開機片開機， 接著打類似下面的指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">&gt;</samp> <kbd class="USERINPUT">bootinst.exe boot.bin</kbd>
</pre>

<p>這樣，多重開機管理員(boot manager)就會重裝完畢了。</p>
</li>

<li>
<p>用 FreeBSD 開機片開機，然後選單那邊選 Custom installation(自訂安裝)， 再選
Partition，接著選擇你要裝多重開機管理員(boot manager)的硬碟(通常是第一顆)， 然後會出現
partition editor 的畫面，這時請不要做任何修改，直接按 W 儲存， 這時程式就會問是否要確定
Write ，最後出現 Boot Manager 選擇畫面， 記得要選 “Boot Manager”
，這樣就會重新將多重開機管理員(boot manager)
安裝到硬碟上。現在，就大功告成可以離開安裝選單並重開機了。</p>
</li>

<li>
<p>用 FreeBSD 開機片或是開機光碟開機，然後選單那邊選 “Fixit” ，或是以 Fixit
開機片或是光碟安裝的第二片(選擇 “live” filesystem 選項)然後就會進入 fixit shell
了，接著打下列指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">Fixit#</samp> <kbd class="USERINPUT">fdisk -B -b /boot/boot0 <tt
class="REPLACEABLE"><i>bootdevice</i></tt></kbd>
</pre>

<p>請將上面的 <tt class="REPLACEABLE"><i>bootdevice</i></tt> 修改為您實際的開機硬碟代號
比如 <tt class="DEVICENAME">ad0</tt> (第一顆 IDE 硬碟) ，或是<tt
class="DEVICENAME">ad4</tt> (first IDE disk on auxiliary controller), <tt
class="DEVICENAME">da0</tt> (第一顆 SCSI 硬碟)等等。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOT-ON-THINKPAD" name="BOOT-ON-THINKPAD"></a><b>3.10.</b> IBM Thinkpad
A系列、T系列或 X系列的筆記型電腦裝完 FreeBSD 之後重開機，就當了，該怎麼辦呢？</p>
</div>

<div class="ANSWER">
<p><b></b>(本問題主要是發生在 2000 ~ 2001 四月間時)這些 IBM 機器上的 BIOS
早期版本有個臭蟲(bug)會把 FreeBSD 分割區誤認為是 FAT 格式分割區，然後當 BIOS 試著偵測
FreeBSD 分割區時，就會當了。</p>

<p>根據 IBM 方面的說法<a id="AEN736" name="AEN736" href="#FTN.AEN736"><span
class="footnote">[1]</span></a> ，以下型號/BIOS版本的機種，已經都有修正：</p>

<div class="INFORMALTABLE"><a id="AEN739" name="AEN739"></a>
<table border="0" frame="void" width="100%" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>型號</th>
<th>BIOS 版本</th>
</tr>
</thead>

<tbody>
<tr>
<td>T20</td>
<td>IYET49WW(含之後)</td>
</tr>

<tr>
<td>T21</td>
<td>KZET22WW(含之後)</td>
</tr>

<tr>
<td>A20p</td>
<td>IVET62WW(含之後)</td>
</tr>

<tr>
<td>A20m</td>
<td>IWET54WW(含之後)</td>
</tr>

<tr>
<td>A21p</td>
<td>KYET27WW(含之後)</td>
</tr>

<tr>
<td>A21m</td>
<td>KXET24WW(含之後)</td>
</tr>

<tr>
<td>A21e</td>
<td>KUET30WW</td>
</tr>
</tbody>
</table>
</div>

<p>這些後期的 IBM BIOS 修訂版大多已經修正此一臭蟲。Jacques Vidrine 寫給 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile" target="_top">FreeBSD
laptop computer mailing list</a> 的 <a
href="http://docs.FreeBSD.org/cgi/mid.cgi?20010427133759.A71732" target="_top">這封信</a>
上面說明了若你新的 IBM 筆記型電腦無法順利以 FreeBSD 開機的解法步驟 (假設可以升級或降級
BIOS 版本的話)。</p>

<p>如果機器用的是較古早版本的 BIOS，而且不適合更新 BIOS
的話，那麼以下我們會介紹暫時解法， 教你如何修改 FreeBSD 分割區所使用的 ID
，並安裝相關修補程式。</p>

<p>First, you will need to restore the machine to a state where it can get through its
self-test screen. Doing this requires powering up the machine without letting it find a
FreeBSD partition on its primary disk. One way is to remove the hard disk and temporarily
move it to an older ThinkPad (such as a ThinkPad 600) or a desktop PC with an appropriate
conversion cable. Once it is there, you can delete the FreeBSD partition and move the
hard disk back. The ThinkPad should now be in a bootable state again.</p>

<p>With the machine functional again, you can use the workaround procedure described here
to get a working FreeBSD installation.</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>從 <a href="http://people.FreeBSD.org/~bmah/ThinkPad/"
target="_top">http://people.FreeBSD.org/~bmah/ThinkPad/</a> 來下載 <tt
class="FILENAME">boot1</tt> 及 <tt class="FILENAME">boot2</tt> 這兩個檔。
把這兩個檔案放在磁片、光碟或其他硬碟上。</p>
</li>

<li class="STEP">
<p>以一般安裝 FreeBSD 裝到 ThinkPad 上，記得 <span class="emphasis"><i
class="EMPHASIS">『不要用』</i></span> <tt class="LITERAL">Dangerously Dedicated</tt>
模式。 此外，<span class="emphasis"><i class="EMPHASIS">『不要』</i></span>
在完成安裝之後就重開機。</p>
</li>

<li class="STEP">
<p>進入 shell：(按 <b class="KEYCAP">ALT</b>+<b class="KEYCAP">F4</b>) 切換到“Emergency
Holographic Shell” 或是選單上面選擇 “fixit” shell。</p>
</li>

<li class="STEP">
<p>用 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fdisk</span>(8)</span></a> 把 FreeBSD
分割區 ID 由 <tt class="LITERAL">165</tt> 改為 <tt
class="LITERAL">166</tt>(OpenBSD所使用的ID)。</p>
</li>

<li class="STEP">
<p>把剛剛提的 <tt class="FILENAME">boot1</tt> 跟 <tt class="FILENAME">boot2</tt>
這兩個檔案放到目前的硬碟檔案系統上。</p>
</li>

<li class="STEP">
<p>以 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a> 把 <tt
class="FILENAME">boot1</tt> 及 <tt class="FILENAME">boot2</tt> 存到你的 FreeBSD slice
上面。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">disklabel -B -b boot1 -s boot2 ad0s<tt
class="REPLACEABLE"><i>n</i></tt></kbd>
</pre>

<p><tt class="REPLACEABLE"><i>「n」</i></tt> 是你裝 FreeBSD 的 slice， 請將 <tt
class="REPLACEABLE"><i>「n」</i></tt> 改為符合你系統現況的 slice。</p>
</li>

<li class="STEP">
<p>重開機，在 boot prompt 會看到有 <tt class="LITERAL">OpenBSD</tt> 的選項，
選它，這樣就會以 FreeBSD 開機。</p>
</li>
</ol>
</div>

<p>另外，至於如何讓 OpenBSD 及 FreeBSD 並存在同一台 IBM ThinkPad 上...
這個問題就交給各位看倌們去嘗試了 :p</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INSTALL-BAD-BLOCKS" name="INSTALL-BAD-BLOCKS"></a><b>3.11.</b>
有壞軌的硬碟可以拿來裝 FreeBSD 嘛？</p>
</div>

<div class="ANSWER">
<p><b></b>(如果很堅持的話)也是可以，不過這想法顯然不太明智。:(</p>

<p>如果在一般較新的 IDE 硬碟上看到有壞軌，很有可能代表：這顆硬碟即將掛點了。
(因為目前所有較新的 IDE 硬碟，內部都有自動 remapping 壞軌的能力。
如果看到有壞軌，則表示它內部自動 remapping 功能失效，無法處理壞軌，
也就是說這顆硬碟已經是嚴重損壞程度了。)我們建議買顆新硬碟比較乾脆些唷。</p>

<p>如果是 SCSI 硬碟有壞軌的話，請試著參考這個 <a href="#AWRE">解法</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOT-FLOPPY-STRANGENESS" name="BOOT-FLOPPY-STRANGENESS"></a><b>3.12.</b>
用安裝磁片開機時，卻有些怪現象發生！這是什麼情況呢？</p>
</div>

<div class="ANSWER">
<p><b></b>若看到一些怪異現象，像是開機片開機開到一半就當了，磁碟機完全沒任何動作、
或是不斷反覆重開機，請先檢查以下幾個線索：</p>

<ol type="1">
<li>
<p>請確定是否為全新、沒有磁軌錯誤的磁片？
(最好使用新買的，而非雜誌、書本附贈的，甚至還放在床底下三年了...=_="")</p>
</li>

<li>
<p>請確定是否有用 binary(或image)傳輸模式來下載 image 檔？
(不用覺得不好意思，即使是我們也曾意外以 ASCII 傳輸模式來下載 binary 檔案！)</p>
</li>

<li>
<p>若你是 <span class="TRADEMARK">Windows</span> 95/98/ME/NT/2000/XP/2003
來下載、製作開機磁片的話， 請確定是否有在 DOS 模式使用 <tt class="COMMAND">fdimage</tt>
或 <tt class="COMMAND">rawrite</tt> 這兩個工具程式？剛講的這些作業系統，
都會影響程式去直接寫入硬體，像是製作開機片之類的動作。 有時候，在 GUI 介面上的 DOS shell
也可能會發生這樣的問題。</p>
</li>
</ol>

<p>此外，直接透過 <span class="TRADEMARK">Netscape</span>&reg; 瀏覽器下載 image
檔的話，也有類似現象。 所以，如果可以的話，請改用其他可以調整設定的 FTP
client端程式來進行下載。 (當然，要記得調 binary 傳輸模式)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NO-INSTALL-CDROM" name="NO-INSTALL-CDROM"></a><b>3.13.</b>
用光碟開機片來安裝，但光碟開機後，安裝程式說找不到光碟...這是怎麼了？</p>
</div>

<div class="ANSWER">
<p><b></b>通常問題在於光碟機設定錯誤。目前很多電腦的出廠標準配備都有光碟機，並且
會預先設定為 IDE 通道上面 Secondary 的 Slave 設備，而 Secondary 上面的 卻沒有 Master
設備。以 ATAPI 的規格而言，這是錯誤的設定，然而 <span class="TRADEMARK">Windows</span>
的作法 是不理會這些規格上的設定問題，而且開機時 BIOS 偵測也會略過這點。 這也就是為什麼
BIOS 可以看到光碟，並且可用光碟開機，但 FreeBSD 無法正常抓到光碟以順利進行安裝。</p>

<p>解法：重新設定系統，讓光碟成為它所連接那條 IDE 通道的 Master， 或者只有一條 IDE
通道的話，那就讓光碟機成為 Slave ，當然該 IDE 通道上至少要有 Master 設備。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INSTALL-PLIP" name="INSTALL-PLIP"></a><b>3.14.</b> 我可以用 PLIP(Parallel Line
IP)方式來安裝 FreeBSD 到筆記型電腦上嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以，用一條普通的 Laplink 線就可以囉。若有這方面需求的話，請參閱 FreeBSD
使用手冊中的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/network-plip.html"
target="_top">PLIP 章節</a> 的細部設定</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="GEOMETRY" name="GEOMETRY"></a><b>3.15.</b>
該用哪一種硬碟設定參數(geometry)呢？</p>
</div>

<div class="ANSWER">
<p><b></b></p>

<p><b>Note:</b> 這裡的『硬碟設定參數(geometry)』，指的是硬碟上的
「cylinders」、「heads」、「sectors/track」 這三個設定參數。
接下來的文章內，為了方便介紹，將簡稱為『C/H/S』。 這些設定參數是讓 PC 上的 BIOS
能順利地正常判別硬碟， 與硬碟本身讀寫的重要因素。</p>

<br />
<br />
<p>對剛接手的系統管理者新手而言，這些設定參數常造成一些困擾。 首先，SCSI 硬碟上的 <span
class="emphasis"><i class="EMPHASIS">physical</i></span> geometry 跟 FreeBSD 上的 disk
blocks 是完全無關的。事實上， 就硬碟上磁區密度的變化而言，並沒有所謂『physical
geometry』這種東西。 硬碟製造商所說的『physical geometry』通常是指：
硬碟上所使用最小空間來存放資料的設定參數(geometry)。 以 IDE 硬碟而言，FreeBSD
用以存取硬碟設定的方式是 C/H/S ， 然而，目前市面上的硬碟早就在內部運作時，就自動轉換為
block 方式 了。</p>

<p>真正關鍵的地方，其實是在於 『<span class="emphasis"><i
class="EMPHASIS">logical</i></span> geometry』— 這是 BIOS
偵測硬碟時所得到的設定，並且用來決定硬碟存取方式。 由於 FreeBSD 是採用 BIOS
的偵測設定值，所以如何來讓 BIOS 偵測到的設定值保持正確，
是十分重要。尤其是同一顆硬碟上有多個作業系統的情況，
它們都必須採用一致的硬碟設定參數(geometry)，
否則就會有開機進不去作業系統的嚴重問題了。</p>

<p>以 SCSI 硬碟而言，硬碟設定參數(geometry)是由 SCSI 卡上的 extended
translation(通常指的是有標示 “support &gt;1GB”(支援 1GB 以上容量，或類似名詞)
支援與否來作決定。 如果不支援，那麼就會採用 <tt class="REPLACEABLE"><i>N</i></tt>
cylinders、 64 heads、 32 sectors/track 作為硬碟設定參數(geometry)，這裡講的『<tt
class="REPLACEABLE"><i>N</i></tt>』 是指硬碟的容量(單位：MB)。舉個例子來說，一顆 2GB
硬碟應該是 2048 cylinders、64 heads、32 sectors/track。</p>

<p>如果該 SCSI 有支援使用 extended translation 的話， (通常這個方式在 <span
class="TRADEMARK">MS-DOS</span> 使用上有某些限制)，並且硬碟容量大於 1GB，
那麼硬碟設定參數(geometry)就會使用像是： M cylinders、255 heads、每磁軌 63
sectors(請注意：不是『64』哦)， 這裡講的『<tt
class="LITERAL">M</tt>』是指硬碟的容量(單位：MB)再除以 7.844238
所得出的數值喔！所以，這個例子的話，同樣是 2GB 硬碟應該是 261 cylinders、255
heads、每磁軌 63 sectors。</p>

<p>若對上面講的不瞭解，或是 FreeBSD 在安裝時所偵測到的硬碟設定參數(geometry)
有問題的話，最簡單的解法通常是在硬碟上建立一塊小小的 DOS 分割區(partition)。
這樣一來，就可以偵測到正確的硬碟設定參數了，而且， 如果不想繼續留著那小塊 DOS
分割區的話，可以隨時用 partition editor
來拿掉它。或者把它留著當作網路卡驅動程式使用，或隨你高興怎麼用它。</p>

<p>此外呢，有個免費好用的工具程式叫做『<tt class="FILENAME">pfdisk.exe</tt>』，
這個程式放在各 FreeBSD FTP 站或光碟的 <tt class="FILENAME">tools</tt> 目錄下，
它可以用來找出硬碟上其他作業系統所使用的硬碟設定參數， 然後就可以在 partition editor
內輸入剛剛找到的那些設定參數就可以了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISK-DIVIDE-RESTRICTIONS" name="DISK-DIVIDE-RESTRICTIONS"></a><b>3.16.</b>
分割磁碟機時有任何限制嗎﹖</p>
</div>

<div class="ANSWER">
<p><b></b>有，你必須確認你的 root 分割區是在 1024 cylinders 之內，讓 BIOS
可以從其中啟動核心。(注意：這是 PC 的 BIOS 功能限制，而不 是 FreeBSD 的)</p>

<p>以 SCSI 硬碟而言，通常是把 <tt class="LITERAL">root</tt> (<tt class="FILENAME">/</tt>)
分割區放到硬碟最前面的 1024MB (如果有支援 extended translation 的話， 那麼是最前面的
4096MB — 這點請參考上一小節)。而 IDE 硬碟的話，相對應的則是 504MB。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISK-MANAGER" name="DISK-MANAGER"></a><b>3.17.</b>
可以使用哪些磁碟管理程式(disk managers)呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 可以用 Ontrack Disk Manager 並且運作正常， 至於其他的 disk manager
則不在正式支援之列。</p>

<p>若整顆硬碟只裝 FreeBSD ，那麼就不用再裝 disk manager 了。 只要把硬碟設定為 BIOS
所能抓到的最大空間，那麼 FreeBSD 就可算出實際上可使用的空間了。 如果，正在使用的是古早
MFM 控制卡的舊式硬碟， 那麼就需要在 FreeBSD內作 cylinders 相關設定了。</p>

<p>如果想在磁碟上使用 FreeBSD 和另外的作業系統，也可以不裝 disk manager， 只要確定
FreeBSD 的啟動分割區跟其他作業系統的 slice 都位於開始的 1024 cylinders
內就可以了。如果你相當地高明的話，一個 20MB 的啟動分割區應該就夠用了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MISSING-OS" name="MISSING-OS"></a><b>3.18.</b> FreeBSD
安裝完畢後重開機，但是電腦卻說 “<tt class="ERRORNAME">Missing Operating
System</tt>”這是怎麼了？</p>
</div>

<div class="ANSWER">
<p><b></b>通常原因出在 FreeBSD 及 DOS 或其他作業系統在硬碟的 <a
href="#GEOMETRY">設定參數(geometry)</a>上的規劃有相衝。解法是重裝，但是請照
上述的相關章節步驟來做。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STOP-AT-BOOT-MANAGER" name="STOP-AT-BOOT-MANAGER"></a><b>3.19.</b>
為什麼機器上多重開機管理員(boot manager)出現了 <samp class="PROMPT">F?</samp>
這個選單畫面， 但卻不會自動跳過而繼續開機呢？</p>
</div>

<div class="ANSWER">
<p><b></b>這個症狀是本文上面所提的另外一個問題了，原因在於 BIOS 上跟 FreeBSD
上面兩邊的硬碟的 <a href="#GEOMETRY">設定參數(geometry)</a> 並不一致。 若你硬碟或 BIOS
支援 cylinder translation (通常會被標為 “support &gt;1GB(支援 1 GB以上容量)”的話，
試試看更改相關設定，並重裝 FreeBSD。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEED-COMPLETE-SOURCES" name="NEED-COMPLETE-SOURCES"></a><b>3.20.</b> 安裝
FreeBSD 時，需要安裝完整的 sources 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>一般來說，這是用不著的。然而，我們強烈建議您的 source 至少要裝 <tt
class="LITERAL">base</tt>(包含了本文中所提的一些檔案)、以及 <tt class="LITERAL">sys</tt>
(kernel 的 source 檔)。 雖然，作業系統本身運是不需要裝 source 檔，但是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a> 這個
kernel設定程式則需要 src 。 若沒裝 kernel 的 source 檔，仍然可以用其他地方透過 NFS
掛載的唯讀檔案系統， 來編譯程式。 但由於 kernel-source 本身的限制，我們建議不要直接 mount
在 <tt class="FILENAME">/usr/src</tt>， 最好是用 symbolic link(參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ln&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ln</span>(1)</span></a>)
將掛載的路徑，設定連結到<tt class="FILENAME">/usr/src</tt> 目錄。</p>

<p>在機器上直接裝有 source 並且瞭解相關編譯過程，這樣子日後升級 FreeBSD
會來得方便多。</p>

<p>若忘了裝相關 source 的話，可以事後用 <tt class="COMMAND">sysinstalll</tt> (FreeBSD 6.X
之前為 <tt class="COMMAND">/stand/sysinstall</tt>) 來補裝，選單：Configure →
Distributions → src。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEED-KERNEL" name="NEED-KERNEL"></a><b>3.21.</b> 需要重新 build kernel 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>在很久很久以前，原本重新 build kernel 在 FreeBSD 安裝過程中，
是絕對必需的步驟之一。但目前早就不用這麼麻煩了， 目前主要常見的版本都使用更友善的 kernel
設定指令。 FreeBSD 4.X(含之前版本)，在 FreeBSD 啟動提示號(boot:)時，使用 <code
class="OPTION">"-c"</code> flag 就會進入設定畫面，來對 kernel 作常見的 ISA 卡細節設定。
而 FreeBSD 5.X(含之後版本)的話，則是以更具彈性的 "hints" 設定方式。</p>

<p>如果想更節省 RAM 的使用、縮短開機流程，那麼建議：新的 kernel
設定檔只要包含你需要的驅動程式， 然後重新編譯、安裝 kernel
並重開機。然而呢，這點對大多數的系統來說， 這不一定是必要的。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PASSWORD-ENCRYPTION" name="PASSWORD-ENCRYPTION"></a><b>3.22.</b> 密碼編碼該採用
DES、Blowfish 或 MD5 的哪一種？該怎麼設定呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 預設的密碼編碼方式是採 <span class="emphasis"><i
class="EMPHASIS">MD5</i></span>。 就密碼編碼方式而言，MD5 方式一般被視為比傳統 <span
class="TRADEMARK">UNIX</span> 的 <span class="emphasis"><i
class="EMPHASIS">DES</i></span> 方式較為安全。
然而，若有需要在使用舊環境(較不安全的密碼編碼方式的)，DES 密碼編碼方式一樣可以使用。
(若使用 sysinstall 時有選擇 “crypto” 套件，或是從 source 內編譯安裝) 有裝 crypto
的話，crypto libraries 也支援更安全的 Blowfish 編碼方式。</p>

<p>密碼編碼的方式是由 <tt class="FILENAME">/etc/login.conf</tt> 內的 “passwd_format”
欄位來決定的。該欄設定值，(若有裝 crypto 的話)可以是 “des” 或 “blf” 或是原本的
“md5”。 詳情請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">login.conf</span>(5)</span></a>
說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOT-FLOPPY-HANGS" name="BOOT-FLOPPY-HANGS"></a><b>3.23.</b>
為什麼開機磁片開到一半，就出現 <tt class="LITERAL">Probing Devices...</tt>
的畫面訊息，然後就停住了？</p>
</div>

<div class="ANSWER">
<p><b></b>若機器上有裝 IDE 介面的 Iomega <span class="TRADEMARK">Zip</span>&reg; 或是
<span class="TRADEMARK">Jaz</span>&reg; 的話，
因為這些設備可能跟開機片有相衝，請先拿掉這些設備再重試。
當整個作業系統裝好後，就可以把這些設備接回去使用了。 希望這點在日後 release 的 FreeBSD
可以獲得徹底解決。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PANIC-ON-INSTALL-REBOOT" name="PANIC-ON-INSTALL-REBOOT"></a><b>3.24.</b>
系統裝完並重開機後，為什麼卻出現 “<tt class="ERRORNAME">panic: can't mount
root</tt>”？</p>
</div>

<div class="ANSWER">
<p><b></b>這個錯誤是因為啟動磁區跟 kernel 兩者對磁碟裝置的認知不相同。
通常這問題會發生在有兩顆 IDE 硬碟的系統，比如：硬碟 Jumper 設定為 Master、 或是兩條 IDE
排線各只連接一顆硬碟，但是裝 FreeBSD 那顆開機硬碟， 卻接在 Secondary IDE 排線上。
如此一來，在開機時當 kernel 指定第二個 IDE 控制器的第一個磁碟機 ad2，
啟動磁區卻認為系統是裝在 ad0(BIOS偵測的第二顆硬碟)！ 偵測完裝置後，kernel
試著把啟動磁區所認為的開機硬碟(ad0) mount 起來，事實上應該是 ad2
才對，所以就會出現上面的錯誤訊息了。</p>

<p>解法如下，請選擇其中一種方式就好：</p>

<ol type="1">
<li>
<p>重開機並在出現『<tt class="LITERAL">Booting kernel in 10 seconds; hit [Enter] to
interrupt</tt>』 提示的時候，按下 <b class="KEYCAP">Enter</b>鍵。 這樣子就會進入 boot
loader 畫面：</p>

<p>請輸入 <tt class="LITERAL">set root_disk_unit="<tt
class="REPLACEABLE"><i>disk_number</i></tt>"</tt> 這裡的『<tt
class="REPLACEABLE"><i>disk_number</i></tt>』請依據情況換成相關代號： 若 FreeBSD
硬碟是設定裝在 Primary IDE 接線的 Master，就設為 0 ； 若是 Primary IDE 接線的
Slave，就設為 1； 若是 Secondary IDE 接線的 Master，就設為 2； 若是 Secondary IDE 接線的
Slave，就設為 3。</p>

<p>接著請再輸入 <tt class="LITERAL">boot</tt>，然後系統應該就可以正常開機了。</p>

<p>若要每次開機都自動設定，而不必每次都打一次，那麼就在 <tt
class="FILENAME">/boot/loader.conf.local</tt> 檔案內加上 <tt
class="LITERAL">root_disk_unit="<tt class="REPLACEABLE"><i>disk_number</i></tt>"</tt>
這行 (當然，『<tt class="REPLACEABLE"><i>disk_number</i></tt>』要改成相關代號)</p>
</li>

<li>
<p>把 FreeBSD 硬碟改接到 Primary IDE 接線上，如此一來就可順利使用。</p>
</li>
</ol>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MEMORY-LIMITS" name="MEMORY-LIMITS"></a><b>3.25.</b> 記憶體最大限制為多少？</p>
</div>

<div class="ANSWER">
<p><b></b>一般 <span class="TRADEMARK">i386</span> 機器上最多可支援到 4 GB(gigabytes)。
而自 FreeBSD 4.9 及 5.1 可以開始使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pae</span>(4)</span></a>
來支援更多的記憶體。 有關這點，需要在 kernel 設定檔內加入下列內容並重新編譯
kernel，才能使用 PAE。</p>

<pre class="PROGRAMLISTING">
options       PAE
</pre>

<p>FreeBSD 在 pc98 機器上最多則只支援 4 GB ，而且不能使用 PAE。 在 Alpha
機器上，記憶體限制方面要視所使用的型號支援程度而定，這點請參閱 所使用的 Alpha
硬體規格表。至於其他架構的 FreeBSD 理論上最多可使用的記憶體，有較多的限制。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FFS-LIMITS" name="FFS-LIMITS"></a><b>3.26.</b> 檔案系統最大限制為多少？</p>
</div>

<div class="ANSWER">
<p><b></b>就檔案系統方面，理論上的限制是最多到 8TB(2G blocks)， 或是使用內定 8K block
大小時，限制是 16TB。 實際上，目前軟體使用上限制只能用到 1 TB，
然而如果是有另行改造過檔案系統，那麼達到 4TB 的目標是可行的 (也有人成功過)。</p>

<p>單一檔案的大小方面，假如 block 以 4K 作規劃的話， 則最大是趨近 1G blocks(4TB)。</p>

<div class="TABLE"><a id="AEN1003" name="AEN1003"></a>
<p><b>Table 3-1. 檔案大小的最大限制</b></p>

<table border="1" class="CALSTABLE">
<col />
<col />
<col />
<thead>
<tr>
<th>檔案系統 block 大小</th>
<th>works</th>
<th>should work</th>
</tr>
</thead>

<tbody>
<tr>
<td>4K</td>
<td>4T-1</td>
<td>&gt;4T</td>
</tr>

<tr>
<td>8K</td>
<td>&gt;32G</td>
<td>32T-1</td>
</tr>

<tr>
<td>16K</td>
<td>&gt;128G</td>
<td>32T-1</td>
</tr>

<tr>
<td>32K</td>
<td>&gt;512G</td>
<td>64T-1</td>
</tr>

<tr>
<td>64K</td>
<td>&gt;2048G</td>
<td>128T-1</td>
</tr>
</tbody>
</table>
</div>

<p>When the fs block size is 4K, triple indirect blocks work and everything should be
limited by the maximum fs block number that can be represented using triple indirect
blocks (approx. 1K^3 + 1K^2 + 1K), but everything is limited by a (wrong) limit of 1G-1
on fs block numbers. The limit on fs block numbers should be 2G-1. There are some bugs
for fs block numbers near 2G-1, but such block numbers are unreachable when the fs block
size is 4K.</p>

<p>block 大小如果是 8K 或更大，檔案系統 block 數目會被限制在 2G-1 ，但實際上應該說限制是
1G-1 才對，因為採用 2G-1 block 的檔案系統會導致一些問題。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ARCHSW-READIN-FAILED-ERROR" name="ARCHSW-READIN-FAILED-ERROR"></a><b>3.27.</b>
為何在啟動新的 kernel 時，看到 “<tt class="ERRORNAME">archsw.readin.failed</tt>”
錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>原因出在你的 world 以及 kernel 並不同步，舉例：kernel 用 4.11， 而 world 卻是
4.8，這樣是會有問題的。 請再次確認，是否有以 <tt class="COMMAND">make buildworld</tt> 及
<tt class="COMMAND">make buildkernel</tt> 來正常更新 kernel。</p>

<p>在啟動 loader 之前，會看到 "|" 這個符號在轉動，這時可以按任何鍵中斷，
然後再指定要載入哪個 kernel 來開機。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SECURITY-PROFILES" name="SECURITY-PROFILES"></a><b>3.28.</b> “security
profiles” 是指什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>A “security profile” is a set of configuration options that attempts to
achieve the desired ratio of security to convenience by enabling and disabling certain
programs and other settings. For full details, see the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install-post.html#SECURITYPROFILE"
 target="_top">Security Profile</a> section of the Handbook's <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install-post.html"
target="_top">post-install chapter</a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOT-ACPI" name="BOOT-ACPI"></a><b>3.29.</b> 在開機時，選擇使用 ACPI
則在安裝過程就掛了，該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>試試看關閉 ACPI support。 當在載入 bootloader時，按下空白鍵。 系統會顯示</p>

<pre class="SCREEN">
OK
</pre>

這時輸入 

<pre class="SCREEN">
<kbd class="USERINPUT">unset acpi_load</kbd>
</pre>

接著打 

<pre class="SCREEN">
<kbd class="USERINPUT">boot</kbd>
</pre>

以繼續開機，這樣子應該就可以了。<br />
<br />
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="HARDWARE" name="HARDWARE"></a>Chapter 4 硬體支援方面</h1>

<div class="SECT1">
<h2 class="SECT1"><a id="COMPATIBILITY-GENERAL" name="COMPATIBILITY-GENERAL">4.1
一般問題</a></h2>

<div class="QANDASET">
<dl>
<dt>4.1.1. <a href="#WHICH-HARDWARE-TO-GET">我想組裝自己的 FreeBSD
機器，有哪些型號、品牌、規格是支援程度最好的呢？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WHICH-HARDWARE-TO-GET" name="WHICH-HARDWARE-TO-GET"></a><b>4.1.1.</b>
我想組裝自己的 FreeBSD 機器，有哪些型號、品牌、規格是支援程度最好的呢？</p>
</div>

<div class="ANSWER">
<p><b></b>有關這點，在 FreeBSD 討論區上時常有人討論。雖然硬體汰換速度很快，
可能隨時有新規格、新產品出現，然而這些都在我們意料之中， 我們 <span class="emphasis"><i
class="EMPHASIS">仍然</i></span> 強烈建議：在詢問有關最新規格硬體的支援問題之前，
請先參閱 FreeBSD <a href="http://www.FreeBSD.org/releases/6.0R/hardware.html"
target="_top">6.0</a> 或 <a href="http://www.FreeBSD.org/releases/5.4R/hardware.html"
target="_top">5.4</a>的支援硬體列表， 或是搜尋<a
href="http://www.FreeBSD.org/search/#mailinglists" target="_top">討論區的舊文章</a>，
也許，上週才剛恰巧有人討論過你所要問的硬體。</p>

<p>如果要找有關筆記型電腦方面，請到 FreeBSD-mobile 筆記型電腦討論區。 不然，就到
FreeBSD-questions 討論區，或是特定硬體規格(比如 pc98, Alpha)的專屬討論區吧。</p>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-PROCESSORS" name="COMPATIBILITY-PROCESSORS">4.2
硬體架構及 CPU</a></h2>

<div class="QANDASET">
<dl>
<dt>4.2.1. <a href="#ARCHITECTURES">FreeBSD 有支援 x86 之外的硬體架構平台嗎？</a></dt>

<dt>4.2.2. <a href="#SMP-SUPPORT">FreeBSD 支援 CPU 對稱多工處理(SMP, Symmetric
Multiprocessing)嗎？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ARCHITECTURES" name="ARCHITECTURES"></a><b>4.2.1.</b> FreeBSD 有支援 x86
之外的硬體架構平台嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>有的，FreeBSD 目前可以在 Intel x86 and DEC (現在的 HP-Compaq) Alpha
架構上面運作。自 FreeBSD 5.0 之後的版本，則 可支援 AMD64 及 Intel EM64T, IA-64 以及 <span
class="TRADEMARK">Sparc64</span>&reg; 架構。 未來平台支援上還會有 <span
class="TRADEMARK">MIPS</span>&reg; 及 <span
class="TRADEMARK">PowerPC</span>&reg;，細節請分別參閱 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mips" target="_top">FreeBSD MIPS
porting mailing list</a> 或 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ppc" target="_top">FreeBSD
PowerPC porting mailing list</a>。 一般而言，新的硬體架構平台方面，都是到 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-platforms" target="_top">FreeBSD
non-Intel platforms porting mailing list</a> 討論。</p>

<p>若你機器不是以上架構或是比較奇特的，而想立刻試試看 BSD 的魔力， 我們建議你可以考慮使用
<a href="http://www.netbsd.org/" target="_top">NetBSD</a> 或 <a
href="http://www.openbsd.org/" target="_top">OpenBSD</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SMP-SUPPORT" name="SMP-SUPPORT"></a><b>4.2.2.</b> FreeBSD 支援 CPU
對稱多工處理(SMP, Symmetric Multiprocessing)嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>有的。 SMP 在 FreeBSD 5.2 預設的 kernel(<span class="emphasis"><i
class="EMPHASIS">GENERIC</i></span>)已有啟動。</p>

<p>在 FreeBSD 5.3 要 release 時，SMP相關設定也是預設就有啟動。
然而，在一些較新型的機器(像是 emt64)上卻又有些問題，
所以還是決定在相關問題、安全議題未獲解決前，先關閉 SMP 的相關啟動。 這點，正是 FreeBSD
5.4 所優先考慮的方向。</p>

<p>FreeBSD 4.X 的話，預設的 kernel 並沒有啟動 SMP， 因此，必須要把 options SMP 加入
kernel 設定檔並重新編譯才能啟動。 至於還有哪些相關設定要放入 kernel 設定檔，請參閱<tt
class="FILENAME">/sys/i386/conf/LINT</tt>。</p>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-DRIVES" name="COMPATIBILITY-DRIVES">4.3
硬碟、磁帶機以及光碟、DVD、燒錄機</a></h2>

<div class="QANDASET">
<dl>
<dt>4.3.1. <a href="#SUPPORTED-HARD-DRIVES">FreeBSD 可支援哪些種類的硬碟呢？</a></dt>

<dt>4.3.2. <a href="#SUPPORTED-SCSI-CONTROLLERS">支援哪些 SCSI 卡、設備呢？</a></dt>

<dt>4.3.3. <a href="#TAPE-SUPPORT">支援哪些磁帶機呢？</a></dt>

<dt>4.3.4. <a href="#TAPE-CHANGER-SUPPORT">FreeBSD 支援磁帶自動換帶機嗎？</a></dt>

<dt>4.3.5. <a href="#SUPPORTED-CDROM-DRIVES">FreeBSD 可支援哪些種類的光碟機呢？</a></dt>

<dt>4.3.6. <a href="#SUPPORTED-CDRW-DRIVES">FreeBSD
支援哪些光碟燒錄機的驅動程式呢？</a></dt>

<dt>4.3.7. <a href="#ZIP-SUPPORT">FreeBSD 支援 Iomega <span class="TRADEMARK">Zip</span>
嗎?</a></dt>

<dt>4.3.8. <a href="#JAZ-ZIP-REMOVABLE-SUPPORT">FreeBSD 有支援 <span
class="TRADEMARK">Jaz</span>、EZ 及其他類似的隨身磁片嗎？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORTED-HARD-DRIVES" name="SUPPORTED-HARD-DRIVES"></a><b>4.3.1.</b> FreeBSD
可支援哪些種類的硬碟呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 都支援 EIDE 及 SCSI 介面的硬碟(以及 SCSI 卡，請看下一節說明) 以及
“Western Digital” 介面的硬碟 (MFM、 RLL、 ESDI，當然包含 IDE)，不過有一些少數的 ESDI
晶片組的(型號：WD1002/3/6/7) 可能無法正常運作。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORTED-SCSI-CONTROLLERS" name="SUPPORTED-SCSI-CONTROLLERS"></a><b>4.3.2.</b>
支援哪些 SCSI 卡、設備呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱 FreeBSD 的硬體支援表( <a
href="http://www.FreeBSD.org/releases/6.0R/hardware.html" target="_top">6.0</a> 或 <a
href="http://www.FreeBSD.org/releases/5.4R/hardware.html" target="_top">5.4</a>)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TAPE-SUPPORT" name="TAPE-SUPPORT"></a><b>4.3.3.</b> 支援哪些磁帶機呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 支援 SCSI 及 QIC-36 (QIC-02 介面) 規格的磁帶機。 同時包含了 8-mm
(也就是 Exabyte) 及 DAT 磁帶機。</p>

<p>有些早期版本的 8-mm 磁帶機並不是完全相容於 SCSI-2 規格， 所以可能在 FreeBSD
上表現不是很好。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TAPE-CHANGER-SUPPORT" name="TAPE-CHANGER-SUPPORT"></a><b>4.3.4.</b> FreeBSD
支援磁帶自動換帶機嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ch&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ch</span>(4)</span></a>
上面所列的機種，搭配 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chio&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chio</span>(1)</span></a> 指令， 來使用
SCSI 種類的自動換帶機，細節部分請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chio&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chio</span>(1)</span></a> 說明。</p>

<p>If you are not using <b class="APPLICATION">AMANDA</b> or some other product that
already understands changers, remember that they only know how to move a tape from one
point to another, so you need to keep track of which slot a tape is in, and which slot
the tape currently in the drive needs to go back to.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORTED-CDROM-DRIVES" name="SUPPORTED-CDROM-DRIVES"></a><b>4.3.5.</b> FreeBSD
可支援哪些種類的光碟機呢？</p>
</div>

<div class="ANSWER">
<p><b></b>只要是有支援的 SCSI 卡上所接的任一 SCSI 光碟機都有支援。</p>

<p>此外，也支援下列的光碟機：</p>

<ul>
<li>
<p>Mitsumi LU002 (8bit), LU005 (16bit) 及 FX001D (16bit 2x Speed)</p>
</li>

<li>
<p>Sony CDU 31/33A</p>
</li>

<li>
<p>Sound Blaster 非 SCSI 介面的光碟機</p>
</li>

<li>
<p>Matsushita/Panasonic 光碟機</p>
</li>

<li>
<p>相容 ATAPI 規格的 IDE CDROMs</p>
</li>
</ul>

<p>相對於 SCSI 機種而言，其他非 SCSI 的光碟機都是比較慢， 此外，有些 ATAPI
種類的光碟機可能無法順利運作</p>

<p>Daemon News 以及 FreeBSD Mall 所發行的正式 FreeBSD 光碟以及燒錄用的影像檔(ISO)，
都可以直接用於開機光碟使用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORTED-CDRW-DRIVES" name="SUPPORTED-CDRW-DRIVES"></a><b>4.3.6.</b> FreeBSD
支援哪些光碟燒錄機的驅動程式呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 支援任何相容 ATAPI 標準的 IDE CD-R 或 CD-RW 光碟燒錄機， 細節請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">burncd</span>(8)</span></a> 說明。</p>

<p>FreeBSD 也支援任何 SCSI CD-R 或 CD-RW 光碟燒錄機。 請用 port 或 packag
機制來安裝、使用 <tt class="COMMAND">cdrecord</tt> ， 並確定您的 kernel 內有將 <tt
class="DEVICENAME">pass</tt>設備一併編譯在內。 (預設的 kernel.GENERIC 都會有 device pass
這段)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ZIP-SUPPORT" name="ZIP-SUPPORT"></a><b>4.3.7.</b> FreeBSD 支援 Iomega <span
class="TRADEMARK">Zip</span> 嗎?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 支援外接式的 SCSI 及 ATAPI(IDE) 介面的 Iomega <span
class="TRADEMARK">Zip</span>。 不過 SCSI ZIP 只能被設為 SCSI ID 5 或是 6
才可以運作，但如果 SCSI 卡上的 BIOS 支援它，你甚至可以用它來開機。
我們不曉得哪一塊卡可以把卡的 ID 設在除了 0 或 1 以外的地方而開機成功， 因此，如果想改
SCSI ID 的話，請務必參閱該型號的說明手冊。</p>

<p>FreeBSD 同時也支援 Parallel Port Zip磁碟機。請檢查 kernel 設定檔是否有： <tt
class="DEVICENAME">scbus0</tt>、 <tt class="DEVICENAME">da0</tt>、 <tt
class="DEVICENAME">ppbus0</tt>，以及 <tt class="DEVICENAME">vp0</tt> 這些驅動程式 (預設的
GENERIC kernel 除了 <tt class="DEVICENAME">vp0</tt> 沒包進去，其他三者都會有)。
加了這幾個驅動程式之後，Parallel Port Zip 就會成為 <tt
class="DEVICENAME">/dev/da0s4</tt>。</p>

<p>這時，就可以用像是 <tt class="COMMAND">mount /dev/da0s4 /mnt</tt> 或 (DOS 檔案系統)<tt
class="COMMAND">mount_msdos /dev/da0s4 /mnt</tt> 之類的指令來掛載、讀寫。</p>

<p>也可以參閱下面有關<a href="#MEDIA-CHANGE">隨身磁片</a> 部分，以及<a
href="#REMOVABLE-DRIVES">抽取碟、隨身碟的『格式化』討論</a> 的部分</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="JAZ-ZIP-REMOVABLE-SUPPORT" name="JAZ-ZIP-REMOVABLE-SUPPORT"></a><b>4.3.8.</b>
FreeBSD 有支援 <span class="TRADEMARK">Jaz</span>、EZ 及其他類似的隨身磁片嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以啊，除了 IDE 的 EZ drive 外，其他的應該都是 SCSI 介面， 所以在 FreeBSD
上都會以 SCSI 硬碟來處理。</p>

<p>當然，你必須確定在開機時，這些設備的電源是打開的， 以便讓 FreeBSD 可以偵測到。</p>

<p><a id="MEDIA-CHANGE" name="MEDIA-CHANGE"></a>如果在磁碟運中狀態中，要更換磁片的話，
記得先看一下 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a>、<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">umount</span>(8)</span></a>、
以及(SCSI的話)<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">camcontrol</span>(8)</span></a> 或 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">atacontrol</span>(8)</span></a> 還有 FAQ
後面有關 <a href="#REMOVABLE-DRIVES">使用抽取碟、隨身碟的討論</a> 。</p>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-KBD-MICE" name="COMPATIBILITY-KBD-MICE">4.4
鍵盤、滑鼠</a></h2>

<div class="QANDASET">
<dl>
<dt>4.4.1. <a href="#USBKBD">FreeBSD 有支援 USB 鍵盤嗎？</a></dt>

<dt>4.4.2. <a href="#BUSMOUSE">古早的 bus 滑鼠，要怎麼設定呢？</a></dt>

<dt>4.4.3. <a href="#PS2MOUSE">PS/2 (“mouse port” 或
“keyboard”)的滑鼠要怎麼設定才好呢？</a></dt>

<dt>4.4.4. <a href="#MOUSED">如果不用 X Window 環境的話，也可以用滑鼠嗎？</a></dt>

<dt>4.4.5. <a href="#TEXT-MODE-CUT-PASTE">在文字模式的 console
環境要怎麼用滑鼠來剪貼文字呢？</a></dt>

<dt>4.4.6. <a href="#MOUSE-WHEEL-BUTTONS">我滑鼠上面的滾輪、滾輪按鈕，可以在 console
上使用嗎？</a></dt>

<dt>4.4.7. <a
href="#LAPTOP-MOUSE-TRACKBALL">要怎麼在筆記型電腦上使用滑鼠、軌跡球、觸控板呢？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USBKBD" name="USBKBD"></a><b>4.4.1.</b> FreeBSD 有支援 USB 鍵盤嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD (尤其是有支援 USB keyboards。 Enable USB support in <tt
class="FILENAME">/etc/rc.conf</tt>.</p>

<p>若有開 USB 鍵盤支援而且同時接上 AT 跟 USB 鍵盤的話，那麼 AT 鍵盤會變成 <tt
class="DEVICENAME">/dev/kbd0</tt>，而 USB 鍵盤則是 <tt
class="DEVICENAME">/dev/kbd1</tt>。如果只接 USB 鍵盤，那麼它就是 <tt
class="DEVICENAME">/dev/ukbd0</tt> 囉。</p>

<p>如果想在 console 上使用 USB 鍵盤的話，那麼必須設定 console 指定用 USB 鍵盤。
可以在系統開機程序時，加上下列指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">kbdcontrol -k /dev/kbd1 &lt; /dev/ttyv0 &gt; /dev/null</kbd>
</pre>

<p>注意：若只有 USB 鍵盤的話，也就是 <tt class="DEVICENAME">/dev/ukbd0</tt>，
那麼請改用下列指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">kbdcontrol -k /dev/ukbd0 &lt; /dev/ttyv0 &gt; /dev/null</kbd>
</pre>

<p>建議：可以把上述指令放入 <tt class="FILENAME">/etc/rc.i386</tt> 。</p>

<p>設定成功之後，USB 鍵盤不用作任何特別設定，就可以在 X 視窗環境上正常運作囉。</p>

<p>USB 鍵盤的熱插拔(Hot-plugging and unplugging)在 FreeBSD 可能還無法完全正常運作，
建議：在系統開機前就先接上鍵盤，直到關機為止，以避免不必要的困擾。</p>

<p>相關細節請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ukbd&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ukbd</span>(4)</span></a> 的說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BUSMOUSE" name="BUSMOUSE"></a><b>4.4.2.</b> 古早的 bus 滑鼠，要怎麼設定呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 支援一些廠商(像是：Microsoft、Logitech、ATI)所做的 bus 及 InPort bus
介面的滑鼠。 然而，預設的 kernel(GENERIC)已經不內含它們的驅動程式。 因此，要加入下列到
kernel 設定檔並重新編譯、安裝，才能啟用：</p>

<pre class="PROGRAMLISTING">
device mse0 at isa? port 0x23c irq5
</pre>

<p>Bus 滑鼠通常要搭配專用的介面卡才能使用。 這些卡可以設定 port address 及 IRQ
值，這些細節請參閱你的滑鼠說明手冊及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mse&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mse</span>(4)</span></a> 說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PS2MOUSE" name="PS2MOUSE"></a><b>4.4.3.</b> PS/2 (“mouse port” 或
“keyboard”)的滑鼠要怎麼設定才好呢？</p>
</div>

<div class="ANSWER">
<p><b></b>PS/2 滑鼠都有支援，所需要用到的驅動程式 <tt class="DEVICENAME">psm</tt>
在預設的 kernel(GENERIC)已有內含了。</p>

<p>若你自訂的 kernel 內漏了 psm 的話，那麼就再把下列內容加到 kernel
設定檔並重新編譯、安裝：</p>

<pre class="PROGRAMLISTING">
device psm0 at atkbdc? irq 12
</pre>

<p>當開機時 kernel 有正確偵測到 <tt class="DEVICENAME">psm0</tt> ，請務必確認在 <tt
class="FILENAME">/dev</tt> 內有 <tt class="DEVICENAME">psm0</tt> 。
如果沒有的話，那麼就用 <tt class="USERNAME">root</tt> 來打下列指令來建立吧：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev; sh MAKEDEV psm0</kbd>
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 如果是 FreeBSD 5.0-RELEASE(含之後版本)的話，因為採用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;manpath=FreeBSD+6-current">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(5)</span></a>
機制的因素， 所以會自動在 <tt class="FILENAME">/dev</tt>
下建立相關設備的節點，因此就可以略過上面這一步。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUSED" name="MOUSED"></a><b>4.4.4.</b> 如果不用 X Window
環境的話，也可以用滑鼠嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>若使用 console 的預設驅動程式(也就是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">syscons</span>(4)</span></a>)，
那麼就可以在文字介面的 console 上面用滑鼠來剪貼文字了。 那麼要啟動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>
並開啟游標顯示， 請打下列指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">moused -p /dev/<tt
class="REPLACEABLE"><i>xxxx</i></tt> -t <tt class="REPLACEABLE"><i>yyyy</i></tt></kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">vidcontrol -m on</kbd>
</pre>

<p>其中『<tt class="REPLACEABLE"><i>xxxx</i></tt>』是滑鼠的設備名稱，而 『<tt
class="REPLACEABLE"><i>yyyy</i></tt>』則是滑鼠所使用的 protocol 種類。 目前的 moused
可以自動偵測(除了舊式的 serial 滑鼠之外)大多數滑鼠所使用的 protocol
種類，而不用刻意去指定。 『protocol 種類』設定用 <tt class="LITERAL">auto</tt>
就會自動偵測了。若自動偵測失敗的話，請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 裡面的 type
那段說明。</p>

<p>如果用的是 PS/2 滑鼠，只要把 <tt class="LITERAL">moused_enable="YES"</tt> 加到 <tt
class="FILENAME">/etc/rc.conf</tt> ，這樣每次開機就會自動啟動了。 此外，如果要在所有
virtual terminals 上也能使用滑鼠， 而不限定只有 console 的話，那麼請再把 <tt
class="LITERAL">allscreens_flags="-m on"</tt> 加到 <tt class="FILENAME">/etc/rc.conf</tt>
裡面即可。</p>

<p>moused 在執行中的時候，如果要使用滑鼠相關功能，都必須透過 moused 或其他程式像是 X
視窗來進行。請參閱 FAQ 中有關<a href="#X-AND-MOUSED">『為什麼不能在 X
視窗裡使用滑鼠？』</a>以瞭解相關細節。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TEXT-MODE-CUT-PASTE" name="TEXT-MODE-CUT-PASTE"></a><b>4.4.5.</b> 在文字模式的
console 環境要怎麼用滑鼠來剪貼文字呢？</p>
</div>

<div class="ANSWER">
<p><b></b>當執行 moused 後，(參閱<a href="#MOUSED">前一節</a>)
按住左鍵，接著移動滑鼠來選擇一個區域之後放開，這樣就完成『複製』。
要『貼上』的話，按滑鼠中鍵就可以了。 要『延伸選取區』的話，按滑鼠右鍵</p>

<p>如果你的滑鼠沒有中鍵，你可以用模擬的方式，或是重新定義滑鼠按鍵的方式，
來達成「延伸」的功能。詳情請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUSE-WHEEL-BUTTONS" name="MOUSE-WHEEL-BUTTONS"></a><b>4.4.6.</b>
我滑鼠上面的滾輪、滾輪按鈕，可以在 console 上使用嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>這個答案嘛...，很不幸地，在大多數的情況下不行。
這些有滾輪的滑鼠需要用特殊驅動程式才行， 除非，滑鼠驅動程式或使用者自己的應用程式有支援，
不然，這些滑鼠只能夠當成是普通的兩鍵或三鍵的滑鼠來用而已。</p>

<p>如果要在 X 視窗環境上使用滾輪的話，請參閱 <a href="#X-AND-WHEEL">X
視窗上的滾輪使用</a> 說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LAPTOP-MOUSE-TRACKBALL" name="LAPTOP-MOUSE-TRACKBALL"></a><b>4.4.7.</b>
要怎麼在筆記型電腦上使用滑鼠、軌跡球、觸控板呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱<a href="#PS2MOUSE">前面的 PS/2 滑鼠的問答</a> 。</p>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-NETWORKING" name="COMPATIBILITY-NETWORKING">4.5
網路跟 serial 設備</a></h2>

<div class="QANDASET">
<dl>
<dt>4.5.1. <a href="#NETWORK-CARDS">FreeBSD 支援哪些網路卡呢？</a></dt>

<dt>4.5.2. <a href="#INTERNAL-PLUGNPLAY-MODEM">為什麼 FreeBSD 找不到 PnP(隨插隨用，Plug
&amp; Play)規格的 modem?</a></dt>

<dt>4.5.3. <a href="#SUPPORT-WINMODEM">FreeBSD 支援像是 Winmodems 之類的軟體 modem
嗎？</a></dt>

<dt>4.5.4. <a href="#SUPPORT-BROADCOM">有 Broadcom 43xx 無線網卡的原生驅動程式(Native
driver)嗎？</a></dt>

<dt>4.5.5. <a href="#MULTIPORT-SERIAL-SUPPORT">FreeBSD 支援哪些 multi-port
serial卡呢？</a></dt>

<dt>4.5.6. <a href="#SERIAL-CONSOLE-PROMPT">在 serial console 上要如何才會出現 boot:
提示呢？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NETWORK-CARDS" name="NETWORK-CARDS"></a><b>4.5.1.</b> FreeBSD
支援哪些網路卡呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 FreeBSD 各版本的硬體支援列表。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INTERNAL-PLUGNPLAY-MODEM" name="INTERNAL-PLUGNPLAY-MODEM"></a><b>4.5.2.</b>
為什麼 FreeBSD 找不到 PnP(隨插隨用，Plug &amp; Play)規格的 modem?</p>
</div>

<div class="ANSWER">
<p><b></b>原因在於：需要把 modem 的 PnP ID 加到 serial 驅動程式的 PnP ID
表，作法如下：</p>

<ol type="1">
<li>
<p>首先，在 kernel 設定檔內加入 <tt class="LITERAL">controller pnp0</tt>，
並重新編譯、安裝 kernel，最後重開機就會啟動 PnP 支援。</p>
</li>

<li>
<p>然後，kernel 會把偵測到所有設備上的 PnP ID 都列出。 這時，修改 <tt
class="FILENAME">/usr/src/sys/isa/sio.c</tt>(大約第752行左右的地方)， 可以搜尋 <tt
class="LITERAL">SUP1310</tt> 當關鍵字(位於 <tt class="LITERAL">sio_ids[]</tt> 表內)，
請將剛才 kernel 顯示的 modem 的 PnP ID 複製到相關位置。</p>
</li>

<li>
<p>這時，再重新編譯、安裝 kernel，最後重開機應該就會正確偵測到 modem 了。</p>
</li>
</ol>

<br />
<br />
<p>此外，也可以在開機時以 <tt class="LITERAL">pnp</tt> 指令來手動設定 PnP 設備， 來讓
kernel 得以正確偵測，舉例：</p>

<pre class="PROGRAMLISTING">
pnp 1 0 enable os irq0 3 drq0 0 port0 0x2f8
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORT-WINMODEM" name="SUPPORT-WINMODEM"></a><b>4.5.3.</b> FreeBSD 支援像是
Winmodems 之類的軟體 modem 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 可以安裝額外的軟體來支援軟體 modem。 像是 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/comms/ltmdm/pkg-descr"><tt
class="FILENAME">comms/ltmdm</tt></a> 可支援常見的 Lucent LT 晶片， <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/comms/mwavem/pkg-descr"><tt
class="FILENAME">comms/mwavem</tt></a> 則可支援 IBM Thinkpad 600 及 700 筆記型電腦上面的
modem。</p>

<p>然而，並不能用軟體 modem 來安裝 FreeBSD，
因為：這類軟體必須在作業系統安裝完畢之後，才能安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUPPORT-BROADCOM" name="SUPPORT-BROADCOM"></a><b>4.5.4.</b> 有 Broadcom 43xx
無線網卡的原生驅動程式(Native driver)嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>沒有，而且也不太可能會有。</p>

<p>Broadcom 拒絕公開有關無線網卡晶片的驅動程式相關說明，
主因大概是他們用軟體來控制無線傳輸方式。
事實上，因為要能通過美國聯邦電信委員會(FCC)檢磁安規的話，
必須確保產品不能讓使用者不能隨意更動相關設定，比如：電磁波頻率、相關模組參數、輸出電源等。
但是，如果我們不知道如何去控制晶片的話，那麼撰寫驅動程式之路恐怕不太可行。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTIPORT-SERIAL-SUPPORT" name="MULTIPORT-SERIAL-SUPPORT"></a><b>4.5.5.</b>
FreeBSD 支援哪些 multi-port serial卡呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱使用手冊上的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install.html#INSTALL-MISC"
target="_top">安裝篇—其他硬體</a> 列表。</p>

<p>雖然有些卡是沒牌的(尤其是有標明：相容 AST 規格)但也可以正常使用。</p>

<p>至於卡的設定方面，請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a> 的說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SERIAL-CONSOLE-PROMPT" name="SERIAL-CONSOLE-PROMPT"></a><b>4.5.6.</b> 在 serial
console 上要如何才會出現 boot: 提示呢？</p>
</div>

<div class="ANSWER">
<p><b></b></p>

<ul class="noindent">
<li>
<p>kernel 設定檔加入 <tt class="LITERAL">options COMCONSOLE</tt></p>
</li>

<li>
<p>建立 /boot.config 檔，並且該檔裡面內容只填上 <code class="OPTION">-P</code></p>
</li>

<li>
<p>把鍵盤從機器上拔掉</p>
</li>

<li style="list-style: none">
<p>細節請看 <tt class="FILENAME">/usr/src/sys/i386/boot/biosboot/README.serial</tt></p>
</li>
</ul>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-SOUND" name="COMPATIBILITY-SOUND">4.6
音效卡</a></h2>

<div class="QANDASET">
<dl>
<dt>4.6.1. <a href="#SOUND-CARD-SUPPORT">FreeBSD 支援哪些音效卡？</a></dt>

<dt>4.6.2. <a href="#ES1370-SILENT-PCM"><span class="CITEREFENTRY"><span
class="REFENTRYTITLE">pcm</span>(4)</span>
所支援的音效卡沒有聲音，有什麼暫時解決方式嗎？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SOUND-CARD-SUPPORT" name="SOUND-CARD-SUPPORT"></a><b>4.6.1.</b> FreeBSD
支援哪些音效卡？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 支援各種音效卡，包括了 <span
class="TRADEMARK">SoundBlaster</span>&reg;、 <span class="TRADEMARK">SoundBlaster</span>
Pro、<span class="TRADEMARK">SoundBlaster</span> 16、Pro Audio Spectrum 16、 AdLib、及
Gravis UltraSound sound cards (細節請參閱 <a href="http://www.FreeBSD.org/releases/"
target="_top">FreeBSD 發行情報</a> 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">snd</span>(4)</span></a> 的說明)。
此外，對 MPU-401 及 MIDI 相容規格的也有一定程度的支援，而 <span
class="TRADEMARK">Microsoft</span>&reg; Sound System 規格也有支援。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 驅動程式僅適用於『音效』部分！ 除了 <span
class="TRADEMARK">SoundBlaster</span> 之外，
目前音效驅動程式並不支援這些音效卡上的光碟機, SCSI設備或搖桿。 <span
class="TRADEMARK">SoundBlaster</span> 的 SCSI 介面及某些非 SCSI
的光碟機是有支援，但無法用來開機。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ES1370-SILENT-PCM" name="ES1370-SILENT-PCM"></a><b>4.6.2.</b> <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pcm</span>(4)</span>
所支援的音效卡沒有聲音，有什麼暫時解決方式嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>因為有些像是 es1370 晶片的音效卡會在每次開機時把音量調為零。
暫時解法是在每次開機時執行下面指令，或是加到 /etc/rc.local 內：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mixer pcm 100 vol 100 cd 100</kbd>
</pre>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="COMPATIBILITY-OTHER" name="COMPATIBILITY-OTHER">4.7
其他硬體</a></h2>

<div class="QANDASET">
<dl>
<dt>4.7.1. <a href="#OTHER-DEVICE-SUPPORT">FreeBSD 還支援其他哪些硬體呢？</a></dt>

<dt>4.7.2. <a href="#POWER-MANAGEMENT-SUPPORT">FreeBSD
支援筆記型電腦的省電管理功能嗎？</a></dt>

<dt>4.7.3. <a href="#DISABLE-ACPI">該如何關閉 ACPI？</a></dt>

<dt>4.7.4. <a href="#MICRON-HANG-BOOT">Micron 電腦總是在 FreeBSD
啟動時就掛掉，該怎麼辦呢？</a></dt>

<dt>4.7.5. <a href="#MICRON-3COMNIC-FAILURE"><span class="TRADEMARK">3Com</span>&reg; PCI
介面網路卡無法在 Micron 電腦上使用，該怎麼辦？</a></dt>

<dt>4.7.6. <a href="#ASUSK7V-BOOT-FAILURE">主機板是用華碩(ASUS)
K7V，可是用開機片開到一半就當了，怎麼辦呢？</a></dt>

<dt>4.7.7. <a href="#NEWCARD-DOES-NOT-WORK">PCMCIA 卡無法使用，並出現錯誤訊息 “cbb0:
unsupported card type detected.” 該怎麼辦？</a></dt>

<dt>4.7.8. <a href="#DELL-POWEREDGE-FAILURE">為什麼 <span
class="TRADEMARK">Dell</span>&#8482; <span class="TRADEMARK">PowerEdge</span>&#8482; 2850
裝完 FreeBSD 之後，重開機接著鍵盤就掛了？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="OTHER-DEVICE-SUPPORT" name="OTHER-DEVICE-SUPPORT"></a><b>4.7.1.</b> FreeBSD
還支援其他哪些硬體呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱使用手冊上的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/install.html#INSTALL-MISC"
target="_top">安裝篇—其他硬體</a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="POWER-MANAGEMENT-SUPPORT" name="POWER-MANAGEMENT-SUPPORT"></a><b>4.7.2.</b>
FreeBSD 支援筆記型電腦的省電管理功能嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 4.X(含之後版本)在某些機種上都有支援 <acronym
class="ACRONYM">APM</acronym>。 細節請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=apm&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">apm</span>(4)</span></a> 的說明。</p>

<p>FreeBSD 5.X(含之後版本)支援在目前大部分機種上都有的 <acronym
class="ACRONYM">ACPI</acronym> 功能。 細節請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi</span>(4)</span></a>
的說明。若機器上同時都有 <acronym class="ACRONYM">APM</acronym> 及 <acronym
class="ACRONYM">ACPI</acronym> 功能的話，我們建議你可以兩者都試試看，
看看哪一種比較符合你的需求。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISABLE-ACPI" name="DISABLE-ACPI"></a><b>4.7.3.</b> 該如何關閉 ACPI？</p>
</div>

<div class="ANSWER">
<p><b></b>把</p>

<pre class="SCREEN">
hint.acpi.0.disabled="1"
</pre>

這段加到 <tt class="FILENAME">/boot/device.hints</tt> 即可。<br />
<br />
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MICRON-HANG-BOOT" name="MICRON-HANG-BOOT"></a><b>4.7.4.</b> Micron 電腦總是在
FreeBSD 啟動時就掛掉，該怎麼辦呢？</p>
</div>

<div class="ANSWER">
<p><b></b>有些 Micron 主機板上的 BIOS 在 PCI 方面會有問題， 這會導致 PCI 設備會被 BIOS
偵測為不正確設定，而進入 FreeBSD 就掛掉。</p>

<p>暫時解決方式：關閉 BIOS 內 “Plug and Play Operating System” 的設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MICRON-3COMNIC-FAILURE" name="MICRON-3COMNIC-FAILURE"></a><b>4.7.5.</b> <span
class="TRADEMARK">3Com</span>&reg; PCI 介面網路卡無法在 Micron 電腦上使用，該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>這問題跟前面的問題因素一樣，總之，就是關閉 BIOS 中有關 OS PnP 的設定。</p>

<p>暫時解決方式：關閉 BIOS 內 “Plug and Play Operating System” 的設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ASUSK7V-BOOT-FAILURE" name="ASUSK7V-BOOT-FAILURE"></a><b>4.7.6.</b>
主機板是用華碩(ASUS) K7V，可是用開機片開到一半就當了，怎麼辦呢？</p>
</div>

<div class="ANSWER">
<p><b></b>進入 BIOS 設定，並關閉 “boot virus protection” 設定即可。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEWCARD-DOES-NOT-WORK" name="NEWCARD-DOES-NOT-WORK"></a><b>4.7.7.</b> PCMCIA
卡無法使用，並出現錯誤訊息 “cbb0: unsupported card type detected.” 該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>可以試試看改用舊的方式，請先修改 kernel 設定檔，拿掉下面這幾行：</p>

<pre class="PROGRAMLISTING">
device cbb
device pccard
device cardbus
</pre>

然後加上： 

<pre class="PROGRAMLISTING">
device pcic
device card 1
</pre>

最後請參閱 Handbook 中 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/kernelconfig.html"
target="_top">調整 FreeBSD Kernel</a> 章節，以重新編譯、安裝新的 kernel。<br />
<br />
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DELL-POWEREDGE-FAILURE" name="DELL-POWEREDGE-FAILURE"></a><b>4.7.8.</b> 為什麼
<span class="TRADEMARK">Dell</span>&#8482; <span
class="TRADEMARK">PowerEdge</span>&#8482; 2850 裝完 FreeBSD
之後，重開機接著鍵盤就掛了？</p>
</div>

<div class="ANSWER">
<p><b></b>(本題由 cdsheen 提供)嚐試在 <span class="TRADEMARK">Dell</span> <span
class="TRADEMARK">PowerEdge</span> 2850 上面安裝 FreeBSD 6.0，
不過安裝完成、並重新開機之後，發現 console 的鍵盤不能動了， 同樣的情況似乎也存在於
FreeBSD 5.3 及 FreeBSD 5.4， 經過一番搜尋，發覺是因為這台機器上面有一個 “Dell Remote
Access Controller (DRAC)”， 這個裝置會被系統辨識成一個 USB
Keyboard，所以導致開完機之後，正常的 PS/2 鍵盤反而不能動了！</p>

<p>暫時解決方式如下：</p>

<ol type="1">
<li>
<p>先以 Single User Mode 進入系統</p>
</li>

<li>
<p>在命令列模式下，先執行下列命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fsck -y <tt
class="FILENAME">/</tt></kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -u <tt
class="FILENAME">/</tt></kbd>
</pre>
</li>

<li>
<p>然後編輯 <tt class="FILENAME">/etc/devd.conf</tt>，把對於 USB Keyboard
的支援暫時拿掉， 也就是把下面幾行開頭加上 #</p>

<pre class="PROGRAMLISTING">
# When a USB keyboard arrives, attach it as the console keyboard.
#attach 100 {
#       device-name "ukbd0";
#       action "kbdcontrol -k /dev/ukbd0 &#60; /dev/console &#38;&#38; /etc/rc.d/syscons restart";
#};
#detach 100 {
#       device-name "ukbd0";
#       action "kbdcontrol -k /dev/kbd0 &#60; /dev/console";
#};
</pre>
</li>

<li>
<p>然後輸入 <tt class="COMMAND">exit</tt>離開 Single User Mode 之後，
就可以順利進入系統、而且鍵盤也可以正常運作，下次開機也不會有問題！</p>
</li>
</ol>

<p>另外，<span class="TRADEMARK">Dell</span> 的 DRAC/BMC
看起來有蠻多不錯的遠端存取功能，有興趣的人可以玩玩看...</p>
</div>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="TROUBLESHOOT" name="TROUBLESHOOT"></a>Chapter 5 常見問題解決</h1>

William Liao

<div class="QANDASET">
<dl>
<dt>5.1. <a href="#AWRE">硬碟有壞軌時該怎麼辦?</a></dt>

<dt>5.2. <a href="#HPNETSERVER-SCSI-FAILURE">為什麼 FreeBSD 抓不到 HP Netserver 的 SCSI
控制卡？</a></dt>

<dt>5.3. <a href="#ED1-TIMEOUT">一直看到類似 “<tt class="ERRORNAME">ed1: timeout</tt>”
的訊息。它們是什麼意思呢？</a></dt>

<dt>5.4. <a href="#BAD-3C509"><span class="TRADEMARK">3Com</span> 3C509
網路卡在沒有任何明顯原因下停止工作 了呢？</a></dt>

<dt>5.5. <a href="#PRINTER-SLOW">平行埠印表速度破天荒的慢，我該怎麼做？</a></dt>

<dt>5.6. <a href="#SIGNAL11">程式有時會因 “<tt class="ERRORNAME">Signal 11</tt>”
這個錯誤而停止？</a></dt>

<dt>5.7. <a href="#TRAP-12-PANIC">當機時出現：“<tt class="ERRORNAME">Fatal trap 12: page
fault in kernel mode</tt>”，或是 “<tt
class="ERRORNAME">panic:</tt>”再加上一堆錯誤訊息， 該怎麼辦？</a></dt>

<dt>5.8. <a href="#SCREEN-LOSES-SYNC">為什麼當我開機時，螢幕變黑，且不停閃動？</a></dt>

<dt>5.9. <a href="#REALLYBIGRAM">為什麼我的系統裝有 128 MB 的 RAM，而 FreeBSD
只用了其中的 64MB？</a></dt>

<dt>5.10. <a href="#KMEM-MAP-TOO-SMALL">機器上的 RAM 有 1GB 以上，可是為何卻收到
“kmem_map too small” 的 panic 錯誤訊息？</a></dt>

<dt>5.11. <a href="#PANIC-KMEMMAP-TOO-SMALL">機器上 RAM 不到 1GB ，但仍會出現 “<tt
class="ERRORNAME">kmem_map too small!</tt>” 的 panic 錯誤訊息</a></dt>

<dt>5.12. <a href="#PROC-TABLE-FULL">為什麼我一直看到 “<tt class="ERRORNAME">/kernel:
proc: table is full</tt>” 這個錯誤訊息？</a></dt>

<dt>5.13. <a href="#CMAP-BUSY-PANIC">為什麼用新 kernel 開機時，出現 “<tt
class="ERRORNAME">CMAP busy</tt>” 這個錯誤訊息？</a></dt>

<dt>5.14. <a href="#BRKADRINT-ILLEGAL-HOST-ACCESS">請問這個訊息：“<tt
class="ERRORNAME">ahc0: brkadrint, Illegal Host Access at seqaddr 0x0</tt>”
是什麼意思？</a></dt>

<dt>5.15. <a href="#ACI0-ILLEGAL-CABLE">在開機時，我看到這個錯誤訊息 “<tt
class="ERRORNAME">ahc0: illegal cable configuration</tt>”。 我的排線確定有接對。
是出了什麼問題呢？</a></dt>

<dt>5.16. <a href="#MAIL-LOOPBACK">為什麼 Sendmail 一直出現 ““<tt
class="ERRORNAME">mail loops back to myself</tt>”” 這個錯誤訊息？</a></dt>

<dt>5.17. <a href="#REMOTE-FULLSCREEN">為什麼執行遠端機器（remote
machine）的全螢幕的軟體時， 有不正常的情形？</a></dt>

<dt>5.18. <a href="#CALCRU-NEGATIVE">為什麼我的機器一直顯示 “<tt
class="ERRORNAME">calcru: negative time...</tt>”？</a></dt>

<dt>5.19. <a href="#PCM0-NOT-FOUND">出現 “<tt class="ERRORNAME">pcm0 not found</tt>”
這個訊息，或者是 我的音效卡變成了 <tt class="DEVICENAME">pcm1</tt>，但在 kernel 設定
檔&#65533;我是設 <tt class="LITERAL">device pcm0</tt> 啊。這是怎麼回事呢？</a></dt>

<dt>5.20. <a href="#PNP-NOT-FOUND">為什麼在更新到 FreeBSD 4.X 後會抓不到我的 PnP 卡
（或者是抓成 <tt class="LITERAL">unknown</tt>）？</a></dt>

<dt>5.21. <a href="#NLIST-FAILED">為什麼我常常在跑一些程式（例如 <tt
class="COMMAND">top</tt> 或 <tt class="COMMAND">systat</tt>）的時候出現 “<tt
class="ERRORNAME">nlist failed</tt>” 這個錯誤訊息？</a></dt>

<dt>5.22. <a href="#CONNECTION-DELAY">為什麼我用 <tt class="COMMAND">ssh</tt> 或 <tt
class="COMMAND">telnet</tt> 連到我的電腦時，會等待很長的一段時間才能連上？</a></dt>

<dt>5.23. <a href="#STRAY-IRQ">“<tt class="ERRORNAME">stray IRQ</tt>”
這個錯誤訊息是什麼意思？</a></dt>

<dt>5.24. <a href="#FILE-TABLE-FULL">為什麼 “<tt class="ERRORNAME">file: table is
full</tt>” 這個訊息 一直在 dmesg &#65533;重複出現？</a></dt>

<dt>5.25. <a
href="#LAPTOP-CLOCK-SKEW">為什麼我筆記型電腦上的時鐘一直顯示錯誤的時間？</a></dt>

<dt>5.26. <a href="#NULL-NULL">為什麼我的筆記型電腦無法正確的偵測到 PC card ？</a></dt>

<dt>5.27. <a href="#BOOT-READ-ERROR">為什麼在 BIOS 畫面之後，FreeBSD 的 boot loader 顯示
“<tt class="ERRORNAME">Read error</tt>” 然後就停止不動了？</a></dt>

<dt>5.28. <a href="#BOOTMANAGER-RESTORE">另一個作業系統摧毀了我的 Boot
Manager。我要怎麼樣才能把它還 原回來？</a></dt>

<dt>5.29. <a href="#INDEFINITE-WAIT-BUFFER">這個錯誤訊息：“<tt
class="ERRORNAME">swap_pager: indefinite wait buffer:</tt>” 是什麼意思呢？</a></dt>

<dt>5.30. <a href="#TOUCH-NOT-FOUND">為何在 buildworld/installworld 時，會趴在 “<tt
class="ERRORNAME">touch: not found</tt>” 的錯誤訊息?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="AWRE" name="AWRE"></a><b>5.1.</b> 硬碟有壞軌時該怎麼辦?</p>
</div>

<div class="ANSWER">
<p><b></b>若是 SCSI 硬碟的話，那麼磁碟機應該有能力自動作 re-mapping
的動作。然而，因為一些未知的因素，在出廠時，很多硬碟的這項 功能是關閉的...</p>

<p>要將其重新開啟，您需要編輯裝置的第一個 page 模式 （first device page mode），在
FreeBSD 上可以用下面的指令辦到 （以 <tt class="USERNAME">root</tt>身分執行）</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">scsi -f /dev/rsd0c -m 1 -e -P 3</kbd>
</pre>

<p>然後將 AWRE 和 ARRE 的數值從 0 變成 1:-</p>

<pre class="PROGRAMLISTING">
AWRE（Auto Write Reallocation Enbld）： 1
ARRE（Auto Read Reallocation Enbld）： 1
</pre>

<p>以下這段是由 Ted Mittelstaedt <code class="EMAIL">&#60;<a
href="mailto:tedm@toybox.placo.com">tedm@toybox.placo.com</a>&#62;</code>所提供：</p>

<p>若為 IDE 硬碟，任何的壞軌通常都是麻煩的預兆。目前所有較新的 IDE 硬碟，內部都有自動
remapping 壞軌的能力。目前所有 IDE 硬碟
製造商，都提供了更久的保證，而且會幫您更換出現壞軌的硬碟。</p>

<p>如果您仍想要修復產生壞軌的 IDE 硬碟，您仍可以試著去下載 IDE
硬碟製造商所提供的檢測程式，並用它來檢查您的硬碟。有時這些軟體可
以強迫重新檢查硬碟的壞軌，並將它們標示出來。</p>

<p>對 ESDI，RLL 及 MFM 的硬碟來說，通常壞軌是正常現象，也不是什 麼麻煩的前兆。在 PC
上，磁碟控制卡和 BIOS 負責標示壞軌的任務。這 對一些使用 BIOS來存取磁碟的作業環境（如
DOS）是沒有問題的。然而， FreeBSD 的磁碟驅動程式並不經過 BIOS 來存取磁碟，所以，有個
bad144 的機制用來取代這項功能。bad144 只能用在 wd 這個磁碟驅動程式上（這 個代表了 FreeBSD
4.0 並不支援它），它也無法用在 SCSI 硬碟上。
bad144的工作方法是將所有找到的壞軌資料存到一個特別的檔案&#65533;。</p>

<p>使用 bad144 的警告 - 存著壞軌資料的特別檔案是放在硬碟的最後
一軌上。因為這個檔案儲存的壞軌資料中，有可能有些資料是指向硬碟最
前端所發生的壞軌情形，就是可能儲存 /kernel 這個檔的地方，所以它
一定要能被開機程式所讀取，而開機程式是透過 BIOS 來讀取 kernel 檔。這表示了使用 bad144
的硬碟絕不能擁有超過 1024 個 cylinder， 16 個 head 及 63 個 sector。而這使得欲使用 bad144
的硬碟的大小不 能大於 500 MB。</p>

<p>要使用 bad144 很簡單，只要在開始安裝時，在 FreeBSD fdisk 畫面 把“Bad Block” 掃瞄設為
ON 即可。在 FreeBSD 2.2.7 以 後都可以使用此方法。但這個硬碟的 cylinder 一定要在 1024
以下。使 用前，我們建議這個硬碟要至少先使用四個小時，以便熱膨脹與磁軌偏移
達一般狀態。</p>

<p>如果這個硬碟擁有超過 1024 個 cylinder（像大容量的 ESDI 硬碟） ，ESDI
控制卡利用一個特別的轉換模式使它能在 DOS 下工作。而如果您 在 fdisk &#65533;的 “set
geometry” 中輸入 “轉換過” 的 geometry，wd 這個驅動程式能了解這些轉換
模式。您也絕對不能使用 dangerously dedicated 模式來建立 FreeBSD 的分割區，因為它會忽略
geometry 這個參數。此外，就算 fdisk 使用 您所輸入的 geometry
參數，它依然會去讀取這硬碟的真正資料，而會嘗 試去建立一個過大的 FreeBSD
分割區。如果磁碟的 geometry 已經被 “轉換” 過了，那麼 這個分割區 “必須” 以手動輸入
block 數目的方法來建立。</p>

<p>一個快速的小技巧是利用 ESDI 控制卡來設定大容量的 ESDI 硬碟， 用 DOS 開機片開機，再將它
format 為 DOS 的分割區。然後重開機進入 FreeBSD 安裝程序，在 fdisk 畫面，把DOS 分割區的
blocksize 和 block number 抄下來。然後重新設定 geometry 使其跟 DOS 使用的一樣。 刪除 DOS
分割區，然後使用您剛剛抄下的 blocksize 來建立一個 “cooperative” FreeBSD
分割區。然後設定這個分割區為可 開機，再打開壞軌掃瞄。在真正的安裝過程中，bad144
會在任何檔案系統 被建立前先被執行。（您可以按 Alt-F2 來監看這一切）如果在建立壞軌資
料檔時發生了問題，您會需要設定一個較大的磁碟 geometry - 這表示您
需要重開機，然後全部再重新開始（包括重新分割以及在 DOS 下重新 format）。</p>

<p>如果 remapping 的功能已經啟動了，而您依然一直看到壞軌產生，
那麼考慮換一台硬碟吧。壞軌的情形只會隨時間增加而更為嚴重。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="HPNETSERVER-SCSI-FAILURE" name="HPNETSERVER-SCSI-FAILURE"></a><b>5.2.</b>
為什麼 FreeBSD 抓不到 HP Netserver 的 SCSI 控制卡？</p>
</div>

<div class="ANSWER">
<p><b></b>基本上這個是一個已知的問題。在 HP Netserver 機器上的 on-board EISA 介面 SCSI
控制卡占據了定址為第 11 的 EISA 槽，因此所有的 “真實” EISA 槽都在它之前。可是，在 EISA
定址空間 &gt;= 10 時，會與指定給 PCI 用的定址空間相衝突，且 FreeBSD 的 auto-configuration
無法正確的處理這個情形。</p>

<p>因此，現在你能做的最好事情就是在 kernel &#65533;設定 <tt
class="LITERAL">EISA_SLOTS</tt> 這個選項為 12 ，然後當作沒有這個 問題 :)。請依照 <a
href="../../handbook/kernelconfig.html" target="_top">Handbook 中有關 kernel 的設定</a>
&#65533;所說的方法來設定與編譯 您的 kernel。</p>

<p>當然，在安裝 FreeBSD 到這種機器上時，這是一個雞生蛋蛋生雞的 問題。為了解決這個問題，在
<span class="emphasis"><i class="EMPHASIS">UserConfig</i></span> 中有
一個特別的方法，安裝時不要進入 “visual” 介面，相反 的，在命令列模式中，鍵入</p>

<pre class="PROGRAMLISTING">
eisa 12
quit
</pre>

<p>然後就如以往一樣安裝您的系統。不過我們建議您編譯與安裝一個 屬於自己的 kernel，但</p>

<p>希望在未來的版本中能對這個問題有一個好的解決方法。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 您無法在 HP Netserver 上使用 <tt class="LITERAL">dangerously
dedicated</tt> 磁碟模式。您可以參考 <a href="#DEDICATE">這份註解</a> 以獲得更多資訊。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ED1-TIMEOUT" name="ED1-TIMEOUT"></a><b>5.3.</b> 一直看到類似 “<tt
class="ERRORNAME">ed1: timeout</tt>” 的訊息。它們是什麼意思呢？</p>
</div>

<div class="ANSWER">
<p><b></b>這個通常是由於中斷衝突（interrupt conflict）所造成的（例如，
兩塊卡使用到了相同的 IRQ）。 FreeBSD 在 2.0.5 版以前都容許這個 情形，就算有 IRQ
衝突情形，網路卡也應該仍可正常運作。然而，在 2.0.5 版及其以後，已不再容許有 IRQ
衝突的情形了。請於開機時使 用 -c 這個選項，然後更改 ed0/de0/..。等的設定，使其和您網路卡
本身的設定一致。</p>

<p>如果您是使用您網路卡上的 BNC 接頭，您或許也會因不良的終端電 阻設定，而發生裝置
(device) timeout 的情形。要檢查是否有這種情
形，您可以在網路卡上直接接上終端電阻（不要接網路線），然後看看這
個錯誤訊息是不是就消失了。</p>

<p>有些 NE2000 的相容卡，如果它的 UTP 埠沒有接網路線，或是該網
路線並沒被使用的話，也會出現這個錯誤訊息。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BAD-3C509" name="BAD-3C509"></a><b>5.4.</b> <span class="TRADEMARK">3Com</span>
3C509 網路卡在沒有任何明顯原因下停止工作 了呢？</p>
</div>

<div class="ANSWER">
<p><b></b>這塊卡有個不好的地方在於它常常會遺失本身的設定資料。請使用該 卡的 DOS 工具 <tt
class="COMMAND">3c5x9.exe</tt> 來更新卡上設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PRINTER-SLOW" name="PRINTER-SLOW"></a><b>5.5.</b>
平行埠印表速度破天荒的慢，我該怎麼做？</p>
</div>

<div class="ANSWER">
<p><b></b>如果唯一的問題就是速度很慢的話，試著改變您的 <a
href="../handbook/printing-intro-setup.html#PRINTING-PARALLEL-PORT-MODE"
target="_top">印表機連接埠設定</a> 這個在手冊中的 <a
href="../handbook/printing-intro-setup.html" target="_top">印表機設定</a>
這個章節有加以討論。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SIGNAL11" name="SIGNAL11"></a><b>5.6.</b> 程式有時會因 “<tt
class="ERRORNAME">Signal 11</tt>” 這個錯誤而停止？</p>
</div>

<div class="ANSWER">
<p><b></b>Signal 11 這個錯誤是因為你的 process 嘗試要存取一塊記憶體，
而你的作業系統並不允許它做這個動作而發生的。如果這種情形常常不
定時發生，那麼你應該要開始看看是不是哪裡出問題了。</p>

<p>這些問題可能是與下列情形有關：</p>

<ol type="1">
<li>
<p>如果這個問題只在某一個您自己寫的某個特定程式發生，那
麼很有可能是您的程式碼有問題。</p>
</li>

<li>
<p>如果這個問題是在 FreeBSD 的某些系統檔案發生，有可能是
因為程式有問題，但通常在我們這群讀 FAQ 的使用者去跑這些有
問題的程式碼前，它們早就就已經被解決了（這是 -current 在做 的事）。</p>
</li>
</ol>

<p>尤其如果你在編譯一個程式，但是每次編譯器跑出來的結果都不一樣
的話，這是一個無解的問題，而<span class="emphasis"><i class="EMPHASIS">不是</i></span>
FreeBSD 臭蟲。</p>

<p>舉例來說，假設您正在跑 “make buildworld”， 而 compiler 在將 <tt
class="FILENAME">ls.c</tt> 編譯成 <tt class="FILENAME">ls.o</tt>
時發生錯誤，這時請再跑一次 “make buildworld”，如果 compiler 依然在同樣的地方發
生問題，那麼就是程式碼有問題－－請更新原始碼然後再試試看。而如果 compiler
是在其他的地方發生錯誤，那麼幾乎可以確定是硬體的問題了。</p>

<p>您這時應該做什麼：</p>

<p>如果是第一種情形，可以使用一些 debugger，如：gdb，來找出程式
是在那兒會去嘗試存取錯誤的記憶體位址，然後再修正它。</p>

<p>如果是第二種情形，就需要檢查看看是不是硬體的問題了。</p>

<p>一些造成硬體不穩的原因包括：</p>

<ol type="1">
<li>
<p>可能是硬碟過熱：請檢查機殼內的風扇是否運作正常，因為您
的硬碟（或者還有其他的硬體裝置）過熱了。</p>
</li>

<li>
<p>處理器過熱：這個有可能是因為超頻，或者是處理器的風扇掛了。
不論是哪種原因，您都需要將所有的元件回復到它們原先設定的工作狀
態，這樣才能解決這個問題。舉個例子來說：將處理器調回原先的工作 頻率。</p>

<p>如果您還是堅持要超頻的話，請謹記，與其燒壞而需要換新的一台
主機，不如將速度調慢一點！除此之外，不管你覺得它安不安全，一般
人對於您因為超頻而發生的問題，是不會有什麼同情心的。</p>
</li>

<li>
<p>不穩定的記憶體：如果主機上有安裝數根 SIMM/DIMM 記憶體，
試著把它們全拆下來，然後一根一根插上去做測試，藉此縮小範圍，
以便找出有問題的某根記憶體或是某種記憶體組合。</p>
</li>

<li>
<p>最佳化過頭的主機板設定：在 BIOS &#65533;或是有些主機板的 jumper 上，有時可以更改一些
timing，但在大多數的情形&#65533;，使用預設值就 已經足夠了。況且有時候把 RAM 的 wait
states 設太小，或是在 BIOS &#65533;，把 “RAM Speed: Turbo” 這個或是其他類似
的選項打開都有可能會造成一些不正常的現象。一個解決的方法是把 BIOS
設回預設值，不過在這之前記得先記下目前的設定！</p>
</li>

<li>
<p>供給主機板的電力不乾淨或是不足。試著把系統內沒有用到的 I/O 卡．硬碟或是 CDROM
暫時拆掉或是拔掉電源線，看看你的電源
供應器是不是能夠在小一點的負荷下正常工作。不然就是換上另一
個新的電源供應器，最好是瓦數高一點的（打個比方來說，如果原 先的電源供應器是 250
瓦的，那麼就換上 300 瓦的試試）。</p>
</li>
</ol>

<p>請順便參閱 SIG11 FAQ（連結在下面），雖然它是站在 Linux 的角
度寫的，可是裡面對這些問題有許多很棒的解說。它裡面也有討論為什麼
有問題的記憶體能通過軟體或硬體的測試的原因。</p>

<p>最後，如果上面這些原因都排除了，那麼有可能是遇到了 FreeBSD
&#65533;的一隻臭蟲，請參閱指示做一個問題回報。</p>

<p>這兒有一個更詳細的 FAQ － <a href="http://www.bitwizard.nl/sig11/" target="_top">the
SIG11 problem FAQ</a></p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TRAP-12-PANIC" name="TRAP-12-PANIC"></a><b>5.7.</b> 當機時出現：“<tt
class="ERRORNAME">Fatal trap 12: page fault in kernel mode</tt>”，或是 “<tt
class="ERRORNAME">panic:</tt>”再加上一堆錯誤訊息， 該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 的開發者對於這些錯誤訊息相當的有興趣，但是他們需要
更詳細的一些細節。請把您的當機的訊息全部複製下來，接著查閱 FAQ &#65533; <a
href="#KERNEL-PANIC-TROUBLESHOOTING">kernel panics</a> 這節，依說明編譯一個含除錯碼的
kernel，以取得函式 呼叫順序（backtrace）。這個聽起來很難，但實際上並不需要任何程式
設計的能力，您只需要依照指示做即可。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SCREEN-LOSES-SYNC" name="SCREEN-LOSES-SYNC"></a><b>5.8.</b>
為什麼當我開機時，螢幕變黑，且不停閃動？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題，已知是由 ATI Mach 64 顯示卡所引起的。因為這塊卡 使用到 <tt
class="LITERAL">2e8</tt> 這個位址，而這與第四個序列埠 （serial
port）所使用的位址相同。而在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a> 這個驅動
程式&#65533;，不知道是 bug 或是功能（feature），就算您沒有第四個序 列埠，或是已經將
sio3（第四個序列埠）取消了，它 <span class="emphasis"><i
class="EMPHASIS">依然</i></span>會去嘗試驅動它。</p>

<p>直到這個問題被解決以前，您可以使用這個方法：</p>

<ol type="1">
<li>
<p>在看到開機提示時輸入 <code class="OPTION">-c</code> （這會讓 kernel
進入設定模式）。</p>
</li>

<li>
<p>取消 <tt class="DEVICENAME">sio0</tt> ， <tt class="DEVICENAME">sio1</tt> ， <tt
class="DEVICENAME">sio2</tt> 和 <tt class="DEVICENAME">sio3</tt>（全部）。 這可以讓 sio
驅動程式不動作 -&gt; 於是問題解決。</p>
</li>

<li>
<p>輸入 exit 以繼續啟動程序。</p>
</li>
</ol>

<p>如果您想要使用您的序列埠，您需要修改 <tt
class="FILENAME">/usr/src/sys/i386/isa/sio.c</tt>，在該檔中找出 <tt
class="LITERAL">0x2e8</tt> 這個字串，移除這個字串及它前面的逗號
（保留後面的），然後重新編譯一個新的 kernel。</p>

<p>就算使用了上面這些方法，X Window 仍然有可能無法順利執行。
如果發生了這種情形，請確定你用的 XFree86 的版本是最新的 XFree86 3.3.3
或是其後的版本。它們有內建支援 Mach 64 這張卡，甚至為了這 些卡還附有一個特別的 X
Server</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REALLYBIGRAM" name="REALLYBIGRAM"></a><b>5.9.</b> 為什麼我的系統裝有 128 MB 的
RAM，而 FreeBSD 只用了其中的 64MB？</p>
</div>

<div class="ANSWER">
<p><b></b>因為 FreeBSD 是使用呼叫 BIOS 來取得記憶體大小的方法，因此它 只能偵測到 16 bits
位元長度的 KByte 大小（65535 KBytes = 64MB） （或者更少..。有些 BIOS
將最高記憶體大小限為只有 16MB） 如果您擁有 64MB 以上的 RAM，FreeBSD
會嘗試去偵測出它，但是有可能 會失敗。</p>

<p>要解決這個問題，您需要使用下面所提的 kernel 設定選項。雖然有 方法可以從 BIOS
中取得記憶體的完整資訊，但是目前我們在開機區中並
沒有多餘的空間來做這件事。當某天開機區空間不足的情形獲得解決時， 我們將會使用 BIOS
的延伸功能來取得記憶體的完整資訊...但現在我們 將它放在 kernel 設定選項中。</p>

<p><tt class="LITERAL">options "MAXMEM=<tt class="REPLACEABLE"><i>n</i></tt>"</tt></p>

<p><tt class="REPLACEABLE"><i>n</i></tt> 是指您的記憶體大小，以 KB 為單位。以一台有 128MB
RAM 的機器來說，您可使用 <tt class="LITERAL">131072</tt>這個數字。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KMEM-MAP-TOO-SMALL" name="KMEM-MAP-TOO-SMALL"></a><b>5.10.</b> 機器上的 RAM 有
1GB 以上，可是為何卻收到 “kmem_map too small” 的 panic 錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>通常 FreeBSD 會依據機器狀況來自動調整 kernel 相關參數設定，比如：
根據機器所裝的 RAM 大小來決定同時可開啟的檔案數量多寡。 然而，在 1GB RAM(含以上)
的機器上，這個『自動調整』的機制可能有時會高估： 比方說..開機時，kernel
會先配置各種不同用途的表格及其他架構放到記憶體上，
然後，當整個作業系統都開始運作之後，kernel 就會開始不夠空間來做記憶體配置的動態調整，
於是就 panic 掛了。</p>

<p>解法是：把 <code class="OPTION">VM_KMEM_SIZE_MAX</code> 加到 kernel 設定檔內，
並重新編譯 kernel，比如：</p>

<p><tt class="LITERAL"><code class="OPTION">options
VM_KMEM_SIZE_MAX=419430400</code></tt></p>

<p>這樣會設定 400&nbsp;MB 來給 kernel 使用，而且採用 400&nbsp;MB 的話， 目前在 6GB RAM
的機器上都可被有效運用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PANIC-KMEMMAP-TOO-SMALL" name="PANIC-KMEMMAP-TOO-SMALL"></a><b>5.11.</b> 機器上
RAM 不到 1GB ，但仍會出現 “<tt class="ERRORNAME">kmem_map too small!</tt>” 的 panic
錯誤訊息</p>
</div>

<div class="ANSWER">
<p><b></b>之所以 panic 的原因在於系統用光了給 network buffer 用途的 virtual memory
(尤其是 mbuf clusters)。解法是增加給 mbuf clusters 用的 virtual memory 數量，這步驟請參閱
FreeBSD 使用手冊的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/configtuning-kernel-limits.html#NMBCLUSTERS"
 target="_top">網路限制篇</a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PROC-TABLE-FULL" name="PROC-TABLE-FULL"></a><b>5.12.</b> 為什麼我一直看到 “<tt
class="ERRORNAME">/kernel: proc: table is full</tt>” 這個錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD kernel 只允許一定數量的 process 在同一時間裡同 時運作。而這個數目是根據
kernel 設定檔裡面的 <tt class="LITERAL">MAXUSERS</tt> 值來決定的。<tt
class="LITERAL">MAXUSERS</tt> 這個值也會影響其他的 kernel 內定值，比如說 network buffer
(請參閱<a href="#PANIC-KMEMMAP-TOO-SMALL">這個</a>之前討
論過的問題)。如果機器負荷(load)很重，您可能需要增加 <tt class="LITERAL">MAXUSERS</tt>
這個值。這麼作會一併提高系統的其他內 定值，包括最大可擁有的 process 數等。</p>

<p>若要調整 <tt class="LITERAL">MAXUSERS</tt>，請參閱 FreeBSD 使用手冊中的 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/configtuning-kernel-limits.html#KERN-MAXFILES"
 target="_top">檔案/Process的限制</a> 章節。
(雖然該處指的是『檔案的開啟數量限制』，但也適用於 process部分。)</p>

<p>在 FreeBSD 4.4 之後，<tt class="LITERAL">MAXUSERS</tt> 已經變成可 以靠著更改 <tt
class="FILENAME">/boot/loader.conf</tt> &#65533;的 <code
class="VARNAME">kern.maxusers</code> 這個值而調整的變數了。而在之前 的 FreeBSD
版本中，這個值只能在 kernel 設定檔&#65533;調整。</p>

<p>如果機器負荷並不重，而您只是需要同時跑很多很多 process， 那麼也可以直接用 sysctl 調整
<code class="VARNAME">kern.maxproc</code> 值。 假如這些 process
都是屬於某個使用者的，那麼您還需要另 外調整 <code
class="VARNAME">kern.maxprocperuid</code> 這個值，使它比新 的 <code
class="VARNAME">kern.maxproc</code> 這個值少 1 (一定要少 1 ， 因為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a>
這個系統程式絕對要保持在運作狀態)。</p>

<p>如果想在每次開機都要更改 sysctl 的值，而且您的 FreeBSD 是 最近的版本的話，請在 <tt
class="FILENAME">/etc/sysctl.conf</tt> 這 個檔中設定，而如果是舊的版本，可以在 <tt
class="FILENAME">/etc/rc.local</tt> 中作設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CMAP-BUSY-PANIC" name="CMAP-BUSY-PANIC"></a><b>5.13.</b> 為什麼用新 kernel
開機時，出現 “<tt class="ERRORNAME">CMAP busy</tt>” 這個錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>用來偵測過時 <tt class="FILENAME">/var/db/kvm_*.db</tt> 檔案的機制偶爾會
發生問題，而使用到了一個不協調（mismatch）的檔案有時就會導致 panic。</p>

<p>如果發生了這個問題，請重新開機，進入單使用者模式，然後執 行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">rm /var/db/kvm_*.db</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BRKADRINT-ILLEGAL-HOST-ACCESS"
name="BRKADRINT-ILLEGAL-HOST-ACCESS"></a><b>5.14.</b> 請問這個訊息：“<tt
class="ERRORNAME">ahc0: brkadrint, Illegal Host Access at seqaddr 0x0</tt>”
是什麼意思？</p>
</div>

<div class="ANSWER">
<p><b></b>這是一個和 Ultrastor SCSI 控制卡有關的衝突（conflict）。</p>

<p>在開機時，進入 kernel 設定選單取消 <tt
class="DEVICENAME">uha0</tt>，它是造成這個問題的原因。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ACI0-ILLEGAL-CABLE" name="ACI0-ILLEGAL-CABLE"></a><b>5.15.</b>
在開機時，我看到這個錯誤訊息 “<tt class="ERRORNAME">ahc0: illegal cable
configuration</tt>”。 我的排線確定有接對。 是出了什麼問題呢？</p>
</div>

<div class="ANSWER">
<p><b></b>您的主機板可能不支援自動終端電阻設定。請進到 SCSI 的 BIOS
裡面手動指定正確的終端電阻順序，而不要使用自動設定。AIC7XXX 的
驅動程式並無法知道有沒有這些排線偵測（以及自動終端電阻設定）的 電路（external
logic）存在。如果 EEPROM 裡面的設定是 "automatic termination"
時，它只會單純假定這些電路當然是存在的。
若缺少了這個電路，驅動程式在設定終端電阻時就常常出問題。 而這種問題將導致 SCSI
匯流排的可靠性降低。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAIL-LOOPBACK" name="MAIL-LOOPBACK"></a><b>5.16.</b> 為什麼 Sendmail 一直出現
““<tt class="ERRORNAME">mail loops back to myself</tt>”” 這個錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題在 sendmail 的 FAQ 中是這樣回答的:-</p>

<p class="LITERALLAYOUT">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;我一直收到有關&nbsp;"Local&nbsp;configuration&nbsp;error"&nbsp;的信件，例如：<br />

<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;553&nbsp;relay.domain.net&nbsp;config&nbsp;error:&nbsp;mail&nbsp;loops&nbsp;back&nbsp;to&nbsp;myself<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;554&nbsp;&lt;user@domain.net&gt;...&nbsp;Local&nbsp;configuration&nbsp;error<br />

<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我要如何解決這個問題？<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;您利用&nbsp;MX&nbsp;設定，讓要寄到某&nbsp;domain（如:&nbsp;domain.net）的信件，<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;寄到您所指定的機器（在這個例子中為&nbsp;relay.domain.net），但是這<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;部機器並未被設定接受&nbsp;domain.net&nbsp;的信件。請把&nbsp;domain.net&nbsp;加到<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/sendmail.cw&nbsp;中（如果您有使用&nbsp;FEATURE(use_cw_file))&nbsp;或是<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在&nbsp;sendmail.cf&nbsp;中加入&nbsp;"Cw&nbsp;domain.net"<br />

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>

<p>最新版本的 <a href="ftp://rtfm.mit.edu/pub/usenet/news.answers/mail/sendmail-faq"
target="_top">sendmail FAQ</a> 現在已不再隨著 sendmail “出貨”。 它目前是被定期的發表在
<a href="news:comp.mail.sendmail" target="_top">comp.mail.sendmail</a>， <a
href="news:comp.mail.misc" target="_top">comp.mail.misc</a>，<a
href="news:comp.mail.smail" target="_top">comp.mail.smail</a>，<a
href="news:comp.answers" target="_top">comp.answers</a>，和 <a href="news:news.answers"
target="_top">news.answers</a>. 您也可以寄一封 Email 到 <code class="EMAIL">&#60;<a
href="mailto:mail-server@rtfm.mit.edu">mail-server@rtfm.mit.edu</a>&#62;</code>，然後在信件內文
中寫上 <tt class="LITERAL">send usenet/news.answers/mail/sendmail-faq</tt> 以取得這份 FAQ
文件。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REMOTE-FULLSCREEN" name="REMOTE-FULLSCREEN"></a><b>5.17.</b>
為什麼執行遠端機器（remote machine）的全螢幕的軟體時， 有不正常的情形？</p>
</div>

<div class="ANSWER">
<p><b></b>或許遠端機器並非將您的終端機模式設為 FreeBSD console 所用的 <tt
class="LITERAL">cons25</tt>，而是設為其它模式。</p>

<p>這兒有幾個解決這個問題的方法：</p>

<ul>
<li>
<p>在 logging 進遠端機器後，更改您的 shell 變數 TERM 為 <tt class="LITERAL">ansi</tt>
或是 <tt class="LITERAL">sco</tt> ﹙如果遠端機器支援這些模式的話）。</p>
</li>

<li>
<p>使用支援 VT100 的模擬軟體，如 FreeBSD console 下的 <b class="APPLICATION">screen</b>
軟體。 <b class="APPLICATION">screen</b> 提供您在一個 terminal &#65533;同時跑好幾個
session 的能力，而且它本身也是一個相當好 的軟體。每個 <b class="APPLICATION">screen</b>
都像是一個 VT100 的終端機，所以遠端機器的 TERM 變數應該設為 <tt
class="LITERAL">vt100</tt>。</p>
</li>

<li>
<p>在遠端機器的終端機資料庫（terminal database）中加入 <tt class="LITERAL">cons25</tt>
的資料。加入的方法視遠端機器的 作業系統不同而有所差異。請參閱遠端機器給系統管理員的說明
書，應該會有所幫助。</p>
</li>

<li>
<p>啟動 FreeBSD 的 X 伺服器，然後使用一些 X Window 下的 終端機模擬器來登入遠端機器，例如
<tt class="COMMAND">xterm</tt> 或 <tt class="COMMAND">rxvt</tt>。而遠端機器的 TERM
變數應該要 設為 <tt class="LITERAL">xterm</tt> 或 <tt class="LITERAL">vt100</tt>。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CALCRU-NEGATIVE" name="CALCRU-NEGATIVE"></a><b>5.18.</b> 為什麼我的機器一直顯示
“<tt class="ERRORNAME">calcru: negative time...</tt>”？</p>
</div>

<div class="ANSWER">
<p><b></b>跟中斷（interrupt）有關的不同硬體 與/或 軟體的搭配都有可能造成
這個問題。這有可能是 bug 或是某個裝置本身的問題。在平行埠上使用 大的 MTU 來作 TCP/IP
傳輸可以重現這個問題。若是圖形加速卡造成這個 問題的話，您應該先檢查卡的中斷設定。</p>

<p>這個問題的邊際效應是會造成有些 process 出現 “SIGXCPU exceeded cpu time limit”
的訊息，而不正常 停止。</p>

<p>若是 FreeBSD 3.0 或是 1998 年 11 月 29 日以後其他版本，萬一
這個問題一直無法以其他方法解決，就只能設定 sysctl 變數：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w kern.timecounter.method=1</kbd>
</pre>

<p>這樣會對效能有些影響，但是若考慮到這個問題帶來的後果，這樣做
是值得的。如果這個問題還是存在的話，讓 sysctl 那個值依然設為 1， 然後增加 kernel 設定檔中
<tt class="LITERAL">NTIMECOUNTER</tt> 這個選 項的數值。如果您將 <tt
class="LITERAL">NTIMECOUNTER</tt> 增加到 20 依
然無法解決這個問題，那麼您機器上的中斷已經多到無法讓計數器維持在 可靠的狀態了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PCM0-NOT-FOUND" name="PCM0-NOT-FOUND"></a><b>5.19.</b> 出現 “<tt
class="ERRORNAME">pcm0 not found</tt>” 這個訊息，或者是 我的音效卡變成了 <tt
class="DEVICENAME">pcm1</tt>，但在 kernel 設定 檔&#65533;我是設 <tt
class="LITERAL">device pcm0</tt> 啊。這是怎麼回事呢？</p>
</div>

<div class="ANSWER">
<p><b></b>如果您在 FreeBSD 3.x 上使用 PCI 音效卡就會發生這種問題。 因為<tt
class="DEVICENAME">pcm0</tt> 這個 device 是內定保留給 ISA 的音效卡的，所以如果您有一張
PCI 的音效卡，您就會遇到這個問題， 而您的卡會變成 <tt class="DEVICENAME">pcm1</tt>。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 如果您只把 kernel 設定檔中的設定改成 <tt class="LITERAL">device pcm1</tt>
是無法除去這個警告訊息的， 這樣會造成 <tt class="DEVICENAME">pcm1</tt> 被保留給 ISA
音效卡， 而 PCI 音效卡則會變成 <tt class="DEVICENAME">pcm2</tt> （外加 “<tt
class="ERRORNAME">pcm1 not found</tt>” 的警告訊息）。</p>
</blockquote>
</div>

<p>如果您有一張 PCI 的音效卡，您需要 make <tt class="DEVICENAME">snd1</tt> 這個
device，而不是 <tt class="DEVICENAME">snd0</tt>：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">./MAKEDEV snd1</kbd>
</pre>

<p>這個問題在 FreeBSD 4.x 上並不會發生，因為很多人投下了許多心 力讓它更<span
class="emphasis"><i class="EMPHASIS">PnP 導向</i></span>，而且 <tt
class="DEVICENAME">pcm0</tt> 這個 device 也不再是只保留給 ISA 的音效卡了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PNP-NOT-FOUND" name="PNP-NOT-FOUND"></a><b>5.20.</b> 為什麼在更新到 FreeBSD 4.X
後會抓不到我的 PnP 卡 （或者是抓成 <tt class="LITERAL">unknown</tt>）？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 4.X 現在已經更 <span class="emphasis"><i class="EMPHASIS">PnP
導向</i></span>了， 而邊際效應就是會發生有些在 FreeBSD 3.X 可以用的 PnP 裝置
（如音效卡或是內插式數據機）變成無法使用。</p>

<p>這個原因可以用一封由 Peter Wemm 發到 freebsd-questions 這個 mailing list
上的信來解釋，它原本是解釋為什麼有一個內 插式數據機，在系統升級到 FreeBSD 4.x
後，就沒法被抓到了 （在 <tt class="LITERAL">[]</tt>
&#65533;的是另外加的註解，讓內容更易懂）。</p>

<a id="AEN1858" name="AEN1858"></a>
<blockquote class="BLOCKQUOTE">
<p>The PNP bios preconfigured it [the modem] and left it laying around in port space，so
[in 3.x] the old-style ISA probes “found” it there.</p>

<p>Under 4.0，the ISA code is much more PnP-centric. It was possible [in 3.x] for an ISA
probe to find a “stray” device and then for the PNP device id to match and then fail
due to resource conflicts. So，it disables the programmable cards first so this double
probing cannot happen. It also means that it needs to know the PnP id's for supported PnP
hardware. Making this more user tweakable is on the TODO list.</p>
</blockquote>

<p>如果要讓裝置能再度運作，我們需要找出它的 PnP id，然後再將它 加入一份在偵測 ISA
裝置時會使用的表中。可以執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pnpinfo&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pnpinfo</span>(8)</span></a>
來偵測這個裝置，舉例來說，下面是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pnpinfo&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pnpinfo</span>(8)</span></a>
抓到的一個內插 式數據機的資料：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pnpinfo</kbd>
Checking for Plug-n-Play devices...

Card assigned CSN #1
Vendor ID PMC2430 (0x3024a341)，Serial Number 0xffffffff
PnP Version 1.0，Vendor Version 0
Device Description: Pace 56 Voice Internal Plug &#38; Play Modem

Logical Device ID: PMC2430 0x3024a341 #0
        Device supports I/O Range Check
TAG Start DF
    I/O Range 0x3f8 .. 0x3f8，alignment 0x8，len 0x8
        [16-bit addr]
    IRQ: 4  - only one type (true/edge)
</pre>

<p>[more TAG lines elided]</p>

<pre class="SCREEN">
TAG End DF
End Tag

Successfully got 31 resources，1 logical fdevs
-- card select # 0x0001

CSN PMC2430 (0x3024a341)，Serial Number 0xffffffff

Logical device #0
IO:  0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8
IRQ 5 0
DMA 4 0
IO range check 0x00 activate 0x01
</pre>

<p>您所需要的資訊是一開始看到的 “Vendor ID” 這一行。括號中的十六位元碼（這個例子中是
0x3024a341）就是 PnP id，而在這之前的字串（PMC2430）則是一個獨一無二的 ASCII id。
而這些資料需要被加到 <tt class="FILENAME">/usr/src/sys/isa/sio.c</tt>
這個檔案&#65533;。</p>

<p>為了防止任何東西出錯，您應該要先備份目前的 <tt class="FILENAME">sio.c</tt>。而且您要
submit PR 時也需要這個 原始檔案來做出 patch（您應該會將它 submit PR 吧..：）..）。
接著就編輯 <tt class="FILENAME">sio.c</tt> 找尋下面這行</p>

<pre class="PROGRAMLISTING">
static struct isa_pnp_id sio_ids[] = {
</pre>

<p>接著往下捲動，找個正確的位置來插入您的裝置資訊。您看到的就
下面這個樣子，它們是照右邊註解裡面的 ASCII 這個 Vender ID 做排 序的，或是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pnpinfo&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pnpinfo</span>(8)</span></a>
所找到的一部分 <span class="emphasis"><i class="EMPHASIS">裝置描述</i></span>：</p>

<pre class="PROGRAMLISTING">
{0x0f804f3f，NULL}，    /* OZO800f - Zoom 2812 (56k Modem) */
{0x39804f3f，NULL}，    /* OZO8039 - Zoom 56k flex */
{0x3024a341，NULL}，    /* PMC2430 - Pace 56 Voice Internal Modem */
{0x1000eb49，NULL}，    /* ROK0010 - Rockwell ? */
{0x5002734a，NULL}，    /* RSS0250 - 5614Jx3(G) Internal Modem */
</pre>

<p>把您這個裝置的十六進位的 Vender ID 加到正確的地方，存檔， 然後重新編一個
kernel，再重開機。之後這個裝置應該就會像在 FreeBSD 3.X 下，被偵測為 <tt
class="LITERAL">sio</tt> 裝置了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NLIST-FAILED" name="NLIST-FAILED"></a><b>5.21.</b>
為什麼我常常在跑一些程式（例如 <tt class="COMMAND">top</tt> 或 <tt
class="COMMAND">systat</tt>）的時候出現 “<tt class="ERRORNAME">nlist failed</tt>”
這個錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題是因為您跑的程式需要一個特別的 kernel symbol，可是
不知道什麼原因而找不到﹔而會發生這個問題可能是因為下面兩個原因：</p>

<ul>
<li>
<p>您的 kernel 和 userland 的檔案版本並不一致（例如說，您 編了一個新的
kernel，但是並沒有執行對應的 <tt
class="MAKETARGET">installworld</tt>，或是其他類似情形）， 因此 symbol table
的內容就和應用程式編譯時的不太一樣了。如 果是這種情形，請執行完整的升級步驟（請參閱 <tt
class="FILENAME">/usr/src/UPDATING</tt> 以得知正確的流 程）。</p>
</li>

<li>
<p>您沒有用 <tt class="COMMAND">/boot/loader</tt> 來載入您的 kernel，而是直接由 boot2
開機（請參閱 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">boot</span>(8)</span></a>）。 雖然說跳過
<tt class="COMMAND">/boot/loader</tt> 並沒有什麼錯， 但是它在 kernel symbols
跟應用程式的溝通方面佔了很重的份量。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CONNECTION-DELAY" name="CONNECTION-DELAY"></a><b>5.22.</b> 為什麼我用 <tt
class="COMMAND">ssh</tt> 或 <tt class="COMMAND">telnet</tt>
連到我的電腦時，會等待很長的一段時間才能連上？</p>
</div>

<div class="ANSWER">
<p><b></b>症狀：TCP 連線建立之後和詢問密碼之前（如果是在說 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a> 的話，則是
login 提示符號跳出來之前），要等待很長的一段時 間。</p>

<p>問題所在：這種延遲情形常常是因為伺服軟體（server software） 嘗試要將客戶端（client）的
IP 位址轉換成主機名稱。因為很多伺服 軟體，包括 FreeBSD 內建的 Telnet 和
SSH，為了將主機名稱寫入紀 錄檔中以供管理者作參考，而會做這項動作。</p>

<p>解決方法：如果這個問題在您連接不同的伺服器時都會發生，那麼
問題是在您客戶端這一方﹔同樣的，如果別人只有在連到您的伺服器上
才會發生這個情形，那麼問題就是在伺服器這邊了。</p>

<p>如果是客戶端這方有問題，唯一的方法就是將 DNS 伺服器修好，
這樣對方伺服器才能正確的轉換名稱。如果問題是在內部區域網路發
生的，這應該是伺服器有問題，請詳細檢查一下﹔相反的，如果是您 在上 Internet
時發生的，那麼您需要跟您的 ISP 聯絡，請他們解決 這個問題。</p>

<p>如果是伺服器這邊的問題，而且是發生在內部區域網路，那麼您需
要設定這個伺服器，使它能正確將內部網路的 IP 位址轉換為主機名稱。 請參閱 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">hosts</span>(5)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
的說明以獲得更多資訊。如 果是在 Internet 上的伺服器發生這個問題，那麼有可能是您伺服器的
轉換功能出問題。您可以試試查詢另一個主機名稱，比如： <tt
class="HOSTID">www.yahoo.com</tt>。如果查不到，那麼可以確定是您這 邊出問題了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STRAY-IRQ" name="STRAY-IRQ"></a><b>5.23.</b> “<tt class="ERRORNAME">stray
IRQ</tt>” 這個錯誤訊息是什麼意思？</p>
</div>

<div class="ANSWER">
<p><b></b>Stray IRQs 是硬體 IRQ 有點小問題的現象，大多是因為硬體本身
在發出中斷需求後，又取消了它自己的中斷要求。</p>

<p>有三個方法可以應付這個問題：</p>

<ul>
<li>
<p>不理會這個警告。反正一個 irq 出現五次警告後系統就不會 再顯示了。</p>
</li>

<li>
<p>把 <code class="FUNCTION">isa_strayintr()</code> &#65533;的值，由 5 改成
0，這樣所有的警告訊息都不會出現。</p>
</li>

<li>
<p>安裝使用 irq 7 的平行埠硬體設備，以及它的 PPP 驅動程式
（這個大部分系統都有做），接著安裝 ide 硬碟或是其他會使用 irq 15
的硬體設備以及它的驅動程式。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FILE-TABLE-FULL" name="FILE-TABLE-FULL"></a><b>5.24.</b> 為什麼 “<tt
class="ERRORNAME">file: table is full</tt>” 這個訊息 一直在 dmesg &#65533;重複出現？</p>
</div>

<div class="ANSWER">
<p><b></b>這個錯誤訊息代表了您系統的 file descriptors 已經使用光了。 請參閱手冊內 <a
href="../handbook/configtuning-kernel-limits.html" target="_top">Tuning Kernel Limits</a>
裡面的 <a href="../handbook/configtuning-kernel-limits.html#KERN-MAXFILES"
target="_top">kern.maxfiles</a> 這個章節，裡面有一些討論及解決方法。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LAPTOP-CLOCK-SKEW" name="LAPTOP-CLOCK-SKEW"></a><b>5.25.</b>
為什麼我筆記型電腦上的時鐘一直顯示錯誤的時間？</p>
</div>

<div class="ANSWER">
<p><b></b>您的筆記型電腦裡有兩個以上的時鐘，而 FreeBSD 選到了錯的 那個。</p>

<p>執行 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dmesg</span>(8)</span></a>，檢查一下有
<tt class="LITERAL">Timecounter</tt> 字串的那幾行。最後一行是 FreeBSD 選用的，通常是 <tt
class="LITERAL">TSC</tt>。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">dmesg | grep Timecounter</kbd>
Timecounter "i8254"  frequency 1193182 Hz
Timecounter "TSC"  frequency 595573479 Hz
</pre>

<p>您可以執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(3)</span></a> 看一下 <code
class="VARNAME">kern.timecounter.hardware</code> 這個值做確認。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl kern.timecounter.hardware</kbd>
kern.timecounter.hardware: TSC
</pre>

<p>BIOS 可能在一些情形下會更改 TSC 的時脈--有時候是因為
在使用電池工作時會更改處理器的速度，另外也有可能是進入了省電模 式，可是 FreeBSD
並不會察覺到這些調整，而會發生時間增加或是減 少的情形。</p>

<p>在上面的例子當中，我們看到還有 <tt class="LITERAL">i8254</tt> 這個時鐘可以選擇，執行
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(3)</span></a>
用手動的方式將這個值寫入 <code class="VARNAME">kern.timecounter.hardware</code> 中。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w kern.timecounter.hardware=i8254</kbd>
kern.timecounter.hardware: TSC -&gt; i8254
</pre>

<p>這樣您的筆記型電腦應該就可以保持正確的時間了。</p>

<p>如果要讓這個更改的動作再每次開機時自動執行，在 <tt
class="FILENAME">/etc/sysctl.conf</tt> &#65533;加入下面這行。</p>

<pre class="PROGRAMLISTING">
kern.timecounter.hardware=i8254
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NULL-NULL" name="NULL-NULL"></a><b>5.26.</b>
為什麼我的筆記型電腦無法正確的偵測到 PC card ？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題常常發生在灌了多個作業系統的筆記型電腦上。有些非 BSD 的作業系統會讓 PC
card 的硬體裝置處在一個不一致的狀態下 （inconsistent state）。使得 <tt
class="COMMAND">pccardd</tt> 在偵 測這片卡時，無法抓到正確的型號，而是 “<tt
class="ERRORNAME">"(null)""(null)"</tt>”。</p>

<p>您需要移除 PC card 插槽的電源以重置這個硬體裝置。一個方法是
將您的筆記型電腦關機（不是休眠模式，也不是待命模式﹔要完全的關
機）。等個幾秒鐘再重開機。這樣您的 PC card 應該就正常了。</p>

<p>有時有些筆記型電腦雖然看起來已經關機了，但實際上並沒有。
如果您發現上面那個方法沒有用，請關機，移除電池，等個幾秒鐘， 把電池裝上去然後重開機。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOT-READ-ERROR" name="BOOT-READ-ERROR"></a><b>5.27.</b> 為什麼在 BIOS
畫面之後，FreeBSD 的 boot loader 顯示 “<tt class="ERRORNAME">Read error</tt>”
然後就停止不動了？</p>
</div>

<div class="ANSWER">
<p><b></b>這是因為FreeBSD 的 boot loader 無法正確的找出硬碟的
geometry。這樣的話，就需要在用 fdisk 分割或是修改 FreeBSD 的 slice
時，手動將正確的值輸入進去了。</p>

<p>正確的硬碟 geometry 值在 BIOS 裡面可以查的到。注意該硬碟的 cylinders，heads 以及
sectors 這些數值。</p>

<p>在執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>的 fdisk
時，按下 <b class="KEYCAP">G</b> 以便手動設定硬碟的 geometry。</p>

<p>這時會有一個對話框跳出來，詢問您有關 cylinders，heads 以及 sectors
這些東西的值。請將剛剛在 BIOS 查到的數字，以 / 作分隔輸 入進去。</p>

<p>舉例來說，如果是 5000 cylinders，250 sectors 和 60 sectors 就輸入 <kbd
class="USERINPUT">5000/250/60</kbd></p>

<p>輸入完後請按 enter 鍵確認，最後按下 <b class="KEYCAP">W</b> 鍵把
新的分割區表寫入硬碟當中。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOTMANAGER-RESTORE" name="BOOTMANAGER-RESTORE"></a><b>5.28.</b>
另一個作業系統摧毀了我的 Boot Manager。我要怎麼樣才能把它還 原回來？</p>
</div>

<div class="ANSWER">
<p><b></b>執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> 接著選
Configure，然後選 Fdisk。 再來用<b class="KEYCAP">空白</b>鍵選擇原先 Boot Manager
所在的硬碟。 按下 <b class="KEYCAP">W</b> 鍵來作寫入的動作。這時會跳出一個提示
訊息，詢問您要安裝哪一個 boot loader。請選擇 Boot Manager， 這樣就可以將它還原了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INDEFINITE-WAIT-BUFFER" name="INDEFINITE-WAIT-BUFFER"></a><b>5.29.</b>
這個錯誤訊息：“<tt class="ERRORNAME">swap_pager: indefinite wait buffer:</tt>”
是什麼意思呢？</p>
</div>

<div class="ANSWER">
<p><b></b>這個訊息是說有一個執行程序正在嘗試將分頁記憶體（page memory）
寫入硬碟中，而這個動作嘗試了 20 秒鐘仍然無法成功。這個有可能是因為
硬碟有壞軌、電路或排線有問題、以及其他跟硬碟讀出寫入有關的硬體設備。
如果真的是硬碟壞軌的問題，您應該會在 <tt
class="FILENAME">/var/log/messages</tt>這個檔案中，或是在執行 <tt
class="COMMAND">dmesg</tt>這個指令後，看到有關磁碟錯誤的訊息。
如果沒有，那麼請檢查您的排線還有接頭連接是否良好。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TOUCH-NOT-FOUND" name="TOUCH-NOT-FOUND"></a><b>5.30.</b> 為何在
buildworld/installworld 時，會趴在 “<tt class="ERRORNAME">touch: not found</tt>”
的錯誤訊息?</p>
</div>

<div class="ANSWER">
<p><b></b>這錯誤訊息並不是指 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=touch&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">touch</span>(1)</span></a>
程式不見了，事實上可能是該檔檔案時間被設為未來的時間。 若機器上的 CMOS-clock
時鐘設定為當地時間 (非格林威治時間，比如台灣時間為 GMT +08:00 ，也就是 CST
中原標準時間)， 那麼請在開機時，先選 single user 模式進入，然後打 <tt
class="COMMAND">adjkerntz&nbsp;-i</tt> 來調整 kernel clock 與機器上的 CMOS-clock
來同步。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="COMMERCIAL" name="COMMERCIAL"></a>Chapter 6 商業軟體</h1>

Vanilla Shu

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 這一節的內容還是相當少，不過我們當然希望各個公司能為它加點內容 :) FreeBSD
組織和列在這裡的任何一家公司都沒有金錢上的利害關係，列出來純粹只是對大眾公開介紹(同時也認為在
FreeBSD 上的商機若興旺，會對 FreeBSD
可長可久有極正面的效益)。我們鼓勵商業軟體的廠商把他們的產品包括在下面的名單中，在 <a
href="../../../../commercial/index.html" target="_top">Vendors page</a>
可以看到更長的列表。</p>
</blockquote>
</div>

<div class="QANDASET">
<dl>
<dt>6.1. <a href="#OFFICESUITE">在哪邊找到給 FreeBSD 用的 Office 套件呢？</a></dt>

<dt>6.2. <a href="#MOTIF">在哪邊可找到給 FreeBSD 用的 Motif？</a></dt>

<dt>6.3. <a href="#CDE">在哪邊可找到給 FreeBSD 用的 CDE？</a></dt>

<dt>6.4. <a href="#COMMERCIAL-XSERVER">有沒有要錢，但是高效率的 X servers？</a></dt>

<dt>6.5. <a href="#DATABASE-SYSTEMS">在 FreeBSD 上有任何的資料庫嗎？</a></dt>

<dt>6.6. <a href="#ORACLE-SUPPORT">可以在 FreeBSD 上執行 Oracle 嗎？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="OFFICESUITE" name="OFFICESUITE"></a><b>6.1.</b> 在哪邊找到給 FreeBSD 用的
Office 套件呢？</p>
</div>

<div class="ANSWER">
<p><b></b><a href="http://www.openoffice.org" target="_top">OpenOffice</a> 這套
open-source 性質的 office 可以在 FreeBSD 上正常運用自如，而 <span
class="TRADEMARK">Linux</span>&reg; 版的 <a href="http://www.sun.com/staroffice/"
target="_top">StarOffice</a>, 這套 closed-source 的 OpenOffice 加值版，也可以在 FreeBSD
上正常使用。</p>

<p>FreeBSD 上還有許多編排軟體、試算表(Spreadsheet)以及繪圖軟體都可用 Ports Collection
來安裝喔。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOTIF" name="MOTIF"></a><b>6.2.</b> 在哪邊可找到給 FreeBSD 用的 Motif？</p>
</div>

<div class="ANSWER">
<p><b></b>Open Group 釋出了 Motif 2.1.30 的原始碼，可以透過 <tt
class="LITERAL">open-motif</tt> package 安裝，或是由 ports 自行 編譯。相關的資訊，請參考
handbook 中的 <a href="../handbook/ports.html" target="_top">ports</a> 章節。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> Open Motif 只能在同樣也是 <a href="http://www.opensource.org/"
target="_top">open source</a> 的作業系統或計劃中使用。</p>
</blockquote>
</div>

<br />
<br />
<p>另外，也是有商業版本的 Motif 存在。也許這種版本的 Motif 不是免費的，但是絕對允許用在
closed-source 的環境下。 <a href="#APPS2GO">Apps2go</a> 提供了最便宜的 FreeBSD (包括 i386
跟 alpha)版本的 ELF Motif 2.1.20 套件。 <a id="APPS2GO" name="APPS2GO"></a></p>

<p>目前提供兩種不同環境的版本， “發展用版本” 及 “runtime 版本”
。這兩種套件都包括：</p>

<ul>
<li>
<p>OSF/Motif manager, xmbind, panner, wsm.</p>
</li>

<li>
<p>Development kit with uil, mrm, xm, xmcxx, include and Imake files.</p>
</li>

<li>
<p>Static and dynamic ELF libraries (for use with FreeBSD 3.0 and above).</p>
</li>

<li>
<p>Demonstration applets.</p>
</li>
</ul>

<p>因為 <span class="emphasis"><i class="EMPHASIS">Apps2go</i></span> 也有提供 NetBSD 和
OpenBSD 的版本，所以在訂購時請特別指定是要 FreeBSD 版本的 Motif！ 他們目前只提供以 FTP
的方式取得這份套件。</p>

<div class="VARIABLELIST">
<dl>
<dt>更多資訊</dt>

<dd>
<p><a href="http://www.apps2go.com/" target="_top">Apps2go WWW page</a></p>
</dd>

<dt>或</dt>

<dd>
<p><code class="EMAIL">&#60;<a
href="mailto:sales@apps2go.com">sales@apps2go.com</a>&#62;</code> 或 <code
class="EMAIL">&#60;<a
href="mailto:support@apps2go.com">support@apps2go.com</a>&#62;</code></p>
</dd>

<dt>或</dt>

<dd>
<p>phone (817) 431 8775 or +1 817 431-8775</p>
</dd>
</dl>
</div>

<p>也可以聯絡 <a href="#XIG">Xi Graphics</a>，他們提供了一個 FreeBSD a.out 格式的 Motif
2.0 套件。</p>

<p>在這套件中包括了：</p>

<ul>
<li>
<p>OSF/Motif manager, xmbind, panner, wsm.</p>
</li>

<li>
<p>Development kit with uil, mrm, xm, xmcxx, include and Imake files.</p>
</li>

<li>
<p>Static and dynamic libraries (for use with FreeBSD 2.2.8 and earlier).</p>
</li>

<li>
<p>Demonstration applets.</p>
</li>

<li>
<p>Preformatted man pages.</p>
</li>
</ul>

<p>在你跟他們訂購 Motif 時，請一定註明你要的是 FreeBSD 的版本！ 因為 <span
class="emphasis"><i class="EMPHASIS">Xi Graphics</i></span> 也同時提供了 BSDI 跟 Linux
版本的 Motif。目前發行的版本是放在四塊磁片中，將來他們會將所有的
東西都放到光碟裡，就像他們所發行的 CDE 一樣。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CDE" name="CDE"></a><b>6.3.</b> 在哪邊可找到給 FreeBSD 用的 CDE？</p>
</div>

<div class="ANSWER">
<p><b></b><a href="#XIG">Xi Graphics</a> 以前有賣 FreeBSD 用的
CDE，不過現已停止發售了。</p>

<p>就許多方面而言，<a href="http://www.kde.org/" target="_top">KDE</a> 這個 open source
的桌面環境與 CDE 相當類似。此外，你可能會喜歡使用 <a href="http://www.xfce.org/"
target="_top">xfce</a>。KDE 及 xfce 都可由 <a
href="http://www.FreeBSD.org/ports/index.html" target="_top">ports 機制</a>來安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="COMMERCIAL-XSERVER" name="COMMERCIAL-XSERVER"></a><b>6.4.</b>
有沒有要錢，但是高效率的 X servers？</p>
</div>

<div class="ANSWER">
<p><b></b>有， <a href="http://www.xig.com/" target="_top">Xi Graphics</a> 有提供給
FreeBSD（或其他 Intel 平台上）用的 X 視窗加速產品。</p>

<p>Xi Graphics 所提供的高效能 X Server 有非常簡單的設定方式，
並且支援了目前市面上當紅的各大廠牌的顯示卡。它只給你 Binary 檔案，
是用磁片的方式發行，FreeBSD 跟 Linux 版本都相同。Xi Graphics 同時
也提供了專門給筆記型電腦用的高效能 X Server。<a id="XIG" name="XIG"></a></p>

<p>5.0 版有提供免費的相容 “demo” 版本</p>

<p>Xi Graphics 也有在賣 FreeBSD 用的 Motif 跟 CDE（往上面看看）。</p>

<div class="VARIABLELIST">
<dl>
<dt>更多的資訊</dt>

<dd>
<p><a href="http://www.xig.com/" target="_top">Xi Graphics WWW page</a></p>
</dd>

<dt>或</dt>

<dd>
<p><code class="EMAIL">&#60;<a href="mailto:sales@xig.com">sales@xig.com</a>&#62;</code>
或 <code class="EMAIL">&#60;<a
href="mailto:support@xig.com">support@xig.com</a>&#62;</code></p>
</dd>

<dt>或</dt>

<dd>
<p>phone (800) 946 7433 or +1 303 298-7478.</p>
</dd>
</dl>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DATABASE-SYSTEMS" name="DATABASE-SYSTEMS"></a><b>6.5.</b> 在 FreeBSD
上有任何的資料庫嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>有! 請看 FreeBSD 網站上 <a
href="../../../../commercial/software_bycat.html#CATEGORY_DATABASE"
target="_top">商業軟體公司</a> 這一部份。</p>

<p>還有請參考 ports 中 <a href="../../../../ports/databases.html"
target="_top">Databases</a> 相關的收集。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ORACLE-SUPPORT" name="ORACLE-SUPPORT"></a><b>6.6.</b> 可以在 FreeBSD 上執行
Oracle 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以，下面這個網頁會說明如何在 FreeBSD 上執行 Linux 版的 Oracle：</p>

<ul>
<li>
<p><a href="http://www.scc.nl/~marcel/howto-oracle.html"
target="_top">http://www.scc.nl/~marcel/howto-oracle.html</a></p>
</li>

<li>
<p><a href="http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd"
target="_top">&#13;
http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="APPLICATIONS" name="APPLICATIONS"></a>Chapter 7 一般應用程式</h1>

Kang-min Liu

<div class="QANDASET">
<dl>
<dt>7.1. <a href="#USER-APPS">嗯..我要在哪找到我要的程式呢?</a></dt>

<dt>7.2. <a href="#MISSING-LIBCSO30">我可以在哪邊找到 libc.so.3.0?</a></dt>

<dt>7.3. <a href="#MISSING-LIBCSO40">為何我得到了這個訊息 ?“<tt class="ERRORNAME">Error:
can't find libc.so.4.0</tt>”?</a></dt>

<dt>7.4. <a href="#EMUL">ghostscript 在我的 386/486SX 上有點問題呢！</a></dt>

<dt>7.5. <a href="#SCO-SOCKSYS">為什麼當我執行 SCO/iBCS2 的程式時，它在 “<tt
class="ERRORNAME">socksys</tt>” 這個地方出了問題？ (FreeBSD 3.0
以及更早的版本才有此問題。)</a></dt>

<dt>7.6. <a href="#CONFIGURE-INN">我要如何在我的機器上設定 INN (Internet News)？</a></dt>

<dt>7.7. <a href="#MS-FRONTPAGE">我該使用那個版本的 Microsoft FrontPage？</a></dt>

<dt>7.8. <a href="#JAVA">FreeBSD 支援 Java 嗎？</a></dt>

<dt>7.9. <a href="#PORTS-3X">為什麼我無法在 3.X-STABLE 機器上順利編好這個 port?</a></dt>

<dt>7.10. <a href="#FIND-LDSO">那裡可以找得到 ld.so？</a></dt>

<dt>7.11. <a href="#PORTS-UPDATE">我更新了系統原始碼，現在我要怎樣升級某個已經安裝上 的
ports ?</a></dt>

<dt>7.12. <a href="#MINIMA-SH">為什麼 <tt class="COMMAND">/bin/sh</tt>這麼的小？為什麼
FreeBSD 不改用 <tt class="COMMAND">bash</tt> 或者是其他比較強悍的 shell？</a></dt>

<dt>7.13. <a href="#NETSCAPE-SLOW-STARTUP">為什麼 Netscape 和 Opera
要花好久的時間才能啟動？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USER-APPS" name="USER-APPS"></a><b>7.1.</b> 嗯..我要在哪找到我要的程式呢?</p>
</div>

<div class="ANSWER">
<p><b></b>請看看 <a href="../../../../ports/index.html" target="_top">ports 目錄</a>
吧。這邊有份已經 port 到 FreeBSD 的軟體列表。 目前有超過 13,300 個軟體已經被port 到
FreeBSD 上，並且每天 都在增加中。所以有空就多看看這份列表，不然你也可以訂閱 <tt
class="LITERAL">freebsd-announce</tt> <a href="#MAILING">這份 mailing
list</a>，會有人將每個星期最新的軟體列表貼在 上面。</p>

<p>大部份的 ports 應該都可以在 2.2，3.0 跟 4.0 的系統上使 用，並且還有部份的 ports 可以在
2.1.x 的系統上運作。每次 當 FreeBSD release 時，都會有一份 ports tree 被放在這一個
release cd 裡面的 <tt class="FILENAME">ports/</tt> 目錄裡。</p>

<p>我們也支援一種叫 “package” 的概念，基本上 就是 gzip 壓縮、可用來發行的 binary
檔案，但是裡面藏了一 些相當有用的資訊，可以給各種自訂安裝來使用。使用者不必知 道某個
package 裡究竟有包括哪些檔案，就可`以很方便地重複將 它安裝/反安裝。</p>

<p>你可以執行 <tt class="FILENAME">/stand/sysinstall</tt> 後， 在 post-configuration
選單下選擇 package 這個安裝選項；或 是對某個有興趣的 package 檔案執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>
把它裝起來。Package 檔案通常以 <tt class="FILENAME">.tgz</tt> 作為延伸檔名，手上有
FreeBSD CDROM 的人可以在 <tt class="FILENAME">packages/All</tt> 這個目錄下找到這類檔案。
對不同的 FreeBSD 版本，也可以從下列位址由網路上取得：</p>

<div class="VARIABLELIST">
<dl>
<dt>給 2.2.8-release/2.2.8-stable 用的</dt>

<dd>
<p><a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-2.2.8/"
target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-2.2.8/</a></p>
</dd>

<dt>給 3.2-release/3.2-stable 用的</dt>

<dd>
<p><a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3-stable/"
target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3-stable/</a></p>
</dd>

<dt>給 4.X-RELEASE/4-STABLE 用的</dt>

<dd>
<p><a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-4-current/"
target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-4-current/</a></p>
</dd>

<dt>給 5.X-CURRENT 用的</dt>

<dd>
<p><a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-5-current/"
target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-5-current</a></p>
</dd>
</dl>
</div>

<p>或是離你最近的 mirror 站。</p>

<p>要注意的是，因為新的 port 一直在增加中，所以並不是所有 port 都有相對應的
package。最好定時檢查<a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/"
target="_top">ftp.FreeBSD.org</a> ，看看有哪些 package 可以用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MISSING-LIBCSO30" name="MISSING-LIBCSO30"></a><b>7.2.</b> 我可以在哪邊找到
libc.so.3.0?</p>
</div>

<div class="ANSWER">
<p><b></b>你可能在一台 2.1.x 的機器上，跑著給 2.2/3.x/4.0 的軟體。
請再往上面一個章節看，正確的取得給你機器用的 port/package。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MISSING-LIBCSO40" name="MISSING-LIBCSO40"></a><b>7.3.</b> 為何我得到了這個訊息
?“<tt class="ERRORNAME">Error: can't find libc.so.4.0</tt>”?</p>
</div>

<div class="ANSWER">
<p><b></b>你不小心抓了給 4.X 及 5.X 系統用的 package，並且嘗試著 去裝在你的 2.X 或 3.X
的系統上面。請下載正確版本的 package。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="EMUL" name="EMUL"></a><b>7.4.</b> ghostscript 在我的 386/486SX
上有點問題呢！</p>
</div>

<div class="ANSWER">
<p><b></b>你沒有浮點運算器，對吧？你必須在你的 kernel 中加入數學
運算模擬器，你可以跟著下面的步驟做，並在更改過你的 kernel 設定 檔後，重新編譯過一次。</p>

<pre class="PROGRAMLISTING">
options GPL_MATH_EMULATE
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 當你加入上一行的同時，你必須將 <tt class="LITERAL">MATH_EMULATE</tt>
移除掉。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SCO-SOCKSYS" name="SCO-SOCKSYS"></a><b>7.5.</b> 為什麼當我執行 SCO/iBCS2
的程式時，它在 “<tt class="ERRORNAME">socksys</tt>” 這個地方出了問題？ (FreeBSD 3.0
以及更早的版本才有此問題。)</p>
</div>

<div class="ANSWER">
<p><b></b>你必須先修改 <tt class="FILENAME">/etc/sysconfig</tt> (或是 <tt
class="FILENAME">/etc/rc.conf</tt>, 請讀 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>)
這檔案最後一個章節，將下面所講到的變數設成 <tt class="LITERAL">YES</tt>：</p>

<pre class="PROGRAMLISTING">
# Set to YES if you want ibcs2 (SCO) emulation
        loaded at startup ibcs2=NO
</pre>

<p>這會在開機時將 ibcs2 這一個 kernel 模組載入。</p>

<p>你還要將你的 /compat/ibcs2/dev 改成下面這樣：</p>

<pre class="SCREEN">
lrwxr-xr-x  1 root  wheel         9 Oct 15 22:20 X0R@ -&gt; /dev/null
lrwxr-xr-x  1 root  wheel         7 Oct 15 22:20 nfsd@ -&gt; socksys
-rw-rw-r--  1 root  wheel         0 Oct 28 12:02 null
lrwxr-xr-x  1 root  wheel         9 Oct 15 22:20 socksys@ -&gt; /dev/null
crw-rw-rw-  1 root  wheel   41,   1 Oct 15 22:14 spx
</pre>

<p>你只需要將 socksys 轉向到 <tt class="DEVICENAME">/dev/null</tt> (請讀 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=null&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">null</span>(4)</span></a>) 去騙過 open
&amp; close 的動作。在 -current 裡面的 ibcs2
相關程式碼將會處理其餘的部份，這種作法比以前的方式 乾淨太多了。假如你想要使用 <tt
class="DEVICENAME">spx</tt> 方面的 程式，在你的 kernel 設定檔裡面 加上<tt
class="LITERAL">SPX_HACK</tt>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CONFIGURE-INN" name="CONFIGURE-INN"></a><b>7.6.</b> 我要如何在我的機器上設定
INN (Internet News)？</p>
</div>

<div class="ANSWER">
<p><b></b>在你使用 package 或者是 port 安裝完 inn 之後，<a
href="http://www.cis.ohio-state.edu/~barr/INN.html" target="_top">Dave Barr's INN
Page</a> 是個非常好的開始，你可以在那邊找到INN 的 FAQ。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MS-FRONTPAGE" name="MS-FRONTPAGE"></a><b>7.7.</b> 我該使用那個版本的 Microsoft
FrontPage？</p>
</div>

<div class="ANSWER">
<p><b></b>Use the Port, Luke！在 ports tree 中已經有一個包含 FrontPage 的 Apache
版本了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="JAVA" name="JAVA"></a><b>7.8.</b> FreeBSD 支援 Java 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>有，請看 <a href="../../../../java/index.html"
target="_top">http://www.FreeBSD.org/java</a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PORTS-3X" name="PORTS-3X"></a><b>7.9.</b> 為什麼我無法在 3.X-STABLE
機器上順利編好這個 port?</p>
</div>

<div class="ANSWER">
<p><b></b>如果你的 FreeBSD 版本相較 -CURRENT 或 -STABLE 之下是很古
早的話，或許你會需要一個升級 ports 的工具，在 <a href="../../../../ports/index.html"
target="_top">http://www.FreeBSD.org/ports/</a>。如果你以將其更新卻仍無用，
那麼一定是某人更動之後造成 -CURRENT 才能用，-STABLE 無法用的情況。 由於 ports
內所收集的軟體在 -CURRENT 或是 -STABLE 上都要能用，
所以請儘速送出關於此問題的蟲報告；請使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">send-pr</span>(1)</span></a> 這個指
令來送蟲報告。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FIND-LDSO" name="FIND-LDSO"></a><b>7.10.</b> 那裡可以找得到 ld.so？</p>
</div>

<div class="ANSWER">
<p><b></b>有些 a.out 格式的應用程式會需要 a.out 格式的函式庫， Netscape Navigator
就是一個例子。不過用 ELF 函式庫編起來 的 FreeBSD 預設並不會安裝舊的 a.out
函式庫，所以您可能會得 到類似找不到 <tt class="FILENAME">/usr/libexec/ld.so</tt> 的抱怨訊
息。如果說您的系統有這安裝 a.out 函式庫的必要，這些函式庫 (compat22) 也能夠利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
來安裝。或者利用 FreeBSD 原始碼來安裝：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/src/lib/compat/compat22</kbd><samp class="PROMPT">#</samp> <kbd
class="USERINPUT">make install clean</kbd>
</pre>

<p>如果你希望每次 <tt class="COMMAND">make world</tt> 時會自動更新 compat22
函式庫，那麼修改 <tt class="FILENAME">/etc/make.conf</tt>， 加入 <code
class="VARNAME">COMPAT22=YES</code>。這些相容於古老版本的函式庫
已經沒什麼在更新了，所以一般說來是不需要這樣的。</p>

<p>同時也請您看一下 3.1-RELEASE 和 3.2-RELEASE 的勘誤表(ERRATA)。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PORTS-UPDATE" name="PORTS-UPDATE"></a><b>7.11.</b>
我更新了系統原始碼，現在我要怎樣升級某個已經安裝上 的 ports ?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 本身並沒有自動升級 ports 的工具，但有一些可以讓升級
簡化一些的小程式。你也可以自己裝上額外的工具來處理。</p>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_version</span>(1)</span></a>
指令可以自動產生用來達到自動升級到 ports tree 最新版本的 script。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_version <code
class="OPTION">-c</code> &#62; <tt class="REPLACEABLE"><i>/tmp/myscript</i></tt></kbd>
</pre>

<p><span class="emphasis"><i class="EMPHASIS">一定要</i></span>在手動修改一下產生出來的
script。 目前的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_version</span>(1)</span></a> 在
script 最前面加入 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=exit&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">exit</span>(1)</span></a> 強
迫你去修改它。</p>

<p>你應將執行 script 所產生的輸出記錄下來，因為裡面會有記載某些 尚未升級但已經更新的
ports。不過你不一定要去升級它們。通常是因為
有某個共用的函式庫已經改變版本號了，才要去重編一次那些使用到該函 式庫的 ports。</p>

<p>如果你的硬碟空間很夠，那麼可以用 <tt class="COMMAND">portupgrade</tt>
這個工具來做全自動處裡。<tt class="COMMAND">portupgrade</tt> 裡面也有 一些小程式來簡化
package 升級，它在 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a>。 這個工具是用 Ruby
這個語言寫的，所以並不適合加入到 FreeBSD 的原 始碼中，不過並不會因此讓某些人不用它。</p>

<p>如果你的系統一直都處於開機狀態，可利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">periodic</span>(8)</span></a> 系統，
每個星期產生一張需要升級的清單。只要在 <tt class="FILENAME">/etc/periodic.conf</tt> 加入
<tt class="LITERAL">weekly_status_pkg_enable="YES"</tt> 就可以了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MINIMA-SH" name="MINIMA-SH"></a><b>7.12.</b> 為什麼 <tt
class="COMMAND">/bin/sh</tt>這麼的小？為什麼 FreeBSD 不改用 <tt class="COMMAND">bash</tt>
或者是其他比較強悍的 shell？</p>
</div>

<div class="ANSWER">
<p><b></b>因為 POSIX 說，該要有這麼樣的一個 shell 在才行。</p>

<p>比較繁瑣的答案：許多人需要寫可以跨很多平台的 shell script 。 這也是為何 POSIX 將 shell
以及工具命稱都定義的非常詳細的緣故。 大部份的 script 都適用於 Bourne
shell，又因為有幾個重要的 寫程式所用到的程式或者函式 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> , <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=system&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">system</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=popen&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">popen</span>(3)</span></a>, 還有在 Perl
或者 Tcl 裡面呼叫系統程式的地方) 都指定用 Bourne shell 。那麼因為 Bourne Shell
如此的廣泛常用， 那麼它的執行效率便很重要，快速是它決定性的要點之一，還要不佔太多
記憶體。</p>

<p>目前的 <tt class="COMMAND">/bin/sh</tt> 已是我們嘔心瀝血之作，它已
經盡量地符合標準規定。為了讓它非常小，我們拿掉了一些其他 shell 有的方便功能。這也是為什麼
ports 裡面還有很多強悍的 shell ，像是 bash, scsh, tcsh 以及 zsh 。
(你可以自己比較一下這些 shell 執行 時所佔的記憶體大小，去看看 <tt class="COMMAND">ps
-u</tt> 列出來的 “VSZ” 和 “RSS” 這兩個欄位就知道了。)</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NETSCAPE-SLOW-STARTUP" name="NETSCAPE-SLOW-STARTUP"></a><b>7.13.</b> 為什麼
Netscape 和 Opera 要花好久的時間才能啟動？</p>
</div>

<div class="ANSWER">
<p><b></b>通常是因為你的 DNS 沒有設定好。 Netscape 跟 Opera 在啟動的時候 都會去檢查一下
DNS。直到 DNS 有回應，或者是斷定網路目前是斷線之後， 它們才會顯示畫面出來。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="KERNELCONFIG" name="KERNELCONFIG"></a>Chapter 8 kernel 設定</h1>

Kang-min Liu

<div class="QANDASET">
<dl>
<dt>8.1. <a href="#MAKE-KERNEL">我想自訂 kernel，這會很困難嗎？</a></dt>

<dt>8.2. <a href="#MISSING-HW-FLOAT">我的核心因為 <tt
class="LITERAL">_hw_float</tt>遺失而編譯失敗。 該怎麼修正呢？</a></dt>

<dt>8.3. <a href="#WHY-KERNEL-BIG">為什麼造出來的 kernel 這麼大 (10MB 以上) ？</a></dt>

<dt>8.4. <a href="#MULTIPORT-SERIAL-INTERRUPTS">為何出現了 multi-port serial code
的中斷衝突？</a></dt>

<dt>8.5. <a href="#GENERIC-KERNEL-BUILD-FAILURE">為什麼我一個 kernel 都編不起來？甚至
GENERIC 也不行？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-KERNEL" name="MAKE-KERNEL"></a><b>8.1.</b> 我想自訂
kernel，這會很困難嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>不會！請查閱 <a href="../../handbook/kernelconfig.html"
target="_top">使用手冊中的 kernel 設定一節</a>。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 我會建議你在你讓核心能正常工作後，做一個 <tt
class="FILENAME">kernel.YYMMDD</tt> 日期形式的備份，同時也備份 <tt
class="FILENAME">/module</tt>這個目錄至 <tt
class="FILENAME">/modules.YYMMDD</tt>。這樣下次如果你很不幸的玩
壞了設定，至少可以不需要使用最原始的 <tt
class="FILENAME">kernel.GENERIC</tt>。如你正從一個 GENERIC kernel
裡面不支援的控制器裡啟動時，這就顯得特別重要。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MISSING-HW-FLOAT" name="MISSING-HW-FLOAT"></a><b>8.2.</b> 我的核心因為 <tt
class="LITERAL">_hw_float</tt>遺失而編譯失敗。 該怎麼修正呢？</p>
</div>

<div class="ANSWER">
<p><b></b>讓我猜看看，你把 <tt class="DEVICENAME">npx0</tt> (詳見 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=npx&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">npx</span>(4)</span></a>) 從你的 kernel
設定檔移除了，因為你沒有數學運算器， 對嗎？錯了！:-) 這個 <tt
class="DEVICENAME">npx0</tt>是 <span class="emphasis"><i
class="EMPHASIS">必須要有的</i></span>。就算你沒有數學運算器，你還是 <span
class="emphasis"><i class="EMPHASIS">必須</i></span> 引入 <tt
class="DEVICENAME">npx0</tt> 裝置。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WHY-KERNEL-BIG" name="WHY-KERNEL-BIG"></a><b>8.3.</b> 為什麼造出來的 kernel
這麼大 (10MB 以上) ？</p>
</div>

<div class="ANSWER">
<p><b></b>這很有可能是因為，你把 kernel 編成 <span class="emphasis"><i
class="EMPHASIS">偵錯模式</i></span> 了。偵錯模式之下的 kernel
裡面會存著偵錯用的許多符號，因此會大幅 增加 kernel 的大小。如果說你的 FreeBSD 是 3.0
以後的版本，這對於 效能來說影響並不大，幾乎是沒有。而在系統會因某些原因 panic 時，
有個偵錯模式的 kernel 在也挺有用的。</p>

<p>不過呢，如果你的磁碟空間很小，或者你就是不想用偵錯模式的 kernel
的話，請確認以下事情：</p>

<ul>
<li>
<p>kernel 設定檔裡面沒有這一行：</p>

<pre class="PROGRAMLISTING">
makeoptions DEBUGS=-g
</pre>
</li>

<li>
<p>執行 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a> 時沒有加上
<code class="OPTION">-g</code> 這個選項。</p>
</li>
</ul>

<p>以上兩件事情都會讓你編出一個偵錯模式的 kernel。但只要避免之， 就可以編出一個正常的
kernel，而你也會注意到，kernel 明顯的變小了； 大部份的 kernel 都差不多在 1.5MB 到 2MB
之間。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTIPORT-SERIAL-INTERRUPTS" name="MULTIPORT-SERIAL-INTERRUPTS"></a><b>8.4.</b>
為何出現了 multi-port serial code 的中斷衝突？</p>
</div>

<div class="ANSWER">
<p><b></b>當我編譯一個 multi-port serial code 的核心時，它告訴我只有
第一個被偵測到，其他的則因中斷衝突而跳過了，我該怎麼修正它？</p>

<p>這個問題是因為 FreeBSD 使用內建程式碼避免因為硬體或軟體衝突 導致 kernel
過於肥大或無用。要修正這種情形的方法是除了一個 port 外把其他所有的 IRQ
設定都做保留。這裡有一個範例：</p>

<pre class="PROGRAMLISTING">
#
# Multiport high-speed serial line - 16550 UARTS
#
device sio2 at isa? port 0x2a0 tty irq 5 flags 0x501 vector siointr
device sio3 at isa? port 0x2a8 tty flags 0x501 vector siointr
device sio4 at isa? port 0x2b0 tty flags 0x501 vector siointr
device sio5 at isa? port 0x2b8 tty flags 0x501 vector siointr
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="GENERIC-KERNEL-BUILD-FAILURE"
name="GENERIC-KERNEL-BUILD-FAILURE"></a><b>8.5.</b> 為什麼我一個 kernel 都編不起來？甚至
GENERIC 也不行？</p>
</div>

<div class="ANSWER">
<p><b></b>這有很多種可能的原因：</p>

<ul>
<li>
<p>你沒有用新的 <tt class="COMMAND">make buildkernel</tt> 與 <tt class="COMMAND">make
installkernel</tt> 這兩個方法來編，而正好
你的系統原始碼的版本和正在執行的系統核心版本不一樣 (像是， 在跑 4.0-RELEASE
的系統上嘗試著編 4.3-RELEASE)。如果說你要升 級系統的話，請務必去看看 <tt
class="FILENAME">/usr/src/UPDATING</tt> 這個檔案，特別注意最後面的 “COMMON ITEMS”
這個小節。</p>
</li>

<li>
<p>你已經用上 <tt class="COMMAND">make buildkernel</tt> 以及 <tt class="COMMAND">make
installkernel</tt> 了，但是在 <tt class="COMMAND">make buildworld</tt>
時失敗了。可惜的是， <tt class="COMMAND">make buildkernel</tt> 要成功，需要依賴 <tt
class="COMMAND">make buildworld</tt> 後造出來的一些檔案。</p>
</li>

<li>
<p>就算是你在編 <a href="#STABLE">FreeBSD-STABLE</a>，
還是有可能你抓到了正在修改中，或著因為某些緣故而根本還沒改好 的原始碼；雖然說 <a
href="#STABLE">FreeBSD-STABLE</a> 大部份的時候都是可以編的，但只有 RELEASE
才是保證可以編的。碰 到這個問題時，再次更新原始碼並且再試試看。也有可能是放原始碼的
伺服器出現某些問題，所以更新原始碼時也試試從不同伺服器來更新看 看。</p>
</li>
</ul>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="DISKS" name="DISKS"></a>Chapter 9 硬碟、檔案系統、Boot Loader</h1>

<div class="QANDASET">
<dl>
<dt>9.1. <a href="#ADDING-DISKS">如何在 FreeBSD 內把新硬碟掛上去用呢？</a></dt>

<dt>9.2. <a href="#NEW-HUGE-DISK">How do I move my system over to my huge new
disk?</a></dt>

<dt>9.3. <a href="#DANGEROUSLY-DEDICATED">Will a “dangerously dedicated” disk endanger
my health?</a></dt>

<dt>9.4. <a href="#SAFE-SOFTUPDATES">Which partitions can safely use Soft Updates? I have
heard that Soft Updates on <tt class="FILENAME">/</tt> can cause problems.</a></dt>

<dt>9.5. <a href="#INAPPROPRIATE-CCD">What is inappropriate about my ccd?</a></dt>

<dt>9.6. <a href="#CCD-DISKLABEL">Why can I not edit the disklabel on my ccd?</a></dt>

<dt>9.7. <a href="#MOUNT-FOREIGN-FS">Can I mount other foreign filesystems under
FreeBSD?</a></dt>

<dt>9.8. <a href="#MOUNT-DOS">How do I mount a secondary DOS partition?</a></dt>

<dt>9.9. <a href="#CRYPTO-FILESYSTEM">Is there a cryptographic filesystem for
FreeBSD?</a></dt>

<dt>9.10. <a href="#NT-BOOTLOADER">How can I use the <span
class="TRADEMARK">Windows&nbsp;NT</span> loader to boot FreeBSD?</a></dt>

<dt>9.11. <a href="#LILO-BOOTLOADER">How do I boot FreeBSD and <span
class="TRADEMARK">Linux</span> from LILO?</a></dt>

<dt>9.12. <a href="#BOOTEASY-LOADER">How do I boot FreeBSD and <span
class="TRADEMARK">Linux</span> using BootEasy?</a></dt>

<dt>9.13. <a href="#CHANGING-BOOTPROMPT">How do I change the boot prompt from <tt
class="LITERAL">???</tt> to something more meaningful?</a></dt>

<dt>9.14. <a href="#REMOVABLE-DRIVES">I have a new removable drive, how do I use
it?</a></dt>

<dt>9.15. <a href="#MOUNT-CD-SUPERBLOCK">Why do I get “<tt class="ERRORNAME">Incorrect
super block</tt>” when mounting a CDROM?</a></dt>

<dt>9.16. <a href="#CDROM-NOT-CONFIGURED">Why do I get “<tt class="ERRORNAME">Device not
configured</tt>” when mounting a CDROM?</a></dt>

<dt>9.17. <a href="#CDROM-UNICODE-FILENAMES">Why do all non-English characters in
filenames show up as “?” on my CDs when mounted in FreeBSD?</a></dt>

<dt>9.18. <a href="#BURNCD-ISOFS">I burned a CD under FreeBSD and now I can not read it
under any other operating system. Why?</a></dt>

<dt>9.19. <a href="#COPY-CD">How can I create an image of a data CD?</a></dt>

<dt>9.20. <a href="#MOUNT-AUDIO-CD">Why can I not <tt class="COMMAND">mount</tt> an audio
CD?</a></dt>

<dt>9.21. <a href="#MULTI-SESSION-CD">How do I <tt class="COMMAND">mount</tt> a
multi-session CD?</a></dt>

<dt>9.22. <a href="#USER-FLOPPYMOUNT">How do I let ordinary users mount floppies, CDROMs
and other removable media?</a></dt>

<dt>9.23. <a href="#DU-VS-DF">The <tt class="COMMAND">du</tt> and <tt
class="COMMAND">df</tt> commands show different amounts of disk space available. What is
going on?</a></dt>

<dt>9.24. <a href="#ADD-SWAP-SPACE">How can I add more swap space?</a></dt>

<dt>9.25. <a href="#MANUFACTURER-DISK-SIZE">Why does FreeBSD see my disk as smaller than
the manufacturer says it is?</a></dt>

<dt>9.26. <a href="#DISK-MORE-THAN-FULL">How is it possible for a partition to be more
than 100% full?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADDING-DISKS" name="ADDING-DISKS"></a><b>9.1.</b> 如何在 FreeBSD
內把新硬碟掛上去用呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/formatting-media/index.html"
target="_top">磁碟格式化教學</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NEW-HUGE-DISK" name="NEW-HUGE-DISK"></a><b>9.2.</b> How do I move my system
over to my huge new disk?</p>
</div>

<div class="ANSWER">
<p><b></b>理想的方式是先在新硬碟上重裝好作業系統，然後把使用者相關程式、資料搬過去就好。
This is highly recommended if you have been tracking -STABLE for more than one release,
or have updated a release instead of installing a new one. You can install booteasy on
both disks with <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">boot0cfg</span>(8)</span></a>, and dual
boot them until you are happy with the new configuration. Skip the next paragraph to find
out how to move the data after doing this.</p>

<p>Should you decide not to do a fresh install, you need to partition and label the new
disk with either <tt class="FILENAME">/stand/sysinstall</tt>, or <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fdisk</span>(8)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a>. You
should also install booteasy on both disks with <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">boot0cfg</span>(8)</span></a>, so that
you can dual boot to the old or new system after the copying is done. See the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/articles/formatting-media/index.html"
target="_top">formatting-media article</a> for details on this process.</p>

<p>Now you have the new disk set up, and are ready to move the data. Unfortunately, you
cannot just blindly copy the data. Things like device files (in <tt
class="FILENAME">/dev</tt>), flags, and links tend to screw that up. You need to use
tools that understand these things, which means <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a>. Although it
is suggested that you move the data in single user mode, it is not required.</p>

<p>You should never use anything but <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a> to move the
root filesystem. The <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> command may
work - then again, it may not. You should also use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a> if you are
moving a single partition to another empty partition. The sequence of steps to use dump
to move a partitions data to a new partition is:</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>newfs the new partition.</p>
</li>

<li class="STEP">
<p>mount it on a temporary mount point.</p>
</li>

<li class="STEP">
<p>cd to that directory.</p>
</li>

<li class="STEP">
<p>dump the old partition, piping output to the new one.</p>
</li>
</ol>
</div>

<p>For example, if you are going to move root to <tt class="DEVICENAME">/dev/ad1s1a</tt>,
with <tt class="FILENAME">/mnt</tt> as the temporary mount point, it is:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs /dev/ad1s1a</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /dev/ad1s1a /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">dump 0af - / | restore xf -</kbd>
</pre>

<p>Rearranging your partitions with dump takes a bit more work. To merge a partition like
<tt class="FILENAME">/var</tt> into its parent, create the new partition large enough for
both, move the parent partition as described above, then move the child partition into
the empty directory that the first move created:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs /dev/ad1s1a</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /dev/ad1s1a /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">dump 0af - / | restore xf -</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd var</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">dump 0af - /var | restore xf -</kbd>
</pre>

<p>To split a directory from its parent, say putting <tt class="FILENAME">/var</tt> on
its own partition when it was not before, create both partitions, then mount the child
partition on the appropriate directory in the temporary mount point, then move the old
single partition:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs /dev/ad1s1a</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs /dev/ad1s1d</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /dev/ad1s1a /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mkdir /mnt/var</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /dev/ad1s1d /mnt/var</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /mnt</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">dump 0af - / | restore xf -</kbd>
</pre>

<p>You might prefer <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cpio</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pax</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> to <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> for user data.
At the time of this writing, these are known to lose file flag information, so use them
with caution.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DANGEROUSLY-DEDICATED" name="DANGEROUSLY-DEDICATED"></a><b>9.3.</b> Will a
“dangerously dedicated” disk endanger my health?</p>
</div>

<div class="ANSWER">
<p><b></b><a id="DEDICATE" name="DEDICATE"></a>The installation procedure allows you to
chose two different methods in partitioning your hard disk(s). The default way makes it
compatible with other operating systems on the same machine, by using fdisk table entries
(called “slices” in FreeBSD), with a FreeBSD slice that employs partitions of its own.
Optionally, one can chose to install a boot-selector to switch between the possible
operating systems on the disk(s). The alternative uses the entire disk for FreeBSD, and
makes no attempt to be compatible with other operating systems.</p>

<p>So why it is called “dangerous”? A disk in this mode does not contain what normal PC
utilities would consider a valid fdisk table. Depending on how well they have been
designed, they might complain at you once they are getting in contact with such a disk,
or even worse, they might damage the BSD bootstrap without even asking or notifying you.
In addition, the “dangerously dedicated” disk's layout is known to confuse many BIOSes,
including those from AWARD (e.g. as found in HP Netserver and Micronics systems as well
as many others) and Symbios/NCR (for the popular 53C8xx range of SCSI controllers). This
is not a complete list, there are more. Symptoms of this confusion include the “<tt
class="ERRORNAME">read error</tt>” message printed by the FreeBSD bootstrap when it
cannot find itself, as well as system lockups when booting.</p>

<p>Why have this mode at all then? It only saves a few kbytes of disk space, and it can
cause real problems for a new installation. “Dangerously dedicated” mode's origins lie
in a desire to avoid one of the most common problems plaguing new FreeBSD installers -
matching the BIOS “geometry” numbers for a disk to the disk itself.</p>

<p>“Geometry” is an outdated concept, but one still at the heart of the PC's BIOS and
its interaction with disks. When the FreeBSD installer creates slices, it has to record
the location of these slices on the disk in a fashion that corresponds with the way the
BIOS expects to find them. If it gets it wrong, you will not be able to boot.</p>

<p>“Dangerously dedicated” mode tries to work around this by making the problem
simpler. In some cases, it gets it right. But it is meant to be used as a last-ditch
alternative - there are better ways to solve the problem 99 times out of 100.</p>

<p>So, how do you avoid the need for “DD” mode when you are installing? Start by making
a note of the geometry that your BIOS claims to be using for your disks. You can arrange
to have the kernel print this as it boots by specifying <code class="OPTION">-v</code> at
the <tt class="LITERAL">boot:</tt> prompt, or using <tt class="COMMAND">boot -v</tt> in
the loader. Just before the installer starts, the kernel will print a list of BIOS
geometries. Do not panic - wait for the installer to start and then use scrollback to
read the numbers. Typically the BIOS disk units will be in the same order that FreeBSD
lists your disks, first IDE, then SCSI.</p>

<p>When you are slicing up your disk, check that the disk geometry displayed in the FDISK
screen is correct (ie. it matches the BIOS numbers); if it is wrong, use the <b
class="KEYCAP">g</b> key to fix it. You may have to do this if there is absolutely
nothing on the disk, or if the disk has been moved from another system. Note that this is
only an issue with the disk that you are going to boot from; FreeBSD will sort itself out
just fine with any other disks you may have.</p>

<p>Once you have got the BIOS and FreeBSD agreeing about the geometry of the disk, your
problems are almost guaranteed to be over, and with no need for “DD” mode at all. If,
however, you are still greeted with the dreaded “<tt class="ERRORNAME">read error</tt>”
message when you try to boot, it is time to cross your fingers and go for it - there is
nothing left to lose.</p>

<p>To return a “dangerously dedicated” disk for normal PC use, there are basically two
options. The first is, you write enough NULL bytes over the MBR to make any subsequent
installation believe this to be a blank disk. You can do this for example with</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=/dev/zero of=/dev/rda0 count=15</kbd>
</pre>

<p>Alternatively, the undocumented DOS “feature”</p>

<pre class="SCREEN">
<samp class="PROMPT">C:\&gt;</samp> <kbd class="USERINPUT">fdisk /mbr</kbd>
</pre>

<p>will to install a new master boot record as well, thus clobbering the BSD
bootstrap.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SAFE-SOFTUPDATES" name="SAFE-SOFTUPDATES"></a><b>9.4.</b> Which partitions can
safely use Soft Updates? I have heard that Soft Updates on <tt class="FILENAME">/</tt>
can cause problems.</p>
</div>

<div class="ANSWER">
<p><b></b>Short answer: you can usually use Soft Updates safely on all partitions.</p>

<p>Long answer: There used to be some concern over using Soft Updates on the root
partition. Soft Updates has two characteristics that caused this. First, a Soft Updates
partition has a small chance of losing data during a system crash. (The partition will
not be corrupted; the data will simply be lost.) Also, Soft Updates can cause temporary
space shortages.</p>

<p>When using Soft Updates, the kernel can take up to thirty seconds to actually write
changes to the physical disk. If you delete a large file, the file still resides on disk
until the kernel actually performs the deletion. This can cause a very simple race
condition. Suppose you delete one large file and immediately create another large file.
The first large file is not yet actually removed from the physical disk, so the disk
might not have enough room for the second large file. You get an error that the partition
does not have enough space, although you know perfectly well that you just released a
large chunk of space! When you try again mere seconds later, the file creation works as
you expect. This has left more than one user scratching his head and doubting his sanity,
the FreeBSD filesystem, or both.</p>

<p>If a system should crash after the kernel accepts a chunk of data for writing to disk,
but before that data is actually written out, data could be lost or corrupted. This risk
is extremely small, but generally manageable. Use of IDE write caching greatly increases
this risk; it is strongly recommended that you disable IDE write caching when using Soft
Updates.</p>

<p>These issues affect all partitions using Soft Updates. So, what does this mean for the
root partition?</p>

<p>Vital information on the root partition changes very rarely. Files such as <tt
class="FILENAME">/kernel</tt> and the contents of <tt class="FILENAME">/etc</tt> only
change during system maintenance, or when users change their passwords. If the system
crashed during the thirty-second window after such a change is made, it is possible that
data could be lost. This risk is negligible for most applications, but you should be
aware that it exists. If your system cannot tolerate this much risk, do not use Soft
Updates on the root filesystem!</p>

<p><tt class="FILENAME">/</tt> is traditionally one of the smallest partitions. By
default, FreeBSD puts the <tt class="FILENAME">/tmp</tt> directory on <tt
class="FILENAME">/</tt>. If you have a busy <tt class="FILENAME">/tmp</tt>, you might see
intermittent space problems. Symlinking <tt class="FILENAME">/tmp</tt> to <tt
class="FILENAME">/var/tmp</tt> will solve this problem.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INAPPROPRIATE-CCD" name="INAPPROPRIATE-CCD"></a><b>9.5.</b> What is
inappropriate about my ccd?</p>
</div>

<div class="ANSWER">
<p><b></b>The symptom of this is:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ccdconfig -C</kbd>
ccdconfig: ioctl (CCDIOCSET): /dev/ccd0c: Inappropriate file type or format
</pre>

<p>This usually happens when you are trying to concatenate the <tt class="LITERAL">c</tt>
partitions, which default to type <tt class="LITERAL">unused</tt>. The ccd driver
requires the underlying partition type to be FS_BSDFFS. Edit the disklabel of the disks
you are trying to concatenate and change the types of partitions to <tt
class="LITERAL">4.2BSD</tt>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CCD-DISKLABEL" name="CCD-DISKLABEL"></a><b>9.6.</b> Why can I not edit the
disklabel on my ccd?</p>
</div>

<div class="ANSWER">
<p><b></b>The symptom of this is:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel ccd0</kbd>
(it prints something sensible here, so let us try to edit it)
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -e ccd0</kbd>
(edit, save, quit)
disklabel: ioctl DIOCWDINFO: No disk label on disk;
use "disklabel -r" to install initial label
</pre>

<p>This is because the disklabel returned by ccd is actually a “fake” one that is not
really on the disk. You can solve this problem by writing it back explicitly, as in:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">disklabel ccd0 &gt; /tmp/disklabel.tmp</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">disklabel -Rr ccd0 /tmp/disklabel.tmp</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -e ccd0</kbd>
(this will work now)
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-FOREIGN-FS" name="MOUNT-FOREIGN-FS"></a><b>9.7.</b> Can I mount other
foreign filesystems under FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD supports a variety of other filesystems.</p>

<div class="VARIABLELIST">
<dl>
<dt>Digital UNIX</dt>

<dd>
<p>UFS CDROMs can be mounted directly on FreeBSD. Mounting disk partitions from Digital
UNIX and other systems that support UFS may be more complex, depending on the details of
the disk partitioning for the operating system in question.</p>
</dd>

<dt><span class="TRADEMARK">Linux</span></dt>

<dd>
<p>FreeBSD supports <tt class="LITERAL">ext2fs</tt> partitions. See <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ext2fs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_ext2fs</span>(8)</span></a> for
more information.</p>
</dd>

<dt><span class="TRADEMARK">Windows&nbsp;NT</span>&reg;</dt>

<dd>
<p>FreeBSD includes a read-only NTFS driver. For more information, see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_ntfs</span>(8)</span></a>.</p>
</dd>

<dt>FAT</dt>

<dd>
<p>FreeBSD includes a read-write FAT driver. For more information, see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_msdosfs</span>(8)</span></a>.</p>
</dd>
</dl>
</div>

<p>FreeBSD also supports network filesystems such as NFS (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_nfs</span>(8)</span></a>), NetWare
(see <a href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nwfs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_nwfs</span>(8)</span></a>), and
Microsoft-style SMB filesystems (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_smbfs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_smbfs</span>(8)</span></a>).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-DOS" name="MOUNT-DOS"></a><b>9.8.</b> How do I mount a secondary DOS
partition?</p>
</div>

<div class="ANSWER">
<p><b></b>The secondary DOS partitions are found after ALL the primary partitions. For
example, if you have an “E” partition as the second DOS partition on the second SCSI
drive, you need to create the special files for “slice 5” in <tt
class="FILENAME">/dev</tt>, then mount <tt class="DEVICENAME">/dev/da1s5</tt>:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV da1s5</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -t msdos /dev/da1s5 /dos/e</kbd>
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> You can omit this step if you are running FreeBSD 5.0-RELEASE or newer
with <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;manpath=FreeBSD+6-current">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(5)</span></a>
enabled.</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CRYPTO-FILESYSTEM" name="CRYPTO-FILESYSTEM"></a><b>9.9.</b> Is there a
cryptographic filesystem for FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Yes. If you are running FreeBSD 5.0 or later, see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gbde</span>(8)</span></a>. For earlier
releases, see the <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/security/cfs/pkg-descr"><tt
class="FILENAME">security/cfs</tt></a> port.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NT-BOOTLOADER" name="NT-BOOTLOADER"></a><b>9.10.</b> How can I use the <span
class="TRADEMARK">Windows&nbsp;NT</span> loader to boot FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>The general idea is that you copy the first sector of your native root FreeBSD
partition into a file in the DOS/<span class="TRADEMARK">Windows&nbsp;NT</span>
partition. Assuming you name that file something like <tt
class="FILENAME">c:\bootsect.bsd</tt> (inspired by <tt
class="FILENAME">c:\bootsect.dos</tt>), you can then edit the <tt
class="FILENAME">c:\boot.ini</tt> file to come up with something like this:</p>

<pre class="PROGRAMLISTING">
[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows NT"
C:\BOOTSECT.BSD="FreeBSD"
C:\="DOS"
</pre>

<p>If FreeBSD is installed on the same disk as the <span
class="TRADEMARK">Windows&nbsp;NT</span> boot partition simply copy <tt
class="FILENAME">/boot/boot1</tt> to <tt class="FILENAME">C:\BOOTSECT.BSD</tt>. However,
if FreeBSD is installed on a different disk <tt class="FILENAME">/boot/boot1</tt> will
not work, <tt class="FILENAME">/boot/boot0</tt> is needed.</p>

<p><tt class="FILENAME">/boot/boot0</tt> needs to be installed using sysinstall by
selecting the FreeBSD boot manager on the screen which asks if you wish to use a boot
manager. This is because <tt class="FILENAME">/boot/boot0</tt> has the partition table
area filled with NULL characters but sysinstall copies the partition table before copying
<tt class="FILENAME">/boot/boot0</tt> to the MBR.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> <span class="emphasis"><i class="EMPHASIS">Do not simply copy <tt
class="FILENAME">/boot/boot0</tt> instead of <tt class="FILENAME">/boot/boot1</tt>; you
will overwrite your partition table and render your computer un-bootable!</i></span></p>
</blockquote>
</div>

<p>When the FreeBSD boot manager runs it records the last OS booted by setting the active
flag on the partition table entry for that OS and then writes the whole 512-bytes of
itself back to the MBR so if you just copy <tt class="FILENAME">/boot/boot0</tt> to <tt
class="FILENAME">C:\BOOTSECT.BSD</tt> then it writes an empty partition table, with the
active flag set on one entry, to the MBR.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LILO-BOOTLOADER" name="LILO-BOOTLOADER"></a><b>9.11.</b> How do I boot FreeBSD
and <span class="TRADEMARK">Linux</span> from LILO?</p>
</div>

<div class="ANSWER">
<p><b></b>If you have FreeBSD and <span class="TRADEMARK">Linux</span> on the same disk,
just follow LILO's installation instructions for booting a non-<span
class="TRADEMARK">Linux</span> operating system. Very briefly, these are:</p>

<p>Boot <span class="TRADEMARK">Linux</span>, and add the following lines to <tt
class="FILENAME">/etc/lilo.conf</tt>:</p>

<pre class="PROGRAMLISTING">
other=/dev/hda2
        table=/dev/hda
        label=FreeBSD
</pre>

<p>(the above assumes that your FreeBSD slice is known to <span
class="TRADEMARK">Linux</span> as <tt class="DEVICENAME">/dev/hda2</tt>; tailor to suit
your setup). Then, run <tt class="COMMAND">lilo</tt> as <tt class="USERNAME">root</tt>
and you should be done.</p>

<p>If FreeBSD resides on another disk, you need to add <tt
class="LITERAL">loader=/boot/chain.b</tt> to the LILO entry. For example:</p>

<pre class="PROGRAMLISTING">
other=/dev/dab4
        table=/dev/dab
        loader=/boot/chain.b
        label=FreeBSD
</pre>

<p>In some cases you may need to specify the BIOS drive number to the FreeBSD boot loader
to successfully boot off the second disk. For example, if your FreeBSD SCSI disk is
probed by BIOS as BIOS disk 1, at the FreeBSD boot loader prompt you need to specify:</p>

<pre class="SCREEN">
Boot: <kbd class="USERINPUT">1:da(0,a)/kernel</kbd>
</pre>

<p>On FreeBSD 2.2.5 and later, you can configure <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">boot</span>(8)</span></a> to
automatically do this for you at boot time.</p>

<p>The <a href="http://sunsite.unc.edu/LDP/HOWTO/mini/Linux+FreeBSD.html"
target="_top"><span class="TRADEMARK">Linux</span>+FreeBSD mini-HOWTO</a> is a good
reference for FreeBSD and <span class="TRADEMARK">Linux</span> interoperability
issues.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BOOTEASY-LOADER" name="BOOTEASY-LOADER"></a><b>9.12.</b> How do I boot FreeBSD
and <span class="TRADEMARK">Linux</span> using BootEasy?</p>
</div>

<div class="ANSWER">
<p><b></b>Install LILO at the start of your <span class="TRADEMARK">Linux</span> boot
partition instead of in the Master Boot Record. You can then boot LILO from BootEasy.</p>

<p>If you are running <span class="TRADEMARK">Windows</span> 95 and <span
class="TRADEMARK">Linux</span> this is recommended anyway, to make it simpler to get
<span class="TRADEMARK">Linux</span> booting again if you should need to reinstall <span
class="TRADEMARK">Windows</span> 95 (which is a Jealous Operating System, and will bear
no other Operating Systems in the Master Boot Record).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CHANGING-BOOTPROMPT" name="CHANGING-BOOTPROMPT"></a><b>9.13.</b> How do I
change the boot prompt from <tt class="LITERAL">???</tt> to something more
meaningful?</p>
</div>

<div class="ANSWER">
<p><b></b>You can not do that with the standard boot manager without rewriting it. There
are a number of other boot managers in the <tt class="FILENAME">sysutils</tt> ports
category that provide this functionality.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REMOVABLE-DRIVES" name="REMOVABLE-DRIVES"></a><b>9.14.</b> I have a new
removable drive, how do I use it?</p>
</div>

<div class="ANSWER">
<p><b></b>Whether it is a removable drive like a <span class="TRADEMARK">Zip</span> or an
EZ drive (or even a floppy, if you want to use it that way), or a new hard disk, once it
is installed and recognized by the system, and you have your cartridge/floppy/whatever
slotted in, things are pretty much the same for all devices.</p>

<p>(this section is based on <a href="http://www.vmunix.com/mark/FreeBSD/ZIP-FAQ.html"
target="_top">Mark Mayo's ZIP FAQ</a>)</p>

<p>If it is a ZIP drive or a floppy, you have already got a DOS filesystem on it, you can
use a command like this:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -t msdos /dev/fd0c /floppy</kbd>
</pre>

<p>if it is a floppy, or this:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -t msdos /dev/da2s4 /zip</kbd>
</pre>

<p>for a ZIP disk with the factory configuration.</p>

<p>For other disks, see how they are laid out using <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fdisk</span>(8)</span></a> or <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>.</p>

<p>The rest of the examples will be for a ZIP drive on da2, the third SCSI disk.</p>

<p>Unless it is a floppy, or a removable you plan on sharing with other people, it is
probably a better idea to stick a BSD filesystem on it. You will get long filename
support, at least a 2X improvement in performance, and a lot more stability. First, you
need to redo the DOS-level partitions/filesystems. You can either use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fdisk</span>(8)</span></a> or <tt
class="FILENAME">/stand/sysinstall</tt>, or for a small drive that you do not want to
bother with multiple operating system support on, just blow away the whole FAT partition
table (slices) and just use the BSD partitioning:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=/dev/zero of=/dev/rda2 count=2</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -Brw da2 auto</kbd>
</pre>

<p>You can use disklabel or <tt class="FILENAME">/stand/sysinstall</tt> to create
multiple BSD partitions. You will certainly want to do this if you are adding swap space
on a fixed disk, but it is probably irrelevant on a removable drive like a ZIP.</p>

<p>Finally, create a new filesystem, this one is on our ZIP drive using the whole
disk:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs /dev/rda2c</kbd>
</pre>

<p>and mount it:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount /dev/da2c /zip</kbd>
</pre>

<p>and it is probably a good idea to add a line like this to <tt
class="FILENAME">/etc/fstab</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fstab</span>(5)</span></a>) so you can
just type <tt class="COMMAND">mount /zip</tt> in the future:</p>

<pre class="PROGRAMLISTING">
/dev/da2c /zip ffs rw,noauto 0 0
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-CD-SUPERBLOCK" name="MOUNT-CD-SUPERBLOCK"></a><b>9.15.</b> Why do I get
“<tt class="ERRORNAME">Incorrect super block</tt>” when mounting a CDROM?</p>
</div>

<div class="ANSWER">
<p><b></b>You have to tell <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a> the type of
the device that you want to mount. This is described in the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html"
target="_top">Handbook section on optical media</a>, specifically the section <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html#MOUNTING-CD"
target="_top">Using Data CDs</a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CDROM-NOT-CONFIGURED" name="CDROM-NOT-CONFIGURED"></a><b>9.16.</b> Why do I get
“<tt class="ERRORNAME">Device not configured</tt>” when mounting a CDROM?</p>
</div>

<div class="ANSWER">
<p><b></b>This generally means that there is no CDROM in the CDROM drive, or the drive is
not visible on the bus. Please see the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html#MOUNTING-CD"
target="_top">Using Data CDs</a> section of the Handbook for a detailed discussion of
this issue.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CDROM-UNICODE-FILENAMES" name="CDROM-UNICODE-FILENAMES"></a><b>9.17.</b> Why do
all non-English characters in filenames show up as “?” on my CDs when mounted in
FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Your CDROM probably uses the “Joliet” extension for storing information about
files and directories. This is discussed in the Handbook chapter on <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html"
target="_top">creating and using CDROMs</a>, specifically the section on <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html#MOUNTING-CD"
target="_top">Using Data CDROMs</a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BURNCD-ISOFS" name="BURNCD-ISOFS"></a><b>9.18.</b> I burned a CD under FreeBSD
and now I can not read it under any other operating system. Why?</p>
</div>

<div class="ANSWER">
<p><b></b>You most likely burned a raw file to your CD, rather than creating an ISO 9660
filesystem. Take a look at the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html"
target="_top">Handbook chapter on creating CDROMs</a>, particularly the section on <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html#RAWDATA-CD"
target="_top">burning raw data CDs</a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="COPY-CD" name="COPY-CD"></a><b>9.19.</b> How can I create an image of a data
CD?</p>
</div>

<div class="ANSWER">
<p><b></b>This is discussed in the Handbook section on <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html#IMAGING-CD"
target="_top">duplicating data CDs</a>. For more on working with CDROMs, see the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/creating-cds.html"
target="_top">Creating CDs Section</a> in the Storage chapter in the Handbook.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-AUDIO-CD" name="MOUNT-AUDIO-CD"></a><b>9.20.</b> Why can I not <tt
class="COMMAND">mount</tt> an audio CD?</p>
</div>

<div class="ANSWER">
<p><b></b>If you try to mount an audio CD, you will get an error like “<tt
class="ERRORNAME">cd9660: /dev/acd0c: Invalid argument</tt>”. This is because <tt
class="COMMAND">mount</tt> only works on filesystems. Audio CDs do not have filesystems;
they just have data. You need a program that reads audio CDs, such as the <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/audio/xmcd/pkg-descr"><tt
class="FILENAME">audio/xmcd</tt></a> port.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTI-SESSION-CD" name="MULTI-SESSION-CD"></a><b>9.21.</b> How do I <tt
class="COMMAND">mount</tt> a multi-session CD?</p>
</div>

<div class="ANSWER">
<p><b></b>By default, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a> will attempt
to mount the last data track (session) of a CD. If you would like to load an earlier
session, you must use the <code class="OPTION">-s</code> command line argument. Please
see <a href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mount_cd9660</span>(8)</span></a> for
specific examples.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USER-FLOPPYMOUNT" name="USER-FLOPPYMOUNT"></a><b>9.22.</b> How do I let
ordinary users mount floppies, CDROMs and other removable media?</p>
</div>

<div class="ANSWER">
<p><b></b>Ordinary users can be permitted to mount devices. Here is how:</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>As <tt class="USERNAME">root</tt> set the sysctl variable <code
class="VARNAME">vfs.usermount</code> to <tt class="LITERAL">1</tt>.</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl -w vfs.usermount=1</kbd>
</pre>
</li>

<li class="STEP">
<p>As <tt class="USERNAME">root</tt> assign the appropriate permissions to the block
device associated with the removable media.</p>

<p>For example, to allow users to mount the first floppy drive, use:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod 666 /dev/fd0</kbd>
</pre>

<p>To allow users in the group <tt class="GROUPNAME">operator</tt> to mount the CDROM
drive, use:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chgrp operator /dev/acd0c</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod 640 /dev/acd0c</kbd>
</pre>
</li>

<li class="STEP">
<p>If you are running FreeBSD 5.X or later, you will need to alter <tt
class="FILENAME">/etc/devfs.conf</tt> to make these changes permanent across reboots.</p>

<p>As <tt class="USERNAME">root</tt>, add the necessary lines to <tt
class="FILENAME">/etc/devfs.conf</tt>. For example, to allow users to mount the first
floppy drive add:</p>

<pre class="PROGRAMLISTING">
# Allow all users to mount the floppy disk.
own       /dev/fd0    root:operator
perm      /dev/fd0    0666
</pre>

<p>To allow users in the group <tt class="GROUPNAME">operator</tt> to mount the CD-ROM
drive add:</p>

<pre class="PROGRAMLISTING">
# Allow members of the group operator to mount CD-ROMs.
own       /dev/acd0   root:operator
perm      /dev/acd0   0660
</pre>
</li>

<li class="STEP">
<p>Finally, add the line <tt class="LITERAL"><code
class="VARNAME">vfs.usermount</code>=1</tt> to the file <tt
class="FILENAME">/etc/sysctl.conf</tt> so that it is reset at system boot time.</p>
</li>
</ol>
</div>

<p>All users can now mount the floppy <tt class="DEVICENAME">/dev/fd0</tt> onto a
directory that they own:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">mkdir ~/my-mount-point</kbd>
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">mount -t msdos /dev/fd0 ~/my-mount-point</kbd>
</pre>

<p>Users in group <tt class="GROUPNAME">operator</tt> can now mount the CDROM <tt
class="DEVICENAME">/dev/acd0c</tt> onto a directory that they own:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">mkdir ~/my-mount-point</kbd>
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">mount -t cd9660 /dev/acd0c ~/my-mount-point</kbd>
</pre>

<p>Unmounting the device is simple:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">umount ~/my-mount-point</kbd>
</pre>

<p>Enabling <code class="VARNAME">vfs.usermount</code>, however, has negative security
implications. A better way to access <span class="TRADEMARK">MS-DOS</span> formatted
media is to use the <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr"><tt
class="FILENAME">emulators/mtools</tt></a> package in the ports collection.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> The device name used in the previous examples must be changed according
to your configuration.</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DU-VS-DF" name="DU-VS-DF"></a><b>9.23.</b> The <tt class="COMMAND">du</tt> and
<tt class="COMMAND">df</tt> commands show different amounts of disk space available. What
is going on?</p>
</div>

<div class="ANSWER">
<p><b></b>You need to understand what <tt class="COMMAND">du</tt> and <tt
class="COMMAND">df</tt> really do. <tt class="COMMAND">du</tt> goes through the directory
tree, measures how large each file is, and presents the totals. <tt
class="COMMAND">df</tt> just asks the filesystem how much space it has left. They seem to
be the same thing, but a file without a directory entry will affect <tt
class="COMMAND">df</tt> but not <tt class="COMMAND">du</tt>.</p>

<p>When a program is using a file, and you delete the file, the file is not really
removed from the filesystem until the program stops using it. The file is immediately
deleted from the directory listing, however. You can see this easily enough with a
program such as <tt class="COMMAND">more</tt>. Assume you have a file large enough that
its presence affects the output of <tt class="COMMAND">du</tt> and <tt
class="COMMAND">df</tt>. (Since disks can be so large today, this might be a <span
class="emphasis"><i class="EMPHASIS">very</i></span> large file!) If you delete this file
while using <tt class="COMMAND">more</tt> on it, <tt class="COMMAND">more</tt> does not
immediately choke and complain that it cannot view the file. The entry is simply removed
from the directory so no other program or user can access it. <tt class="COMMAND">du</tt>
shows that it is gone -- it has walked the directory tree and the file is not listed. <tt
class="COMMAND">df</tt> shows that it is still there, as the filesystem knows that <tt
class="COMMAND">more</tt> is still using that space. Once you end the <tt
class="COMMAND">more</tt> session, <tt class="COMMAND">du</tt> and <tt
class="COMMAND">df</tt> will agree.</p>

<p>Note that Soft Updates can delay the freeing of disk space; you might need to wait up
to 30 seconds for the change to be visible!</p>

<p>This situation is common on web servers. Many people set up a FreeBSD web server and
forget to rotate the log files. The access log fills up <tt class="FILENAME">/var</tt>.
The new administrator deletes the file, but the system still complains that the partition
is full. Stopping and restarting the web server program would free the file, allowing the
system to release the disk space. To prevent this from happening, set up <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">newsyslog</span>(8)</span></a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADD-SWAP-SPACE" name="ADD-SWAP-SPACE"></a><b>9.24.</b> How can I add more swap
space?</p>
</div>

<div class="ANSWER">
<p><b></b>In the <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/config-tuning.html"
target="_top">Configuration and Tuning</a> section of the Handbook, you will find a <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/adding-swap-space.html"
target="_top">section</a> describing how to do this.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MANUFACTURER-DISK-SIZE" name="MANUFACTURER-DISK-SIZE"></a><b>9.25.</b> Why does
FreeBSD see my disk as smaller than the manufacturer says it is?</p>
</div>

<div class="ANSWER">
<p><b></b>Disk manufacturers calculate gigabytes as a billion bytes each, whereas FreeBSD
calculates them as 1,073,741,824 bytes each. This explains why, for example, FreeBSD's
boot messages will report a disk that supposedly has 80GB as holding 76319MB.</p>

<p>Also note that FreeBSD will (by default) <a href="#DISK-MORE-THAN-FULL">reserve</a> 8%
of the disk space.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISK-MORE-THAN-FULL" name="DISK-MORE-THAN-FULL"></a><b>9.26.</b> How is it
possible for a partition to be more than 100% full?</p>
</div>

<div class="ANSWER">
<p><b></b>A portion of each UFS partition (8%, by default) is reserved for use by the
operating system and the <tt class="USERNAME">root</tt> user. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">df</span>(1)</span></a> does not count
that space when calculating the <tt class="LITERAL">Capacity</tt> column, so it can
exceed 100%. Also, you will notice that the <tt class="LITERAL">Blocks</tt> column is
always greater than the sum of the <tt class="LITERAL">Used</tt> and <tt
class="LITERAL">Avail</tt> columns, usually by a factor of 8%.</p>

<p>For more details, look up the <code class="OPTION">-m</code> option in <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tunefs</span>(8)</span></a>.</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="ADMIN" name="ADMIN"></a>Chapter 10 系統管理</h1>

Wei-Hon Chen

<div class="QANDASET">
<dl>
<dt>10.1. <a href="#STARTUP-CONFIG-FILES">系統起始設定檔在哪？</a></dt>

<dt>10.2. <a href="#ADDING-USERS">我該如何簡單地加入使用者？</a></dt>

<dt>10.3. <a href="#ROOT-NOT-FOUND-CRON-ERRORS">在我編輯 crontab
檔案之後，為什麼我老是收到這樣的訊息： “<tt class="ERRORNAME">root: not
found</tt>”？</a></dt>

<dt>10.4. <a href="#SU-WHEEL-GROUP">為什麼我想要用 su 成為 <tt class="USERNAME">root</tt>
時，會得到 “<tt class="ERRORNAME">you are not in the correct group to su root</tt>”
的錯誤訊息？</a></dt>

<dt>10.5. <a href="#RCCONF-READONLY">我在 <tt class="FILENAME">rc.conf</tt>
還是某個起動檔案裡犯了錯誤，
因為檔案系統變成唯讀的，我無法去編輯它。我該怎麼辦？</a></dt>

<dt>10.6. <a href="#PRINTER-SETUP">為什麼我沒辦法設定我的印表機？</a></dt>

<dt>10.7. <a href="#KEYBOARD-MAPPINGS">我要怎麼樣修正我的系統所使用的鍵盤對映 (keyboard
mapping)？</a></dt>

<dt>10.8. <a href="#PNP-RESOURCES">為什麼我在系統啟動時，得到 “<tt
class="ERRORNAME">unknown: &lt;PNP0303&gt; can't assign resources</tt>”
的訊息？</a></dt>

<dt>10.9. <a href="#USER-QUOTAS">為什麼我無法讓 user quotas 正常工作？</a></dt>

<dt>10.10. <a href="#SYSV-IPC">FreeBSD 支援 System V IPC 格式指令集？</a></dt>

<dt>10.11. <a href="#UUCPMAIL">我該如何讓 sendmail 透過 UUCP 來遞送郵件？</a></dt>

<dt>10.12. <a href="#ISPMAIL">當我用撥接連上網路時該怎麼設定信件遞送？</a></dt>

<dt>10.13. <a href="#SENDMAIL-ALTERNATIVE">除了 Sendmail
外，還有哪些郵件伺服器可以使用呢？</a></dt>

<dt>10.14. <a href="#FORGOT-ROOT-PW">我忘了 <tt class="USERNAME">root</tt>
密碼了！怎麼辦？</a></dt>

<dt>10.15. <a href="#CAD-REBOOT">我該怎麼讓 Control-Alt-Delete
不會重新啟動系統？</a></dt>

<dt>10.16. <a href="#DOS-TO-UNIX-TXT">我該怎麼把 DOS 文字檔案重新格式化成 UNIX
的？</a></dt>

<dt>10.17. <a href="#KILL-BY-NAME">我該怎麼用名稱砍掉 process？</a></dt>

<dt>10.18. <a href="#ROOT-ACL">為何在 su 一直說我不在 <tt class="USERNAME">root</tt> 的
ACL 裡？</a></dt>

<dt>10.19. <a href="#UNINSTALL-KERBEROS">我該怎麼移除 Kerberos？</a></dt>

<dt>10.20. <a href="#ADD-PTY">我該怎麼增加系統的虛擬終端機？</a></dt>

<dt>10.21. <a href="#CREATE-SND0">/dev/snd0 這個裝置做不出來！</a></dt>

<dt>10.22. <a href="#REREAD-RC">可以不用開機，重新讀取 <tt
class="FILENAME">/etc/rc.conf</tt>、 再次啟動 <tt class="FILENAME">/etc/rc</tt>
嗎?</a></dt>

<dt>10.23. <a href="#RELEASE-CANDIDATE">我想要把我的系統昇級到最新的
-STABLE，但是得到的是 -RC 或 -PRERELEASE！怎麼了？</a></dt>

<dt>10.24. <a href="#KERNEL-CHFLAG-FAILURE">我試著要安裝一個新的核心，但是無法
chflags。我該怎麼解決？</a></dt>

<dt>10.25. <a
href="#KERNEL-SECURELEVEL-TIME">在我的系統上，我無法變更時間超過一秒以上的範圍！
我該怎麼辦？</a></dt>

<dt>10.26. <a href="#STATD-MEM-LEAK">為什麼 <tt class="COMMAND">rpc.statd</tt> 用了 256
megabytes 的記憶體？</a></dt>

<dt>10.27. <a href="#UNSETTING-SCHG">為什麼我沒辦法取消 <tt class="LITERAL">schg</tt>
檔案旗標？</a></dt>

<dt>10.28. <a href="#SSH-SHOSTS">為什麼近來的新版 FreeBSD 預設無法利用 <tt
class="FILENAME">.shosts</tt> 完成 SSH 認證？</a></dt>

<dt>10.29. <a href="#VNLRU">什麼是 <tt class="LITERAL">vnlru</tt>?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STARTUP-CONFIG-FILES" name="STARTUP-CONFIG-FILES"></a><b>10.1.</b>
系統起始設定檔在哪？</p>
</div>

<div class="ANSWER">
<p><b></b>從 2.0.5R 到 2.2.1R，主要的設定檔是 <tt
class="FILENAME">/etc/sysconfig</tt>。所有的選項都被指定在這個檔， 而其他像 <tt
class="FILENAME">/etc/rc</tt> (參見 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a>) 和 <tt
class="FILENAME">/etc/netstart</tt> 只是引用它。</p>

<p>觀察 <tt class="FILENAME">/etc/sysconfig</tt> 這個檔並修正其值以
適合你的系統。這個檔用註解填滿以表示何處該放置什麼設定。</p>

<p>在 post-2.2.1 以後及 3.0，<tt class="FILENAME">/etc/sysconfig</tt>
亦更名為一個更容易描述的檔名叫 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
，並且語法簡化了些。 <tt class="FILENAME">/etc/netstart</tt> 亦更名為 <tt
class="FILENAME">/etc/rc.network</tt> 因此所有的檔案都可以用 <tt class="COMMAND">cp
/usr/src/etc/rc* /etc</tt> 來拷貝。</p>

<p>在 3.1 以及，<tt class="FILENAME">/etc/rc.conf</tt> 被移到 <tt
class="FILENAME">/etc/defaults/rc.conf</tt>。 <span class="emphasis"><i
class="EMPHASIS">千萬不要編輯這個檔！</i></span> 如果 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 內有想要更動的項目，
你應該將那一行的內容拷貝到 <tt class="FILENAME">/etc/rc.conf</tt>， 然後再修改它。</p>

<p>例如 FreeBSD 3.1 及以後的版本內，有一個 DNS 伺服器 named，
而你想要啟動它。你所需要作的事就是：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">echo named_enable="YES" &gt;&gt; /etc/rc.conf</kbd>
</pre>

<p>想要在 FreeBSD 3.1 及以後的版本中，啟動本地端服務的話，將 shell script 置於 <tt
class="FILENAME">/usr/local/etc/rc.d</tt> 目錄 下。這些 shell script
應該設定成可執行，並且檔名以 .sh 結束。 在 FreeBSD 3.0 及更早的版本中，你應該直接編輯 <tt
class="FILENAME">/etc/rc.local</tt> 檔。</p>

<p><tt class="FILENAME">/etc/rc.serial</tt>用來初始化序列埠 （像是鎖定埠的特性等）。</p>

<p><tt class="FILENAME">/etc/rc.i386</tt> 是 Intel 專用設定， 像是 iBCS2 模擬或是 PC
系統主控台設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADDING-USERS" name="ADDING-USERS"></a><b>10.2.</b>
我該如何簡單地加入使用者？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">adduser</span>(8)</span></a>
指令。如果需要更複雜的使用方式， 請用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 這個指令。</p>

<p>要再次移除使用者，使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a> 指令。還有，
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 也可以使用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROOT-NOT-FOUND-CRON-ERRORS" name="ROOT-NOT-FOUND-CRON-ERRORS"></a><b>10.3.</b>
在我編輯 crontab 檔案之後，為什麼我老是收到這樣的訊息： “<tt class="ERRORNAME">root: not
found</tt>”？</p>
</div>

<div class="ANSWER">
<p><b></b>通常都是因為編輯了系統的 crontab (<tt class="FILENAME">/etc/crontab</tt>)
然後就用 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(1)</span></a>
去安裝它：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">crontab /etc/crontab</kbd>
</pre>

<p>這樣作是不對的。系統的 crontab 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(1)</span></a>
所更新的使用者的 crontab 格式並不一樣 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(5)</span></a>
說明文件針對差異處有詳細的說明)。</p>

<p>如果你已經用這種方法，額外多出的 crontab 只就是 <tt class="FILENAME">/etc/crontab</tt>
的拷貝，只是格式是錯誤的。 可用以下的命令刪除：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">crontab -r</kbd>
</pre>

<p>下次你編輯 <tt class="FILENAME">/etc/crontab</tt> 檔案的時候， 你不用作任何動作去通知
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a>
，它自動會去偵測是否有更動。</p>

<p>如果你想要每天、每週、或是每月固定執行某些動作一次，也許加個 shell script 在 <tt
class="FILENAME">/usr/local/etc/periodic</tt> 目錄下會更好，系統的 cron 會固定執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">periodic</span>(8)</span></a> 命令，
它可將你的程式和其它的系統週期性工作一起執行。</p>

<p>這個錯誤的真正原因，是因為系統的 crontab 有一個額外的欄位，
說明該命令要以什麼使用者身份執行。在 FreeBSD 的預設系統 crontab 中，所有的項目都是 <tt
class="USERNAME">root</tt>。 當這個 crontab 被當作是 <tt class="USERNAME">root</tt>
的使用者 crontab (它和系統的 crontab 是 <span class="emphasis"><i
class="EMPHASIS">不</i></span> 一樣的)，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a> 會以為 <tt
class="LITERAL">root</tt> 字串是欲執行的命令的第一個字，但是實際上
並沒有這樣的命令存在。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SU-WHEEL-GROUP" name="SU-WHEEL-GROUP"></a><b>10.4.</b> 為什麼我想要用 su 成為
<tt class="USERNAME">root</tt> 時，會得到 “<tt class="ERRORNAME">you are not in the
correct group to su root</tt>” 的錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>這是一個安全特性。想要利用 su 成為 <tt class="USERNAME">root</tt> (或其它有
superuser 權限的帳號)，你一定要在 <tt class="GROUPNAME">wheel</tt>
群組內。如果沒有這個特性的話， 任何人只要在系統裡有帳號，並且恰巧知道 <tt
class="USERNAME">root</tt> 的密碼，就可以取得 superuser
等級的權限以存取系統。有了這個特性， 這樣的情況就不會發生；如果使用者不在 <tt
class="GROUPNAME">wheel</tt> 群組內的話，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">su</span>(1)</span></a>
會讓他們連試著鍵入密碼的機會都沒有。</p>

<p>要讓某人可以利用 su 成為 <tt class="USERNAME">root</tt> 的話， 只要把他們放入 <tt
class="GROUPNAME">wheel</tt> 群組內即可。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RCCONF-READONLY" name="RCCONF-READONLY"></a><b>10.5.</b> 我在 <tt
class="FILENAME">rc.conf</tt> 還是某個起動檔案裡犯了錯誤，
因為檔案系統變成唯讀的，我無法去編輯它。我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>當電腦問你 shell 完整路徑名時，只要按 <tt class="LITERAL">ENTER</tt> ，然後執行
<tt class="COMMAND">mount /</tt> 以讀寫模式 重新掛載根檔案系統。你也許需要執行 <tt
class="COMMAND">mount -a -t ufs</tt> ，將你慣用的文字編輯器所在的檔案系統掛載上來。如果
你慣用的文字編輯器在網路檔案系統上的話，你必須先手動將網路設定
起來，以便將網路檔案系統掛載上來，或是使用本地端檔案系統上的 編輯器，例如 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ed</span>(1)</span></a>。</p>

<p>如果你想要使用像 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">vi</span>(1)</span></a> 或是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1&amp;manpath=FreeBSD+5.4-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">emacs</span>(1)</span></a>
等的全螢幕 文字編輯器的話，你也需要執行 <tt class="COMMAND">export TERM=cons25</tt>
，以便讓這些編輯器能夠從 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">termcap</span>(5)</span></a>
資料庫裡讀取正確的資料。</p>

<p>當你已經完成了這些步驟後，你可以照你平常修改文法錯誤的方式 去編輯 <tt
class="FILENAME">/etc/rc.conf</tt> 檔案。在核心 (kernel)
啟動時所顯示的錯誤訊息，能夠告訴你檔案中哪一行有錯誤。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PRINTER-SETUP" name="PRINTER-SETUP"></a><b>10.6.</b>
為什麼我沒辦法設定我的印表機？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考一下 Handbook 中，有關列印的部份。它應該能夠解決 你大部份的問題。請參考
<a href="../handbook/printing.html" target="_top">Handbook 中的列印部份</a>。</p>

<p>有些印表機需要主機支援的驅動程式 (host-based driver) 才能 執行任何列印功能。FreeBSD
本身並不支援這些所謂的 “WinPrinters”。 如果你的印表機無法在 DOS 或 Windows NT 4.0
下執行，那它大概就是一台 WinPrinter。你唯一能使用 這樣的印表機的希望，就是試試 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/ print/pnm2ppa/pkg-descr"><tt
class="FILENAME">print/pnm2ppa</tt></a> 支不支援它了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KEYBOARD-MAPPINGS" name="KEYBOARD-MAPPINGS"></a><b>10.7.</b>
我要怎麼樣修正我的系統所使用的鍵盤對映 (keyboard mapping)？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 Handbook 中的 <a href="../handbook/using-localization.html"
target="_top">using localization</a> 章節，尤其是 <a
href="../handbook/using-localization.html#SETTING-CONSOLE" target="_top">console
setup</a> 章節。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PNP-RESOURCES" name="PNP-RESOURCES"></a><b>10.8.</b> 為什麼我在系統啟動時，得到
“<tt class="ERRORNAME">unknown: &lt;PNP0303&gt; can't assign resources</tt>”
的訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>以下是從 freebsd-current 通信論壇的一篇文章中節錄出來的。</p>

<a id="AEN3247" name="AEN3247"></a>
<table border="0" width="100%" cellspacing="0" cellpadding="0" class="BLOCKQUOTE">
<tr>
<td width="10%" valign="TOP">&nbsp;</td>
<td valign="TOP">
<p>“無法指派資源 (can't assign resources)” 訊息表示 那些裝置是傳統的 ISA
裝置，而核心中已經編入不認得 PNP 的驅動程
式。這些裝置包括鍵盤控制器，可程式化岔斷控制晶片，還有幾個標準
設備。資源無法指派給這些裝置，是因為早已有驅動程式使用那些位址 了。</p>
</td>
<td width="10%" valign="TOP">&nbsp;</td>
</tr>

<tr>
<td colspan="2" align="RIGHT" valign="TOP">--<span class="ATTRIBUTION">Garrett Wollman
<code class="EMAIL">&#60;<a
href="mailto:wollman@FreeBSD.org">wollman@FreeBSD.org</a>&#62;</code>, 2001 年四月 24
日</span></td>
<td width="10%">&nbsp;</td>
</tr>
</table>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USER-QUOTAS" name="USER-QUOTAS"></a><b>10.9.</b> 為什麼我無法讓 user quotas
正常工作？</p>
</div>

<div class="ANSWER">
<p><b></b></p>

<ul class="noindent">
<li>
<p>不要在 <tt class="FILENAME">/</tt> 打開 quotas，</p>
</li>

<li>
<p>把 quotas 檔放在它必須強迫置入的檔案系統內，舉例：</p>

<div class="INFORMALTABLE"><a id="AEN3262" name="AEN3262"></a>
<table border="0" frame="void" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>檔案系統</th>
<th>Quota 檔</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="FILENAME">/usr</tt></td>
<td><tt class="FILENAME">/usr/admin/quotas</tt></td>
</tr>

<tr>
<td><tt class="FILENAME">/home</tt></td>
<td><tt class="FILENAME">/home/admin/quotas</tt></td>
</tr>

<tr>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SYSV-IPC" name="SYSV-IPC"></a><b>10.10.</b> FreeBSD 支援 System V IPC
格式指令集？</p>
</div>

<div class="ANSWER">
<p><b></b>是的，FreeBSD 支援 System V-style IPC。這包括共享記憶體，
訊息跟信號。你需要在你的 kernel 設定檔內加入下列幾行以啟動它們。</p>

<pre class="PROGRAMLISTING">
options    SYSVSHM          # enable shared memory
options    SYSVSEM          # enable for semaphores
options    SYSVMSG          # enable for messaging
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 在 FreeBSD 3.2 以及之後的版本，這些選項已經是 <span class="emphasis"><i
class="EMPHASIS">GENERIC</i></span> 核心的一部份，也就是說它們已 經編進了你的系統中。</p>
</blockquote>
</div>

<p>重新編譯並安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UUCPMAIL" name="UUCPMAIL"></a><b>10.11.</b> 我該如何讓 sendmail 透過 UUCP
來遞送郵件？</p>
</div>

<div class="ANSWER">
<p><b></b>跟隨 FreeBSD 套裝而來的 sendmail 設定是適合那些直接連上網際網路 的站台。想透過
UUCP 交換郵件的站台必須另外安裝 sendmail 的設定檔案。</p>

<p>手動修改 <tt class="FILENAME">/etc/sendmail.cf</tt> 是絕對必要的。 第 8 版的 sendmail
提供一個全新的入口以透過一些像 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">m4</span>(1)</span></a>
的處理就能產生設定檔，這事實上是一個高層概念等級的技巧性設定。 你應該可以在 <tt
class="FILENAME">/usr/src/usr.sbin/sendmail/cf</tt> 以下裡使用它：</p>

<p>假如你不是用 full sources 方式安裝系統，那麼 sendmail
設定項目可能已經分散成好幾個來源分布檔在等著你，假設你已經 mount 光碟機，做以下動作：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/src</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cat scontrib.?? | tar xzf - -C /usr/src contrib/sendmail</kbd>
</pre>

<p>別驚慌，這只有數十萬個位元組的大小。在 <tt class="FILENAME">cf</tt> 目錄裡的 <tt
class="FILENAME">README</tt> 可以提供一個 m4 設定法的基 本介紹。</p>

<p>以 UUCP 遞送來說，建議你最好使用 <tt class="LITERAL">mailertable</tt>
特點。建構一個資料庫讓 sendmail 可以使用它自己的路徑決策。</p>

<p>首先，你必須建立自己的 <tt class="FILENAME">.mc</tt> 檔。 <tt
class="FILENAME">/usr/src/usr.sbin/sendmail/cf/cf</tt> 目錄是這些
檔案的家。查看一下，已經有好幾個範例檔，假設你已經命名自己的檔叫 <tt
class="FILENAME">foo.mc</tt>，你要做的只是把它轉換成一個有效的 <tt
class="FILENAME">sendmail.cf</tt>：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/src/usr.sbin/sendmail/cf/cf</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make foo.cf</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cp foo.cf /etc/mail/sendmail.cf</kbd>
</pre>

<p>一個典型的 <tt class="FILENAME">.mc</tt> 檔看起來可能像這樣：</p>

<pre class="PROGRAMLISTING">
VERSIONID(`<tt class="REPLACEABLE"><i>Your version number</i></tt>')
OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <tt class="REPLACEABLE"><i>your.uucp.relay</i></tt>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <tt class="REPLACEABLE"><i>your.alias.host.name</i></tt>
Cw    <tt class="REPLACEABLE"><i>youruucpnodename.UUCP</i></tt>
</pre>

<p><tt class="LITERAL">accept_unresolvable_domains</tt>， <tt
class="LITERAL">nocanonify</tt>， 和 <tt class="LITERAL">confDONT_PROBE_INTERFACES</tt>
特性將避免任何在 遞送郵件時會用到 DNS 的機會。<tt class="LITERAL">UUCP_RELAY</tt>
項目的出現理由很奇怪，就不要問為何了。簡單的放入一個網際網路 上可以處理 .UUCP
虛擬網域位址的主機名稱；通常，你只需要在這 裡填入你 ISP 的信件回覆處 (mail replay)。</p>

<p>你已經做到這裡了，你還需要這個叫 <tt
class="FILENAME">/etc/mail/mailertable</tt>。如果你只有一個用
來傳遞所有郵件的對外通道的話，以下的檔案就足夠了：</p>

<pre class="PROGRAMLISTING">
#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
                              uucp-dom:<tt
class="REPLACEABLE"><i>your.uucp.relay</i></tt>
</pre>

<p>另一個更複雜的例子看起來像這樣：</p>

<pre class="PROGRAMLISTING">
#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
                             uucp-dom:
</pre>

<p>如你所見，這是某個真實檔案裡的一部份。首三行處理網域定址信件
不應該被送出到內定路徑，而由某些 UUCP 鄰居(UUCP neighbor)取代 的特殊情形，這是為了
“縮短”遞送的路徑。下一行處理到 本地乙太網路網域的信件讓它可以使用 SMTP
來遞送。最後，UUCP 鄰居提到 .UUCP 虛擬網域的記載，允許一個 <tt class="LITERAL"><tt
class="REPLACEABLE"><i>uucp-neighbor</i></tt> !<tt
class="REPLACEABLE"><i>recipient</i></tt></tt> 推翻
內定規則。最後一行則以一個單獨的句點做結束，以 UUCP 遞送到提供當 你全世界性郵件閘門的UUCP
鄰居。所有在 <tt class="LITERAL">uucp-dom:</tt> 關鍵字裡的節點名稱必須都是有效的 UUCP
鄰居，你可以用 <tt class="LITERAL">uuname</tt> 命令去確認。</p>

<p>提醒你這個檔案在使用前必須被轉換成 DBM 資料庫檔案，最好在 mailertable
最上面用註解寫出命令列來完成這個工作。當你每次更換你 的 mailertable
後你總是需要執行這個命令。</p>

<p>最後提示：如果你不確定某些特定的信件路徑可用，記得把 <code class="OPTION">-bt</code>
選項加到 sendmail。這會將 sendmail 啟動在 <span class="emphasis"><i
class="EMPHASIS">address test mode</i></span>；只要按下 <tt
class="LITERAL">0</tt>，接著輸入你希望測試的信件路徑位址。
最後一行告訴你使用內部的信件代理程式，代理程式的會通知目的主機，
以及(可能轉換的)位址。要離開此模式請按 Control-D。</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">sendmail -bt</kbd>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<samp class="PROMPT">&gt;</samp> <kbd class="USERINPUT">3,0 foo@example.com</kbd>
canonify           input: foo @ example . com
..
parse            returns: $# uucp-dom $@ <tt
class="REPLACEABLE"><i>your.uucp.relay</i></tt> $: foo &lt; @ example . com . &gt;
<samp class="PROMPT">&gt;</samp> <kbd class="USERINPUT">^D</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ISPMAIL" name="ISPMAIL"></a><b>10.12.</b>
當我用撥接連上網路時該怎麼設定信件遞送？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你已經有一個固定的 IP 數字，你不需要調整任何內定值。設好
你要指定的網路名稱，其他的 sendmail 都會幫你做完。</p>

<p>如果你拿到的是動態配置的 IP 數字而使用撥接 ppp 連接到網際網 路，你可能已經在你的 ISP
信件主機上有一個信箱。假設你的 ISP 網域 是 <tt
class="HOSTID">example.net</tt>，你的使用者名 稱是 <tt
class="USERNAME">user</tt>。亦假設你稱自己的主機名稱是 <tt class="HOSTID">bsd.home</tt>
而你的 ISP 告訴你可以使用 <tt class="HOSTID">relay.example.net</tt> 當作信件回覆處。</p>

<p>為了從你的信箱接收信件，你將需要安裝取信程式以便從信箱取回信件。 <b
class="APPLICATION">Fetchmail</b> 是一個不錯的選擇，因為它支
援許多不同的通訊協定，通常你的 ISP 會提供 POP3。如果你選擇使用
user-ppp，你可以在連線到網路成功後自動抓取你的信件，只要在 <tt
class="FILENAME">/etc/ppp/ppp.linkup</tt>裡面設定以下這項：</p>

<pre class="PROGRAMLISTING">
MYADDR:
  !bg su user -c fetchmail
</pre>

<p>假使你正使用 <b class="APPLICATION">sendmail</b> (如下所示)
傳送信件到非本地帳號，置入以下命令：</p>

<pre class="PROGRAMLISTING">
  !bg su user -c "sendmail -q"
</pre>

<p>在上面那項命令之後。這會強迫 <b class="APPLICATION">sendmail</b>
在連接上網路後馬上開始處理 mailqueue。</p>

<p>我假設你在 <tt class="HOSTID">bsd.home</tt> 機器上有一個 <tt
class="USERNAME">user</tt> 的帳號。在 <tt class="HOSTID">bsd.home</tt> 機器上 <tt
class="USERNAME">user</tt> 的家目錄裡建立一個 <tt class="FILENAME">.fetchmailrc</tt>
的檔案：</p>

<pre class="PROGRAMLISTING">
poll example.net protocol pop3 fetchall pass MySecret
</pre>

<p>無須贅言，這個檔除了 <tt class="USERNAME">user</tt> 外不應該被任 何人讀取，因為它包含
<tt class="LITERAL">MySecret</tt> 這個密碼。</p>

<p>為了在寄信時有正確的抬頭 <tt class="LITERAL">from:</tt>，你必須告訴 <b
class="APPLICATION">sendmail</b> 使用 <tt class="LITERAL">user@example.net</tt> 而非 <tt
class="LITERAL">user@bsd.home</tt>。你可能會希望告訴 <b class="APPLICATION">sendmail</b>
從 <tt class="HOSTID">relay.example.net</tt> 送出所有信件， 加快信件傳送。</p>

<p>以下的 <tt class="FILENAME">.mc</tt> 檔應能滿足你的要求：</p>

<pre class="PROGRAMLISTING">
VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.example.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl
</pre>

<p>如何轉換這個 <tt class="FILENAME">.mc</tt> 檔案到 <tt
class="FILENAME">sendmail.cf</tt> 檔的詳細細節，請參考上一節。 另外，在更新 <tt
class="FILENAME">sendmail.cf</tt> 以後不要忘記重新啟動 <b
class="APPLICATION">sendmail</b>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SENDMAIL-ALTERNATIVE" name="SENDMAIL-ALTERNATIVE"></a><b>10.13.</b> 除了
Sendmail 外，還有哪些郵件伺服器可以使用呢？</p>
</div>

<div class="ANSWER">
<p><b></b><a href="http://www.sendmail.org/" target="_top">Sendmail</a> 是 FreeBSD
預設使用的郵件伺服器，但是你還是可以很容易地以其它 郵件伺服器 (例如，從 port
安裝的郵件伺服器) 取代之。</p>

<p>port 裡有很多可供選擇的郵件伺服器，像 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/exim/pkg-descr"><tt
class="FILENAME">mail/exim</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/postfix/pkg-descr"><tt
class="FILENAME">mail/postfix</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/qmail/pkg-descr"><tt
class="FILENAME">mail/qmail</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/zmailer/pkg-descr"><tt
class="FILENAME">mail/zmailer</tt></a> 等， 就是幾個很受歡迎的選擇。</p>

<p>多樣選擇是好事，而且大家有許多郵件伺服器可以使用也被認為是
好事；所以請避免在通信論壇裡問像 “Sendmail 有比 Qmail 好嗎？”
這樣的問題。如果你真的很想問的話，請先到通信論壇 archive
裡找一下。每一個郵件伺服器的優點與缺點，以前大概就已經 討論好幾次了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FORGOT-ROOT-PW" name="FORGOT-ROOT-PW"></a><b>10.14.</b> 我忘了 <tt
class="USERNAME">root</tt> 密碼了！怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>不要驚慌！只要重新啟動系統，在看到 Boot: 時輸入 <kbd class="USERINPUT">boot
-s</kbd> 即可進入單使用者模式 (在 3.2-RELEASE 之前的版本請改用 <kbd
class="USERINPUT">-s</kbd>)。 在問要使用哪個 shell 時，按下 ENTER。你會看到一個 <samp
class="PROMPT">#</samp> 的提示號，輸入 <tt class="COMMAND">mount -u /</tt>
以重新掛上(mount) 你的根檔案系統可供讀/寫。執行 <tt class="COMMAND">passwd root</tt>
以更換 <tt class="USERNAME">root</tt> 密碼，然後執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=exit&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">exit</span>(1)</span></a>
繼續啟動程序。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CAD-REBOOT" name="CAD-REBOOT"></a><b>10.15.</b> 我該怎麼讓 Control-Alt-Delete
不會重新啟動系統？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你是使用 FreeBSD 2.2.7-RELEASE 或之後版本的
syscons(系統內定的主控台驅動程式)，把下列這行放到 kernel 設定檔內，
然後重做一個新的核心：</p>

<pre class="PROGRAMLISTING">
options SC_DISABLE_REBOOT
</pre>

<p>若是使用 FreeBSD 2.2.5-RELEASE 或之後版本的 PCVT 主控台驅動
程式，則以下列選項代替：</p>

<pre class="PROGRAMLISTING">
options PCVT_CTRL_ALT_DEL
</pre>

<p>其他更早期的 FreeBSD 版本，請修改你正在使用的主控台鍵盤對應， 並將所有 <tt
class="LITERAL">boot</tt> 關鍵字以 <tt class="LITERAL">nop</tt> 取代。內定的鍵盤對應是在
<tt class="FILENAME">/usr/share/syscons/keymaps/us.iso.kbd</tt>。 你可能需要明白的吩咐
<tt class="FILENAME">/etc/rc.conf</tt> 去讀取
這個鍵盤對應以確保更動生效。當然如果你正在用適合你國籍的鍵盤對應， 你應該編輯那一個。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DOS-TO-UNIX-TXT" name="DOS-TO-UNIX-TXT"></a><b>10.16.</b> 我該怎麼把 DOS
文字檔案重新格式化成 UNIX 的？</p>
</div>

<div class="ANSWER">
<p><b></b>只要使用這個 perl 命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">perl -i.bak -npe 's/\r\n/\n/g' file ...</kbd>
</pre>

<p>file 就是要處理的檔案。這個修改是在內部完成，原始的檔案會儲存成 副檔名為 .bak
的檔案。</p>

<p>或者你可以使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tr&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tr</span>(1)</span></a> 這個命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">tr -d '\r' &lt; <tt
class="REPLACEABLE"><i>dos-text-file</i></tt> &gt; <tt
class="REPLACEABLE"><i>unix-file</i></tt></kbd>
</pre>

<p><tt class="REPLACEABLE"><i>dos-text-file</i></tt> 是包含 DOS 文字的 檔案，而 <tt
class="REPLACEABLE"><i>unix-text-file</i></tt> 則是包含轉換 的輸出結果。這比使用 perl
還要快上一點點。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KILL-BY-NAME" name="KILL-BY-NAME"></a><b>10.17.</b> 我該怎麼用名稱砍掉
process？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=killall&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">killall</span>(1)</span></a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROOT-ACL" name="ROOT-ACL"></a><b>10.18.</b> 為何在 su 一直說我不在 <tt
class="USERNAME">root</tt> 的 ACL 裡？</p>
</div>

<div class="ANSWER">
<p><b></b>這個錯誤是因為 Kerberos 分散認證系統。這個問題並不是很嚴重
但是令人厭煩。你可以用 -K 選項去執行 su，或是像下個問題所描述的 移除 Kerberos。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNINSTALL-KERBEROS" name="UNINSTALL-KERBEROS"></a><b>10.19.</b> 我該怎麼移除
Kerberos？</p>
</div>

<div class="ANSWER">
<p><b></b>要從系統裡移除 Kerberos，重裝你正在執行的 release 版本的 bin
distribution。如果你有 CDROM，你可以 mount cd(假設在 /cdrom) 並執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/bin</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">./install.sh</kbd>
</pre>

<p>或者你也可以將 <tt class="FILENAME">/etc/make.conf</tt> 裡的 "MAKE_KERBEROS"
選項全都拿掉，然後再 build world.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADD-PTY" name="ADD-PTY"></a><b>10.20.</b> 我該怎麼增加系統的虛擬終端機？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你有許多 telnet，ssh，X 或是 screen 使用者，你或許會用完
虛擬終端機，這能教你怎麼加更多：</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>建立並安裝一個新的 kernel 並且把這一行</p>

<pre class="PROGRAMLISTING">
pseudo-device pty 256
</pre>

<p>加入到設定檔裡。</p>
</li>

<li class="STEP">
<p>執行這個命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV pty{1,2,3,4,5,6,7}</kbd>
</pre>

<p>會造出 256 個虛擬終端機的裝置節點。</p>
</li>

<li class="STEP">
<p>編輯 <tt class="FILENAME">/etc/ttys</tt> 並加入符合 256
個終端機的行數。它們應該符合已經存在單項的格式，舉例來說， 它們看起來像：</p>

<pre class="PROGRAMLISTING">
ttyqc none network
</pre>

<p>字母設計的順序是 <tt class="LITERAL">tty[pqrsPQRS][0-9a-v]</tt>，使用正規表示式。</p>
</li>

<li class="STEP">
<p>用新的 kernel 重新啟動電腦就可以了。</p>
</li>
</ol>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CREATE-SND0" name="CREATE-SND0"></a><b>10.21.</b> /dev/snd0
這個裝置做不出來！</p>
</div>

<div class="ANSWER">
<p><b></b>並沒 <tt class="DEVICENAME">snd</tt> 這個裝置的存在。這個名字
是用來當作各個組成 FreeBSD 聲音驅動程式組，諸如 <tt class="DEVICENAME">mixer</tt>， <tt
class="DEVICENAME">sequencer</tt>，以及 <tt class="DEVICENAME">dsp</tt> 的簡稱。</p>

<p>可以用以下的命令作出這些裝置：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV snd0</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REREAD-RC" name="REREAD-RC"></a><b>10.22.</b> 可以不用開機，重新讀取 <tt
class="FILENAME">/etc/rc.conf</tt>、 再次啟動 <tt class="FILENAME">/etc/rc</tt> 嗎?</p>
</div>

<div class="ANSWER">
<p><b></b>先進入單人使用者模式，然後再回到多使用者模式。</p>

<p>在主控台執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">shutdown now</kbd>
(Note: without -r or -h)

<samp class="PROMPT">#</samp> <kbd class="USERINPUT">return</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">exit</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RELEASE-CANDIDATE" name="RELEASE-CANDIDATE"></a><b>10.23.</b>
我想要把我的系統昇級到最新的 -STABLE，但是得到的是 -RC 或 -PRERELEASE！怎麼了？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地說：那只是名字而已。RC 的意思是 “Release Candiate，
發行候選版本”，它表示新版本快要發行了。在 FreeBSD 中， -PRERELEASE
通常是發行前的程式碼凍結的代名詞。(有些發行版本中， -BETA 標籤跟 -PRERELEASE
是相同意思的。)</p>

<p>詳細地說：FreeBSD 從兩個地方分支出它的發行版本。主版號、 點零、release (例如
3.0-RELEASE 及 4.0-RELEASE) 的，是從發展過程 開始時分支出來的，通常稱為 <a
href="#CURRENT">-CURRENT</a> 。有副版號的版本 (例如 3.1-RELEASE 或 4.2-RELEASE)，是
活躍的 <a href="#STABLE">-STABLE</a> 分支中的發行版本 快照。從 4.3-RELEASE
開始，每一個發行版本有它自己的分支，可為 偏好極度保守的發展速度
(通常只會作安全方面的更新) 的人所用。</p>

<p>準備要製作發行版本時，其所在的分支會經過一定的程序。有一個是
程式碼凍結。當程式碼凍結開始時，分支名稱會更名，以反映它快要成為
一個發行版本了。舉個例子，如果原來的分支叫 4.5-STABLE，它的名字 會變成 4.6-PRERELEASE
以表示程式碼已凍結，並且額外的發行前測試
將要開始了。臭蟲更正仍可回報，以成為發行版本的一部份。當程式碼
有了可成為發行版本的雛形時，它的名字就會變成 4.6-RC，以表示發行 版本快好了。進入 RC
階段後，只有找到的最有影響的臭蟲才會被修正。 當發行版本 (本例中為 4.6-RELEASE)
產生後，發行版本會有自己的分支， 原分支會被更名為 4.6-STABLE。</p>

<p>想要得知更多有關版本號碼與各 CVS 分支的資訊，請參考 <a
href="../../articles/releng/article.html" target="_top">Release Engineering</a>
一文。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KERNEL-CHFLAG-FAILURE" name="KERNEL-CHFLAG-FAILURE"></a><b>10.24.</b>
我試著要安裝一個新的核心，但是無法 chflags。我該怎麼解決？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地說：你的 securelevel 可能大於零。直接重新開機到
單人模式，再安裝核心。</p>

<p>詳細地說：FreeBSD 在 securelevel 大於零情況下，不允許 變更系統旗標 (system
flags)。你可以用這個指令檢查你的 securelevel：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl kern.securelevel</kbd>
</pre>

<p>你沒有辦法降低 securelevel；你必須啟動系統到單人模式以 安裝核心，或是修改 <tt
class="FILENAME">/etc/rc.conf</tt> 內的 securelevel 再重新開機。請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a>
說明文件，以取得 更多有關 securelevel 的資訊，還有 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
說明文件，以取得更多有關 rc.conf 的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KERNEL-SECURELEVEL-TIME" name="KERNEL-SECURELEVEL-TIME"></a><b>10.25.</b>
在我的系統上，我無法變更時間超過一秒以上的範圍！ 我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地講：你系統的 securelevel 也許大於 1。直接重新開機至
單人模式，然後再修改時間。</p>

<p>詳細地說：在 securelevel 大於 1 的情況下，FreeBSD 不允許時間
變動大於一秒。你可以用以下的命令來檢查目前的 securelevel：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl kern.securelevel</kbd>
</pre>

<p>你無法降低 securelevel；你必須啟動電腦至單人模式下以修改時間， 或是修改 <tt
class="FILENAME">/etc/rc.conf</tt> 再重新開機。請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a>
說明文件，以取得更多有關 securelevel 的資訊，還有 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
說明文件，以取得更多有關 rc.conf 的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STATD-MEM-LEAK" name="STATD-MEM-LEAK"></a><b>10.26.</b> 為什麼 <tt
class="COMMAND">rpc.statd</tt> 用了 256 megabytes 的記憶體？</p>
</div>

<div class="ANSWER">
<p><b></b>不，那不是 memory leak，而且它也不是真的用了 256 Mbyte 的記憶體。它只是喜歡
(意思就是總會這樣作) 將一狗票的記憶體
映謝到它自己的位址空間，以方便作事。就技術而言，這樣並沒有 什麼不對；這樣只是會讓 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a>
嚇一大跳而已。</p>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rpc.statd</span>(8)</span></a>
會將它的狀態檔案 (位於 <tt class="FILENAME">/var</tt> )
映射至它的位址空間裡；為了防止需要的時候再增大所
導致的重新映射，它一次會使用相當大的大小。從程式碼來看的話就 更明顯了，可以看到 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&amp;sektion=2"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mmap</span>(2)</span></a> 的長度參數為
<tt class="LITERAL">0x10000000</tt> ，它是 IA32 架構上的十六分之一的定址空間，也就是
256MB。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNSETTING-SCHG" name="UNSETTING-SCHG"></a><b>10.27.</b> 為什麼我沒辦法取消 <tt
class="LITERAL">schg</tt> 檔案旗標？</p>
</div>

<div class="ANSWER">
<p><b></b>你正在一個提高了 securelevel (也就是大於 0) 的系統運作。 降低 securelevel
再試試看。請參考 <a href="#SECURELEVEL">FAQ 中對 securelevel 的說明</a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> 說明文件。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SSH-SHOSTS" name="SSH-SHOSTS"></a><b>10.28.</b> 為什麼近來的新版 FreeBSD
預設無法利用 <tt class="FILENAME">.shosts</tt> 完成 SSH 認證？</p>
</div>

<div class="ANSWER">
<p><b></b>為什麼近來新版 FreeBSD <tt class="FILENAME">.shosts</tt> 認證預設
為取消的原因，是因為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;manpath=OpenBSD+3.4">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ssh</span>(1)</span></a>
預設不安裝為 suid 成 <tt class="USERNAME">root</tt>。要 “修正” 這點，你可以作下列的
任何一件事：</p>

<ul>
<li>
<p>要一勞永逸解決，請將 <tt class="FILENAME">/etc/make.conf</tt> 裡的 <tt
class="MAKEVAR">ENABLE_SUID_SSH</tt> 設成 <tt class="LITERAL">true</tt> ，然後再重新
build ssh (或是執行 <tt class="COMMAND">make world</tt>)。</p>
</li>

<li>
<p>只作一時的修正的話，可以 <tt class="USERNAME">root</tt> 身份 執行 <tt
class="COMMAND">chmod 4755 /usr/bin/ssh</tt> 將 <tt class="FILENAME">/usr/bin/ssh</tt>
設成 <tt class="LITERAL">4555</tt> 。然後將 <tt class="MAKEVAR">ENABLE_SUID_SSH=
true</tt> 加入 <tt class="FILENAME">/etc/make.conf</tt> 裡，這樣下次 <tt
class="COMMAND">make world</tt> 執行就會生效了。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="VNLRU" name="VNLRU"></a><b>10.29.</b> 什麼是 <tt
class="LITERAL">vnlru</tt>?</p>
</div>

<div class="ANSWER">
<p><b></b>當系統達到上限 <code class="VARNAME">kern.maxvnodes</code> 時， <tt
class="LITERAL">vnlru</tt> 會清除並釋放 vnode。這個核心
執行緒大部份的時間都沒事作，只有當你有很大的記憶體，而且
正在存取上萬個小檔案時，才會被啟動。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="X" name="X"></a>Chapter 11 X Window System 及 Virtual Consoles</h1>

Wei-Hon Chen

<div class="QANDASET">
<dl>
<dt>11.1. <a href="#RUNNING-X">我想要執行 X ，我該怎麼做？</a></dt>

<dt>11.2. <a href="#RUNNING-X-SECURELEVELS">我 <span class="emphasis"><i
class="EMPHASIS">試著</i></span> 要執行 X, 但是當我鍵入 <tt class="COMMAND">startx</tt>
時，得到 “<tt class="ERRORNAME">KDENABIO failed (Operation not permitted)</tt>”
錯誤。我該怎麼辦？</a></dt>

<dt>11.3. <a href="#X-AND-MOUSED">為什麼我不能在 X 裡使用滑鼠？</a></dt>

<dt>11.4. <a href="#X-AND-WHEEL">我的滑鼠有個很炫的滾輪。我能在 X 裡面使用嗎？</a></dt>

<dt>11.5. <a href="#WINDOW-MENU-WEIRD">為什麼 X Window
的選單和對話框不能正常運作？</a></dt>

<dt>11.6. <a href="#VIRTUAL-CONSOLE">什麼是 virtual
console？我要怎麼做才能用多一點？</a></dt>

<dt>11.7. <a href="#VTY-FROM-X">我要怎麼從 X 切換到 virtual console？</a></dt>

<dt>11.8. <a href="#XDM-BOOT">我要怎麼做才能在開機時啟動 XDM？</a></dt>

<dt>11.9. <a href="#XCONSOLE-FAILURE">為什麼當我執行 xconsole 時，發生了 “<tt
class="ERRORNAME">Couldn't open console</tt>” 的錯誤？</a></dt>

<dt>11.10. <a href="#XFREE86-ROOT">以前我可以以一般使用者執行
XFree86，為什麼現在它說我一定要 以 <tt class="USERNAME">root</tt> 才能執行？</a></dt>

<dt>11.11. <a href="#PS2-X">我的 PS/2 滑鼠在 X 中有點不正常？</a></dt>

<dt>11.12. <a href="#PS2-MOUSESYSTEMS">我的 PS/2 滑鼠不能透過 MouseSystem
來運作？</a></dt>

<dt>11.13. <a href="#IMAKE-TMPL">當我建立 X 程式時，<tt class="COMMAND">imake</tt>
說它找不到 <tt class="FILENAME">Imake.tmpl</tt>。它在哪兒？</a></dt>

<dt>11.14. <a href="#XFREE86-VERSION">我在 build 一個 X 應用程式，它需要 XFree86
3.3.x，但是 我已經安裝 XFree86 4.x 了。我該怎麼辦？</a></dt>

<dt>11.15. <a href="#MOUSE-BUTTON-REVERSE">我要怎麼做才能設定左撇子用的滑鼠？</a></dt>

<dt>11.16. <a href="#INSTALL-SPLASH">要如何安裝 splash
圖形顯示程式？那裡可以找得到呢？</a></dt>

<dt>11.17. <a href="#WINDOWS-KEYS">我能在 X 裡使用鍵盤上的 <span
class="TRADEMARK">Windows</span> &reg; 嗎？</a></dt>

<dt>11.18. <a href="#X-3D-ACCELERATION">我要怎麼樣才能得到 OpenGL 的 3D
硬體加速功能？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RUNNING-X" name="RUNNING-X"></a><b>11.1.</b> 我想要執行 X ，我該怎麼做？</p>
</div>

<div class="ANSWER">
<p><b></b>最簡單的方法就是在安裝系統的時候一併安裝。</p>

<p>然後看看 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgconfig&amp;sektion=1&amp;manpath=X11R6.7.0">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xorgconfig</span>(1)</span></a>
的文件，這個程式可以 幫您設定 <span class="TRADEMARK">XFree86</span>&#8482;
相關設定，使它能夠正確運用您的顯示卡、滑鼠等週邊。此外，還可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1&amp;manpath=X11R6.7.0">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xorgcfg</span>(1)</span></a>
的圖形介面來做相關設定。</p>

<p>您或許也想試試看 Xaccel server。詳情請看 <a href="#XIG">Xi Graphics</a> 這一段。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RUNNING-X-SECURELEVELS" name="RUNNING-X-SECURELEVELS"></a><b>11.2.</b> 我 <span
class="emphasis"><i class="EMPHASIS">試著</i></span> 要執行 X, 但是當我鍵入 <tt
class="COMMAND">startx</tt> 時，得到 “<tt class="ERRORNAME">KDENABIO failed (Operation
not permitted)</tt>” 錯誤。我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>你的系統一定提高了 securelevel，對不對？在一個提高了 securelevel
的系統上，是絕對無法起動 X 的。想知道為什麼， 請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> 說明文件。</p>

<p>所以這個問題變成：你還能怎麼辦。基本上你有兩種選擇： 將你的 securelevel 設回零 (通常在
<tt class="FILENAME">/etc/rc.conf</tt> 裡面設定)，或是在啟動時執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;manpath=XFree86+4.4.0">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xdm</span>(1)</span></a> (在
securelevel 被昇高前)。</p>

<p>請參考 <a href="#XDM-BOOT">Q: 11.8.</a> 以取得更多有關啟動時 執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;manpath=XFree86+4.4.0">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xdm</span>(1)</span></a>
的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="X-AND-MOUSED" name="X-AND-MOUSED"></a><b>11.3.</b> 為什麼我不能在 X
裡使用滑鼠？</p>
</div>

<div class="ANSWER">
<p><b></b>如果您用的是 syscons (內定的 console 驅動程式) 的話，您可以 經由設定 FreeBSD
來讓它支援在每個 virtual console 使用滑鼠。為了 避免和 X 產生衝突，syscons 使用了一個叫做
<tt class="DEVICENAME">/dev/sysmouse</tt> 的虛擬裝置。所有滑鼠產生的 event 都會利用
moused 來寫到 sysmouse 這個裝置。如果您希望在一個 或以上的 virtual console
上使用滑鼠，<span class="emphasis"><i class="EMPHASIS">並且</i></span> 能夠使用 X
的話，請參考 <a href="#MOUSED">Q: 4.4.4.</a> 並且設定好 moused。</p>

<p>然後編輯 <tt class="FILENAME">/etc/XF86Config</tt> 這個檔案，
並且確認你有以下這幾行的設定。</p>

<pre class="PROGRAMLISTING">
Section         Pointer
Protocol        "SysMouse"
Device          "/dev/sysmouse"
....
</pre>

<p>以上的例子，適用於 XFree86 3.3.2 及其後的版本。用於更早的 版本的，其 <span
class="emphasis"><i class="EMPHASIS">Protocol</i></span> 應為 <span class="emphasis"><i
class="EMPHASIS">MouseSystems</i></span>。</p>

<p>有些人比較喜歡在設定 X 的時候用 <tt class="DEVICENAME">/dev/mouse</tt>
這個裝置。如果您要讓它能夠 正常工作的話，您就必須把 <tt
class="DEVICENAME">/dev/mouse</tt> 連結到 <tt class="DEVICENAME">/dev/sysmouse</tt>
(請參考 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=sysmouse&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysmouse</span>(4)</span></a>):</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">rm -f mouse</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ln -s sysmouse mouse</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="X-AND-WHEEL" name="X-AND-WHEEL"></a><b>11.4.</b> 我的滑鼠有個很炫的滾輪。我能在
X 裡面使用嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以。不過你需要設定 X 用戶端程式。 請參考 <a
href="http://www.inria.fr/koala/colas/mouse-wheel-scroll/" target="_top">Colas Nahaboo
的網頁 (http://www.inria.fr/koala/colas/mouse-wheel-scroll/)</a> .</p>

<p>如果你要使用 <b class="APPLICATION">imwheel</b> 程式， 只要跟著下列步驟作即可。</p>

<ol type="1">
<li>
<p>轉換滾輪 event Translate the Wheel Events</p>

<p><b class="APPLICATION">imwheel</b> 程式的運作原理， 是將滑鼠的第四鍵與第五鍵轉換成按鍵
event。因為如此，所以 你必須讓滑鼠驅動程式將滑輪事件轉換成第四鍵與第五鍵 event。
有兩種方法可以達到目的，一是讓 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 作轉換，二是
讓 X 本身去作 event 轉換。</p>

<ol type="a">
<li>
<p>使用 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 來轉換滾輪
Event</p>

<p>要讓 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 來作 event
轉換，只要在 執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>
的命令列中加上 <code class="OPTION">-z 4</code> 即可。舉個例子，如果你一般都是以 <tt
class="COMMAND">moused -p /dev/psm0</tt> 來起動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>
的話，只要改成 <tt class="COMMAND">moused -p /dev/psm0 -z 4</tt>
即可。如果你是在開機過程中利用 <tt class="FILENAME">/etc/rc.conf</tt> 來起動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>， 你可以在
<tt class="FILENAME">/etc/rc.conf</tt> 中將 <code class="VARNAME">moused_flags</code>
上加 <code class="OPTION">-z 4</code> 即可。</p>

<p>你現在需要讓 X 知道你的滑鼠有五個按鍵，只要在 <tt
class="FILENAME">/etc/XF86Config</tt> 中的 “Pointer” 區塊中加上 <tt
class="LITERAL">Buttons 5</tt> 這一行即可。例如， 你可能在 <tt
class="FILENAME">/etc/XF86Config</tt> 中有 以下的 “Pointer” 區塊：</p>

<div class="EXAMPLE"><a id="AEN3789" name="AEN3789"></a>
<p><b>Example 11-1. 在 XFree86 3.3.x 系列的 XF86Config 設定檔的 “Pointer” 區塊中，以
moused 作轉換 的滾輪鼠的設定範例</b></p>

<pre class="PROGRAMLISTING">
Section "Pointer"
   Protocol        "SysMouse"
   Device          "/dev/sysmouse"
   Buttons         5
EndSection
</pre>
</div>

<div class="EXAMPLE"><a id="AEN3793" name="AEN3793"></a>
<p><b>Example 11-2. 在 XFree86 4.x 系列的 XF86Config 設定檔的 “InputDevice” 區塊中，以
X Server 作轉換 的滾輪鼠的設定範例</b></p>

<pre class="PROGRAMLISTING">
Section "InputDevice"
   Identifier      "Mouse1"
   Driver          "mouse"
   Option          "Protocol" "auto"
   Option          "Device" "/dev/sysmouse"
   Option          "Buttons" "5"
EndSection
</pre>
</div>

<div class="EXAMPLE"><a id="AEN3797" name="AEN3797"></a>
<p><b>Example 11-3. 在 “.emacs” 中，設定滾輪鼠的原生 頁面滾動支援範例</b></p>

<pre class="PROGRAMLISTING">
;; wheel mouse
(global-set-key [mouse-4] 'scroll-down)
(global-set-key [mouse-5] 'scroll-up)
</pre>
</div>
</li>

<li>
<p>利用你的 X Server 來作滾輪 Event 轉換</p>

<p>如果你沒有執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span
class="REFENTRYTITLE">moused</span>(8)</span></a>，或是你不想利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a> 去作滾輪
event 轉換，你可以改用 X server 來作這樣的 event 轉換。你得在 <tt
class="FILENAME">/etc/XF86Config</tt> 檔案中作幾個更動。第一，
你要為你的滑鼠選擇適當的通訊協定。大多數的滾輪鼠都 使用 “IntelliMouse” 協定，不過
XFree86 也支援其它的通訊協定，例如羅技的 MouseMan+ 滑鼠所用的
“MouseManPlusPS/2”。當你選好之後，只要 加進一行 “Pointer” 區塊的 <code
class="VARNAME">Protocol</code> 變數即可。</p>

<p>第二，你要告訴 X server 將捲動事件重新對映至滑鼠的 第四和第五鍵。這可以利用 <code
class="VARNAME">ZAxisMapping</code> 選項辦到。</p>

<p>舉個例子，如果你沒有使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>，而你有一個
IntelliMouse 安裝在 PS/2 滑鼠埠的話，你可以在 <tt class="FILENAME">/etc/XF86Config</tt>
裡使用以下的設定。</p>

<div class="EXAMPLE"><a id="AEN3822" name="AEN3822"></a>
<p><b>Example 11-4. 在 XF86Config 設定檔的 “Pointer” 區塊中，以 X Server
作轉換的滾輪鼠的設定範例</b></p>

<pre class="PROGRAMLISTING">
Section "Pointer"
   Protocol        "IntelliMouse"
   Device          "/dev/psm0"
   ZAxisMapping    4 5
EndSection
</pre>
</div>

<div class="EXAMPLE"><a id="AEN3826" name="AEN3826"></a>
<p><b>Example 11-5. 在 XFree86 4.x 系列的 XF86Config 設定檔的 “InputDevice” 區塊中，以
X Server 作轉換 的滾輪鼠的設定範例</b></p>

<pre class="PROGRAMLISTING">
Section "InputDevice"
   Identifier      "Mouse1"
   Driver          "mouse"
   Option          "Protocol" "auto"
   Option          "Device" "/dev/psm0"
   Option          "ZAxisMapping" "4 5"
EndSection
</pre>
</div>

<div class="EXAMPLE"><a id="AEN3830" name="AEN3830"></a>
<p><b>Example 11-6. 在 “.emacs” 中，設定滾輪鼠的原生 頁面滾動支援範例</b></p>

<pre class="PROGRAMLISTING">
;; wheel mouse
(global-set-key [mouse-4] 'scroll-down)
(global-set-key [mouse-5] 'scroll-up)
</pre>
</div>
</li>
</ol>
</li>

<li>
<p>安裝 <b class="APPLICATION">imwheel</b></p>

<p>接下來，從 Ports 裡安裝 <b class="APPLICATION">imwheel</b> 。在 x11
類別裡可以找到它，它可以將 滾輪 event 對映到鍵盤 event。舉個例子，它可以在你
將滾輪往前推時，送出一個 <b class="KEYCAP">Page Up</b> 到你的應用程式去。<b
class="APPLICATION">Imwheel</b> 利用一個設定檔，以便對應滾輪 event 至鍵盤 event，這樣
它就可以在不同的應用程式中，送出不同的鍵盤按鍵。預設的 <b class="APPLICATION">imwheel</b>
設定檔是在 <tt class="FILENAME">/usr/X11R6/etc/imwheelrc</tt>，如果你想
編輯自訂的設定檔的話，可以將它複製到 <tt
class="FILENAME">~/.imwheelrc</tt>，然後依你的需要修改它。 設定檔的格式在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=imwheel&amp;sektion=1&amp;manpath=FreeBSD+5.4-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">imwheel</span>(1)</span></a>
裡面有詳細的說明。</p>
</li>

<li>
<p>設定 <b class="APPLICATION">Emacs</b> 與 <b class="APPLICATION">Imwheel</b> 協同工作
(<span class="emphasis"><i class="EMPHASIS">選擇性</i></span>)</p>

<p>如果你使用 <b class="APPLICATION">emacs</b> 或是 <b class="APPLICATION">Xemacs</b>
的話，那你需要在你的 <tt class="FILENAME">~/.emacs</tt> 檔案裡加上一小段設定。 <b
class="APPLICATION">emacs</b> 請加上這一段：</p>

<div class="EXAMPLE"><a id="AEN3857" name="AEN3857"></a>
<p><b>Example 11-7. Imwheel 的 Emacs 設定</b></p>

<pre class="PROGRAMLISTING">
;;; For imwheel
(setq imwheel-scroll-interval 3)
(defun imwheel-scroll-down-some-lines ()
  (interactive)
  (scroll-down imwheel-scroll-interval))
(defun imwheel-scroll-up-some-lines ()
  (interactive)
  (scroll-up imwheel-scroll-interval))
(global-set-key [?\M-\C-\)] 'imwheel-scroll-up-some-lines)
(global-set-key [?\M-\C-\(] 'imwheel-scroll-down-some-lines)
;;; end imwheel section
</pre>
</div>

<p><b class="APPLICATION">Xemacs</b> 則在 <tt class="FILENAME">~/.emacs</tt>
檔裡加上這一段：</p>

<div class="EXAMPLE"><a id="AEN3865" name="AEN3865"></a>
<p><b>Example 11-8. Imwheel 的 Xemacs 設定</b></p>

<pre class="PROGRAMLISTING">
;;; For imwheel
(setq imwheel-scroll-interval 3)
(defun imwheel-scroll-down-some-lines ()
  (interactive)
  (scroll-down imwheel-scroll-interval))
(defun imwheel-scroll-up-some-lines ()
  (interactive)
  (scroll-up imwheel-scroll-interval))
(define-key global-map [(control meta \))] 'imwheel-scroll-up-some-lines)
(define-key global-map [(control meta \()] 'imwheel-scroll-down-some-lines)
;;; end imwheel section
</pre>
</div>
</li>

<li>
<p>執行 <b class="APPLICATION">Imwheel</b></p>

<p>安裝之後，你可以直接在 xterm 裡鍵入 <tt class="COMMAND">imwheel</tt>
命令以起動它。它會以背景執行，並且馬上發揮效用。 如果你確定要直接使用 <b
class="APPLICATION">imwheel</b>， 只要把它加進你自己的 <tt class="FILENAME">.xinitrc</tt>
或 <tt class="FILENAME">.xsession</tt> 內檔案即可。你可以不管 <b
class="APPLICATION">imwheel</b> 所送出來有關 PID 檔案 警告。那些警告只對 Linux 版的 <b
class="APPLICATION">imwheel</b> 有效而已。</p>
</li>
</ol>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WINDOW-MENU-WEIRD" name="WINDOW-MENU-WEIRD"></a><b>11.5.</b> 為什麼 X Window
的選單和對話框不能正常運作？</p>
</div>

<div class="ANSWER">
<p><b></b>把 Num Lock 關掉試試。</p>

<p>如果您的 Num Lock 在開機時的預設值是開著的話，您必須把下列 這行放到 <tt
class="FILENAME">XF86Config</tt> 設定檔中的 <tt class="LITERAL">Keyboard</tt> 部份。</p>

<pre class="PROGRAMLISTING">
# Let the server do the NumLock processing.  This should only be
# required when using pre-R6 clients
    ServerNumLock
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="VIRTUAL-CONSOLE" name="VIRTUAL-CONSOLE"></a><b>11.6.</b> 什麼是 virtual
console？我要怎麼做才能用多一點？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單來說，virtual console 就是可以讓您不必做太多複雜的設定 如使用網路或執行 X
，而在同一臺機器上同時做好幾件事的方法。</p>

<p>當啟動系統並顯示完所有開機訊息之後，您就會在螢幕上看到一個 login
的提示符號。在這個時候您就可以輸入您的 login name 以及 password ，然後就可以在第一個
virtual console 上開始工作了 (或者開始玩！) 。</p>

<p>在某些情況下，您可能會想要作其他的工作，例如說是看看您正在
執行的程式的說明文件，或是當您在 FTP 傳輸的等待時間中看看您的 郵件。您只需要按 Alt-F2
(按住 Alt 鍵不放，並按下 F2 鍵) ，然後 您就會在第二個 “virtual console” 上看到一個
login 提示符號！當您想要回到原來的工作時，請按 Alt-F1。</p>

<p>FreeBSD 在安裝時的預設值是使用三個 virtual console (3.3-RELEASE 後為八個)，您可以用
Alt-F1，Alt-F2，以及 Alt-F3 在它們之間做切換。</p>

<p>如果您想要多一點 virtual console 的話，您只需要編輯 <tt
class="FILENAME">/etc/ttys</tt> 這個檔 (請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ttys</span>(5)</span></a>)， 在
“Virtual terminals” 這個註解後面加入 <tt class="DEVICENAME">ttyv4</tt> 到 <tt
class="DEVICENAME">ttyvc</tt> 的欄位：</p>

<pre class="PROGRAMLISTING">
# Edit the existing entry for ttyv3 in /etc/ttys and change
# "off" to "on".
ttyv3   "/usr/libexec/getty Pc"         cons25  on secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on secure
ttyv8   "/usr/libexec/getty Pc"         cons25  on secure
ttyv9   "/usr/libexec/getty Pc"         cons25  on secure
ttyva   "/usr/libexec/getty Pc"         cons25  on secure
ttyvb   "/usr/libexec/getty Pc"         cons25  on secure
</pre>

<p>您想用幾個就設幾個。您設越多 virtual terminal ，它們就用掉
越多系統資源；如果您只有不到 8MB 的記憶體的話，這影響就大了。 您可能也會想把 <tt
class="LITERAL">secure</tt> 換成 <tt class="LITERAL">insecure</tt>。</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> 如果您想要執行 X 的話，您 <span class="emphasis"><i
class="EMPHASIS">必須</i></span> 為它保留 (或關掉) 至少一個 virtual terminal
。這就是說，如果 您想在按十二個 Alt 功能鍵時都有 login 提示符號，而且又在同一
部電腦上也想執行 X 的話，那麼這真是太不幸了 - 您只能用十一個。</p>
</blockquote>
</div>

<p>取消一個 console 最簡單的方法就是把它關掉。舉例來說，如果 您像上面講的一樣設定了全部的
12 個 terminal 並且想要執行 X ， 您必需把 virtual terminal 12 從：</p>

<pre class="PROGRAMLISTING">
ttyvb   "/usr/libexec/getty Pc"         cons25  on  secure
</pre>

<p>設成：</p>

<pre class="PROGRAMLISTING">
ttyvb   "/usr/libexec/getty Pc"         cons25  off secure
</pre>

<p>如果您的鍵盤只有 10 個功能鍵的話，您就要改成這樣：</p>

<pre class="PROGRAMLISTING">
ttyv9   "/usr/libexec/getty Pc"         cons25  off secure
ttyva   "/usr/libexec/getty Pc"         cons25  off secure
ttyvb   "/usr/libexec/getty Pc"         cons25  off secure
</pre>

<p>(您也可以直接把這幾行砍掉。)</p>

<p>一旦您改了 <tt class="FILENAME">/etc/ttys</tt>，下一個步驟就是要 確定您有足夠的
virtual terminal 裝置。最簡單的方法就是：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV vty12</kbd>
</pre>

<p>再過來，想要啟動這些 virtual console 最簡單 (也是最乾淨)
的做法就是重開機。然後，如果您不想重開機的話，您可以把 X Window 關掉，然後用 <tt
class="USERNAME">root</tt> 的身份執行下列指令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">kill -HUP 1</kbd>
</pre>

<p>當您執行這個命令前，您一定要完全把 X Window 關掉。如果
您不這麼做的話，您的系統可能會在您執行 kill 命令後出現當掉或 鎖死的情況。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="VTY-FROM-X" name="VTY-FROM-X"></a><b>11.7.</b> 我要怎麼從 X 切換到 virtual
console？</p>
</div>

<div class="ANSWER">
<p><b></b>請用 <b class="KEYCAP">Ctrl</b>+<b class="KEYCAP">Alt</b>+<b
class="KEYCAP">F<tt class="REPLACEABLE"><i>n</i></tt></b> 以切回至 virtual console。 <b
class="KEYCAP">Ctrl</b>+<b class="KEYCAP">Alt</b>+<b class="KEYCAP">F1</b>
可以切回至第一個 virtual console。</p>

<p>當你切回至文字 console 後，你就可以使用一般 <b class="KEYCAP">Alt</b>+<b
class="KEYCAP">F<tt class="REPLACEABLE"><i>n</i></tt></b> 按鍵組合，在各 console
之間切換。</p>

<p>要回到 X 的話，你必須切回至執行 X 的 virtual console。 如果你是從命令列裡起動 X 的話
(例如使用 <tt class="COMMAND">startx</tt> 指令)，那麼 X 會依附在下一個未使用的 virtual
console，而不是它被 起動的文字 console。如果你有八個使用中的 virtual terminal，那麼 X
就會在第九個上執行，你就可以使用 <b class="KEYCAP">Alt</b>+<b class="KEYCAP">F9</b>
以返回至 X 中。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="XDM-BOOT" name="XDM-BOOT"></a><b>11.8.</b> 我要怎麼做才能在開機時啟動 XDM？</p>
</div>

<div class="ANSWER">
<p><b></b>有兩種方法可以啟動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&query=xdm"
target="_top">xdm</a>。一種方法是從 <tt class="FILENAME">/etc/ttys</tt> 來啟動， 可以參考
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ttys</span>(5)</span></a>
說明文件中的範例；另一種方法是在 <tt class="FILENAME">rc.local</tt> (請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a>) 執行 xdm，或是
在 <tt class="FILENAME">/usr/local/etc/rc.d</tt> 放一個 <tt
class="FILENAME">X.sh</tt>。這兩種方法都是合法的，如果您試某一種
方法無效的話，您可以試試另外一種。這兩種方法的結果是一樣的：X 會顯示一個圖形化的 login:
提示。</p>

<p>用 ttys 的方法的優點，在於指明了 X 在啟動時到底是用那個 vty， 並且將 logout 時重新啟動
X server 的責任丟給 init。 rc.local 的方法則是在當啟動 X 出了問題時，可以很輕鬆地把 xdm
殺掉來解決 問題。</p>

<p>如果是用 rc.local 的方法，在執行 <tt class="COMMAND">xdm</tt>
時您不能加任何參數（也就是跑成 daemon）。必須在 getty 執行後 才能啟動 xdm，否則 getty 和
xdm 會互相衝突而鎖住 console。最好的 方式是在 script 中加個 sleep，讓它暫停 10
秒鐘左右，接著才執行 xdm。</p>

<p>如果你是從 <tt class="FILENAME">/etc/ttys</tt> 啟動 <tt class="COMMAND">xdm</tt>，<tt
class="COMMAND">xdm</tt> 與 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">getty</span>(8)</span></a>
仍有機會互相衝突。一個避免它的方法，就是在 <tt
class="FILENAME">/usr/X11R6/lib/X11/xdm/Xservers</tt> 檔案中加入 <tt
class="LITERAL">vt</tt> 數字。</p>

<pre class="PROGRAMLISTING">
:0 local /usr/X11R6/bin/X vt4
</pre>

<p>上面的例子中，會指示 X server 在 <tt class="DEVICENAME">/dev/ttyv3</tt>
中執行。請注意數字是差一的。X server 從一開始數 vty，而 FreeBSD 核心則是從零開始數 vty
的。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="XCONSOLE-FAILURE" name="XCONSOLE-FAILURE"></a><b>11.9.</b> 為什麼當我執行
xconsole 時，發生了 “<tt class="ERRORNAME">Couldn't open console</tt>” 的錯誤？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你是用 <tt class="COMMAND">startx</tt> 來啟動 <tt
class="COMMAND">startx</tt> 的話，<tt class="DEVICENAME">/dev/console</tt> 的權限並 <span
class="emphasis"><i class="EMPHASIS">不會</i></span> 改變，結果就是 <tt
class="COMMAND">xterm -C</tt> 和 <tt class="COMMAND">xconsole</tt> 這類的程式無法
正常執行。</p>

<p>這一切的問題，都是因為 console 的權限是採用系統預設值。
在一個多使用者的系統裡，我們不希望每個使用者都可以直接寫入系統 console
。如果使用者是從機器的 VTY 直接 login 的話，那麼 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fbtab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fbtab</span>(5)</span></a>
可以解決這類的問題。</p>

<p>簡單地說，請確保 <tt class="FILENAME">/etc/fbtab</tt> (請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fbtab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">fbtab</span>(5)</span></a>)
這個檔案中的這一行沒有被註解掉：</p>

<pre class="PROGRAMLISTING">
/dev/ttyv0 0600 /dev/console
</pre>

<p>這一行設定的存在可以確保從 <tt class="DEVICENAME">/dev/ttyv0</tt> 登入的使用者可以控制
console。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="XFREE86-ROOT" name="XFREE86-ROOT"></a><b>11.10.</b> 以前我可以以一般使用者執行
XFree86，為什麼現在它說我一定要 以 <tt class="USERNAME">root</tt> 才能執行？</p>
</div>

<div class="ANSWER">
<p><b></b>所有的 X server 都需要以 <tt class="USERNAME">root</tt> 來執行，
才能直接存取你的視訊硬體。舊版本的 XFree86 (&lt;= 3.3.6) 會自動 將所附的 server 以利用
<tt class="USERNAME">root</tt> 身份執行的方式 安裝起來 (setuid 為 <tt
class="USERNAME">root</tt>)。由於 X server
都是體積龐大又複雜的程式，顯而易見地，這是一個安全上的災難。 因為這個原因，新版的 XFree86
就不將這些 server 以 setuid 為 <tt class="USERNAME">root</tt> 的方式安裝。</p>

<p>很明顯地，我們完全無法接受將 X server 以 <tt class="USERNAME">root</tt>
的身份執行。起碼就安全上不是個好主意。 有兩種方法可以以一般使用者的身份使用 X。第一是利用
<tt class="COMMAND">xdm</tt> 或是其它的 display manager (例如 <tt
class="COMMAND">kdm</tt>)；第二是利用 <tt class="COMMAND">Xwrapper</tt>。</p>

<p><tt class="COMMAND">xdm</tt> 是一個處理圖形界面登入的 daemon。
它通常在開機時執行起來，而且負責對使用者作身份認證，以及起動
使用者的工作環境；它可說是圖形環境下的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">getty</span>(8)</span></a> 與 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=login&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">login</span>(1)</span></a>
的對應程式。想得知更多有關 <tt class="COMMAND">xdm</tt> 的資訊，請參考 <a
href="http://www.xfree86.org/support.html" target="_top">XFree86 文件</a>，以及其 <a
href="#XDM-BOOT">FAQ 項目</a>。</p>

<p><tt class="COMMAND">Xwrapper</tt> 是 X server 的包裝程式；它可以
讓一般使用者可以手動起動 X server 的小工具，而還能維持一定的安全
環境。它會檢查傳入的命令列參數，如果沒問題的話，就起動適當的 X
server。如果你因為某種理由而不想執行 display manager 的話，
它是為你而設定的。如果你安裝了完整的 ports，你可以在 <tt
class="FILENAME">/usr/ports/x11/wrapper</tt> 中找到它。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PS2-X" name="PS2-X"></a><b>11.11.</b> 我的 PS/2 滑鼠在 X 中有點不正常？</p>
</div>

<div class="ANSWER">
<p><b></b>您的滑鼠和您的滑鼠驅動程式可能存在有不同步的現象。</p>

<p>在 2.2.5 以及更早的系統裡，從 X 切到 virtual terminal 然後
再切回來就可以使它們重新做同步的動作。如果這個問題常常發生的話， 您可以在您的 kernel
設定檔中加入下面這個選項然後重新編譯：</p>

<pre class="PROGRAMLISTING">
options PSM_CHECKSYNC
</pre>

<p>如果您沒有建立 kernel 的經驗，請看 <a href="#MAKE-KERNEL">自訂核心</a> 這一節。</p>

<p>加上這個選項以後，滑鼠和滑鼠驅動程式間的同步問題應該就比較
不會出現了。如果這個問題仍然存在的話，在移動滑鼠時按按滑鼠按鍵
可以使滑鼠和滑鼠驅動程式重新做同步的動作。</p>

<p>該注意的是這個選項並不是對每一個系統都有效，它可能會讓接在 PS/2 滑鼠位置的 ALPS
GlidePoint 裝置失去 “tap” 這項功能。</p>

<p>在 2.2.6 及其後的版本，同步的確認已經有了較好的解決辦法， 而且這些都已經是 PS/2
滑鼠驅動程式的標準了。這個方法也可以在 GlidePoint 上正常工作。
(因為確認的程式碼已經成為一個標準功能， 所以在這些版本中我們不在提供 PSM_CHECKSYNC
的選項了。) 不過在 極少數的案例中，這些驅動程式會誤報同步性錯誤，然後您就會看到
這樣的核心訊息：</p>

<pre class="PROGRAMLISTING">
psmintr: out of sync (xxxx != yyyy)
</pre>

<p>然後您就會發現您的滑鼠不能正常運作了。</p>

<p>如果您發生了這樣的狀況，您必須藉由把 PS/2 滑鼠驅動程式的 flag 設成 0x100
來把同步確認的程式碼給取消掉。然後在開機提示符號時用 <code class="OPTION">-c</code>
選項來進入 <span class="emphasis"><i class="EMPHASIS">UserConfig</i></span>：</p>

<pre class="SCREEN">
boot: <kbd class="USERINPUT">-c</kbd>
</pre>

<p>然後，在 <span class="emphasis"><i class="EMPHASIS">UserConfig</i></span>
命令列中鍵入：</p>

<pre class="SCREEN">
UserConfig&gt; <kbd class="USERINPUT">flags psm0 0x100</kbd>
UserConfig&gt; <kbd class="USERINPUT">quit</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PS2-MOUSESYSTEMS" name="PS2-MOUSESYSTEMS"></a><b>11.12.</b> 我的 PS/2
滑鼠不能透過 MouseSystem 來運作？</p>
</div>

<div class="ANSWER">
<p><b></b>有一些報告指出某些廠牌的 PS/2 滑鼠只能在 “高解析度”
狀態下才能運作。如果不是的話，滑鼠游標 會常常跑到螢幕的左上角去。</p>

<p>非常不幸的，這個問題在 2.0.X 和 2.1.X 下是無解的。在 2.2 到 2.2.5 版，您可以對 <tt
class="FILENAME">/sys/i386/isa/psm.c</tt> 使用下列 patch 然後重建您的核心。如果您沒有建立
kernel 的經驗， 請看 <a href="#MAKE-KERNEL">自訂核心</a> 這節。</p>

<pre class="PROGRAMLISTING">
@@ -766,6 +766,8 @@
     if (verbose &gt;= 2)
         log(LOG_DEBUG, "psm%d: SET_DEFAULTS return code:%04x\n",
             unit, i);
+    set_mouse_resolution(sc-&gt;kbdc, PSMD_RES_HIGH);
+
 #if 0
     set_mouse_scaling(sc-&gt;kbdc);        /* 1:1 scaling */
     set_mouse_mode(sc-&gt;kbdc);                /* stream mode */
</pre>

<p>在 2.2.6 及以後的版本，在 PS/2 滑鼠驅動程式中設定 0x04 的 flag
會把滑鼠設成高解析度模式。在開機提示符號時用 <code class="OPTION">-c</code> 選項來進入
<span class="emphasis"><i class="EMPHASIS">UserConfig</i></span>：</p>

<pre class="SCREEN">
boot: <kbd class="USERINPUT">-c</kbd>
</pre>

<p>然後，在 <span class="emphasis"><i class="EMPHASIS">UserConfig</i></span>
的命令列中鍵入：</p>

<pre class="SCREEN">
UserConfig&gt; <kbd class="USERINPUT">flags psm0 0x04</kbd>
UserConfig&gt; <kbd class="USERINPUT">quit</kbd>
</pre>

<p>前一節有提到另一個可能導致滑鼠問題的原因。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IMAKE-TMPL" name="IMAKE-TMPL"></a><b>11.13.</b> 當我建立 X 程式時，<tt
class="COMMAND">imake</tt> 說它找不到 <tt
class="FILENAME">Imake.tmpl</tt>。它在哪兒？</p>
</div>

<div class="ANSWER">
<p><b></b><tt class="FILENAME">Imake.tmpl</tt> 是 Imake 套件的一部份，Imake 是標準的建立
X 程式的工具。 <tt class="FILENAME">Imake.tmpl</tt> 和其他數個 header file 一樣是建立 X
程式的必要檔案，您可以在 X prog distribution 中找到它們。您可以用 sysinstall 來安裝或是
直接從 X distribution 中手動安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="XFREE86-VERSION" name="XFREE86-VERSION"></a><b>11.14.</b> 我在 build 一個 X
應用程式，它需要 XFree86 3.3.x，但是 我已經安裝 XFree86 4.x 了。我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>要告訴 port 在編譯程式時，使用 XFree86 4.x 函式庫，你可以 在 <tt
class="FILENAME">/etc/make.conf</tt> 裡 (如果你沒有這個檔， 請建立它)
加上下面這一行：</p>

<pre class="PROGRAMLISTING">
XFREE86_VERSION=        4
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUSE-BUTTON-REVERSE" name="MOUSE-BUTTON-REVERSE"></a><b>11.15.</b>
我要怎麼做才能設定左撇子用的滑鼠？</p>
</div>

<div class="ANSWER">
<p><b></b>在您的 <tt class="FILENAME">.xinitrc</tt> 或是 <tt
class="FILENAME">.xsession</tt> 中執行 <tt class="LITERAL">xmodmap -e "pointer = 3 2
1"</tt> 的指令。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="INSTALL-SPLASH" name="INSTALL-SPLASH"></a><b>11.16.</b> 要如何安裝 splash
圖形顯示程式？那裡可以找得到呢？</p>
</div>

<div class="ANSWER">
<p><b></b>就在發行 FreeBSD 3.1 之前，我們加進了在開機時顯示 “splash”
圖形的新功能。目前用來顯示在螢幕上的檔案 必須是 256 色的點矩陣圖形 (<tt
class="FILENAME">*.BMP</tt>) 或 ZSoft PCX(<tt class="FILENAME">*.PCX</tt>)
的格式。除此之外，解析度也必須在 320x200 以下，才能和標準 VGA 顯示卡搭配使用。如果您編譯
kernel 時有加入 VESA 支援，那麼最大解析度可以到 1024x768。注意 VESA 的 支援需要加入 <tt
class="LITERAL">VM86</tt> 這個 kernel 選項。VESA 支援實際上可以在編譯 kernel 時加入 <tt
class="LITERAL">VESA</tt> 選項、 或載入 VESA 的 kld module 來達成。</p>

<p>您要修改控制 FreeBSD 開機步驟的設定檔，才能使用 splash 顯示圖形的功能。設定檔在發行
FreeBSD 3.2 前有些更動，所以現在 有兩個方法可以載入 splash 的功能：</p>

<ul>
<li>
<p>FreeBSD 3.1</p>

<p>先選出用來顯示在螢幕上的圖形，3.1 版只支援 Windows
的點矩陣格式。選好了您要的圖檔後，將它拷到 <tt
class="FILENAME">/boot/splash.bmp</tt>。接著把下面幾行加入 <tt
class="FILENAME">/boot/loader.rc</tt> 中：</p>

<pre class="PROGRAMLISTING">
load kernel
load -t splash_image_data /boot/splash.bmp
load splash_bmp
autoboot
</pre>
</li>

<li>
<p>FreeBSD 3.2+</p>

<p>除了加入對 PCX 檔案的支援外，FreeBSD 3.2 也改進了
開機程序的設定方式。如果您願意的話，可以用上述 FreeBSD 3.1 的方法，將 <tt
class="LITERAL">splash_bmp</tt> 換成 <tt class="LITERAL">splash_pcx</tt> 來載入 PCX
檔案即可。 如果想用新的設定方式，您的 <tt class="FILENAME">/boot/loader.rc</tt>
必須包括這幾行：</p>

<pre class="PROGRAMLISTING">
include /boot/loader.4th
start
</pre>

<p>還需要一個包含以下幾行的 <tt class="FILENAME">/boot/loader.conf</tt> ：</p>

<pre class="PROGRAMLISTING">
splash_bmp_load="YES"
bitmap_load="YES"
</pre>

<p>這是假設您用 <tt class="FILENAME">/boot/splash.bmp</tt> 來當作 splash
的螢幕顯示。如果想用 PCX 的檔案，把它拷成 <tt
class="FILENAME">/boot/splash.pcx</tt>，如上述做出 <tt
class="FILENAME">/boot/loader.rc</tt>，再將這幾行加到 <tt
class="FILENAME">/boot/loader.conf</tt> 中：</p>

<pre class="PROGRAMLISTING">
splash_pcx_load="YES"
bitmap_load="YES"
bitmap_name="/boot/splash.pcx"
</pre>
</li>
</ul>

<p>現在就只剩下 splash 用來顯示的圖檔，您可以在 <a href="http://www.baldwin.cx/splash/"
target="_top">http://www.baldwin.cx/splash/</a> 找到各種樣品。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WINDOWS-KEYS" name="WINDOWS-KEYS"></a><b>11.17.</b> 我能在 X 裡使用鍵盤上的
<span class="TRADEMARK">Windows</span> &reg; 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>可以。你所要作的，就是利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xmodmap&amp;sektion=1&amp;manpath=XFree86+4.4.0">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xmodmap</span>(1)</span></a>
去定義你想使用 的功能。</p>

<p>假設所有的 “<span class="TRADEMARK">Windows</span>” 都是標準的， 那它們的 keycode
分別為：</p>

<ul>
<li>
<p>115 - <span class="TRADEMARK">Windows</span> 鍵， 在左手的 Ctrl 與 Alt 鍵之間</p>
</li>

<li>
<p>116 - <span class="TRADEMARK">Windows</span> 鍵， 在 Alt-Gr 鍵右邊</p>
</li>

<li>
<p>117 - 選單鍵，右手的 Ctrl 鍵左邊</p>
</li>
</ul>

<p>要讓左邊的 <span class="TRADEMARK">Windows</span> 鍵印出一個逗點，試試這個：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">xmodmap -e "keycode 115 = comma"</kbd>
</pre>

<p>你可能要重跑你的 windows manager，才會有動作。</p>

<p>要讓 <span class="TRADEMARK">Windows</span> 鍵 的對映在每次 X
起動時自動設定好，你可以在你的 <tt class="FILENAME">~/.xinitrc</tt> 裡加上 <tt
class="COMMAND">xmodmap</tt>， 或是最好建立一個 <tt class="FILENAME">~/.xmodmaprc</tt>
檔案，裡面 每一行就是一個 <tt class="COMMAND">xmodmap</tt> 的選項，然後在你的 <tt
class="FILENAME">~/.xinitrc</tt> 裡加上：</p>

<pre class="PROGRAMLISTING">
xmodmap $HOME/.xmodmaprc
</pre>

<p>這一行。</p>

<p>例如，你想要將這三個鍵各對映到 F13、F14 和 F15。這讓你能 在你的程式或是 window manager
內將其對應到便利的功能上，等一下 我們會示範。</p>

<p>把這些放進 <tt class="FILENAME">~/.xmodmaprc</tt> 裡：</p>

<pre class="PROGRAMLISTING">
keycode 115 = F13
keycode 116 = F14
keycode 117 = F15
</pre>

<p>假如你用 <tt class="COMMAND">fvwm2</tt> 的話，你可以作這樣的對映， 讓 F13
能夠讓游標所在的視窗縮成小圖示 (或是反過來)。F14 讓游標
所在的視窗變成最上層的視窗，或是退到下層去 (如果它已經是最上層 了的話)。F15 則將
Workplace (application) 選單叫出來，即使游標
不在桌面上。當你沒有可見的桌面區域時，這個功能就相當地方便 (而且
按鍵上的圖案和這個功能相吻合)。</p>

<p>以下的 <tt class="FILENAME">~/.fvwmrc</tt> 設定可作出前述的功能。</p>

<pre class="PROGRAMLISTING">
Key F13        FTIWS    A        Iconify
Key F14        FTIWS    A        RaiseLower
Key F15        A        A        Menu Workplace Nop
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="X-3D-ACCELERATION" name="X-3D-ACCELERATION"></a><b>11.18.</b>
我要怎麼樣才能得到 OpenGL 的 3D 硬體加速功能？</p>
</div>

<div class="ANSWER">
<p><b></b>3D 加速功能的有無，視你所使用的 XFree86 版本與顯示晶片 的型號而定。如果你的是
NVIDIA 晶片的話，請去 <a href="http://nvidia.netexplorer.org/" target="_top">FreeBSD
NVIDIA Driver Initiative</a> 網頁看看，那裡有在 XFree86-4 上使用 NVIDIA 晶片的 3D
加速功能的討論。XFree86-4 上的其它顯示卡廠牌 硬體加速功能的資訊， 包括 Matrox G200/G400,
ATI Rage 128/Radeon, 3dfx Voodoo 3, 4, 5, 以及 Banshee，可在 <a
href="http://gladstone.uoregon.edu/~eanholt/dri/" target="_top">XFree86-4 Direct
Rendering on FreeBSD</a> 網頁上找到。XFree 3.3 的 使用者可以使用 Utah-GLX port，它可以在
<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/graphics/utah-glx/pkg-descr"><tt
class="FILENAME">graphics/utah-glx</tt></a> 找到。 使用它可以在 Matrox Gx00, ATI Rage
Pro, SiS 6326, i810, Savage, 以及舊的 NVIDIA 上得到有限的 OpenGL 加速。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="NETWORKING" name="NETWORKING"></a>Chapter 12 Networking</h1>

Biing Jong Lin

<div class="QANDASET">
<dl>
<dt>12.1. <a href="#DISKLESS-BOOTING">我應該到哪邊找有關無磁碟開機 “diskless booting”
的資料？</a></dt>

<dt>12.2. <a href="#ROUTER">FreeBSD 的主機可以當作某個網路上的路由器(router)嗎？</a></dt>

<dt>12.3. <a href="#WIN95-CONNECTION">我可以透過 FreeBSD 將我的 Win95 機器連上 Internet
嗎？</a></dt>

<dt>12.4. <a href="#SLIP-PPP-SUPPORT">FreeBSD 支援 SLIP 和 PPP 嗎？</a></dt>

<dt>12.5. <a href="#NATD">FreeBSD 支援 NAT 或 Masquerading 嗎？</a></dt>

<dt>12.6. <a href="#PARALLEL-CONNECT">我如何將兩台 FreeBSD 主機用平行埠 (parallel line)
透過 PLIP 連線？</a></dt>

<dt>12.7. <a href="#CREATE-DEV-NET">我沒有辦法建立 <tt class="FILENAME">/dev/ed0</tt>
這個 device， 為什麼？</a></dt>

<dt>12.8. <a href="#ETHERNET-ALIASES">我如何建立 Ethernet aliases？</a></dt>

<dt>12.9. <a href="#PORT-3C503">我如何指定我的 3C503 使用其他不同的的 network
port？</a></dt>

<dt>12.10. <a href="#NFS">為什麼我在使用 FreeBSD 的 NFS 時出現問題？</a></dt>

<dt>12.11. <a href="#NFS-LINUX">為什麼我不能 NFS-mount Linux 的機器？</a></dt>

<dt>12.12. <a href="#NFS-SUN">為什麼我不能 NFS-mount Sun 的機器？</a></dt>

<dt>12.13. <a href="#EXPORTS-ERRORS">為什麼 <tt class="COMMAND">mountd</tt> 一直鬼叫說
“<tt class="ERRORNAME">can't change attributes</tt>” 而且我一直看到 “<tt
class="ERRORNAME">bad exports list</tt>” 這個訊息在我的 FreeBSD NFS 伺服器上？</a></dt>

<dt>12.14. <a href="#PPP-NEXTSTEP">為什麼我在使用 PPP 連線到 NeXTStep
機器時有問題？</a></dt>

<dt>12.15. <a href="#IP-MULTICAST">我要怎樣才能把 IP multicast support 打開？</a></dt>

<dt>12.16. <a href="#DEC-PCI-CHIPSET">哪些網路卡是使用 DEC PCI chipset？</a></dt>

<dt>12.17. <a href="#FQDN-HOSTS">為什麼要用 FQDN 才能連到其他機器？</a></dt>

<dt>12.18. <a href="#NETWORK-PERMISSION-DENIED">為什麼我在連線時一直出現 “<tt
class="ERRORNAME">Permission denied</tt>” 的錯誤訊息？</a></dt>

<dt>12.19. <a href="#IPFW-OVERHEAD">IPFW 會造成多大的網路延遲？</a></dt>

<dt>12.20. <a href="#IPFW-FWD">為什麼我的 <tt class="COMMAND">ipfw</tt> “fwd” redirect
規則將服務轉向其他機器時無法正常運作？</a></dt>

<dt>12.21. <a href="#SERVICE-REDIRECT">要如何把對某台機器的網路服務要求(service
request)轉向到另一台？</a></dt>

<dt>12.22. <a href="#BANDWIDTH-MGR-TOOL">那裡可以找到管理頻寬的工具？</a></dt>

<dt>12.23. <a href="#BPF-NOT-CONFIGURED">怎麼會跑出 “<tt class="ERRORNAME">/dev/bpf0:
device not configured</tt>”這個訊息？</a></dt>

<dt>12.24. <a href="#MOUNT-SMB-SHARE">我要怎樣才能將 Windows 機器中的磁碟掛入系統, 就像
Linux 提供 的 smbmount 那樣？</a></dt>

<dt>12.25. <a href="#ICMP-RESPONSE-BW-LIMIT">我在系統日誌中發現以下訊息： “icmp-response
bandwidth limit 300/200 pps”，這是 蝦米碗糕？</a></dt>

<dt>12.26. <a href="#UNKNOWN-HW-ADDR-FORMAT">這個錯誤訊息 “<tt class="ERRORNAME">arp:
unknown hardware address format</tt>” 是什麼意思？</a></dt>

<dt>12.27. <a href="#CVSUP-MISSING-LIBS">我剛剛裝好 CVSup
套件，但是在嘗試執行時發生了錯誤，要怎麼辦？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISKLESS-BOOTING" name="DISKLESS-BOOTING"></a><b>12.1.</b>
我應該到哪邊找有關無磁碟開機 “diskless booting” 的資料？</p>
</div>

<div class="ANSWER">
<p><b></b>“Diskless booting” 就是讓 FreeBSD 主機從網路 上開機，並且從網路上的 server
上讀取其他必要的檔案，而非由主機 的硬碟上取得這些檔案。詳細的資料可以參考 <a
href="../handbook/diskless.html" target="_top">FreeBSD 手冊的無磁碟開機篇</a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROUTER" name="ROUTER"></a><b>12.2.</b> FreeBSD
的主機可以當作某個網路上的路由器(router)嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的。請參考 FreeBSD 手冊的網路進階篇 <a href="../handbook/routing.html"
target="_top">advanced networking</a>，尤其是路由與閘道器 <a
href="../handbook/routing.html#DEDICATED-ROUTER" target="_top">routing and
gateways</a>的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WIN95-CONNECTION" name="WIN95-CONNECTION"></a><b>12.3.</b> 我可以透過 FreeBSD
將我的 Win95 機器連上 Internet 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>基本上，會問這種問題的人在家裡至少有兩台電腦，一台跑 FreeBSD 另外一台跑
Win95；這個想法是將 FreeBSD 主機連上 Internet，然後透 過這台 FreeBSD 主機，讓跑 Win95
的電腦能夠上網。這個問題算是前一 個問題的一個特例</p>

<p>... 答案是：可以的！在 FreeBSD 3.x 版中，使用者模式(user-mode)的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> 包含了 <code
class="OPTION">-nat</code> 選項。如果你在 <tt class="FILENAME">/etc/rc.conf</tt>
使用<code class="OPTION">-nat</code>選項並 設定 <tt class="LITERAL">gateway_enable</tt>
為 <span class="emphasis"><i class="EMPHASIS">YES</i></span> ，以這種設定啟動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
，並且正確的設定你的 Windows 主機的 話，這個做法應該是可以正常使用的。</p>

<p>關於本主題更詳細的資料可以參考 Steve Sims 所撰寫的 <a href="../ppp-primer/index.html"
target="_top">Pedantic PPP Primer</a> 一文。</p>

<p>如果你使用的是核心模式 (kernel-mode) PPP，或者你有區域連線 (Ethernet connection)
可通達 Internet 的話，你將需要使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>。請查閱 FAQ
中關於 <a href="#NATD">natd</a> 的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SLIP-PPP-SUPPORT" name="SLIP-PPP-SUPPORT"></a><b>12.4.</b> FreeBSD 支援 SLIP 和
PPP 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的。你可以查查 man pages 中關於 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">slattach</span>(8)</span></a>， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sliplogin</span>(8)</span></a>，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>，以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppd</span>(8)</span></a> 的部分。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> 及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppd</span>(8)</span></a>
提供進出雙向連線的支援，另外 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sliplogin</span>(8)</span></a>
專門提供進入連線的支援，而 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">slattach</span>(8)</span></a>
專門提供向外連線的支援。</p>

<p>如果你需要更進一步的資料的話,請查閱 <a href="../handbook/ppp-and-slip.html"
target="_top">FreeBSD 手冊中關於 PPP 與 SLIP 的說明</a>。</p>

<p>如果你只能夠過 “shell account” 連線到 Internet 的話，你也許可以試試 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/slirp/pkg-descr"><tt
class="FILENAME">net/slirp</tt></a>
這個套件程式。這個套件程式可以提供你的電腦直接連上某些(限定的)服務 連線，如 ftp 及 http
等等。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NATD" name="NATD"></a><b>12.5.</b> FreeBSD 支援 NAT 或 Masquerading 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你有一個近端的子網路(有一台以上的機器)，但是你的 Internet provider
卻只分配一個 IP number 給你(或者你只分配到一個 動態的 IP number)，你可以參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a> 這個程式。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>
讓你可以透過這一個 IP number 讓整個子網路的電腦都能連上 internet。</p>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
這個程式也提供類似的功能，如果你指定 <code class="OPTION">-nat</code> 選項。alias library
(<a href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">libalias</span>(3)</span></a>)
在這兩個處理方式中都會被使用到。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PARALLEL-CONNECT" name="PARALLEL-CONNECT"></a><b>12.6.</b> 我如何將兩台 FreeBSD
主機用平行埠 (parallel line) 透過 PLIP 連線？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考手冊中關於 <a href="../handbook/plip.html" target="_top">PLIP section</a>
的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CREATE-DEV-NET" name="CREATE-DEV-NET"></a><b>12.7.</b> 我沒有辦法建立 <tt
class="FILENAME">/dev/ed0</tt> 這個 device， 為什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>因為不需要！在 Berkeley 網路架構中，只有 kernel 程式碼可以直
接存取網路界面卡。請參考 <tt class="FILENAME">/etc/rc.network</tt> 這 個檔案和 manual
pages 取得與其他不同網路程式。更進一步的資訊：如
果你覺得你完全搞混了的話，您應該找一本與其他 BSD 相關作業系統網路
管理有關書來參考；除了少數顯著的不同外，FreeBSD 的網路管理基本上和 SunOS 4.0 和 Ultrix
是一樣的。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ETHERNET-ALIASES" name="ETHERNET-ALIASES"></a><b>12.8.</b> 我如何建立 Ethernet
aliases？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你的 alias 位址跟你目前網路介面的位址在同一個子網路下的 話，加入一個 <tt
class="LITERAL">netmask 0xffffffff</tt> 在你的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
command-line，範例如下：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ifconfig ed0 alias 192.0.2.2 netmask 0xffffffff</kbd>
</pre>

<p>不然的話，就如同加入一個新的網路位址一樣輸入你的網路位址與子 網路遮罩：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ifconfig ed0 alias 172.16.141.5 netmask 0xffffff00</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PORT-3C503" name="PORT-3C503"></a><b>12.9.</b> 我如何指定我的 3C503
使用其他不同的的 network port？</p>
</div>

<div class="ANSWER">
<p><b></b>如果您想使用其他的 port，你必須在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> 的命令中
指定額外的參數。內定的 port 是 <tt class="LITERAL">link0</tt>。要使用 AUI port 代替 BNC
port 的話，改用 <tt class="LITERAL">link2</tt>。這些 flags 應該改變ifconfig_*
的變數來指定， 你可以在 <tt class="FILENAME">/etc/rc.conf</tt> 這個檔案裡面找到 (請參考
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>)。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS" name="NFS"></a><b>12.10.</b> 為什麼我在使用 FreeBSD 的 NFS
時出現問題？</p>
</div>

<div class="ANSWER">
<p><b></b>我們用含蓄一點的說法，某些 PC 的網路卡比其他的好，這種狀況在 造成 NFS
這種對網路敏感的程式有時會出現問題。</p>

<p>參考 <a href="../handbook/nfs.html" target="_top">the Handbook entry on NFS</a>
以獲得這個主題的更多資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS-LINUX" name="NFS-LINUX"></a><b>12.11.</b> 為什麼我不能 NFS-mount Linux
的機器？</p>
</div>

<div class="ANSWER">
<p><b></b>某些版本的 Linux NFS 程式碼只接受 privileged port 的 mount
request；試用這行指令看看</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -o -P linuxbox:/blah /mnt</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS-SUN" name="NFS-SUN"></a><b>12.12.</b> 為什麼我不能 NFS-mount Sun
的機器？</p>
</div>

<div class="ANSWER">
<p><b></b>跑 SunOS 4.X 的 Sun 工作站只接受來自 privileged port 的 mount
request；試用這行指令看看</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -o -P sunbox:/blah /mnt</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="EXPORTS-ERRORS" name="EXPORTS-ERRORS"></a><b>12.13.</b> 為什麼 <tt
class="COMMAND">mountd</tt> 一直鬼叫說 “<tt class="ERRORNAME">can't change
attributes</tt>” 而且我一直看到 “<tt class="ERRORNAME">bad exports list</tt>”
這個訊息在我的 FreeBSD NFS 伺服器上？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題最常發生的原因是在於不了解 <tt class="FILENAME">/etc/exports</tt>
的正確格式。請詳讀 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">exports</span>(5)</span></a>
以及手冊中關於 <a href="../handbook/nfs.html" target="_top">NFS</a> 的部分，特別是<a
href="../handbook/nfs.html#CONFIGURING-NFS" target="_top">configuring NFS</a>這一段。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-NEXTSTEP" name="PPP-NEXTSTEP"></a><b>12.14.</b> 為什麼我在使用 PPP 連線到
NeXTStep 機器時有問題？</p>
</div>

<div class="ANSWER">
<p><b></b>把 TCP extensions 取消，這個設定在 <tt class="FILENAME">/etc/rc.conf</tt>
裡面(參考 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>) 把
以下這個值設成 NO：</p>

<pre class="PROGRAMLISTING">
tcp_extensions=NO
</pre>

<p>Xylogic 的 Annex 主機也有相同的問題，您要做相同的修改才能連 上這些主機。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IP-MULTICAST" name="IP-MULTICAST"></a><b>12.15.</b> 我要怎樣才能把 IP multicast
support 打開？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 2.0 以後的版本內定都有 支援 Multicast host 操作。如果
您想將您的主機設定成 multicast router 的話，您必須重新 compile 您 的 kernel，加入 <tt
class="LITERAL">MROUTING</tt> 的選項，並且執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mrouted</span>(8)</span></a> FreeBSD 2.2
及之後的版本會在開機時執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mrouted</span>(8)</span></a> 如果在 <tt
class="FILENAME">/etc/rc.conf</tt> 中 <tt class="LITERAL">mrouted_enable</tt> 設定為 <tt
class="LITERAL">"YES"</tt></p>

<p>MBONE 的各種工具可以在他們 ports 下所屬叫做 <a
href="http://www.FreeBSD.org/ports/mbone.html" target="_top">mbone</a> 目錄
中找到。如果您在找視訊會議的工具如 <tt class="COMMAND">vic</tt> 以及 <tt
class="COMMAND">vat</tt>的話，到那邊找找吧！</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEC-PCI-CHIPSET" name="DEC-PCI-CHIPSET"></a><b>12.16.</b> 哪些網路卡是使用 DEC
PCI chipset？</p>
</div>

<div class="ANSWER">
<p><b></b>以下是 Glen Foster <code class="EMAIL">&#60;<a
href="mailto:gfoster@driver.nsta.org">gfoster@driver.nsta.org</a>&#62;</code>
提供的清單：</p>

<div class="TABLE"><a id="AEN4418" name="AEN4418"></a>
<p><b>Table 12-1. Network cards based on the DEC PCI chipset</b></p>

<table border="1" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>Vendor</th>
<th>Model</th>
</tr>
</thead>

<tbody>
<tr>
<td>ASUS</td>
<td>PCI-L101-TB</td>
</tr>

<tr>
<td>Accton</td>
<td>ENI1203</td>
</tr>

<tr>
<td>Cogent</td>
<td>EM960PCI</td>
</tr>

<tr>
<td>Compex</td>
<td>ENET32-PCI</td>
</tr>

<tr>
<td>D-Link</td>
<td>DE-530</td>
</tr>

<tr>
<td>Dayna</td>
<td>DP1203, DP2100</td>
</tr>

<tr>
<td>DEC</td>
<td>DE435, DE450</td>
</tr>

<tr>
<td>Danpex</td>
<td>EN-9400P3</td>
</tr>

<tr>
<td>JCIS</td>
<td>Condor JC1260</td>
</tr>

<tr>
<td>Linksys</td>
<td>EtherPCI</td>
</tr>

<tr>
<td>Mylex</td>
<td>LNP101</td>
</tr>

<tr>
<td>SMC</td>
<td>EtherPower 10/100 (Model 9332)</td>
</tr>

<tr>
<td>SMC</td>
<td>EtherPower (Model 8432)</td>
</tr>

<tr>
<td>TopWare</td>
<td>TE-3500P</td>
</tr>

<tr>
<td>Znyx (2.2.x)</td>
<td>ZX312, ZX314, ZX342, ZX345, ZX346, ZX348</td>
</tr>

<tr>
<td>Znyx (3.x)</td>
<td>ZX345Q, ZX346Q, ZX348Q, ZX412Q, ZX414, ZX442, ZX444, ZX474, ZX478, ZX212, ZX214
(10mbps/hd)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FQDN-HOSTS" name="FQDN-HOSTS"></a><b>12.17.</b> 為什麼要用 FQDN
才能連到其他機器？</p>
</div>

<div class="ANSWER">
<p><b></b>你也許會發現要連的機器其實是在另一個網域。舉個例子，假設你是在 foo.bar.edu
這個網域中，想要連到在一台叫 <tt class="HOSTID">mumble</tt> 的主機，他在 <tt
class="HOSTID">example.org</tt> 網域下， 你必須用 Fully-Qualified Domain Name <tt
class="HOSTID">mumble.example.org</tt>，而不是只用 <tt class="HOSTID">mumble</tt>。</p>

<p>傳統的 BSD BIND resolver 允許用這種方式解出機器的位址，但是 FreeBSD 內附 <b
class="APPLICATION">bind</b> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>)
版本內定方式，則是除了你所在的網域以外，不支援其他非 FQDN 的縮寫。 所以如 <tt
class="HOSTID">mumble</tt> 必須在 <tt
class="HOSTID">mumble.foo.example.org</tt>，否則就會從網域的最底 層開始找。</p>

<p>這和先前的做法不同，也就是不用 <tt class="HOSTID">mumble.example.org</tt>，和 <tt
class="HOSTID">mumble.edu</tt> 繼續搜尋。 看一下 RFC
1535，裡面有提到為什麼之前的做法不好，甚至算是個安全 漏洞。</p>

<p>這裡有個不錯的解法, 你可以加入一行</p>

<pre class="PROGRAMLISTING">
search foo.example.org example.org
</pre>

<p>instead of the previous</p>

<pre class="PROGRAMLISTING">
domain foo.example.org
</pre>

<p>在你的 <tt class="FILENAME">/etc/resolv.conf</tt> 檔案中 (請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span
class="REFENTRYTITLE">resolv.conf</span>(5)</span></a>)。但是要確定搜尋順序不會違反 RFC
1535 所謂的 “boundary between local and public administration”。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NETWORK-PERMISSION-DENIED" name="NETWORK-PERMISSION-DENIED"></a><b>12.18.</b>
為什麼我在連線時一直出現 “<tt class="ERRORNAME">Permission denied</tt>”
的錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b> 如果在編譯 kernel 時加入 <tt class="LITERAL">IPFIREWALL</tt> 選項， 請注意
2.1.7R 內定是拒絕所有未經核准的網路封包(但在開發 2.1-STABLE 時改掉了)。</p>

<p>I如果不小心弄錯了 firewall 的設定，你可以以 <tt class="USERNAME">root</tt>
執行以下命令網路功能就會恢復正常：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ipfw add 65534 allow all from any to any</kbd>
</pre>

<p>也可以在 <tt class="FILENAME">/etc/rc.conf</tt> 加入 <tt
class="LITERAL">firewall_type="open"</tt> 的選項。</p>

<p>如果想知道如何設定 FreeBSD firewall，請參考 <a href="../handbook/firewalls.html"
target="_top">手冊中相關章節</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IPFW-OVERHEAD" name="IPFW-OVERHEAD"></a><b>12.19.</b> IPFW
會造成多大的網路延遲？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考手冊中 <a href="../handbook/firewalls.html" target="_top">Firewalls</a>
章節，特別是 <a href="../handbook/firewalls.html#IPFW-OVERHEAD" target="_top">IPFW
Overhead &#38; Optimization</a> 這一段。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IPFW-FWD" name="IPFW-FWD"></a><b>12.20.</b> 為什麼我的 <tt
class="COMMAND">ipfw</tt> “fwd” redirect 規則將服務轉向其他機器時無法正常運作？</p>
</div>

<div class="ANSWER">
<p><b></b>可能是你除了轉送封包以外還額外想進行位址轉譯 (network address translation,
NAT)，“fwd” 規則所進 行的動作就如同字面所示；僅轉送封包，它並不會去修改封包中的資料。
假設我們有如下的規則：</p>

<pre class="SCREEN">
01000 fwd <tt class="REPLACEABLE"><i>10.0.0.1</i></tt> from any to <tt
class="REPLACEABLE"><i>foo 21</i></tt>
</pre>

<p>當一個通往特定目標位址 <tt class="REPLACEABLE"><i>foo</i></tt> 的封包
送達主機時，根據這條規則，封包將被轉送至 <tt
class="REPLACEABLE"><i>10.0.0.1</i></tt>，但是它的目標位址卻仍然是 <tt
class="REPLACEABLE"><i>foo</i></tt>！封包的目標位址並 <span class="emphasis"><i
class="EMPHASIS">沒有</i></span> 更改為 <tt
class="REPLACEABLE"><i>10.0.0.1</i></tt>。大部分的主機會將封包丟棄，
因為他們並不是這個目標位址。因此，使用 “fwd” 規則
時往往不如使用者所預期的那般順利。這種行為是系統特性，而非錯誤。</p>

<p>參考 <a href="#SERVICE-REDIRECT">關於服務轉向的常見問 答集</a>， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>
手冊，或者是使用 <a href="../../../../ports/index.html" target="_top">ports
collection</a> 中許 多服務轉向的工具來正確的完成你想進行的工作。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SERVICE-REDIRECT" name="SERVICE-REDIRECT"></a><b>12.21.</b>
要如何把對某台機器的網路服務要求(service request)轉向到另一台？</p>
</div>

<div class="ANSWER">
<p><b></b>在 ports 目錄的“sysutils”分類中有個叫 <tt class="LITERAL">socket</tt>
的套件，可以幫你轉向 FTP 或其他類似的 網路服務。只要把該網路服務的命令改成呼叫 socket
即可，如下所示：</p>

<pre class="PROGRAMLISTING">
ftp stream tcp nowait nobody /usr/local/bin/socket socket <tt
class="REPLACEABLE"><i>ftp.example.com</i></tt> <tt class="REPLACEABLE"><i>ftp</i></tt>
</pre>

<p>其中 <tt class="REPLACEABLE"><i>ftp.example.com</i></tt> 與 <tt
class="REPLACEABLE"><i>ftp</i></tt> 分別是被轉到的機器和 port 名稱。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BANDWIDTH-MGR-TOOL" name="BANDWIDTH-MGR-TOOL"></a><b>12.22.</b>
那裡可以找到管理頻寬的工具？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 上有三套頻寬管理工具： <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dummynet</span>(4)</span></a>
已經整合進入 FreeBSD 系統(更詳細的用途, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>); <a
href="http://www.csl.sony.co.jp/person/kjc/programs.html" target="_top">ALTQ</a>
可以免費使用，<a href="http://www.etinc.com/" target="_top">Emerging Technologies</a>
推出的 Bandwidth Manager 則是商用軟體。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BPF-NOT-CONFIGURED" name="BPF-NOT-CONFIGURED"></a><b>12.23.</b> 怎麼會跑出
“<tt class="ERRORNAME">/dev/bpf0: device not configured</tt>”這個訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>你執行了一個需要柏克萊封包過濾器 (Berkeley Packet Filter) 的 程式 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">bpf</span>(4)</span></a>)，但是你在
kernel 中沒有啟動它。把下面這一行加 入 kernel 設定檔中，編譯一個新的 kernel：</p>

<pre class="PROGRAMLISTING">
pseudo-device bpf        # Berkeley Packet Filter
</pre>

<p>在重新開機之後，還要做出 device node，在 <tt class="FILENAME">/dev</tt> 下執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV bpf0</kbd>
</pre>

<p>如果想要更進一步知道如何做出各種 device node，請參閱 <a
href="../handbook/kernelconfig-nodes.html" target="_top">Handbook 關於週邊節點的說明</a>
。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-SMB-SHARE" name="MOUNT-SMB-SHARE"></a><b>12.24.</b> 我要怎樣才能將
Windows 機器中的磁碟掛入系統, 就像 Linux 提供 的 smbmount 那樣？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <b class="APPLICATION">SMBFS</b> 工具組。這套工具組中 包含了一系列的
kernel 修改還有使用者的工具程式(userland programs)。 這些程式和資訊在 ports 收藏中 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/smbfs/pkg-descr"><tt
class="FILENAME">net/smbfs</tt></a> 下可以找到。在 4.5-RELEASE
之後的版本則是系統中內建。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ICMP-RESPONSE-BW-LIMIT" name="ICMP-RESPONSE-BW-LIMIT"></a><b>12.25.</b>
我在系統日誌中發現以下訊息： “icmp-response bandwidth limit 300/200 pps”，這是
蝦米碗糕？</p>
</div>

<div class="ANSWER">
<p><b></b>這是系統核心告訴你有某些活動引發它送出比它所認為應該送出更 多的 ICMP 或 TCP
重置訊息 (RST)。ICMP 回應訊息常常是因為有人嘗 試連接未被使用的 UDP 通訊埠。TCP
重置訊息則是有人嘗試連接未開 放 TCP
通訊埠造成的結果。以下這些活動可能就是造成這些訊息的原因：</p>

<ul>
<li>
<p>暴力法的服務組絕攻擊(DoS)方式 (相較於針對特殊弱點使用單一封包的攻擊方式)。</p>
</li>

<li>
<p>大量的通訊埠掃描(相較於僅嘗試少數的常見服務通訊埠)。</p>
</li>
</ul>

<p>出現的數字中第一個代表根據這些流量 kernel 應該送出的封包數， 第二個數字則是 kernel
目前限制最大發送數。你可以利用 sysctl 修改 <code
class="VARNAME">net.inet.icmp.icmplim</code> 變數值來更改最大值。舉
例來說,如果希望修改限制為 <tt class="LITERAL">300</tt> packets per second：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w net.inet.icmp.icmplim=300</kbd>
</pre>

<p>如果你不想在系統紀錄中看到這些訊息，但是仍然希望保持回應的限 制的話，你可以利用 sysctl
修改 <code class="VARNAME">net.inet.icmp.icmplim_output</code> 變數來取消這些訊 息：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w net.inet.icmp.icmplim_output=0</kbd>
</pre>

<p>最後，如果你想取消這些限制的話，你可以設定 <code
class="VARNAME">net.inet.icmp.icmplim</code> (如上例所示) 為 <tt
class="LITERAL">0</tt>。基於上述理由，我們不建議你取消這些限制。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNKNOWN-HW-ADDR-FORMAT" name="UNKNOWN-HW-ADDR-FORMAT"></a><b>12.26.</b>
這個錯誤訊息 “<tt class="ERRORNAME">arp: unknown hardware address format</tt>”
是什麼意思？</p>
</div>

<div class="ANSWER">
<p><b></b>這代表你的區域網路連線上有一些設備使用 FreeBSD 看不懂得 MAC
格式。這通常是代表有人在你的區域網路上進行實驗，最常見的就是 cable modem
的連線。這訊息無害，而且應該不至於影響到 FreeBSD 主 機的效能。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CVSUP-MISSING-LIBS" name="CVSUP-MISSING-LIBS"></a><b>12.27.</b> 我剛剛裝好
CVSup 套件，但是在嘗試執行時發生了錯誤，要怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>首先，看看錯誤的訊息是否如下：</p>

<pre class="PROGRAMLISTING">
/usr/libexec/ld-elf.so.1: Shared object "libXaw.so.6" not found
</pre>

<p>這種錯誤訊息代表你主機上安裝的 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/cvsup/pkg-descr"><tt
class="FILENAME">net/cvsup</tt></a> 沒有包含 <b class="APPLICATION">XFree86</b>
套件。如果你想要使用 <b class="APPLICATION">CVSup</b> 內建的圖形介面 <acronym
class="ACRONYM">GUI</acronym> 的話，你需要安裝 <b
class="APPLICATION">XFree86</b>。此外，如果你只想以命令列方 式使用 <b
class="APPLICATION">CVSup</b> 的話，你應該先移除之前 安裝的套件。並安裝 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr"><tt
class="FILENAME">net/cvsup-without-gui</tt></a> 這套 軟體。在 FreeBSD 手冊中 <a
href="http://www.freebsd.org/handbook/cvsup.html" target="_top">CVSup</a>
段落中有更詳細的說明。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="SECURITY" name="SECURITY"></a>Chapter 13 系統安全篇</h1>

Biing Jong Lin

<div class="QANDASET">
<dl>
<dt>13.1. <a href="#SANDBOX">什麼是 sandbox？</a></dt>

<dt>13.2. <a href="#SECURELEVEL">什麼是 securelevel?</a></dt>

<dt>13.3. <a href="#EXTRA-NAMED-PORT">BIND (<tt class="COMMAND">named</tt>) 除了在通訊埠
53 以外也在 其他高編號通訊埠 (high-numbered port) 聆聽 (Listen)。 這是怎麼回事？</a></dt>

<dt>13.4. <a href="#SENDMAIL-PORT-587">Sendmail 除了在標準的通訊埠 25 外也在通訊埠 587
聆聽！這是怎 麼回事？</a></dt>

<dt>13.5. <a href="#TOOR-ACCOUNT">我發現了這個 UID 0 <tt class="USERNAME">toor</tt>
帳號，這是什麼 碗糕？我被黑掉了嗎？</a></dt>

<dt>13.6. <a href="#SUIDPERL">為什麼 <tt class="COMMAND">suidperl</tt>
無法正常運作？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SANDBOX" name="SANDBOX"></a><b>13.1.</b> 什麼是 sandbox？</p>
</div>

<div class="ANSWER">
<p><b></b>“Sandbox” 是系統安全用的術語，有兩個意義：</p>

<ul>
<li>
<p>放在某些虛擬防護牆裡的執行程序，這些防護牆是用來阻止
某些人侵入這道程序，進而出入於更大的系統中。</p>

<p>這道程序可以完全在防護牆裡 “動作”。也就
是說，它所執行的任何程式不可能會滲透到牆的外面。所以如果
您對它有安全上的顧慮，並不需要特別去監聽它的一舉一動，反 正它只能在牆內活動。</p>

<p>舉例來說，可以用 userid 來做這道防護牆，這正是 security 和 named
說明文件中的定義。</p>

<p>現在就用 <tt class="LITERAL">ntalk</tt> 這個服務作說明（見
/etc/inetd.conf）。這個服務以前的 userid 是 <tt
class="USERNAME">root</tt>，現在執行時則是用 <tt class="USERNAME">tty</tt>。<tt
class="USERNAME">tty</tt> 這個使用者就是一個 sandbox，如果有人能夠順利用 ntalk
侵入系統，現在他就算進得來也只能用這個 userid。</p>
</li>

<li>
<p>放在某個模擬機器裡的程式，這比上述來得更嚴密。基本上
這表示能侵入該程式的人相信他能再進入所屬的機器，但事實上
只會進入模擬出來的機器，無法進一步修改任何真實的資料。</p>

<p>達到這個目的最常用的方法，就是在某個子目錄下做出模擬的 環境，然後用 chroot
執行該程式，這樣該程式的根目錄便是這個 子目錄，而非系統真正的根目錄。</p>

<p>另一個常見作法是將某個檔案系統 mount 成唯讀，但在它
上面另外製造出程式以為可以寫入的檔案系統。這個程式會相信
它可以對其他檔案讀寫，但只有它看不到這個唯讀效應 - 系統 執行的一般程式都看得到。</p>

<p>我們試圖將這類 sandbox 盡量透明化，讓使用者或侵入者 無法看到他是否在某個 sandbox
裡面。</p>
</li>
</ul>

<p>UNIX 實作兩種 sandbox，一個在程式層面，另一個則是由 userid 來達成。</p>

<p>每個 UNIX 執行程序會用防火牆將它和所有其他程序隔開，某個程序
不可以隨意修改其他程序位址的資料。這和 Windows 中，程式可以輕易
修改其他位址資料，結果導致當機的情形大不相同。</p>

<p>每個 UNIX 程序都屬於某個特定的 userid。如果該 userid 不是 <tt
class="USERNAME">root</tt>，就會將它和其他使用者的程序隔開。 Userid
同時也用於硬碟資料的存取權上。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SECURELEVEL" name="SECURELEVEL"></a><b>13.2.</b> 什麼是 securelevel?</p>
</div>

<div class="ANSWER">
<p><b></b>securelevel 是核心中所實作的一個安全機制。基本上當 securelevel
是正值時，核心會限制某些工作；即使是 superuser (也就是 <tt class="USERNAME">root</tt>)
也無法完成那些工作。在撰寫 本文時，securelevel
機制在一般的限制外，還能夠限制以下的功能：</p>

<ul>
<li>
<p>清除某些特定的檔案旗標，例如 <tt class="LITERAL">schg</tt> (系統唯讀標旗, the system
immutable flag)</p>
</li>

<li>
<p>經由 <tt class="DEVICENAME">/dev/mem</tt> 與 <tt class="DEVICENAME">/dev/kmem</tt>，
將資料寫入至核心記憶體中</p>
</li>

<li>
<p>載入核心模組</p>
</li>

<li>
<p>更動 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfirewall&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfirewall</span>(4)</span></a>
規則。</p>
</li>
</ul>

<p>想要檢查在某個運作中的系統的 securelevel 狀態，只要執行以下 命令即可：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl kern.securelevel</kbd>
</pre>

<p>輸出的結果會包含一個 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(8)</span></a> 變數名稱
(在這個例子中， 它是 <code class="VARNAME">kern.securelevel</code>)
以及一個數字。後者即是 目前的 securelevel 值。如果它是一個正值 (也就是大於 0)，表示至少
有一些 securelevel 的保護機制已經開啟了。</p>

<p>你沒有辦法降低一個運作中的系統的 securelevel；如果可以的話，
就失去了這個機制的意義了。如果你要作一些需要 securelevel 為 非正值才可以的動作的話 (例如
<tt class="MAKETARGET">installworld</tt> 或更動日期)，你需要修改 <tt
class="FILENAME">/etc/rc.conf</tt> 內的 securelevel 設定 (找找 <code
class="VARNAME">kern_securelevel</code> 和 <code
class="VARNAME">kern_securelevel_enable</code> 變數)，然後重新開機。</p>

<p>想要知道更多有關於 securelevel 與各個不同等級影響的細節， 請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> 說明文件。</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> securelevel 可不是萬靈丹；它有許多已知的缺陷，往往造成
一種安全的假象。</p>

<p>它一個最大的問題，就是要讓這個功能完全有效的話，在 securelevel
發揮作用前的啟動過程中，所有使用到的檔案都 必須被保護起來。如果一個攻擊者在 securelevel
有效前 (由於 有些系統在啟動中所作的事情，無法在較高的 securelevel 中
正常運作，所以這會在啟動過程中後期才會運作)，能讓他們的程式 被執行的話，securelevel
的保護就完全無效了。保護啟動程序
中所有的檔案在技術上是可行的，但是如果真的這樣作的話，系統
維護將會變成一場夢魘。即使只是修改一個設定檔，也必須將整個
系統關閉，至少也得到單人模式。</p>

<p>除了這點，還有許多其它的東西都在通信論壇上討論，尤其是 freebsd-security。請到 <a
href="../../../../search/index.html" target="_top">這裡</a> 搜尋以前的 討論。有些人希望
securelevel 能夠儘快消失，由另一個更優秀的 機制取代，不過機會有點渺茫。</p>

<p>風險自行承擔。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="EXTRA-NAMED-PORT" name="EXTRA-NAMED-PORT"></a><b>13.3.</b> BIND (<tt
class="COMMAND">named</tt>) 除了在通訊埠 53 以外也在 其他高編號通訊埠 (high-numbered
port) 聆聽 (Listen)。 這是怎麼回事？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 3.0 後的版本使用一個特殊的 BIND 版本，這個版本會使
用隨機的高編號通訊埠來回應外部的查詢。如果你因為要適合防火牆的
設定或是單純的想讓自己看來舒服一點而想用 53 通訊埠回應外部查詢，
那麼你可以嘗試更改以下檔案相關內容 <tt class="FILENAME">/etc/namedb/named.conf</tt>：</p>

<pre class="PROGRAMLISTING">
options {
        query-source address * port 53;
};
</pre>

<p>你也可以將 <tt class="LITERAL">*</tt> 更改為特定 IP address， 藉以加強控制條件。</p>

<p>順便恭喜你。能夠讀取你系統上的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sockstat&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sockstat</span>(1)</span></a>
報告並且注意 不正常狀況是一件好事！</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SENDMAIL-PORT-587" name="SENDMAIL-PORT-587"></a><b>13.4.</b> Sendmail
除了在標準的通訊埠 25 外也在通訊埠 587 聆聽！這是怎 麼回事？</p>
</div>

<div class="ANSWER">
<p><b></b>較新版本的 Sendmail 支援 mail submission 這項功能，並且使 用通訊埠
587。這項功能還沒有被廣泛支援但是支援的數目正在增長 中。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TOOR-ACCOUNT" name="TOOR-ACCOUNT"></a><b>13.5.</b> 我發現了這個 UID 0 <tt
class="USERNAME">toor</tt> 帳號，這是什麼 碗糕？我被黑掉了嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>放心。<tt class="USERNAME">toor</tt> 是一個 “alternative” 管理者帳號 (toor 是
root 的轉向拼法)。 以往是跟隨 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bash&amp;sektion=1&amp;manpath=FreeBSD+5.4-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bash</span>(1)</span></a>
安裝而建制的，後來則成為系統內定建制的一 個帳號。這個帳號將伴隨一個非標準的 shell
測試使用， 讓你不需要去 更改到 <tt class="USERNAME">root</tt> 的內建
shell。因為這些其他的 shell 並沒有跟隨系統預設值安裝 (舉例來說，某些由 ports 安裝的 shell
package)，而被內定安裝在 <tt class="FILENAME">/usr/local/bin</tt>
目錄下，有可能存在不同的檔案系統中。 倘若 <tt class="USERNAME">root</tt> 的 shell 被放在
<tt class="FILENAME">/usr/local/bin</tt>，且 <tt class="FILENAME">/usr</tt>
(或是其他包含著 <tt class="FILENAME">/usr/local/bin</tt> 這個子目錄的檔案系統)
因為某些原因並沒有被正常的 mount 起來的話，<tt class="USERNAME">root</tt>
將無法正常的登入系統進行維修 (雖然說你重開機成單人模式就會問你要 載入哪個 shell)。</p>

<p>有些人使用 <tt class="USERNAME">toor</tt> 帳號進行每日的 <tt
class="USERNAME">root</tt> 維護工作，如此可以使用非標準的 shell，而 <tt
class="USERNAME">root</tt> 可以保留標準 shell， 以因應單一使用者模式 (single user mode)
或緊急狀況處理。 依照系統內定值，你將無法使用 <tt class="USERNAME">toor</tt> 登入，
因為這個帳號尚未更改密碼設定。因此你如果你想啟動這個帳號，你需要 使用 <tt
class="USERNAME">root</tt> 登入系統並且修改 <tt class="USERNAME">toor</tt> 的密碼。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUIDPERL" name="SUIDPERL"></a><b>13.6.</b> 為什麼 <tt
class="COMMAND">suidperl</tt> 無法正常運作？</p>
</div>

<div class="ANSWER">
<p><b></b>因為某些安全的考，<tt class="COMMAND">suidperl</tt> 內定的安裝 並沒有設定 suid
bit。系統管理者可以依照以下命令啟動 suid 設定。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod u+s /usr/bin/suidperl</kbd>
</pre>

<p>如果你想要在由 source 升級時 <tt class="COMMAND">suidperl</tt> 內定 啟動 suid
功能的話，編輯 <tt class="FILENAME">/etc/make.conf</tt> 加入 <code
class="VARNAME">ENABLE_SUIDPERL=true</code> 然後執行 <tt class="COMMAND">make
buildworld</tt>。</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="PPP" name="PPP"></a>Chapter 14 PPP</h1>

<div class="QANDASET">
<dl>
<dt>14.1. <a href="#USERPPP">I cannot make <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> work. What am I doing wrong?</a></dt>

<dt>14.2. <a href="#PPP-HANGS">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> hang when I run it?</a></dt>

<dt>14.3. <a href="#PPP-NODIAL-AUTO">Why will <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> not dial in <tt class="LITERAL">-auto</tt>
mode?</a></dt>

<dt>14.4. <a href="#NO-ROUTE-TO-HOST">What does “<tt class="ERRORNAME">No route to
host</tt>” mean?</a></dt>

<dt>14.5. <a href="#CONNECTION-THREEMINUTEDROP">Why does my connection drop after about 3
minutes?</a></dt>

<dt>14.6. <a href="#PPP-DROP-HEAVY-LOAD">Why does my connection drop under heavy
load?</a></dt>

<dt>14.7. <a href="#PPP-DROP-RANDOM">Why does my connection drop after a random amount of
time?</a></dt>

<dt>14.8. <a href="#PPP-HANGS-RANDOM">Why does my connection hang after a random amount
of time?</a></dt>

<dt>14.9. <a href="#PPP-REMOTE-NOT-RESPONDING">The remote end is not responding. What can
I do?</a></dt>

<dt>14.10. <a href="#PPP-HUNG"><span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> has hung. What can I do?</a></dt>

<dt>14.11. <a href="#PPP-LOGINOK-THENNOTHING">Why does nothing happen after the “Login
OK!” message?</a></dt>

<dt>14.12. <a href="#PPP-SAME-MAGIC">I keep seeing errors about magic being the same.
What does it mean?</a></dt>

<dt>14.13. <a href="#PPP-LCP-CONSTANT">LCP negotiations continue until the connection is
closed. What is wrong?</a></dt>

<dt>14.14. <a href="#PPP-LOCKUPS">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> lock up shortly after connection?</a></dt>

<dt>14.15. <a href="#PPP-SHELL-TEST-LOCKUP">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> lock up when I shell out to test it?</a></dt>

<dt>14.16. <a href="#PPP-NULLMODEM">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> over a null-modem cable never exit?</a></dt>

<dt>14.17. <a href="#PPP-AUTO-NOREASONDIAL">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> dial for no reason in -auto mode?</a></dt>

<dt>14.18. <a href="#CCP-ERRORS">What do these CCP errors mean?</a></dt>

<dt>14.19. <a href="#PPP-LOCKUP-IOERRORS">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> lock up during file transfers with IO
errors?</a></dt>

<dt>14.20. <a href="#PPP-CONNECTIONSPEED">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> not log my connection speed?</a></dt>

<dt>14.21. <a href="#PPP-IGNORES-BACKSLASH">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> ignore the <tt class="LITERAL">\</tt>
character in my chat script?</a></dt>

<dt>14.22. <a href="#PPP-SEGFAULT-NOCORE">Why does <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> get a seg-fault, but I see no <tt
class="FILENAME">ppp.core</tt> file?</a></dt>

<dt>14.23. <a href="#PPP-AUTODIALPROCESS-NOCONNECT">Why does the process that forces a
dial in auto mode never connect?</a></dt>

<dt>14.24. <a href="#PPP-NAT-GAMES">Why do most games not work with the -nat
switch?</a></dt>

<dt>14.25. <a href="#USEFUL-PORT-NUMBERS">Has anybody made a list of useful port
numbers?</a></dt>

<dt>14.26. <a href="#FCS-ERRORS">What are FCS errors?</a></dt>

<dt>14.27. <a href="#MACOS-WIN98-PPPOE-FREEZE">Why do MacOS and Windows 98 connections
freeze when running PPPoE on the gateway?</a></dt>

<dt>14.28. <a href="#DESPERATION">None of this helps - I am desperate! What can I
do?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USERPPP" name="USERPPP"></a><b>14.1.</b> I cannot make <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> work. What am I
doing wrong?</p>
</div>

<div class="ANSWER">
<p><b></b>You should first read the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> man page and
the <a href="../handbook/ppp-and-slip.html#USERPPP" target="_top">PPP section of the
handbook</a>. Enable logging with the command</p>

<pre class="PROGRAMLISTING">
set log Phase Chat Connect Carrier lcp ipcp ccp command
</pre>

<p>This command may be typed at the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> command prompt
or it may be entered in the <tt class="FILENAME">/etc/ppp/ppp.conf</tt> configuration
file (the start of the <tt class="LITERAL">default</tt> section is the best place to put
it). Make sure that <tt class="FILENAME">/etc/syslog.conf</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">syslog.conf</span>(5)</span></a>)
contains the lines</p>

<pre class="PROGRAMLISTING">
!ppp
*.*        /var/log/ppp.log
</pre>

<p>and that the file <tt class="FILENAME">/var/log/ppp.log</tt> exists. You can now find
out a lot about what is going on from the log file. Do not worry if it does not all make
sense. If you need to get help from someone, it may make sense to them.</p>

<p>If your version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> does not
understand the <tt class="COMMAND">set log</tt> command, you should download the <a
href="http://people.FreeBSD.org/~brian/" target="_top">latest version</a>. It will build
on FreeBSD version 2.1.5 and higher.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-HANGS" name="PPP-HANGS"></a><b>14.2.</b> Why does <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> hang when I run
it?</p>
</div>

<div class="ANSWER">
<p><b></b>This is usually because your hostname will not resolve. The best way to fix
this is to make sure that <tt class="FILENAME">/etc/hosts</tt> is consulted by your
resolver first by editing <tt class="FILENAME">/etc/host.conf</tt> and putting the <tt
class="LITERAL">hosts</tt> line first. Then, simply put an entry in <tt
class="FILENAME">/etc/hosts</tt> for your local machine. If you have no local network,
change your <tt class="HOSTID">localhost</tt> line:</p>

<pre class="PROGRAMLISTING">
127.0.0.1        foo.bar.com foo localhost
</pre>

<p>Otherwise, simply add another entry for your host. Consult the relevant man pages for
more details.</p>

<p>You should be able to successfully <tt class="COMMAND">ping -c1 `hostname`</tt> when
you are done.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-NODIAL-AUTO" name="PPP-NODIAL-AUTO"></a><b>14.3.</b> Why will <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> not dial in <tt
class="LITERAL">-auto</tt> mode?</p>
</div>

<div class="ANSWER">
<p><b></b>First, check that you have got a default route. By running <tt
class="COMMAND">netstat -rn</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">netstat</span>(1)</span></a>), you
should see two entries like this:</p>

<pre class="PROGRAMLISTING">
Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0
</pre>

<p>This is assuming that you have used the addresses from the handbook, the man page or
from the ppp.conf.sample file. If you do not have a default route, it may be because you
are running an old version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> that does not
understand the word <tt class="LITERAL">HISADDR</tt> in the ppp.conf file. If your
version of <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is from before
FreeBSD 2.2.5, change the</p>

<pre class="PROGRAMLISTING">
add 0 0 HISADDR
</pre>

<p>line to one saying</p>

<pre class="PROGRAMLISTING">
add 0 0 10.0.0.2
</pre>

<p>Another reason for the default route line being missing is that you have mistakenly
set up a default router in your <tt class="FILENAME">/etc/rc.conf</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>) file (this
file was called <tt class="FILENAME">/etc/sysconfig</tt> prior to release 2.2.2), and you
have omitted the line saying</p>

<pre class="PROGRAMLISTING">
delete ALL
</pre>

<p>from <tt class="FILENAME">ppp.conf</tt>. If this is the case, go back to the <a
href="../handbook/ppp-and-slip.html#USERPPP-FINAL" target="_top">Final system
configuration</a> section of the handbook.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NO-ROUTE-TO-HOST" name="NO-ROUTE-TO-HOST"></a><b>14.4.</b> What does “<tt
class="ERRORNAME">No route to host</tt>” mean?</p>
</div>

<div class="ANSWER">
<p><b></b>This error is usually due to a missing</p>

<pre class="PROGRAMLISTING">
MYADDR:
  delete ALL
  add 0 0 HISADDR
</pre>

<p>section in your <tt class="FILENAME">/etc/ppp/ppp.linkup</tt> file. This is only
necessary if you have a dynamic IP address or do not know the address of your gateway. If
you are using interactive mode, you can type the following after entering <tt
class="LITERAL">packet mode</tt> (packet mode is indicated by the capitalized <acronym
class="ACRONYM">PPP</acronym> in the prompt):</p>

<pre class="PROGRAMLISTING">
delete ALL
add 0 0 HISADDR
</pre>

<p>Refer to the <a href="../handbook/ppp-and-slip.html#USERPPP-DYNAMICIP"
target="_top">PPP and Dynamic IP addresses</a> section of the handbook for further
details.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CONNECTION-THREEMINUTEDROP" name="CONNECTION-THREEMINUTEDROP"></a><b>14.5.</b>
Why does my connection drop after about 3 minutes?</p>
</div>

<div class="ANSWER">
<p><b></b>The default PPP timeout is 3 minutes. This can be adjusted with the line</p>

<pre class="PROGRAMLISTING">
set timeout <tt class="REPLACEABLE"><i>NNN</i></tt>
</pre>

<p>where <tt class="REPLACEABLE"><i>NNN</i></tt> is the number of seconds of inactivity
before the connection is closed. If <tt class="REPLACEABLE"><i>NNN</i></tt> is zero, the
connection is never closed due to a timeout. It is possible to put this command in the
<tt class="FILENAME">ppp.conf</tt> file, or to type it at the prompt in interactive mode.
It is also possible to adjust it on the fly while the line is active by connecting to <b
class="APPLICATION">ppp</b>s server socket using <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a> or <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppctl</span>(8)</span></a>. Refer to
the <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> man page for
further details.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-DROP-HEAVY-LOAD" name="PPP-DROP-HEAVY-LOAD"></a><b>14.6.</b> Why does my
connection drop under heavy load?</p>
</div>

<div class="ANSWER">
<p><b></b>If you have Link Quality Reporting (LQR) configured, it is possible that too
many LQR packets are lost between your machine and the peer. Ppp deduces that the line
must therefore be bad, and disconnects. Prior to FreeBSD version 2.2.5, LQR was enabled
by default. It is now disabled by default. LQR can be disabled with the line</p>

<pre class="PROGRAMLISTING">
disable lqr
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-DROP-RANDOM" name="PPP-DROP-RANDOM"></a><b>14.7.</b> Why does my connection
drop after a random amount of time?</p>
</div>

<div class="ANSWER">
<p><b></b>Sometimes, on a noisy phone line or even on a line with call waiting enabled,
your modem may hang up because it thinks (incorrectly) that it lost carrier.</p>

<p>There is a setting on most modems for determining how tolerant it should be to
temporary losses of carrier. On a USR Sportster for example, this is measured by the S10
register in tenths of a second. To make your modem more forgiving, you could add the
following send-expect sequence to your dial string:</p>

<pre class="PROGRAMLISTING">
set dial "...... ATS10=10 OK ......"
</pre>

<p>Refer to your modem manual for details.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-HANGS-RANDOM" name="PPP-HANGS-RANDOM"></a><b>14.8.</b> Why does my
connection hang after a random amount of time?</p>
</div>

<div class="ANSWER">
<p><b></b>Many people experience hung connections with no apparent explanation. The first
thing to establish is which side of the link is hung.</p>

<p>If you are using an external modem, you can simply try using <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ping</span>(8)</span></a> to see if the
<acronym class="ACRONYM">TD</acronym> light is flashing when you transmit data. If it
flashes (and the <acronym class="ACRONYM">RD</acronym> light does not), the problem is
with the remote end. If <acronym class="ACRONYM">TD</acronym> does not flash, the problem
is local. With an internal modem, you will need to use the <tt class="LITERAL">set
server</tt> command in your <tt class="FILENAME">ppp.conf</tt> file. When the hang
occurs, connect to <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> using <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppctl</span>(8)</span></a>. If your
network connection suddenly revives (PPP was revived due to the activity on the
diagnostic socket) or if you cannot connect (assuming the <tt class="LITERAL">set
socket</tt> command succeeded at startup time), the problem is local. If you can connect
and things are still hung, enable local async logging with <tt class="LITERAL">set log
local async</tt> and use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ping</span>(8)</span></a> from another
window or terminal to make use of the link. The async logging will show you the data
being transmitted and received on the link. If data is going out and not coming back, the
problem is remote.</p>

<p>Having established whether the problem is local or remote, you now have two
possibilities:</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-REMOTE-NOT-RESPONDING" name="PPP-REMOTE-NOT-RESPONDING"></a><b>14.9.</b>
The remote end is not responding. What can I do?</p>
</div>

<div class="ANSWER">
<p><b></b>There is very little you can do about this. Most ISPs will refuse to help if
you are not running a Microsoft OS. You can <tt class="LITERAL">enable lqr</tt> in your
<tt class="FILENAME">ppp.conf</tt> file, allowing <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to detect the
remote failure and hang up, but this detection is relatively slow and therefore not that
useful. You may want to avoid telling your ISP that you are running user-PPP...</p>

<p>First, try disabling all local compression by adding the following to your
configuration:</p>

<pre class="PROGRAMLISTING">
disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj
</pre>

<p>Then reconnect to ensure that this makes no difference. If things improve or if the
problem is solved completely, determine which setting makes the difference through trial
and error. This will provide good ammunition when you contact your ISP (although it may
make it apparent that you are not running a Microsoft product).</p>

<p>Before contacting your ISP, enable async logging locally and wait until the connection
hangs again. This may use up quite a bit of disk space. The last data read from the port
may be of interest. It is usually ascii data, and may even describe the problem (“Memory
fault, core dumped”?).</p>

<p>If your ISP is helpful, they should be able to enable logging on their end, then when
the next link drop occurs, they may be able to tell you why their side is having a
problem. Feel free to send the details to Brian Somers <code class="EMAIL">&#60;<a
href="mailto:brian@FreeBSD.org">brian@FreeBSD.org</a>&#62;</code>, or even to ask your
ISP to contact me directly.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-HUNG" name="PPP-HUNG"></a><b>14.10.</b> <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ppp</span>(8)</span> has hung. What can I do?</p>
</div>

<div class="ANSWER">
<p><b></b>Your best bet here is to rebuild <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> by adding <tt
class="LITERAL">CFLAGS+=-g</tt> and <tt class="LITERAL">STRIP=</tt> to the end of the
Makefile, then doing a <tt class="COMMAND">make clean &amp;&amp; make &amp;&amp; make
install</tt>. When <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> hangs, find the
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> process id with
<tt class="COMMAND">ps ajxww | fgrep ppp</tt> and run <tt class="COMMAND">gdb ppp <tt
class="REPLACEABLE"><i>PID</i></tt></tt>. From the gdb prompt, you can then use <tt
class="COMMAND">bt</tt> to get a stack trace.</p>

<p>Send the results to <code class="EMAIL">&#60;<a
href="mailto:brian@Awfulhak.org">brian@Awfulhak.org</a>&#62;</code>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-LOGINOK-THENNOTHING" name="PPP-LOGINOK-THENNOTHING"></a><b>14.11.</b> Why
does nothing happen after the “Login OK!” message?</p>
</div>

<div class="ANSWER">
<p><b></b>Prior to FreeBSD version 2.2.5, once the link was established, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> would wait for
the peer to initiate the Line Control Protocol (LCP). Many ISPs will not initiate
negotiations and expect the client to do so. To force <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to initiate the
LCP, use the following line:</p>

<pre class="PROGRAMLISTING">
set openmode active
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> It usually does no harm if both sides initiate negotiation, so openmode
is now active by default. However, the next section explains when it <span
class="emphasis"><i class="EMPHASIS">does</i></span> do some harm.</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-SAME-MAGIC" name="PPP-SAME-MAGIC"></a><b>14.12.</b> I keep seeing errors
about magic being the same. What does it mean?</p>
</div>

<div class="ANSWER">
<p><b></b>Occasionally, just after connecting, you may see messages in the log that say
“magic is the same”. Sometimes, these messages are harmless, and sometimes one side or
the other exits. Most PPP implementations cannot survive this problem, and even if the
link seems to come up, you will see repeated configure requests and configure
acknowledgments in the log file until <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> eventually
gives up and closes the connection.</p>

<p>This normally happens on server machines with slow disks that are spawning a getty on
the port, and executing <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> from a login
script or program after login. I have also heard reports of it happening consistently
when using slirp. The reason is that in the time taken between <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">getty</span>(8)</span></a> exiting and
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> starting, the
client-side <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> starts sending
Line Control Protocol (LCP) packets. Because ECHO is still switched on for the port on
the server, the client <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> sees these
packets “reflect” back.</p>

<p>One part of the LCP negotiation is to establish a magic number for each side of the
link so that “reflections” can be detected. The protocol says that when the peer tries
to negotiate the same magic number, a NAK should be sent and a new magic number should be
chosen. During the period that the server port has ECHO turned on, the client <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> sends LCP
packets, sees the same magic in the reflected packet and NAKs it. It also sees the NAK
reflect (which also means <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> must change its
magic). This produces a potentially enormous number of magic number changes, all of which
are happily piling into the server's tty buffer. As soon as <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> starts on the
server, it is flooded with magic number changes and almost immediately decides it has
tried enough to negotiate LCP and gives up. Meanwhile, the client, who no longer sees the
reflections, becomes happy just in time to see a hangup from the server.</p>

<p>This can be avoided by allowing the peer to start negotiating with the following line
in your ppp.conf file:</p>

<pre class="PROGRAMLISTING">
set openmode passive
</pre>

<p>This tells <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to wait for the
server to initiate LCP negotiations. Some servers however may never initiate
negotiations. If this is the case, you can do something like:</p>

<pre class="PROGRAMLISTING">
set openmode active 3
</pre>

<p>This tells <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to be passive
for 3 seconds, and then to start sending LCP requests. If the peer starts sending
requests during this period, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> will
immediately respond rather than waiting for the full 3 second period.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-LCP-CONSTANT" name="PPP-LCP-CONSTANT"></a><b>14.13.</b> LCP negotiations
continue until the connection is closed. What is wrong?</p>
</div>

<div class="ANSWER">
<p><b></b>There is currently an implementation mis-feature in <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> where it does
not associate LCP, CCP &amp; IPCP responses with their original requests. As a result, if
one PPP implementation is more than 6 seconds slower than the other side, the other side
will send two additional LCP configuration requests. This is fatal.</p>

<p>Consider two implementations, <tt class="HOSTID">A</tt> and <tt class="HOSTID">B</tt>.
<tt class="HOSTID">A</tt> starts sending LCP requests immediately after connecting and
<tt class="HOSTID">B</tt> takes 7 seconds to start. When <tt class="HOSTID">B</tt>
starts, <tt class="HOSTID">A</tt> has sent 3 LCP REQs. We are assuming the line has ECHO
switched off, otherwise we would see magic number problems as described in the previous
section. <tt class="HOSTID">B</tt> sends a REQ, then an ACK to the first of <tt
class="HOSTID">A</tt>'s REQs. This results in <tt class="HOSTID">A</tt> entering the
<acronym class="ACRONYM">OPENED</acronym> state and sending and ACK (the first) back to
<tt class="HOSTID">B</tt>. In the meantime, <tt class="HOSTID">B</tt> sends back two more
ACKs in response to the two additional REQs sent by <tt class="HOSTID">A</tt> before <tt
class="HOSTID">B</tt> started up. <tt class="HOSTID">B</tt> then receives the first ACK
from <tt class="HOSTID">A</tt> and enters the <acronym class="ACRONYM">OPENED</acronym>
state. <tt class="HOSTID">A</tt> receives the second ACK from <tt class="HOSTID">B</tt>
and goes back to the <acronym class="ACRONYM">REQ-SENT</acronym> state, sending another
(forth) REQ as per the RFC. It then receives the third ACK and enters the <acronym
class="ACRONYM">OPENED</acronym> state. In the meantime, <tt class="HOSTID">B</tt>
receives the forth REQ from <tt class="HOSTID">A</tt>, resulting in it reverting to the
<acronym class="ACRONYM">ACK-SENT</acronym> state and sending another (second) REQ and
(forth) ACK as per the RFC. <tt class="HOSTID">A</tt> gets the REQ, goes into <acronym
class="ACRONYM">REQ-SENT</acronym> and sends another REQ. It immediately receives the
following ACK and enters <acronym class="ACRONYM">OPENED</acronym>.</p>

<p>This goes on until one side figures out that they are getting nowhere and gives
up.</p>

<p>The best way to avoid this is to configure one side to be <tt
class="LITERAL">passive</tt> - that is, make one side wait for the other to start
negotiating. This can be done with the</p>

<pre class="PROGRAMLISTING">
set openmode passive
</pre>

<p>command. Care should be taken with this option. You should also use the</p>

<pre class="PROGRAMLISTING">
set stopped N
</pre>

<p>command to limit the amount of time that <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> waits for the
peer to begin negotiations. Alternatively, the</p>

<pre class="PROGRAMLISTING">
set openmode active N
</pre>

<p>command (where <tt class="REPLACEABLE"><i>N</i></tt> is the number of seconds to wait
before starting negotiations) can be used. Check the manual page for details.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-LOCKUPS" name="PPP-LOCKUPS"></a><b>14.14.</b> Why does <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> lock up shortly
after connection?</p>
</div>

<div class="ANSWER">
<p><b></b>Prior to version 2.2.5 of FreeBSD, it was possible that your link was disabled
shortly after connection due to <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> mis-handling
Predictor1 compression negotiation. This would only happen if both sides tried to
negotiate different Compression Control Protocols (CCP). This problem is now corrected,
but if you are still running an old version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> the problem can
be circumvented with the line</p>

<pre class="PROGRAMLISTING">
disable pred1
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-SHELL-TEST-LOCKUP" name="PPP-SHELL-TEST-LOCKUP"></a><b>14.15.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> lock up when
I shell out to test it?</p>
</div>

<div class="ANSWER">
<p><b></b>When you execute the <tt class="COMMAND">shell</tt> or <tt
class="COMMAND">!</tt> command, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> executes a
shell (or if you have passed any arguments, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> will execute
those arguments). Ppp will wait for the command to complete before continuing. If you
attempt to use the PPP link while running the command, the link will appear to have
frozen. This is because <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is waiting for
the command to complete.</p>

<p>If you wish to execute commands like this, use the <tt class="COMMAND">!bg</tt>
command instead. This will execute the given command in the background, and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> can continue to
service the link.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-NULLMODEM" name="PPP-NULLMODEM"></a><b>14.16.</b> Why does <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> over a null-modem
cable never exit?</p>
</div>

<div class="ANSWER">
<p><b></b>There is no way for <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to
automatically determine that a direct connection has been dropped. This is due to the
lines that are used in a null-modem serial cable. When using this sort of connection, LQR
should always be enabled with the line</p>

<pre class="PROGRAMLISTING">
enable lqr
</pre>

<p>LQR is accepted by default if negotiated by the peer.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-AUTO-NOREASONDIAL" name="PPP-AUTO-NOREASONDIAL"></a><b>14.17.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> dial for no
reason in -auto mode?</p>
</div>

<div class="ANSWER">
<p><b></b>If <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is dialing
unexpectedly, you must determine the cause, and set up Dial filters (dfilters) to prevent
such dialing.</p>

<p>To determine the cause, use the following line:</p>

<pre class="PROGRAMLISTING">
set log +tcp/ip
</pre>

<p>This will log all traffic through the connection. The next time the line comes up
unexpectedly, you will see the reason logged with a convenient timestamp next to it.</p>

<p>You can now disable dialing under these circumstances. Usually, this sort of problem
arises due to DNS lookups. To prevent DNS lookups from establishing a connection (this
will <span class="emphasis"><i class="EMPHASIS">not</i></span> prevent <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> from passing
the packets through an established connection), use the following:</p>

<pre class="PROGRAMLISTING">
set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0
</pre>

<p>This is not always suitable, as it will effectively break your demand-dial
capabilities - most programs will need a DNS lookup before doing any other network
related things.</p>

<p>In the DNS case, you should try to determine what is actually trying to resolve a host
name. A lot of the time, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sendmail</span>(8)</span></a> is the
culprit. You should make sure that you tell sendmail not to do any DNS lookups in its
configuration file. See the section on <a href="#ISPMAIL">Mail Configuration</a> for
details on how to create your own configuration file and what should go into it. You may
also want to add the following line to your <tt class="FILENAME">.mc</tt> file:</p>

<pre class="PROGRAMLISTING">
define(`confDELIVERY_MODE', `d')dnl
</pre>

<p>This will make sendmail queue everything until the queue is run (usually, sendmail is
invoked with <code class="OPTION">-bd -q30m</code>, telling it to run the queue every 30
minutes) or until a <tt class="COMMAND">sendmail -q</tt> is done (perhaps from your
ppp.linkup file).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CCP-ERRORS" name="CCP-ERRORS"></a><b>14.18.</b> What do these CCP errors
mean?</p>
</div>

<div class="ANSWER">
<p><b></b>I keep seeing the following errors in my log file:</p>

<pre class="PROGRAMLISTING">
CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)
</pre>

<p>This is because <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is trying to
negotiate Predictor1 compression, and the peer does not want to negotiate any compression
at all. The messages are harmless, but if you wish to remove them, you can disable
Predictor1 compression locally too:</p>

<pre class="PROGRAMLISTING">
disable pred1
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-LOCKUP-IOERRORS" name="PPP-LOCKUP-IOERRORS"></a><b>14.19.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> lock up
during file transfers with IO errors?</p>
</div>

<div class="ANSWER">
<p><b></b>Under FreeBSD 2.2.2 and before, there was a bug in the tun driver that prevents
incoming packets of a size larger than the tun interface's MTU size. Receipt of a packet
greater than the MTU size results in an IO error being logged via syslogd.</p>

<p>The PPP specification says that an MRU of 1500 should <span class="emphasis"><i
class="EMPHASIS">always</i></span> be accepted as a minimum, despite any LCP
negotiations, therefore it is possible that should you decrease the MTU to less than
1500, your ISP will transmit packets of 1500 regardless, and you will tickle this
non-feature - locking up your link.</p>

<p>The problem can be circumvented by never setting an MTU of less than 1500 under
FreeBSD 2.2.2 or before.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-CONNECTIONSPEED" name="PPP-CONNECTIONSPEED"></a><b>14.20.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> not log my
connection speed?</p>
</div>

<div class="ANSWER">
<p><b></b>In order to log all lines of your modem “conversation”, you must enable the
following:</p>

<pre class="PROGRAMLISTING">
set log +connect
</pre>

<p>This will make <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> log everything
up until the last requested “expect” string.</p>

<p>If you wish to see your connect speed and are using PAP or CHAP (and therefore do not
have anything to “chat” after the CONNECT in the dial script - no <tt
class="LITERAL">set login</tt> script), you must make sure that you instruct <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to “expect”
the whole CONNECT line, something like this:</p>

<pre class="PROGRAMLISTING">
set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"
</pre>

<p>Here, we get our CONNECT, send nothing, then expect a line-feed, forcing <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to read the
whole CONNECT response.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-IGNORES-BACKSLASH" name="PPP-IGNORES-BACKSLASH"></a><b>14.21.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> ignore the
<tt class="LITERAL">\</tt> character in my chat script?</p>
</div>

<div class="ANSWER">
<p><b></b>Ppp parses each line in your config files so that it can interpret strings such
as <tt class="LITERAL">set phone "123 456 789"</tt> correctly (and realize that the
number is actually only <span class="emphasis"><i class="EMPHASIS">one</i></span>
argument. In order to specify a <tt class="LITERAL">&quot;</tt> character, you must
escape it using a backslash (<tt class="LITERAL">\</tt>).</p>

<p>When the chat interpreter parses each argument, it re-interprets the argument in order
to find any special escape sequences such as <tt class="LITERAL">\P</tt> or <tt
class="LITERAL">\T</tt> (see the man page). As a result of this double-parsing, you must
remember to use the correct number of escapes.</p>

<p>If you wish to actually send a <tt class="LITERAL">\</tt> character to (say) your
modem, you would need something like:</p>

<pre class="PROGRAMLISTING">
set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"
</pre>

<p>resulting in the following sequence:</p>

<pre class="PROGRAMLISTING">
ATZ
OK
AT\X
OK
</pre>

<p>or</p>

<pre class="PROGRAMLISTING">
set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"
</pre>

<p>resulting in the following sequence:</p>

<pre class="PROGRAMLISTING">
ATZ
OK
ATDT1234567
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-SEGFAULT-NOCORE" name="PPP-SEGFAULT-NOCORE"></a><b>14.22.</b> Why does
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span> get a
seg-fault, but I see no <tt class="FILENAME">ppp.core</tt> file?</p>
</div>

<div class="ANSWER">
<p><b></b>Ppp (or any other program for that matter) should never dump core. Because <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> runs with an
effective user id of 0, the operating system will not write <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>'s core image to
disk before terminating it. If, however <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is actually
terminating due to a segmentation violation or some other signal that normally causes
core to be dumped, <span class="emphasis"><i class="EMPHASIS">and</i></span> you are sure
you are using the latest version (see the start of this section), then you should do the
following:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">tar xfz ppp-*.src.tar.gz</kbd>
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">cd ppp*/ppp</kbd>
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">echo STRIP= &gt;&gt;Makefile</kbd>
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">echo CFLAGS+=-g &gt;&gt;Makefile</kbd>
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">make clean all</kbd>
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">su</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make install</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod 555 /usr/sbin/ppp</kbd>
</pre>

<p>You will now have a debuggable version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> installed. You
will have to be <tt class="USERNAME">root</tt> to run <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> as all of its
privileges have been revoked. When you start <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>, take a careful
note of what your current directory was at the time.</p>

<p>Now, if and when <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> receives the
segmentation violation, it will dump a core file called <tt
class="FILENAME">ppp.core</tt>. You should then do the following:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">su</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">gdb /usr/sbin/ppp ppp.core</kbd>
<samp class="PROMPT">(gdb)</samp> <kbd class="USERINPUT">bt</kbd>
.....
<samp class="PROMPT">(gdb)</samp> <kbd class="USERINPUT">f 0</kbd>
....
<samp class="PROMPT">(gdb)</samp> <kbd class="USERINPUT">i args</kbd>
....
<samp class="PROMPT">(gdb)</samp> <kbd class="USERINPUT">l</kbd>
.....
</pre>

<p>All of this information should be given alongside your question, making it possible to
diagnose the problem.</p>

<p>If you are familiar with gdb, you may wish to find out some other bits and pieces such
as what actually caused the dump and the addresses &amp; values of the relevant
variables.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-AUTODIALPROCESS-NOCONNECT"
name="PPP-AUTODIALPROCESS-NOCONNECT"></a><b>14.23.</b> Why does the process that forces a
dial in auto mode never connect?</p>
</div>

<div class="ANSWER">
<p><b></b>This was a known problem with <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> set up to
negotiate a dynamic local IP number with the peer in auto mode. It is fixed in the latest
version - search the man page for <tt class="LITERAL">iface</tt>.</p>

<p>The problem was that when that initial program calls <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&amp;sektion=2"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">connect</span>(2)</span></a>, the IP
number of the tun interface is assigned to the socket endpoint. The kernel creates the
first outgoing packet and writes it to the tun device. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> then reads the
packet and establishes a connection. If, as a result of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>'s dynamic IP
assignment, the interface address is changed, the original socket endpoint will be
invalid. Any subsequent packets sent to the peer will usually be dropped. Even if they
are not, any responses will not route back to the originating machine as the IP number is
no longer owned by that machine.</p>

<p>There are several theoretical ways to approach this problem. It would be nicest if the
peer would re-assign the same IP number if possible <tt class="LITERAL">:-)</tt> The
current version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> does this, but
most other implementations do not.</p>

<p>The easiest method from our side would be to never change the tun interface IP number,
but instead to change all outgoing packets so that the source IP number is changed from
the interface IP to the negotiated IP on the fly. This is essentially what the <tt
class="LITERAL">iface-alias</tt> option in the latest version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> is doing (with
the help of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">libalias</span>(3)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>'s <code
class="OPTION">-nat</code> switch) - it is maintaining all previous interface addresses
and NATing them to the last negotiated address.</p>

<p>Another alternative (and probably the most reliable) would be to implement a system
call that changes all bound sockets from one IP to another. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> would use this
call to modify the sockets of all existing programs when a new IP number is negotiated.
The same system call could be used by dhcp clients when they are forced to re-bind()
their sockets.</p>

<p>Yet another possibility is to allow an interface to be brought up without an IP
number. Outgoing packets would be given an IP number of 255.255.255.255 up until the
first SIOCAIFADDR ioctl is done. This would result in fully binding the socket. It would
be up to <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to change the
source IP number, but only if it is set to 255.255.255.255, and only the IP number and IP
checksum would need to change. This, however is a bit of a hack as the kernel would be
sending bad packets to an improperly configured interface, on the assumption that some
other mechanism is capable of fixing things retrospectively.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-NAT-GAMES" name="PPP-NAT-GAMES"></a><b>14.24.</b> Why do most games not
work with the -nat switch?</p>
</div>

<div class="ANSWER">
<p><b></b>The reason games and the like do not work when libalias is in use is that the
machine on the outside will try to open a connection or send (unsolicited) UDP packets to
the machine on the inside. The NAT software does not know that it should send these
packets to the interior machine.</p>

<p>To make things work, make sure that the only thing running is the software that you
are having problems with, then either run tcpdump on the tun interface of the gateway or
enable <a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> tcp/ip logging
(<tt class="LITERAL">set log +tcp/ip</tt>) on the gateway.</p>

<p>When you start the offending software, you should see packets passing through the
gateway machine. When something comes back from the outside, it will be dropped (that is
the problem). Note the port number of these packets then shut down the offending
software. Do this a few times to see if the port numbers are consistent. If they are,
then the following line in the relevant section of <tt
class="FILENAME">/etc/ppp/ppp.conf</tt> will make the software functional:</p>

<pre class="PROGRAMLISTING">
nat port <tt class="REPLACEABLE"><i>proto</i></tt> <tt
class="REPLACEABLE"><i>internalmachine</i></tt>:<tt
class="REPLACEABLE"><i>port</i></tt> <tt class="REPLACEABLE"><i>port</i></tt>
</pre>

<p>where <tt class="REPLACEABLE"><i>proto</i></tt> is either <tt class="LITERAL">tcp</tt>
or <tt class="LITERAL">udp</tt>, <tt class="REPLACEABLE"><i>internalmachine</i></tt> is
the machine that you want the packets to be sent to and <tt
class="REPLACEABLE"><i>port</i></tt> is the destination port number of the packets.</p>

<p>You will not be able to use the software on other machines without changing the above
command, and running the software on two internal machines at the same time is out of the
question - after all, the outside world is seeing your entire internal network as being
just a single machine.</p>

<p>If the port numbers are not consistent, there are three more options:</p>

<ol type="1">
<li>
<p>Submit support in libalias. Examples of “special cases” can be found in <tt
class="FILENAME">/usr/src/lib/libalias/alias_*.c</tt> (<tt
class="FILENAME">alias_ftp.c</tt> is a good prototype). This usually involves reading
certain recognised outgoing packets, identifying the instruction that tells the outside
machine to initiate a connection back to the internal machine on a specific (random) port
and setting up a “route” in the alias table so that the subsequent packets know where
to go.</p>

<p>This is the most difficult solution, but it is the best and will make the software
work with multiple machines.</p>
</li>

<li>
<p>Use a proxy. The application may support socks5 for example, or (as in the “cvsup”
case) may have a “passive” option that avoids ever requesting that the peer open
connections back to the local machine.</p>
</li>

<li>
<p>Redirect everything to the internal machine using <tt class="LITERAL">nat addr</tt>.
This is the sledge-hammer approach.</p>
</li>
</ol>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USEFUL-PORT-NUMBERS" name="USEFUL-PORT-NUMBERS"></a><b>14.25.</b> Has anybody
made a list of useful port numbers?</p>
</div>

<div class="ANSWER">
<p><b></b>Not yet, but this is intended to grow into such a list (if any interest is
shown). In each example, <tt class="REPLACEABLE"><i>internal</i></tt> should be replaced
with the IP number of the machine playing the game.</p>

<ul>
<li>
<p><b class="APPLICATION">Asheron's Call</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt> :65000
65000</tt></p>

<p>Manually change the port number within the game to 65000. If you have got a number of
machines that you wish to play on assign a unique port number for each (i.e. 65001,
65002, etc) and add a <tt class="LITERAL">nat port</tt> line for each one.</p>
</li>

<li>
<p><b class="APPLICATION">Half Life</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:27005
27015</tt></p>
</li>

<li>
<p><b class="APPLICATION">PCAnywhere 8.0</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:5632
5632</tt></p>

<p><tt class="LITERAL">nat port tcp <tt class="REPLACEABLE"><i>internal</i></tt>:5631
5631</tt></p>
</li>

<li>
<p><b class="APPLICATION">Quake</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:6112
6112</tt></p>

<p>Alternatively, you may want to take a look at <a
href="http://www.battle.net/support/proxy/" target="_top">www.battle.net</a> for Quake
proxy support.</p>
</li>

<li>
<p><b class="APPLICATION">Quake 2</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:27901
27910</tt></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:60021
60021</tt></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:60040
60040</tt></p>
</li>

<li>
<p><b class="APPLICATION">Red Alert</b></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:8675
8675</tt></p>

<p><tt class="LITERAL">nat port udp <tt class="REPLACEABLE"><i>internal</i></tt>:5009
5009</tt></p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FCS-ERRORS" name="FCS-ERRORS"></a><b>14.26.</b> What are FCS errors?</p>
</div>

<div class="ANSWER">
<p><b></b>FCS stands for <tt class="LITERAL">F</tt>rame <tt class="LITERAL">C</tt>heck
<tt class="LITERAL">S</tt>equence. Each PPP packet has a checksum attached to ensure that
the data being received is the data being sent. If the FCS of an incoming packet is
incorrect, the packet is dropped and the HDLC FCS count is increased. The HDLC error
values can be displayed using the <tt class="LITERAL">show hdlc</tt> command.</p>

<p>If your link is bad (or if your serial driver is dropping packets), you will see the
occasional FCS error. This is not usually worth worrying about although it does slow down
the compression protocols substantially. If you have an external modem, make sure your
cable is properly shielded from interference - this may eradicate the problem.</p>

<p>If your link freezes as soon as you have connected and you see a large number of FCS
errors, this may be because your link is not 8 bit clean. Make sure your modem is not
using software flow control (XON/XOFF). If your datalink <span class="emphasis"><i
class="EMPHASIS">must</i></span> use software flow control, use the command <tt
class="LITERAL">set accmap 0x000a0000</tt> to tell <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> to escape the
<tt class="LITERAL">^Q</tt> and <tt class="LITERAL">^S</tt> characters.</p>

<p>Another reason for seeing too many FCS errors may be that the remote end has stopped
talking <acronym class="ACRONYM">PPP</acronym>. You may want to enable <tt
class="LITERAL">async</tt> logging at this point to determine if the incoming data is
actually a login or shell prompt. If you have a shell prompt at the remote end, it is
possible to terminate <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> without
dropping the line by using the <tt class="LITERAL">close lcp</tt> command (a following
<tt class="LITERAL">term</tt> command will reconnect you to the shell on the remote
machine.</p>

<p>If nothing in your log file indicates why the link might have been terminated, you
should ask the remote administrator (your ISP?) why the session was terminated.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MACOS-WIN98-PPPOE-FREEZE" name="MACOS-WIN98-PPPOE-FREEZE"></a><b>14.27.</b> Why
do MacOS and Windows 98 connections freeze when running PPPoE on the gateway?</p>
</div>

<div class="ANSWER">
<p><b></b>Thanks to Michael Wozniak <code class="EMAIL">&#60;<a
href="mailto:mwozniak@netcom.ca">mwozniak@netcom.ca</a>&#62;</code> for figuring this out
and Dan Flemming <code class="EMAIL">&#60;<a
href="mailto:danflemming@mac.com">danflemming@mac.com</a>&#62;</code> for the Mac
solution:</p>

<p>This is due to what is called a “Black Hole” router. MacOS and Windows 98 (and maybe
other Microsoft OSs) send TCP packets with a requested segment size too big to fit into a
PPPoE frame (MTU is 1500 by default for Ethernet) <span class="emphasis"><i
class="EMPHASIS">and</i></span> have the “do not fragment” bit set (default of TCP) and
the Telco router is not sending ICMP “must fragment” back to the www site you are
trying to load. (Alternatively, the router is sending the ICMP packet correctly, but the
firewall at the www site is dropping it.) When the www server is sending you frames that
do not fit into the PPPoE pipe the Telco router drops them on the floor and your page
does not load (some pages/graphics do as they are smaller than a MSS.) This seems to be
the default of most Telco PPPoE configurations (if only they knew how to program a
router... sigh...)</p>

<p>One fix is to use regedit on your 95/98 boxes to add the following registry
entry...</p>

<pre class="PROGRAMLISTING">
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Class\NetTrans\0000\MaxMTU
</pre>

<p>It should be a string with a value “1436”, as some ADSL routers are reported to be
unable to deal with packets larger than this. This registry key has been changed to <tt
class="LITERAL">Tcpip\Parameters\Interfaces\<tt class="REPLACEABLE"><i>ID for
adapter</i></tt>\MTU</tt> in Windows 2000 and becomes a DWORD.</p>

<p>Refer to the Microsoft Knowledge Base documents <a
href="http://support.microsoft.com/support/kb/articles/Q158/4/74.asp"
target="_top">Q158474 - Windows TCPIP Registry Entries</a> and <a
href="http://support.microsoft.com/support/kb/articles/Q120/6/42.asp"
target="_top">Q120642 - TCPIP &#38; NBT Configuration Parameters for Windows NT</a> for
more information on changing Windows MTU to work with a NAT router.</p>

<p>Another regedit possibility under Windows 2000 is to set the <tt
class="LITERAL">Tcpip\Parameters\Interfaces\<tt class="REPLACEABLE"><i>ID for
adapter</i></tt>\EnablePMTUBHDetect</tt> DWORD to 1 as mentioned in the Microsoft
document 120642 mentioned above.</p>

<p>Unfortunately, MacOS does not provide an interface for changing TCP/IP settings.
However, there is commercial software available, such as OTAdvancedTuner (OT for
OpenTransport, the MacOS TCP/IP stack) by <a href="http://www.softworks.com/"
target="_top">Sustainable Softworks</a>, that will allow users to customize TCP/IP
settings. MacOS NAT users should select <tt class="LITERAL">ip_interface_MTU</tt> from
the drop-down menu, enter <tt class="LITERAL">1450</tt> instead of <tt
class="LITERAL">1500</tt> in the box, click the box next to <tt class="LITERAL">Save as
Auto Configure</tt>, and click <tt class="LITERAL">Make Active</tt>.</p>

<p>The latest version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> (2.3 or
greater) has an <tt class="COMMAND">enable tcpmssfixup</tt> command that will
automatically adjust the MSS to an appropriate value. This facility is enabled by
default. If you are stuck with an older version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>, you may want
to look at the <b class="APPLICATION">tcpmssd</b> port.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DESPERATION" name="DESPERATION"></a><b>14.28.</b> None of this helps - I am
desperate! What can I do?</p>
</div>

<div class="ANSWER">
<p><b></b>If all else fails, send as much information as you can, including your config
files, how you are starting <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>, the relevant
parts of your log file and the output of the <tt class="COMMAND">netstat -rn</tt> command
(before and after connecting) to the <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD
general questions mailing list</a> or the <a href="news:comp.unix.bsd.freebsd.misc"
target="_top">comp.unix.bsd.freebsd.misc</a> news group, and someone should point you in
the right direction.</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="SERIAL" name="SERIAL"></a>Chapter 15 Serial Communications</h1>

<p>This section answers common questions about serial communications with FreeBSD. PPP
and SLIP are covered in the <a href="#NETWORKING">Chapter 12</a> section.</p>

<div class="QANDASET">
<dl>
<dt>15.1. <a href="#FOUND-SERIAL">How do I tell if FreeBSD found my serial
ports?</a></dt>

<dt>15.2. <a href="#FOUND-MODEM">How do I tell if FreeBSD found my modem cards?</a></dt>

<dt>15.3. <a href="#MISSING-TTY0X">I just upgraded to 2.0.5 and my <tt
class="DEVICENAME">tty0<tt class="REPLACEABLE"><i>X</i></tt></tt> are missing! How do I
solve this problem?</a></dt>

<dt>15.4. <a href="#ACCESS-SERIAL-PORTS">How do I access the serial ports on
FreeBSD?</a></dt>

<dt>15.5. <a href="#ENABLE-MULTIPORT-SERIAL">How do I enable support for a multiport
serial card?</a></dt>

<dt>15.6. <a href="#MULTIPORT-SERIAL-SHARE-IRQ">Can FreeBSD handle multiport serial cards
sharing irqs?</a></dt>

<dt>15.7. <a href="#DEFAULT-SERIAL-PARAMS">Can I set the default serial parameters for a
port?</a></dt>

<dt>15.8. <a href="#ENABLE-DIALUP">How can I enable dialup logins on my modem?</a></dt>

<dt>15.9. <a href="#DUMB-TERMINAL">How can I connect a dumb terminal to my FreeBSD
box?</a></dt>

<dt>15.10. <a href="#CANNOT-TIP">Why can I not run <tt class="COMMAND">tip</tt> or <tt
class="COMMAND">cu</tt>?</a></dt>

<dt>15.11. <a href="#HAYES-UNSUPPORTED">My stock Hayes modem is not supported---what can
I do?</a></dt>

<dt>15.12. <a href="#DIRECT-AT">How am I expected to enter these AT commands?</a></dt>

<dt>15.13. <a href="#GT-FAILURE">Why does the <tt class="LITERAL">&lt;@&gt;</tt> sign for
the pn capability not work?</a></dt>

<dt>15.14. <a href="#DIAL-COMMAND-LINE">How can I dial a phone number on the command
line?</a></dt>

<dt>15.15. <a href="#SET-BPS">Do I have to type in the bps rate every time I do
that?</a></dt>

<dt>15.16. <a href="#TERMINAL-SERVER">How can I more easily access a number of hosts
through a terminal server?</a></dt>

<dt>15.17. <a href="#TIP-MULTILINE">Can tip try more than one line for each
site?</a></dt>

<dt>15.18. <a href="#MULTI-CONTROLP">Why do I have to hit CTRL+P twice to send CTRL+P
once?</a></dt>

<dt>15.19. <a href="#UPPERCASE">Why is everything I type suddenly in UPPER CASE?</a></dt>

<dt>15.20. <a href="#TIP-FILETRANSFER">How can I do file transfers with <tt
class="COMMAND">tip</tt>?</a></dt>

<dt>15.21. <a href="#ZMODEM-TIP">How can I run zmodem with <b
class="APPLICATION">tip</b>?</a></dt>

<dt>15.22. <a href="#CANNOT-FIND-SERIAL">Why does FreeBSD not find my serial ports, even
when the settings are correct?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FOUND-SERIAL" name="FOUND-SERIAL"></a><b>15.1.</b> How do I tell if FreeBSD
found my serial ports?</p>
</div>

<div class="ANSWER">
<p><b></b>As the FreeBSD kernel boots, it will probe for the serial ports in your system
for which the kernel was configured. You can either watch your system closely for the
messages it prints or run the command</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">dmesg | grep sio</kbd>
</pre>

<p>after your system is up and running.</p>

<p>Here is some example output from the above command:</p>

<pre class="PROGRAMLISTING">
sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A
</pre>

<p>This shows two serial ports. The first is on irq 4, is using port address <tt
class="LITERAL">0x3f8</tt>, and has a 16550A-type UART chip. The second uses the same
kind of chip but is on irq 3 and is at port address <tt class="LITERAL">0x2f8</tt>.
Internal modem cards are treated just like serial ports---except that they always have a
modem “attached” to the port.</p>

<p>The <tt class="FILENAME">GENERIC</tt> kernel includes support for two serial ports
using the same irq and port address settings in the above example. If these settings are
not right for your system, or if you have added modem cards or have more serial ports
than your kernel is configured for, just reconfigure your kernel. See section <a
href="#MAKE-KERNEL">about building a kernel</a> for more details.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FOUND-MODEM" name="FOUND-MODEM"></a><b>15.2.</b> How do I tell if FreeBSD found
my modem cards?</p>
</div>

<div class="ANSWER">
<p><b></b>Refer to the answer to the previous question.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MISSING-TTY0X" name="MISSING-TTY0X"></a><b>15.3.</b> I just upgraded to 2.0.5
and my <tt class="DEVICENAME">tty0<tt class="REPLACEABLE"><i>X</i></tt></tt> are missing!
How do I solve this problem?</p>
</div>

<div class="ANSWER">
<p><b></b>Do not worry, they have been merged with the <tt class="DEVICENAME">ttyd<tt
class="REPLACEABLE"><i>X</i></tt></tt> devices. You will have to change any old
configuration files you have, though.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ACCESS-SERIAL-PORTS" name="ACCESS-SERIAL-PORTS"></a><b>15.4.</b> How do I
access the serial ports on FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>The third serial port, <tt class="DEVICENAME">sio2</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a>, known as COM3
in DOS), is on <tt class="DEVICENAME">/dev/cuaa2</tt> for dial-out devices, and on <tt
class="DEVICENAME">/dev/ttyd2</tt> for dial-in devices. What is the difference between
these two classes of devices?</p>

<p>You use <tt class="DEVICENAME">ttyd<tt class="REPLACEABLE"><i>X</i></tt></tt> for
dial-ins. When opening <tt class="DEVICENAME">/dev/ttyd<tt
class="REPLACEABLE"><i>X</i></tt></tt> in blocking mode, a process will wait for the
corresponding <tt class="DEVICENAME">cuaa<tt class="REPLACEABLE"><i>X</i></tt></tt>
device to become inactive, and then wait for the carrier detect line to go active. When
you open the <tt class="DEVICENAME">cuaa<tt class="REPLACEABLE"><i>X</i></tt></tt>
device, it makes sure the serial port is not already in use by the <tt
class="DEVICENAME">ttyd<tt class="REPLACEABLE"><i>X</i></tt></tt> device. If the port is
available, it “steals” it from the <tt class="DEVICENAME">ttyd<tt
class="REPLACEABLE"><i>X</i></tt></tt> device. Also, the <tt class="DEVICENAME">cuaa<tt
class="REPLACEABLE"><i>X</i></tt></tt> device does not care about carrier detect. With
this scheme and an auto-answer modem, you can have remote users log in and you can still
dial out with the same modem and the system will take care of all the conflicts.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ENABLE-MULTIPORT-SERIAL" name="ENABLE-MULTIPORT-SERIAL"></a><b>15.5.</b> How do
I enable support for a multiport serial card?</p>
</div>

<div class="ANSWER">
<p><b></b>Again, the section on kernel configuration provides information about
configuring your kernel. For a multiport serial card, place an <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a> line for each
serial port on the card in the kernel configuration file. But place the irq and vector
specifiers on only one of the entries. All of the ports on the card should share one irq.
For consistency, use the last serial port to specify the irq. Also, specify the <tt
class="LITERAL">COM_MULTIPORT</tt> option.</p>

<p>The following example is for an AST 4-port serial card on irq 7:</p>

<pre class="PROGRAMLISTING">
options "COM_MULTIPORT"
device sio4 at isa? port 0x2a0 tty flags 0x781
device sio5 at isa? port 0x2a8 tty flags 0x781
device sio6 at isa? port 0x2b0 tty flags 0x781
device sio7 at isa? port 0x2b8 tty flags 0x781 irq 7 vector siointr
</pre>

<p>The flags indicate that the master port has minor number 7 (<tt
class="LITERAL">0x700</tt>), diagnostics enabled during probe (<tt
class="LITERAL">0x080</tt>), and all the ports share an irq (<tt
class="LITERAL">0x001</tt>).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTIPORT-SERIAL-SHARE-IRQ" name="MULTIPORT-SERIAL-SHARE-IRQ"></a><b>15.6.</b>
Can FreeBSD handle multiport serial cards sharing irqs?</p>
</div>

<div class="ANSWER">
<p><b></b>Not yet. You will have to use a different irq for each card.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEFAULT-SERIAL-PARAMS" name="DEFAULT-SERIAL-PARAMS"></a><b>15.7.</b> Can I set
the default serial parameters for a port?</p>
</div>

<div class="ANSWER">
<p><b></b>The <tt class="DEVICENAME">ttyd<tt class="REPLACEABLE"><i>X</i></tt></tt> (or
<tt class="DEVICENAME">cuaa<tt class="REPLACEABLE"><i>X</i></tt></tt>) device is the
regular device you will want to open for your applications. When a process opens the
device, it will have a default set of terminal I/O settings. You can see these settings
with the command</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">stty -a -f /dev/ttyd1</kbd>
</pre>

<p>When you change the settings to this device, the settings are in effect until the
device is closed. When it is reopened, it goes back to the default set. To make changes
to the default set, you can open and adjust the settings of the “initial state” device.
For example, to turn on <acronym class="ACRONYM">CLOCAL</acronym> mode, 8 bits, and
<acronym class="ACRONYM">XON/XOFF</acronym> flow control by default for ttyd5, do:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">stty -f /dev/ttyid5 clocal cs8 ixon ixoff</kbd>
</pre>

<p>A good place to do this is in <tt class="FILENAME">/etc/rc.serial</tt>. Now, an
application will have these settings by default when it opens <tt
class="FILENAME">ttyd5</tt>. It can still change these settings to its liking,
though.</p>

<p>You can also prevent certain settings from being changed by an application by making
adjustments to the “lock state” device. For example, to lock the speed of <tt
class="DEVICENAME">ttyd5</tt> to 57600 bps, do</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">stty -f /dev/ttyld5 57600</kbd>
</pre>

<p>Now, an application that opens <tt class="DEVICENAME">ttyd5</tt> and tries to change
the speed of the port will be stuck with 57600 bps.</p>

<p>Naturally, you should make the initial state and lock state devices writable only by
<tt class="USERNAME">root</tt>. The <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">MAKEDEV</span>(8)</span></a> script does
<span class="emphasis"><i class="EMPHASIS">NOT</i></span> do this when it creates the
device entries.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ENABLE-DIALUP" name="ENABLE-DIALUP"></a><b>15.8.</b> How can I enable dialup
logins on my modem?</p>
</div>

<div class="ANSWER">
<p><b></b>So you want to become an Internet service provider, eh? First, you will need
one or more modems that can auto-answer. Your modem will need to assert carrier-detect
when it detects a carrier and not assert it all the time. It will need to hang up the
phone and reset itself when the data terminal ready (<acronym
class="ACRONYM">DTR</acronym>) line goes from on to off. It should probably use <tt
class="FILENAME">RTS/CTS</tt> flow control or no local flow control at all. Finally, it
must use a constant speed between the computer and itself, but (to be nice to your
callers) it should negotiate a speed between itself and the remote modem.</p>

<p>For many Hayes command-set--compatible modems, this command will make these settings
and store them in nonvolatile memory:</p>

<pre class="PROGRAMLISTING">
AT &amp;C1 &amp;D3 &amp;K3 &amp;Q6 S0=1 &amp;W
</pre>

<p>See the section <a href="#DIRECT-AT">on sending AT commands</a> below for information
on how to make these settings without resorting to an MS-DOS terminal program.</p>

<p>Next, make an entry in <tt class="FILENAME">/etc/ttys</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ttys</span>(5)</span></a>) for the
modem. This file lists all the ports on which the operating system will await logins. Add
a line that looks something like this:</p>

<pre class="PROGRAMLISTING">
ttyd1 "/usr/libexec/getty std.57600" dialup on insecure
</pre>

<p>This line indicates that the second serial port (<tt
class="DEVICENAME">/dev/ttyd1</tt>) has a modem connected running at 57600 bps and no
parity (<tt class="LITERAL">std.57600</tt>, which comes from the file <tt
class="FILENAME">/etc/gettytab</tt>, see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gettytab</span>(5)</span></a>). The
terminal type for this port is <tt class="LITERAL">dialup</tt>. The port is <tt
class="LITERAL">on</tt> and is <tt class="LITERAL">insecure</tt>---meaning <tt
class="USERNAME">root</tt> logins on the port are not allowed. For dialin ports like this
one, use the <tt class="DEVICENAME">ttyd<tt class="REPLACEABLE"><i>X</i></tt></tt>
entry.</p>

<p>It is common practice to use <tt class="LITERAL">dialup</tt> as the terminal type.
Many users set up in their <tt class="FILENAME">.profile</tt> or <tt
class="FILENAME">.login</tt> files a prompt for the actual terminal type if the starting
type is dialup. The example shows the port as insecure. To become <tt
class="USERNAME">root</tt> on this port, you have to login as a regular user, then <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">su</span>(1)</span></a> to become <tt
class="USERNAME">root</tt>. If you use <tt class="LITERAL">secure</tt> then <tt
class="USERNAME">root</tt> can login in directly.</p>

<p>After making modifications to <tt class="FILENAME">/etc/ttys</tt>, you need to send a
hangup or <acronym class="ACRONYM">HUP</acronym> signal to the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> process:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">kill -HUP 1</kbd>
</pre>

<p>This forces the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> process to
reread <tt class="FILENAME">/etc/ttys</tt>. The init process will then start getty
processes on all <tt class="LITERAL">on</tt> ports. You can find out if logins are
available for your port by typing</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">ps -ax | grep '[t]tyd1'</kbd>
</pre>

<p>You should see something like:</p>

<pre class="PROGRAMLISTING">
747 ??  I      0:00.04 /usr/libexec/getty std.57600 ttyd1
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DUMB-TERMINAL" name="DUMB-TERMINAL"></a><b>15.9.</b> How can I connect a dumb
terminal to my FreeBSD box?</p>
</div>

<div class="ANSWER">
<p><b></b>If you are using another computer as a terminal into your FreeBSD system, get a
null modem cable to go between the two serial ports. If you are using an actual terminal,
see its accompanying instructions.</p>

<p>Then, modify <tt class="FILENAME">/etc/ttys</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ttys</span>(5)</span></a>), like above.
For example, if you are hooking up a WYSE-50 terminal to the fifth serial port, use an
entry like this:</p>

<pre class="PROGRAMLISTING">
ttyd4 "/usr/libexec/getty std.38400" wyse50 on secure
</pre>

<p>This example shows that the port on <tt class="DEVICENAME">/dev/ttyd4</tt> has a
wyse50 terminal connected at 38400 bps with no parity (<tt class="LITERAL">std.38400</tt>
from <tt class="FILENAME">/etc/gettytab</tt>, see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gettytab</span>(5)</span></a>) and <tt
class="USERNAME">root</tt> logins are allowed (<tt class="LITERAL">secure</tt>).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CANNOT-TIP" name="CANNOT-TIP"></a><b>15.10.</b> Why can I not run <tt
class="COMMAND">tip</tt> or <tt class="COMMAND">cu</tt>?</p>
</div>

<div class="ANSWER">
<p><b></b>On your system, the programs <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cu</span>(1)</span></a> are probably
executable only by <tt class="USERNAME">uucp</tt> and group <tt
class="GROUPNAME">dialer</tt>. You can use the group <tt class="GROUPNAME">dialer</tt> to
control who has access to your modem or remote systems. Just add yourself to group
dialer.</p>

<p>Alternatively, you can let everyone on your system run <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cu</span>(1)</span></a> by typing:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod 4511 /usr/bin/cu</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">chmod 4511 /usr/bin/tip</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="HAYES-UNSUPPORTED" name="HAYES-UNSUPPORTED"></a><b>15.11.</b> My stock Hayes
modem is not supported---what can I do?</p>
</div>

<div class="ANSWER">
<p><b></b>Actually, the man page for <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> is out of date.
There is a generic Hayes dialer already built in. Just use <tt
class="LITERAL">at=hayes</tt> in your <tt class="FILENAME">/etc/remote</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">remote</span>(5)</span></a>) file.</p>

<p>The Hayes driver is not smart enough to recognize some of the advanced features of
newer modems---messages like <tt class="LITERAL">BUSY</tt>, <tt class="LITERAL">NO
DIALTONE</tt>, or <tt class="LITERAL">CONNECT 115200</tt> will just confuse it. You
should turn those messages off when you use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> (using <tt
class="LITERAL">ATX0&amp;W</tt>).</p>

<p>Also, the dial timeout for <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> is 60 seconds.
Your modem should use something less, or else tip will think there is a communication
problem. Try <tt class="LITERAL">ATS7=45&amp;W</tt>.</p>

<p>Actually, as shipped <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> does not yet
support it fully. The solution is to edit the file <tt class="FILENAME">tipconf.h</tt> in
the directory <tt class="FILENAME">/usr/src/usr.bin/tip/tip</tt>. Obviously you need the
source distribution to do this.</p>

<p>Edit the line <tt class="LITERAL">#define HAYES 0</tt> to <tt class="LITERAL">#define
HAYES 1</tt>. Then <tt class="COMMAND">make</tt> and <tt class="COMMAND">make
install</tt>. Everything works nicely after that.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DIRECT-AT" name="DIRECT-AT"></a><b>15.12.</b> How am I expected to enter these
AT commands?</p>
</div>

<div class="ANSWER">
<p><b></b>Make what is called a “direct” entry in your <tt
class="FILENAME">/etc/remote</tt> file (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">remote</span>(5)</span></a>). For
example, if your modem is hooked up to the first serial port, <tt
class="DEVICENAME">/dev/cuaa0</tt>, then put in the following line:</p>

<pre class="PROGRAMLISTING">
cuaa0:dv=/dev/cuaa0:br#19200:pa=none
</pre>

<p>Use the highest bps rate your modem supports in the br capability. Then, type <tt
class="COMMAND">tip <tt class="DEVICENAME">cuaa0</tt></tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a>) and you will
be connected to your modem.</p>

<p>If there is no <tt class="DEVICENAME">/dev/cuaa0</tt> on your system, do this:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV cuaa0</kbd>
</pre>

<p>Or use cu as <tt class="USERNAME">root</tt> with the following command:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cu -l<tt
class="REPLACEABLE"><i>line</i></tt> -s<tt class="REPLACEABLE"><i>speed</i></tt></kbd>
</pre>

<p>with <tt class="REPLACEABLE"><i>line</i></tt> being the serial port (e.g. <tt
class="DEVICENAME">/dev/cuaa0</tt>) and <tt class="REPLACEABLE"><i>speed</i></tt> being
the speed (e.g.<tt class="LITERAL">57600</tt>). When you are done entering the AT
commands hit <tt class="LITERAL">~.</tt> to exit.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="GT-FAILURE" name="GT-FAILURE"></a><b>15.13.</b> Why does the <tt
class="LITERAL">&lt;@&gt;</tt> sign for the pn capability not work?</p>
</div>

<div class="ANSWER">
<p><b></b>The <tt class="LITERAL">&lt;@&gt;</tt> sign in the phone number capability
tells tip to look in <tt class="FILENAME">/etc/phones</tt> for a phone number. But the
<tt class="LITERAL">&lt;@&gt;</tt> sign is also a special character in capability files
like <tt class="FILENAME">/etc/remote</tt>. Escape it with a backslash:</p>

<pre class="PROGRAMLISTING">
pn=\@
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DIAL-COMMAND-LINE" name="DIAL-COMMAND-LINE"></a><b>15.14.</b> How can I dial a
phone number on the command line?</p>
</div>

<div class="ANSWER">
<p><b></b>Put what is called a “generic” entry in your <tt
class="FILENAME">/etc/remote</tt> file (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">remote</span>(5)</span></a>). For
example:</p>

<pre class="PROGRAMLISTING">
tip115200|Dial any phone number at 115200 bps:\
        :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600 bps:\
        :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:
</pre>

<p>Then you can do something like <tt class="COMMAND">tip -115200 5551234</tt>. If you
prefer <a href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cu</span>(1)</span></a> over <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a>, use a generic
cu entry:</p>

<pre class="PROGRAMLISTING">
cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:
</pre>

<p>and type <tt class="COMMAND">cu 5551234 -s 115200</tt>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SET-BPS" name="SET-BPS"></a><b>15.15.</b> Do I have to type in the bps rate
every time I do that?</p>
</div>

<div class="ANSWER">
<p><b></b>Put in an entry for <tt class="LITERAL">tip1200</tt> or <tt
class="LITERAL">cu1200</tt>, but go ahead and use whatever bps rate is appropriate with
the br capability. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> thinks a good
default is 1200 bps which is why it looks for a <tt class="LITERAL">tip1200</tt> entry.
You do not have to use 1200 bps, though.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TERMINAL-SERVER" name="TERMINAL-SERVER"></a><b>15.16.</b> How can I more easily
access a number of hosts through a terminal server?</p>
</div>

<div class="ANSWER">
<p><b></b>Rather than waiting until you are connected and typing <tt
class="LITERAL">CONNECT <tt class="REPLACEABLE"><i>host</i></tt></tt> each time, use
tip's <tt class="LITERAL">cm</tt> capability. For example, these entries in <tt
class="FILENAME">/etc/remote</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">remote</span>(5)</span></a>):</p>

<pre class="PROGRAMLISTING">
pain|pain.deep13.com|Forrester's machine:\
        :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank's machine:\
        :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cuaa2:br#38400:at=hayes:du:pa=none:pn=5551234:
</pre>

<p>will let you type <tt class="COMMAND">tip pain</tt> or <tt class="COMMAND">tip
muffin</tt> to connect to the hosts <tt class="HOSTID">pain</tt> or <tt
class="HOSTID">muffin</tt>; and <tt class="COMMAND">tip deep13</tt> to get to the
terminal server.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TIP-MULTILINE" name="TIP-MULTILINE"></a><b>15.17.</b> Can tip try more than one
line for each site?</p>
</div>

<div class="ANSWER">
<p><b></b>This is often a problem where a university has several modem lines and several
thousand students trying to use them...</p>

<p>Make an entry for your university in <tt class="FILENAME">/etc/remote</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">remote</span>(5)</span></a>) and use <tt
class="LITERAL">&lt;\@&gt;</tt> for the <tt class="LITERAL">pn</tt> capability:</p>

<pre class="PROGRAMLISTING">
big-university:\
        :pn=\@:tc=dialout
dialout:\
        :dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:
</pre>

<p>Then, list the phone numbers for the university in <tt
class="FILENAME">/etc/phones</tt> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=phones&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">phones</span>(5)</span></a>):</p>

<pre class="PROGRAMLISTING">
big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114
</pre>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> will try each
one in the listed order, then give up. If you want to keep retrying, run <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> in a while
loop.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MULTI-CONTROLP" name="MULTI-CONTROLP"></a><b>15.18.</b> Why do I have to hit
CTRL+P twice to send CTRL+P once?</p>
</div>

<div class="ANSWER">
<p><b></b>CTRL+P is the default “force” character, used to tell <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> that the next
character is literal data. You can set the force character to any other character with
the <tt class="LITERAL">~s</tt> escape, which means “set a variable”.</p>

<p>Type <tt class="LITERAL">~sforce=<tt class="REPLACEABLE"><i>single-char</i></tt></tt>
followed by a newline. <tt class="REPLACEABLE"><i>single-char</i></tt> is any single
character. If you leave out <tt class="REPLACEABLE"><i>single-char</i></tt>, then the
force character is the nul character, which you can get by typing CTRL+2 or CTRL+SPACE. A
pretty good value for <tt class="REPLACEABLE"><i>single-char</i></tt> is SHIFT+CTRL+6,
which I have seen only used on some terminal servers.</p>

<p>You can have the force character be whatever you want by specifying the following in
your <tt class="FILENAME">$HOME/.tiprc</tt> file:</p>

<pre class="PROGRAMLISTING">
force=<tt class="REPLACEABLE"><i>single-char</i></tt>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UPPERCASE" name="UPPERCASE"></a><b>15.19.</b> Why is everything I type suddenly
in UPPER CASE?</p>
</div>

<div class="ANSWER">
<p><b></b>You must have pressed CTRL+A, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tip</span>(1)</span></a> “raise
character”, specially designed for people with broken caps-lock keys. Use <tt
class="LITERAL">~s</tt> as above and set the variable “raisechar” to something
reasonable. In fact, you can set it to the same as the force character, if you never
expect to use either of these features.</p>

<p>Here is a sample .tiprc file perfect for Emacs users who need to type CTRL+2 and
CTRL+A a lot:</p>

<pre class="PROGRAMLISTING">
force=^^
raisechar=^^
</pre>

<p>The ^^ is SHIFT+CTRL+6.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TIP-FILETRANSFER" name="TIP-FILETRANSFER"></a><b>15.20.</b> How can I do file
transfers with <tt class="COMMAND">tip</tt>?</p>
</div>

<div class="ANSWER">
<p><b></b>If you are talking to another Unix system, you can send and receive files with
<tt class="LITERAL">~p</tt> (put) and <tt class="LITERAL">~t</tt> (take). These commands
run <a href="http://www.FreeBSD.org/cgi/man.cgi?query=cat&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cat</span>(1)</span></a> and <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=echo&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">echo</span>(1)</span></a> on the remote
system to accept and send files. The syntax is:</p>

<pre class="PROGRAMLISTING">
~p &lt;local-file&gt; [&lt;remote-file&gt;]
~t &lt;remote-file&gt; [&lt;local-file&gt;]
</pre>

<p>There is no error checking, so you probably should use another protocol, like
zmodem.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ZMODEM-TIP" name="ZMODEM-TIP"></a><b>15.21.</b> How can I run zmodem with <b
class="APPLICATION">tip</b>?</p>
</div>

<div class="ANSWER">
<p><b></b>First, install one of the zmodem programs from the ports collection (such as
one of the two from the comms category, <b class="APPLICATION">lrzsz</b> or <b
class="APPLICATION">rzsz</b>.</p>

<p>To receive files, start the sending program on the remote end. Then, press enter and
type <tt class="LITERAL">~C rz</tt> (or <tt class="LITERAL">~C lrz</tt> if you installed
<b class="APPLICATION">lrzsz</b>) to begin receiving them locally.</p>

<p>To send files, start the receiving program on the remote end. Then, press enter and
type <tt class="LITERAL">~C sz <tt class="REPLACEABLE"><i>files</i></tt></tt> (or <tt
class="LITERAL">~C lsz <tt class="REPLACEABLE"><i>files</i></tt></tt>) to send them to
the remote system.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CANNOT-FIND-SERIAL" name="CANNOT-FIND-SERIAL"></a><b>15.22.</b> Why does
FreeBSD not find my serial ports, even when the settings are correct?</p>
</div>

<div class="ANSWER">
<p><b></b>Motherboards and cards with Acer UARTs do not probe properly under the FreeBSD
sio probe. Obtain a patch from <a href="http://www.lemis.com/serial-port-patch.html"
target="_top">www.lemis.com</a> to fix your problem.</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="MISC" name="MISC"></a>Chapter 16 其它各式各樣的問題</h1>

<div class="QANDASET">
<dl>
<dt>16.1. <a href="#MORE-SWAP">為甚麼 FreeBSD 用的置換(swap)空間比 Linux 多？</a></dt>

<dt>16.2. <a href="#TOP-FREEMEM">即使我只有運行少數程式，為什麼 <tt
class="COMMAND">top</tt> 顯示出 來的剩餘記憶體還是很少？</a></dt>

<dt>16.3. <a href="#AOUT-ELF">為甚麼要用(甚麼是) a.out 和 ELF 執行檔格式？</a></dt>

<dt>16.4. <a href="#BINARY-FORMATS">是的, 但是,
為什麼會有這麼多不同格式的執行檔存在呢?</a></dt>

<dt>16.5. <a
href="#CHMOD-SYMLINKS">為甚麼chmod不會改變符號連結(symlink)的存取權限？</a></dt>

<dt>16.6. <a href="#LOGIN-8CHAR">為什麼在 FreeBSD 2.2.x 及更早的版本中，登入名稱(login
names) 被限制在八個字元以下呢？</a></dt>

<dt>16.7. <a href="#DOS-BINARIES">我能在FreeBSD下執行DOS程式嗎？</a></dt>

<dt>16.8. <a
href="#TRANSLATION">如果要把FreeBSD文件翻譯成我的母語，我需要作什麼？</a></dt>

<dt>16.9. <a href="#FREEBSD-MAIL-BOUNCES">為什麼我寄到 FreeBSD.org
相關地址的電子郵件都被退回了呢？</a></dt>

<dt>16.10. <a href="#FREE-ACCOUNT">我可以在哪裡找到一個免費的FreeBSD帳號？</a></dt>

<dt>16.11. <a href="#SUP-DEFINE">什麼是 <tt
class="COMMAND">sup</tt>，我該如何使用它？</a></dt>

<dt>16.12. <a href="#DAEMON-NAME">這個可愛的小紅人的名字是什麼？</a></dt>

<dt>16.13. <a href="#USE-BEASTIE">我能使用BSD的小惡魔圖案嗎？</a></dt>

<dt>16.14. <a href="#DAEMON-IMAGES">你有任何的 BSD 小惡魔圖案可以讓我使用嗎？</a></dt>

<dt>16.15. <a
href="#GLOSSARY">我在文件、郵遞論壇上，常會看到一些縮寫字、技術字彙，這些可以去哪邊查呢？</a></dt>

<dt>16.16. <a href="#BIKESHED-PAINTING">為什麼我該在意腳踏車棚的顏色？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MORE-SWAP" name="MORE-SWAP"></a><b>16.1.</b> 為甚麼 FreeBSD
用的置換(swap)空間比 Linux 多？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD僅是看起來置換空間(swap)用的比Linux多而已。在事實上，
並不然。主要的差異是在於，FreeBSD積極的將閒置無用的主記憶體內容
推入置換空間(swap)中，以使得主記憶體可以更為有效率的被使用。而
Linux的策略是將置換空間(swap)用來作為解決記憶體問題的最終手段。
較頻繁的使用置換空間(swap)。是一種更有效率的使用主記憶體的手段。</p>

<p>註：當一方面FreeBSD積極的使用置換空間(swap)的同時，你必需注
意到，FreeBSD並不會任意的將所有的東西都推入置換空間(swap)中。如此，
你才不會在一夜宿醉起床後發現，整個系統都被倒進了置換空間(swap)之中。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TOP-FREEMEM" name="TOP-FREEMEM"></a><b>16.2.</b> 即使我只有運行少數程式，為什麼
<tt class="COMMAND">top</tt> 顯示出 來的剩餘記憶體還是很少？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單的答案是，所有未使用到的閒置記憶體都是被浪費的記憶體，
任何未被你的程式所利用到的記憶體將被核心(kernel)用來當 作磁碟快取(disk
cache)。而這種記憶體被 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a> 標記為 <tt
class="LITERAL">閒置的(Inact)</tt>，<tt class="LITERAL">快取(Cache)</tt>， 以及 <tt
class="LITERAL">緩衝區(Buf)</tt>，並負責在各個不同的位置負責
暫存資料。被暫存(cached)的資料代表系統不需要去存取較慢的磁碟裝置
就可以得到資料，如此，可以提升系統的效能。總而言之，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a> 顯示出較少的
<tt class="LITERAL">閒置(Free)</tt> 記憶體是好的，只要顯示 出來的值不是 <tt
class="LITERAL">非常</tt> 的低。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="AOUT-ELF" name="AOUT-ELF"></a><b>16.3.</b> 為甚麼要用(甚麼是) a.out 和 ELF
執行檔格式？</p>
</div>

<div class="ANSWER">
<p><b></b>要了解為什麼Freebsd使用 <tt class="FILENAME">ELF</tt> 格式，你有必
要先認識一下三種在目前 Unix 系統中最被廣泛應用到的執行檔格式：</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 在 FreeBSD 3.x 之前，FreeBSD 使用 a.out 格式。</p>
</blockquote>
</div>

<ul>
<li>
<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">a.out</span>(5)</span></a></p>

<p>這是最早，同是也是 “最典型” 的Unix目的檔
格式。這種格式的檔案使用一種短且緊密的檔頭，同時，伴隨著一 個魔術數字用來辨識格式。(參考
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">a.out</span>(5)</span></a>
有更多詳細的說 明)。它包含有三個節區： .text .data 及 .bss 加上一個符號表 及字串表。</p>
</li>

<li>
<p><acronym class="ACRONYM">COFF</acronym></p>

<p>SVR3目的檔格式。檔頭包含了一個節區表，所以可以具備比 .text .data .bss 還多的節區。</p>
</li>

<li>
<p><acronym class="ACRONYM">ELF</acronym></p>

<p>ELF為 <acronym class="ACRONYM">COFF</acronym> 格式的後繼者，主要的特徵為
可以具有複數節區段，並可以使用32-bits或是64-bits的數值。 主要的缺點為： <acronym
class="ACRONYM">ELF</acronym> 格式是在每個系統中只 會有一種 ABI
的假設為前題被設計出來的。但是，在事實上，這個 假設錯的離譜。因為，縱使在商用的 SYSV
世界裡，也至少有 SVR4， Solaris 和 SCO 三種 ABI。</p>

<p>譯註：ABI(Application Binary Interface)。如果一定要翻譯， 就叫它 <span
class="emphasis"><i class="EMPHASIS">應用程式二進位介面</i></span> 好了。 ABI被發
展出來的用意，是為了促使在相同CPU所發展出來的應用程式，能夠
在不同的系統上，作到二元檔(Binary Code)相容。比方說， <acronym
class="ACRONYM">Sun</acronym> 所提出的 <acronym class="ACRONYM">Solaris ABI</acronym>
，保證執行檔能夠在相同 CPU 的 Solaris 系統上執行，另一個例子是 Windows 系統。同屬於 Intel
x86 版本的執行檔能夠自由的在Windows 9x/me及Windows NT/2k/XP之間執行。</p>

<p>FreeBSD提供一個公用程式將程式所需的ABI資訊烙上，藉此試著 去解決這個問題。請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">brandelf</span>(1)</span></a>
以取得更多資訊。i</p>
</li>
</ul>

<p>FreeBSD 來自 “傳統” 的陣營。在傳統上，FreeBSD都 使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">a.out</span>(5)</span></a>
格式，這樣的技術在好幾代的 BSD 都被證明是可靠的。
雖然，在FreeBSD上可以建立以及正確的執行原生 <acronym class="ACRONYM">ELF</acronym>
格式檔案(包含核心)。然而, FreeBSD在一開始反對將預設格式轉換為 ELF，
為什麼呢？當Linux開始痛苦的轉換至 <acronym class="ACRONYM">ELF</acronym> 格式時，
並非是為了要逃離 <tt class="FILENAME">a.out</tt> 格式。相反的，這是因 為之前
Linux的共享函式庫(shared libraries)採用以跳躍表格
(jump-table)為基礎的技術去設計。這是一種讓發展者感到困擾，且非常
難以使用，不具足夠彈性的方法。既然，已經存在的 <acronym class="ACRONYM">ELF</acronym>
工具提供了共享函式庫(shared libraries)的解 決方案，而且，那看起來是個
“前衛的方法”，因此，所需 的轉換代價就可接受因而轉換。</p>

<p>在FreeBSD的狀況中，我們的共享函式庫(shared libraries)機制和 <b
class="APPLICATION">SunOS</b> 的型式非常相近，且易於使用。然而， 從 3.0 開始，FreeBSD
正式將 <acronym class="ACRONYM">ELF</acronym> 改為預設格式。 雖然，<tt
class="FILENAME">a.out</tt> 格式依舊如以往般的好，但是，我們 編譯工具的撰寫者，GNU
的成員，他們中止了對 <tt class="FILENAME">a.out</tt> 格式的支援與維護。在這種狀況下，迫使
我們必須自行維護另一份版本的 compiler 和 linker，也使得我們無法 從最新的 GNU
發展成果中獲得好處。此外，對 ISO-C++ 的需求，尤其是
建構子(constructors)和解構子(destructors)，也帶動未來版本中對 <acronym
class="ACRONYM">ELF</acronym> 的原生支援。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BINARY-FORMATS" name="BINARY-FORMATS"></a><b>16.4.</b> 是的, 但是,
為什麼會有這麼多不同格式的執行檔存在呢?</p>
</div>

<div class="ANSWER">
<p><b></b>在黑暗而遙遠的過去，僅有簡陋的硬體存在。而因為硬體簡陋，當然也
只能執行小而簡單的系統。a.out 格式是基於那個時代所需要，而被創造
出來的(例如像PDP-11)。在這之後，許多人試著將 Unix 移植到其他平台 時，他們也保留了 a.out
格式的執行檔。因為，這對早期的 Motorola 68k， VAXen 之類的系統已經足夠使用了。</p>

<p>然而，人並不會滿足於現狀。一些聰明的硬體工程師想到了，如果能 讓軟體多處理一些事，那
CPU 的電晶體數就能少一點，並且跑得更快。要 在這種新式的硬體上工作(現在稱為RISC)，<tt
class="FILENAME">a.out</tt>
這種格式就不合適了。基於這樣的現實所需，更多的執行檔格式被發展出
來，以提供比簡單且受到許多限制的 <tt class="FILENAME">a.out</tt> 格式
更好的效能。比方像是 <acronym class="ACRONYM">COFF</acronym>， <acronym
class="ACRONYM">ECOFF</acronym>，已及一些較不為人所周知的格式紛紛被創造
出來。但是，這些格式都已達到各自的極限，直到有一天 <acronym class="ACRONYM">ELF</acronym>
的出現。</p>

<p>此外，當程式的體積越來越大，而磁碟空間和主記憶體相對來說都較 小時，共享函式庫(shared
libraries)的觀念被發展出來了。在這同時， 虛擬記憶體系統(VM
System)也變得越來越精巧。當每一種進步都在 <tt
class="FILENAME">a.out</tt>格式上被發展出來時，它的可用性也同時變
得越來越低。另外，人們還希望程式能在執行期間動態載入，或是將已經
執行過且沒有用的初始化程式碼丟棄，藉以節省更多的記憶。程式語言在
這個時期也便得更精巧，人們也希望在 main 之前自動的執行更多的東西。
因此，許多繁雜且另人嘆為觀止的技巧被用在 <tt class="FILENAME">a.out</tt>
格式上去解決這些問題。但是，由於 <tt class="FILENAME">a.out</tt> 格式
先天的限制，要解決這些問題必需付出更多的代價及時間成本，並讓程式 的複雜度大為提升。而
<acronym class="ACRONYM">ELF</acronym> 格式可以一舉解決這一
切問題。但是，要將整個系統從根本轉換過去，將會有不短的陣痛期，因 此， <acronym
class="ACRONYM">ELF</acronym>格式將會有一陣子與 <tt class="FILENAME">a.out</tt>
並存。</p>

<p>然而，隨著時間的過去，FreeBSD的 build tools 演化成平行的兩個
支線(尤其是組譯器和載入器)。FreeBSD這條路加進了共享函式庫 (shared
libraries)並修正了一些錯誤。而原來發展這些程式的 GNU 成員
則為了因應現況，重寫了這些程式，以更簡單的方式對跨平台編譯 (building cross
compilers)，以及多種格式 (plugging in different formats) 作出了支援。許多人想作出以
FreeBSD 為目的平台的跨平台編譯器。但不幸的是，FreeBSD 的 as 和 ld 不能作 這項工作。新的
GNU 工具程式加入了跨平台編譯 (Cross Compiler)， <acronym
class="ACRONYM">ELF</acronym>格式支援，共享函式庫(shared libraries)， C++ 的擴充...
等等。此外，許多廠商以 <acronym class="ACRONYM">ELF</acronym> 格式
發行其產品，如果這些東西能在 FreeBSD 上執行的話當然是最好的。既然， 能夠執行 <acronym
class="ACRONYM">ELF</acronym> 格式的執行檔了，為什麼還須要 <tt
class="FILENAME">a.out</tt> 呢？它已經是一匹垂垂老矣的馬了，在竭力
盡忠的奉獻這麼多年之後，該是讓它在牧場肥沃的草地上好好休息的時候 了。</p>

<p><acronym class="ACRONYM">ELF</acronym> 格式比 a.out 具有更良好的展現能力，並
且在底層系統中具有更多的可擴展性。<acronym class="ACRONYM">ELF</acronym> 工具程式
更容易被維護，且提供跨平台編譯的支援，這一點對很多人來說是很重要 的。<acronym
class="ACRONYM">ELF</acronym> 格式可能比 a.out 慢一點，但是其差異非
常難測量出來。這兩者間還有許多細節上的不同，比方說分頁對應的方式，
程式碼初始化的方法...等等。這些並不是很重要，但是，兩者就是不同。 以後，GENERIC
核心(kernel)將會移除對 <tt class="FILENAME">a.out</tt> 格式。當不在有執行傳統 <tt
class="FILENAME">a.out</tt> 程式的須要時， 將會從核心(kernel)中移除。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CHMOD-SYMLINKS" name="CHMOD-SYMLINKS"></a><b>16.5.</b>
為甚麼chmod不會改變符號連結(symlink)的存取權限？</p>
</div>

<div class="ANSWER">
<p><b></b>Symlinks 本身並沒有存取權限，同時，在預設的狀況下， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a> 將不會跟隨著
symlinks 去改便目標檔案的存取權限。因此， 如果你有一個檔案 <tt
class="FILENAME">foo</tt>，同時，有一個 symlink <tt class="FILENAME">bar</tt>
指向這個檔案，以下這個命令將永遠會成功 的被執行。</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">chmod g-w bar</kbd>
</pre>

<p>然而，在 <tt class="FILENAME">foo</tt> 上的存取權限將不會被改 變。</p>

<p>你必需使用 <code class="OPTION">-H</code> 或是將 <code class="OPTION">-L</code> 與
<code class="OPTION">-R</code> 選項一起使用，參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a> 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=symlink&amp;sektion=7"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">symlink</span>(7)</span></a>
以取得更多的資訊。</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> 使用選項 <code class="OPTION">-R</code> 會讓 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a> 以 <acronym
class="ACRONYM">遞迴(RECURSIVE)</acronym> 的方式工作。當你把 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a>
用在目錄或是連結到目錄的符號連結時更要小心。
如果你要改變一個符號連結參考到的目錄之存取權限 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a> ，
且注意不要加上任何選項，並且在 symlink 的結尾加上斜線 (<tt
class="FILENAME">/</tt>)。舉例來說，如果 <tt class="FILENAME">foo</tt> 連結到目錄 <tt
class="FILENAME">bar</tt>， 而你要更改 <tt class="FILENAME">foo</tt> (實際上是 <tt
class="FILENAME">bar</tt>)，那就使用：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">chmod 555 foo/</kbd>
</pre>

<p>結尾的斜線會使得 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">chmod</span>(1)</span></a> 改變 <tt
class="FILENAME">foo</tt> 所指向的目錄 <tt class="FILENAME">bar</tt> 的權限。</p>
</blockquote>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LOGIN-8CHAR" name="LOGIN-8CHAR"></a><b>16.6.</b> 為什麼在 FreeBSD 2.2.x
及更早的版本中，登入名稱(login names) 被限制在八個字元以下呢？</p>
</div>

<div class="ANSWER">
<p><b></b>你可能認為修改 <tt class="LITERAL">UT_NAMESIZE</tt> 後在重新編譯整個
系統是很容易的事。而且在這之後，每件事都可以運作的很好。不幸的是，
有許多的程式和工具(包含系統工具)把數字寫死在程式裡頭(並非總是 <tt class="LITERAL">8</tt>
或 <tt class="LITERAL">9</tt>，有時可能是古怪的 <tt class="LITERAL">15</tt> 或 <tt
class="LITERAL">20</tt>)。這不僅僅是會將
你的系統記錄檔弄壞而已(來自於變動長度和固定長度記錄的差異)，同時 也會破壞 Sun 的 NIS
Client 的運作。同時，和其他的Unix系統之間也 有可能會產生未知的問題。</p>

<p>在FreeBSD 3.0 及之後的版本，帳號的最大長度增加到16個字元，
同時，那些將長度寫死的程式也被找出來並作了適當的修正。正因為影響
系統的範圍很廣，所以直到3.0版之後才算大致修正完成。</p>

<p>如果你有自信在出問題的時後能自行解決，你可以利用下面的方法讓
較早期的版本支援較長的帳號。首先，修改 <tt class="FILENAME">/usr/include/utmp.h</tt>
中的UT_NAMESIZE。 然後，你必須把 <tt class="FILENAME">/usr/include/sys/param.h</tt> 中的
MAXLOGNAME 改成跟 UT_NAMESIZE 相同。最後，如果你是從原始程 式建立系統, 別忘了
/usr/include 每次都會被更新。 修改 /usr/src/.. 中適當的檔案。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DOS-BINARIES" name="DOS-BINARIES"></a><b>16.7.</b>
我能在FreeBSD下執行DOS程式嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的，自3.0版起你可以使用BSDI的 <b class="APPLICATION">doscmd</b> DOS
模擬器，如果你對這個東西 有興趣，或是想加入發展行列，請寄一封電子郵件到 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation"
target="_top">FreeBSD-emulation mailing list</a> 。</p>

<p>對於3.0之前的系統，在 ports 中有一套軟體可以模儗 8088，並提
供足夠的BIOS中斷服務以執行DOS文字模式的程式，這套軟體叫做 <b
class="APPLICATION">pcemu</b>，同時，運行它須要 X Windows(由XFree86提供)。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="TRANSLATION" name="TRANSLATION"></a><b>16.8.</b>
如果要把FreeBSD文件翻譯成我的母語，我需要作什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>參閱FreeBSD文件中的 <a href="../fdp-primer/translations.html"
target="_top">翻譯常見問答</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FREEBSD-MAIL-BOUNCES" name="FREEBSD-MAIL-BOUNCES"></a><b>16.9.</b> 為什麼我寄到
FreeBSD.org 相關地址的電子郵件都被退回了呢？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD.org 的郵件系統對於進來的郵件採取嚴格的檢查，並且退回
所有設定不正確，或是潛在的垃圾郵件。你的郵件被退回可能是因為下列 原因所引起：</p>

<ul>
<li>
<p>這封電子郵件來自已知的垃圾郵件區域或是IP中。</p>

<p>FreeBSD郵件伺服器將拒絕接收已知的垃圾郵件來源的電子郵件。
如果提供你網路服務的公司或是網域中有產生過垃圾郵件或是有垃圾
郵件轉播站，請你換一個服務提供者，或是乾脆放棄。</p>
</li>

<li>
<p>電子郵件的本文僅有HTML。</p>

<p>郵件應該已純文字格式發送，請設定你的電子郵件軟體送出純文 字格式。</p>
</li>

<li>
<p>FreeBSD的郵件處理程式無法由IP反查送件主機的IP。</p>

<p>設置 DNS 反查是接受一台主機郵件的一個標準要求，請為您的郵件 主機設置 DNS
反查。許多提供家庭網路服務 (DSL，cable，dialup 等)
的公司並不提供這樣的服務。在這種情況下，請透過網路服務提供者的
郵件伺服器送出您的電子郵件。</p>
</li>

<li>
<p>在 SMTP 使用 EHLO/HELO 命令時所給予的 hostname 無法被解析到 一個 IP 位置。</p>

<p>在郵件被接受以前，一個充分合格，且可被解析的主機名稱在 SMTP
協定的對談中是必要的。如果你沒有在 DNS 伺服器中登記你
的主機名稱，請透過網路服務提供者的郵件伺服器送出您的電子郵 件。</p>
</li>

<li>
<p>你的訊息中夾帶著一個 message ID 以 “localhost” 字串結束。</p>

<p>某些郵件軟體產生某些不正確的 message ID，這將不被接受。
你必需更改設定讓你的郵件軟體產生正確的 message ID，如果這無
法解決，考慮說服你的郵件軟體作者更新程式以處理這個問題。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FREE-ACCOUNT" name="FREE-ACCOUNT"></a><b>16.10.</b>
我可以在哪裡找到一個免費的FreeBSD帳號？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD的伺服器本身不提供任何對外的服務，其他的單位中， 有人提供開放的 Unix
系統服務。其中有些可能要收取些許費用。</p>

<p><a href="http://www.arbornet.org/" target="_top">Arbornet, Inc</a>， 也被稱為
M-Net，自 1983 年起就開始提供 Unix 系統服務。一開始， 他們使用 Altos 並執行 System
III。他們在 1991 年轉換系統成為 BSD/OS。在 2000 年六月，他們再度更換成為 FreeBSD。M-Net
能讓使 用者透過 SSH 及 telnet 連線到主機，並提供完整的 FreeBSD 軟體以 供使用。然而，M-Net
作為一個非盈利組織運行，存取權只限於成員和 贊助者，M-Net 也提供 BBS
系統和網路聊天服務。</p>

<p><a href="http://www.grex.org/" target="_top">Grex</a> 提供了非常 類似 M-Net
的服務，包括了 BBS 系統和網路聊天。然而，機器是使用 Sun 4M，並執行 SunOS。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUP-DEFINE" name="SUP-DEFINE"></a><b>16.11.</b> 什麼是 <tt
class="COMMAND">sup</tt>，我該如何使用它？</p>
</div>

<div class="ANSWER">
<p><b></b> <a href="http://www.FreeBSD.org/cgi/ports.cgi?^sup" target="_top">SUP</a>
的意思是 Software Update Protocol，由 CMU 發展，
用來維持整個發展的同步。我們利用它保持遠端的站台和原始站台之間 的同步工作。</p>

<p>然而，SUP 在頻寬的使用上並不太友善，同時，目前也不再使用了。
目前建議維持原始碼同步更新的方法是 <a href="../handbook/synching.html#CVSUP"
target="_top">CVSup</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DAEMON-NAME" name="DAEMON-NAME"></a><b>16.12.</b>
這個可愛的小紅人的名字是什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>似乎，他並沒有一個正式的名字，姑且就稱其為 “BSD 小惡魔”
吧。如果你執意要使用一個名字。那就叫他 “小動物(beastie)” 吧。註：“beastie” 在讀音上跟
“BSD” 很接近。</p>

<p>你可以在BSD小惡魔的 <a href="http://www.mckusick.com/beastie/index.html"
target="_top">主頁</a> 上取得更多的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USE-BEASTIE" name="USE-BEASTIE"></a><b>16.13.</b>
我能使用BSD的小惡魔圖案嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>也許吧，我也不確定。BSD小惡魔圖案的版權是屬於馬歇爾蘇格蘭教會 (Marshall Kirk
McKusick)所擁有。你可以試著去查看網頁<a
href="http://www.mckusick.com/beastie/mainpage/copyright.html"
target="_top">敘述關於BSD小惡魔肖像</a> 以取得更詳細關於使用他的資訊。</p>

<p>總歸的來說，如果你純粹為了自己想要鑑賞，那麼，你可以自由的使
用肖像。如果你是個人使用，只要情況適當，應該都會被許可。如果你想
在商業上使用，則你必需聯繫蘇格蘭教會(Kirk McKusick)以取得許可。
如果你需要更進一步詳細的資訊，請參考 <a href="http://www.mckusick.com/beastie/index.html"
target="_top">BSD小惡魔的首頁</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DAEMON-IMAGES" name="DAEMON-IMAGES"></a><b>16.14.</b> 你有任何的 BSD
小惡魔圖案可以讓我使用嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>你可以在 <tt class="FILENAME">/usr/share/examples/BSD_daemon/</tt> 發現 eps 及
Xfig 兩種格式的圖檔。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="GLOSSARY" name="GLOSSARY"></a><b>16.15.</b>
我在文件、郵遞論壇上，常會看到一些縮寫字、技術字彙，這些可以去哪邊查呢？</p>
</div>

<div class="ANSWER">
<p><b></b>請參閱 <a
href="http://www.FreeBSD.org/doc/zh_TW.Big5/books/handbook/freebsd-glossary.html"
target="_top">FreeBSD 字彙表</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BIKESHED-PAINTING" name="BIKESHED-PAINTING"></a><b>16.16.</b>
為什麼我該在意腳踏車棚的顏色？</p>
</div>

<div class="ANSWER">
<p><b></b>一個最短最短的答案是，你不該在意。稍微長一點的答案是，雖然
你有能力自己去建造一座腳踏車棚，但是，這不代表因為你不喜歡現在這
個腳踏車棚的顏色，就中止他的建築。這個比喻的意思是，你不需要去爭論
每一個細項特徵，只因為你有辦法去作它。某些人的評論是，雜音的產生度
對變化的複雜性相反地比例。</p>

<p>更長且較完整的答案是，在經過長時間爭論關於是否該將 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sleep&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sleep</span>(1)</span></a>
的秒參數移除，Poul-Henning Kamp <code class="EMAIL">&#60;<a
href="mailto:phk@FreeBSD.org">phk@FreeBSD.org</a>&#62;</code>發表了一篇長論 “<a
href="http://www.FreeBSD.org/cgi/getmsg.cgi?fetch=506636+517178+/usr/local/www/db/text/1999/freebsd-hackers/19991003.freebsd-hackers"
 target="_top">一座自行車蓬 (任何顏色的)在青脆的草地上...</a>”。
那則訊息被適當的部分被引用在下面。</p>

<a id="AEN6292" name="AEN6292"></a>
<table border="0" width="100%" cellspacing="0" cellpadding="0" class="BLOCKQUOTE">
<tr>
<td width="10%" valign="TOP">&nbsp;</td>
<td valign="TOP">
<p>“什麼是關於這個腳踏車棚?” 部分的人這樣的詢 問我。</p>

<p>這是一個非常長遠的故事，否則就是一個古老的故事。但是事實上， 這個故事非常的短。C.
Northcote Parkinson 在1960年代初期寫了一本 書，書名為 “Parkinson's
Law”，在這本書中包含了很多 具有卓見的動態管理學。</p>

<p>[引述一點在這本書上的評論]</p>

<p>在這個被捲入腳踏車棚案的特殊例子，主要的要素是核能發電場，
我想，這足以說明這本書的年齡。</p>

<p>Parkinson 展示了你該如何在董事會中贏得贊同去建造一座數百萬
或甚至十億美元的核能發電場，但是，如果你想要去建造一座腳踏車棚，
你將會被糾纏在無窮無盡的討論之中。</p>

<p>Parkinson 解釋，這是因為一個核能發電場是這樣的廣闊，這樣的
昂貴，並且這樣的複雜，以至於人們無法掌握它，而並非嘗試，他們急
切的希望有人能夠幫他們處理並解決所有瑣碎的細項。 Richard P. Feynmann
給了一些有趣，且非常一針見血的論點，在他的 書提到了 Los Alamos 的例子。</p>

<p>另一方面，任何人都能自己在週末組裝一座腳踏車棚出來，並且仍
有閒聊可以觀賞電視及玩遊戲。因此，無論你作了多麼完善的準備，也
不管你提出的方案是多麼的合宜，某些人仍將抓住機會跑出來告訴你，
他正在作同樣的事，正在付出努力，他就在 <span class="emphasis"><i
class="EMPHASIS">這裡</i></span>。</p>

<p>在丹麥，我們稱這個叫作 “虎死留皮(setting your fingerprint)”。它關係到你
個人的驕傲和聲望，這關係到你是否可以指著某地後對著別人說 “這裡! 這是<span
class="emphasis"><i class="EMPHASIS">我</i></span>作的。”
這是政治人物很重要的一個特徵。但是，時機是大多數人民所賦與的。
想想那些留在水泥地上的腳印吧。</p>
</td>
<td width="10%" valign="TOP">&nbsp;</td>
</tr>

<tr>
<td colspan="2" align="RIGHT" valign="TOP">--<span class="ATTRIBUTION">Poul-Henning Kamp
<code class="EMAIL">&#60;<a href="mailto:phk@FreeBSD.org">phk@FreeBSD.org</a>&#62;</code>
on freebsd-hackers, October 2, 1999</span></td>
<td width="10%">&nbsp;</td>
</tr>
</table>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="FUNNIES" name="FUNNIES"></a>Chapter 17 The FreeBSD Funnies</h1>

Edward Chuang

<div class="QANDASET">
<dl>
<dt>17.1. <a href="#VERY-VERY-COOL">How cool is FreeBSD？</a></dt>

<dt>17.2. <a href="#LETMEOUTOFHERE">誰在我的記憶體插槽中沙沙作響？？</a></dt>

<dt>17.3. <a href="#CHANGING-LIGHTBULBS">要幾個 FreeBSD hacker
才能換掉一個電燈泡？</a></dt>

<dt>17.4. <a href="#DEV-NULL">寫入 <tt class="FILENAME">/dev/null</tt>
的資料跑到哪裡去了？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="VERY-VERY-COOL" name="VERY-VERY-COOL"></a><b>17.1.</b> How cool is
FreeBSD？</p>
</div>

<div class="ANSWER">
<p><b></b>問：有人做過 FreeBSD 執行時的溫度測試嗎？ 我知道 Linux 比 DOS 涼，但沒聽人提過
FreeBSD，似乎很熱。</p>

<p>答：沒有，但是在味覺上有做過無數次測試。我們矇上自願受試者的 眼睛，事先再給他們服用
250 毫克的 LSD-25 迷幻藥。35% 的受試者說 FreeBSD 嘗起來像橘子，而 Linux
則是紫色的榛樹果實。據我所知，沒
有一組提到溫度上特別的差異。後來發現，有太多受試者在測試時夢遊走
出房間影響到數據，最後只得放棄整個調查。我想大部份的受試者現在在 Apple 工作，繼 Drag and
Drop 之後，研究全新的 “Scratch and Sniff” 圖形界面。It's a funny old business we're
in！</p>

<p>不開玩笑了，FreeBSD 和 Linux 都使用 <acronym class="ACRONYM">HLT</acronym> (halt)
指令以在系統閒置時降低電力的使用也減少了熱的產生。如果有 設定 APM (automatic power
management)，FreeBSD 也可以讓 CPU 進 入低電力模式。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LETMEOUTOFHERE" name="LETMEOUTOFHERE"></a><b>17.2.</b>
誰在我的記憶體插槽中沙沙作響？？</p>
</div>

<div class="ANSWER">
<p><b></b>問：FreeBSD 編譯核心時有做甚麼 “奇特” 的事
讓記憶體沙沙作響嗎？當編譯時(還有開機時確認軟碟後的短暫時間)，
也種似乎來自記憶體插槽的奇怪聲音。</p>

<p>答：是的！在 BSD 的文件中你會常常看到 “背後靈”，
大部份的人都不知道那是一種實際存在的精神體 --- 掌控著你的電腦。
你聽到的聲音是這些背後靈以高音口哨在溝通怎樣做許多的系統管理工 作。</p>

<p>如果這些聲音很困擾你，來自 DOS 的 <tt class="COMMAND">fdisk /mbr</tt>
就能擺脫，但如果有相反的效果 也不要驚訝。事實上，如果在儀式中聽到 Bill Gates
恐怖的聲音從內 建的喇叭傳來，馬上逃而且不要回頭！ 從 BSD 背後靈不平衡的影響中 解放，DOS
和 Windows 背後靈通常都能重新控制整台機器並對你的靈
魂詛咒。如果有選擇，我想我寧願習慣奇怪的聲音。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CHANGING-LIGHTBULBS" name="CHANGING-LIGHTBULBS"></a><b>17.3.</b> 要幾個 FreeBSD
hacker 才能換掉一個電燈泡？</p>
</div>

<div class="ANSWER">
<p><b></b>一千一百七十二個：</p>

<p>二十三個在 -current 上抱怨看不到光了；</p>

<p>四個宣稱這是設定上的問題，所以像這樣的 email 應該放在 -questions；</p>

<p>三個 submit PR，其中一個送錯到 doc 下，並且內容只 有”這裡好暗”；</p>

<p>一個 commit 尚未測試的電燈泡，造成不能 buildworld， 五分鐘後他把原來的燈泡換回來；</p>

<p>八個煽起 flame war，責怪送出 PR 的人沒有包括 patch；</p>

<p>五個埋怨 buildworld 爛掉了；</p>

<p>三十一個說 buildworld 可以用，不能用的人一定是 cvsup 的 時機不對；</p>

<p>一個把換成新燈泡的 patch 丟到 -hackers 上；</p>

<p>一個說他三年前就做出了 patch，但送到 -current 後卻被忽略掉， 所以他對整個 PR
系統有很不好的印象。此外，他也認為拿出的新燈泡無 法反光；</p>

<p>三十七個咆哮說電燈泡不屬於基本系統的一部份，所以 committer 不能不先諮詢整個 Community
的意見就這樣做下去。還有，-core 到底和這件事有什麼關係？！</p>

<p>兩百人抱怨換燈泡之後，腳踏車棚的顏色變得好奇怪；</p>

<p>三個指出，用來換燈泡的 patch 不符合 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=style&amp;sektion=9"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">style</span>(9)</span></a> 的規定；</p>

<p>十七個埋怨拿出來的新燈泡為什麼是用 GPL；</p>

<p>五百八十六人陷入一場 flame war，在 GPL、BSD、MIT、NPL 各個 license 和 FSF
某位不具名創辦人士個人衛生之間，比較彼此 的優勢；</p>

<p>七個將這一串討論的不同部份分別移到 -chat 和 -advocacy；</p>

<p>就算提出的新燈泡比舊的暗，還是有一個把它 commit 進來；</p>

<p>兩個換回原先的燈泡，並且留下極為憤怒的 commit 訊息。他們認為 與其讓 FreeBSD
用暗燈泡，還不如乾脆待在黑暗中算了；</p>

<p>四十六人對取消不用暗燈泡這件事大聲疾呼，要求 -core 立刻提出澄清；</p>

<p>十一個要求換成小一點的電燈泡，以便未來 FreeBSD 如果移植到 電子雞上後會更為方便；</p>

<p>七十三人抱怨 -hackers 和 -chat 上的 SNR，藉 unsubscribe 來表示抗議；</p>

<p>十三個送出”unsubscribe”、”我要如何 unsubscribe”或”拜託把 我從 list
名單中刪掉”，信的最後面則是一般由 majordomo 加上去 的 footer；</p>

<p>當每個人忙於彼此叫罵時，有個傢伙趁沒人注意，把可以用的燈泡偷 偷換上去；</p>

<p>三十一個指出如果用 TenDRA 編譯新的燈泡，會比舊的來得亮
0.364%（雖然燈泡會被編譯成正六面體），所以 FreeBSD 內定的編譯器 應該是 TenDRA，而不是
EGCS；</p>

<p>有個人說新燈泡缺乏美感；</p>

<p>九個人（包括原先送 PR 的人）問”什麼是 MFC？”；</p>

<p>五十七個抱怨自從換了燈泡後，兩個星期都沒有光出現。</p>

<p><span class="emphasis"><i class="EMPHASIS">Nik Clayton <code class="EMAIL">&#60;<a
href="mailto:nik@FreeBSD.org">nik@FreeBSD.org</a>&#62;</code> 補注：</i></span></p>

<p><span class="emphasis"><i class="EMPHASIS">剛看到時，我快笑翻了。</i></span></p>

<p><span class="emphasis"><i
class="EMPHASIS">然後想到，”等一下，不是應該還有一個要將這些記在 list
上嗎？”</i></span></p>

<p><span class="emphasis"><i class="EMPHASIS">接著終於了解我的使命 :-)</i></span></p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEV-NULL" name="DEV-NULL"></a><b>17.4.</b> 寫入 <tt
class="FILENAME">/dev/null</tt> 的資料跑到哪裡去了？</p>
</div>

<div class="ANSWER">
<p><b></b>在 CPU 中有一種特別的資料散熱器，利用排出散熱片/風扇組合時，
轉換成熱能．這就是為什麼 CPU 冷卻日趨重要的原因；當人們使用更快
的處理器時，他們變成不在乎有越來越多他們的資料都送進了 <tt
class="FILENAME">/dev/null</tt> ，而使的他們的 CPU 過熱． 如果你刪除了 <tt
class="FILENAME">/dev/null</tt> (那將會有效的關閉 CPU 的資料散熱器) 你的 CPU
也許會降低工作溫度，但是你的系統將
會很快的像是罹患了便秘伴隨著所有超出的資料開始變成行為不正常。
如果你有快速的網路連線，你可以利用讀取 <tt class="FILENAME">/dev/random</tt>
並將他隨意傳送至各處， 來降低你 CPU 的溫度；然而你將陷入使你網路連線或 <tt
class="FILENAME">/</tt> 有過熱的風險或是惹惱你的 ISP，
大部分的資料最終將會在他們的設備上轉換成熱，不過他們通常都擁有
好的散熱，所以如果你做的不太過分，應該是沒什麼大不了的。</p>

<p><span class="emphasis"><i class="EMPHASIS">Paul Robinson 補充：</i></span></p>

<p>中文版 FAQ 注：以下短文屬於美式幽默，恐翻譯後造成語焉不詳，
語意不通的情形，固保留原汁原味讓讀者自行品嚐。</p>

<p>There are other methods. As every good sysadmin knows, it is part of standard practise
to send data to the screen of interesting variety to keep all the pixies that make up
your picture happy. Screen pixies (commonly mis-typed or re-named as 'pixels') are
categorised by the type of hat they wear (red, green or blue) and will hide or appear
(thereby showing the colour of their hat) whenever they receive a little piece of food.
Video cards turn data into pixie-food, and then send them to the pixies - the more
expensive the card, the better the food, so the better behaved the pixies are. They also
need constant simulation - this is why screen savers exist.</p>

<p>To take your suggestions further, you could just throw the random data to console,
thereby letting the pixies consume it. This causes no heat to be produced at all, keeps
the pixies happy and gets rid of your data quite quickly, even if it does make things
look a bit messy on your screen.</p>

<p>Incidentally, as an ex-admin of a large ISP who experienced many problems attempting
to maintain a stable temperature in a server room, I would strongly discourage people
sending the data they do not want out to the network. The fairies who do the packet
switching and routing get annoyed by it as well.</p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="ADVANCED" name="ADVANCED"></a>Chapter 18 進階主題</h1>

En-Ran Zhou

<div class="QANDASET">
<dl>
<dt>18.1. <a href="#LEARN-ADVANCED">如何能學習更多有關 FreeBSD 內部的東西？</a></dt>

<dt>18.2. <a href="#HOW-TO-CONTRIBUTE">如何能為 FreeBSD 出一份力？</a></dt>

<dt>18.3. <a href="#DEFINE-SNAP-RELEASE">SNAP 和 RELEASE 是什麼？</a></dt>

<dt>18.4. <a href="#CUSTREL">要怎麼作出自己的 release？</a></dt>

<dt>18.5. <a href="#MAKEWORLD-CLOBBERS">為什麼 <tt class="COMMAND">make world</tt>
把原來裝的 binary 檔 都換掉了？</a></dt>

<dt>18.6. <a href="#BUS-SPEED-DEFAULTED">在系統開機時，出現 “(bus speed
defaulted)”。</a></dt>

<dt>18.7. <a href="#CTM">在網路頻寬有限的情況下，我也可以跟上 current 的發展嗎？</a></dt>

<dt>18.8. <a href="#SPLIT-240K">是怎麼把發行版本中的檔案切成一個個 240k
的小檔案的？</a></dt>

<dt>18.9. <a href="#SUBMITTING-KERNEL-EXTENSIONS">我在 kernel
中加了新功能，我要把它寄給誰？</a></dt>

<dt>18.10. <a href="#PNP-INITIALIZE">ISA 的隨插即用卡是如何偵測及初始化的？</a></dt>

<dt>18.11. <a href="#MAJOR-NUMBERS">我為某設備寫了驅動程式，能不能給它一個 major
number？</a></dt>

<dt>18.12. <a href="#ALTERNATE-DIRECTORY-LAYOUT">關於更動目錄放置的原則？</a></dt>

<dt>18.13. <a href="#KERNEL-PANIC-TROUBLESHOOTING">如何在 kernel panics
時得到最多的資訊？</a></dt>

<dt>18.14. <a href="#DLSYM-FAILURE">為什麼 dlsym() 不能操作 ELF 執行檔？</a></dt>

<dt>18.15. <a href="#CHANGE-KERNEL-ADDRESS-SPACE">我要如何增加或減少 kernel
能定址的空間？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="LEARN-ADVANCED" name="LEARN-ADVANCED"></a><b>18.1.</b> 如何能學習更多有關
FreeBSD 內部的東西？</p>
</div>

<div class="ANSWER">
<p><b></b>目前市面上還沒有探討作業系統內部的書是專為 FreeBSD 而寫 的。然而，許多一般的
UNIX 知識都可以直接應用在 FreeBSD 上。附 加一點，仍然有相關的書是專為 BSD 所寫的。</p>

<p>請參考 Handbook 的<a href="../handbook/bibliography-osinternals.html"
target="_top">作業系統內部之參考書目</a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="HOW-TO-CONTRIBUTE" name="HOW-TO-CONTRIBUTE"></a><b>18.2.</b> 如何能為 FreeBSD
出一份力？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考這篇文章 <a href="../../articles/contributing/article.html"
target="_top">Contributing to FreeBSD</a> 來提供您的建議。如果您能幫忙那就更歡迎了！</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEFINE-SNAP-RELEASE" name="DEFINE-SNAP-RELEASE"></a><b>18.3.</b> SNAP 和
RELEASE 是什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>目前有三個活躍/半活躍的分支在 FreeBSD 的 <a
href="http://www.FreeBSD.org/cgi/cvsweb.cgi" target="_top">CVS Repository</a> (RELENG_2
分支一年大概更動兩次，正是為何只有三個活躍的發展中分支)：</p>

<ul>
<li>
<p><tt class="LITERAL">RELENG_2_2</tt> 即 <span class="emphasis"><i
class="EMPHASIS">2.2-STABLE</i></span></p>
</li>

<li>
<p><tt class="LITERAL">RELENG_3</tt> 即 <span class="emphasis"><i
class="EMPHASIS">3.X-STABLE</i></span></p>
</li>

<li>
<p><tt class="LITERAL">RELENG_4</tt> 即 <span class="emphasis"><i
class="EMPHASIS">4-STABLE</i></span></p>
</li>

<li>
<p><tt class="LITERAL">HEAD</tt> 即 <span class="emphasis"><i
class="EMPHASIS">-CURRENT</i></span> 即 <span class="emphasis"><i
class="EMPHASIS">5.0-CURRENT</i></span></p>
</li>
</ul>

<p>如同其他兩個，<tt class="LITERAL">HEAD</tt> 並不是真正 的 branch
tag，它只是一個符號常數，指向 “<span class="emphasis"><i class="EMPHASIS">current
(尚未分支的發展中版本)</i></span>” 簡記為 “-CURRENT”。</p>

<p>以現在來說，“-CURRENT” 朝向 5.0 發展，而 <tt class="LITERAL">4-STABLE</tt>
分支，也就是 <code class="SYMBOL">RELENG_4</code>，在 2000 年三月從 “-CURRENT”
分支出來。</p>

<p><tt class="LITERAL">2.2-STABLE</tt> 這個分支，也就是 <code
class="SYMBOL">RELENG_2_2</code>，在 1996 年十一月從 -CURRENT 分支出
來，這個分支目前已經完全退休了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CUSTREL" name="CUSTREL"></a><b>18.4.</b> 要怎麼作出自己的 release？</p>
</div>

<div class="ANSWER">
<p><b></b>請參照 <a href="../../articles/releng/article.html" target="_top">Release
工程</a> 文章說明。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKEWORLD-CLOBBERS" name="MAKEWORLD-CLOBBERS"></a><b>18.5.</b> 為什麼 <tt
class="COMMAND">make world</tt> 把原來裝的 binary 檔 都換掉了？</p>
</div>

<div class="ANSWER">
<p><b></b>沒錯，就是這樣子。如名字所示，<tt class="COMMAND">make world</tt>
會重新編譯系統內建的每個 binary 檔，這樣在結束時就可確定有個一致
且乾淨的環境(所以要花上好一段時間)。</p>

<p>在執行 <tt class="COMMAND">make world</tt> 或 <tt class="COMMAND">make install</tt>
時，如果有設 <tt class="LITERAL">DESTDIR</tt> 這個環境變數，新產生的 binary 將會裝在 <tt
class="LITERAL">${DESTDIR}</tt> 下同樣的目錄樹中。但在某些修改 shared library 和重建
binary 的無特定情況下，這樣做可能會使 <tt class="COMMAND">make world</tt> 失敗。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BUS-SPEED-DEFAULTED" name="BUS-SPEED-DEFAULTED"></a><b>18.6.</b>
在系統開機時，出現 “(bus speed defaulted)”。</p>
</div>

<div class="ANSWER">
<p><b></b>Adaptec 1542 SCSI 卡允許使用者用軟體調整匯流排的存取速度。 早期的 1542
驅動程式試圖將它設成可用的最快速度，但後來發現在一 些機器上不能用，所以現在要在 kernel
設定中加 <code class="SYMBOL">TUNE_1542</code> 這個選項來啟動這個功能。在支援的機器
上用這個選項會使硬碟存取更快，但在不支援的機器上有可能會毀掉資料。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CTM" name="CTM"></a><b>18.7.</b> 在網路頻寬有限的情況下，我也可以跟上 current
的發展嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的，藉著 <a href="../handbook/synching.html#CTM" target="_top">CTM</a>
您就可以<tt class="LITERAL">不用</tt>下載全部的程式碼。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SPLIT-240K" name="SPLIT-240K"></a><b>18.8.</b>
是怎麼把發行版本中的檔案切成一個個 240k 的小檔案的？</p>
</div>

<div class="ANSWER">
<p><b></b>以 BSD 為基礎的較新系統有個 <code class="OPTION">-b</code> 選項
可以把檔案以任意數目 byte 切開。</p>

<p>這裡是 <tt class="FILENAME">/usr/src/Makefile</tt> 中的一個 例子：</p>

<pre class="PROGRAMLISTING">
bin-tarball:
(cd ${DISTDIR}; \
tar cf - . \
gzip --no-name -9 -c | \
split -b 240640 - \
${RELEASEDIR}/tarballs/bindist/bin_tgz.)
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUBMITTING-KERNEL-EXTENSIONS"
name="SUBMITTING-KERNEL-EXTENSIONS"></a><b>18.9.</b> 我在 kernel
中加了新功能，我要把它寄給誰？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 <a href="../../articles/contributing/article.html"
target="_top">Contributing to FreeBSD</a> 中的文章，以了解要如何提供您的程式碼。</p>

<p>同時也謝謝您的關心！</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PNP-INITIALIZE" name="PNP-INITIALIZE"></a><b>18.10.</b> ISA
的隨插即用卡是如何偵測及初始化的？</p>
</div>

<div class="ANSWER">
<p><b></b>由 Frank Durda IV 所寫： <code class="EMAIL">&#60;<a
href="mailto:uhclem@nemesis.lonestar.org">uhclem@nemesis.lonestar.org</a>&#62;</code></p>

<p>簡單的說，當主機發出是否有 PnP 卡的詢問訊號時，所有的 PnP 卡 會在幾個固定的 I/O port
作回應。所以當偵測 PnP 的程式開始時，它 會先問有沒有 PnP 卡在，接著所有 PnP 卡會在它讀的
port 以自己的 型號 # 作回答，這樣偵測程式就會得到一個 wired-OR “yes”
的數字，其中至少會有一個 bit 是打開的。然後偵測程式會要求型號 (由
Microsoft/Intel指定)小於 X 的卡“離線”。再去看是 否還有卡回答同樣的詢問，如果得到 <tt
class="LITERAL">0</tt>，就表示沒 有型號大於 X 的卡。 現在程式會問是否有型號小於 <tt
class="LITERAL">X</tt> 的卡，如果有的話，程式再要型號大於 X-(limit/4) 的卡離線，然後重覆
上面的動作。用重複這種類似 semi-binary search 的方法，在某範圍內
找個幾次後，測程式最後會在機器中區分出所有的 PnP 卡，搜尋次數也 遠低於一個個找的 2^64
次。</p>

<p>一張卡的 ID 由兩個 32-bit(所以上面是 2&circ;64) + 8bit 偵錯碼 組成，第一個 32 bits
是用來區分各家廠商的。這些廠商從來沒有出來澄
清過，但看來應假設同一家出的不同種類的卡的廠商 ID 有可能不同。用 32 bits
只來表示不同廠商的想法實在有點過頭了。</p>

<p>第二個 32 bits 則是型號 #、乙太網路位址、或一些使這張卡獨特的 資料。除非第一個 32 bits
不同，否則廠商不可能作出第二個 32 bit 相
同的兩張卡。所以在一台機器中可以有同樣的好幾張卡，然而他們整個 64 bits
還是會都不一樣。</p>

<p>這兩個 32 bit 絕對不可以全為零，這才能使得最開始 binary search 中的 wired-OR
會得到一個非零數字。</p>

<p>一旦系統區分出所有卡的 ID，接著會經由同樣的 I/O port 一個個重
新啟動每張卡，接著找出已知介面卡所需的資源、有哪些中斷可以使用等
等。所有卡都會被掃描一次，來收集這些資料。</p>

<p>這些資訊接著和硬碟上的 ECU 檔案、或 MLB BIOS 裡的資料結合在一 起，通常是綜合 ECU 和
MLB 裡的 BIOS PnP 資料，這些週邊並不支援真正 的 PnP，然而偵測程式在檢查 BIOS 和 ECU
資料後，它可以避免 PnP 週邊 和那些偵測不到的相衝突。</p>

<p>接著再度拜訪這些 PnP 週邊，這次會把可用的 I/O、DMA、IRQ 和記憶
體映射的位址都指定給它們。這些週邊就會出現在所指定的地方，直到下一
次重新開機為止，不過也沒有人說不能把它們隨時移來移去。</p>

<p>上面有相當多的簡化，但你應該已經了解大致的過程。</p>

<p>Microsoft 把表示印表機狀態的幾個主要 port 拿來作 PnP，他們的
邏輯是沒有一張卡會在這些地方解碼作相反的 I/O cycles。但是我找到 一款早期仍在評估 PnP
提案時的 IBM 原廠 printer board，它的確去解 對這些狀態 port 的寫入資料，但是 MS
“說了就算”。所以 它們的確有對印表機狀態 port 寫入，還有讀取該位址 + <tt
class="LITERAL">0x800</tt>、和另一個在 <tt class="LITERAL">0x200</tt> 及 <tt
class="LITERAL">0x3ff</tt> 之間的 port。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAJOR-NUMBERS" name="MAJOR-NUMBERS"></a><b>18.11.</b>
我為某設備寫了驅動程式，能不能給它一個 major number？</p>
</div>

<div class="ANSWER">
<p><b></b>這要看你是否打算將這個驅動程式公開使用，如果是的話，請把它的
原始碼送一份給我們，還有 <tt class="FILENAME">files.i386</tt> 修改的 部份、kernel
設定檔樣本、以及用來產生設備檔的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">MAKEDEV</span>(8)</span></a>。
如果你不打算公開、或因為版權問題而不能公開的話，我們有特地保留 character major number 32
和 block major number 8 給這方面的使用，
直接用這兩個就好了。不論如何，我們都會很感激你能在 <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">FreeBSD
technical discussions mailing list</a> 發表驅動程式的消息。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ALTERNATE-DIRECTORY-LAYOUT" name="ALTERNATE-DIRECTORY-LAYOUT"></a><b>18.12.</b>
關於更動目錄放置的原則？</p>
</div>

<div class="ANSWER">
<p><b></b>在回答關於更動目錄放置的原則方面，我在 1983 年寫好目前的作法
後就沒有再改變過，這種方式是針對原先的 FFS 檔案系統，後來也沒有 對它作任何更動。它在避免
cylinder group 被填滿這方面做得相當成功， 但是就像有些人已經注意到，它和 find
就配合得不大好。大部份的檔案 系統是由那些用 depth first search(aka ftw) 產生的 archive
製造出 來，解出來的目錄 inode 會橫跨好幾個 cylinder group，如果以後要做 depth first
search 的話，這是最糟糕的情況之一。如果我們知道總共
會產生多少目錄的話，解法是在做任何存取/寫入動作之前，在每個 cylinder group
上先造出(所有目錄數/cylinder greoup 的數目)這麼多
的目錄。很明顯的，我們必須要有根據地去猜這 個數字，就算一個像 10
的很小固定數目也會使效率以級數成長。區分 restore (即解開上述的 archive)
和一般檔案操作的方法可以是(現在用的演算法可能要更敏感)： 如果一些目錄(最多 10 個)都在 10
秒內產 生的話，那麼就把這些目錄 聚集在同一個 cylinder group。不管怎樣，
我的經驗指出這是一個已經 充份實驗過的部份。</p>

<p>Kirk McKusick, September 1998</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KERNEL-PANIC-TROUBLESHOOTING"
name="KERNEL-PANIC-TROUBLESHOOTING"></a><b>18.13.</b> 如何在 kernel panics
時得到最多的資訊？</p>
</div>

<div class="ANSWER">
<p><b></b><span class="emphasis"><i class="EMPHASIS">[這節是從 Bill Paul <code
class="EMAIL">&#60;<a href="mailto:wpaul@FreeBSD.org">wpaul@FreeBSD.org</a>&#62;</code>
在 freebsd-current <a href="#MAILING">mailing list</a> 上發表的信中節錄， Dag-Erling C.
Sm&oslash;rgrav <code class="EMAIL">&#60;<a
href="mailto:des@FreeBSD.org">des@FreeBSD.org</a>&#62;</code>
修正了打字錯誤、再加上括弧裡的注解。]</i></span></p>

<pre class="PROGRAMLISTING">
From: Bill Paul &lt;wpaul@skynet.ctr.columbia.edu&gt;
Subject: Re: the fs fun never stops
To: Ben Rosengart
Date: Sun, 20 Sep 1998 15:22:50 -0400 (EDT)
Cc: current@FreeBSD.org
</pre>

<p><span class="emphasis"><i class="EMPHASIS">[Ben 發表了下面的 panic
訊息]</i></span></p>

<pre class="PROGRAMLISTING">
&gt; Fatal trap 12: page fault while in kernel mode
&gt; fault virtual address   = 0x40
&gt; fault code              = supervisor read, page not present
&gt; instruction pointer     = 0x8:0xf014a7e5
                                ^^^^^^^^^^
&gt; stack pointer           = 0x10:0xf4ed6f24
&gt; frame pointer           = 0x10:0xf4ed6f28
&gt; code segment            = base 0x0, limit 0xfffff, type 0x1b
&gt;                         = DPL 0, pres 1, def32 1, gran 1
&gt; processor eflags        = interrupt enabled, resume, IOPL = 0
&gt; current process         = 80 (mount)
&gt; interrupt mask          =
&gt; trap number             = 12
&gt; panic: page fault
</pre>

<p>當你看到像這樣的訊息時，只把它拷一份送上來是不夠的。我在上面 特地標明的 instruction
pointer 值相當重要，不幸的是它會因設定而 不同。換句話說，這個值會跟你用的 kernel image
檔而變動。如果是用 某個 snapshot 版本的 GENERIC kernel，也許其他人可以追蹤到出問題
的函式，但如果你是用自訂的 kernel，那麼只有 <span class="emphasis"><i
class="EMPHASIS">你</i></span>才能告訴我們問題出在那裡。</p>

<p>要做的事包括這些：</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>把 instruction pointer 的值記下來。注意在前面的 <tt class="LITERAL">0x8:</tt>
在這個情況中並不重要，我們要的是 <tt class="LITERAL">0xf0xxxxxx</tt>。</p>
</li>

<li class="STEP">
<p>當系統重新開機後，執行這道命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">nm -n /(造成 panic 的 kernel 檔案) | grep f0xxxxxx</kbd>
</pre>

其中 <tt class="LITERAL">f0xxxxxx</tt> 就是記下來的 instruction pointer
值。有可能不會剛好找到完整的這個字串， 這是因為 kernel symbol table 裡的各個 symbol
只是函式的進 入點，但 instruction pointer 所指的位址有可能是在函式內的
某一處，而不一定在開頭。所以如果找不到整個字串，那麼把 instruction pointer
值的最後一個數字拿掉，再試一次： 

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">nm -n /(造成 panic 的 kernel 檔案) | grep f0xxxxx</kbd>
</pre>

如果這樣也找不到，那就把另一個數字去掉再找，一直重複到找到 為止， 結果是一串可能造成
panic 的函式列表。這樣比直接找到 出問題的函式來得差，但至少好過什麼都沒有。<br />
<br />
</li>
</ol>
</div>

<p>我常常看到人們顯示一大片 panic 訊息，但很少看到有人花一點時間 把 instruction pointer
和 kernel symbol table 中的函式比較一下。</p>

<p>要追蹤出造成 panic 原因的最好方法是先做出 crash dump，然後用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a> 在上面做 stack
trace。</p>

<p>不管是那一種，我通常是用這個方法：</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>寫好 kernel 設定檔。如果你需要用 kernel debugger，在設 定檔中加上 <tt
class="LITERAL">options DDB</tt> 這個選項。
(當我懷疑有出現無窮迴圈時，通常會用這個來設定中斷點。)</p>
</li>

<li class="STEP">
<p>用 <tt class="COMMAND">config -g <tt class="REPLACEABLE"><i>KERNELCONFIG</i></tt></tt>
做出用來編譯的目錄。</p>
</li>

<li class="STEP">
<p><tt class="COMMAND">cd /sys/compile/ <tt class="REPLACEABLE"><i>KERNELCONFIG</i></tt>;
make</tt></p>
</li>

<li class="STEP">
<p>等待 kernel 編譯結束。</p>
</li>

<li class="STEP">
<p><tt class="COMMAND">make install</tt></p>
</li>

<li class="STEP">
<p>重新開機</p>
</li>
</ol>
</div>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> 將會製造出兩個
kernel。<tt class="FILENAME">kernel</tt> 還有 <tt class="FILENAME">kernel.debug</tt>。
<tt class="FILENAME">kernel</tt> 將會被安裝到 <tt class="FILENAME">/kernel</tt>，而 <tt
class="FILENAME">kernel.debug</tt> 可用來給 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a> 當作 debugging
symbols 的來源。</p>

<p>要確定能抓到 crash dump，先編輯 <tt class="FILENAME">/etc/rc.conf</tt> 將 <tt
class="LITERAL">dumpdev</tt> 指 到 swap 分割區。這樣 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a> 會用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dumpon&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dumpon</span>(8)</span></a> 來啟動 crash
dump，你也可以手動執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dumpon&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dumpon</span>(8)</span></a> 在 panic
之後， crash dump 可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=savecore&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">savecore</span>(8)</span></a>
存起來；如果 <tt class="FILENAME">/etc/rc.conf</tt> 裡有設 <tt
class="LITERAL">dumpdev</tt> 那麼重新開機後 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a> 會自動執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=savecore&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">savecore</span>(8)</span></a> 把 crash
dump 存在 <tt class="FILENAME">/var/crash</tt>。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> FreeBSD 的 crash dump 通常和機器裡的實際記憶體一樣大，就 像如果有 64MB
記憶體，crash dump 大小就是 64MB。所以要確定 <tt class="FILENAME">/var/crash</tt>
下有足夠的空間，或是可以手 動執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=savecore&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">savecore</span>(8)</span></a> 把 crash
dump 放到另一個空間較夠的 目錄下。另一種也許可以限制 crash dump 的方法，是在 kernel
設定檔中用 <tt class="LITERAL">options MAXMEM=(foo)</tt>，將 kernel
可用的記憶體限制在合理的大小。舉例來說，如果你有 128MB 的記憶 體，但是可以限制 kernel
只能用 16MB 的記憶體，這樣 crash dump 就是 16MB 而不是 128MB 了。</p>
</blockquote>
</div>

<p>一旦發現有了 crash dump，就可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a> 來做 stack
trace ，如下所示：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">gdb -k /sys/compile/KERNELCONFIG/kernel.debug /var/crash/vmcore.0</kbd>
<samp class="PROMPT">(gdb)</samp> <kbd class="USERINPUT">where</kbd>
</pre>

<p>要注意可能會出現好幾個螢幕的可用資訊，你可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=script&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">script</span>(1)</span></a>
把所有輸出都存起來。用包括所有 debug symbol 的 kernel 來除錯，這 樣應該可以直接顯示 panic
是發生在那一行。通常是由下往上讀 stack strace，這樣才能一個個追蹤出有哪些動作引到
crash。也可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a>
把各種變數或結構的內容印出來，以檢查系統 crash 時的 實際狀態。</p>

<p>好啦，如果你有第二台電腦而且有夠瘋狂，可以將 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a> 設定
成遠端除錯。這樣你可以在一台機器中用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a>
去除錯另一台裡的 kernel，可以執行的包括設定中斷點、在 kernel 原始碼中一步步執行等
等，就像在一般使用者程式上除錯一樣。由於沒有什麼機會為除錯而設置
兩台並鄰電腦，所以我還沒有這樣玩過。</p>

<p><span class="emphasis"><i class="EMPHASIS">[Bill 補充："我忘了提到一點：如果你有啟動
DDB 而 kernel 也已經進入除錯器，可以在 DDB 命令列下打 'panic'，強迫產生 panic (還有 crash
dump)。也有可能在 panic 階段時再進入除錯器， 如果這樣的話，輸入
'continue'，接著它就會完成 crash dump。" -ed]</i></span></p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DLSYM-FAILURE" name="DLSYM-FAILURE"></a><b>18.14.</b> 為什麼 dlsym() 不能操作
ELF 執行檔？</p>
</div>

<div class="ANSWER">
<p><b></b>在 ELF 一系列的工具中，內定是不會讓 dynamic linker 看到執行 檔裡定義了哪些
symbol。所以 <code class="FUNCTION">dlsym()</code> 沒有辦 法用藉由呼叫 <code
class="FUNCTION">dlopen(NULL, flags)</code> 取得的 handle，用它去搜尋有那些 symbol
一定會失敗。</p>

<p>如果你想要用 <code class="FUNCTION">dlsym()</code> 找出某個 process 的主執行檔中有哪些
symbol，則要在 link 時對 ELF linker (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ld&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ld</span>(1)</span></a>) 加上 <code
class="OPTION">-export-dynamic</code> 這個參數。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CHANGE-KERNEL-ADDRESS-SPACE"
name="CHANGE-KERNEL-ADDRESS-SPACE"></a><b>18.15.</b> 我要如何增加或減少 kernel
能定址的空間？</p>
</div>

<div class="ANSWER">
<p><b></b>預設值是，FreeBSD 3.x 的 kernel 可以定址的空間是 256 MB 而 FreeBSD 4.x 可以到 1
GB。如果是網路負荷相當重的伺服器 (例如大型 FTP 或 HTTP 伺服器)，你也許會發現 256 MB
可能不大夠。</p>

<p>所以，要如何增加定址空間呢？要從兩方面著手。首先首先告訴 kernel
本身要保留較大空間給自己。其次，既然是在定址空間的最上 面載入
kernel，所以還要調低載入的位址，才不會和前面定址的範圍 重疊。</p>

<p>增加 <tt class="FILENAME">src/sys/i386/include/pmap.h</tt> 裡的 <tt
class="LITERAL">NKPDE</tt> 就可以達成第一個目標。1 GB 的定址空間會 像這樣：</p>

<pre class="PROGRAMLISTING">
#ifndef NKPDE
#ifdef SMP
#define NKPDE                   254     /* addressable number of page tables/pde's */
#else
#define NKPDE                   255     /* addressable number of page tables/pde's */
#endif  /* SMP */
#endif
</pre>

<p>要算出 <tt class="LITERAL">NKPDE</tt> 的正確值，將想要的空間大小 (以 megabyte
為單位)除以 4，接著單 CPU 機器減 1， 雙 CPU 則是減 2。</p>

<p>要解決第二個問題，必須自行算出 kernel 被載入的位址：求出 0x100100000
減掉定址空間大小的值(以 byte 為單位)，如 1 GB 大小就是 0xc0100000。把<tt
class="FILENAME">src/sys/i386/conf/Makefile.i386</tt> 裡的 <code
class="SYMBOL">LOAD_ADDRESS</code> 設成這個值﹔接著在 <tt
class="FILENAME">src/sys/i386/conf/kernel.script</tt> 中，將 section 列表最前面的
location counter 設成相同的值，如下：</p>

<pre class="PROGRAMLISTING">
OUTPUT_FORMAT("elf32-i386", "elf32-i386", "elf32-i386")
OUTPUT_ARCH(i386)
ENTRY(btext)
SEARCH_DIR(/usr/lib); SEARCH_DIR(/usr/obj/elf/home/src/tmp/usr/i386-unknown-freebsdelf/lib);
SECTIONS
{
  /* Read-only sections, merged into text segment: */
  . = 0xc0100000 + SIZEOF_HEADERS;
  .interp     : { *(.interp)    }
</pre>

<p>然後重新編譯您的 kernel。您可能會在執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a>、<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a>
這類的程式時碰到問題﹔<tt class="COMMAND">make world</tt> 應該就可以解決 (或把改過的 <tt
class="FILENAME">pmap.h</tt> 複製到 <tt class="FILENAME">/usr/include/vm/</tt>
下，再手動編譯 <tt class="FILENAME">libkvm</tt>，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a> 還有 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a>)。</p>

<p>注意：kernel 所能定址的空間大小必須是 4 megabytes 的倍數。</p>

<p>[David Greenman <code class="EMAIL">&#60;<a
href="mailto:dg@FreeBSD.org">dg@FreeBSD.org</a>&#62;</code> 補充：<span
class="emphasis"><i class="EMPHASIS">我認為 kernel 定址空間大小應該要是 2
的乘冪，但不大確定這一點。舊的啟動程式會動到 high order address bits，記得它假設至少有
256 MB。]</i></span></p>
</div>
</div>
</div>
</div>

<div class="CHAPTER">
<hr />
<h1><a id="ACKNOWLEDGMENTS" name="ACKNOWLEDGMENTS"></a>Chapter 19 感謝</h1>

Vanilla Shu<a id="AEN6728" name="AEN6728"></a>
<table border="0" width="100%" cellspacing="0" cellpadding="0" class="BLOCKQUOTE">
<tr>
<td width="10%" valign="TOP">&nbsp;</td>
<td valign="TOP">
<p>假如您在這份 FAQ 中找到錯誤的地方，或是您想增加些甚麼， 請寫封信到 FAQ Maintainer
<code class="EMAIL">&#60;<a href="mailto:faq@FreeBSD.org">faq@FreeBSD.org</a>&#62;</code>
。我們非常感謝您的建議， 因為您的建議讓這份文件變得更好！</p>
</td>
<td width="10%" valign="TOP">&nbsp;</td>
</tr>

<tr>
<td colspan="2" align="RIGHT" valign="TOP">--<span class="ATTRIBUTION">FreeBSD Core
Team</span></td>
<td width="10%">&nbsp;</td>
</tr>
</table>

<div class="VARIABLELIST">
<dl>
<dt>Jordan K. Hubbard <code class="EMAIL">&#60;<a
href="mailto:jkh@FreeBSD.org">jkh@FreeBSD.org</a>&#62;</code></dt>

<dd>
<p>不停的更新過時的 FAQ</p>
</dd>

<dt>Doug White <code class="EMAIL">&#60;<a
href="mailto:dwhite@FreeBSD.org">dwhite@FreeBSD.org</a>&#62;</code></dt>

<dd>
<p>經常在 freebsd-questions 上回答問題</p>
</dd>

<dt>J&ouml;rg Wunsch <code class="EMAIL">&#60;<a
href="mailto:joerg@FreeBSD.org">joerg@FreeBSD.org</a>&#62;</code></dt>

<dd>
<p>經常在 Usenet 上回答問題</p>
</dd>

<dt>Garrett Wollman <code class="EMAIL">&#60;<a
href="mailto:wollman@FreeBSD.org">wollman@FreeBSD.org</a>&#62;</code></dt>

<dd>
<p>Networking and formatting</p>
</dd>

<dt>Jim Lowe</dt>

<dd>
<p>Multicast information</p>
</dd>

<dt>Peter da Silva <code class="EMAIL">&#60;<a
href="mailto:pds@FreeBSD.org">pds@FreeBSD.org</a>&#62;</code></dt>

<dd>
<p>FreeBSD FAQ 這份文件的打字苦工</p>
</dd>

<dt>The FreeBSD Team</dt>

<dd>
<p>Kvetching, moaning, submitting data</p>
</dd>
</dl>
</div>

<p>對於那些曾經對這份 FAQ 提供幫助，而我們沒提到的人們， 我們由衷的感謝您！</p>
</div>

<a id="BIBLIOGRAPHY" name="BIBLIOGRAPHY"></a>
<hr />
<h1><a id="BIBLIOGRAPHY" name="BIBLIOGRAPHY"></a>Bibliography</h1>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNLEASHED" name="BIBLIO-UNLEASHED"></a>
<p><i>FreeBSD Unleashed</i>, <span class="AUTHOR">Michael Urban</span> <span
class="AUTHOR">and Brian Tiemann</span>, Sams, 1st Edition, 992, October 2001, ISBN
0-67232-206-4.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44SYSMAN" name="BIBLIO-44SYSMAN"></a>
<p><i>4.4BSD System Manager's Manual</i>, Computer Systems Research Group, University of
California, Berkeley, O'Reilly and Associates, 1st Edition, June 1994, 804 pages, ISBN
1-56592-080-5.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44USERMAN" name="BIBLIO-44USERMAN"></a>
<p><i>4.4BSD User's Reference Manual</i>, Computer Systems Research Group, University of
California, Berkeley, O'Reilly and Associates, 1st Edition, June 1994, 905 pages, ISBN
1-56592-075-9.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44SUPPMAN" name="BIBLIO-44SUPPMAN"></a>
<p><i>4.4BSD User's Supplementary Documents</i>, Computer Systems Research Group,
University of California, Berkeley, O'Reilly and Associates, 1st Edition, June 1994, 712
pages, ISBN 1-56592-076-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44PROGMAN" name="BIBLIO-44PROGMAN"></a>
<p><i>4.4BSD Programmer's Reference Manual</i>, Computer Systems Research Group,
University of California, Berkeley, O'Reilly and Associates, 1st Edition, June 1994, 866
pages, ISBN 1-56592-078-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44PROGSUPP" name="BIBLIO-44PROGSUPP"></a>
<p><i>4.4BSD Programmer's Supplementary Documents</i>, Computer Systems Research Group,
University of California, Berkeley, O'Reilly and Associates, 1st Edition, June 1994, 596
pages, ISBN 1-56592-079-1.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-44KERNEL" name="BIBLIO-44KERNEL"></a>
<p><i>The Design and Implementation of the 4.4BSD Operating System</i>, <span
class="AUTHOR">M. K. McKusick,</span> <span class="AUTHOR">Kirk Marshall,</span> <span
class="AUTHOR">Keith Bostic,</span> <span class="AUTHOR">Michael J Karels,</span> <span
class="AUTHOR">and John Quarterman</span>, Addison-Wesley, Reading, 1996, ISBN
0-201-54979-4.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-FREEBSDKERNEL" name="BIBLIO-FREEBSDKERNEL"></a>
<p><i>The Design and Implementation of the FreeBSD Operating System</i>, <span
class="AUTHOR">M. K. McKusick</span> <span class="AUTHOR">and George V.
Neville-Neil</span>, Addison-Wesley, Boston, 2004, ISBN 0-201-70245-2.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-NEMETH3RD" name="BIBLIO-NEMETH3RD"></a>
<p><i>Unix System Administration Handbook</i>, <span class="AUTHOR">Evi Nemeth,</span>
<span class="AUTHOR">Garth Snyder,</span> <span class="AUTHOR">Scott Seebass,</span>
<span class="AUTHOR">Trent R. Hein,</span> <span class="AUTHOR">and John
Quarterman</span>, Prentice-Hall, 3rd edition, 2000, ISBN 0-13-020601-6.</p>
</div>

<div class="BIBLIOENTRY"><a id="LEHEY3RD" name="LEHEY3RD"></a>
<p><i>The Complete FreeBSD</i>, <span class="AUTHOR">Greg Lehey</span>, Walnut Creek, 3rd
edition, June 1999, 773 pages, ISBN 1-57176-246-9.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-HANDBOOK" name="BIBLIO-HANDBOOK"></a>
<p><i>The FreeBSD Handbook</i>, FreeBSD Documentation Project, BSDi, 1st Edition,
November 1999, 489 pages, ISBN 1-57176-241-8.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-MCKUSICK-1" name="BIBLIO-MCKUSICK-1"></a>
<p>[McKusick et al, 1994]&nbsp;<i>Berkeley Software Architecture Manual, 4.4BSD
Edition</i>, <span class="AUTHOR">M. K. McKusick,</span> <span class="AUTHOR">M. J.
Karels,</span> <span class="AUTHOR">S. J. Leffler,</span> <span class="AUTHOR">W. N.
Joy,</span> <span class="AUTHOR">and R. S. Faber</span>, 5:1-42.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-FBSDPC98" name="BIBLIO-JA-FBSDPC98"></a>
<p><i>FreeBSD for PC 98'ers (in Japanese)</i>, SHUWA System Co, LTD., ISBN 4-87966-468-5
C3055 P2900E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-FBSD" name="BIBLIO-JA-FBSD"></a>
<p><i>FreeBSD (in Japanese)</i>, CUTT, ISBN 4-906391-22-2.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-COMPINTRO" name="BIBLIO-JA-COMPINTRO"></a>
<p><i>Complete Introduction to FreeBSD (in Japanese)</i>, Shoeisha Co., Ltd, ISBN
4-88135-473-6 P3600E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-UNIXSTARTERKIT"
name="BIBLIO-JA-UNIXSTARTERKIT"></a>
<p><i>Personal UNIX Starter Kit FreeBSD (in Japanese)</i>, ASCII, ISBN 4-7561-1733-3
P3000E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-FBSDHB" name="BIBLIO-JA-FBSDHB"></a>
<p><i>FreeBSD Handbook (Japanese translation)</i>, ASCII, ISBN 4-7561-1580-2 P3800E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-GE-FBSDMITMETH" name="BIBLIO-GE-FBSDMITMETH"></a>
<p><i>FreeBSD mit Methode (in German)</i>, Computer und Literature Verlag/Vertrieb
Hanser, 1998, ISBN 3-932311-31-0.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-FBSDINSTANDUTIL"
name="BIBLIO-JA-FBSDINSTANDUTIL"></a>
<p><i>FreeBSD install and Utilization Manual (in Japanese)</i>, Mainichi Communications
Inc..</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-INDO-INTSERV" name="BIBLIO-INDO-INTSERV"></a>
<p><i>Building Internet Server with FreeBSD (in Indonesia Language)</i>, Elex Media
Komputindo, <span class="AUTHOR">Onno W Purbo</span>, <span class="AUTHOR">Dodi
Maryanto</span>, <span class="AUTHOR">Syahrial Hubbany</span>, <span
class="AUTHOR">Widjil Widodo</span>.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-FBSDCORPNETGUIDE"
name="BIBLIO-FBSDCORPNETGUIDE"></a>
<p><i>The FreeBSD Corporate Networker's Guide</i>, Addison-Wesley.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXNUTSHELL" name="BIBLIO-UNIXNUTSHELL"></a>
<p><i>UNIX in a Nutshell</i>, O'Reilly &amp; Associates, Inc., 1990, ISBN 093717520X.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-CANTFINDADMIN" name="BIBLIO-CANTFINDADMIN"></a>
<p><i>What You Need To Know When You Can't Find Your Unix System Administrator</i>,
O'Reilly &amp; Associates, Inc., 1995, <span class="AUTHOR">Linda Mui</span>, ISBN
1-56592-104-6.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JA-FBSDUSRREFMAN"
name="BIBLIO-JA-FBSDUSRREFMAN"></a>
<p><i>FreeBSD User's Reference Manual (Japanese translation)</i>, Mainichi Communications
Inc., Jpman Project, Japan FreeBSD Users Group, 1998, ISBN 4-8399-0088-4 P3800E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-NEWCOMEUNIX" name="BIBLIO-NEWCOMEUNIX"></a>
<p><i class="CITETITLE"><a href="http://unixhelp.ed.ac.uk/" target="_top">Online Guide
for newcomers to the UNIX environment</a></i>, <a href="http://www.ed.ac.uk/"
target="_top">Edinburgh University</a>.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-DNSANDBIND" name="BIBLIO-DNSANDBIND"></a>
<p><i>DNS and BIND</i>, O'Reilly &amp; Associates, Inc, ISBN 1-56592-512-2, <span
class="AUTHOR">Paul Albitz Albitz</span>, <span class="AUTHOR">Cricket Liu</span>, 1998,
3rd.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-SENDMAIL" name="BIBLIO-SENDMAIL"></a>
<p><i>Sendmail</i>, O'Reilly &amp; Associates, Inc, 1997, 2nd, <span class="AUTHOR">Brian
Costales</span>, ISBN 1-56592-222-0.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-ESSSYSADMIN" name="BIBLIO-ESSSYSADMIN"></a>
<p><i>Essential System Administration</i>, <span class="AUTHOR">&#198;leen Frisch</span>,
2nd, O'Reilly &amp; Associates, 1995, ISBN 1-56592-127-5.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-TCPIPNETWORKADMINISTRATION"
name="BIBLIO-TCPIPNETWORKADMINISTRATION"></a>
<p><i>TCP/IP Network Administration</i>, <span class="AUTHOR">Craig Hunt</span>, 2nd,
O'Reilly &amp; Associates, Inc, 1997, ISBN 1-56592-322-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-MANAGINGNFSANDNIS"
name="BIBLIO-MANAGINGNFSANDNIS"></a>
<p><i>Managing NFS and NIS</i>, <span class="AUTHOR">Hal Stern</span>, O'Reilly &amp;
Associates, Inc, 1991, ISBN 0-937175-75-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-JPMANPROJECTJFUG"
name="BIBLIO-JPMANPROJECTJFUG"></a>
<p><i class="CITETITLE"><a href="http://www.pc.mycom.co.jp/FreeBSD/sam.html"
target="_top">FreeBSD System Administration's Manual</a></i>, <a
href="http://www.jp.FreeBSD.org" target="_top">Jpman Project, Japan FreeBSD Users
Group</a>, <a href="http://www.pc.mycom.co.jp/" target="_top">Mainichi Communications
Inc.</a>, 1998, ISBN 4-8399-0109-0 P3300E.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-XWINSYSTOOLKIT" name="BIBLIO-XWINSYSTOOLKIT"></a>
<p><i>X Window System Toolkit</i>, Digital Press, <span class="AUTHOR">Paul
Asente</span>, ISBN 1-55558-051-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-CAREFMAN" name="BIBLIO-CAREFMAN"></a>
<p><i>C: A Reference Manual</i>, Prentice Hall, 1995, 4th, <span class="AUTHOR">Samuel P.
Harbison</span>, <span class="AUTHOR">Guy L. Jr. Steele</span>, ISBN 0-13-326224-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-THECPROGLANG" name="BIBLIO-THECPROGLANG"></a>
<p><i>The C Programming Language</i>, Prentice Hall, 1998, <span class="AUTHOR">Brian,
Kernighan and Dennis Ritchie</span>, ISBN 0-13-110362-9.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PORTINGUNIXSOFT"
name="BIBLIO-PORTINGUNIXSOFT"></a>
<p><i>Porting UNIX Software</i>, <span class="AUTHOR">Greg Lehey</span>, O'Reilly &amp;
Associates, Inc., 1995, ISBN 1-56592-126-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-THESTANDARDCLIBRARY"
name="BIBLIO-THESTANDARDCLIBRARY"></a>
<p><i>The Standard C Library</i>, Prentice Hall, 1992, <span class="AUTHOR">P. J.
Plauger</span>, ISBN 0-13-131509-9.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-ADVPROGINTHEUNIXENV"
name="BIBLIO-ADVPROGINTHEUNIXENV"></a>
<p><i>Advanced Programming in the UNIX Environment</i>, Addison-Wesley, 1992, <span
class="AUTHOR">W. Richard Stevens</span>, ISBN 0-201-56317-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXNETPROG" name="BIBLIO-UNIXNETPROG"></a>
<p><i>UNIX Network Programming</i>, <span class="AUTHOR">W. Richard Stevens</span>,
Prentice Hall, 1998, 2nd, ISBN 0-13-490012-X.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-WRITESERIALDRIVERFORUNIX"
name="BIBLIO-WRITESERIALDRIVERFORUNIX"></a>
<p><i>Writing Serial Drivers for UNIX</i>, <span class="AUTHOR">Bill Wells</span>,
December 1994, Dr. Dobb's Journal, pp68-71, pp97-99.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXSYSARCH" name="BIBLIO-UNIXSYSARCH"></a>
<p><i>UNIX System Architecture</i>, Prentice-Hall, Inc, 1990, <span
class="AUTHOR">Prabhat K. Andleigh</span>, ISBN 0-13-949843-5.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PORTINGUNIXTOTHE386"
name="BIBLIO-PORTINGUNIXTOTHE386"></a>
<p><i>Porting UNIX to the 386</i>, <span class="AUTHOR">William Jolitz</span>, Dr. Dobb's
Journal, January 1991-July 1992.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-TCPIPILLV1THEPROTOCOLS"
name="BIBLIO-TCPIPILLV1THEPROTOCOLS"></a>
<p><i>TCP/IP Illustrated, Volume 1: The Protocols</i>, <span class="AUTHOR">W. Richard
Stevens</span>, Addison-Wesley, 1996, ISBN 0-201-63346-9.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXSYSFORMODRNARCH"
name="BIBLIO-UNIXSYSFORMODRNARCH"></a>
<p><i>Unix Systems for Modern Architectures</i>, Addison-Wesley, <span
class="AUTHOR">Curt Schimmel</span>, 1994, ISBN 0-201-63338-8.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-TCPIPILLVOL3" name="BIBLIO-TCPIPILLVOL3"></a>
<p><i>TCP/IP Illustrated, Volume 3: TCP for Transactions, HTTP, NNTP and the UNIX Domain
Protocols</i>, Addison-Wesley, 1996, <span class="AUTHOR">W. Richard Stevens</span>, ISBN
0-201-63495-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXINTERNTHENEWFRONTIERS"
name="BIBLIO-UNIXINTERNTHENEWFRONTIERS"></a>
<p><i>UNIX Internals -- The New Frontiers</i>, <span class="AUTHOR">Uresh Vahalia</span>,
Prentice Hall, 1996, ISBN 0-13-101908-2.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-TCPIPILLVOL2THEIMPLEMENTATION"
name="BIBLIO-TCPIPILLVOL2THEIMPLEMENTATION"></a>
<p><i>TCP/IP Illustrated, Volume 2: The Implementation</i>, <span class="AUTHOR">Gary R.
Wright</span>, <span class="AUTHOR">W. Richard Stevens</span>, 1995, Addison-Wesley, ISBN
0-201-63354-X.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-FIREWALLSANDINTERNETSECURITY"
name="BIBLIO-FIREWALLSANDINTERNETSECURITY"></a>
<p><i>Firewalls and Internet Security: Repelling the Wily Hacker</i>, <span
class="AUTHOR">William R. CHeswick</span>, <span class="AUTHOR">Steven M.
Bellovin</span>, Addison-Wesley, 1995, ISBN 0-201-63357-4.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PRACTICALUNIXSECURITY"
name="BIBLIO-PRACTICALUNIXSECURITY"></a>
<p><i>Practical UNIX Security</i>, <span class="AUTHOR">Simson Garfinkel</span>, <span
class="AUTHOR">Gene Spafford</span>, 1996, 2nd, O'Reilly &amp; Associates, Inc, ISBN
1-56592-148-8.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PGPPRETTYGOODPRIVACY"
name="BIBLIO-PGPPRETTYGOODPRIVACY"></a>
<p><i>PGP Pretty Good Privacy</i>, <span class="AUTHOR">Simson Garfinkel</span>, O'Reilly
&amp; Associates, Inc, 1995, ISBN 1-56592-098-8.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PENTIUMPROCARCH"
name="BIBLIO-PENTIUMPROCARCH"></a>
<p><i>Pentium Processor System Architecture</i>, <span class="AUTHOR">Don
Anderson</span>, <span class="AUTHOR">Tom Shanley</span>, Addison-Wesley, 1995, 2nd, ISBN
0-201-40992-5.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PROGGUIDETOTHESVGACARDS"
name="BIBLIO-PROGGUIDETOTHESVGACARDS"></a>
<p><i>Programmer's Guide to the EGA, VGA, and Super VGA Cards</i>, <span
class="AUTHOR">Richard F. Ferraro</span>, 3rd, Addison-Wesley, 1995, ISBN
0-201-62490-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-80486" name="BIBLIO-80486"></a>
<p><i>80486 System Architecture</i>, <span class="AUTHOR">Tom Shanley</span>,
Addison-Wesley, 1995, 3rd, ISBN 0-201-40994-1.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-ISASYSARCH" name="BIBLIO-ISASYSARCH"></a>
<p><i>ISA System Architecture</i>, <span class="AUTHOR">Tom Shanley</span>,
Addison-Wesley, 3rd, 1995, ISBN 0-201-40996-8.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-PCISYSARCH" name="BIBLIO-PCISYSARCH"></a>
<p><i>PCI System Architecture</i>, <span class="AUTHOR">Tom Shanley</span>,
Addison-Wesley, 1995, 3rd, ISBN 0-201-40993-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-THEUNDOCUMENTEDPC"
name="BIBLIO-THEUNDOCUMENTEDPC"></a>
<p><i>The Undocumented PC</i>, <span class="AUTHOR">Frank Van Gilluwe</span>,
Addison-Wesley, 1994, ISBN 0-201-62277-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-BELLSYSTEMTECHNICALJOURNAL"
name="BIBLIO-BELLSYSTEMTECHNICALJOURNAL"></a>
<p><i>Bell System Technical Journal, Unix Time-Sharing System</i>, American Telephone
&#38; Telegraph Company, July-August 1978, Vol 57, No 6, Part 2, ISSN0005-8580.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-COMMENTARYONUNIX"
name="BIBLIO-COMMENTARYONUNIX"></a>
<p><i>Lion's Commentary on UNIX</i>, <span class="AUTHOR">John Lion</span>, ITP Media
Group, 1996, 6th, ISBN 1573980137.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-NEWHACKERDICT" name="BIBLIO-NEWHACKERDICT"></a>
<p><i>The New Hacker's Dictionary</i>, <span class="AUTHOR">Eric S. Raymond</span>, MIT
Press, 1996, 3rd, ISBN 0-262-68092-0.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-AQTRCENTOFUNIX" name="BIBLIO-AQTRCENTOFUNIX"></a>
<p><i>A quarter century of UNIX</i>, <span class="AUTHOR">Peter H. Salus</span>,
Addison-Wesley, 1994, ISBN 0-201-54777-5.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-UNIXHATERSHANDBOOK"
name="BIBLIO-UNIXHATERSHANDBOOK"></a>
<p><i>The UNIX-HATERS Handbook</i>, <span class="AUTHOR">Steven Strassman</span>, <span
class="AUTHOR">Daniel Weise</span>, <span class="AUTHOR">Simon Garfinkel</span>, IDG
Books Worldwide, Inc, 1994, ISBN 1-56884-203-1.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-LIFEWITHUNIX" name="BIBLIO-LIFEWITHUNIX"></a>
<p><i>Life with UNIX -- special edition</i>, <span class="AUTHOR">Don Libes</span>, <span
class="AUTHOR">Sandy Ressler</span>, Prentice-Hall, 1989, ISBN 0-13-536657-7.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-BSDFAMILYTREE" name="BIBLIO-BSDFAMILYTREE"></a>
<p><i class="CITETITLE"><a
href="ftp://ftp.uk.FreeBSD.org/pub/FreeBSD/FreeBSD-current/src/share/misc/bsd-family-tree"
 target="_top">The BSD Family Tree</a></i>, 1997.</p>
</div>

<div class="BIBLIOENTRY"><a id="ABSOLUTEBSD" name="ABSOLUTEBSD"></a>
<p><i>Absolute BSD</i>, <span class="AUTHOR">Michael Lucas</span>, No Starch Press, June
2002, ISBN 1-886411-74-3.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-CCPPUSERSJOURNAL"
name="BIBLIO-CCPPUSERSJOURNAL"></a>
<p><i>The C/C++ Users Journal</i>, R&amp;D Publications Inc., ISSN 1075-2838.</p>
</div>

<div class="BIBLIOENTRY"><a id="BIBLIO-SYSADMINTHEJOURNALFORUNIXSYSADMINS"
name="BIBLIO-SYSADMINTHEJOURNALFORUNIXSYSADMINS"></a>
<p><i>Sys Admin -- The Journal for UNIX System Administrators</i>, Miller Freeman, Inc,
ISSN 1061-2688.</p>
</div>
</div>

<h3 class="FOOTNOTES">Notes</h3>

<table border="0" class="FOOTNOTES" width="100%">
<tr>
<td align="LEFT" valign="TOP" width="5%"><a id="FTN.AEN736" name="FTN.AEN736"
href="#AEN736"><span class="footnote">[1]</span></a></td>
<td align="LEFT" valign="TOP" width="95%">
<p>一封來自 Keith Frechette 的 e-mail <code class="EMAIL">&#60;<a
href="mailto:kfrechet@us.ibm.com">kfrechet@us.ibm.com</a>&#62;</code>。</p>
</td>
</tr>
</table>

<hr />
<p align="center"><small>This, and other documents, can be downloaded from <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p>

<p align="center"><small>For questions about FreeBSD, read the <a
href="http://www.FreeBSD.org/docs.html">documentation</a> before contacting &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.<br />
For questions about this documentation, e-mail &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

