<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>系統管理</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="HOME" title="FreeBSD 4.X、5.X、6.X 常見問答集" href="index.html" />
<link rel="PREVIOUS" title="硬碟、檔案系統、Boot Loader" href="disks.html" />
<link rel="NEXT" title="X Window System 及 Virtual Consoles" href="x.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="CHAPTER" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD 4.X、5.X、6.X 常見問答集</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="disks.html"
accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href="x.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="CHAPTER">
<h1><a id="ADMIN" name="ADMIN"></a>Chapter 10 系統管理</h1>

Wei-Hon Chen

<div class="QANDASET">
<dl>
<dt>10.1. <a href="admin.html#STARTUP-CONFIG-FILES">系統起始設定檔在哪？</a></dt>

<dt>10.2. <a href="admin.html#ADDING-USERS">我該如何簡單地加入使用者？</a></dt>

<dt>10.3. <a href="admin.html#ROOT-NOT-FOUND-CRON-ERRORS">在我編輯 crontab
檔案之後，為什麼我老是收到這樣的訊息： “<tt class="ERRORNAME">root: not
found</tt>”？</a></dt>

<dt>10.4. <a href="admin.html#SU-WHEEL-GROUP">為什麼我想要用 su 成為 <tt
class="USERNAME">root</tt> 時，會得到 “<tt class="ERRORNAME">you are not in the correct
group to su root</tt>” 的錯誤訊息？</a></dt>

<dt>10.5. <a href="admin.html#RCCONF-READONLY">我在 <tt class="FILENAME">rc.conf</tt>
還是某個起動檔案裡犯了錯誤，
因為檔案系統變成唯讀的，我無法去編輯它。我該怎麼辦？</a></dt>

<dt>10.6. <a href="admin.html#PRINTER-SETUP">為什麼我沒辦法設定我的印表機？</a></dt>

<dt>10.7. <a href="admin.html#KEYBOARD-MAPPINGS">我要怎麼樣修正我的系統所使用的鍵盤對映
(keyboard mapping)？</a></dt>

<dt>10.8. <a href="admin.html#PNP-RESOURCES">為什麼我在系統啟動時，得到 “<tt
class="ERRORNAME">unknown: &lt;PNP0303&gt; can't assign resources</tt>”
的訊息？</a></dt>

<dt>10.9. <a href="admin.html#USER-QUOTAS">為什麼我無法讓 user quotas 正常工作？</a></dt>

<dt>10.10. <a href="admin.html#SYSV-IPC">FreeBSD 支援 System V IPC 格式指令集？</a></dt>

<dt>10.11. <a href="admin.html#UUCPMAIL">我該如何讓 sendmail 透過 UUCP
來遞送郵件？</a></dt>

<dt>10.12. <a href="admin.html#ISPMAIL">當我用撥接連上網路時該怎麼設定信件遞送？</a></dt>

<dt>10.13. <a href="admin.html#SENDMAIL-ALTERNATIVE">除了 Sendmail
外，還有哪些郵件伺服器可以使用呢？</a></dt>

<dt>10.14. <a href="admin.html#FORGOT-ROOT-PW">我忘了 <tt class="USERNAME">root</tt>
密碼了！怎麼辦？</a></dt>

<dt>10.15. <a href="admin.html#CAD-REBOOT">我該怎麼讓 Control-Alt-Delete
不會重新啟動系統？</a></dt>

<dt>10.16. <a href="admin.html#DOS-TO-UNIX-TXT">我該怎麼把 DOS 文字檔案重新格式化成 UNIX
的？</a></dt>

<dt>10.17. <a href="admin.html#KILL-BY-NAME">我該怎麼用名稱砍掉 process？</a></dt>

<dt>10.18. <a href="admin.html#ROOT-ACL">為何在 su 一直說我不在 <tt
class="USERNAME">root</tt> 的 ACL 裡？</a></dt>

<dt>10.19. <a href="admin.html#UNINSTALL-KERBEROS">我該怎麼移除 Kerberos？</a></dt>

<dt>10.20. <a href="admin.html#ADD-PTY">我該怎麼增加系統的虛擬終端機？</a></dt>

<dt>10.21. <a href="admin.html#CREATE-SND0">/dev/snd0 這個裝置做不出來！</a></dt>

<dt>10.22. <a href="admin.html#REREAD-RC">可以不用開機，重新讀取 <tt
class="FILENAME">/etc/rc.conf</tt>、 再次啟動 <tt class="FILENAME">/etc/rc</tt>
嗎?</a></dt>

<dt>10.23. <a href="admin.html#RELEASE-CANDIDATE">我想要把我的系統昇級到最新的
-STABLE，但是得到的是 -RC 或 -PRERELEASE！怎麼了？</a></dt>

<dt>10.24. <a href="admin.html#KERNEL-CHFLAG-FAILURE">我試著要安裝一個新的核心，但是無法
chflags。我該怎麼解決？</a></dt>

<dt>10.25. <a
href="admin.html#KERNEL-SECURELEVEL-TIME">在我的系統上，我無法變更時間超過一秒以上的範圍！
我該怎麼辦？</a></dt>

<dt>10.26. <a href="admin.html#STATD-MEM-LEAK">為什麼 <tt class="COMMAND">rpc.statd</tt>
用了 256 megabytes 的記憶體？</a></dt>

<dt>10.27. <a href="admin.html#UNSETTING-SCHG">為什麼我沒辦法取消 <tt
class="LITERAL">schg</tt> 檔案旗標？</a></dt>

<dt>10.28. <a href="admin.html#SSH-SHOSTS">為什麼近來的新版 FreeBSD 預設無法利用 <tt
class="FILENAME">.shosts</tt> 完成 SSH 認證？</a></dt>

<dt>10.29. <a href="admin.html#VNLRU">什麼是 <tt class="LITERAL">vnlru</tt>?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STARTUP-CONFIG-FILES" name="STARTUP-CONFIG-FILES"></a><b>10.1.</b>
系統起始設定檔在哪？</p>
</div>

<div class="ANSWER">
<p><b></b>從 2.0.5R 到 2.2.1R，主要的設定檔是 <tt
class="FILENAME">/etc/sysconfig</tt>。所有的選項都被指定在這個檔， 而其他像 <tt
class="FILENAME">/etc/rc</tt> (參見 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a>) 和 <tt
class="FILENAME">/etc/netstart</tt> 只是引用它。</p>

<p>觀察 <tt class="FILENAME">/etc/sysconfig</tt> 這個檔並修正其值以
適合你的系統。這個檔用註解填滿以表示何處該放置什麼設定。</p>

<p>在 post-2.2.1 以後及 3.0，<tt class="FILENAME">/etc/sysconfig</tt>
亦更名為一個更容易描述的檔名叫 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
，並且語法簡化了些。 <tt class="FILENAME">/etc/netstart</tt> 亦更名為 <tt
class="FILENAME">/etc/rc.network</tt> 因此所有的檔案都可以用 <tt class="COMMAND">cp
/usr/src/etc/rc* /etc</tt> 來拷貝。</p>

<p>在 3.1 以及，<tt class="FILENAME">/etc/rc.conf</tt> 被移到 <tt
class="FILENAME">/etc/defaults/rc.conf</tt>。 <span class="emphasis"><i
class="EMPHASIS">千萬不要編輯這個檔！</i></span> 如果 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 內有想要更動的項目，
你應該將那一行的內容拷貝到 <tt class="FILENAME">/etc/rc.conf</tt>， 然後再修改它。</p>

<p>例如 FreeBSD 3.1 及以後的版本內，有一個 DNS 伺服器 named，
而你想要啟動它。你所需要作的事就是：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">echo named_enable="YES" &gt;&gt; /etc/rc.conf</kbd>
</pre>

<p>想要在 FreeBSD 3.1 及以後的版本中，啟動本地端服務的話，將 shell script 置於 <tt
class="FILENAME">/usr/local/etc/rc.d</tt> 目錄 下。這些 shell script
應該設定成可執行，並且檔名以 .sh 結束。 在 FreeBSD 3.0 及更早的版本中，你應該直接編輯 <tt
class="FILENAME">/etc/rc.local</tt> 檔。</p>

<p><tt class="FILENAME">/etc/rc.serial</tt>用來初始化序列埠 （像是鎖定埠的特性等）。</p>

<p><tt class="FILENAME">/etc/rc.i386</tt> 是 Intel 專用設定， 像是 iBCS2 模擬或是 PC
系統主控台設定。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADDING-USERS" name="ADDING-USERS"></a><b>10.2.</b>
我該如何簡單地加入使用者？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">adduser</span>(8)</span></a>
指令。如果需要更複雜的使用方式， 請用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 這個指令。</p>

<p>要再次移除使用者，使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rmuser</span>(8)</span></a> 指令。還有，
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 也可以使用。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROOT-NOT-FOUND-CRON-ERRORS" name="ROOT-NOT-FOUND-CRON-ERRORS"></a><b>10.3.</b>
在我編輯 crontab 檔案之後，為什麼我老是收到這樣的訊息： “<tt class="ERRORNAME">root: not
found</tt>”？</p>
</div>

<div class="ANSWER">
<p><b></b>通常都是因為編輯了系統的 crontab (<tt class="FILENAME">/etc/crontab</tt>)
然後就用 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(1)</span></a>
去安裝它：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">crontab /etc/crontab</kbd>
</pre>

<p>這樣作是不對的。系統的 crontab 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(1)</span></a>
所更新的使用者的 crontab 格式並不一樣 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(5)</span></a>
說明文件針對差異處有詳細的說明)。</p>

<p>如果你已經用這種方法，額外多出的 crontab 只就是 <tt class="FILENAME">/etc/crontab</tt>
的拷貝，只是格式是錯誤的。 可用以下的命令刪除：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">crontab -r</kbd>
</pre>

<p>下次你編輯 <tt class="FILENAME">/etc/crontab</tt> 檔案的時候， 你不用作任何動作去通知
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a>
，它自動會去偵測是否有更動。</p>

<p>如果你想要每天、每週、或是每月固定執行某些動作一次，也許加個 shell script 在 <tt
class="FILENAME">/usr/local/etc/periodic</tt> 目錄下會更好，系統的 cron 會固定執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">periodic</span>(8)</span></a> 命令，
它可將你的程式和其它的系統週期性工作一起執行。</p>

<p>這個錯誤的真正原因，是因為系統的 crontab 有一個額外的欄位，
說明該命令要以什麼使用者身份執行。在 FreeBSD 的預設系統 crontab 中，所有的項目都是 <tt
class="USERNAME">root</tt>。 當這個 crontab 被當作是 <tt class="USERNAME">root</tt>
的使用者 crontab (它和系統的 crontab 是 <span class="emphasis"><i
class="EMPHASIS">不</i></span> 一樣的)，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a> 會以為 <tt
class="LITERAL">root</tt> 字串是欲執行的命令的第一個字，但是實際上
並沒有這樣的命令存在。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SU-WHEEL-GROUP" name="SU-WHEEL-GROUP"></a><b>10.4.</b> 為什麼我想要用 su 成為
<tt class="USERNAME">root</tt> 時，會得到 “<tt class="ERRORNAME">you are not in the
correct group to su root</tt>” 的錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>這是一個安全特性。想要利用 su 成為 <tt class="USERNAME">root</tt> (或其它有
superuser 權限的帳號)，你一定要在 <tt class="GROUPNAME">wheel</tt>
群組內。如果沒有這個特性的話， 任何人只要在系統裡有帳號，並且恰巧知道 <tt
class="USERNAME">root</tt> 的密碼，就可以取得 superuser
等級的權限以存取系統。有了這個特性， 這樣的情況就不會發生；如果使用者不在 <tt
class="GROUPNAME">wheel</tt> 群組內的話，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">su</span>(1)</span></a>
會讓他們連試著鍵入密碼的機會都沒有。</p>

<p>要讓某人可以利用 su 成為 <tt class="USERNAME">root</tt> 的話， 只要把他們放入 <tt
class="GROUPNAME">wheel</tt> 群組內即可。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RCCONF-READONLY" name="RCCONF-READONLY"></a><b>10.5.</b> 我在 <tt
class="FILENAME">rc.conf</tt> 還是某個起動檔案裡犯了錯誤，
因為檔案系統變成唯讀的，我無法去編輯它。我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>當電腦問你 shell 完整路徑名時，只要按 <tt class="LITERAL">ENTER</tt> ，然後執行
<tt class="COMMAND">mount /</tt> 以讀寫模式 重新掛載根檔案系統。你也許需要執行 <tt
class="COMMAND">mount -a -t ufs</tt> ，將你慣用的文字編輯器所在的檔案系統掛載上來。如果
你慣用的文字編輯器在網路檔案系統上的話，你必須先手動將網路設定
起來，以便將網路檔案系統掛載上來，或是使用本地端檔案系統上的 編輯器，例如 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ed</span>(1)</span></a>。</p>

<p>如果你想要使用像 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">vi</span>(1)</span></a> 或是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1&amp;manpath=FreeBSD+5.4-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">emacs</span>(1)</span></a>
等的全螢幕 文字編輯器的話，你也需要執行 <tt class="COMMAND">export TERM=cons25</tt>
，以便讓這些編輯器能夠從 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">termcap</span>(5)</span></a>
資料庫裡讀取正確的資料。</p>

<p>當你已經完成了這些步驟後，你可以照你平常修改文法錯誤的方式 去編輯 <tt
class="FILENAME">/etc/rc.conf</tt> 檔案。在核心 (kernel)
啟動時所顯示的錯誤訊息，能夠告訴你檔案中哪一行有錯誤。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PRINTER-SETUP" name="PRINTER-SETUP"></a><b>10.6.</b>
為什麼我沒辦法設定我的印表機？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考一下 Handbook 中，有關列印的部份。它應該能夠解決 你大部份的問題。請參考
<a href="../handbook/printing.html" target="_top">Handbook 中的列印部份</a>。</p>

<p>有些印表機需要主機支援的驅動程式 (host-based driver) 才能 執行任何列印功能。FreeBSD
本身並不支援這些所謂的 “WinPrinters”。 如果你的印表機無法在 DOS 或 Windows NT 4.0
下執行，那它大概就是一台 WinPrinter。你唯一能使用 這樣的印表機的希望，就是試試 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/ print/pnm2ppa/pkg-descr"><tt
class="FILENAME">print/pnm2ppa</tt></a> 支不支援它了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KEYBOARD-MAPPINGS" name="KEYBOARD-MAPPINGS"></a><b>10.7.</b>
我要怎麼樣修正我的系統所使用的鍵盤對映 (keyboard mapping)？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 Handbook 中的 <a href="../handbook/using-localization.html"
target="_top">using localization</a> 章節，尤其是 <a
href="../handbook/using-localization.html#SETTING-CONSOLE" target="_top">console
setup</a> 章節。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PNP-RESOURCES" name="PNP-RESOURCES"></a><b>10.8.</b> 為什麼我在系統啟動時，得到
“<tt class="ERRORNAME">unknown: &lt;PNP0303&gt; can't assign resources</tt>”
的訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>以下是從 freebsd-current 通信論壇的一篇文章中節錄出來的。</p>

<a id="AEN3247" name="AEN3247"></a>
<table border="0" width="100%" cellspacing="0" cellpadding="0" class="BLOCKQUOTE">
<tr>
<td width="10%" valign="TOP">&nbsp;</td>
<td valign="TOP">
<p>“無法指派資源 (can't assign resources)” 訊息表示 那些裝置是傳統的 ISA
裝置，而核心中已經編入不認得 PNP 的驅動程
式。這些裝置包括鍵盤控制器，可程式化岔斷控制晶片，還有幾個標準
設備。資源無法指派給這些裝置，是因為早已有驅動程式使用那些位址 了。</p>
</td>
<td width="10%" valign="TOP">&nbsp;</td>
</tr>

<tr>
<td colspan="2" align="RIGHT" valign="TOP">--<span class="ATTRIBUTION">Garrett Wollman
<code class="EMAIL">&#60;<a
href="mailto:wollman@FreeBSD.org">wollman@FreeBSD.org</a>&#62;</code>, 2001 年四月 24
日</span></td>
<td width="10%">&nbsp;</td>
</tr>
</table>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="USER-QUOTAS" name="USER-QUOTAS"></a><b>10.9.</b> 為什麼我無法讓 user quotas
正常工作？</p>
</div>

<div class="ANSWER">
<p><b></b></p>

<ul class="noindent">
<li>
<p>不要在 <tt class="FILENAME">/</tt> 打開 quotas，</p>
</li>

<li>
<p>把 quotas 檔放在它必須強迫置入的檔案系統內，舉例：</p>

<div class="INFORMALTABLE"><a id="AEN3262" name="AEN3262"></a>
<table border="0" frame="void" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>檔案系統</th>
<th>Quota 檔</th>
</tr>
</thead>

<tbody>
<tr>
<td><tt class="FILENAME">/usr</tt></td>
<td><tt class="FILENAME">/usr/admin/quotas</tt></td>
</tr>

<tr>
<td><tt class="FILENAME">/home</tt></td>
<td><tt class="FILENAME">/home/admin/quotas</tt></td>
</tr>

<tr>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SYSV-IPC" name="SYSV-IPC"></a><b>10.10.</b> FreeBSD 支援 System V IPC
格式指令集？</p>
</div>

<div class="ANSWER">
<p><b></b>是的，FreeBSD 支援 System V-style IPC。這包括共享記憶體，
訊息跟信號。你需要在你的 kernel 設定檔內加入下列幾行以啟動它們。</p>

<pre class="PROGRAMLISTING">
options    SYSVSHM          # enable shared memory
options    SYSVSEM          # enable for semaphores
options    SYSVMSG          # enable for messaging
</pre>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 在 FreeBSD 3.2 以及之後的版本，這些選項已經是 <span class="emphasis"><i
class="EMPHASIS">GENERIC</i></span> 核心的一部份，也就是說它們已 經編進了你的系統中。</p>
</blockquote>
</div>

<p>重新編譯並安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UUCPMAIL" name="UUCPMAIL"></a><b>10.11.</b> 我該如何讓 sendmail 透過 UUCP
來遞送郵件？</p>
</div>

<div class="ANSWER">
<p><b></b>跟隨 FreeBSD 套裝而來的 sendmail 設定是適合那些直接連上網際網路 的站台。想透過
UUCP 交換郵件的站台必須另外安裝 sendmail 的設定檔案。</p>

<p>手動修改 <tt class="FILENAME">/etc/sendmail.cf</tt> 是絕對必要的。 第 8 版的 sendmail
提供一個全新的入口以透過一些像 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">m4</span>(1)</span></a>
的處理就能產生設定檔，這事實上是一個高層概念等級的技巧性設定。 你應該可以在 <tt
class="FILENAME">/usr/src/usr.sbin/sendmail/cf</tt> 以下裡使用它：</p>

<p>假如你不是用 full sources 方式安裝系統，那麼 sendmail
設定項目可能已經分散成好幾個來源分布檔在等著你，假設你已經 mount 光碟機，做以下動作：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/src</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cat scontrib.?? | tar xzf - -C /usr/src contrib/sendmail</kbd>
</pre>

<p>別驚慌，這只有數十萬個位元組的大小。在 <tt class="FILENAME">cf</tt> 目錄裡的 <tt
class="FILENAME">README</tt> 可以提供一個 m4 設定法的基 本介紹。</p>

<p>以 UUCP 遞送來說，建議你最好使用 <tt class="LITERAL">mailertable</tt>
特點。建構一個資料庫讓 sendmail 可以使用它自己的路徑決策。</p>

<p>首先，你必須建立自己的 <tt class="FILENAME">.mc</tt> 檔。 <tt
class="FILENAME">/usr/src/usr.sbin/sendmail/cf/cf</tt> 目錄是這些
檔案的家。查看一下，已經有好幾個範例檔，假設你已經命名自己的檔叫 <tt
class="FILENAME">foo.mc</tt>，你要做的只是把它轉換成一個有效的 <tt
class="FILENAME">sendmail.cf</tt>：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/src/usr.sbin/sendmail/cf/cf</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make foo.cf</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cp foo.cf /etc/mail/sendmail.cf</kbd>
</pre>

<p>一個典型的 <tt class="FILENAME">.mc</tt> 檔看起來可能像這樣：</p>

<pre class="PROGRAMLISTING">
VERSIONID(`<tt class="REPLACEABLE"><i>Your version number</i></tt>')
OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <tt class="REPLACEABLE"><i>your.uucp.relay</i></tt>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <tt class="REPLACEABLE"><i>your.alias.host.name</i></tt>
Cw    <tt class="REPLACEABLE"><i>youruucpnodename.UUCP</i></tt>
</pre>

<p><tt class="LITERAL">accept_unresolvable_domains</tt>， <tt
class="LITERAL">nocanonify</tt>， 和 <tt class="LITERAL">confDONT_PROBE_INTERFACES</tt>
特性將避免任何在 遞送郵件時會用到 DNS 的機會。<tt class="LITERAL">UUCP_RELAY</tt>
項目的出現理由很奇怪，就不要問為何了。簡單的放入一個網際網路 上可以處理 .UUCP
虛擬網域位址的主機名稱；通常，你只需要在這 裡填入你 ISP 的信件回覆處 (mail replay)。</p>

<p>你已經做到這裡了，你還需要這個叫 <tt
class="FILENAME">/etc/mail/mailertable</tt>。如果你只有一個用
來傳遞所有郵件的對外通道的話，以下的檔案就足夠了：</p>

<pre class="PROGRAMLISTING">
#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
                              uucp-dom:<tt
class="REPLACEABLE"><i>your.uucp.relay</i></tt>
</pre>

<p>另一個更複雜的例子看起來像這樣：</p>

<pre class="PROGRAMLISTING">
#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
                             uucp-dom:
</pre>

<p>如你所見，這是某個真實檔案裡的一部份。首三行處理網域定址信件
不應該被送出到內定路徑，而由某些 UUCP 鄰居(UUCP neighbor)取代 的特殊情形，這是為了
“縮短”遞送的路徑。下一行處理到 本地乙太網路網域的信件讓它可以使用 SMTP
來遞送。最後，UUCP 鄰居提到 .UUCP 虛擬網域的記載，允許一個 <tt class="LITERAL"><tt
class="REPLACEABLE"><i>uucp-neighbor</i></tt> !<tt
class="REPLACEABLE"><i>recipient</i></tt></tt> 推翻
內定規則。最後一行則以一個單獨的句點做結束，以 UUCP 遞送到提供當 你全世界性郵件閘門的UUCP
鄰居。所有在 <tt class="LITERAL">uucp-dom:</tt> 關鍵字裡的節點名稱必須都是有效的 UUCP
鄰居，你可以用 <tt class="LITERAL">uuname</tt> 命令去確認。</p>

<p>提醒你這個檔案在使用前必須被轉換成 DBM 資料庫檔案，最好在 mailertable
最上面用註解寫出命令列來完成這個工作。當你每次更換你 的 mailertable
後你總是需要執行這個命令。</p>

<p>最後提示：如果你不確定某些特定的信件路徑可用，記得把 <code class="OPTION">-bt</code>
選項加到 sendmail。這會將 sendmail 啟動在 <span class="emphasis"><i
class="EMPHASIS">address test mode</i></span>；只要按下 <tt
class="LITERAL">0</tt>，接著輸入你希望測試的信件路徑位址。
最後一行告訴你使用內部的信件代理程式，代理程式的會通知目的主機，
以及(可能轉換的)位址。要離開此模式請按 Control-D。</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">sendmail -bt</kbd>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<samp class="PROMPT">&gt;</samp> <kbd class="USERINPUT">3,0 foo@example.com</kbd>
canonify           input: foo @ example . com
..
parse            returns: $# uucp-dom $@ <tt
class="REPLACEABLE"><i>your.uucp.relay</i></tt> $: foo &lt; @ example . com . &gt;
<samp class="PROMPT">&gt;</samp> <kbd class="USERINPUT">^D</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ISPMAIL" name="ISPMAIL"></a><b>10.12.</b>
當我用撥接連上網路時該怎麼設定信件遞送？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你已經有一個固定的 IP 數字，你不需要調整任何內定值。設好
你要指定的網路名稱，其他的 sendmail 都會幫你做完。</p>

<p>如果你拿到的是動態配置的 IP 數字而使用撥接 ppp 連接到網際網 路，你可能已經在你的 ISP
信件主機上有一個信箱。假設你的 ISP 網域 是 <tt
class="HOSTID">example.net</tt>，你的使用者名 稱是 <tt
class="USERNAME">user</tt>。亦假設你稱自己的主機名稱是 <tt class="HOSTID">bsd.home</tt>
而你的 ISP 告訴你可以使用 <tt class="HOSTID">relay.example.net</tt> 當作信件回覆處。</p>

<p>為了從你的信箱接收信件，你將需要安裝取信程式以便從信箱取回信件。 <b
class="APPLICATION">Fetchmail</b> 是一個不錯的選擇，因為它支
援許多不同的通訊協定，通常你的 ISP 會提供 POP3。如果你選擇使用
user-ppp，你可以在連線到網路成功後自動抓取你的信件，只要在 <tt
class="FILENAME">/etc/ppp/ppp.linkup</tt>裡面設定以下這項：</p>

<pre class="PROGRAMLISTING">
MYADDR:
  !bg su user -c fetchmail
</pre>

<p>假使你正使用 <b class="APPLICATION">sendmail</b> (如下所示)
傳送信件到非本地帳號，置入以下命令：</p>

<pre class="PROGRAMLISTING">
  !bg su user -c "sendmail -q"
</pre>

<p>在上面那項命令之後。這會強迫 <b class="APPLICATION">sendmail</b>
在連接上網路後馬上開始處理 mailqueue。</p>

<p>我假設你在 <tt class="HOSTID">bsd.home</tt> 機器上有一個 <tt
class="USERNAME">user</tt> 的帳號。在 <tt class="HOSTID">bsd.home</tt> 機器上 <tt
class="USERNAME">user</tt> 的家目錄裡建立一個 <tt class="FILENAME">.fetchmailrc</tt>
的檔案：</p>

<pre class="PROGRAMLISTING">
poll example.net protocol pop3 fetchall pass MySecret
</pre>

<p>無須贅言，這個檔除了 <tt class="USERNAME">user</tt> 外不應該被任 何人讀取，因為它包含
<tt class="LITERAL">MySecret</tt> 這個密碼。</p>

<p>為了在寄信時有正確的抬頭 <tt class="LITERAL">from:</tt>，你必須告訴 <b
class="APPLICATION">sendmail</b> 使用 <tt class="LITERAL">user@example.net</tt> 而非 <tt
class="LITERAL">user@bsd.home</tt>。你可能會希望告訴 <b class="APPLICATION">sendmail</b>
從 <tt class="HOSTID">relay.example.net</tt> 送出所有信件， 加快信件傳送。</p>

<p>以下的 <tt class="FILENAME">.mc</tt> 檔應能滿足你的要求：</p>

<pre class="PROGRAMLISTING">
VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.example.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl
</pre>

<p>如何轉換這個 <tt class="FILENAME">.mc</tt> 檔案到 <tt
class="FILENAME">sendmail.cf</tt> 檔的詳細細節，請參考上一節。 另外，在更新 <tt
class="FILENAME">sendmail.cf</tt> 以後不要忘記重新啟動 <b
class="APPLICATION">sendmail</b>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SENDMAIL-ALTERNATIVE" name="SENDMAIL-ALTERNATIVE"></a><b>10.13.</b> 除了
Sendmail 外，還有哪些郵件伺服器可以使用呢？</p>
</div>

<div class="ANSWER">
<p><b></b><a href="http://www.sendmail.org/" target="_top">Sendmail</a> 是 FreeBSD
預設使用的郵件伺服器，但是你還是可以很容易地以其它 郵件伺服器 (例如，從 port
安裝的郵件伺服器) 取代之。</p>

<p>port 裡有很多可供選擇的郵件伺服器，像 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/exim/pkg-descr"><tt
class="FILENAME">mail/exim</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/postfix/pkg-descr"><tt
class="FILENAME">mail/postfix</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/qmail/pkg-descr"><tt
class="FILENAME">mail/qmail</tt></a>、 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/zmailer/pkg-descr"><tt
class="FILENAME">mail/zmailer</tt></a> 等， 就是幾個很受歡迎的選擇。</p>

<p>多樣選擇是好事，而且大家有許多郵件伺服器可以使用也被認為是
好事；所以請避免在通信論壇裡問像 “Sendmail 有比 Qmail 好嗎？”
這樣的問題。如果你真的很想問的話，請先到通信論壇 archive
裡找一下。每一個郵件伺服器的優點與缺點，以前大概就已經 討論好幾次了。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FORGOT-ROOT-PW" name="FORGOT-ROOT-PW"></a><b>10.14.</b> 我忘了 <tt
class="USERNAME">root</tt> 密碼了！怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>不要驚慌！只要重新啟動系統，在看到 Boot: 時輸入 <kbd class="USERINPUT">boot
-s</kbd> 即可進入單使用者模式 (在 3.2-RELEASE 之前的版本請改用 <kbd
class="USERINPUT">-s</kbd>)。 在問要使用哪個 shell 時，按下 ENTER。你會看到一個 <samp
class="PROMPT">#</samp> 的提示號，輸入 <tt class="COMMAND">mount -u /</tt>
以重新掛上(mount) 你的根檔案系統可供讀/寫。執行 <tt class="COMMAND">passwd root</tt>
以更換 <tt class="USERNAME">root</tt> 密碼，然後執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=exit&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">exit</span>(1)</span></a>
繼續啟動程序。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CAD-REBOOT" name="CAD-REBOOT"></a><b>10.15.</b> 我該怎麼讓 Control-Alt-Delete
不會重新啟動系統？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你是使用 FreeBSD 2.2.7-RELEASE 或之後版本的
syscons(系統內定的主控台驅動程式)，把下列這行放到 kernel 設定檔內，
然後重做一個新的核心：</p>

<pre class="PROGRAMLISTING">
options SC_DISABLE_REBOOT
</pre>

<p>若是使用 FreeBSD 2.2.5-RELEASE 或之後版本的 PCVT 主控台驅動
程式，則以下列選項代替：</p>

<pre class="PROGRAMLISTING">
options PCVT_CTRL_ALT_DEL
</pre>

<p>其他更早期的 FreeBSD 版本，請修改你正在使用的主控台鍵盤對應， 並將所有 <tt
class="LITERAL">boot</tt> 關鍵字以 <tt class="LITERAL">nop</tt> 取代。內定的鍵盤對應是在
<tt class="FILENAME">/usr/share/syscons/keymaps/us.iso.kbd</tt>。 你可能需要明白的吩咐
<tt class="FILENAME">/etc/rc.conf</tt> 去讀取
這個鍵盤對應以確保更動生效。當然如果你正在用適合你國籍的鍵盤對應， 你應該編輯那一個。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DOS-TO-UNIX-TXT" name="DOS-TO-UNIX-TXT"></a><b>10.16.</b> 我該怎麼把 DOS
文字檔案重新格式化成 UNIX 的？</p>
</div>

<div class="ANSWER">
<p><b></b>只要使用這個 perl 命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd
class="USERINPUT">perl -i.bak -npe 's/\r\n/\n/g' file ...</kbd>
</pre>

<p>file 就是要處理的檔案。這個修改是在內部完成，原始的檔案會儲存成 副檔名為 .bak
的檔案。</p>

<p>或者你可以使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tr&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">tr</span>(1)</span></a> 這個命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">tr -d '\r' &lt; <tt
class="REPLACEABLE"><i>dos-text-file</i></tt> &gt; <tt
class="REPLACEABLE"><i>unix-file</i></tt></kbd>
</pre>

<p><tt class="REPLACEABLE"><i>dos-text-file</i></tt> 是包含 DOS 文字的 檔案，而 <tt
class="REPLACEABLE"><i>unix-text-file</i></tt> 則是包含轉換 的輸出結果。這比使用 perl
還要快上一點點。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KILL-BY-NAME" name="KILL-BY-NAME"></a><b>10.17.</b> 我該怎麼用名稱砍掉
process？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=killall&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">killall</span>(1)</span></a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROOT-ACL" name="ROOT-ACL"></a><b>10.18.</b> 為何在 su 一直說我不在 <tt
class="USERNAME">root</tt> 的 ACL 裡？</p>
</div>

<div class="ANSWER">
<p><b></b>這個錯誤是因為 Kerberos 分散認證系統。這個問題並不是很嚴重
但是令人厭煩。你可以用 -K 選項去執行 su，或是像下個問題所描述的 移除 Kerberos。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNINSTALL-KERBEROS" name="UNINSTALL-KERBEROS"></a><b>10.19.</b> 我該怎麼移除
Kerberos？</p>
</div>

<div class="ANSWER">
<p><b></b>要從系統裡移除 Kerberos，重裝你正在執行的 release 版本的 bin
distribution。如果你有 CDROM，你可以 mount cd(假設在 /cdrom) 並執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/bin</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">./install.sh</kbd>
</pre>

<p>或者你也可以將 <tt class="FILENAME">/etc/make.conf</tt> 裡的 "MAKE_KERBEROS"
選項全都拿掉，然後再 build world.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ADD-PTY" name="ADD-PTY"></a><b>10.20.</b> 我該怎麼增加系統的虛擬終端機？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你有許多 telnet，ssh，X 或是 screen 使用者，你或許會用完
虛擬終端機，這能教你怎麼加更多：</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>建立並安裝一個新的 kernel 並且把這一行</p>

<pre class="PROGRAMLISTING">
pseudo-device pty 256
</pre>

<p>加入到設定檔裡。</p>
</li>

<li class="STEP">
<p>執行這個命令：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV pty{1,2,3,4,5,6,7}</kbd>
</pre>

<p>會造出 256 個虛擬終端機的裝置節點。</p>
</li>

<li class="STEP">
<p>編輯 <tt class="FILENAME">/etc/ttys</tt> 並加入符合 256
個終端機的行數。它們應該符合已經存在單項的格式，舉例來說， 它們看起來像：</p>

<pre class="PROGRAMLISTING">
ttyqc none network
</pre>

<p>字母設計的順序是 <tt class="LITERAL">tty[pqrsPQRS][0-9a-v]</tt>，使用正規表示式。</p>
</li>

<li class="STEP">
<p>用新的 kernel 重新啟動電腦就可以了。</p>
</li>
</ol>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CREATE-SND0" name="CREATE-SND0"></a><b>10.21.</b> /dev/snd0
這個裝置做不出來！</p>
</div>

<div class="ANSWER">
<p><b></b>並沒 <tt class="DEVICENAME">snd</tt> 這個裝置的存在。這個名字
是用來當作各個組成 FreeBSD 聲音驅動程式組，諸如 <tt class="DEVICENAME">mixer</tt>， <tt
class="DEVICENAME">sequencer</tt>，以及 <tt class="DEVICENAME">dsp</tt> 的簡稱。</p>

<p>可以用以下的命令作出這些裝置：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /dev</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV snd0</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REREAD-RC" name="REREAD-RC"></a><b>10.22.</b> 可以不用開機，重新讀取 <tt
class="FILENAME">/etc/rc.conf</tt>、 再次啟動 <tt class="FILENAME">/etc/rc</tt> 嗎?</p>
</div>

<div class="ANSWER">
<p><b></b>先進入單人使用者模式，然後再回到多使用者模式。</p>

<p>在主控台執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">shutdown now</kbd>
(Note: without -r or -h)

<samp class="PROMPT">#</samp> <kbd class="USERINPUT">return</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">exit</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="RELEASE-CANDIDATE" name="RELEASE-CANDIDATE"></a><b>10.23.</b>
我想要把我的系統昇級到最新的 -STABLE，但是得到的是 -RC 或 -PRERELEASE！怎麼了？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地說：那只是名字而已。RC 的意思是 “Release Candiate，
發行候選版本”，它表示新版本快要發行了。在 FreeBSD 中， -PRERELEASE
通常是發行前的程式碼凍結的代名詞。(有些發行版本中， -BETA 標籤跟 -PRERELEASE
是相同意思的。)</p>

<p>詳細地說：FreeBSD 從兩個地方分支出它的發行版本。主版號、 點零、release (例如
3.0-RELEASE 及 4.0-RELEASE) 的，是從發展過程 開始時分支出來的，通常稱為 <a
href="introduction.html#CURRENT">-CURRENT</a> 。有副版號的版本 (例如 3.1-RELEASE 或
4.2-RELEASE)，是 活躍的 <a href="introduction.html#STABLE">-STABLE</a> 分支中的發行版本
快照。從 4.3-RELEASE 開始，每一個發行版本有它自己的分支，可為 偏好極度保守的發展速度
(通常只會作安全方面的更新) 的人所用。</p>

<p>準備要製作發行版本時，其所在的分支會經過一定的程序。有一個是
程式碼凍結。當程式碼凍結開始時，分支名稱會更名，以反映它快要成為
一個發行版本了。舉個例子，如果原來的分支叫 4.5-STABLE，它的名字 會變成 4.6-PRERELEASE
以表示程式碼已凍結，並且額外的發行前測試
將要開始了。臭蟲更正仍可回報，以成為發行版本的一部份。當程式碼
有了可成為發行版本的雛形時，它的名字就會變成 4.6-RC，以表示發行 版本快好了。進入 RC
階段後，只有找到的最有影響的臭蟲才會被修正。 當發行版本 (本例中為 4.6-RELEASE)
產生後，發行版本會有自己的分支， 原分支會被更名為 4.6-STABLE。</p>

<p>想要得知更多有關版本號碼與各 CVS 分支的資訊，請參考 <a
href="../../articles/releng/article.html" target="_top">Release Engineering</a>
一文。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KERNEL-CHFLAG-FAILURE" name="KERNEL-CHFLAG-FAILURE"></a><b>10.24.</b>
我試著要安裝一個新的核心，但是無法 chflags。我該怎麼解決？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地說：你的 securelevel 可能大於零。直接重新開機到
單人模式，再安裝核心。</p>

<p>詳細地說：FreeBSD 在 securelevel 大於零情況下，不允許 變更系統旗標 (system
flags)。你可以用這個指令檢查你的 securelevel：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl kern.securelevel</kbd>
</pre>

<p>你沒有辦法降低 securelevel；你必須啟動系統到單人模式以 安裝核心，或是修改 <tt
class="FILENAME">/etc/rc.conf</tt> 內的 securelevel 再重新開機。請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a>
說明文件，以取得 更多有關 securelevel 的資訊，還有 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
說明文件，以取得更多有關 rc.conf 的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="KERNEL-SECURELEVEL-TIME" name="KERNEL-SECURELEVEL-TIME"></a><b>10.25.</b>
在我的系統上，我無法變更時間超過一秒以上的範圍！ 我該怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單地講：你系統的 securelevel 也許大於 1。直接重新開機至
單人模式，然後再修改時間。</p>

<p>詳細地說：在 securelevel 大於 1 的情況下，FreeBSD 不允許時間
變動大於一秒。你可以用以下的命令來檢查目前的 securelevel：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysctl kern.securelevel</kbd>
</pre>

<p>你無法降低 securelevel；你必須啟動電腦至單人模式下以修改時間， 或是修改 <tt
class="FILENAME">/etc/rc.conf</tt> 再重新開機。請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a>
說明文件，以取得更多有關 securelevel 的資訊，還有 <tt
class="FILENAME">/etc/defaults/rc.conf</tt> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
說明文件，以取得更多有關 rc.conf 的資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="STATD-MEM-LEAK" name="STATD-MEM-LEAK"></a><b>10.26.</b> 為什麼 <tt
class="COMMAND">rpc.statd</tt> 用了 256 megabytes 的記憶體？</p>
</div>

<div class="ANSWER">
<p><b></b>不，那不是 memory leak，而且它也不是真的用了 256 Mbyte 的記憶體。它只是喜歡
(意思就是總會這樣作) 將一狗票的記憶體
映謝到它自己的位址空間，以方便作事。就技術而言，這樣並沒有 什麼不對；這樣只是會讓 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a>
嚇一大跳而已。</p>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rpc.statd</span>(8)</span></a>
會將它的狀態檔案 (位於 <tt class="FILENAME">/var</tt> )
映射至它的位址空間裡；為了防止需要的時候再增大所
導致的重新映射，它一次會使用相當大的大小。從程式碼來看的話就 更明顯了，可以看到 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&amp;sektion=2"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">mmap</span>(2)</span></a> 的長度參數為
<tt class="LITERAL">0x10000000</tt> ，它是 IA32 架構上的十六分之一的定址空間，也就是
256MB。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNSETTING-SCHG" name="UNSETTING-SCHG"></a><b>10.27.</b> 為什麼我沒辦法取消 <tt
class="LITERAL">schg</tt> 檔案旗標？</p>
</div>

<div class="ANSWER">
<p><b></b>你正在一個提高了 securelevel (也就是大於 0) 的系統運作。 降低 securelevel
再試試看。請參考 <a href="security.html#SECURELEVEL">FAQ 中對 securelevel 的說明</a> 和
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">init</span>(8)</span></a> 說明文件。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SSH-SHOSTS" name="SSH-SHOSTS"></a><b>10.28.</b> 為什麼近來的新版 FreeBSD
預設無法利用 <tt class="FILENAME">.shosts</tt> 完成 SSH 認證？</p>
</div>

<div class="ANSWER">
<p><b></b>為什麼近來新版 FreeBSD <tt class="FILENAME">.shosts</tt> 認證預設
為取消的原因，是因為 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;manpath=OpenBSD+3.4">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ssh</span>(1)</span></a>
預設不安裝為 suid 成 <tt class="USERNAME">root</tt>。要 “修正” 這點，你可以作下列的
任何一件事：</p>

<ul>
<li>
<p>要一勞永逸解決，請將 <tt class="FILENAME">/etc/make.conf</tt> 裡的 <tt
class="MAKEVAR">ENABLE_SUID_SSH</tt> 設成 <tt class="LITERAL">true</tt> ，然後再重新
build ssh (或是執行 <tt class="COMMAND">make world</tt>)。</p>
</li>

<li>
<p>只作一時的修正的話，可以 <tt class="USERNAME">root</tt> 身份 執行 <tt
class="COMMAND">chmod 4755 /usr/bin/ssh</tt> 將 <tt class="FILENAME">/usr/bin/ssh</tt>
設成 <tt class="LITERAL">4555</tt> 。然後將 <tt class="MAKEVAR">ENABLE_SUID_SSH=
true</tt> 加入 <tt class="FILENAME">/etc/make.conf</tt> 裡，這樣下次 <tt
class="COMMAND">make world</tt> 執行就會生效了。</p>
</li>
</ul>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="VNLRU" name="VNLRU"></a><b>10.29.</b> 什麼是 <tt
class="LITERAL">vnlru</tt>?</p>
</div>

<div class="ANSWER">
<p><b></b>當系統達到上限 <code class="VARNAME">kern.maxvnodes</code> 時， <tt
class="LITERAL">vnlru</tt> 會清除並釋放 vnode。這個核心
執行緒大部份的時間都沒事作，只有當你有很大的記憶體，而且
正在存取上萬個小檔案時，才會被啟動。</p>
</div>
</div>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="disks.html"
accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="x.html" accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">硬碟、檔案系統、Boot Loader</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">X Window System 及 Virtual Consoles</td>
</tr>
</table>
</div>

<p align="center"><small>This, and other documents, can be downloaded from <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p>

<p align="center"><small>For questions about FreeBSD, read the <a
href="http://www.FreeBSD.org/docs.html">documentation</a> before contacting &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.<br />
For questions about this documentation, e-mail &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

