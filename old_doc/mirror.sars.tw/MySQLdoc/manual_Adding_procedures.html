<html>

<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
<title>MySQL中文參考手冊-15 為MySQL增加新程序</title>
<style type="text/css">
<!--
.p14{font-size:14.8px;font-family:宋體;line-height:14pt;}
.p5{ border: 1px solid rgb(146,201,201) }
.a:hover{color:red;}
a.t1:visited{color:red;}
-->
</style>
</head>

<body BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#101090" VLINK="#7030B0" class="p4">

<h1><img src="Img/mysql-logo.gif" alt="mysql-logo.gif (3082 bytes)" WIDTH="127" HEIGHT="60"><font color="#FF0000">MySQL中文參考手冊</font></h1>

<p>譯者：晏子 <a href="mailto:(clyan@sohu.com">(clyan@sohu.com</a>）<br>
GB 碼主頁：<a href="http://linuxdb.yeah.net">http://linuxdb.yeah.net</a></p>

<p>Big5 轉碼者：statue <a href="mailto:statue.bbs@bbs.yzu.edu.tw">
(statue@bbs.yzu.edu.tw</a>） <br>
詞彙轉換：彭武興 (<a href="mailto:wilson@mailbox.com.tw">wilson@mailbox.com.tw</a>)<br>
Big5 碼主頁：
<a href="http://cnpa.yzu.edu.tw/~cfc/docs/mysqldoc_big5/manual_toc.html">
http://cnpa.yzu.edu.tw/~cfc/docs/mysqldoc_big5/manual_toc.html</a><br>
Big5 碼分站：
<a href="http://php.wilson.gs/mysqldoc/big5/manual_toc.html">
http://php.wilson.gs/mysqldoc/big5/manual_toc.html
</p>

<hr>

<p><a HREF="manual_Introduction.html">第一章</a>, <a HREF="manual_Adding_functions.html">前一章</a>, <a HREF="manual_ODBC.html">下一章</a>, 
<a HREF="manual_Concept_Index.html">最後一章</a>，<a HREF="manual_toc.html">目錄</a>. 
</p>

<hr>

<h1><a NAME="Adding_procedures" HREF="manual_toc.html#Adding_procedures">15 為MySQL增加新程序</a></h1>

<p>在<strong>MySQL</strong>中，你可以定義一個用C++寫地程序，它能在查詢被送到客戶前存取和修改查詢中的數據。修改可一行一行地或在<code>GROUP 
BY</code>層次上進行。</p>

<p>我們已經在<strong>MySQL</strong>3.23中創建了一個程序例子來顯示它能做什麼。</p>

<h2><a NAME="procedure_analyse" HREF="manual_toc.html#procedure_analyse">15.1 analyse程序</a></h2>

<p><code>analyse([max elements,[max memory]])</code> </p>

<p>這個程序定義在<tt>“sql/sql_analyse.cc”</tt>，它檢驗來自你的查詢的結果並返回結果的分析。 

<ul>
  <li><code>max elements</code>（內定256)是<code>analyse</code>將注意的每列不同值的最大數量。這被<code>analyse</code>用來檢查最佳的列類型是否應該是<code>ENUM</code>類型。</li>
  <li><code>max memory</code>（內定8192)是在<code>analyse</code>嘗試尋找所有不同值的時候應該分配給每列的最大內存量。</li>
</ul>

<pre>SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</pre>

<h2><a NAME="Writing_a_procedure" HREF="manual_toc.html#Writing_a_procedure">15.2 
編寫一個程序</a></h2>

<p>暫時，對此的唯一文檔是原始程式。:(</p>

<p>你可以檢驗下列文件找到關於程序的所有資訊： 

<ul>
  <li><tt>“sql/sql_analyse.cc”</tt> </li>
  <li><tt>“sql/procedure.h”</tt> </li>
  <li><tt>“sql/procedure.cc”</tt> </li>
  <li><tt>“sql/sql_select.cc”</tt> </li>
</ul>

<p><a NAME="IDX680"></a> <a NAME="IDX681"></a> <a NAME="IDX682"></a> </p>

<hr>

<p><a HREF="manual_Introduction.html">第一章</a>, <a HREF="manual_Adding_functions.html">前一章</a>, <a HREF="manual_ODBC.html">下一章</a>, 
<a HREF="manual_Concept_Index.html">最後一章</a>，<a HREF="manual_toc.html">目錄</a>. 
</p>
</body>
</html>
