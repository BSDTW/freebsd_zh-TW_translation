<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 5. Database Administration</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="using-mysql-programs.html" title="Chapter 4. Using MySQL Programs"><link rel="next" href="replication.html" title="Chapter 6. Replication in MySQL">
</head><body><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="database-administration"></a>
	第5章：資料庫管理</h2></div></div></div><div class="toc"><p><b>目錄</b></p><dl><dt><span class="section"><a href="database-administration.html#server-side-scripts">
		5.1. MySQL伺服器和伺服器啟動指令</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#server-side-overview">
			5.1.1. 伺服器端指令和實用工具概述</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-max">
			5.1.2. mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-safe">
			5.1.3. mysqld_safe：MySQL伺服器啟動指令</a></span></dt><dt><span class="section"><a href="database-administration.html#mysql-server">
			5.1.4. mysql.server：MySQL伺服器啟動指令</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-multi">
			5.1.5. mysqld_multi：管理多個MySQL伺服器的程式</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#instance-manager">
		5.2. mysqlmanager：MySQL實例管理器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#instance-manager-startup-process">
			5.2.1. 用MySQL實例管理器啟動MySQL伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-security">
			5.2.2. 連接到MySQL實例管理器並建立用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-command-line-options">
			5.2.3. MySQL實例管理器命令行選項</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-configuration-files">
			5.2.4. MySQL實例管理器配置檔案</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-commands">
			5.2.5. MySQL實例管理器識別的命令</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#mysqld">
		5.3. mysqld：MySQL伺服器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#server-options">5.3.1. <span><strong class="command">
			mysqld</strong></span>命令行選項</a></span></dt><dt><span class="section"><a href="database-administration.html#server-sql-mode">
			5.3.2. SQL伺服器模式</a></span></dt><dt><span class="section"><a href="database-administration.html#server-system-variables">
			5.3.3. 伺服器系統變數</a></span></dt><dt><span class="section"><a href="database-administration.html#server-status-variables">
			5.3.4. 伺服器狀態變數</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#mysql-fix-privilege-tables">
		5.4. mysql_fix_privilege_tables：升級MySQL系統資料表</a></span></dt><dt><span class="section"><a href="database-administration.html#server-shutdown">
		5.5. MySQL伺服器關機程序</a></span></dt><dt><span class="section"><a href="database-administration.html#security">
		5.6. 一般安全問題</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#security-guidelines">
			5.6.1. 通用安全指南</a></span></dt><dt><span class="section"><a href="database-administration.html#security-against-attack">
			5.6.2. 使MySQL在攻擊者面前保持安全</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-options">
			5.6.3. Mysqld安全相關啟動選項<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#load-data-local">
			5.6.4. LOAD DATA LOCAL安全問題<code class="literal"></code></a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#privilege-system">
		5.7. MySQL訪問權限系統</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#what-privileges">
			5.7.1. 權限系統的作用</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges">
			5.7.2. 權限系統工作原理</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-provided">
			5.7.3. MySQL提供的權限</a></span></dt><dt><span class="section"><a href="database-administration.html#connecting">
			5.7.4. 與MySQL伺服器連接</a></span></dt><dt><span class="section"><a href="database-administration.html#connection-access">
			5.7.5. 訪問控制, 階段1：連接核實</a></span></dt><dt><span class="section"><a href="database-administration.html#request-access">
			5.7.6. 訪問控制, 階段2：請求核實</a></span></dt><dt><span class="section"><a href="database-administration.html#privilege-changes">
			5.7.7. 權限更改何時生效</a></span></dt><dt><span class="section"><a href="database-administration.html#access-denied">
			5.7.8. 拒絕訪問錯誤的原因<code class="literal"></code></a></span></dt><dt><span class="section"><a href="database-administration.html#password-hashing">
			5.7.9. MySQL 4.1中的密碼哈希處理</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#user-account-management">
		5.8. MySQL用戶帳號管理</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#user-names">
			5.8.1. MySQL帳號和密碼</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-users">
			5.8.2. 向MySQL增加新用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#removing-users">
			5.8.3. 從MySQL刪除用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#user-resources">
			5.8.4. 限制帳號資源</a></span></dt><dt><span class="section"><a href="database-administration.html#passwords">
			5.8.5. 設置帳號密碼</a></span></dt><dt><span class="section"><a href="database-administration.html#password-security">
			5.8.6. 使您的密碼安全</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-connections">
			5.8.7. 使用安全連接</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#disaster-prevention">
		5.9. 備份與恢復</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#backup">
			5.9.1. 資料庫備份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-example">
			5.9.2. 示範用備份與恢復策略</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery">
			5.9.3. 自動恢復</a></span></dt><dt><span class="section"><a href="database-administration.html#table-maintenance">
			5.9.4. 資料表維護和崩潰恢復</a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk">
			5.9.5. myisamchk：MyISAM資料表維護實用工具</a></span></dt><dt><span class="section"><a href="database-administration.html#maintenance-schedule">
			5.9.6. 建立資料表維護計劃</a></span></dt><dt><span class="section"><a href="database-administration.html#table-info">
			5.9.7. 獲取關於資料表的訊息</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#localisation">
		5.10. MySQL本地化和國際應用</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#character-sets">
			5.10.1. 數據和排序用字元編碼</a></span></dt><dt><span class="section"><a href="database-administration.html#languages">
			5.10.2. 設置錯誤消息語言</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-character-set">
			5.10.3. 新增新的字元編碼</a></span></dt><dt><span class="section"><a href="database-administration.html#character-arrays">
			5.10.4. 字元定義數組</a></span></dt><dt><span class="section"><a href="database-administration.html#string-collating">
			5.10.5. 字串比較支援</a></span></dt><dt><span class="section"><a href="database-administration.html#multi-byte-characters">
			5.10.6. 多字節字元支援</a></span></dt><dt><span class="section"><a href="database-administration.html#problems-with-character-sets">
			5.10.7. 字元編碼問題</a></span></dt><dt><span class="section"><a href="database-administration.html#time-zone-support">
			5.10.8. MySQL伺服器時區支援</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#log-files">
		5.11. MySQL日誌檔案</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#error-log">
			5.11.1. 錯誤日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#query-log">
			5.11.2. 通用查詢日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#binary-log">
			5.11.3. 二進制日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#slow-query-log">
			5.11.4. 慢速查詢日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#log-file-maintenance">
			5.11.5. 日誌檔案維護</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#multiple-servers">
		5.12. 在同一台機器上運行多個MySQL伺服器</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-servers">
			5.12.1. 在Windows下運行多個伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-unix-servers">
			5.12.2. 在Unix中運行多個伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-server-clients">
			5.12.3. 在多伺服器環境中使用客戶端程式</a></span></dt></dl></dd><dt><span class="section"><a href="database-administration.html#query-cache">
		5.13. MySQL查詢高速緩衝</a></span></dt><dd><dl><dt><span class="section"><a href="database-administration.html#query-cache-how">
			5.13.1. 查詢高速緩衝如何工作</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-in-select">
			5.13.2. 查詢高速緩衝SELECT選項</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-configuration">
			5.13.3. 查詢高速緩衝配置</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-status-and-maintenance">
			5.13.4. 查詢高速緩衝狀態和維護</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div>
		<p>本章涵蓋了<span>MySQL</span>安裝管理主題，例如配置伺服器、管理用戶帳號和備份。</p>
		<h2 class="title"><a name="server-side-scripts"></a>
		5.1.&nbsp;MySQL伺服器和伺服器啟動指令</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#server-side-overview">
			5.1.1. 伺服器端指令和實用工具概述</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-max">
			5.1.2. mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-safe">
			5.1.3. mysqld_safe：MySQL伺服器啟動指令</a></span></dt><dt><span class="section"><a href="database-administration.html#mysql-server">
			5.1.4. mysql.server：MySQL伺服器啟動指令</a></span></dt><dt><span class="section"><a href="database-administration.html#mysqld-multi">
			5.1.5. mysqld_multi：管理多個MySQL伺服器的程式</a></span></dt></dl></div>
		<p><span>MySQL</span>伺服器，即<strong>mysqld</strong>，是在<span>MySQL</span>安裝中負責大部分工作的主程式。伺服器隨附了幾個相關指令，當您安裝<span>MySQL</span>時它們可以執行設置操作，或者是幫助您啟動和停止伺服器的幫助程式。</p>
		<p>本節提供了伺服器和相關程式的概述，以及伺服器啟動指令相關訊息。關於配置伺服器的訊息參見<a href="database-administration.html#mysqld" title="5.3. mysqld — The MySQL Server">5.3節，「mysqld：MySQL伺服器」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-side-overview"></a>
			5.1.1.&nbsp;伺服器端指令和實用工具概述</h3></div></div></div><a class="indexterm" name="id2742599"></a>
			<p><span>MySQL</span>程式採用各種不同的選項。但每個<span>MySQL</span>程式提供一個<span>--help</span>選項<span>,</span>您可以用來查閱程式選項相關說明。例如，您可以試試<strong><span>mysqld 
			--help</span></strong>。</p>
			<p>您可以在命令行中或在選項檔案中指定選項來替換所有標準程式中的預設選項。參見<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3節，「指定程式選項」</a>。</p>
			<p>下面簡單描述了<span>MySQL</span>伺服器和伺服器相關程式：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>mysqld</span></strong></p>
			<p><span>SQL</span>後台程式<span>(</span>即<span>MySQL</span>伺服器<span>)</span>。要想使用客戶端程式，該程式必須運行，因為客戶端通過連接伺服器來訪問資料庫。參見<a href="database-administration.html#mysqld" title="5.3. mysqld — The MySQL Server">5.3節，「mysqld：MySQL伺服器」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld-max</span></p>
			<p>包括更多特性的一個伺服器版本。參見<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2節，「mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器」</a></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld_safe</span></p>
			<p>伺服器啟動指令。如果<strong><span>mysqld-max</span></strong>存在<span>,<strong><span>mysqld_safe</span></strong></span>試圖啟動它，否則啟動<strong><span>mysqld</span></strong>。參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysql.server</span></p>
			<p>
			伺服器啟動指令。該指令用於使用包含為特定級別的運行啟動服務的指令的運行目錄的系統。它使用<strong><span>mysqld_safe</span></strong>來啟動<span>MySQL</span>伺服器。參見<a href="database-administration.html#mysql-server" title="5.1.4. mysql.server — MySQL Server Startup Script">5.1.4節，「mysql.server：MySQL伺服器啟動指令」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld_multi</span></p>
			<p>伺服器啟動指令，可以啟動或停止系統上安裝的多個伺服器。參見<a href="database-administration.html#mysqld-multi" title="5.1.5. mysqld_multi — Program for Managing Multiple MySQL Servers">5.1.5節，「mysqld_multi：管理多個MySQL伺服器的程式」</a></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysql_install_db</span></p>
			<p>該指令用預設權限建立<span>MySQL</span>授權資料表。通常只是在系統上首次安裝<span>MySQL</span>時執行一次。參見<a href="installing.html#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2節，「Unix下安裝後的過程」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			mysql_fix_</span></strong><span class="MsoHyperlink"><span>
			</span></span><strong><span>
			privilege_tables</span></strong></p>
			<p>在升級安裝後，如果新版本<span>MySQL</span>中的
			授權資料表有更改，則使用該指令來更改授權資料表。參見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</p>
			<p>伺服器主機上還運行其它幾個程式：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisamchk</span></p>
			<p>用來描述、檢查、最佳化和維護<span>MyISAM</span>資料表的實用工具。在<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5節，「myisamchk：MyISAM資料表維護實用工具」</a>中描述了<strong><span>myisamchk</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>make_binary_distribution</span></p>
			<p>該程式可以生成編譯過的<span>MySQL</span>的二進製版本。可以通過<span>FTP</span>上傳到<span>ftp.mysql.com</span>的<span>/pub/mysql/upload/</span>，供其它<span>MySQL</span>用戶使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqlbug</span></p>
			<p><span>MySQL </span>
			問題報告指令。它可以用來向<span>MySQL</span>郵件系統發送問題報告。<span>(</span>您也可以訪問<span><a target="_top"  href="http://bugs.mysql.com/">http://bugs.mysql.com/</a></span>線上建立問題報告檔案。參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>）<span>。 </span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-max"></a>
			5.1.2.&nbsp;mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器</h3></div></div></div><a class="indexterm" name="id2742998"></a>
			<p><span>MySQL-Max</span>伺服器是<strong><span>mysqld</span></strong><span> 
			MySQL</span>伺服器的一個版本，包含了更多的特性。</p>
			<p>該分發版的使用取決於您的平台：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於<span>Windows</span>，<span>MySQL</span>二進制分發版包括標準伺服器<span> 
			(</span><span>mysqld.exe</span><span>)</span>和<span>MySQL-Max</span>伺服器<span>(<strong><span>mysqld-max.exe</span></strong>)</span>，因此您不再需要專用分發版。只需要使用一個常規<span>Windows</span>分發版，可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>獲得。參見<a href="installing.html#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於<span>Linux</span>，如果您使用<span>RPM</span>分發版安裝<span>MySQL</span>，首先使用常規<span>MySQL-server</span><span> 
			RPM</span>來安裝標準<strong><span>mysqld</span></strong>伺服器。然後使用<span>MySQL-Max</span><span> 
			RPM</span>來安裝<strong><span>mysqld-max</span></strong>伺服器。<span>MySQL-Max</span><span> 
			RPM</span>假定您已經安裝了常規伺服器<span>RPM</span>。關於<span>Linux 
			RPM</span>軟件包的詳細訊息，參見<a href="installing.html#linux-rpm" title="2.4. Installing MySQL on Linux">2.4節，「在Linux下安裝MySQL」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>所有其它<span>MySQL-Max</span>分發版包含一個<strong><span>mysqld</span></strong>伺服器，但具有更多的特性。</p>
			<p>您可以從<span>MySQL AB</span>網址<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>找到<span>MySQL-Max</span>二進製版本。</p>
			<p><span>MySQL AB</span>使用下面的<strong>configure</strong>選項構建<span>MySQL-Max</span>伺服器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-server-suffix=-max</span></p>
			<p>該選項為<strong><span>mysqld</span></strong>版本字串新增一個<span>-max</span>後綴。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-innodb</span></p>
			<p>該選項啟用<span>InnoDB</span>儲存引擎支援。<span>MySQL-Max</span>伺服器包括<span>InnoDB</span>支援。在<span>MySQL 
			4.0</span>及以上版本中，預設<span>InnoDB</span>包括在所有二進制分發版中，因此您不需要用<span>MySQL-Max</span>伺服器只是用來獲取<span>InnoDB</span>支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-bdb</span></p>
			<p>該選項啟用<span>Berkeley DB (BDB)</span>儲存引擎支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-blackhole-storage-engine</span></p>
			<p>該選項啟用<span>BLACKHOLE</span>儲存引擎支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>USE_SYMDIR</span></p>
			<p>啟用該定義來為<span>Windows</span>打開資料庫符號連結支援。符號連結支援適用於所有<span>Windows</span>伺服器，因此<span>Max</span>伺服器不需要支援該特性。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--with-ndbcluster</span></p>
			<p>該選項啟用<span>NDB Cluster</span>儲存引擎支援。目前<span>(5.1.2-alpha)</span>只有<span>Linux</span>、<span>Solaris</span>和<span>Mac 
			OS X</span>支援<span>Cluster</span>。已有一些用戶報告在<span>BSD
			</span>作業系統上成功使用了從原始碼構建的<span>MySQL Cluster</span>，但目前還沒有得到官方支援。</p>
			<p><span>MySQL-Max</span>二進制分發版對於想要安裝預編譯程式的用戶很方便。如果您使用原始碼分發版構建<span>MySQL</span>，您可以通過在配置時啟用<span>MySQL-Max</span>二進制分發版構建所用的相同的特性來構建您自己的<span>Max-like</span>伺服器。</p>
			<p><span>MySQL-Max</span>伺服器包括<span>BerkeleyDB (BDB)</span>儲存引擎，但並非所有平台支援<span>BDB</span>。</p>
			<p><span>Solaris</span>、<span>Mac OS X</span>和<span>Linux(</span>在大多數平台上<span>)</span>的<span>MySQL-Max</span>伺服器包括<span>NDB 
			CLUSTER</span>儲存引擎支援。請注意必須用<span>ndbcluster</span>選項啟動伺服器，以便使伺服器做為<span>MySQL 
			Cluster</span>的一部分來運行。<span>(</span>詳細訊息參見<a href="ndbcluster.html#mysql-cluster-configuration" title="17.4. MySQL Cluster Configuration">17.4節，「MySQL叢集的配置」</a>）<span>。 </span></p>
			<p>下面的資料表顯示了<span>MySQL-Max</span>二進制在哪個平台上包括<span>BDB</span>和<span>/</span>或<span>NDB 
			CLUSTER</span>支援：</p>
			<table border="1" cellpadding="0" id="table1">
				<tr>
					<td>
					<p><strong><span>系統</span></strong></td>
					<td>
					<p><strong>
					<span>BDB</span><span>支援</span></strong></td>
					<td>
					<p><strong>
					<span>NDB</span><span>支援</span></strong></td>
				</tr>
				<tr>
					<td>
					<p><span>AIX 4.3</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>HP-UX 11.0</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-Alpha</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-IA-64</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Linux-Intel</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Mac OS X</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>NetWare</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>SCO OSR5</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Solaris-SPARC</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Solaris-Intel</span></td>
					<td>
					<p><span>N</span></td>
					<td>
					<p><span>Y</span></td>
				</tr>
				<tr>
					<td>
					<p><span>UnixWare</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
				<tr>
					<td>
					<p><span>Windows NT/2000/XP</span></td>
					<td>
					<p><span>Y</span></td>
					<td>
					<p><span>N</span></td>
				</tr>
			</table>
			<p>要想找出您的伺服器支援哪個儲存引擎，執行下面的語句：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW ENGINES;</span></b></span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>| Engine&nbsp;&nbsp;&nbsp;&nbsp; | Support | Comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>| MyISAM&nbsp;&nbsp;&nbsp;&nbsp; | DEFAULT | Default engine as of MySQL 3.23 with great performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MEMORY&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Hash based, stored in memory, useful for temporary tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| HEAP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for MEMORY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Collection of identical MyISAM tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MRG_MYISAM | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| ISAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Obsolete storage engine, now replaced by MyISAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| MRG_ISAM&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Obsolete storage engine, now replaced by MERGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| InnoDB&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Supports transactions, row-level locking, and foreign keys&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| INNOBASE&nbsp;&nbsp; | YES&nbsp; &nbsp;&nbsp;&nbsp;| Alias for INNODB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| BDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Supports transactions and page-level locking&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| BERKELEYDB | YES&nbsp;&nbsp;&nbsp;&nbsp; | Alias for BDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| NDBCLUSTER | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Clustered, fault-tolerant, memory-based tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| NDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Alias for NDBCLUSTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| EXAMPLE&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Example storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| ARCHIVE&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Archive storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| CSV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | CSV storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| FEDERATED&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | Federated MySQL storage engine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| BLACKHOLE&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp; | /dev/null storage engine (anything you write to it disappears) |</span></pre>
			<pre><span>+------------+---------+----------------------------------------------------------------+</span></pre>
			<pre><span>18 rows in set (0.00 sec)</span></pre>
			<p><span>(</span>另參見<a href="sql-syntax.html#show-engines" title="13.5.4.8. SHOW ENGINES Syntax">13.5.4.8節，「SHOW 
		ENGINES語法」</a>）<span>。 </span></p>
			<p>您還可以使用下面的語句代替<span>SHOW 
			ENGINES</span>，並檢查您感興趣的儲存引擎的變數值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;have%&#39;;</span></b></span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>| have_archive&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_bdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_blackhole_engine | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_compress&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_crypt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_example_engine&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_federated_engine | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_geometry&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_innodb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_isam&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_ndbcluster&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | DISABLED |</span></pre>
			<pre><span>| have_openssl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;|</span></pre>
			<pre><span>| have_partition_engine | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_query_cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_raid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_rtree_keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| have_symlink&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | YES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------+----------+</span></pre>
			<pre><span>18 rows in set (0.01 sec)</span></pre>
			<p>
			<span>SHOW</span>命令的精確輸出隨使用的<span>MySQL</span>版本<span>(</span>和啟用的特性<span>)</span>的不同而有變化。第<span>2</span>列的值資料表示各特性支援的伺服器級別，如下所示：</p>
			<table border="1" cellpadding="0" id="table2">
				<tr>
					<td>
					<p><strong><span>值</span></strong></td>
					<td>
					<p><strong><span>含義</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>YES</span></td>
					<td>
					<p><span>&nbsp;</span>支援該特性並已經激活。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>NO</span></td>
					<td>
					<p><span>&nbsp;</span>不支援該特性。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DISABLED</span></td>
					<td>
					<p><span>&nbsp;</span>支援該特性但被禁用。</td>
				</tr>
			</table>
			<p>
			<span>NO</span>值資料表示編譯的伺服器不支援該特性，因此在運行時不能激活。</p>
			<p>出現<span>DISABLED</span>值是因為伺服器啟動時該特性被禁用，或沒有給出啟用它的所有選項。在後一種情況，<span><i><span>host_</span><span>名<span>.err</span></span></i></span>錯誤日誌檔案應包含該選項被禁用的原因。</p>
			<p>如果伺服器支援<span>InnoDB</span>或<span>BDB</span>儲存引擎，您還可以看見<span>DISABLED</span>，但在運行啟動時使用了<span>--skip-innodb</span>或<span>--skip-bdb</span>選項。對於<span>NDB 
			CLUSTER</span>儲存引擎，<span>DISABLED</span>資料表示伺服器支援<span>MySQL 
			Cluster</span>，但啟動時未啟用<span>--ndb-cluster</span>選項。</p>
			<p>所有<span>MySQL</span>伺服器支援<span>MyISAM</span>資料表，因為<span>MyISAM</span>是
			預設儲存引擎。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-safe"></a>
			5.1.3.&nbsp;mysqld_safe：MySQL伺服器啟動指令</h3></div></div></div>
			<p>在<span>Unix</span>和<span>NetWare</span>中推薦使用<strong><span>mysqld_safe</span></strong>來啟動<strong><span>mysqld</span><span>伺服器</span></strong>。<strong><span>mysqld_safe</span></strong>增加了一些安全特性，例如當出現錯誤時重啟伺服器並向錯誤日誌檔案寫入運行時間訊息。本節後面列出了<span>NetWare</span>的特定行為。</p>
			<p><strong><span>注</span></strong>釋：為了保持同舊版本<span>MySQL</span>的向後相容性，<span>MySQL</span>二進制分發版仍然包括<strong><span>safe_mysqld</span></strong>作為<strong><span>mysqld_safe</span></strong>的符號連結。但是，您不應再依賴它，因為再將來將刪掉它。</p>
			<p>預設情況下，<strong>mysqld_safe</strong>嘗試啟動可執行<strong>mysqld-max</strong>（如果存在），否則啟動<strong><span>mysqld</span></strong>。該行為的含義是：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Linux</span>中，<span>MySQL-Max</span><span> 
			RPM</span>依賴該<strong><span>mysqld_safe</span></strong>的行為。<span>RPM</span>安裝可執行<strong><span>mysqld-max</span></strong>，使<strong><span>mysqld_safe</span></strong>從該點起自動使用可執行命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您安裝包括<strong><span>mysqld-max</span></strong>伺服器的<span>MySQL-Max</span>分發版，後面升級到非<span>-Max</span>的<span>MySQL</span>版本，<strong><span>mysqld_safe</span></strong>仍然試圖運行舊的 
			<strong><span>mysqld-max</span><span>伺服器</span></strong>。升級時，您應手動刪除舊的<strong><span>mysqld-max</span><span>伺服器</span></strong>以確保<strong><span>mysqld_safe</span></strong>運行新的<strong><span>mysqld</span><span>伺服器</span></strong>。</p>
			<p>要想越過預設行為並顯式指定您想要運行哪個伺服器，為<strong><span>mysqld_safe</span></strong>指定<span>--mysqld</span>或<span>--mysqld-version</span>選項。</p>
			<p><strong><span>mysqld_safe</span></strong>的許多選項與<strong>mysqld</strong>的相同的。參見<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1節，「<span><strong class="command">mysqld</strong></span>命令行選項」</a>。</p>
			<p>所有在命令行中為<strong>mysqld_safe</strong>指定的選項被傳遞給<strong>mysqld<span>。</span></strong>如果您想要使用<strong><span>mysqld</span></strong>不支援的<strong><span>mysqld_safe</span><span>的</span></strong>選項，不要在命令行中指定。相反，在選項檔案的<span>[mysqld_safe]</span>組內將它們列出來。參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</p>
			<p><strong><span>mysqld_safe</span></strong>從選項檔案的<span>[mysqld]</span>、<span>[server]</span>和<span>[mysqld_safe]</span>部分讀取所有選項。為了保證向後相容性，它還讀取 
			<span>[safe_mysqld]</span>部分，儘管在<span>MySQL 
			5.1</span>安裝中您應將這部分重新命名為<span>[mysqld_safe]</span>。</p>
			<p><strong><span>mysqld_safe</span></strong>支援下面的選項：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span></p>
			<p>顯示幫助消息並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--autoclose</span></p>
			<p><span>(</span>只在<span>NetWare</span>中<span>)</span>在<span>NetWare</span>中，<strong><span>mysqld_safe</span></strong>可以保持窗口。當您關掉<strong><span>mysqld_safe</span></strong><span> 
			NLM</span>時，窗口不按預設設置消失。相反，它提示用戶輸入：</p>
			<pre ><span>*&lt;NLM has terminated; Press any key to close the screen&gt;*</span></pre>
			<p>如果您想讓<span>NetWare</span>自動關閉窗口，在<strong><span>mysqld_safe</span></strong>中使用<span>--autoclose</span>選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--basedir=<i>path</i></span></p>
			<p><span>MySQL</span>安裝目錄的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--core-file-size=<i>size</i></span></p>
			<p><strong>
			<span>mysqld</span></strong>能夠建立的內核檔案的大小。選項值傳遞給<strong><span>ulimit 
			-c</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--datadir=<i>path</i></span></p>
			<p>數據目錄的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span>
			<span>--defaults-extra-file=<i>path</i></span></p>
			<p>除了通用選項檔案所讀取的選項檔案名。如果給出，必須首選該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-file=<i>path</i></span></p>
			<p>讀取的代替通用選項檔案的選項檔案名。如果給出，必須首選該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ledir=<i>path</i></span></p>
			<p>包含<strong><span>mysqld</span></strong>程式的目錄的路徑。使用該選項來顯式資料表示伺服器位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-error=<i>path</i></span></p>
			<p>將錯誤日誌寫入給定的檔案。參見<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1節，「錯誤日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--mysqld=<i>prog_</i></span><i><span>name</span></i></span></p>
			<p>想要啟動的伺服器程式名<span>(</span>在<span>ledir</span>目錄<span>)</span>。如果您使用<span>MySQL</span>二進制分發版但有二進制分發版之外的數據目錄需要該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqld-version =<i>suffix</i></span></p>
			<p>該選項類似<span>--mysqld</span>選項，但您只指定伺服器程式名的後綴。基本名假定為<strong><span>mysqld</span><span>。</span></strong>例如，如果您使用<span>--mysqld-version 
			=max</span>，<strong><span>mysqld_safe</span></strong>啟動<span>ledir</span>目錄中的<strong><span>mysqld-max</span></strong>程式。如果<span>--mysqld-version</span>的參數為空，<strong>mysqld_safe</strong>使用目錄中的<strong>mysqld</strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--nice=</span><i><span>priority</span></i></span></p>
			<p>使用<span>nice</span>程式根據給定值來設置伺服器的調度優先級。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--no-defaults</span></p>
			<p>不要讀任何選項檔案。如果給出，必須首選該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--open-files-limit=<i>count</i></span></p>
			<p><strong>
			<span>mysqld</span></strong>能夠打開的檔案的數量。選項值傳遞給 
			<strong><span>ulimit -n</span></strong>。請注意您需要用<span>root</span>啟動<strong><span>mysqld_safe</span></strong>來保證正確工作！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=path</span></p>
			<p>程序<span>ID</span>檔案的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--port=<i>port_num</i></span></p>
			<p><span>&nbsp;</span>用來幀聽<span>TCP/IP</span>連接的端口號。端口號必須為<span>1024</span>或更大值，除非<span>MySQL</span>以<span>root</span>系統用戶運行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--skip-character-set-client-handshake</span></p>
			<p>忽略客戶端發送的字元編碼訊息，使用伺服器的預設字元編碼。<span>(</span>選擇該選項，<span>MySQL</span>的動作與<span>MySQL 
			4.0</span>相同）<span>。 </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=path</span></p>
			<p>用於本地連接的<span>Unix</span>套接字檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--timezone=<i>zone</i></span></p>
			<p>為給定的選項值設置<span>TZ</span>時區環境變數。從作業系統文檔查閱合法的時區規定格式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user={<i>user_name</i> |
			<i>user_id</i>}</span></p>
			<p>以帳號<span><i><span>user_name</span></i></span>或數字用戶<span>ID</span><span><i><span> 
			user_id</span></i></span>運行<strong><span>mysqld</span><span>伺服器</span></strong>。<span>(</span>本文中的「<span class="quote">用戶</span>」指系統登錄帳號，而不是
			授權資料表中的<span>MySQL</span>用戶）<span>。
			</span></p>
			<p>執行<strong><span>mysqld_safe</span></strong>時，必須先給出<span>--defaults-file</span>或<span>--defaults-extra-option</span>，或不使用選項檔案。例如，該命令將不使用選項檔案：</p>
			<pre><span>mysqld_safe --port=</span><span><i><span>port_num</span></i></span><span> --defaults-file=</span><span><i><span>file_name</span></i></span></pre>
			<p>相反，使用下面的命令：</p>
			<pre><span>mysqld_safe --defaults-file=</span><span><i><span>file_name</span></i></span><span> --port=</span><span><i><span>port_num</span></i></span></pre>
			<p>一般情況<strong><span>mysqld_safe</span></strong>指令可以啟動從原始碼或二進制<span>MySQL</span>分發版安裝的伺服器，即使這些分發版將伺服器安裝到稍微不同的位置。<span>(</span>參見<a href="installing.html#installation-layouts" title="2.1.5. Installation Layouts">2.1.5節，「安裝佈局」</a>）<span>。 <strong><span>
			mysqld_safe</span></strong></span>期望下面的其中一個條件是真的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以根據使用<strong><span>mysqld_safe</span></strong>的目錄找到伺服器和資料庫。在二進制分發版中，<strong><span>mysqld_safe</span></strong>看上去在<span>bin</span>和<span>data</span>目錄的工作目錄下。對於原始碼分發版，為<span>libexec</span>和<span>var</span>目錄。如果您從<span>MySQL</span>安裝目錄執行<strong><span>mysqld_safe</span></strong>應滿足該條件<span>(</span>例如，二進制分發版為<span>/usr/local/mysql</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果不能根據工作目錄找到伺服器和資料庫，<strong><span>mysqld_safe</span></strong>試圖通過絕對路徑對它們定位。典型位置為<span>/usr/local/libexec</span>和<span>/usr/local/var</span>。實際位置由構建分發版時配置的值確定如果<span>MySQL</span>安裝到配置時指定的位置，它們應該是正確的。</p>
			<p>因為<strong><span>mysqld_safe</span></strong>試圖通過工作目錄找到伺服器和資料庫，只要您從<span>MySQL</span>安裝目錄運行<strong><span>mysqld_safe</span></strong><b>，</b>可以將<span>MySQL</span>二進制分發版安裝到其它位置：</p>
			<pre><span>shell&gt; </span><span><b><span>cd mysql_installation_directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe &amp;</span></b></span></pre>
			<p>如果<strong><span>mysqld_safe</span></strong>失敗，即使從<span>MySQL</span>安裝目錄使用仍然失敗，您可以指定<span>--ledir</span>和<span>--datadir</span>選項來指示伺服器和資料庫在您的系統中的安裝目錄。</p>
			<p>一般情況，您不應編輯<strong><span>mysqld_safe</span></strong>指令。相反，應使用命令行選項或<span>my.cnf</span>選項檔案的<span>[mysqld_safe]</span>部分的選項來配置<strong><span>mysqld_safe</span></strong>。一般不需要編輯<strong><span>mysqld_safe</span></strong>來正確啟動伺服器。但是，如果您編輯，將來升級<span>MySQL</span>後會覆蓋您修改的<strong><span>mysqld_safe</span></strong>版本，因此您應對您修改的版本進行備份以便將來重裝。</p>
			<p>在<span>NetWare</span>中，<strong><span>mysqld_safe</span></strong>是一個<span>NetWare 
			Loadable Module (NLM)</span>，從原<span>Unix shell</span>指令移植。它執行：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>檢查系統和選項。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>檢查<span>MyISAM</span>資料表。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>保持<span>MySQL</span>伺服器窗口。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>啟動並監視<strong><span>mysqld</span></strong>，如果因錯誤終止則重啟。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span><strong>
			<span>將</span><span>mysqld</span><span>的</span></strong>錯誤消息發送到數據目錄中的<span><i><span>host_name.err
			</span></i></span>檔案。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>將<strong><span>mysqld_safe</span></strong>的屏幕輸出發送到數據目錄中的<span><i><span>host_name.safe</span></i></span>檔案。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-server"></a>
			5.1.4.&nbsp;mysql.server：MySQL伺服器啟動指令</h3></div></div></div>
			<p>在<span>Unix</span>中的<span>MySQL</span>分發版包括<strong><span>mysql.server</span></strong>指令。它可以用於使用<span>System 
			V-style</span>運行目錄來啟動和停止系統服務的系統，例如<span>Linux</span>和<span>Solaris</span>。它還用於<span>MySQL</span>的<span>Mac 
			OS X Startup Item</span>。</p>
			<p><strong><span>mysql.server</span></strong>位於<span>MySQL</span>原始碼樹<span>MySQL</span>安裝目錄下的<span>support-files</span>目錄中。</p>
			<p>如果您使用<span>Linux </span>伺服器<span>RPM</span>軟件包<span>(</span><span>MySQL-server-VERSION.rpm</span><span>)</span>，<strong><span>mysql.server</span></strong>指令將安裝到<span>/etc/init.d</span>目錄下，名為<span>mysql</span>。您不需要 
			手動安裝。關於<span>Linux RPM</span>軟件包的詳細訊息參見<a href="installing.html#linux-rpm" title="2.4. Installing MySQL on Linux">2.4節，「在Linux下安裝MySQL」</a>。</p>
			<p>一些賣方提供的<span>RPM</span>軟件包安裝的啟動指令用其它名，例如<strong><span>mysqld</span><span>。</span></strong></p>
			<p>如果您從不自動安裝<strong><span>mysql.server</span></strong>的原始碼分發版或二進制分發版格式安裝<span>MySQL</span>，也可以手動安裝。相關說明參見<a href="installing.html#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>。</p>
			<p><strong>
			<span>mysql.server</span></strong>從 
			<span>[mysql.server]</span>和選項檔案的<span>[mysqld]</span>部分讀取選項。<span>(</span>為了保證向後相容性，它還讀取 
			<span>[safe_mysqld]</span>部分，儘管在<span>MySQL 
			5.1</span>安裝中您應將這部分重新命名為<span>[mysqld_safe]</span>）<span>。</span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysqld-multi"></a>
			5.1.5.&nbsp;mysqld_multi：管理多個MySQL伺服器的程式</h3></div></div></div>
			<p><strong><span>mysqld_multi</span></strong>可以管理多個幀聽不同<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口的連接的<strong><span>mysqld</span></strong><span>
			</span>程序。它可以啟動或停止伺服器，或報告它們的當前狀態。</p>
			<p>程式尋找<span>my.cnf</span>中的<span>[mysqld<i>N</i>]</span>組<span>(</span>或<span>--config-file</span>選項指定的檔案<span>)</span>。<span><i><span>N</span></i></span><span>
			</span>可以為任何正整數。在下面的討論中該數字指選項組號，或<span><i><span>GNR</span></i></span>。組號區別各選項組，並用作<strong><span>mysqld_multi</span></strong>的參數來指定想要啟動、停止哪個伺服器或獲取哪個伺服器的狀態報告。這些組中的選項與將用來啟動<strong><span>mysqld</span></strong>的<span>[mysqld]</span>組中的相同。<span>(</span>例如，參見<a href="installing.html#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>）<span>。</span>但是，當使用多個伺服器時，需要每個伺服器使用自己的選項值，例如<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口號。關於在多伺服器環境中，每個伺服器對應唯一選項的詳細訊息，參見<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12節，「在同一台機器上運行多個MySQL伺服器」</a>。</p>
			<p>要想使用<strong><span>mysqld_multi</span></strong>，使用下面的語法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi [<i>options</i>] {start|stop|report} [<i>GNR</i>[,<i>GNR</i>] ...]</span></b></span></pre>
			<p>
			<span>start</span>、<span>stop</span>和<span>report</span>資料表示您想要執行的操作。您可以在單個伺服器或多個伺服器上執行指定的操作，取決於選項名後面的<span><i><span>GNR</span></i></span><span>
			</span>列。如果沒有該列，<strong><span>mysqld_multi</span></strong>為選項檔案中的所有伺服器執行該操作。</p>
			<p>每個<span><i><span>GNR</span></i></span>值代資料表一個選項組號或組號範圍。<span><i><span>GNR</span></i></span>值應為選項檔案中組名末尾的號。例如，組<span>[mysqld17]</span>的<span><i><span>GNR</span></i></span>為<span>17</span>。要想指定組號的範圍，用破折號間隔開第<span>1</span>個和最後<span>1</span>個號。<span><i><span>GNR</span></i></span>值<span>10-13</span>代資料表組<span>[mysqld10]</span>到<span>[mysqld13]</span>。可以在命令行中指定多個組或組範圍，用逗號間隔開。<span><i><span>GNR</span></i></span>列不能有空格字元<span>(</span>空格或<span>tab)</span>；空格字元後面的內容將被忽略掉。</p>
			<p>該命令使用選項組<span>[mysqld17]</span>啟動單個伺服器：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi start 17</span></b></span></pre>
			<p>該命令停止多個伺服器，使用選項組<span>[mysql8]</span>和<span>[mysqld10]</span>至<span>[mysqld13]</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi stop 8,10-13</span></b></span></pre>
			<p>使用該命令列出設置選項檔案的示範：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_multi --example</span></b></span></pre>
			<p><strong><span>mysqld_multi</span></strong>支援下面的選項：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--config-file=<i>name</i></span></p>
			<p>指定選項檔案名。這關係到<strong><span>mysqld_multi</span></strong>從哪裡尋找<span>[mysqld<i>N</i>]</span>選項組。沒有該選項，從通用<span>my.cnf</span>檔案讀所有選項。選項不影響 
			<strong><span>mysqld_multi</span></strong>從哪裡讀取自己的選項，總是從通用<span>my.cnf</span>檔案的<span>[mysqld_multi]</span>組讀取。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--example</span></p>
			<p>顯示示範選項檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span></p>
			<p>顯示幫助消息並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log=<i>name</i></span></p>
			<p>指定日誌檔案名。如果該檔案存在，後面為日誌輸出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqladmin=<i>prog_name</i></span></p>
			<p>用來停止伺服器的<strong><span>mysqladmin</span></strong>二進制。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--mysqld=<i>prog_name</i></span></p>
			<p>可用的<strong><span>mysqld</span></strong>二進制。請注意您還可以將該選項的值指定為<strong><span>mysqld_safe</span></strong>。選項被傳遞給 
			<strong><span>mysqld</span><span>。</span></strong>確保在<span>PATH</span>環境變數設定值或<strong><span>mysqld_safe</span></strong>中有<strong><span>mysqld</span></strong>所在目錄。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--no-log</span></p>
			<p>按照標準輸出打印日誌訊息，不要寫入日誌檔案。預設情況下，輸出寫入日誌檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--password=<i>password</i></span></p>
			<p>使用<strong><span>mysqladmin</span></strong>時使用的<span>MySQL</span>帳號的密碼。請注意該密碼值不是可選項，不像其它<span>MySQL</span>程式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--silent</span><span>
			</span></p>
			<p>禁用警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--tcp-ip</span></p>
			<p>通過<span>TCP/IP</span>端口而不是<span>Unix</span>套接字檔案來連接每個<span>MySQL</span>伺服器。<span>(</span>如果找不到套接字檔案， 
			伺服器仍然可以運行，但只能通過<span> TCP/IP</span>端口訪問）<span>。</span>預設情況下，使用<span>Unix</span>套接字檔案進行連接。該選項影響<span>stop</span>和<span>report</span>操作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user=<i>user_name</i></span></p>
			<p>使用<strong><span>mysqladmin</span></strong>時使用的<span>MySQL</span>帳號的帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--verbose</span><span>
			</span></p>
			<p>更詳細。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span></p>
			<p>顯示版本訊息並退出。</p>
			<p>關於<strong><span>mysqld_multi</span></strong>的一些註解：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>確保停止<strong><span>mysqld</span><span>伺服器</span></strong><span>(</span>用<strong><span>mysqladmin</span></strong>程式<span>)</span>的<span>MySQL</span>帳號在各個伺服器中的帳號和密碼相同。並且應確保帳號具有<span>SHUTDOWN</span>權限。如果您想要管理的伺服器的管理帳號有許多不同的帳號或密碼，您需要在每個伺服器上建立一個帳號，並具有相同的帳號和密碼。例如，您可以執行下面的命令為每個伺服器設置一個普通<span>multi_admin</span>帳號：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root -S /tmp/mysql.sock -p<i>root_password</i></span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT SHUTDOWN ON *.*</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>TO &#39;multi_admin&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;multipass&#39;</span><span>；</span></b></span></pre>
			<p>參見<a href="database-administration.html#privileges" title="5.7.2. How the Privilege System Works">5.7.2節，「權限系統工作原理」</a>。您必須為每個<strong><span>mysqld</span><span>伺服器執行該操作</span></strong>。當連接時適當更改連接參數。請注意帳號名的主機部分必須允許您用<span>multi_admin</span>從您想要運行<strong><span>mysqld_multi</span></strong>的主機進行連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<strong><span>mysqld_safe</span></strong>來啟動<strong><span>mysqld</span></strong><span>(</span>例如，<span>--mysqld=mysqld_safe</span><span>)</span>，<span>--pid-file</span>選項很重要。每個<strong><span>mysqld</span></strong>應有自己的程序<span>ID</span>檔案。使用<strong><span>mysqld_safe</span></strong>而不使用<strong><span>mysqld</span></strong>的好處是<strong><span>mysqld_safe</span></strong>「<span class="quote">守護</span>」其<strong><span>mysqld</span></strong>程序，如果用<span><span>kill
			</span>
			<span>
			–</span><span>9</span></span>發送的信號或由於其它原因（例如分段故障）程序終止，則重啟程序。請注意<strong><span>mysqld_safe</span></strong>指令需要您從某個位置啟動它。這說明運行<strong><span>mysqld_multi</span></strong>前您必須進入某個目錄。如果啟動時有問題，請參見<strong><span>mysqld_safe</span></strong>指令。特別是要檢查下列行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>----------------------------------------------------------------</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>MY_PWD=`pwd`</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># Check if we are starting this relative (for the binary release)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>if test -d $MY_PWD/data/mysql -a -f ./share/mysql/english/errmsg.sys -a \</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-x ./bin/mysqld</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>----------------------------------------------------------------</span></pre>
			<p>參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。上述行執行的測試應成功，否則您可能遇到了問題。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>每個<strong><span>mysqld</span></strong>的<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口號必須不同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>您可能想要為<strong><span>mysqld</span></strong>使用<span>--user</span>選項，但為此您需要用<span>Unix
			</span>
			<span>root</span>用戶運行<strong><span>mysqld_multi</span></strong>指令。選項檔案中有選項不要緊；如果您不是超級用戶，並且您用自己的<span>Unix</span>帳號重啟<strong><span>mysqld</span></strong>程序，您只會得到警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>重要</span></strong>：確保<strong><span>mysqld</span></strong>程序啟動所用<span>Unix</span>帳號可以完全訪問數據目錄。<em><span>不要</span></em>使用<span>Unix 
			root</span>帳號，除非您<em><span>知道</span></em>您在做什麼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>非常重要</span></strong>：使用<strong><span>mysqld_multi</span></strong>前，確保理解傳遞給<strong><span>mysqld</span><span>伺服器的</span></strong>選項的含義以及您<i>為什麼</i>想要獨立的<strong><span>mysqld</span></strong>程序。應清楚 
			在相同的數據目錄下使用多個<strong><span>mysqld</span><span>伺服器</span></strong>的危險。使用單獨的數據目錄，除非您<em><span>知道</span></em>您在做什麼。線上程系統中，在相同的數據目錄下啟動多個伺服器不會得到超性能。參見<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12節，「在同一台機器上運行多個MySQL伺服器」</a>。</p>
			<p>下面的示範顯示了您如何設置選項檔案來使用<strong><span>mysqld_multi</span></strong>。專門省去第<span>1</span>個和第<span>5</span>個<span>[mysqld<i>N</i>]</span>組來說明您的選項檔案可以稍有不同。這樣給您更大的靈活性。<strong><span>mysqld</span></strong>程式重啟或停止的順序由它們在選項檔案中的順序決定。</p>
			<pre><span># This file should probably be in your home dir (~/.my.cnf)</span></pre>
			<pre><span># or /etc/my.cnf</span></pre>
			<pre><span># Version 2.1 by Jani Tolonen</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld_multi]</span></pre>
			<pre><span>mysqld&nbsp;&nbsp;&nbsp;&nbsp; = /usr/local/bin/mysqld_safe</span></pre>
			<pre><span>mysqladmin = /usr/local/bin/mysqladmin</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = multi_admin</span></pre>
			<pre><span>password&nbsp;&nbsp; = multipass</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld2]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock2</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3307</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var2/hostname.pid2</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var2</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/english</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = john</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld3]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock3</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3308</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var3/hostname.pid3</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var3</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/swedish</span></pre>
			<pre><span>user&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= monty</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld4]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock4</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3309</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var4/hostname.pid4</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var4</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/estonia</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = tonu</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld6]</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock6</span></pre>
			<pre><span>port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 3311</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /usr/local/mysql/var6/hostname.pid6</span></pre>
			<pre><span>datadir&nbsp;&nbsp;&nbsp; = /usr/local/mysql/var6</span></pre>
			<pre><span>language&nbsp;&nbsp; = /usr/local/share/mysql/japanese</span></pre>
			<pre><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = jani</span></pre>
			<p>參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="instance-manager"></a>
		5.2.&nbsp;mysqlmanager：MySQL實例管理器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#instance-manager-startup-process">
			5.2.1. 用MySQL實例管理器啟動MySQL伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-security">
			5.2.2. 連接到MySQL實例管理器並建立用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-command-line-options">
			5.2.3. MySQL實例管理器命令行選項</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-configuration-files">
			5.2.4. MySQL實例管理器配置檔案</a></span></dt><dt><span class="section"><a href="database-administration.html#instance-manager-commands">
			5.2.5. MySQL實例管理器識別的命令</a></span></dt></dl></div>
		<p><span>MySQL</span>實例管理器<span>(IM)</span>是通過<span>TCP/IP</span>端口運行的後台程式，用來監視和管理<span>MySQL</span>資料庫伺服器實例。<span>MySQL</span>實例管理器 
		適合<span>Unix-</span>類作業系統和<span>Windows</span>。</p>
		<p>可以在<span>mysqld_safe</span>指令使用<span>MySQL</span>實例管理器來啟動和停止<span>MySQL</span>伺服器，<strong><span>甚至可以從一個遠程主機</span></strong>。<span>MySQL</span>實例管理器還執行<strong><span>mysqld_multi</span></strong>指令的功能<span>(</span>和大多數語法<span>)</span>。下面為<span>MySQL</span>實例管理器的詳細描述。</p>
		<div class="section">
			<div class="titlepage">
				<div>
					<div>
						<h3 class="title">
						<a name="instance-manager-startup-process"></a>
			5.2.1.&nbsp;用MySQL實例管理器啟動MySQL伺服器</h3></div></div></div>
			<p>一般情況，用<strong><span>mysql.server</span></strong>指令啟動<span>MySQL Database Server</span>（<span>MySQL</span>資料庫伺服器），通常駐留在<span>/etc/init.d/</span><span>
			</span>檔案夾。預設情況下該指令使用<strong><span>mysqld_safe</span></strong>指令。但是，您可以在指令中將<span>use_mysqld_safe</span>變數設置為<span>0</span><span>(</span>零<span>)</span>以便使用<span>MySQL</span>實例管理器來啟動伺服器。</p>
			<p>在這種情況下，<span>Instance Manager</span>的行為取決於<span>MySQL</span>配置檔案中的選項。如果沒有配置檔案，<span>MySQL</span>實例管理器建立<span>mysqld</span>實例並試圖用預設<span>(</span>編譯嵌入的<span>)</span>配置來啟動。這說明如果<strong><span>mysqld</span><span>沒有</span></strong>安裝到
			預設位置，<span>IM</span>不能猜出它的位置。如果您已經在非標準位置安裝了<span>MySQL</span>伺服器，您應使用配置檔案。參見<a href="installing.html#installation-layouts" title="2.1.5. Installation Layouts">2.1.5節，「安裝佈局」</a>。</p>
			<p>如果有配置檔案，<span>IM</span>將分析配置檔案搜索<span>[mysqld]</span>部分<span>(</span>例如<span>[mysqld]</span>、<span>[mysqld1]</span>、<span>[mysqld2]</span>等<span>)</span>。每個部分指定一個實例。啟動時<span>IM</span>將啟動所有找到的實例。<span>IM</span>關閉時預設停止所有實例。</p>
			<p>請注意有一個特殊選項<span>mysqld-path</span><span>(</span><span>mysqld-path 
			= <i>path-to-mysqld- binary</i></span><span>)</span>，只能用<span>IM</span>識別。使用該變數讓<span>IM</span>知道<strong><span>mysqld</span></strong>二進制駐留在哪兒。您還應該為伺服器設置<span>basedir</span>和<span>datadir</span>選項。</p>
			<p>啟用<span>MySQL</span>實例管理器的典型<span>MySQL</span>伺服器啟動<span>/</span>關閉循環為：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;</span>用<strong><span>/etc/init.d/mysql</span></strong>指令啟動<span>MySQL</span>實例管理器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;MySQL</span>實例管理器啟動所有實例並監視它們。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果某個伺服器實例失敗，<span>MySQL</span>實例管理器重啟它。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>MySQL</span>實例管理器被關閉<span>(</span>例如用<strong><span>/etc/init.d/mysql 
			stop</span></strong>命令<span>)</span>，所有實例被<span>MySQL</span>實例管理器關閉。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="instance-manager-security"></a>
			5.2.2.&nbsp;連接到MySQL實例管理器並建立用戶帳號</h3></div></div></div>
			<p>使用<span>MySQL</span>客戶端<span>-</span>伺服器協議來處理同<span>MySQL</span>實例管理器之間的通信。您不能使用標準<strong><span 
>mysql</span></strong>客戶端程式和<span>MySQL C API</span>來連接<span>IM</span>。<span>IM</span>支援客戶端工具和<span>mysql-4.1</span>或以後的版本所分發的庫所用的<span>MySQL</span>客戶端<span>-</span>伺服器協議版本。</p>
			<p><span>IM</span>將用戶訊息保存到密碼檔案中。密碼檔案的預設位置為<span>/etc/mysqlmanager.passwd</span>。</p>
			<p>密碼應類似於：</p>
			<pre><span>petr:*35110DC9B4D8140F5DE667E28C72DD2597B5C848</span></pre>
			<p>要想生成密碼用<strong><span 
>--passwd</span></strong>選項使用<span>IM</span>。則輸出可以重定向到<span>/etc/mysqlmanager.passwd</span>檔案以新增新用戶。下面為示範命令。</p>
			<pre><span>./mysqlmanager --passwd &gt;&gt; /etc/mysqlmanager.passwd</span></pre>
			<pre><span>Creating record for new user.</span></pre>
			<pre><span>Enter user name: mike</span></pre>
			<pre><span>Enter password: &lt;password&gt;</span></pre>
			<pre><span>Re-type password: &lt;password&gt;</span></pre>
			<p>下面的行將加到<span>/etc/mysqlmanager.passwd</span>：</p>
			<pre><span>mike:*00A51F3F48415C7D4E8908980D443C29C69B60C9</span></pre>
			<p>如果<span>/etc/mysqlmanager.passwd</span>檔案中沒有該條，則不能連接<span>IM</span>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="instance-manager-command-line-options"></a>
			5.2.3.&nbsp;MySQL實例管理器命令行選項</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>MySQL</span>實例管理器支援許多命令行選項。執行<strong><span>./mysqlmanager 
			--help</span></strong>命令可以簡單列出。有下面的選項：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span>，<span>-?</span><span>
			</span></p>
			<p>顯示幫助消息並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bind-address=<i>name</i></span></p>
			<p>綁定地址用於連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-mysqld-path=<i>name</i></span></p>
			<p>在<span>Unix</span>中，如果實例部分沒有路徑，則為尋找<span>MySQL</span>伺服器二進制的地點。例如：<span>default-mysqld-path 
			= /usr/sbin/mysqld</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-file=<i>file_name</i></span></p>
			<p>從給定檔案讀<span>Instance 
			Manager</span>和<span>MySQL</span>伺服器設定值。所有<span>Instance 
			Manager</span>更改的配置將加入該檔案。只能用於<span>Instance Manager</span>的第一選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--install</span></p>
			<p>在<span>Windows</span>中，將<span>Instance 
			Manager</span>安裝為<span>Windows</span>服務。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log=<i>name</i></span></p>
			<p><span>IM</span>日誌檔案的路徑。結合<strong><span>--run-as-service</span></strong>選項使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--monitoring-interval=<i>Seconds</i></span></p>
			<p>監視實例的間隔，單位為秒。<span>Instance 
			Manager</span>將嘗試連接每個監視的實例來檢查它們是否是活動的<span>/</span>沒有掛起。出現故障，<span>IM</span>將重啟幾次<span>(</span>實際上是多次<span>)</span>實例。可以用<span>nonguarded</span>選項為特定實例禁用該行為。如果未給定任何值，
			預設使用<span>20</span>秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--passwd</span>，<span>-P</span></p>
			<p>編寫<span>passwd</span>檔案並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--password-file=<i>name</i></span></p>
			<p>從該檔案中尋找<span>Instance 
			Manager</span>用戶和密碼。預設檔案是<span>/etc/mysqlmanager.passwd</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=<i>name</i></span></p>
			<p>使用的程序<span>ID</span>檔案。預設情況下，該檔案檔案名為<span>mysqlmanager.pid</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>-- port=<i>port_num</i></span></p>
			<p>用於連接的端口號。<span>(IANA</span>分配的
			預設端口號為<span>2273)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--print-defaults</span><span>
			</span></p>
			<p>打印當前的預設值並退出。只能用作<span>Instance 
			Manager</span>的第一選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--remove</span></p>
			<p>在<span>Windows</span>中，刪掉<span>Instance 
			Manager Windows</span>服務。假定前面已經用<span>--install</span>運行了<span>Instance 
			Manager</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--run-as-service</span></p>
			<p>
			使完善程序變為後台程式並啟動。完善程序很簡單，不易崩潰。出現故障後它將自己重啟<span>IM</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=<i>name</i></span></p>
			<p><span>Unix</span>中用於連接的套接字檔案。預設情況下，檔案名為<span>/tmp/mysqlmanager.sock</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--standalone</span></p>
			<p>在<span>Windows</span>中以單機模式運行<span>Instance 
			Manager</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user=<i>name</i></span></p>
			<p>啟動並運行<strong><span 
>mysqlmanager</span></strong>的帳號。建議使用運行<strong><span>mysqld</span><span
細明體;">伺服器</span></strong>的用戶帳號來運行<strong><span>mysqlmanager</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span><span>,
			</span>
			<span>-V</span></p>
			<p>輸出版本訊息並退出。</p>
			<h3 class="title"><a name="instance-manager-configuration-files"></a>
			5.2.4.&nbsp;MySQL實例管理器配置檔案</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>Instance Manager</span>使用標準<span>my.cnf</span>檔案。它使用<span>[manager]</span>部分為自己讀取選項並讀取<span>[mysqld]</span>部分來建立實例。<span>[manager]</span>部分包含上述列出的選項。下面為<span>[manager]</span>部分示範：<pre><span># MySQL Instance Manager options section</span></pre>
			<pre><span>[manager]</span></pre>
			<pre><span>default-mysqld-path = /usr/local/mysql/libexec/mysqld</span></pre>
			<pre><span>socket=/tmp/manager.sock</span></pre>
			<pre><span>pid-file=/tmp/manager.pid</span></pre>
			<pre><span>password-file = /home/cps/.mysqlmanager.passwd</span></pre>
			<pre><span>monitoring-interval = 2</span></pre>
			<pre><span>port = 1999</span></pre>
			<pre><span>bind-address = 192.168.1.5</span></pre>
			<p><span>MySQL</span>實例管理器只在<span>Unix</span>中讀取並管理<span>/etc/my.cnf</span>檔案。在<span>Windows</span>中，<span>MySQL</span>實例管理器從<span>Instance 
			Manager</span>的安裝目錄讀取<span>my.ini</span>檔案。用<span>--defaults-file=<i>file_ 
			name</i></span>選項可以更改預設選項檔案的位置。</p>
			<p>實例部分指定啟動時給每個實例的選項。這些主要是普通<span>MySQL</span>伺服器選項，但有一些<span>IM-</span>專用選項：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>mysqld-path = 
			&lt;path-to-mysqld-binary&gt;</span></p>
			<p><strong>
			<span>mysqld</span><span>伺服器</span></strong>二進制的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>shutdown-delay = <i>
			Seconds</i></span></p>
			<p><span>IM</span>應等待實例關閉的秒數。
			預設為<span>35</span>秒。超過延遲時間後，<span>IM</span>假定實例正掛起並試圖「<span><span>kill
			</span>
			<span>
			–</span><span>9</span><span>」</span></span>它。如果您使用帶<span>large</span>資料表的<span>InnoDB</span>，您應當增加該值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>nonguarded</span></p>
			<p>如果您想要為某個實例禁用<span>IM</span>監視功能，應設置該選項。</p>
			<p>下面給出了幾個實例示範。</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span>mysqld-path=/usr/local/mysql/libexec/mysqld</span></pre>
			<pre><span>socket=/tmp/mysql.sock</span></pre>
			<pre><span>port=3307</span></pre>
			<pre><span>server_id=1</span></pre>
			<pre><span>skip-stack-trace</span></pre>
			<pre><span>core-file</span></pre>
			<pre><span>skip-bdb</span></pre>
			<pre><span>log-bin</span></pre>
			<pre><span>log-error</span></pre>
			<pre><span>log=mylog</span></pre>
			<pre><span>log-slow-queries</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld2]</span></pre>
			<pre><span>nonguarded</span></pre>
			<pre><span>port=3308</span></pre>
			<pre><span>server_id=2</span></pre>
			<pre><span>mysqld-path= /home/cps/mysql/trees/mysql-5.1/sql/mysqld</span></pre>
			<pre><span>socket&nbsp;&nbsp;&nbsp;&nbsp; = /tmp/mysql.sock5</span></pre>
			<pre><span>pid-file&nbsp;&nbsp; = /tmp/hostname.pid5</span></pre>
			<pre><span>datadir= /home/cps/mysql_data/data_dir1</span></pre>
			<pre><span>language=/home/cps/mysql/trees/mysql-5.1/sql/share/english</span></pre>
			<pre><span>log-bin</span></pre>
			<p><span>log=/tmp/fordel.log</span></p>
			<h3 class="title"><a name="instance-manager-commands"></a>
			5.2.5.&nbsp;MySQL實例管理器識別的命令</h3></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		一旦您已經為<span>MySQL</span>實例管理器設置了一個密碼檔案並且<span>IM</span>正在運行，您可以連接它。您可以使用<strong><span 
>mysql</span></strong>客戶端工具通過標準<span>MySQL API</span>來連接。以下是<span>MySQL</span>實例管理器目前可以接收的命令的清單和例子。<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>START INSTANCE &lt;instance_name&gt;</span></p>
		<p>該命令將試圖啟動一個實例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>START INSTANCE mysqld4;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0,00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>STOP INSTANCE &lt;instance_name&gt;</span></p>
		<p>將試圖停止一個實例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>STOP INSTANCE mysqld4;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0,00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCES</span></p>
		<p>顯示所有載入的實例名：</p>
		<pre ><span>mysql&gt; </span><span><b><span>show instances;</span></b></span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>| instance_name | status&nbsp; |</span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>| mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | offline |</span></pre>
		<pre ><span>| mysqld4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | online&nbsp; |</span></pre>
		<pre ><span>| mysqld2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | offline |</span></pre>
		<pre ><span>+---------------+---------+</span></pre>
		<pre ><span>3 rows in set (0,04 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCE STATUS 
		&lt;instance_name&gt;</span></p>
		<p>顯示選定的實例的狀態和版本訊息：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW INSTANCE STATUS mysqld3;</span></b></span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>| instance_name | status | version |</span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>| mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | online | unknown |</span></pre>
		<pre ><span>+---------------+--------+---------+</span></pre>
		<pre ><span>1 row in set (0.00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW INSTANCE OPTIONS 
		&lt;instance_name&gt;</span></p>
		<p>顯示實例使用的選項：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW INSTANCE OPTIONS mysqld3;</span></b></span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>| option_name&nbsp;&nbsp; | value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>| instance_name | mysqld3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
		<pre ><span>| mysqld-path&nbsp;&nbsp; | /home/cps/mysql/trees/mysql-4.1/sql/mysqld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 3309&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| socket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /tmp/mysql.sock3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| pid-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | hostname.pid3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| datadir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /home/cps/mysql_data/data_dir1/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /home/cps/mysql/trees/mysql-4.1/sql/share/english |</span></pre>
		<pre ><span>+---------------+---------------------------------------------------+</span></pre>
		<pre ><span>7 rows in set (0.01 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW &lt;instance_name&gt; LOG FILES</span></p>
		<p>
		該命令提供實例使用的所有日誌檔案。結果包含日誌檔案的路徑和日誌檔案的大小。如果沒有在配置檔案中指定日誌檔案的路徑<span> 
		(</span>例如<span>log=/var/mysql.log</span><span>)</span>，<span>IM</span>試圖猜出它的位置。如果<span>IM</span>不能猜出日誌檔案的位置，您應明確指定日誌檔案的位置。</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW mysqld LOG FILES;</span></b></span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>| Logfile&nbsp;&nbsp;&nbsp;&nbsp; | Path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Filesize |</span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>| ERROR LOG&nbsp;&nbsp; | /home/cps/var/mysql/owlet.err&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 9186&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>| GENERAL LOG | /home/cps/var/mysql/owlet.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 471503&nbsp;&nbsp; |</span></pre>
		<pre ><span>| SLOW LOG&nbsp;&nbsp;&nbsp; | /home/cps/var/mysql/owlet-slow.log | 4463&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
		<pre ><span>+-------------+------------------------------------+----------+</span></pre>
		<pre ><span>3 rows in set (0.01 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SHOW &lt;instance_name&gt; LOG 
		{ERROR | SLOW | GENERAL} size[,offset_from_end]</span></p>
		<p>該命令搜尋指定的日誌檔案的一部分。因為大多數用戶關注最新的日誌消息，用<span>size</span>參數定義您想要從日誌末尾開始索取的字節數。您可以指定可選<span>offset_from_end</span>參數從日誌檔案中部索取數據。下面的示範可以索取<span>21</span>個字節的數據，從日誌檔案末尾開始<span>23</span>個字節，<span>2</span>個字節用於結束：</p>
		<pre ><span>mysql&gt; </span><span><b><span>SHOW mysqld LOG GENERAL 21, 2;</span></b></span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>| Log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;|</span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>| using password: YES |</span></pre>
		<pre ><span>+---------------------+</span></pre>
		<pre ><span>1 row in set (0.00 sec)</span></pre>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>SET instance_name.option_name=option_value</span></p>
		<p>該命令編輯指定的實例的配置檔案以更改<span>/</span>增加實例選項。<span>IM</span>假定配置檔案位於<span>/etc/my.cnf</span>。您應檢查檔案是否存在，並具有合適的權限。</p>
		<pre ><span>mysql&gt; </span><span><b><span>SET mysqld2.port=3322;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.00 sec)</span></pre>
		<p>在<span>MySQL</span>伺服器重啟前，對配置檔案進行的更改不會生效。並且，執行<span>FLUSH 
		INSTANCES</span>命令後，才會將這些更改保存到<span>Instance Manager</span>的實例設定值的本地緩存中。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>UNSET 
		instance_name.option_name</span></p>
		<p>該命令從實例的配置檔案刪除一個選項。</p>
		<pre ><span>mysql&gt; </span><span><b><span>UNSET mysqld2.port;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.00 sec)</span></pre>
		<p>在<span>MySQL</span>伺服器重啟前，對配置檔案進行的更改不會生效。並且，執行<span>FLUSH 
		INSTANCES</span>命令後，才會將這些更改保存到<span>Instance Manager</span>的實例設定值的本地緩存中。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>FLUSH INSTANCES</span></p>
		<p>該命令強制<span>IM</span>重讀配置檔案並清空內部結構。編輯配置檔案後應執行該命令。該命令不重啟實例：</p>
		<pre ><span>mysql&gt; </span><span><b><span>FLUSH INSTANCES;</span></b></span></pre>
		<pre ><span>Query OK, 0 rows affected (0.04 sec)</span></pre>
		<h2 class="title"><a name="mysqld"></a>
		5.3.&nbsp;mysqld：MySQL伺服器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#server-options">5.3.1. <span><strong class="command">
			mysqld</strong></span>命令行選項</a></span></dt><dt><span class="section"><a href="database-administration.html#server-sql-mode">
			5.3.2. SQL伺服器模式</a></span></dt><dt><span class="section"><a href="database-administration.html#server-system-variables">
			5.3.3. 伺服器系統變數</a></span></dt><dt><span class="section"><a href="database-administration.html#server-status-variables">
			5.3.4. 伺服器狀態變數</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			<strong><span>mysqld</span></strong>是<span>MySQL</span>伺服器。下面討論<span>MySQL</span>伺服器的配置：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器支援的啟動選項 </p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如何設置伺服器<span>SQL</span>模式</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器系統變數 </p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器狀態變數</p>
			<h3 class="title"><a name="server-options"></a>5.3.1. <span><strong class="command">mysqld</strong></span>命令行選項</h3></div></div></div><a class="indexterm" name="id2747244"></a><a class="indexterm" name="id2747254"></a><a class="indexterm" name="id2747264"></a>
			<p>當啟動<strong><span>mysqld</span><span>伺服器</span></strong>時，您可以使用<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3節，「指定程式選項」</a>中描述的方法指定程式選項。最常用的方法是在選項檔案中或在命令行提供選項。但是，在大多數情況下，希望伺服器每次運行時使用相同的選項。最好的方法是確保將它們列在選項檔案中。參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</p>
			<p><strong><span>mysqld</span></strong>從<span>[mysqld]</span>和<span>[server]</span>組讀取選項。<strong><span 
>mysqld_safe</span></strong>從<span>[mysqld]</span>、<span>[server]</span>、<span>[mysqld_safe]</span>和<span>[safe_mysqld]</span>組讀取選項。<strong><span 
>mysql.server</span></strong>從 
			<span>[mysqld]</span>和<span>[mysql.server]</span>組讀取選項。嵌入式<span>MySQL</span>伺服器通常從<span>[server]</span>、<span>[embedded]</span>和<span>[<i>xxxxx_SERVER</i>]</span>組讀取選項，其中<span><i><span>xxxxx</span></i></span>是伺服器嵌入的應用程式名。</p>
			<p><strong><span>mysqld</span></strong>接受許多命令行選項。執行<strong><span>mysqld 
			--help</span></strong>可以簡單列出來。要想看全部列資料表列，使用命令<strong><span>mysqld 
			--verbose --help</span></strong>。</p>
			<p>下面列出了一些最常用的伺服器選項。其它的選項在其它地方描述：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>影響安全的選項：參見<a href="database-administration.html#privileges-options" title="5.6.3. Startup Options for mysqld Concerning Security">5.6.3節，「Mysqld安全相關啟動選項<span><strong class="command"></strong></span>」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SSL-</span>相關選項：參見<a href="database-administration.html#ssl-options" title="5.8.7.6. SSL Command-Line Options">5.8.7.6節，「SSL命令行選項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>二進制日誌控制選項：參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>複製相關選項：參見<a href="replication.html#replication-options" title="6.8. Replication Startup Options">6.8節，「複製啟動選項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>特定儲存引擎相關選項：參見<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1節，「MyISAM啟動選項」</a>、<a href="storage-engines.html#bdb-start" title="15.5.3. BDB Startup Options">15.5.3節，「BDB啟動選項」</a>和<a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">15.2.4節，「InnoDB啟動選項」</a>。</p>
			<p>您還可以將變數名作為一個選項，設置伺服器系統變數的值，如本節後面所述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--help</span>，<span>-?</span></p>
			<p>顯示簡短的幫助消息並退出。使用<span>--verbose</span>和<span>--help</span>選項來看全部內容。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--allow-suspicious-udfs</span></p>
			<p>該選項控制是否用戶定義的函數只有一個<span>xxx</span>符，用作可載入的主函數。預設情況下，該選項被關閉，只有至少有一個附屬符的<span>UDF&nbsp;
			</span>可以載入。這樣可以防止從未包含合法<span>UDF</span>的共享檔案裝載函數。參見<a href="extending-mysql.html#udf-security" title="27.2.3.6. User-Defined Function Security Precautions">27.2.3.6節，「用戶定義函數安全注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ansi</span></p>
			<p>使用標準<span>(ANSI)SQL</span>語法代替<span>MySQL</span>語法。參見<a href="introduction.html#ansi-mode" title="1.8.3. Running MySQL in ANSI Mode">1.8.3節，「在ANSI模式下運行MySQL」</a>。使用<span>--sql-mode</span>選項可以更精確控制伺服器<span>SQL</span>模式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--basedir=<i>path</i>, -b
			<i>path</i></span></p>
			<p><span>MySQL</span>安裝目錄的路徑。通常所有路徑根據該路徑來解析。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bind-address=<i>IP</i></span></p>
			<p>待綁定的<span>IP</span>地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--bootstrap</span></p>
			<p><strong>
			<span>mysql_install_db</span></strong>指令使用該選項來建立<span>MySQL</span>授權資料表，不需要啟動<span>MySQL</span>伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--console</span></p>
			<p>將錯誤日誌消息寫入<span>stderr</span>和<span>stdout</span>，即使指定了<span>--log-error</span>。在<span>Windows</span>中，如果使用該選項，<strong><span>mysqld</span></strong>不關閉控制台窗口。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--character-sets-dir=<i>path</i></span></p>
			<p>字元編碼安裝的目錄。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--chroot=path</span></p>
			<p>通過<span>chroot()</span>系統使用在啟動過程中將<strong><span>mysqld</span></strong>伺服器放入一個封閉環境中。這是推薦的一個安全措施。請注意使用該選項可以 
			限制<span>LOAD 
			DATA INFILE</span>和<span>SELECT 
			... INTO OUTFILE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--character-set-server=<i>charset</i></span></p>
			<p>使用<span><i><span>charset</span></i></span>作為
			預設伺服器字元編碼。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--core-file</span></p>
			<p>如果<strong><span>mysqld</span></strong>終止，寫內核檔案。在某些系統中，您還必須為<strong><span>mysqld_safe</span></strong>指定<span>--core-file-size
			</span>選項。參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。請注意對於一些系統，例如<span>Solaris</span>，如果您使用<span>--user</span>選項不會獲得內核檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--collation-server=<i>collation</i></span></p>
			<p>使用<span><i><span>collation</span></i></span>作為
			預設伺服器校對規則。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--datadir=<i>path</i>, -h
			<i>path</i></span></p>
			<p>數據目錄的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--debug[=<i>debug_options</i>]</span><span>,
			</span>
			<span>-# [<i>debug_options</i>]</span></p>
			<p>如果<span>MySQL</span>配置了<span>--with-debug</span>，您可以使用該選項來獲得一個跟蹤檔案，跟蹤<strong><span>mysqld</span></strong>正進行的操作。<span><i><span>debug_options</span></i></span>字串通常為<span><span>&#39;d:t:o</span><span>，<i><span>file_name</span></i><span>&#39;</span></span></span>。參見<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2節，「建立跟蹤檔案」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--default-character-set=<i>charset</i></span></p>
			<p>使用<span><i><span>char</span><span>設置</span></i></span>作為
			預設字元編碼。由於<span>--character-set-server</span>，反對使用該選項。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-collation=<i>collation</i></span></p>
			<p>使用<span><i><span>collation</span></i></span><span>
			</span>作為預設校對規則。由於<span>--collation-server</span>，反對使用該選項。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-storage-engine=<i>type</i></span></p>
			<p>該選項為<span>--default-table-type</span>的同義詞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-table-type=<i>type</i></span></p>
			<p>設置資料表的預設類型。參見<a href="storage-engines.html">第15章：</a><a href="storage-engines.html" title="Chapter 15. Storage Engines and Table Types"><i>儲存引擎和資料表類型</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--default-time-zone=<i>type</i></span></p>
			<p>設置預設伺服器時區。該選項設置全局<span>time_zone</span>系統變數。如果未給出該選項，
			預設時區與系統時區相同<span>(</span>用<span>system_time_zone</span>系統變數值給定<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--delay-key-write[= OFF | 
			ON | ALL]</span></p>
			<p>如何使用<span>DELAYED 
			KEYS</span>選項。鍵寫入延遲會造成再次寫<span>MyISAM</span>資料表時鍵緩衝區不能被清空。<span>OFF</span>禁用延遲的鍵寫入。<span>ON</span>啟用用<span>DELAYED 
			KEYS</span>選項建立的資料表的延遲的鍵寫入。<span>ALL</span>延遲所有<span>MyISAM</span>資料表的鍵寫入。參見<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2節，「調節伺服器參數」</a>。參見<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1節，「MyISAM啟動選項」</a>。</p>
			<p><strong>
			<span>注</span></strong>釋：如果您將該變數設置為<span>ALL</span>，您不應從另一個正使用<span>MyISAM</span>資料表的程式中使用<span>MyISAM</span>資料表<span>(</span>例如從另一個<span>MySQL</span>伺服器或用<strong><span>myisamchk</span></strong><span>)</span>。這樣操作會導致索引破壞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--des-key-file=<i>file_name</i></span></p>
			<p>從該檔案讀<span>DES_ENCRYPT()</span>和<span>DES_DECRYPT()</span>使用的
			預設鍵。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--enable-named-pipe</span></p>
			<p>啟用命名管道支援。該選項只適用<span>Windows NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>系統，並且只適用支援命名管道連接的<strong><span>mysqld-nt</span></strong>和<strong><span>mysqld-max-nt</span></strong>伺服器。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--exit-info[=<i>flags</i>]</span><span>,
			</span>
			<span>-T [<i>flags</i>]</span></p>
			<p>這是不同標誌的一個位掩碼，您可以用來調試<strong><span>mysqld</span><span
細明體;">伺服器</span></strong>。不要使用該選項，除非您<i>確切</i>知道它在做什麼！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--external-locking</span></p>
			<p>啟用系統鎖定。請注意如果您在<span>lockd</span>不能完全工作的系統上使用該選項<span>(</span>例如在<span>Linux</span>中<span>)</span>，<strong><span>mysqld</span></strong>容易死鎖。該選項以前叫<span>--enable-locking</span>。</p>
			<p><strong>
			<span>注</span></strong>釋：如果您在許多<span>MySQL</span>程序中使用該選項來更新<span>MyISAM</span>資料表，您必須確保滿足下述條件：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>使用正被另一個程序更新的資料表的查詢的緩存不可使用。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>不應在共享資料表中使用<span>--delay-key-write=ALL</span>或<span>DELAY_KEY_WRITE=1</span>。</p>
			<p>最簡單的方法是結合使用<span>--external-locking</span>和<span><span>--delay-key-write=OFF 
			--query-cache-size=0</span><span>。</span></span></p>
			<p><span>(</span>預設不能實現，因為在許多設置中，結合使用上述選項很有用）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--flush</span></p>
			<p>執行<span>SQL</span>語句後向硬盤上清空更改。一般情況執行<span>SQL</span>語句後<span> 
			MySQL</span>向硬盤寫入所有更改，讓作業系統處理與硬盤的同步。參見<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2節，「如果MySQL依然崩潰，應作些什麼」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--init-file=<i>file</i></span></p>
			<p>啟動時從該檔案讀<span>SQL</span>語句。每個語句必須在同一行中並且不應包括註釋。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--language=<i>lang_name</i>, 
			-L <i>lang_name</i></span></p>
			<p>用給定語言給出客戶端錯誤消息。<span><i><span>lang_name</span></i></span>可以為語言名或語言檔案安裝目錄的全路徑名。參見<a href="database-administration.html#languages" title="5.10.2. Setting the Error Message Language">5.10.2節，「設置錯誤消息語言」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--large-pages</span></p>
			<p>一些硬件<span>/</span>作業系統架構支援大於
			預設值<span>(</span>通常<span>4 
			KB)</span>的內存頁。實際支援取決於使用的硬件和<span>OS</span>。大量訪問內存的應用程式通過使用較大的頁，降低了<span>Translation 
			Lookaside Buffer (TLB)</span>損失，可以改善性能。</p>
			<p>目前，<span>MySQL</span>只在<span>Linux</span>中支援大頁面<span>(</span>在<span>Linux</span>中被稱作<span>HugeTLB)</span>。我們已經計劃將該支援延伸到<span>FreeBSD</span>、<span>Solaris</span>和其它可能的平台。</p>
			<p>在<span>Linux</span>中可以使用大頁面前，需要配置<span>HugeTLB</span>內存池。參考<span>Linux</span>內核原始碼中的<span>hugetlbpage.txt</span>檔案。</p>
			<p>預設情況下該選項被禁用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>---log[=<i>file</i>]</span><span>,
			</span>
			<span>-l [<i>file</i>]</span></p>
			<p>日誌連接和對檔案的查詢。參見<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2節，「通用查詢日誌」</a>。如果您不指定檔案名，<span>MySQL</span>使用<span><i><span>host_name</span></i><span>.log</span></span>作為檔案名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-bin=[<i>file</i>]</span></p>
			<p>二進制日誌檔案。將更改數據的所有查詢記入該檔案。用於備份和複製。參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。建議指定一個檔案名<span>(</span>原因參見<a href="problems.html#open-bugs" title="A.8.1. Open Issues in MySQL">A.8.1節，「MySQL中的打開事宜」</a><span>)</span>，否則<span>MySQL</span>使用<span><i><span>host_name</span></i><span>-bin</span></span>作為日誌檔案基本名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-bin-index[=<i>file</i>]</span></p>
			<p>二進制日誌檔案名的索引檔案。參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。如果您不指定檔案名，並且如果您沒有在<span>--log-bin</span>中指定，<span>MySQL</span>使用<span><i><span>host_name</span></i><span>-bin.index</span></span>作為檔案名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--log-bin-trust-routine-creators[={0|1}]</span></p>
			<p>沒有參數或參數為<span>1,</span>該選項將系統變數<span>log_bin_trust_routine_creators</span>設置為<span>1</span>。為參數<span> 
			0</span>時，該選項將系統變數設置為<span>0</span>。<span>log_bin_trust_routine_creators</span>影響<span>MySQL</span>如何對保存的程式的建立強加限制。參見<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4節，「儲存子程式和觸發程式的二進制日誌功能」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-error[=<i>file</i>]</span></p>
			<p>該檔案的日誌錯誤和啟動消息。參見<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1節，「錯誤日誌」</a>。如果您不指定檔案名，<span>MySQL</span>使用<span><i><span>host_name.err</span></i></span>作為檔案名。如果檔案名沒有延伸名，則加上<span>.err</span>延伸名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-isam[=<i>file</i>]</span></p>
			<p>將所有<span>MyISAM</span>更改記入該檔案<span>(</span>只有調試<span>MyISAM</span>時才使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--log-long-format</span></p>
			<p>
			記錄激活的更新日誌、二進制更新日誌、和慢查詢日誌的大量訊息。例如，所有查詢的帳號和時間戳將記錄下來。不贊成選用該選項，因為它現在代資料表
			預設記錄行為。<span>(</span>參見<span>--log-short-format</span>描述）<span>。</span><span>--log-queries-not-using-indexes</span>選項適合將未使用索引的查詢記錄到慢查詢日誌中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			--log-queries-not-using-indexes</span></p>
			<p>如果您結合<span>--log-slow-queries</span>使用該選項，未使用索引的查詢也被記錄到慢查詢日誌中。參見<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4節，「慢速查詢日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-short-format</span></p>
			<p>
			記錄激活的更新日誌、二進制更新日誌、和慢查詢日誌的少量訊息。例如，帳號和時間戳不記錄下來。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			---log-slow-admin-statements</span></p>
			<p>將慢管理語句例如<span>OPTIMIZE 
			TABLE</span>、<span>ANALYZE 
			TABLE</span>和<span>ALTER 
			TABLE</span>記入慢查詢日誌。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-slow-queries[=<i>file</i>]</span></p>
			<p>將所有執行時間超過<span>long_query_time</span><span>
			</span>秒的查詢記入該檔案。參見<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4節，「慢速查詢日誌」</a>。詳細訊息參見<span>--log-long-format</span>和<span>--log-short-format</span>選項描述。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--log-warnings</span><span>,
			</span>
			<span>-W</span></p>
			<p>將警告例如<span>Aborted 
			connection...</span>打印到錯誤日誌。建議啟用該選項，例如，如果您使用複製<span> 
			(</span>您可以得到關於所發生事情的詳細訊息，例如關於網絡故障和重新連接的消息<span>)</span>。預設情況下啟用該選項；要想禁用它，使用<span>--skip-log-warnings</span>。中斷的連接不會記入錯誤日誌，除非值大於<span>1</span>。參見<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10節，「通信錯誤和失效連接」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--low-priority-updates</span></p>
			<p>資料表修改<span>(</span><span>INSERT</span><span>,
			</span>
			<span>REPLACE</span><span>,
			</span>
			<span>DELETE</span><span>,
			</span>
			<span>UPDATE</span><span>)</span>比選擇的優先級要低。也可以通過<span>{INSERT 
			| REPLACE | DELETE | UPDATE} LOW_PRIORITY ...</span><span>
			</span>來降低某個查詢的優先級來實現，或通過<span>SET 
			LOW_PRIORITY_UPDATES=1</span>來更改一個線程的優先級。參見<a href="optimization.html#table-locking" title="7.3.2. Table Locking Issues">7.3.2節，「資料表鎖定事宜」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>&nbsp;--memlock</span></p>
			<p><strong>
			<span>將</span><span>mysqld</span></strong><span>
			</span>程序鎖定在內存中。在支援<span>mlockall()</span>系統使用的系統上有效，例如<span>Solaris</span>。如果作業系統使<strong><span>mysqld</span></strong>在硬盤上交換時出現問題，可以為您提供幫助。請注意使用該選項時需要以<span>root</span>運行伺服器，但從安全考慮並不是一個好注意。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--myisam-recover [=<i>option</i>[,<i>option</i>...]]]</span></p>
			<p>將儲存引擎<span>MyISAM</span>設置為恢復模式。該選項值是<span>DEFAULT</span>、<span>BACKUP</span>、<span>FORCE</span>或<span>QUICK</span>值的任何組合。如果您指定多個值，用逗號間隔開。您還可以使用<span>&quot;&quot;</span>值來禁用該選項。使用如果該選項，當<strong><span>mysqld</span></strong>打開<span>MyISAM</span>資料表時，檢查是否資料表標記為崩潰或沒有正確關閉。<span>(</span>只有用<span>--skip-external-locking</span><span>are</span>運行時，最後的選項才工作）<span>。
			</span>如果是這種情況，<strong><span>mysqld</span></strong>則檢查 
			資料表。如果資料表被破壞，<strong><span>mysqld</span></strong>試圖維護它。</p>
			<p>下面的選項影響維護工作：</p>
			<table border="1" cellpadding="0" id="table3">
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>選項</span></strong></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>DEFAULT</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>與沒有使用<span>--myisam-recover</span>選項相同。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>BACKUP</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>如果在恢復過程中，數據檔案被更改了，將<span><i><span>tbl_name</span></i><span>.MYD</span></span>檔案備份為<span><i><span>tbl_name-datetime</span></i><span>.BAK</span></span>。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>FORCE</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>即使<span>.MYD</span>檔案將丟掉多個行也進行恢復。</td>
				</tr>
				<tr>
					<td width="68" style="width:51.35pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>QUICK</span></td>
					<td width="789" style="width:591.4pt;padding:.75pt .75pt .75pt .75pt">
					<p>如果沒有刪除塊，不要檢查資料表中的行。</td>
				</tr>
			</table>
			<p>在資料表自動修復前，<span>MySQL</span>錯誤日誌新增一條註解。如果您不想用戶干涉干涉大多數問題，您應使用<span>BACKUP,FORCE</span>選項。該選項強制維護資料表，即使一些行將會被刪除也不例外，但它保持舊的數據檔案做為備份，以便您可以在後來進行檢查。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ndb-connectstring=<i>connect_string</i></span></p>
			<p>當使用<span>NDB</span>儲存引擎時，可以指出通過設置連接字串選項來分發群集配置的管理伺服器。相關語法參見<a href="ndbcluster.html#mysql-cluster-connectstring" title="17.4.4.2. The MySQL Cluster connectstring">17.4.4.2節，「MySQL叢集連接字串」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--ndbcluster</span></p>
			<p>如果二進制支援<span>NDB 
			CLUSTER</span>儲存引擎，使用該選項可以代替禁用<span>MySQL Cluster</span>支援的
			預設設置。參見<a href="ndbcluster.html">第17章：</a><a href="ndbcluster.html" title="Chapter 17. MySQL Cluster"><i>MySQL叢集</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--old-passwords</span></p>
			<p>強制伺服器為新密碼生成短<span>(4.1</span>前<span>)</span>密碼哈希。如果伺服器必須支援舊客戶端程式，為保證相容性這很有用。參見<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9節，「MySQL 4.1中的密碼哈希處理」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--one-thread</span></p>
			<p>只使用一個線程<span>(</span>用於在<span>Linux</span>中調試<span>)</span>。只有伺服器啟用了調試，該選項才可用。參見<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1節，「調試MySQL伺服器」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--open-files-limit=<i>count</i></span></p>
			<p>用來更改<strong><span>mysqld</span></strong>檔案描述符的數量。如果沒有設置或設置為<span>0</span>，則<strong><span>mysqld</span></strong>通過<span>setrlimit()</span>使用該值來保存檔案描述符。如果該值為<span>0</span>，則<strong><span>mysqld</span></strong><span>
			</span>保存<span>max_connections*5</span>或<span>max_connections 
			+ table_cache*2</span><span>(</span>取較大者<span>)</span>個檔案。如果<strong><span 
>mysqld</span></strong>給出您錯誤<span>&quot;</span>打開的檔案太多。<span>&quot;</span>，您應試試增加該值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--pid-file=path</span></p>
			<p><strong>
			<span>mysqld_safe</span></strong>使用的程序<span>ID</span>檔案的路徑。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--port=<i>port_num</i>, -P
			<i>port_num</i></span></p>
			<p>幀聽<span>TCP/IP</span>連接時使用的端口號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--safe-mode</span></p>
			<p>跳過一些最佳化階段。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>--safe-show-database</span></p>
			<p>參見<a href="database-administration.html#privileges-provided" title="5.7.3. Privileges Provided by MySQL">5.7.3節，「MySQL提供的權限」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--safe-user-create</span></p>
			<p>啟用後如果用戶沒有<span>mysql.user</span>資料表或資料表中列的<span>INSERT</span>權限，則用戶不能用<span>GRANT</span>語句建立新用戶。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--secure-auth</span></p>
			<p>不允許使用舊<span>(4.1</span>之前<span>)</span>密碼的帳號進行鑒定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--shared-memory</span></p>
			<p>啟用本地客戶端的共享內存連接。該選項只用於<span>Windows</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--shared-memory-base-name=<i>name</i></span></p>
			<p>共享內存連接名。該選項只用於<span>Windows</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-bdb</span></p>
			<p>禁用<span>BDB</span>儲存引擎。這樣可以節省內存，並可能加速某些操作。如果您需要<span>BDB</span>資料表則不要使用該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-concurrent-insert</span></p>
			<p>關閉在同一時間在<span>MyISAM</span>資料表中選擇和插入的能力。<span>(</span>只有您發現問題時才使用該選項）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-external-locking</span></p>
			<p>不要使用系統鎖定。要想使用<strong><span>myisamchk</span></strong>，您必須關閉伺服器。<span>(</span>參見<a href="introduction.html#stability" title="1.4.3. MySQL Stability">1.4.3節，「MySQL穩定性」</a>）<span>。 </span>要避免該需求，使用<span>MySQL 
			Monitor</span>中的<span>CHECK 
			TABLE</span>和<span>REPAIR 
			TABLE</span>來檢查並維護<span>MyISAM</span>資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-grant-tables</span></p>
			<p>該選項使伺服器不使用權限系統。該權限允許訪問伺服器的用戶<i>不受限制地訪問</i>所有<em><span>資料庫</span></em>。您可以從系統外殼命令行執行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>命令，或執行<span>MySQL </span>
			<span>FLUSH PRIVILEGES</span>語句讓運行的伺服器重新開始使用
			授權資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-host-cache</span></p>
			<p>為了更快地在名稱<span>-IP</span>之間進行解析，不要使用內部主機名緩存。相反，每次客戶端連接時查詢<span>DNS</span>伺服器。參見<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6節，「MySQL如何使用DNS」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-innodb</span></p>
			<p>禁用<span>InnoDB</span>儲存引擎。這樣可以節省內存，並可能加速某些操作。如果您需要<span>BDB</span>資料表則不要使用該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-name-resolve</span></p>
			<p>不要解析正檢查客戶端連接的主機名。只使用<span>IP</span>號。如果您使用該項，
			授權資料表中的所有<span>Host</span>列值必須為<span>IP</span>號或<span>localhost</span>。參見<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6節，「MySQL如何使用DNS」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-ndbcluster</span></p>
			<p>禁用<span>NDB 
			CLUSTER</span>儲存引擎。這是支援<span>NDB 
			CLUSTER</span>儲存引擎的二進制的預設設置，說明只有用<span>--ndbcluster</span>選項顯式覆蓋<span>--skip-ndbcluster</span>選項時，系統才為該儲存引擎分配內存和其它資源。使用示範參見<a href="ndbcluster.html#mysql-cluster-quick" title="17.4.3. Quick Test Setup of MySQL Cluster">17.4.3節，「MySQL叢集的快速測試設置」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-networking</span></p>
			<p>不幀聽<span>TCP/IP</span>連接。必須通過命名管道或共享內存<span>(</span>在<span>Windows</span>中<span>)</span>或<span>Unix</span>套接字檔案<span>(</span>在<span>Unix</span>中<span>)</span>完成<strong><span>mysqld</span></strong>的相互操作。對於只允許本地客戶端的系統，大力推薦該選項。參見<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6節，「MySQL如何使用DNS」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--standalone</span></p>
			<p>只適合基於<span>Windows-NT</span>的系統；指導<span>MySQL</span>伺服器不做為服務來運行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--symbolic-links</span><span>,
			</span>
			<span>--skip-symbolic-links</span></p>
			<p>啟用或禁用符號連結支援。在<span>Windows</span>和<span>Unix</span>中，該選項的作用是不同的：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，啟用符號連結，您可以通過建立包含實際目錄路徑的<span>directory.sym</span>檔案來建立資料庫目錄的符號連結。參見<a href="optimization.html#windows-symbolic-links" title="7.6.1.3. Using Symbolic Links for Databases on Windows">7.6.1.3節，「在Windows平台上使用關於資料庫的符號連結」</a>。</p>
			<p>在<span>Unix</span>中，啟用符號連結資料表示您可以用<span>CREATE 
			TABLE</span>語句的<span>INDEX 
			DIRECTORY</span>或<span>DATA 
			DIRECTORY</span>選項將<span>MyISAM</span>索引檔案或數據檔案連結到另一個目錄。如果您刪除或重新命名資料表，符號連結所指的檔案也被刪除或重新命名。參見<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5節，「CREATE 
					TABLE語法」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-safemalloc</span></p>
			<p>如果<span>MySQL</span>配置了<span>--with-debug=full</span>，所有<span>MySQL</span>程式在內存分配和釋放時檢查內存是否溢出。檢查很慢，因此如果您不需要您可以用<span>--skip-safemalloc</span>選項來避免。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-show-database</span></p>
			<p>使用該選項，只允許具有<span>SHOW 
			DATABASES</span>權限的用戶執行<span>SHOW 
			DATABASES</span>語句，該語句顯示所有資料庫名。不使用該選項，允許所有用戶執行<span>SHOW 
			DATABASES</span>，但只向具有<span>SHOW 
			DATABASES</span>權限或部分資料庫權限的用戶顯示每個資料庫名。請注意全局權限為資料庫的一種權限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-stack-trace</span></p>
			<p>不跟蹤寫堆棧。當調試運行<strong><span>mysqld</span></strong>時該選項有用。在一些系統中，您還必須使用該選項來獲得內核檔案。參見<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1節，「調試MySQL伺服器」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-thread-priority</span></p>
			<p>在快速響應中禁用線程優先級。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--socket=path</span></p>
			<p>在<span>Unix</span>中，該選項指定用於本地連接的<span>Unix</span>套接字檔案。
			預設值是<span>/tmp/mysql.sock</span>。在<span>Windows</span>中，該選項指定本地連接所使用的管道名。
			預設值是<span>MySQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--sql-mode=<i>value</i>[,<i>value</i>[,<i>value</i>...]]</span></p>
			<p>將<span>MySQL</span>設置為<span>SQL</span>模式。參見<a href="database-administration.html#server-sql-mode" title="5.3.2. The Server SQL Mode">5.3.2節，「SQL伺服器模式」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--temp-pool</span></p>
			<p>
			該選項使伺服器建立的大多數臨時檔案使用一系列檔案名，而不是每個新檔案使用唯一的檔案名。這樣解決了在<span>Linux</span>內核中用 
			不同的名建立許多新檔案的問題。在以前，<span>Linux</span>似乎「洩漏」內存，因為它被直接分配到<span>directory 
			entry</span>緩存而不是硬盤緩存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--transaction-isolation=<i>level</i></span></p>
			<p>設置預設事務隔離級別，可以<span>READ-UNCOMMITTED</span>、<span><span>READ-COMMITTEE</span><span>、<span>REPEATABLE-READ</span></span></span>或<span>SERIALIZABLE</span>。參見<a href="sql-syntax.html#set-transaction" title="13.4.6. SET TRANSACTION Syntax">13.4.6節，「SET 
				TRANSACTION語法」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--tmpdir=<i>path</i>, -t
			<i>path</i></span></p>
			<p>建立臨時檔案的目錄路徑。預設<span>/tmp</span>目錄在太小不能容納臨時資料表的分區時該選項很有用。該選項接受<span>round-robin</span>模式的幾個路徑。在<span>Unix</span>中路徑應用冒號<span>(</span>『<span>:</span>』<span>)
			</span>間隔開，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中用分號<span>(</span>『<span>；</span>』<span>)
			</span>間隔開。如果<span>MySQL</span>伺服器為複製從機，您不應讓<span>--tmpdir</span>指向基於內存的檔案系統中的目錄或伺服器主機重啟時會清除的目錄。複製從機需要臨時檔案，機器重啟時可以複製臨時資料表或執行<span>LOAD 
			DATA INFILE</span>操作。如果伺服器重啟時臨時檔案目錄中的檔案丟失，複製失敗。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--user={<i>user_name</i> |
			<i>user_id</i>}, -u {<i>user_name</i> | <i>user_id</i>}</span></p>
			<p>用<span><i><span>user_name</span></i></span>或數字用戶<span>ID</span><span><i><span> 
			user_id</span></i></span>運行<strong><span>mysqld</span><span>伺服器</span></strong>。<span>(</span>「<span class="quote">用戶</span>」指系統登錄帳號，而不是
			授權資料表中所列的<span>MySQL</span>用戶）<span>。
			</span></p>
			<p>用<span>root</span>啟動<strong><span>mysqld</span><span>時<i>強制</i>使用</span></strong>該選項。伺服器在啟動序列中更改用戶<span>ID</span>，讓它做為具體用戶而不是<span>root</span>運行。參見<a href="database-administration.html#security-guidelines" title="5.6.1. General Security Guidelines">5.6.1節，「通用安全指南」</a>。</p>
			<p>要避免用戶在<span>my.cnf</span>檔案中新增<span>--user=root</span>選項<span>(</span>使伺服器用<span>root</span>運行<span>)</span>時可能出現的安全漏洞，<strong><span>mysqld</span></strong>只使用指定的第<span>1</span>個<span>--user</span>選項，如果有多個<span>--user</span>選項則會出現警告。在命令行選項前處理<span>/etc/my.cnf</span>和<span>$MYSQL_HOME/my.cnf</span>中的選項，因此建議您在<span>/etc/my.cnf</span>中放一個<span>--user</span>選項，並指定<span>root</span>之外的其它值。在其它<span>--user</span>選項前先找到<span>/etc/my.cnf</span>中的選項，確保伺服器用其它用戶運行，如果找到其它<span>--user</span>選項則會出現警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--version</span><span>,
			</span>
			<span>-V</span></p>
			<p>顯示版本訊息並退出。</p>
			<p>您可以使用<span>--<i>var_name</i>=<i>value</i></span>形式的選項為伺服器系統變數。例如，<span>--key_buffer_size=32M</span>將變數<span>key_buffer_size</span>設為<span>32MB</span>。</p>
			<p>請注意設置變數時，<span>MySQL</span>可以自動將它糾正到某個給定範圍內，或如果只允許某個值，則將設置值調節到最接近允許的值。</p>
			<p>還可以通過<span>--set-variable=<i>var_name</i>=<i>value</i></span>或<span>-O
			<i>var_name</i>=<i>value</i></span>語法來設置變數。但是，現在不贊成使用該語法。</p>
			<p>
          <a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">
			5.3.3節，「伺服器系統變數」</a>完全描述了全部系統變數。調節伺服器參數部分包括如何對他們進行最佳化。參見<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2節，「調節伺服器參數」</a>。</p>
			<p>您可以用<span>SET</span>語句更改大多數伺服器系統變數的值。參見<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3節，「SET語法」</a>。</p>
			<p>如果您想用<span>SET </span>限制啟動項可設的最大值，您可以使用<span>--maximum-var_name</span>命令行選項來定義。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-sql-mode"></a>
			5.3.2.&nbsp;SQL伺服器模式</h3></div></div></div>
			<p><span>MySQL</span>伺服器可以以不同的<span>SQL</span>模式來操作，並且可以為不同客戶端應用不同模式。這樣每個應用程式可以根據自己的需求來定制伺服器的操作模式。</p>
			<p>模式定義<span>MySQL</span>應支援哪些<span>SQL</span>語法，以及應執行哪種數據驗證檢查。這樣可以更容易地在不同的環境中使用<span>MySQL</span>，並結合其它資料庫伺服器使用<span>MySQL</span>。</p>
			<p>您可以用<span>--sql-mode=&quot;<i>modes</i>&quot;</span>選項啟動<strong><span>mysqld</span><span>來</span></strong>設置預設<span>SQL</span>模式。如果您想要重設，該值還可以為空<span>(</span><span>--sql-mode 
			=&quot;&quot;</span><span>)</span>。</p>
			<p>您還可以在啟動後用<span>SET [SESSION|GLOBAL] 
			sql_mode=&#39;<i>modes</i>&#39;</span>語句設置<span>sql_mode</span>變數來更改<span>SQL</span>模式。設置 
			<span>GLOBAL</span>變數時需要擁有<span>SUPER</span>權限，並且會影響從那時起連接的所有客戶端的操作。設置<span>SESSION</span>變數只影響當前的客戶端。任何客戶端可以隨時更改自己的會話 
			<span>sql_mode</span>值。</p>
			<p><span><i><span>Modes</span></i></span><span>is</span>是用逗號<span>(</span>『<span>，</span>』<span>)</span>間隔開的一系列不同的模式。您可以用<span>SELECT 
			@@sql_mode</span>語句查詢當前的模式。預設值是空<span>(</span>沒有設置任何模式<span>)</span>。</p>
			<p>主要重要<span>sql_mode</span>值為：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI</span></p>
			<p>更改語法和行為，使其更符合標準<span>SQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>
			如果不能將給定的值插入到事務資料表中，則放棄該語句。對於非事務資料表，如果值出現在單行語句或多行語句的第<span>1</span>行，則放棄該語句。本節後面給出了更詳細的描述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>TRADITIONAL</span></p>
			<p><span>Make MySQL</span>的行為象「<span class="quote">傳統</span>」<span>SQL</span>資料庫系統。該模式的簡單描述是當在列中插入不正確的值時「給出<span class="quote">錯誤而不是警告</span>」。<strong><span>注</span></strong>釋：一旦發現錯誤立即放棄<span>INSERT</span><span>/</span><span>UPDATE</span>。如果您使用非事務儲存引擎，這種方式不是您想要的，因為出現錯誤前進行的數據更改不會「滾動」，結果是更新「只進行了一部分」。</p>
			<p>本手冊指「<span class="quote">嚴格模式</span>」，資料表示至少<span>STRICT 
			_TRANS_TABLES</span>或<span>STRICT 
			_ALL_TABLES</span>被啟用的模式。</p>
			<p>下面描述了支援的所有模式：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ALLOW_INVALID_DATES</span></p>
			<p>在嚴格模式下不要檢查全部日期。只檢查<span>1</span>到<span>12</span>之間的月份和<span>1</span>到<span>31</span>之間的日。這在<span>Web</span>應用程式中，當您從三個不同的字段獲取年、月、日，並且想要確切保存用戶插入的內容<span>(</span>不進行日期驗證<span>)</span>時很重要。該模式適用於<span>DATE</span>和<span>DATETIME</span>列。不適合<span>TIMESTAMP</span>列，<span>TIMESTAMP</span>列需要驗證日期。</p>
			<p>啟用嚴格模式後，伺服器需要合法的月和日，不僅僅是分別在<span>1</span>到<span>12</span>和<span>1</span>到<span>31</span>範圍內。例如，禁用嚴格模式時<span>&#39;2004-04-31&#39;</span>是合法的，但啟用嚴格模式後是非法的。要想在嚴格模式允許遮掩固定日期，還應啟用<span>ALLOW_INVALID_DATES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI_QUOTES</span></p>
			<p>將『<span>&quot;</span>』視為識別符引號<span>(</span>『<span>`</span>』引號字元<span>)</span>，不要視為字串的引號字元。在<span>ANSI</span>模式，您可以仍然使用『<span>`</span>』來引用識別符。啟用<span>ANSI_QUOTES</span>後，您不能用雙引號來引用字串，因為它被解釋為識別符。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ERROR_FOR_DIVISION_BY_ZERO</span></p>
			<p>在嚴格模式，在<span>INSERT</span>或<span>UPDATE</span>過程中，如果被零除<span>(</span>或<span><span>MOD(X</span><span>，<span>0)</span></span></span><span>)</span>，則產生錯誤<span>(</span>否則為警告<span>)</span>。如果未給出該模式，被零除時<span>MySQL</span>返回<span>NULL</span>。如果用到<span>INSERT 
			IGNORE</span>或<span>UPDATE 
			IGNORE</span>中，<span>MySQL</span>生成被零除警告，但操作結果為<span>NULL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>HIGH_NOT_PRECEDENCE</span></p>
			<p>
			<span>NOT</span>操作符的優先順序是資料表達式例如<span>NOT 
			a BETWEEN b AND c</span>被解釋為<span>NOT 
			(a BETWEEN b AND c)</span>。在一些舊版本<span>MySQL</span>中， 
			資料表達式被解釋為<span>(NOT a) BETWEEN 
			b AND c</span>。啟用<span>HIGH_NOT_PRECEDENCE</span><span>SQL</span>模式，可以獲得以前的更高優先級的結果。</p>
			<pre ><span>mysql&gt; </span><span><b><span>SET sql_mode = &#39;&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT NOT 1 BETWEEN -5 AND 5;</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; 0</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SET sql_mode = &#39;broken_not&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT NOT 1 BETWEEN -5 AND 5;</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; 1</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>IGNORE_SPACE</span></p>
			<p>允許函數名和『<span>(</span>』之間有空格。強制將所有函數名視為保存的字。結果是，如果您想要訪問保存為字的資料庫、資料表或列名，您必須引用它。例如，因為有<span>USER()</span>函數，<span>mysql</span>資料庫中的<span>user</span>資料表名和該資料表內的<span>User</span>列被保存下來，因此您必須引用它們：</p>
			<pre ><span>SELECT &quot;User&quot; FROM mysql.&quot;user&quot;;</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_AUTO_CREATE_USER</span></p>
			<p>防止<span>GRANT</span>自動建立新用戶，除非還指定了密碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_AUTO_VALUE_ON_ZERO</span></p>
			<p>
			<span>NO_AUTO_VALUE_ON_ZERO</span>影響<span>AUTO_INCREMENT</span>列的處理。一般情況，您可以向該列插入<span>NULL</span>或<span>0</span>生成下一個序列號。<span>NO_AUTO_VALUE_ON_ZERO</span>禁用<span>0</span>，因此只有<span>NULL</span>可以生成下一個序列號。</p>
			<p>如果將<span>0</span>保存到資料表的<span>AUTO_INCREMENT</span>列，該模式會很有用。<span>(</span>不推薦採用該慣例<span>)</span>。例如，如果您用<strong><span>mysqldump</span></strong>轉儲資料表並重載，<span>MySQL</span>遇到<span>0</span>值一般會生成新的序列號，生成的資料表的內容與轉儲的資料表不同。重載轉儲檔案前啟用<span>NO_AUTO_VALUE_ON_ZERO</span>可以解決該問題。<strong><span 
>mysqldump</span></strong>在輸出中自動包括啟用<span>NO_AUTO_VALUE_ON_ZERO</span>的語句。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_BACKSLASH_ESCAPES</span></p>
			<p>禁用反斜線字元<span>(</span>『<span>\</span>』<span>)</span>做為字串內的退出字元。啟用該模式，反斜線則成為普通字元。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_DIR_IN_CREATE</span></p>
			<p>建立資料表時，忽視所有<span>INDEX 
			DIRECTORY</span>和<span>DATA 
			DIRECTORY</span>指令。該選項對從複製伺服器有用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_ENGINE_SUBSTITUTION</span></p>
			<p>如果需要的儲存引擎被禁用或未編譯，可以防止自動替換儲存引擎。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_FIELD_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的輸出中打印<span>MySQL</span>專用列選項。該模式在可移植模式（<span>portability 
			mode</span>）下用於<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_KEY_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的輸出中打印<span>MySQL</span>專用索引選項。該模式在可移植模式（<span>portability 
			mode</span>）下用於<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			NO_TABLE_OPTIONS</span></p>
			<p>不要在<span>SHOW 
			CREATE TABLE</span>的輸出中打印<span>MySQL</span>專用資料表選項（例如<span>ENGINE</span>）。該模式在可移植模式（<span>portability 
			mode</span>）下用於<strong><span 
>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_UNSIGNED_SUBTRACTION</span></p>
			<p>在減運算中，如果某個操作數沒有符號，不要將結果標記為<span>UNSIGNED</span>。請注意這樣使<span>UNSIGNED 
			BIGINT</span>不能<span>100%</span>用於上下文中。參見<a href="functions.html#cast-functions" title="12.8. Cast Functions and Operators">12.8節，「Cast函數和操作符」</a>。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><span>NO_</span><span  style="font-size: 10.5pt">ZERO</span><span>_DATE</span></span></p>
			<p>在嚴格模式，不要將 
			<span>&#39;0000-00-00&#39;</span>做為合法日期。您仍然可以用<span>IGNORE</span>選項插入零日期。在非嚴格模式，可以接受該日期，但會生成警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>NO_ZERO_IN_DATE</span></p>
			<p>在嚴格模式，不接受月或日部分為<span>0</span>的日期。如果使用<span>IGNORE</span>選項，我們為類似的日期插入<span>&#39;0000-00-00&#39;</span>。在非嚴格模式，可以接受該日期，但會生成警告。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ONLY_FULL_GROUP_BY</span></p>
			<p>不要讓<span>GROUP 
			BY</span>部分中的查詢指向未選擇的列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>PIPES_AS_CONCAT</span></p>
			<p>將<span>||</span>視為字串連接操作符（＋）<span>(</span>同<span>CONCAT()</span><span>)</span>，而不視為<span>OR</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>REAL_AS_FLOAT</span></p>
			<p>將<span>REAL</span>視為<span>FLOAT</span>的同義詞，而不是<span>DOUBLE</span>的同義詞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>為所有儲存引擎啟用嚴格模式。非法數據值被拒絕。後面有詳細說明。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>STRICT_TRANS_TABLES</span></p>
			<p>
			為事務儲存引擎啟用嚴格模式，也可能為非事務儲存引擎啟用嚴格模式。後面有詳細說明。</p>
			<p>嚴格模式控制<span>MySQL</span>如何處理非法或丟失的輸入值。有幾種原因可以使一個值為非法。例如，數據類型錯誤，不適合列，或超出範圍。當新插入的行不包含某列的沒有顯示定義<span>DEFAULT</span>子句的值，則該值被丟失。</p>
			<p>對於事務資料表，當啟用<span>STRICT_ALL_TABLES</span>或<span>STRICT_TRANS_TABLES</span>模式時，如果語句中有非法或丟失值，則會出現錯誤。語句被放棄並滾動。</p>
			<p>對於非事務資料表，如果插入或更新的第<span>1</span>行出現壞值，兩種模式的行為相同。語句被放棄，資料表保持不變。如果語句插入或修改多行，並且壞值出現在第<span>2</span>或後面的行，結果取決於啟用了哪個嚴格選項：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於<span>STRICT_ALL_TABLES</span>，<span>MySQL</span>返回錯誤並忽視剩餘的行。但是，在這種情況下，前面的行已經被插入或更新。這說明您可以部分更新，這可能不是您想要的。要避免這點，最好使用單行語句，因為這樣可以不更改資料表即可以放棄。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於<span>STRICT_TRANS_TABLES</span>，<span>MySQL</span>將非法值轉換為最接近該列的合法值並插入調整後的值。如果值丟失，<span>MySQL</span>在列中插入隱式
			預設值。在任何情況下，<span>MySQL</span>都會生成警告而不是給出錯誤並繼續執行語句。<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5節，「CREATE 
				TABLE語法」</a>描述了隱式預設值。</p>
			<p>嚴格模式不允許非法日期，例如<span>&#39;2004-04-31&#39;</span>。它不允許禁止日期使用「零」部分，例如<span>&#39;2004-04-00&#39;</span>或「<span class="quote">零</span>」日期。要想禁止，應在嚴格模式基礎上，啟用<span>NO_ZERO_IN_DATE</span>和<span>NO_ZERO_DATE</span><span> 
			SQL</span>模式。</p>
			<p>如果您不使用嚴格模式<span>(</span>即不啟用<span>STRICT_TRANS_TABLES</span>或<span>STRICT_ALL_TABLES</span>模式<span>)</span>，對於非法或丟失的值，<span>MySQL</span>將插入調整後的值並給出警告。在嚴格模式，您可以通過<span>INSERT 
			IGNORE</span>或<span>UPDATE 
			IGNORE</span>來實現。參見<a href="sql-syntax.html#show-warnings" title="13.5.4.22. SHOW WARNINGS Syntax">13.5.4.22節，「SHOW 
			WARNINGS語法」</a>。</p>
			<p>下面的特殊模式快速組合了前面所列的模式。</p>
			<p>其中包括大多數最新版本<span>MySQL</span>中的所有模式值。舊版本中，組合模式不包括新版本中沒有的不適用的具體模式值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ANSI</span></p>
			<p>等同<span>REAL_AS_FLOAT</span>、<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>。參見<a href="introduction.html#ansi-mode" title="1.8.3. Running MySQL in ANSI Mode">1.8.3節，「在ANSI模式下運行MySQL」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>DB2</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MAXDB</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>、 
			 
			<span>NO_AUTO_CREATE_USER</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MSSQL</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、 
			 
			<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MYSQL323</span><span>
			</span></p>
			<p>等同<span>NO_FIELD_OPTIONS</span>、<span>HIGH_NOT_PRECEDENCE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>MYSQL40</span></p>
			<p>等同<span>NO_FIELD_OPTIONS</span>、<span>HIGH_NOT_PRECEDENCE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ORACLE</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>、<span>NO_AUTO_CREATE_USER</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>POSTGRESQL</span></p>
			<p>等同<span>PIPES_AS_CONCAT</span>、<span>ANSI_QUOTES</span>、<span>IGNORE_SPACE</span>、<span>NO_KEY_OPTIONS</span>、<span>NO_TABLE_OPTIONS</span>、<span>NO_FIELD_OPTIONS</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>TRADITIONAL</span></p>
			<p>等同STRICT_TRANS_TABLES、STRICT_ALL_TABLES、NO_ZERO_IN_DATE、NO_ZERO_DATE、ERROR_FOR_DIVISION_BY_ZERO、NO_AUTO_CREATE_USER。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-system-variables"></a>
			5.3.3.&nbsp;伺服器系統變數</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#dynamic-system-variables">
				5.3.3.1. 動態系統變數</a></span></dt></dl></div><a class="indexterm" name="id2751856"></a><a class="indexterm" name="id2751862"></a><a class="indexterm" name="id2751869"></a><a class="indexterm" name="id2751879"></a>
			<p>
			伺服器將維護許多資料表示其配置的系統變數。所有變數均有預設值。可以在命令行中或選項檔案設置選項在伺服器啟動時對它們進行設置。大多數可以在運行時使用<span>SET</span>語句來設置。</p>
			<p><strong><span>mysqld</span><span>伺服器</span></strong>維護兩種變數。全局變數影響伺服器的全局操作。會話變數影響具體客戶端連接相關操作。</p>
			<p>伺服器啟動時，將所有全局變數初始化為預設值。可以在選項檔案或命令行中指定的選項來更改這些預設值。伺服器啟動後，通過連接伺服器並執行<span>SET 
			GLOBAL <i>var_name</i></span>語句可以更改動態全局變數。要想更改全局變數，必須具有<span>SUPER</span>權限。</p>
			<p>伺服器還為每個客戶端連接維護會話變數。連接時使用相應全局變數的當前值對客戶端會話變數進行初始化。客戶可以通過<span>SET 
			SESSION <i>var_name</i></span>語句來更改動態會話變數。設置會話變數不需要特殊權限，但客戶可以只更改自己的會話變數，而不更改其它客戶的會話變數。</p>
			<p>
			任何訪問全局變數的客戶端都可以看見對全局變數的更改。但是，它只影響在更改後連接的從該全局變數初始化相應會話變數的客戶端。它不會影響已經連接上的客戶端的會話變數<span>(</span>甚至是執行<span>SET 
			GLOBAL</span>語句的客戶端<span>)</span>。</p>
			<p>當使用啟動選項設置變數時，變數值可以使用後綴<span>K</span>、<span>M</span>或<span>G</span>分別資料表示千字節、兆字節或<span>gigabytes</span>。例如，下面的命令啟動伺服器時的鍵值緩衝區大小為<span>16 
			megabytes</span>：</p>
			<pre><span>mysqld --key_buffer_size=16M</span></pre>
			<p>後綴的大小寫美關係；<span>16M</span>和<span>16m</span>是同樣的。</p>
			<p>運行時，使用<span>SET</span>語句來設置系統變數。此時，不能使用後綴，但值可以採取下列資料表達式：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<p>要想顯式指定是否設置全局或會話變數，使用<span>GLOBAL</span>或<span>SESSION</span>選項：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET GLOBAL sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET SESSION sort_buffer_size = 10 * 1024 * 1024;</span></b></span></pre>
			<p>兩個選項均沒有，則語句設置會話變數。</p>
			<p>
          <a href="database-administration.html#dynamic-system-variables" title="5.3.3.1. Dynamic System Variables">
			5.3.3.1節，「動態系統變數」</a>中列出了可以在運行時設置的變數。</p>
			<p>如果您想用<span>SET</span>語句限制系統變數可設的最大值，可以在伺服器啟動時通過<span>--maximum-<i>var_name</i></span>形式的選項來指定。例如，要想防止<span>query_cache_size</span>的值運行時超過<span>32MB</span>，使用選項<span>--maximum-query_cache_size=32M</span>。</p>
			<p>您可以通過<span>SHOW VARIABLES</span>語句查看系統變數及其值。詳細訊息參見<a href="language-structure.html#system-variables" title="9.4. System Variables">9.4節，「系統變數」</a>。</p>
			<pre class="programlisting">mysql&gt; <strong class="userinput">SHOW VARIABLES;</strong>
+---------------------------------+-------------------------------------------+
| Variable_name                   | Value                                     |
+---------------------------------+-------------------------------------------+
| auto_increment_increment        | 1                                         |
| auto_increment_offset           | 1                                         |
| automatic_sp_privileges         | ON                                        |
| back_log                        | 50                                        |
| basedir                         | /home/jon/bin/mysql/                      |
| binlog_cache_size               | 32768                                     |
| bulk_insert_buffer_size         | 8388608                                   |
| character_set_client            | latin1                                    |
| character_set_connection        | latin1                                    |
| character_set_database          | latin1                                    |
| character_set_results           | latin1                                    |
| character_set_server            | latin1                                    |
| character_set_system            | utf8                                      |
| character_sets_dir              | /home/jon/bin/mysql/share/mysql/charsets/ |
| collation_connection            | latin1_swedish_ci                         |
| collation_database              | latin1_swedish_ci                         |
| collation_server                | latin1_swedish_ci                         |
| completion_type                 | 0                                         |
| concurrent_insert               | 1                                         |
| connect_timeout                 | 5                                         |
| datadir                         | /home/jon/bin/mysql/var/                  |
| date_format                     | %Y-%m-%d                                  |
| datetime_format                 | %Y-%m-%d %H:%i:%s                         |
| default_week_format             | 0                                         |
| delay_key_write                 | ON                                        |
| delayed_insert_limit            | 100                                       |
| delayed_insert_timeout          | 300                                       |
| delayed_queue_size              | 1000                                      |
| div_precision_increment         | 4                                         |
| engine_condition_pushdown       | OFF                                       |
| expire_logs_days                | 0                                         |
| flush                           | OFF                                       |
| flush_time                      | 0                                         |
| ft_boolean_syntax               | + -&gt;&lt;()~*:""&amp;|                            |
| ft_max_word_len                 | 84                                        |
| ft_min_word_len                 | 4                                         |
| ft_query_expansion_limit        | 20                                        |
| ft_stopword_file                | (built-in)                                |
| group_concat_max_len            | 1024                                      |
| have_archive                    | YES                                       |
| have_bdb                        | NO                                        |
| have_blackhole_engine           | YES                                       |
| have_compress                   | YES                                       |
| have_crypt                      | YES                                       |
| have_csv                        | YES                                       |
| have_example_engine             | NO                                        |
| have_federated_engine           | NO                                        |
| have_geometry                   | YES                                       |
| have_innodb                     | YES                                       |
| have_isam                       | NO                                        |
| have_ndbcluster                 | DISABLED                                  |
| have_openssl                    | NO                                        |
| have_partition_engine           | YES                                       |
| have_query_cache                | YES                                       |
| have_raid                       | NO                                        |
| have_rtree_keys                 | YES                                       |
| have_symlink                    | YES                                       |
| init_connect                    |                                           |
| init_file                       |                                           |
| init_slave                      |                                           |
| innodb_additional_mem_pool_size | 1048576                                   |
| innodb_autoextend_increment     | 8                                         |
| innodb_buffer_pool_awe_mem_mb   | 0                                         |
| innodb_buffer_pool_size         | 8388608                                   |
| innodb_checksums                | ON                                        |
| innodb_commit_concurrency       | 0                                         |
| innodb_concurrency_tickets      | 500                                       |
| innodb_data_file_path           | ibdata1:10M:autoextend                    |
| innodb_data_home_dir            |                                           |
| innodb_doublewrite              | ON                                        |
| innodb_fast_shutdown            | 1                                         |
| innodb_file_io_threads          | 4                                         |
| innodb_file_per_table           | OFF                                       |
| innodb_flush_log_at_trx_commit  | 1                                         |
| innodb_flush_method             |                                           |
| innodb_force_recovery           | 0                                         |
| innodb_lock_wait_timeout        | 50                                        |
| innodb_locks_unsafe_for_binlog  | OFF                                       |
| innodb_log_arch_dir             |                                           |
| innodb_log_archive              | OFF                                       |
| innodb_log_buffer_size          | 1048576                                   |
| innodb_log_file_size            | 5242880                                   |
| innodb_log_files_in_group       | 2                                         |
| innodb_log_group_home_dir       | ./                                        |
| innodb_max_dirty_pages_pct      | 90                                        |
| innodb_max_purge_lag            | 0                                         |
| innodb_mirrored_log_groups      | 1                                         |
| innodb_open_files               | 300                                       |
| innodb_support_xa               | ON                                        |
| innodb_sync_spin_loops          | 20                                        |
| innodb_table_locks              | ON                                        |
| innodb_thread_concurrency       | 20                                        |
| innodb_thread_sleep_delay       | 10000                                     |
| interactive_timeout             | 28800                                     |
| join_buffer_size                | 131072                                    |
| key_buffer_size                 | 8388600                                   |
| key_cache_age_threshold         | 300                                       |
| key_cache_block_size            | 1024                                      |
| key_cache_division_limit        | 100                                       |
| language                        | /home/jon/bin/mysql/share/mysql/english/  |
| large_files_support             | ON                                        |
| large_page_size                 | 0                                         |
| large_pages                     | OFF                                       |
| license                         | GPL                                       |
| local_infile                    | ON                                        |
| locked_in_memory                | OFF                                       |
| log                             | ON                                        |
| log_bin                         | ON                                        |
| log_bin_trust_routine_creators  | OFF                                       |
| log_error                       | /home/jon/bin/mysql/var/master1.err       |
| log_slave_updates               | OFF                                       |
| log_slow_queries                | OFF                                       |
| log_warnings                    | 1                                         |
| long_query_time                 | 10                                        |
| low_priority_updates            | OFF                                       |
| lower_case_file_system          | OFF                                       |
| lower_case_table_names          | 0                                         |
| max_allowed_packet              | 1048576                                   |
| max_binlog_cache_size           | 4294967295                                |
| max_binlog_size                 | 1073741824                                |
| max_connect_errors              | 10                                        |
| max_connections                 | 100                                       |
| max_delayed_threads             | 20                                        |
| max_error_count                 | 64                                        |
| max_heap_table_size             | 16777216                                  |
| max_insert_delayed_threads      | 20                                        |
| max_join_size                   | 4294967295                                |
| max_length_for_sort_data        | 1024                                      |
| max_relay_log_size              | 0                                         |
| max_seeks_for_key               | 4294967295                                |
| max_sort_length                 | 1024                                      |
| max_tmp_tables                  | 32                                        |
| max_user_connections            | 0                                         |
| max_write_lock_count            | 4294967295                                |
| multi_range_count               | 256                                       |
| myisam_data_pointer_size        | 6                                         |
| myisam_max_sort_file_size       | 2147483647                                |
| myisam_recover_options          | OFF                                       |
| myisam_repair_threads           | 1                                         |
| myisam_sort_buffer_size         | 8388608                                   |
| ndb_autoincrement_prefetch_sz   | 32                                        |
| ndb_cache_check_time            | 0                                         |
| ndb_force_send                  | ON                                        |
| ndb_index_stat_cache_entries    | 32                                        |
| ndb_index_stat_enable           | ON                                        |
| ndb_index_stat_update_freq      | 20                                        |
| ndb_use_exact_count             | ON                                        |
| ndb_use_transactions            | ON                                        |
| net_buffer_length               | 16384                                     |
| net_read_timeout                | 30                                        |
| net_retry_count                 | 10                                        |
| net_write_timeout               | 60                                        |
| new                             | OFF                                       |
| old_alter_table                 | OFF                                       |
| old_passwords                   | OFF                                       |
| open_files_limit                | 1024                                      |
| optimizer_prune_level           | 1                                         |
| optimizer_search_depth          | 62                                        |
| pid_file                        | /home/jon/bin/mysql/var/hostname.pid1     |
| port                            | 3306                                      |
| preload_buffer_size             | 32768                                     |
| protocol_version                | 10                                        |
| query_alloc_block_size          | 8192                                      |
| query_cache_limit               | 1048576                                   |
| query_cache_min_res_unit        | 4096                                      |
| query_cache_size                | 0                                         |
| query_cache_type                | ON                                        |
| query_cache_wlock_invalidate    | OFF                                       |
| query_prealloc_size             | 8192                                      |
| range_alloc_block_size          | 2048                                      |
| read_buffer_size                | 131072                                    |
| read_only                       | OFF                                       |
| read_rnd_buffer_size            | 262144                                    |
| relay_log_purge                 | ON                                        |
| relay_log_space_limit           | 0                                         |
| rpl_recovery_rank               | 0                                         |
| secure_auth                     | OFF                                       |
| server_id                       | 1                                         |
| skip_external_locking           | ON                                        |
| skip_networking                 | OFF                                       |
| skip_show_database              | OFF                                       |
| slave_compressed_protocol       | OFF                                       |
| slave_load_tmpdir               | /tmp/                                     |
| slave_net_timeout               | 3600                                      |
| slave_skip_errors               | OFF                                       |
| slave_transaction_retries       | 10                                        |
| slow_launch_time                | 2                                         |
| socket                          | /tmp/mysql.sock                           |
| sort_buffer_size                | 2097144                                   |
| sql_mode                        |                                           |
| sql_notes                       | ON                                        |
| sql_warnings                    | ON                                        |
| storage_engine                  | MyISAM                                    |
| sync_binlog                     | 0                                         |
| sync_frm                        | ON                                        |
| sync_replication                | 0                                         |
| sync_replication_slave_id       | 0                                         |
| sync_replication_timeout        | 10                                        |
| system_time_zone                | EST                                       |
| table_cache                     | 64                                        |
| table_lock_wait_timeout         | 50                                        |
| table_type                      | MyISAM                                    |
| thread_cache_size               | 0                                         |
| thread_stack                    | 196608                                    |
| time_format                     | %H:%i:%s                                  |
| time_zone                       | SYSTEM                                    |
| timed_mutexes                   | OFF                                       |
| tmp_table_size                  | 33554432                                  |
| tmpdir                          |                                           |
| transaction_alloc_block_size    | 8192                                      |
| transaction_prealloc_size       | 4096                                      |
| tx_isolation                    | REPEATABLE-READ                           |
| updatable_views_with_limit      | YES                                       |
| version                         | 5.1.2-alpha-log                           |
| version_comment                 | Source distribution                       |
| version_compile_machine         | i686                                      |
| version_compile_os              | suse-linux                                |
| wait_timeout                    | 28800                                     |
+---------------------------------+-------------------------------------------+
218 rows in set (0.03 sec)
</pre><a class="indexterm" name="id2752453"></a>
			<p>此處描述了大多數系統變數。沒有版本的變數在所有<span>MySQL 5.1 </span>
			發佈中適用。關於其使用歷史訊息，請參見<em><span>MySQL 
			5.0</span><span
>參考指南</span></em>和<em><span>MySQL 4.1</span><span>參考指南</span></em>。<span>InnoDB</span>系統變數列於
          <a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">
			15.2.4節，「InnoDB啟動選項」</a>。</p>
			<p>若沒有另行規定，緩衝區大小、長度和堆棧大小的單位均為字節。</p>
			<p>關於這些變數的調節訊息參見<a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">7.5.2節，「調節伺服器參數」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>auto_increment_increment</span></p>
			<p>
			<span>auto_increment_increment</span>和<span>auto_increment_offset</span>用於主伺服器－主伺服器（<span>master-to-master</span>）複製，並可以用來控制<span>AUTO_INCREMENT</span>列的操作。兩個變數均可以設置為全局或局部變數，並且假定每個值都可以為<span>1</span>到<span>65,535</span>之間的整數值。將其中一個變數設置為<span>0</span>會使該變數為<span>1</span>。如果試圖將這些變數設置為大於<span>65,535</span>或小於<span>0</span>的值，則會將該值設置為<span>65,535</span>。如果向將<span>auto_increment_increment</span>或<span><span>auto_increment_off</span><span>set</span></span>設置為非整數值，則會給出錯誤，並且變數的實際值在這種情況下保持不變。</p>
			<p>這兩個變數影響<span>AUTO_INCREMENT</span>列的方式：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			auto_increment_increment</span>控制列中的值的增量值。例如<span>:
			</span></p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; CREATE TABLE autoinc1 (col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.04 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SET @auto_increment_increment=10;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.01 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SELECT col FROM autoinc1;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| col |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp;&nbsp; 1 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 11 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 21 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 31 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;4 rows in set (0.00 sec)</span></pre>
			<p><span>(</span>註明如何使用<span>SHOW 
			VARIABLES</span>來獲取這些變數的當前值）<span>。</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			auto_increment_offset</span>確定<span>AUTO_INCREMENT</span>列值的起點。假定在與前面的例子的相同的會話中執行下面的命令：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SET @auto_increment_offset=5;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| auto_increment_offset&nbsp;&nbsp;&nbsp; | 5&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+--------------------------+-------+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;2 rows in set (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; CREATE TABLE autoinc2 (col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 0 rows affected (0.06 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; INSERT INTO autoinc2 VALUES (NULL), (NULL), (NULL), (NULL);</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;mysql&gt; SELECT col FROM autoinc2;</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;| col |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp;&nbsp; 5 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 15 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 25 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;|&nbsp; 35 |</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;+-----+</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;4 rows in set (0.02 sec)</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;</span></pre>
			<p>如果<span><span>auto_increment_off</span><span>set</span></span>的值大於<span>auto_increment_increment</span>的值，則<span>auto_increment_offset</span>的值被忽略。</p>
			<p>如果其中一個或兩個變數被更改了，然後更改插入到包含<span>AUTO_INCREMENT</span>列的資料表中的新行，結果可能看上去有問題，由於計算<span>AUTO_INCREMENT</span>系列值時沒有考慮列內已經存在的值，並且插入的下一個值是列內最小的值，大於<span>AUTO_INCREMENT</span>列內已有的最大值。換句話說，數值的計算方法為：</p>
			<p>
			<span>auto_increment_offset+ <i>
			N</i> * auto_increment_increment</span></p>
			<p>其中<span><i><span>N</span></i></span>為系列內的正整數值<span>[1,2,3,...]</span>。例如：</p>
			<pre ><span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;auto_inc%&#39;;</span></b></span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>| auto_increment_increment | 10&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>| auto_increment_offset&nbsp;&nbsp;&nbsp; | 5&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+--------------------------+-------+</span></pre>
			<pre ><span>2 rows in set (0.00 sec)</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT col FROM autoinc1;</span></b></span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>| col |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>|&nbsp;&nbsp; 1 |</span></pre>
			<pre ><span>|&nbsp; 11 |</span></pre>
			<pre ><span>|&nbsp; 21 |</span></pre>
			<pre ><span>|&nbsp; 31 |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>4 rows in set (0.00 sec)</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</span></b></span></pre>
			<pre ><span>Query OK, 4 rows affected (0.00 sec)</span></pre>
			<pre ><span>Records: 4&nbsp; Duplicates: 0&nbsp; Warnings: 0</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT col FROM autoinc1;</span></b></span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>| col |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>|&nbsp;&nbsp; 1 |</span></pre>
			<pre ><span>|&nbsp; 11 |</span></pre>
			<pre ><span>|&nbsp; 21 |</span></pre>
			<pre ><span>|&nbsp; 31 |</span></pre>
			<pre ><span>|&nbsp; 35 |</span></pre>
			<pre ><span>|&nbsp; 45 |</span></pre>
			<pre ><span>|&nbsp; 55 |</span></pre>
			<pre ><span>|&nbsp; 65 |</span></pre>
			<pre ><span>+-----+</span></pre>
			<pre ><span>8 rows in set (0.00 sec)</span></pre>
			<p>
			<span>auto_increment_increment</span>和<span>auto_increment_offset</span>所示的值可以生成系列<span>5 
			+ </span><span><i>
			<span>N</span></i></span><span> 
			* 10,</span>即，<span>[5,15,25,35,45,...]</span>。在<span>INSERT</span>前<span>col</span><span>
			</span>列內最大的值為<span>31,</span><span>AUTO_INCREMENT</span>數列的下一個值為<span>35,</span>因此<span>col</span>中插入的值從該點開始，結果如<span>SELECT</span>查詢所示。</p>
			<p>
			一定要記住不可能將這兩個變數的結果限制到一個資料表中，因此不會替代其它資料庫管理系統提供的序列；這些變數控制<span>MySQL</span>伺服器上<strong><span>all</span></strong>資料表<span>AUTO_INCREMENT</span>列的所有行為。如果某個變數設為全局變數，則只有通過局部設置將全局值更改和覆蓋後或<strong><span>mysqld</span></strong>重啟後其作用方可改變；如果局部設置，則新值影響所有資料表的<span>AUTO_INCREMENT</span>列，在這個會話期間當前用戶在這些資料表中插入了新行，除非在會話期間更改了這些值。</p>
			<p>
			<span>auto_increment_increment</span>的
			預設值為<span>1</span>。參見<a href="replication.html#replication-auto-increment" title="6.12. Auto-Increment in Multi-Master Replication">6.12節，「多伺服器複製中的Auto-Increment」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>auto_increment_offset</span></p>
			<p>該變數的預設值為<span>1</span>。詳見<span>auto_increment_increment</span>的描述。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>back_log</span></p>
			<p><span>MySQL</span>有的主要連接請求的數量。當主<span>MySQL</span>線程在短時間內得到許多連接請求時發揮作用。主線程需要花一些時間<span>(</span>儘管很少<span>)</span>來檢查連接並啟動一個新線程。<span>back_log</span>值說明<span>MySQL</span>臨時停止響應新請求前在短時間內可以堆起多少請求。如果您需要在短時間內允許大量連接，可以增加該數值。</p>
			<p>換句話說，該值為「進」<span>TCP/IP</span>連接幀聽隊列的大小。作業系統有該隊列自己的限制值。本手冊中<span>Unix
			</span><span>listen()</span>系統使用頁應有更詳細的訊息。該變數最大值請查閱<span>OS</span>文檔。企圖將<span>back_log</span>設置為高於您的作業系統限值是徒勞無益的。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>basedir</span></p>
			<p><span>MySQL</span>安裝基準目錄。可以用<span>--basedir</span>選項設置該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_cache_size</span></p>
			<p>為<span>BDB</span>資料表緩存索引和行分配的緩衝區的大小。如果您不使用<span>BDB</span>資料表，您應用<span>--skip-bdb</span>啟動<strong><span>mysqld</span></strong>以便不浪費該緩存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>bdb_home</span></p>
			<p>
			<span>BDB</span>資料表基準目錄。應與<span>datadir</span>變數的值相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_log_buffer_size</span></p>
			<p>為<span>BDB</span>資料表緩存索引和行分配的緩衝區的大小。如果您不使用<span>BDB</span>資料表，您應將該值設置為<span>0</span>或用<span>--skip-bdb</span>啟動<strong><span>mysqld</span></strong>以便不浪費該緩存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_logdir</span></p>
			<p>
			<span>BDB</span>儲存引擎寫它日誌檔案的目錄。可以用<span>--bdb-logdir</span>選項設置該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_max_lock</span></p>
			<p>在<span>BDB</span>資料表下可以激活的最大鎖數<span>(</span>預設為<span>10,000)</span>。如果當您執行長事務或當<strong><span>mysqld</span></strong>必須檢查許多行來計算查詢時出現下面的錯誤，您應增加該值：</p>
			<pre ><span>bdb: Lock table is out of available locks</span></pre>
			<pre ><span>Got error 12 from ...</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bdb_shared_data</span></p>
			<p>如果您正使用<span>--bdb-shared-data</span>應為<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>bdb_tmpdir</span></p>
			<p>
			<span>--bdb-tmpdir</span>選項的值。</p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			binlog_cache_size</span></p>
			<p>在事務過程中容納二進制日誌<span>SQL</span>語句的緩存大小。二進制日誌緩存是伺服器支援事務儲存引擎並且伺服器啟用了二進制日誌<span>(</span><span>--log-bin</span>選項<span>)</span>的前提下為每個客戶端分配的內存。如果您經常使用大的，多語句事務，您可以增加該值以獲得更有的性能。<span>Binlog_cache_use</span>和<span>Binlog_cache_disk_use</span>狀態變數可以用來調整該變數的大小。參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			bulk_insert_buffer_size</span></p>
			<p>
			<span>MyISAM</span><span>
			</span>使用專用樹狀緩存來使<span>INSERT 
			... SELECT</span>、<span><span>INSERT 
			... VALUES (...)</span>、<span>(...)</span>、<span> 
			...</span></span>和<span>LOAD 
			DATA INFILE</span>的大塊插入更快。該變數用每線程的字節數限制緩存樹的大小。將它設置為<span>0</span>禁用最佳化。<strong><span>注</span></strong>釋：只有向非空資料表新增數據時才使用該緩存。
			預設值是<span>8MB</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_client</span></p>
			<p>來自客戶端的語句的字元編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_connection</span></p>
			<p>用於沒有字元編碼導入符的文字和數字－字串轉換。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_set_database</span></p>
			<p>
			預設資料庫使用的字元編碼。當預設資料庫更改時，伺服器則設置該變數。如果沒有預設資料庫，變數的值同<span>character_set_server</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>character_set_results</span></p>
			<p>用於向客戶端返回查詢結果的字元編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>character_set_</span><span> 
			server</span></span></p>
			<p>伺服器的預設字元編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>character_set_</span><span>system</span></span></p>
			<p>伺服器用來保存識別符的字元編碼。該值一定是<span>utf8</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			character_sets_dir</span></p>
			<p>字元編碼安裝目錄。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_connection</span></p>
			<p>連接字元編碼的校對規則。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_database</span></p>
			<p>
			預設資料庫使用的校對規則。當預設資料庫改變時伺服器則設置該變數。如果沒有預設資料庫，變數的值同<span>collation_server</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			collation_server</span></p>
			<p>伺服器的預設校對規則。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>completion_type</span></p>
			<p>事務結束類型：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果該值為<span>0(</span>預設<span>)</span>，<span>COMMIT</span>和<span>ROLLBACK</span>不受影響。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果該值為<span>1</span>，<span>COMMIT</span>和<span>ROLLBACK</span>分別等同於<span>COMMIT 
			AND CHAIN</span>和<span>ROLLBACK 
			AND CHAIN</span>。<span>(</span>新事務用剛剛結束的事務相同的間隔等級立即啟動）<span>。
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果該值為<span>2</span>，<span>COMMIT</span>和<span>ROLLBACK</span>分別等同於<span><span>COMM</span><span>它<span>RELEASE</span></span></span>和<span>ROLLBACK 
			RELEASE</span>。<span>(</span>事務終止後，伺服器中斷）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			concurrent_insert</span></p>
			<p>如果為<span>ON</span><span>(</span>預設值<span>)</span>，<span>MySQL</span>允許<span>INSERT</span>和<span>SELECT</span>語句在中間沒有空數據塊的<span>MyISAM</span>資料表中並行運行。您可以用<span>--safe</span>或<span>--skip-new</span>啟動<strong><span>mysqld</span></strong>關閉該選項。</p>
			<p>該變數為整數，有<span>3</span>個值：</p>
			<table border="1" cellpadding="0" id="table4">
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>值</span></strong></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>0</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p>關</td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>1</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>(</span>預設<span>)</span>在沒有空數據塊的<span>MyISAM</span>資料表中啟用並行插入</td>
				</tr>
				<tr>
					<td width="44" style="width:33.35pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>2</span></td>
					<td width="866" style="width:649.85pt;padding:.75pt .75pt .75pt .75pt">
					<p>為所有<span>MyISAM</span>資料表啟用並行插入。如果資料表有空記錄或正被另一線程使用，新行將插入到資料表的最後。如果資料表未使用，<span>MySQL</span>將進行普通讀鎖定並將新行插入空記錄。</td>
				</tr>
			</table>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>connect_timeout</span></p>
			<p><strong>
			<span>mysqld</span><span>伺服器</span></strong>用<span>Bad 
			handshake</span>響應前等待連接包的秒數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>datadir</span></p>
			<p><span>MySQL</span>數據目錄。可以用<span>--datadir</span>選項設置該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			date_format</span></p>
			<p>該變數未使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			datetime_format</span></p>
			<p>該變數未使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>default_week_format</span></p>
			<p>
			<span>WEEK()</span><span>
			</span>函數使用的預設模式。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delay_key_write</span></p>
			<p>該選項只適用<span>MyISAM</span>資料表。它具有下述值可以影響<span>CREATE 
			TABLE</span>語句使用的<span>DELAY_KEY_WRITE</span>資料表選項的處理。</p>
			<table border="1" cellpadding="0" id="table5">
				<tr>
					<td>
					<p><strong><span>選項</span></strong></td>
					<td>
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>OFF</span></td>
					<td>
					<p>
					<span>DELAY_KEY_WRITE</span>被忽略。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ON</span></td>
					<td>
					<p><span>MySQL</span>在<span>CREATE 
					TABLE</span>中用<span>DELAY_KEY_WRITE</span>選項。這是
					預設值。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALL</span></td>
					<td>
					<p>用啟用<span>DELAY_KEY_WRITE</span>選項建立資料表的相同方法對所有新打開資料表的進行處理。</td>
				</tr>
			</table>
			<p>如果啟用了<span>DELAY_KEY_WRITE</span>，說明使用該項的資料表的鍵緩衝區在每次更新索引時不被清空，只有關閉資料表時才清空。遮掩蓋可以大大加快鍵的寫操作，但如果您使用該特性，您應用<span>--myisam-recover</span>選項啟動伺服器，為所有<span>MyISAM</span>資料表新增自動檢查<span>(</span>例如，<span>--myisam-recover=BACKUP,FORCE</span><span>)</span>。參見<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1節，「<span><strong class="command">mysqld</strong></span>命令行選項」</a>和<a href="storage-engines.html#myisam-start" title="15.1.1. MyISAM Startup Options">15.1.1節，「MyISAM啟動選項」</a>。</p>
			<p>請注意<span>--external-locking</span>不為使用延遲鍵寫入的資料表提供索引破壞保護。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delayed_insert_limit</span></p>
			<p>插入<span>delayed_insert_limit</span><span>
			</span>延遲行後，<span>INSERT 
			DELAYED</span><span> </span>處理器線程檢查是否有掛起的<span>SELECT</span>語句。如果有，在繼續插入延遲的行之前，允許它們先執行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			delayed_insert_timeout</span></p>
			<p>
			<span>INSERT DELAYED</span>處理器線程終止前應等待<span>INSERT</span>語句的時間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>delayed_queue_size</span></p>
			<p>這是各個資料表中處理<span>INSERT 
			DELAYED</span>語句時隊列中行的數量限制。如果隊列滿了，執行<span>INSERT 
			DELAYED</span>語句的客戶端應等待直到隊列內再有空間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>div_precision_increment</span></p>
			<p>該變數說明用<span>/</span>操作符執行除操作的結果可增加的精確度的位數。
			預設值是<span>4</span>。最小和最大值分別為<span>0</span>和<span>30</span>。下面的示範說明了增加
			預設值的結果。</p>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT 1/7;</span></b></span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>| 1/7&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>| 0.1429 |</span></pre>
			<pre ><span>+--------+</span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SET div_precision_increment = 12;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT 1/7;</span></b></span></pre>
			<pre ><span>+----------------+</span></pre>
			<pre ><span>| 1/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre ><span>+----------------+</span></pre>
			<pre ><span>| 0.142857142857 |</span></pre>
			<pre ><span>+----------------+</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			engine_condition_pushdown</span></p>
			<p>該變數適用於<span>NDB</span>。預設值為<span>0(</span><span>OFF</span><span>)</span>：如果您執行類似查詢<span>SELECT 
			* FROM t WHERE mycol = 42</span>，其中<span>mycol</span>為沒有索引的列，當滿了的資料表掃瞄每個<span>NDB</span>節點時，執行該查詢。每個節點使用<span>WHERE</span>條件將每一行發送給<span>MySQL</span>伺服器。如果<span>engine_condition_pushdown</span>被設置為<span>1(</span><span>ON</span><span>)</span>，該條件「<span class="quote"><span>pushed 
			down</span></span>」給儲存引擎並發送給<span>NDB</span>節點。每個節點都執行掃瞄，並只向<span>MySQL</span>伺服器發送回匹配條件的行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			expire_logs_days</span></p>
			<p>二進制日誌自動刪除的天數。預設值為<span>0,</span>資料表示「沒有<span class="quote">自動刪除</span>」。啟動時和二進制日誌循環時可能刪除。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>flush</span></p>
			<p>如果用<span>--flush</span>選項啟動<strong><span>mysqld</span></strong>該值為<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			flush_time</span></p>
			<p>如果設為非零值，每隔<span>flush_time</span>秒則關閉所有資料表以釋放硬盤資源並同步未清空的數據。我們建議只在<span>Windows 
			9x</span>或<span>Me</span>，或有最小資源的系統中使用該選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_boolean_syntax</span></p>
			<p>使用<span>IN 
			BOOLEAN MODE</span>執行的布爾全文搜索支援的操作符系列。參見<a href="functions.html#fulltext-boolean" title="12.7.1. Boolean Full-Text Searches">12.7.1節，「布爾全文搜索」</a>。</p>
			<p>預設變數值為 
			<span>&#39;+ -&gt;&lt;()~*:&quot;&quot;&amp;|&#39;</span>。更改這些值的規則是：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>操作符函數由其在字串內的位置決定。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>替換值必須是<span>14</span>個字元。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>每個字元必須為<span>ASCII</span>碼非文字數字字元。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>第<span>1</span>個或第<span>2</span>個字元必須為空格。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>除非語句在第<span>11</span>個字元和第<span>12</span>個字元處引用了操作符，否則不允許複製。這兩個字元可以不相同，但這是唯一可能的兩個。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>位置<span>10</span>、<span>13</span>和<span>14(</span>預設設置為『<span>:</span>』、『<span>&amp;</span>』和『<span>|</span>』<span>)</span>保留用於將來延伸。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ft_max_word_len</span></p>
			<p>
			<span>FULLTEXT</span>索引中所包含的字的最大長度。</p>
			<p><strong>
			<span>注</span></strong>釋：更改該變數後必須重建<span>FULLTEXT</span>索引。應使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>ft_min_word_len</span></p>
			<p>
			<span>FULLTEXT</span>索引中所包含的字的最小長度。</p>
			<p><strong>
			<span>注</span></strong>釋：更改該變數後必須重建<span>FULLTEXT</span>索引。應使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_query_expansion_limit</span></p>
			<p>使用<span>WITH 
			QUERY EXPANSION</span>進行全文搜索的最大匹配數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			ft_stopword_file</span></p>
			<p>
			用於讀取全文搜索的停止字清單的檔案。該檔案中的所有字都會用到；註釋不重要。預設情況下，使用內嵌式停止字清單<span>(</span>如<span>myisam/ft_static.c</span>檔案中所定義<span>)</span>。將該變數設置為空字串<span>(</span><span>&#39;&#39;</span><span>)</span>則禁用停止字過濾。</p>
			<p><strong>
			<span>注</span></strong>釋：更改該變數或停止字檔案的內容後必須重建<span>FULLTEXT</span>索引。應使用<span>REPAIR 
			TABLE <i>tbl_name</i> QUICK</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			group_concat_max_len</span></p>
			<p>允許的<span>GROUP_CONCAT()</span>函數結果的最大長度。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_archive</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>ARCHIVE</span>資料表則為<span>YES</span>，否則為<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_bdb</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>BDB</span>資料表則為<span>YES</span>。如果使用<span>--skip-bdb</span>則為<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_blackhole_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>BLACKHOLE</span>資料表則為<span>YES</span>，否則為<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_compress</span></p>
			<p>是否<span>zlib</span>壓縮庫適合該伺服器。如果不適合，不能使用<span>COMPRESS()</span>和<span>UNCOMPRESS()</span>函數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_crypt</span></p>
			<p>是否<span>crypt()</span>系統使用適合該伺服器。如果不適合，不能使用<span>CRYPT()</span>函數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_csv</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>ARCHIVE</span>資料表則為<span>YES</span>，否則為<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_example_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>EXAMPLE</span>資料表則為<span>YES</span>，否則為<span>NO</span>。</p>
			<p>
			<span>have_federated_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>FEDERATED</span>資料表則為<span>YES</span>，否則為<span>NO</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_geometry</span></p>
			<p>是否伺服器支援空間數據類型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_innodb</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>InnoDB</span>資料表則為<span>YES</span>。如果使用<span>--skip-innodb</span>則為<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_isam</span></p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>只是為了向後兼容顯示該值，並且總是<span>NO</span>，因為不再支援<span>ISAM</span>資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_ndbcluster</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>NDB 
			CLUSTER</span>資料表則為<span>YES</span>。如果使用了<span>--skip-ndbcluster</span>則為<span>DISABLED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_partition_engine</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援分區則為<span>YES</span>。在<span>MySQL 
			5.1.1</span>中加入。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_openssl</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援客戶端<span>/</span>伺服器協議的<span>SSL(</span>加密<span>)</span>則為<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_query_cache</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援查詢緩存則為<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>have_raid</span></p>
			<p>如果<strong><span>mysqld</span></strong>支援<span>RAID</span>選項則為<span>YES</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>have_rtree_</span><span>keys</span></span></p>
			<p>
			<span>RTREE</span>索引是否可用。<span>(</span>用於<span>MyISAM</span>資料表的空間索引）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			have_symlink</span></p>
			<p>是否啟用符號連結支援。在<span>Unix</span>中需要用於支援<span>DATA 
			DIRECTORY</span>和<span>INDEX 
			DIRECTORY</span>資料表選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_connect</span></p>
			<p>伺服器為每個連接的客戶端執行的字串。字串由一個或多個<span>SQL</span>語句組成。要想指定多個語句，用分號間隔開。例如，每個客戶端開始時預設啟用<span>autocommit</span>模式。沒有全局伺服器變數可以規定<span>autocommit</span>預設情況下應禁用，但可以用<span>init_connect</span>來獲得相同的效果：</p>
			<pre ><span>SET GLOBAL init_connect=&#39;SET AUTOCOMMIT=0&#39;;</span></pre>
			<p>
			還可以在命令行或選項檔案中設置該變數。要想使用選項檔案設置變數，應包括下述行：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span>init_connect=&#39;SET AUTOCOMMIT=0&#39;</span></pre>
			<p>請注意<span>init_connect</span>的內容並不為擁有<span>SUPER</span>權限的用戶執行；實際是內容設置錯誤<span>(</span>包含錯誤查詢，例如語法錯誤<span>)</span>，這樣使所有連接失敗。不為<span>SUPER</span>用戶執行，使<span>SUPER</span>用戶可以打開連接並固定<span>init_connect</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_file</span></p>
			<p>啟動伺服器時用<span>--init-file</span>選項指定的檔案名。檔案中包含伺服器啟動時要執行的<span>SQL</span>語句。每個語句必須在同一行中並且不能包括註釋。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>init_slave</span></p>
			<p>該變數類似<span>init_connect</span>，但是每次<span>SQL</span>線程啟動時從伺服器應執行該字串。該字串的格式與<span>init_connect</span>變數相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>innodb_<i>xxx</i></span></p>
			<p>
			<span>InnoDB</span>系統變數列入<a href="storage-engines.html#innodb-start" title="15.2.4. InnoDB Startup Options">15.2.4節，「InnoDB啟動選項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>interactive_timeout</span></p>
			<p>伺服器關閉交互式連接前等待活動的秒數。交互式客戶端定義為在<span>mysql_real_connect()</span>中使用<span>CLIENT_INTERACTIVE</span>選項的客戶端。又見<span>wait_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			join_buffer_size</span></p>
			<p>用於完全聯接的緩衝區的大小<span>(</span>當不使用索引的時候使用聯接操作<span>)</span>。一般情況獲得快速聯接的最好方法是新增索引。當增加索引時不可能通過增加<span>join_buffer_size</span>值來獲得快速完全聯接。將為兩個資料表之間的每個完全聯接分配聯接緩衝區。對於多個資料表之間不使用索引的複雜聯接，需要多聯接緩衝區。</p>
			<p>
			<span>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>key_buffer_size</span></span></p>
			<p>
			<span>MyISAM</span>資料表的索引塊分配了緩衝區，由所有線程共享。<span>key_buffer_size</span>是索引塊緩衝區的大小。鍵值緩衝區即為鍵值緩存。</p>
			<p>
			<span>key_buffer_size</span>的最大允許設定值為<span>4GB</span>。有效最大值可以更小，取決於可用物理<span>RAM</span>和作業系統或硬件平台強加的每個程序的<span>RAM</span>限制。</p>
			<p>增加該值，達到您可以提供的更好的索引處理<span>(</span>所有讀和多個寫操作<span>)</span>。通常為主要運行<span>MySQL</span>的機器內存的<span>25%</span>。但是，如果您將該值設得過大<span>(</span>例如，大於總內存的<span>50%)</span>，系統將轉換為頁並變得極慢。<span>MySQL</span>依賴作業系統來執行數據讀取時的檔案系統緩存，因此您必須為檔案系統緩存留一些空間。</p>
			<p>同時寫多行時要想速度更快，應使用<span>LOCK 
			TABLES</span>。參見<a href="sql-syntax.html#lock-tables" title="13.4.5. LOCK TABLES and UNLOCK TABLES Syntax">13.4.5節，「LOCK 
				TABLES和UNLOCK TABLES語法」</a>。</p>
			<p>您可以通過執行<span>SHOW 
			STATUS</span>語句並檢查<span>Key_read_requests</span>、<span>Key_reads</span>、<span>Key_write_requests</span>和<span>Key_writes</span>狀態變數來檢查鍵值緩衝區的性能。參見<a href="sql-syntax.html#show" title="13.5.4. SHOW Syntax">13.5.4節，「SHOW語法」</a>。</p>
			<p>
			<span>Key_reads/Key_read_requests</span>比例一般應小於<span>0.01</span>。如果您使用更新和刪除，<span>Key_writes/Key_write_requests</span>比例通常接近<span>1</span>，但如果您更新時會同時影響到多行或如果您正使用<span>DELAY_KEY_WRITE</span>資料表選項，可能小得多。</p>
			<p>用<span>key_buffer_size</span>結合<span>Key_blocks_unused</span>狀態變數和緩衝區塊大小，可以確定使用的鍵值緩衝區的比例。從<span>key_cache_block_size</span>伺服器變數可以獲得緩衝區塊大小。使用的緩衝區的比例為：</p>
			<pre ><span>1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)</span></pre>
			<p>該值為約數，因為鍵值緩衝區的部分空間被分配用作內部管理結構。</p>
			<p>可以建立多個<span>MyISAM</span>鍵值緩存。<span>4GB</span>限制可以適合每個緩存，而不是一個組。參見<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6節，「MyISAM鍵高速緩衝」</a>。</p>
			<p>
			<span>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>key_cache_age_threshold</span></span></p>
			<p>該值控制將緩衝區從鍵值緩存熱子鏈<span>(sub-chain)</span>降級到溫子鏈<span>(sub-chain)</span>。如果值更低，則降級更快。最小值為<span>100</span>。
			預設值是<span>300</span>。參見<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6節，「MyISAM鍵高速緩衝」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			key_cache_block_size</span></p>
			<p>鍵值緩存內塊的字節大小。預設值是<span>1024</span>。參見<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6節，「MyISAM鍵高速緩衝」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			key_cache_division_limit</span></p>
			<p>
			鍵值緩存緩衝區鏈熱子鏈和溫子鏈的劃分點。該值為緩衝區鏈用於溫子鏈的百分比。允許的值的範圍為<span>1</span>到<span>100</span>。
			預設值是<span>100</span>。參見<a href="optimization.html#myisam-key-cache" title="7.4.6. The MyISAM Key Cache">7.4.6節，「MyISAM鍵高速緩衝」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>language</span></p>
			<p>錯誤消息所用語言。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>large_file_support</span></p>
			<p><strong>
			<span>mysqld</span></strong>編譯時是否使用了大檔案支援選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>large_pages</span></p>
			<p>說明是否啟用了大頁面支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>license</span></p>
			<p>伺服器的授權類型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			local_infile</span></p>
			<p>是否<span>LOCAL</span>支援<span>LOAD 
			DATA INFILE</span>語句。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			locked_in_memory</span></p>
			<p>是否用<span><span>–</span><span>memlock</span></span>將<strong><span>mysqld</span></strong>鎖在內存中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log</span></p>
			<p>是否啟用將所有查詢記錄到常規查詢日誌中。參見<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2節，「通用查詢日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log_bin</span></p>
			<p>是否啟用二進制日誌。參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>log_bin_trust_routine_creators</span></p>
			<p>
			若啟用了二進制記錄，則該變數適用。它控制是否可以信任保存的程式的作者不會建立向二進制日誌寫入不安全事件的程式。如果設置為<span>0(</span>預設情況<span>)</span>，不允許用戶建立或修改保存的程式，除非他們不僅擁有<span>CREATE 
			ROUTINE</span>或<span>ALTER 
			ROUTINE</span>權限還擁有<span>SUPER</span>權限。</p>
			<p>設置為<span>0</span>還強制限制，程式必須用<span>DETERMINISTIC</span><span>
			</span>特徵或用<span>READS SQL 
			DATA</span>或<span>NO 
			SQL</span>特徵聲明。如果變數設置為<span>1,MySQL</span>不對保存程式的建立強加限制。</p>
			<p>參見<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4節，「儲存子程式和觸發程式的二進制日誌功能」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_error</span></p>
			<p>錯誤日誌的位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_slave_updates</span></p>
			<p>
			是否從伺服器從主伺服器收到的更新應記入從伺服器自己的二進制日誌。要想生效，必須啟用從伺服器的二進制記錄。參見<a href="replication.html#replication-options" title="6.8. Replication Startup Options">6.8節，「複製啟動選項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_slow_queries</span></p>
			<p>是否記錄慢查詢。用<span>long_query_time</span>變數的值來確定「慢查詢」。參見<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4節，「慢速查詢日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			log_warnings</span></p>
			<p>是否產生其它警告消息。預設情況下啟用。放棄的連接不記入錯誤日誌，除非值大於<span>1</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			long_query_time</span></p>
			<p>如果查詢時間超過該值，則增加<span>Slow_queries</span>狀態變數。如果您正使用<span>--log-slow-queries</span>選項，則查詢記入慢查詢日誌檔案。用實際時間測量該值，而不是<span>CPU</span>時間，因此低於輕負載系統閾值的查詢可能超過重負載系統的閾值。參見<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4節，「慢速查詢日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			low_priority_updates</span></p>
			<p>如果設置為<span>1</span>，所有<span><span>INSERT</span>、<span>UPDATE</span>、<span>DELETE</span></span>和<span>LOCK 
			TABLE WRITE</span>語句將等待直到受影響的資料表沒有掛起的<span>SELECT</span>或<span>LOCK 
			TABLE READ</span>。該變數以前叫做<span>sql_low_priority_updates</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			lower_case_file_system</span></p>
			<p>該變數說明是否數據目錄所在的檔案系統對檔案名的大小寫敏感。<span>ON</span>說明對檔案名的大小寫不敏感，<span>OFF</span>資料表示敏感。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			lower_case_table_names</span></p>
			<p>如果設置為<span>1,</span>資料表名用小寫保存到硬盤上，並且資料表名比較時不對大小寫敏感。如果設置為<span>2</span>，按照指定的保存資料表名，但按照小寫來比較。該選項還適合資料庫名和資料表的別名。參見<a href="language-structure.html#name-case-sensitivity" title="9.2.2. Identifier Case Sensitivity">9.2.2節，「識別符大小寫敏感性」</a>。</p>
			<p>如果您正使用<span>InnoDB</span>資料表，您應在所有平台上將該變數設置為<span>1</span>，強制將名字轉換為小寫。</p>
			<p>如果運行<span>MySQL</span>的系統對檔案名的大小寫不敏感<span>(</span>例如<span>Windows</span>或<span>Mac 
			OS X)</span>，您不應將該變數設置為<span>0</span>。如果啟動時沒有設置該變數，並且數據目錄所在檔案系統對檔案名的大小寫不敏感，<span>MySQL</span>自動將<span>lower_case_table_names</span>設置為<span>2</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_allowed_packet</span></p>
			<p>包或任何生成的<span>/</span>中間字串的最大大小。</p>
			<p>包消息緩衝區初始化為<span>net_buffer_length</span>字節，但需要時可以增長到<span>max_allowed_packet</span>字節。該值預設很小，以捕獲大的<span>(</span>可能是錯誤的<span>)</span>數據包。</p>
			<p>如果您使用大的<span>BLOB</span><span>
			</span>列或長字串，您必須增加該值。應同您想要使用的最大的<span>BLOB</span>一樣大。<span>max_allowed_packet</span>的協議限制為<span>1GB</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_binlog_cache_size</span></p>
			<p>如果多語句事務需要更大的內存，您會得到錯誤<span>Multi-statement 
			transaction required more than &#39;max_binlog_cache_size&#39; bytes of 
			storage</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_binlog_size</span></p>
			<p>
			如果二進制日誌寫入的內容超出給定值，日誌就會發生滾動。您不能將該變數設置為大於<span>1GB</span>或小於<span>4096</span>字節。
			預設值是<span>1GB</span>。</p>
			<p>
			請注意如果您正使用事務：事務以一個塊寫入二進制日誌，因此不不能被幾個二進制日誌拆分。因此，如果您有大的事務，二進制日誌可能會大於<span>max_binlog_size</span>。</p>
			<p>如果<span>max_relay_log_size</span>為<span>0,
			</span>
			<span>max_binlog_size</span>的值也適用<span>於中繼日誌</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_connect_errors</span></p>
			<p>如果中斷的與主機的連接超過該數目，該主機則阻塞後面的連接。您可以用 
			 
			<span>FLUSH HOSTS</span>語句解鎖鎖定的主機。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_connections</span></p>
			<p>允許的並行客戶端連接數目。增大該值則增加<strong><span>mysqld</span></strong><span>
			</span>需要的檔案描述符的數量。關於檔案描述符限制的註釋參見<a href="optimization.html#table-cache" title="7.4.9. How MySQL Opens and Closes Tables">7.4.9節，「MySQL如何打開和關閉資料表」</a>。還可參見<a href="problems.html#too-many-connections" title="A.2.6. Too many connections">A.2.6節，「連接數過多」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_delayed_threads</span></p>
			<p>不要啟動大於該數目的線程來處理<span>INSERT 
			DELAYED</span>語句。如果所有<span>INSERT 
			DELAYED</span>線程已經在使用，您想在新資料表中插入數據，行 插入時好像未指定<span>DELAYED</span>屬性。如果您將該值設置為<span>0,MySQL</span>不會建立線程來處理<span>DELAYED</span>行；其結果是完全禁用了<span>DELAYED</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_error_count</span></p>
			<p>保存由<span>SHOW 
			ERRORS</span>或<span>SHOW 
			WARNINGS</span>顯示的錯誤、警告和註解的最大數目。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_heap_table_size</span></p>
			<p>該變數設置<span>MEMORY</span><span> 
			(</span><span>HEAP</span><span>)</span>資料表可以增長到的最大空間大小。該變數用來計算<span>MEMORY</span>資料表的<span>MAX_ROWS</span>值。在已有的<span>MEMORY</span>資料表上設置該變數沒有效果，除非用<span>CREATE 
			TABLE</span>或<span>TRUNCATE 
			TABLE</span>等語句重新建立資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_insert_delayed_threads</span></p>
			<p>該變數為<span>max_delayed_threads</span>的同義詞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_join_size</span></p>
			<p>不允授權能需要檢查多於<span>max_join_size</span>行<span>(</span>為單個資料表語句<span>)</span>或行組合<span>(</span>為多個資料表語句<span>)</span>或可能執行大於<span>max_join_size</span>次硬盤查詢的<span>SELECT</span>語句。通過設置該值，您可以捕獲鍵使用不正確並可能花很長時間的<span>SELECT</span>語句。如果用戶想要執行沒有<span>WHERE</span>子句的花較長時間或返回數百萬行的聯接，則設置它。</p>
			<p>將該變數設置為<span>DEFAULT</span>之外的值，將<span>SQL_BIG_SELECTS</span>的值重設為<span><span>0</span><span>。</span></span>如果您重新設置<span>SQL_BIG_SELECTS</span>值，<span>max_join_size</span>變數被忽略。</p>
			<p>
			如果查詢結果位於查詢緩存中，則不檢查結果大小，因為前面已經計算了結果，不會要求伺服器將它發送給客戶端。</p>
			<p>該變數以前叫做<span>sql_max_join_size</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_length_for_sort_data</span></p>
			<p>確定使用的<span>filesort</span>算法的索引值大小的限值。參見<a href="optimization.html#order-by-optimization" title="7.2.12. How MySQL Optimizes ORDER BY">7.2.12節，「MySQL如何最佳化ORDER BY<code class="literal"></code>」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_relay_log_size</span></p>
			<p>
			如果複製從伺服器寫入中繼日誌時超出給定值，則滾動中繼日誌。通過該變數您可以對中繼日誌和二進制日誌設置不同的限制。但是，將該變數設置為<span>0</span>，<span>MySQL</span>可以對二進制日誌和中繼日誌使用<span>max_binlog_size</span>。<span>max_relay_log_size</span>必須設置在<span>4096</span>字節和<span>1GB(</span>包括<span>)</span>之間，或為<span>0</span>。
			預設值是<span>0</span>。參見<a href="replication.html#replication-implementation-details" title="6.3. Replication Implementation Details">6.3節，「複製實施細節」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_seeks_for_key</span></p>
			<p>限制根據鍵值尋找行時的最大搜索數。<span>MySQL</span>最佳化器假定當用掃瞄鍵在資料表內搜索匹配的行時，不需要超過該數量的鍵值搜索，而不管鍵的實際基數是什麼<span>(</span>參見<a href="sql-syntax.html#show-index" title="13.5.4.11. SHOW INDEX Syntax">13.5.4.11節，「SHOW 
				INDEX語法」</a><span>)</span>。將該值設置為較低的值<span>(100?)</span>，您可以強制<span>MySQL</span>選擇鍵值而不選擇資料表掃瞄。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_sort_length</span></p>
			<p>當排序<span>BLOB</span>或<span>TEXT</span>值時使用的字節數。只使用每個值的前<span>max_sort_length</span>字節；其它的被忽略。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_tmp_tables</span></p>
			<p>客戶端可以同時打開的臨時資料表的最大數。<span>(</span>但該選項還未生效）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_user_connections</span></p>
			<p>任何給定的<span>MySQL</span>帳號允許的最大同時連接數。<span>0</span>值資料表示「沒有<span class="quote">限制</span>」。</p>
			<p>該變數具有全局範圍和<span>(</span>只讀<span>)</span>會話範圍。會話變數的的值與全局變數的值相同，除非當前帳號具有非零<span>MAX_USER_CONNECTIONS</span>資源限制。在這種情況下，會話值反應了帳號限制。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			max_write_lock_count</span></p>
			<p>超過寫鎖定限制後，允許部分讀鎖定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_data_pointer_size</span></p>
			<p>預設指針大小，單位是字節，當未指定<span>MAX_ROWS</span>選項時，<span>CREATE 
			TABLE</span>使用該變數建立<span>MyISAM</span>資料表。該變數不能小於<span>2</span>或大於<span>7</span>。 
			預設值是<span>6</span>。參見<a href="problems.html#full-table" title="A.2.11. The table is full">A.2.11節，「資料表已滿」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>DEPRECATED</span></em>)
			</span>
			<span>
			myisam_max_extra_sort_file_size</span></p>
			<p><strong>
			<span>注</span></strong>釋：<span>MySQL 
			5.1</span>不支援該變數。詳細訊息參見<em><span>MySQL 
			5.0 </span><span>參考手冊</span></em>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_max_sort_file_size</span></p>
			<p>重建<span>MyISAM</span>索引<span>(</span>在<span>REPAIR 
			TABLE</span>、<span>ALTER 
			TABLE</span>或<span>LOAD 
			DATA INFILE</span>過程中<span>)</span>時，允許<span>MySQL</span>使用的臨時檔案的最大空間大小。如果檔案的大小超過該值，則使用鍵值緩存建立索引，要慢得多。該值的單位為字節。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_recover_options</span></p>
			<p>
			<span>--myisam-recover</span>選項的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_repair_threads</span></p>
			<p>如果該值大於<span>1</span>，在<span>Repair 
			by sorting</span>過程中並行建立<span>MyISAM</span>資料表索引<span>(</span>每個索引在自己的線程內<span>)</span>。
			預設值是<span>1</span>。<strong><span>注</span></strong>釋：多線程維護仍然是<em><span>alpha</span></em><span>
			</span>編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			myisam_sort_buffer_size</span></p>
			<p>當在<span>REPAIR 
			TABLE</span>或用<span>CREATE 
			INDEX</span>建立索引或<span>ALTER 
			TABLE</span>過程中排序 
			<span>MyISAM</span>索引分配的緩衝區。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>myisam_stats_method</span></p>
			<p>當為<span>MyISAM</span>資料表搜集關於索引值分發的統計訊息時伺服器如何處理<span>NULL</span>值。該變數有兩個可能的值，<span>nulls_equal</span>和<span>nulls_unequal</span>。對於<span>nulls_equal</span>，認為所有<span>NULL</span>索引值時相等的，並形成一個數值組，其空間大小等於<span>NULL</span>值的數。對於<span>nulls_unequal</span>，<span>NULL</span>值認為是不相等的，每個<span>NULL</span>形成一個數值組，大小為<span>1</span>。</p>
			<p>方法用於生成資料表統計訊息，影響最佳化器如何選擇索引來執行查詢，詳細描述見<a href="optimization.html#myisam-index-statistics" title="7.4.7. MyISAM Index Statistics Collection">7.4.7節，「MyISAM索引統計集合」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			multi_read_range</span></p>
			<p>指定範圍選擇過程中發送到儲存引擎的範圍的最大值。預設值是<span>256</span>。向引擎發送多個範圍可以大大改進某些選擇的性能，特別是對<span>NDBCLUSTER</span>。該引擎需要向所有節點發送範圍請求，同時發送許多請求可以大大降低通信成本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			named_pipe</span></p>
			<p><span>(</span>只適用<span>Windows)</span>說明伺服器是否支援命名管道連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_buffer_length</span></p>
			<p>
			在查詢之間將通信緩衝區重設為該值。一般情況不應改變，但如果內存很小，可以將它設置為期望的客戶端發送的<span>SQL</span>語句的長度。如果語句超出該長度，緩衝區自動擴大，直到<span>max_allowed_packet</span>字節。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_read_timeout</span></p>
			<p>中斷讀前等待連接的其它數據的秒數。當伺服器從客戶端讀數時，<span>net_read_timeout</span>指控制何時中斷的超時值。當伺服器向客戶端寫時，<span>net_write_timeout</span>指控制何時中斷的超時值。又見<span>slave_net_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			net_retry_count</span></p>
			<p>如果某個通信端口的讀操作中斷了，在放棄前重試多次。在<span>FreeBSD</span>中該值應設得很高，因為內部中斷將發送至所有線程。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>net_write_timeout</span></p>
			<p>中斷寫之前等待塊寫入連接的秒數。又見<span>net_read_timeout</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>new</span></p>
			<p>在<span>MySQL 4.0</span>中使用該變數來打開<span>4.1</span>中的一些行為，並用於向後相容性。在<span>MySQL 
			5.1</span>中<span>,</span>它的值一直是<span>OFF.</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			old_passwords</span></p>
			<p>是否伺服器應為<span>MySQL</span>用戶帳號使用<span>pre-4.1-style</span>密碼。參見<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3節，「客戶端不支援鑒定協議」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>one_shot</span></p>
			<p>這不是一個變數，但當設置變數是可以使用它。其描述見<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3節，「SET語法」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>one_shot</span></p>
			<p>這不是一個變數，但當設置變數是可以使用它。其描述見<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3節，「SET語法」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>open_files_</span><span>limit</span></span></p>
			<p>作業系統允許<strong><span 
>mysqld</span></strong>打開的檔案的數量。這是系統允許的實際值，可能與您在啟動選項中賦給<strong><span>mysqld</span></strong>的值不同。若在系統中<span>MySQL</span>不能更改打開的檔案的數量，則該值為<span>0</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			optimizer_prune_level</span></p>
			<p>在查詢最佳化從最佳化器搜索空間裁減低希望局部計劃中使用的控制方法。<span>0</span>值禁用該方法，以便最佳化器進行窮舉搜索。值為<span>1</span>使最佳化器根據中間方案中得出的行數來裁減方案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			optimizer_search_depth</span><span> </span></p>
			<p>
			查詢最佳化器進行的搜索的最大深度。如果值大於查詢中的關係數則查詢方案比較佳，但生成查詢執行方案需要的時間更長。值大於查詢中的關係數則返回的執行方案更快，但方案遠沒有最佳化。如果設置為<span>0,
			</span>系統自動選擇合理的值。如果設置為查詢中使用的資料表的最大數加<span>2,</span>最佳化器轉換為<span>MySQL 
			5.0.0(</span>和以前的版本<span>)</span>中使用的算法並搜索。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>pid_file</span></p>
			<p>程序<span>ID (PID)</span>檔案的路徑名。可以用<span>--pid-file</span>選項設置該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>plugin_dir</span></p>
			<p>插件目錄的路徑。在<span>MySQL 5.1.2</span>中加入了該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>port</span></p>
			<p>伺服器幀聽<span>TCP/IP</span>連接所用端口。可以用<span>--port</span>選項設置該變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			preload_buffer_size</span></p>
			<p>重載索引時分配的緩衝區大小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			protocol_version</span></p>
			<p><span>MySQL</span>伺服器使用的客戶端<span>/</span>伺服器協議的版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_alloc_block_size</span></p>
			<p>
			為查詢分析和執行過程中建立的對象分配的內存塊大小。如果內存分段過程中遇到問題，將該變數增加一位會有幫助。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_limit</span></p>
			<p>不要緩存大於該值的結果。預設值是<span>1048576(1MB)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_min_res_unit</span></p>
			<p>查詢緩存分配的最小塊的大小<span>(</span>字節<span>)</span>。
			預設值是<span>4096(4KB)</span>。關於該變數的調節訊息參見<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3節，「查詢高速緩衝配置」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_size</span></p>
			<p>為緩存查詢結果分配的內存的數量。預設值是<span>0</span>，即禁用查詢緩存。請注意即使<span>query_cache_type</span>設置為<span>0</span>也將分配此數量的內存。詳細訊息參見<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3節，「查詢高速緩衝配置」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_type</span></p>
			<p>設置查詢緩存類型。設置<span>GLOBAL</span>值可以設置後面的所有客戶端連接的類型。客戶端可以設置<span>SESSION</span>值以影響他們自己對查詢緩存的使用。下面的資料表顯示了可能的值：</p>
			<table border="1" cellpadding="0" id="table6">
				<tr>
					<td>
					<p><strong><span>選項</span></strong></td>
					<td>
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>0</span>或<span>OFF</span></td>
					<td>
					<p>不要緩存或查詢結果。請注意這樣不會取消分配的查詢緩存區。要想取消，您應將<span>query_cache_size</span>設置為<span>0</span>。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>1</span>或<span>ON</span></td>
					<td>
					<p>緩存除了以<span>SELECT 
					SQL_NO_CACHE</span>開頭的所有查詢結果。</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>2</span>或<span>DEMAND</span></td>
					<td>
					<p>只緩存以<span>SELECT 
					SQL_NO_CACHE</span>開頭的查詢結果。</td>
				</tr>
			</table>
			<p>該變數預設設為<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_cache_wlock_invalidate</span></p>
			<p>一般情況，當客戶端對<span>MyISAM</span>資料表進行<span>WRITE</span>鎖定時，如果查詢結果位於查詢緩存中，則其它客戶端未被鎖定，可以對該資料表進行查詢。將該變數設置為<span>1</span>，則可以對資料表進行<span>WRITE</span>鎖定，使查詢緩存內所有對該資料表進行的查詢變得非法。這樣當鎖定生效時，可以強制其它試圖訪問資料表的客戶端來等待。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			query_prealloc_size</span></p>
			<p>
			用於查詢分析和執行的固定緩衝區的大小。在查詢之間該緩衝區不釋放。如果您執行複雜查詢，分配更大的<span>query_prealloc_size</span>值可以幫助提高性能，因為它可以降低查詢過程中伺服器分配內存的需求。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			range_alloc_block_size</span></p>
			<p>範圍最佳化時分配的塊的大小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_buffer_size</span></p>
			<p>每個線程連續掃瞄時為掃瞄的每個資料表分配的緩衝區的大小<span>(</span>字節<span>)</span>。如果進行多次連續掃瞄，可能需要增加該值，
			預設值為<span>131072</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_only</span></p>
			<p>當變數對複製從伺服器設置為<span>ON</span>時，從伺服器不允許更新，除非通過從伺服器的線程或用戶擁有<span>SUPER</span>權限。可以確保從伺服器不接受客戶端的更新命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			relay_log_purge</span></p>
			<p>當不再需要中繼日誌時禁用或啟用自動清空中繼日誌。預設值是<span>1(</span>啟用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			read_rnd_buffer_size</span></p>
			<p>
			當排序後按排序後的順序讀取行時，則通過該緩衝區讀取行，避免搜索硬盤。將該變數設置為較大的值可以大大改進<span>ORDER 
			BY</span>的性能。但是，這是為每個客戶端分配的緩衝區，因此您不應將全局變數設置為較大的值。相反，只為需要運行大查詢的客戶端更改會話變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>secure_auth</span></p>
			<p>如果用<span>--secure-auth</span>選項啟動了<span>MySQL</span>伺服器，它將阻塞有舊格式<span>(4.1</span>之前<span>)</span>密碼的所有帳號所發起的連接。在這種情況下，該變數的值為<span>ON</span>，否則為<span>OFF</span>。</p>
			<p>如果您想要防止使用舊格式的密碼<span>(</span>致使網絡通信不安全<span>)</span>，您應啟用該選項。</p>
			<p>如果啟用該選項並且授權資料表為<span>pre-4.1</span>格式，伺服器啟動失敗並且會出現錯誤。參見<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3節，「客戶端不支援鑒定協議」</a>。</p>
			<p>
			當用於客戶端選項時，如果伺服器需要該客戶端帳號的舊格式的密碼，則客戶端拒絕連接該伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			server_id</span></p>
			<p>
			<span>--server-id</span>選項的值。用於主複製伺服器和從複製伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			shared_memory</span></p>
			<p><span>(</span>只用於<span>Windows)</span>伺服器是否允許共享內存連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			shared_memory_base_name</span></p>
			<p><span>(</span>只用於<span>Windows)</span>說明伺服器是否允許共享內存連接，並為共享內存設置識別符。當在單台機器上運行多個<span>MySQL</span>實例時很有用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			skip_external_locking</span></p>
			<p>如果<strong><span>mysqld</span></strong>使用外部鎖定，該值為<span>OFF</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>skip_networking</span></p>
			<p>如果伺服器只允許本地<span>(</span>非<span>TCP/IP)</span>連接，該值為<span>ON</span>。在<span>Unix</span>中，本地連接使用<span>Unix</span>套接字檔案。在<span>Windows</span>中，本地連接使用命名管道或共享內存。在<span>NetWare</span>中，只支援<span>TCP/IP</span>連接，因此不要將該變數設置為<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			skip_show_database</span></p>
			<p>防止不具有<span>SHOW 
			DATABASES</span>權限的人們使用<span>SHOW 
			DATABASES</span>語句。如果您擔心用戶能夠看見屬於其它用戶的資料庫，這樣設置可以提高安全性。其效果取決於<span>SHOW 
			DATABASES</span>權限：如果變數值為<span>ON</span>，只允許具有<span>SHOW 
			DATABASES</span>權限的人們使用<span>SHOW 
			DATABASES</span><span> </span>
			語句，並且該語句將顯示所有資料庫名。如果值為<span>OFF</span>，允許所有用戶執行<span>SHOW 
			DATABASES</span>，但只顯示用戶具有<span>SHOW 
			DATABASES</span>或其它權限的資料庫的名稱。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_compressed_protocol</span></p>
			<p>如果主、從伺服器均支援，確定是否使用從<span>/</span>主壓縮協議。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_load_tmpdir</span></p>
			<p>從伺服器為複製<span>LOAD 
			DATA INFILE</span>語句建立臨時檔案的目錄名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>slave_net_timeout</span></p>
			<p>放棄讀操作前等待主<span>/</span>從連接的更多數據的等待秒數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slave_skip_errors</span></p>
			<p>從伺服器應跳過<span>(</span>忽視<span>)</span>的複製錯誤。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slave_transaction_retries</span></p>
			<p>如果由於<span>of</span><span>InnoDB</span>死鎖或超過<span>InnoDB</span>的<span>innodb_lock_wait_timeout</span>或<span>NDBCLUSTER</span>的<span>TransactionDeadlockDetectionTimeout</span>或<span><span>TransactionInactiveTimeout</span>，</span>複製從伺服器<span>SQL</span>線程未能執行事務，在提示錯誤並停止前它自動重複<span>slave_transaction_retries</span>次。
			預設值是<span>10</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			slow_launch_time</span></p>
			<p>如果建立線程的時間超過該秒數，伺服器增加<span>Slow_launch_threads</span>狀態變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>socket</span></p>
			<p><em>
			<span>Unix</span><span>平台</span></em>：用於本地客戶端連接的套接字檔案。預設為<span>/var/lib/mysql/mysql.sock</span>。</p>
			<p><em>
			<span>Windows</span></em>：用於本地客戶端連接的命名管道名。預設為<span>mysql</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			sort_buffer_size</span></p>
			<p>每個排序線程分配的緩衝區的大小。增加該值可以加快<span>ORDER 
			BY</span>或<span>GROUP 
			BY</span>操作。參見<a href="problems.html#temporary-files" title="A.4.4. Where MySQL Stores Temporary Files">A.4.4節，「MySQL將臨時檔案儲存在哪裡」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sql_mode</span></p>
			<p>當前的伺服器<span>SQL</span>模式，可以動態設置。參見<a href="database-administration.html#server-sql-mode" title="5.3.2. The Server SQL Mode">5.3.2節，「SQL伺服器模式」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sql_slave_skip_counter</span></p>
			<p>從伺服器應跳過的來自主伺服器的事件數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>storage_</span><span>engine</span></span></p>
			<p>該變數是<span>table_</span><span>typeis</span>的同義詞。在<span>MySQL 
			5.1</span>中<span>,</span>首選<span>storage_engine</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			sync_binlog</span></p>
			<p>如果為正，當每個<span>sync_binlog</span><span>&#39;th</span>寫入該二進制日誌後，<span>MySQL</span>伺服器將它的二進制日誌同步到硬盤上<span>(</span><span>fdatasync()</span><span>)</span>。請注意如果在<span>autocommit</span>模式，每執行一個語句向二進制日誌寫入一次，否則每個事務寫入一次。
			預設值是<span>0</span>，不與硬盤同步。值為<span>1</span>是最安全的選擇，因為崩潰時，您最多丟掉二進制日誌中的一個語句<span>/</span>事務；但是，這是最慢的選擇<span>(</span>除非硬盤有電池備份緩存，從而使同步工作較快<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>sync_frm</span></p>
			<p>如果該變數設為<span>1,</span>當建立非臨時資料表時它的<span>.frm</span>檔案被同步到硬盤上<span>(</span><span>fdatasync()</span><span>)</span>；這樣較慢但出現崩潰時較安全。
			預設值為<span>1</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			system_time_zone</span></p>
			<p>伺服器系統時區。當 
			伺服器開始執行時，它繼承機器預設時區設置值，可以由運行伺服器的帳號或在啟動指令中進行修改。該值用來設置<span>system_time_zone</span>。典型情況用<span>TZ</span>環境變數來指定時區。還可以用<strong><span>mysqld_safe</span></strong>指令的<span>--timez</span>選項來指定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			table_cache</span></p>
			<p>所有線程打開的資料表的數目。增大該值可以增加<strong><span>mysqld</span></strong>需要的檔案描述符的數量。您可以檢查<span>Opened_tables</span>狀態變數來檢查您是否需要增加資料表緩存。參見<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4節，「伺服器狀態變數」</a>。如果<span>Opened_tables</span>值較大，並且多次執行<span>FLUSH 
			TABLES</span><span>(</span>只是強制關閉所有資料表並重新<span>)</span>，則應增加<span>table_cache</span>變數的值。</p>
			<p>關於資料表緩存的詳細訊息，參見<a href="optimization.html#table-cache" title="7.4.9. How MySQL Opens and Closes Tables">7.4.9節，「MySQL如何打開和關閉資料表」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			table_type</span></p>
			<p>預設資料表類型<span>(</span>儲存引擎<span>)</span>。要想在伺服器啟動時設置資料表類型，使用<span>--default-table-type</span>選項。參見<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1節，「<span><strong class="command">mysqld</strong></span>命令行選項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_cache_size</span></p>
			<p>伺服器應緩存多少線程以便重新使用。當客戶端中斷連接時，如果線程少於<span>thread_cache_size</span>，則客戶端的線程被放入緩存。當請求線程時如果允授權以從緩存中重新利用線程，並且只有當緩存空了時才會建立新線程。如果新連接很多，可以增加該變數以提高性能。<span>(</span>一般情況，如果線程執行得很好，性能提高不明顯<span>)</span>。檢查<span>Connections</span>和<span>Threads_created</span>狀態變數的差<span>(</span>詳見<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4節，「伺服器狀態變數」</a><span>)</span>，您可以看見線程緩存的效率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_concurrency</span></p>
			<p>在<span>Solaris</span>中，<strong><span>mysqld</span></strong>用該值使用<span>thr_setconcurrency()</span>。該函數使應用程式向線程系統提供需要同時運行的期望的線程數目的提示。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			thread_stack</span></p>
			<p>每個線程的堆棧大小。用<span>crash-me</span>測試檢測出的許多限制取決於該值。
			預設值足夠大，可以滿足普通操作。參見<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4節，「MySQL基準套件」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>time_format</span></p>
			<p>該變數為使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			time_zone</span></p>
			<p>當前的時區。初使值是<span><span>&#39;</span><span>SYSTEM</span><span>&#39;</span></span><span>(</span>使用<span>system_time_zone</span>的值<span>)</span>，但可以用<span>--default-time-zone</span>選項在伺服器啟動時顯式指定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tmp_table_size</span></p>
			<p>如果內存內的臨時資料表超過該值，<span>MySQL</span>自動將它轉換為硬盤上的<span>MyISAM</span>資料表。如果您執行許多高級<span>GROUP 
			BY</span>查詢並且有大量內存，則可以增加<span>tmp_table_size</span>的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>tmpdir</span></p>
			<p>保存臨時檔案和臨時資料表的目錄。該變數可以設置為幾個路徑，按<span>round-robin</span>模式使用。在<span>Unix</span>中應該用冒號<span>(</span>『<span>:</span>』<span>)</span>間隔開路徑，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中用分號<span>(</span>『<span>；</span>』<span>)</span>。</p>
			<p>用來將負荷分散到幾個物理硬盤上。如果<span>MySQL</span>伺服器為複製從伺服器，您不應將<span>tmpdir</span>設置為指向基於內存的檔案系統上的目錄或當伺服器主機重啟時聲明的目錄。複製從伺服器需要部分臨時檔案來在機器重啟後仍可用，以便它可以複製臨時資料表或執行<span>LOAD 
			DATA INFILE</span>操作。如果伺服器重啟時臨時檔案夾中的檔案丟失了，則複製失敗。但是，如果您使用<span>MySQL 
			4.0.0</span>或更新版本，您可以使用 
			<span>slave_load_tmpdir</span>變數設置從伺服器的臨時目錄。在這種情況下，從伺服器不再使用常規<span>tmpdir</span>，說明您可以將<span>tmpdir</span>設置到一個非固定位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			transaction_alloc_block_size</span></p>
			<p>為保存將保存到二進制日誌中的事務的查詢而分配的內存塊的大小<span>(</span>字節<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			transaction_prealloc_size</span></p>
			<p>為<span>transaction_alloc_blocks</span>分配的固定緩衝區的大小（字節），在兩次查詢之間不會釋放。使該值足夠大，將所有查詢固定到一個事務中，可以避免多次<span>malloc()</span>使用。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tx_isolation</span></p>
			<p>預設事務隔離級別。預設值為<span>REPEATABLE-READ</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			updatable_views_with_limit</span></p>
			<p>該變數控制如果更新包含<span>LIMIT</span>子句，是否可以在當前資料表中使用不包含主關鍵字的視圖進行更新。<span>(</span>通常用<span>GUI</span>工具生成這類更新<span>)</span>。更新指<span>UPDATE</span>或<span>DELETE</span>語句。這兒主關鍵字指<span>PRIMARY 
			KEY</span>，或一個<span>UNIQUE</span>索引，其中任何列不可以包含<span>NULL</span>。</p>
			<p>該變數有兩個值：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>1</span>或<span>YES</span>：只發出警告<span>(</span>沒有錯誤消息<span>)</span>。這是
			預設值。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>0</span>或<span>NO</span>：禁止更新。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>version</span></p>
			<p>伺服器版本號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_bdb</span></p>
			<p>
			<span>BDB</span>儲存引擎版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_comment</span></p>
			<p><strong>
			<span>configure</span></strong>指令有一個<span>--with-comment</span>選項，當構建<span>MySQL</span>時可以進行註釋。該變數包含註釋值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_compile_machine</span></p>
			<p><span>MySQL</span>構建的機器或架構的類型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			version_compile_os</span></p>
			<p><span>MySQL</span>構建的作業系統的類型。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			wait_timeout</span></p>
			<p>伺服器關閉非交互連接之前等待活動的秒數。</p>
			<p>線上程啟動時，根據全局<span>wait_timeout</span>值或全局<span>interactive_timeout</span>值初始化會話<span>wait_timeout</span>值，取決於客戶端類型<span>(</span>由<span>mysql_real_connect()</span>的連接選項<span>CLIENT_INTERACTIVE</span>定義<span>)</span>。又見<span>interactive_timeout</span>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-system-variables"></a>
				5.3.3.1.&nbsp;動態系統變數</h4></div></div></div>
				<p>許多伺服器系統變數是動態的，可以使用<span>SET 
				GLOBAL</span>或<span>SET 
				SESSION</span>在運行時設置。您還可以使用<span>SELECT</span>獲得它們的值。參見<a href="language-structure.html#system-variables" title="9.4. System Variables">9.4節，「系統變數」</a>。</p>
				<p>下面的資料表列出了所有動態系統變數。最後<span>1</span>列說明每個變數是否適用<span>GLOBAL</span>或<span>SESSION</span><span>(</span>或二者<span>)</span>。</p>
				<table border="1" cellpadding="0" id="table7">
					<tr>
						<td>
						<p><strong>
						<span>變數名</span></strong></td>
						<td>
						<p><strong>
						<span>值類型</span></strong></td>
						<td>
						<p><strong>
						<span>類型</span></strong></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>autocommit</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>big_tables</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>binlog_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>bulk_insert_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_client</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_connection</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span><span>
						</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_results</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>character_set_server</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>collation_connection</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>collation_server</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>completion_type</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>concurrent_insert</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>connect_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>convert_character_set</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>default_week_format</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delay_key_write</span></td>
						<td>
						<p>
						<span>OFF</span><span> 
						| </span>
						<span>ON</span><span> |
						</span><span>
						ALL</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_insert_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_insert_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>delayed_queue_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>div_precision_increment</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>engine_condition_pushdown</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>error_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>expire_logs_days</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>flush</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>flush_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>foreign_key_checks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>ft_boolean_syntax</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>group_concat_max_len</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>identity</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_autoextend_increment</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_concurrency_tickets</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_max_dirty_pages_pct</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_max_purge_lag</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_support_xa</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_sync_spin_loops</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_table_locks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_thread_concurrency</span></td>
						<td>
						<p><span>numeric </span>
						<span>GLOBAL</span></td>
						<td>
						<p><span>&nbsp;</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>innodb_thread_sleep_delay</span></td>
						<td>
						<p><span>numeric </span>
						<span>GLOBAL</span></td>
						<td>
						<p><span>&nbsp;</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>insert_id</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>interactive_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>join_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>key_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>last_insert_id</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>local_infile</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>log_warnings</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>long_query_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>low_priority_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_allowed_packet</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_binlog_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_binlog_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_connect_errors</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_connections</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_delayed_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_error_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_heap_table_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_insert_delayed_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_join_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_relay_log_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_seeks_for_key</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_sort_length</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_tmp_tables</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_user_connections</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>max_write_lock_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_stats_method</span></td>
						<td>
						<p><span>enum</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>multi_read_range</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_data_pointer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>log_bin_trust_routine_creators</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_max_sort_file_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_repair_threads</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>myisam_sort_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_buffer_length</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_read_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_retry_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>net_write_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>old_passwords</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>optimizer_prune_level</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>optimizer_search_depth</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>preload_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_type</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_cache_wlock_invalidate</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>query_prealloc_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>range_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_only</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>read_rnd_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>rpl_recovery_rank</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>safe_show_database</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>secure_auth</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>server_id</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_compressed_protocol</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_net_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slave_transaction_retries</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>slow_launch_time</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sort_buffer_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_auto_is_null</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_big_selects</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_big_tables</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_buffer_result</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_bin</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_off</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_log_update</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_low_priority_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_max_join_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_mode</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_notes</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_quote_show_create</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_safe_updates</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_select_limit</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_slave_skip_counter</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>updatable_views_with_limit</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sql_warnings</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sync_binlog</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>sync_frm</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>storage_engine</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>table_cache</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>table_type</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>thread_cache_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>time_zone</span></td>
						<td>
						<p><span>string</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>timestamp</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>tmp_table_size</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>transaction_alloc_block_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>transaction_prealloc_size</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>tx_isolation</span></td>
						<td>
						<p><span>enumeration</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>unique_checks</span></td>
						<td>
						<p><span>boolean</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>wait_timeout</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>GLOBAL</span><span> 
						| </span>
						<span>SESSION</span></td>
					</tr>
					<tr>
						<td>
						<p>
						<span>warning_count</span></td>
						<td>
						<p><span>numeric</span></td>
						<td>
						<p>
						<span>SESSION</span></td>
					</tr>
				</table>
				<p>標記為<strong><span>string</span></strong>的變數採用字串值。標記為<strong><span>numeric</span></strong>的變數採用數字值。標記為<strong><span>boolean</span></strong>的變數可以設置為<span>0</span>、<span>1</span>、<span>ON</span>或<span>OFF</span>。標記為<strong><span>enumeration</span></strong>的變數一般情況應設置為該變數的某個可用值，但還可以設置為對應期望的枚舉值的數字。對於<span>枚舉</span>系統變數，第<span>1</span>個枚舉值應對應<span>0</span>。這不同於<span>ENUM</span>列，第<span>1</span>個枚舉值對應<span>1</span>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="server-status-variables"></a>
			5.3.4.&nbsp;伺服器狀態變數</h3></div></div></div><a class="indexterm" name="id2760845"></a><a class="indexterm" name="id2760852"></a>
			<p>伺服器維護許多提供操作相關訊息的狀態變數。您可以通過<span>SHOW 
			STATUS</span>語句查看這些變數和它們的值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW STATUS;</span></b></span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>| Aborted_clients&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Aborted_connects&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Bytes_received&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 155372598&nbsp; |</span></pre>
			<pre><span>| Bytes_sent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1176560426 |</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>…</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>| Connections&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 30023&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Created_tmp_disk_tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Created_tmp_files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;|</span></pre>
			<pre><span>| Created_tmp_tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>…</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>| Threads_created&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Threads_running&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 88&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Uptime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1389872&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------------------------------+------------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>用<span>FLUSH STATUS</span>語句可以將許多狀態變數重設為<span>0</span>。</p>
			<p>狀態變數有以下含義。沒有指示版本的變數在<span>MySQL 5.1</span>之前已經出現。關於它們的使用歷史，參見<em><span>MySQL 
			5.0</span><span
>參考手冊</span></em>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Aborted_clients</span></p>
			<p>由於客戶端沒有正確關閉連接導致客戶端終止而中斷的連接數。參見<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10節，「通信錯誤和失效連接」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Aborted_connects</span></p>
			<p>試圖連接到<span>MySQL</span>伺服器而失敗的連接數。參見<a href="problems.html#communication-errors" title="A.2.10. Communication Errors and Aborted Connections">A.2.10節，「通信錯誤和失效連接」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Binlog_cache_disk_use</span></p>
			<p>使用臨時二進制日誌緩存但超過<span>binlog_cache_size</span>值並使用臨時檔案來保存事務中的語句的事務數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Binlog_cache_use</span></p>
			<p>使用臨時二進制日誌緩存的事務數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Bytes_received</span></p>
			<p>從所有客戶端接收到的字節數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Bytes_sent</span></p>
			<p>發送給所有客戶端的字節數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Com_<i>xxx</i></span></p>
			<p>
			<span>Com_<i>xxx</i></span><span>
			</span>語句計數變數資料表示每個<span><i><span>xxx</span></i></span><span>
			</span>語句執行的次數。每類語句有一個狀態變數。例如，<span>Com_delete</span>和<span>Com_insert</span>分別統計<span>DELETE</span><span>
			</span>和<span>INSERT</span>語句執行的次數。</p>
			<p>
			<span>Com_stmt_<i>xxx</i></span>狀態變數為：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_prepare</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_execute</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_fetch</span><span>
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>
			Com_stmt_send_long_data</span><span> </span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_reset</span><span>
			</span></p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Com_stmt_close</span></p>
			<p>這些變數代資料表準備好的語句命令。它們的名字對應網絡層使用的<span>COM_<i>xxx</i></span><span>
			</span>命令系列；換句話說：當準備好的語句<span>API</span>使用如<strong><span>mysql_stmt_prepare()</span></strong>、<strong><span>mysql_stmt_</span><span>執行<span>()</span></span></strong>並執行時，它們的值增加。但是，當執行下面的<span>SQL</span>語句時，<span>Com_stmt_prepare</span><span>,
			</span><span>
			Com_stmt_execute</span>和<span>Com_stmt_close</span>也增加：<span>PREPARE</span>、<span>EXECUTE</span>或<span>DEALLOCATE 
			PREPARE</span>。此外，舊<span>(</span>從<span>MySQL 
			4.1.3</span>起可用<span>)</span>語句計數變數<span>Com_prepare_sql</span>、<span>Com_execute_sql</span>和<span>Com_dealloc_sql</span>的值也隨<span>PREPARE</span>、<span>EXECUTE</span>和<span>DEALLOCATE 
			PREPARE</span>語句增加。<span>Com_stmt_fetch</span>代資料表通過光標獲取的網絡<span>round-trips</span>的總數量。</p>
			<p>所有<span>Com_stmt_<i>xxx</i></span>變數將增加，即使語句參數未知或執行過程中出現錯誤。換句話說，它們的值對應發出的請求數，而不是成功完成的請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Connections</span></p>
			<p>試圖連接到<span>(</span>不管是否成功<span>)MySQL</span>伺服器的連接數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Created_tmp_disk_tables</span></p>
			<p>伺服器執行語句時在硬盤上自動建立的臨時資料表的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Created_tmp_files</span></p>
			<p><strong>
			<span>mysqld</span></strong>已經建立的臨時檔案的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Created_tmp_files</span></p>
			<p>伺服器執行語句時自動建立的內存中的臨時資料表的數量。如果<span>Created_tmp_disk_tables</span>較大，您可能要增加<span>tmp_table_size</span>值使臨時 
			資料表基於內存而不基於硬盤。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_errors</span></p>
			<p>用<span>INSERT 
			DELAYED</span>寫的出現錯誤的行數<span>(</span>可能為<span>duplicate 
			key</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_insert_threads</span></p>
			<p>使用的<span>INSERT 
			DELAYED</span>處理器線程數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Delayed_writes</span></p>
			<p>寫入的<span>INSERT 
			DELAYED</span>行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Flush_commands</span></p>
			<p>執行的<span>FLUSH</span>語句數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_commit</span></p>
			<p>內部提交語句數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_discover</span></p>
			<p><span>MySQL</span>伺服器可以問<span>NDB 
			CLUSTER</span>儲存引擎是否知道某一名字的資料表。這被稱作發現。<span>Handler_discover</span>說明通過該方法發現的次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_delete</span></p>
			<p>行從資料表中刪除的次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_first</span></p>
			<p>索引中第一條被讀的次數。如果較高，它建議伺服器正執行大量全索引掃瞄；例如，<span>SELECT 
			col1 FROM foo</span>，假定<span>col1</span>有索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_key</span></p>
			<p>根據鍵讀一行的請求數。如果較高，說明查詢和資料表的索引正確。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_next</span></p>
			<p>
			按照鍵順序讀下一行的請求數。如果您用範圍約束或如果執行索引掃瞄來查詢索引列，該值增加。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_prev</span></p>
			<p>按照鍵順序讀前一行的請求數。該讀方法主要用於最佳化<span><span>ORDER 
			BY ... DESC</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_rnd</span></p>
			<p>
			根據固定位置讀一行的請求數。如果您正執行大量查詢並需要對結果進行排序該值較高。您可能使用了大量需要<span>MySQL</span>掃瞄整個資料表的查詢或您的連接沒有正確使用鍵。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_read_rnd_next</span></p>
			<p>
			在數據檔案中讀下一行的請求數。如果您正進行大量的資料表掃瞄，該值較高。通常說明您的資料表索引不正確或寫入的查詢沒有利用索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Handler_rollback</span></p>
			<p>內部<span>ROLLBACK</span>語句的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_update</span></p>
			<p>在資料表內更新一行的請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Handler_write</span></p>
			<p>在資料表內插入一行的請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_data</span></p>
			<p>包含數據的頁數<span>(</span>髒或乾淨<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_dirty</span></p>
			<p>當前的髒頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_flushed</span></p>
			<p>要求清空的緩衝池頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_free</span></p>
			<p>空頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_latched</span></p>
			<p>在<span>InnoDB</span>緩衝池中鎖定的頁數。這是當前正讀或寫或由於其它原因不能清空或刪除的頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			Innodb_buffer_pool_pages_misc</span></p>
			<p>
			忙的頁數，因為它們已經被分配優先用作管理，例如行鎖定或適用的哈希索引。該值還可以計算為<span>Innodb_buffer_pool_pages_total</span><span> 
			- </span><span>
			Innodb_buffer_pool_pages_free</span><span> - </span>
			<span><span>
			Innodb_buffer_pool_pages_data</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_buffer_pool_pages_total</span></p>
			<p>緩衝池總大小（頁數）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			Innodb_buffer_pool_read_ahead_rnd</span></p>
			<p>
			<span>InnoDB</span>初始化的「<span class="quote">隨機</span>」<span>read-ah</span><span>eads</span><span>數。當查詢以隨</span>機順序掃瞄資料表的一大部分時發生。</p>
			<p>
			<span  >
			·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>
			Innodb_buffer_pool_read_ahead_s</span><span  >eq</span></span></p>
			<p>
			<span  >InnoDB</span><span>初始化的順序<span>read-aheads</span>數。當</span><span>InnoDB</span>執行順序全資料表掃瞄時發生。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			Innodb_buffer_pool_read_requests</span></p>
			<p>
			<span>InnoDB</span>已經完成的邏輯讀請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>reads</span></span></p>
			<p>不能滿足<span>InnoDB</span>必須單頁讀取的緩衝池中的邏輯讀數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>wait</span><span>_free</span></span></p>
			<p>一般情況，通過後台向<span>InnoDB</span>緩衝池寫。但是，如果需要讀或建立頁，並且沒有乾淨的頁可用，則它還需要先等待頁面清空。該計數器對等待實例進行記數。如果已經適當設置緩衝池大小，該值應小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_buffer_pool_</span><span>write_requests</span></span></p>
			<p>向<span>InnoDB</span>緩衝池的寫數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_data_fsyncs</span></p>
			<p>
			<span>fsync()</span>操作數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_data_</span><span>pending</span><span>_fsyncs</span></span></p>
			<p>當前掛起的<span>fsync()</span>操作數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Innodb_data_</span><span>pending_reads</span></span></p>
			<p>當前掛起的讀數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_pending_writes</span></p>
			<p>當前掛起的寫數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_read</span></p>
			<p>至此已經讀取的數據數量（字節）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_reads</span></p>
			<p>數據讀總數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_writes</span></p>
			<p>數據寫總數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_data_written</span></p>
			<p>至此已經寫入的數據量（字節）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_dblwr_writes</span><span>, </span>
			<span>
			Innodb_dblwr_pages_written</span></p>
			<p>已經執行的雙寫操作數量和為此目的已經寫好的頁數。參見<a href="storage-engines.html#innodb-disk-io" title="15.2.14.1. Disk I/O">15.2.14.1節，「磁盤I/O」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_waits</span></p>
			<p>我們必須等待的時間，因為日誌緩衝區太小，我們在繼續前必須先等待對它清空。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_write_requests</span></p>
			<p>日誌寫請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_log_writes</span></p>
			<p>向日誌檔案的物理寫數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_fsyncs</span></p>
			<p>向日誌檔案完成的<span>fsync()</span>寫數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_pending_fsyncs</span></p>
			<p>掛起的日誌檔案<span>fsync()</span>操作數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_pending_writes</span></p>
			<p>掛起的日誌檔案寫操作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_os_log_written</span></p>
			<p>寫入日誌檔案的字節數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_page_size</span></p>
			<p>編譯的<span>InnoDB</span>頁大小<span>(</span>預設<span>16KB)</span>。許多值用頁來記數；頁的大小很容易轉換為字節。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_created</span></p>
			<p>建立的頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_read</span></p>
			<p>讀取的頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_pages_written</span></p>
			<p>寫入的頁數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_current_waits</span></p>
			<p>當前等待的待鎖定的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_time</span></p>
			<p>行鎖定花費的總時間，單位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Innodb_row_lock_time_avg</span></p>
			<p>行鎖定的平均時間，單位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_row_lock_time_max</span></p>
			<p>行鎖定的最長時間，單位毫秒。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_row_lock_waits</span></p>
			<p>一行鎖定必須等待的時間數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_deleted</span></p>
			<p>從<span>InnoDB</span>資料表刪除的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_inserted</span></p>
			<p>插入到<span>InnoDB</span>資料表的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_read</span></p>
			<p>從<span>InnoDB</span>資料表讀取的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Innodb_rows_updated</span></p>
			<p>
			<span>InnoDB</span>資料表內更新的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_not_flushed</span></p>
			<p>鍵緩存內已經更改但還沒有清空到硬盤上的鍵的數據塊數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_unused</span></p>
			<p>鍵緩存內未使用的塊數量。您可以使用該值來確定使用了多少鍵緩存；參見<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3節，「伺服器系統變數」</a>中<span>Key_buffer_size</span>的討論。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_blocks_used</span></p>
			<p>鍵緩存內使用的塊數量。該值為高水平線標記，說明已經同時最多使用了多少塊。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_read_requests</span></p>
			<p>從緩存讀鍵的數據塊的請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_reads</span></p>
			<p>從硬盤讀取鍵的數據塊的次數。如果<span>Key_reads</span>較大，則<span>Key_buffer_size</span>值可能太小。可以用<span>Key_reads</span><span>/</span><span>Key_read_requests</span>計算緩存損失率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_write_requests</span></p>
			<p>將鍵的數據塊寫入緩存的請求數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Key_writes</span></p>
			<p>向硬盤寫入將鍵的數據塊的物理寫操作的次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Last_</span><span>query</span><span>_cost</span></span></p>
			<p>
			用查詢最佳化器計算的最後編譯的查詢的總成本。用於對比同一查詢的不同查詢方案的成本。預設值<span>0</span>資料表示還沒有編譯查詢。
			預設值是<span>0</span>。<span>Last_query_cost</span>具有會話範圍。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Max_used_connections</span></p>
			<p>伺服器啟動後已經同時使用的連接的最大數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Not_flushed_delayed_rows</span></p>
			<p>等待寫入<span>INSERT 
			DELAY</span>隊列的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_files</span></p>
			<p>打開的檔案的數目。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_streams</span></p>
			<p>打開的流的數量<span>(</span>主要用於記錄<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Open_tables</span></p>
			<p>當前打開的資料表的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Opened_tables</span></p>
			<p>已經打開的資料表的數量。如果<span>Opened_tables</span>較大，<span>table_cache
			</span>值可能太小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_free_blocks</span></p>
			<p>查詢緩存內自由內存塊的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_free_memory</span></p>
			<p>用於查詢緩存的自由內存的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_hits</span></p>
			<p>查詢緩存被訪問的次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_inserts</span></p>
			<p>加入到緩存的查詢數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_lowmem_prunes</span></p>
			<p>由於內存較少從緩存刪除的查詢數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>QCACHE_not_cached</span></p>
			<p>非緩存查詢數<span>(</span>不可緩存，或由於<span>query_cache_type</span>設定值未緩存<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Qcache_queries_in_cache</span></p>
			<p>登記到緩存內的查詢的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Qcache_total_blocks</span></p>
			<p>查詢緩存內的總塊數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Questions</span></p>
			<p>已經發送給伺服器的查詢的個數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Rpl</span><span>_status</span></span></p>
			<p>失敗安全複製狀態<span>(</span>還未使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>Select_full</span><span>_join</span></span></p>
			<p>沒有使用索引的聯接的數量。如果該值不為<span>0,</span>您應仔細檢查資料表的索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_full_range_join</span></p>
			<p>在引用的資料表中使用範圍搜索的聯接的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_range</span></p>
			<p>在第一個資料表中使用範圍的聯接的數量。一般情況不是關鍵問題，即使該值相當大。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_range_check</span></p>
			<p>在每一行數據後對鍵值進行檢查的不帶鍵值的聯接的數量。如果不為<span>0</span>，您應仔細檢查資料表的索引。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Select_scan</span></p>
			<p>對第一個資料表進行完全掃瞄的聯接的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Slave_open_temp_tables</span></p>
			<p>當前由從<span>SQL</span>線程打開的臨時資料表的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slave_running</span></p>
			<p>如果該伺服器是連接到主伺服器的從伺服器，則該值為<span>ON</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slave_retried_transactions</span></p>
			<p>啟動後複製從伺服器<span>SQL</span>線程嘗試事務的總次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slow_launch_threads</span></p>
			<p>建立時間超過<span>slow_launch_time</span>秒的線程數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Slow_queries</span></p>
			<p>查詢時間超過<span>long_query_time</span>秒的查詢的個數。參見<a href="database-administration.html#slow-query-log" title="5.11.4. The Slow Query Log">5.11.4節，「慢速查詢日誌」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_merge_passes</span></p>
			<p>排序算法已經執行的合併的數量。如果這個變數值較大，應考慮增加<span>sort_buffer_size</span>系統變數的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_range</span></p>
			<p>在範圍內執行的排序的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_rows</span></p>
			<p>已經排序的行數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Sort_scan</span></p>
			<p>通過掃瞄資料表完成的排序的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Ssl_<i>xxx</i></span></p>
			<p>用於<span>SSL</span>連接的變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Table_locks_immediate</span></p>
			<p>立即獲得的資料表的鎖的次數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Table_locks_waited</span></p>
			<p>
			不能立即獲得的資料表的鎖的次數。如果該值較高，並且有性能問題，您應首先最佳化查詢，然後拆分資料表或使用複製。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_cached</span></p>
			<p>線程緩存內的線程的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_connected</span></p>
			<p>當前打開的連接的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Threads_created</span></p>
			<p>建立用來處理連接的線程數。如果<span>Threads_created</span>較大，您可能要增加<span>thread_cache_size</span>值。緩存訪問率的計算方法<span>Threads_created</span><span>/</span><span>Connections</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>
			Threads_running</span></p>
			<p>激活的（非睡眠狀態）線程數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Uptime</span></p>
			<p>伺服器已經運行的時間（以秒為單位）。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="mysql-fix-privilege-tables"></a>
		5.4.&nbsp;mysql_fix_privilege_tables：升級MySQL系統資料表</h2></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		一些<span>MySQL</span>發佈對<span>mysql</span>資料庫中的系統資料表的結構進行了更改，新增了新權限或特性。當您更新到新版本<span>MySQL</span>，您應同時更新系統資料表，以確保它們的結構最新。首先備份<span>mysql</span>資料庫，然後按照下面的程式操作。<p>
		在<span>Unix</span>或<span>Unix</span>類系統中，運行<strong><span>mysql_fix_privilege_tables</span></strong>指令來更新系統資料表：</p>
		<pre><span>shell&gt; </span><span><b><span>mysql_fix_privilege_tables</span></b></span></pre>
		<p>您必須在伺服器運行時執行該指令。它試圖連接本機上用<span>root</span>運行的伺服器。如果<span>root</span>帳號需要密碼，在命令行中按下述方法給出密碼：</p>
		<pre><span>shell&gt; </span><span><b><span>mysql_fix_privilege_tables--password=<i>root_password</i></span></b></span></pre>
		<p><strong><span>
		mysql_fix_privilege_tables</span></strong>指令可以執行將系統資料表轉換為當前格式的任何動作。運行時您可能會看見一些<span>Duplicate 
		column name</span>警告；您可以忽略它們。</p>
		<p>運行完指令後，停止伺服器並重啟。</p>
		<p>在<span>Windows</span>系統中，<span>MySQL</span>分發包括<span>mysql_fix_privilege_tables.sql
		</span><span>SQL</span>指令，您可以用<strong><span 
>mysql</span></strong>客戶端來運行。例如，如果<span>MySQL</span>安裝到<span>C:\Program 
		Files\MySQL\MySQL Server 5.1</span>，命令應為：</p>
		<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql -u root -p mysql</span></b></span></pre>
		<pre><span>mysql&gt; </span><span><b><span>SOURCE C:/Program Files/MySQL/MySQL Server 5.1/scripts/mysql_fix_privilege_tables.sql</span></b></span></pre>
		<p>如果安裝到其它目錄，相應地更改路徑名。</p>
		<p><strong><span>mysql</span></strong>命令將提示輸入<span>root</span>密碼；按照提示輸入密碼。</p>
		<p>在<span>Unix</span>中，當<strong><span>mysql</span></strong>處理<span>mysql_fix_privilege_tables.sql</span><span> 
		script</span>指令中的語句時，您可能會看見一些<span>Duplicate 
		column name</span>警告；您可以忽略它們。</p>
		<p>運行完指令後，停止伺服器並重啟。</p>
		<h2 class="title"><a name="server-shutdown"></a>
		5.5.&nbsp;MySQL伺服器關機程序</h2></div></div></div>
		<div class="orderedlist">
			<ol type="1">
				<li>&nbsp;伺服器關閉程序可以概括為：<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>啟動關閉程序</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器根據需要建立關閉線程</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器停止接收新連接</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器終止當前的活動</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>儲存引擎被停掉或關閉</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器退出</p>
				<p>下面是更詳細的描述：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>啟動關閉程序。</p>
				<p>可以用多種方法啟動伺服器的關閉。例如，擁有<span>SHUTDOWN</span>權限的用戶可以執行<strong><span>mysqladmin 
				shutdown</span></strong>命令。<strong><span>mysqladmin</span></strong>可以用於所有支援<span>MySQL</span>的平台上。其它作業系統相關的關閉開始方法還可能有：在<span>Unix</span>中，當接收到<span>SIGTERM</span>信號後，伺服器關閉。對於在<span>Windows</span>中作為服務運行的伺服器，當服務管理器讓它關閉時，則關閉。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器根據需要建立關閉線程。</p>
				<p>
				根據開始關閉的方式，伺服器可以建立線程來處理關閉程序。如果客戶端需要關閉，則建立關閉線程。如果收到<span>SIGTERM</span>信號後關閉，信號線程可以自己關閉，或者建立單獨的線程來完成。如果伺服器嘗試建立關閉線程而不能建立<span>(</span>例如，如果內存被耗盡<span>)</span>，它在錯誤日誌中給出診斷消息：</p>
				<pre ><span>Error: Can&#39;t create thread to kill server</span></pre>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器停止接收新連接。</p>
				<p>
				在關閉過程中要想防止啟動新活動，伺服器停止接收新的客戶端連接。它將關閉它幀聽的網絡連接：<span>TCP/IP</span>端口、<span>Unix</span>套接字檔案、<span>Windows</span>命名管道和在<span>Windows</span>中的共享內存。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器終止當前的活動。</p>
				<p>
				對於每個與客戶端連接相關的線程，與客戶端的連接被中斷，線程被標記為「殺掉的」。當線程注意到此類標記後則線程終止。空閒連接的線程很快終止。當前正處理查詢的線程定期檢查它們的狀態，終止的時間較長。關於線程終止的詳細訊息，參見<a href="sql-syntax.html#kill" title="13.5.5.3. KILL Syntax">13.5.5.3節，「KILL語法」</a>，特別是關於對<span>MyISAM</span>資料表的殺掉的<span>REPAIR 
				TABLE</span>或<span>OPTIMIZE 
				TABLE</span>操作。</p>
				<p>
				對於有打開事務的線程，事務被回滾。請注意如果某個線程正在更新非事務資料表，多行<span>UPDATE</span>或<span>INSERT</span>等操作會使資料表部分更新，因為操作在完成前會終止。</p>
				<p>
				如果伺服器是主複製伺服器，與當前連接的從伺服器相關的線程的處理方式同其它客戶端線程。即每個線程被標記為殺掉的，在下次檢查他的狀態後會退出。</p>
				<p>如果伺服器是從複製伺服器，在客戶端線程標記為殺掉的之前，激活的<span>I/O</span>和<span>SQL</span>線程被停止。<span>SQL</span>線程允許先結束它當前的語句<span>(</span>以避免造成複製問題<span>)</span>然後停止。如果此時<span>SQL</span>線程正位於事務中部，事務則
				回滾。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>儲存引擎被停掉或關閉。</p>
				<p>在該階段，資料表緩存被清空，所有打開的資料表被關閉。</p>
				<p>每個儲存引擎執行它管理的資料表需要的任何動作。例如，<span>MyISAM</span>清空任何掛起的資料表索引寫操作。<span>InnoDB</span>將它的緩衝池清空到硬盤上（除非<span>innodb_fast_shutdown</span>為<span>2</span>），將當前的<span>LSN</span>寫入資料表內，並終止自己的內部線程。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>伺服器退出。</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="security"></a>
		5.6.&nbsp;一般安全問題</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#security-guidelines">
			5.6.1. 通用安全指南</a></span></dt><dt><span class="section"><a href="database-administration.html#security-against-attack">
			5.6.2. 使MySQL在攻擊者面前保持安全</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-options">
			5.6.3. Mysqld安全相關啟動選項<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#load-data-local">
			5.6.4. LOAD DATA LOCAL安全問題<code class="literal"></code></a></span></dt></dl></div><a class="indexterm" name="id2763615"></a>
		<p>本節描述一些常見的需要注意的安全問題，以及一些可以使您的<span>MySQL</span>安裝更加安全以防止黑客和誤用的措施。關於<span>MySQL</span>用於設置用戶帳號並檢查資料庫訪問的訪問控制系統的具體訊息，參見<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7節，「MySQL訪問權限系統」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="security-guidelines"></a>
			5.6.1.&nbsp;通用安全指南</h3></div></div></div>
			<p>任何在與<span>Internet</span>聯網的計算機上使用<span>MySQL</span>的用戶都應仔細閱讀本節，以避免最常見的安全問題。</p>
			<p>討論安全時，我們強調必須完全保護整個伺服器主機的安全<span>(</span>而不只是<span>MySQL</span>伺服器<span>)</span>防範各種類型的可能的攻擊：偷聽、修改、重放和拒絕服務。我們在這裡不能覆蓋各方面的內容和措施。</p>
			<p><span>MySQL</span>根據訪問控制列資料表<span>(ACL)</span>對所有連接、查詢和其它用戶嘗試執行的操作進行安全管理。<span>MySQL</span>客戶端和伺服器之間還支援<span>SSL-</span>加密連接。這兒討論的許多概念並不是<span>MySQL</span>專有的；該思想幾乎同樣適合所有應用程式。</p>
			<p>運行<span>MySQL</span>時，應盡量遵從下面的指導：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>不要讓任何人<span>(</span>除了<span>MySQL
			</span></span></strong><span><b>
			<span>root</span></b></span><strong><span>帳號<span>)</span>訪問</span></strong><span><b><span>mysql</span></b></span><strong><span>資料庫中的</span></strong><span><b><span>user</span></b></span><strong><span>資料表！</span></strong>這很關鍵。<strong><span>加密的密碼才是<span>MySQL</span>中的真正的密碼。</span></strong>知道<span>user</span>資料表中所列的密碼並且能訪問該帳號客訪問的主機的人<strong><span>可以很容易地用該用戶登錄</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>學習<span>MySQL</span>訪問權限系統。用<span>GRANT</span>和<span>REVOKE</span>語句來控制對<span>MySQL</span>的訪問。不要授予超過需求的權限。決不能為所有主機授權。</p>
			<p>檢查清單：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試<span>mysql 
			-u root</span>。如果您能夠成功連接伺服器而沒有要任何密碼，則說明有問題。任何人可以作為<span>MySQL</span><span>root</span>用戶用它的全部權限來連接<span>MySQL</span>伺服器！查閱<span>MySQL</span>安裝說明，應特別注意關於設置<span>root</span>密碼的訊息。參見<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>通過<span>SHOW 
			GRANTS</span>語句檢查查看誰已經訪問了什麼。然後使用<span>REVOKE</span>語句刪除不再需要的權限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要將純文本密碼保存到資料庫中。如果您的計算機有安全危險，入侵者可以獲得所有的密碼並使用它們。相反，應使用<span><span>MD5()</span><span>、<span>SHA1()</span></span></span>或單向哈希函數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要從詞典中選擇密碼。有專門的程式可以破解它們。即使象「<span class="quote"><span>xfish98</span></span>」這樣的密碼也很差。而「<span class="quote"><span>duag98</span></span>」要好得多，雖然包含了相同的字「<span class="quote"><span>fish</span></span>」，但從標準<span>QWERTY</span>鍵盤向左輸入。另一種方法是使用「<span class="quote"><span>Mhall</span></span>」，來自句子「<span class="quote"><span>Mary 
			had a little lamb.</span></span>」中每個字的第一個字元。這樣很容易記住並輸入，但是不知道的人很難猜出來。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>購買防火牆。這樣可以保護您防範各種軟件中至少<span>50%</span>的各種類型的攻擊。把<span>MySQL</span>放到防火牆後或隔離區<span>(DMZ)</span>。</p>
			<p>檢查清單：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試從<span>Internet</span>使用<span>nmap</span>工具掃瞄端口。<span>MySQL</span>預設使用端口<span>3306</span>。不應從不可信任主機訪問該端口。另一種檢查是否<span>MySQL</span>端口打開的簡單方式是從遠程機器試試下面的命令，其中<span>server_host</span>是<span>MySQL</span>伺服器運行的主機：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>telnet server_host 3306</span></b></span></pre>
			<p>
			如果得到連接並得到一些垃圾字元，則端口打開著，則應從防火牆或路由器上關閉，除非您有合理的理由讓它開著。如果<span>telnet</span>掛起或連接被拒絕，則端口被阻塞，這是您所希望的。</p>
			<p>不要信任應用程式的用戶輸入的任何數據。它們可以用<span>Web</span>形式、<span>URL</span>或構建的應用程式輸入特殊或逃溢字元序列來嘗試欺騙您的代碼。如果某個用戶輸入「<span>; 
			DROP DATABASE mysql;</span>」等內容，應確保您的應用程式保持安全。這是特例，但當黑客使用類似技術時，如果您沒有做好準備，結果可能會出現大的安全漏洞和數據丟失。</p>
			<p>
			一個常見的錯誤是只保護字串數據值。一定要記住還應檢查數字數據。如果當用戶輸入值<span>234</span>時，應用程式生成查詢<span><span>SELECT 
			* FROM table WHERE ID=234</span>，</span>用戶可以輸入值<span>234 
			OR 1=1</span>使應用程式生成查詢<span>SELECT 
			* FROM table WHERE ID=234 OR 1=1</span>。結果是伺服器搜尋資料表內的每個記錄。這樣會暴露每個記錄並造成過多的伺服器負載。保護防範這類攻擊的最簡單的方法是使用單引號將數字常量引起來：<span>SELECT 
			* FROM table WHERE ID=&#39;234&#39;</span>。如果用戶輸入其它訊息，均變為字串的一部分。在數字部分，<span>MySQL</span>自動將字串轉換為數字並剝離字串包含的附加的非數字字元。</p>
			<p>
			有時候人們會認為如果資料庫只包含供公共使用的數據，則不需要保護。這是不正確的。即使允許顯示資料庫中的任何記錄，您仍然應保護防範拒絕服務攻擊<span>(</span>例如，基於前面段落中所述的技術的攻擊，會使伺服器浪費資源<span>)</span>。否則，您的伺服器不再響應合法用戶。</p>
			<p>檢查清單：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試用<span>Web</span>形式輸入單引號和雙引號<span>(</span>『<span>&#39;</span>』和『<span>&quot;</span>』<span>)</span>。如果得到任何形式的<span>MySQL</span>錯誤，立即分析原因。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試修改動態<span>URL</span>，可以在其中新增<span>%22</span><span>(</span>『<span>&quot;</span>』<span>)</span>、<span>%23</span><span>(</span>『<span>#</span>』<span>)</span>和<span>%27</span><span>(</span>『<span>&#39;</span>』<span>)</span>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試在動態<span>URL</span>中修改數據類型，使用前面示範中的字元，包括數字和字元類型。您的應用程式應足夠安全，可以防範此類修改和類似攻擊。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>試試輸入字元、空格和特殊符號，不要輸入數值字段的數字。您的應用程式應在將它們傳遞到<span>MySQL</span>之前將它們刪除或生成錯誤。將未經過檢查的值傳遞給<span>MySQL</span>是很危險的！</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>將數據傳給<span>MySQL</span>之前先檢查其大小。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>用管理帳號之外的帳號將應用程式連接到資料庫。不要給應用程式任何不需要的訪問權限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			許多應用程式編程接口提供了措施逃逸數據值中的特殊字元。如果使用正確，可以防止應用程式用戶輸入使應用程式生成不期望的效果的語句的數值：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>MySQL C API</span>：使用<span>mysql_real_escape_string()</span><span> 
			API</span>使用。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>MySQL++</span>：查詢流使用<span>escape</span>和<span>quote</span>修訂符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>PHP</span>：使用<span>mysql_escape_string()</span>函數基於<span>MySQL 
			C API</span>中的同名函數。<span>(</span>在<span>PHP 
			4.0.3</span>之前<span>,</span>使用<span>addslashes()</span>）<span>。</span>在<span>PHP 
			5</span>中<span>,</span>可以使用<span>mysqli</span>延伸名，它支援改進的<span>MySQL</span>鑒定協議和密碼，以及用佔位符編寫的語句。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Perl DBI</span>：使用<span>quote()</span>方法或使用佔位符。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Java JDBC</span>：使用一個<span>PreparedStatement</span>對像和佔位符。</p>
			<p>其它編程接口有類似的功能。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要通過<span>Internet</span>傳送明文<span>(</span>未加密的<span>)</span>數據。該訊息可以被有足夠時間和能力來截取它並用於個人目的的任何人訪問。相反，應使用加密協議，例如<span>SSL</span>或<span>SSH</span>。<span>MySQL</span>支援內部<span>SSL</span>連接，例如版本<span> 
			4.0.0</span>。可以使用<span>SSH</span><span>端口映射</span>為通信建立加密<span>(</span>並壓縮<span>)</span>的隧道。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>學會使用<span>tcpdump</span>和<span>strings</span>工具。在大多數情況下，您可以使用下面的命令檢查是否<span>MySQL</span>數據流未加密：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>tcpdump -l -i eth0 -w - src or dst port 3306 | strings</span></b></span></pre>
			<p><span>(</span>該命令在<span>Linux</span>中可以工作，在其它系統中經過小小的修改後應可以工作）<span>。
			</span>警告：如果您沒有看見明文數據，並不一定說明訊息實際上被加密了。如果您需要較高級別的安全，您應咨詢安全專家。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="security-against-attack"></a>
			5.6.2.&nbsp;使MySQL在攻擊者面前保持安全</h3></div></div></div><a class="indexterm" name="id2764240"></a><a class="indexterm" name="id2764250"></a>
			<p>當您連接到<span>MySQL</span>伺服器時，您應使用一個密碼。密碼不以明文在上傳輸。客戶端連接序列中的密碼處理在<span>MySQL 
			4.1.1</span>中已經升級，很安全。如果您仍然使用<span>pre-4.1.1-</span>風格的密碼，加密算法不如新算法強；通過一些工作，可以竊取客戶端和伺服器之間的通信的聰明的攻擊者可以破解密碼。<span>(</span>關於不同的密碼處理方法的討論參見<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9節，「MySQL 4.1中的密碼哈希處理」</a>）<span>。 </span>
			如果客戶端和伺服器之間的連接通過不可信任網絡，您應使用<span>SSH</span>隧道來加密通信。</p>
			<p>
			所有其它訊息以文本傳送，可以被可以看到連接的任何人讀取。如果您擔心這個，您可以使用壓縮協議來使通信更難以解密。要想使連接更加安全，您應使用<span>SSH</span>來獲得加密的<span>MySQL</span>伺服器和<span>MySQL</span>客戶端之間的<span>TCP/IP</span>連接。您可以從<span><a target="_top"  href="http://www.openssh.org/">http://www.openssh.org/</a></span>找到開放原始碼<span>SSH
			</span>客戶端，並可以從<span><a target="_top"  href="http://www.ssh.com/">http://www.ssh.com/</a></span>獲得商業<span>SSH</span>客戶端。</p>
			<p>您還可以使用<span>MySQL</span>內部<span>OpenSSL</span>支援。參見<a href="database-administration.html#secure-connections" title="5.8.7. Using Secure Connections">5.8.7節，「使用安全連接」</a>。</p>
			<p>為了使<span>MySQL</span>系統安全，強烈要求您考慮下列建議：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對所有<span>MySQL</span>用戶使用密碼。客戶端程式不需要知道運行它的人員的身份。對於客戶端<span>/</span>伺服器應用程式，用戶可以指定客戶端程式的帳號。例如，如果<span><i><span>other_user</span></i></span>沒有密碼，任何人可以簡單地用<span>mysql 
			-u <i>other_user</i> <i>db_name</i></span>冒充他人使用<strong><span 
>mysql</span></strong>程式進行連接。如果所有用戶有密碼，使用其它用戶的帳號進行連接要困難得多。</p>
			<p>要想更改用戶的密碼，應使用<span>SET 
			PASSWORD</span>語句。還可以直接更新<span>mysql</span>資料庫中的<span>user</span>資料表。例如，要更改所有<span>root</span>用戶的<span>MySQL</span>帳號的密碼，應：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password=PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre ><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>WHERE User=&#39;root&#39;;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>絕對不要作為<span>Unix</span>的<span>root</span>用戶運行<span>MySQL</span>伺服器。這樣做非常危險，因為任何具有<span>FILE</span>權限的用戶能夠用<span>root</span>建立檔案<span>(</span>例如，<span>~root/.bashrc</span><span>)</span>。為了防止，<strong><span>mysqld</span></strong>拒絕用<span>root</span>運行，除非使用<span>--user=root</span>選項明顯指定。</p>
			<p>應可以<span>(</span>並且應該<span>)</span>用普通非特權用戶運行<strong><span>mysqld</span></strong>。您可以建立獨立的<span>Unix</span>中的<span>mysql</span>帳號來以便使所有內容更加安全。該帳號只用於管理<span>MySQL</span>。要想用其它<span>Unix</span>用戶啟動<strong><span>mysqld</span></strong>，增加<span>user</span>選項指定<span>/etc/my.cnf</span>選項檔案或伺服器數據目錄的<span>my.cnf</span>選項檔案中的<span>[mysqld]</span>組的帳號。例如：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span>user=mysql</span></pre>
			<p>該命令使伺服器用指定的用戶來啟動，無論您手動啟動或通過<strong><span>mysqld_safe</span></strong>或<strong><span>mysql.server</span></strong>啟動。詳細訊息參見<a href="problems.html#changing-mysql-user" title="A.3.2. How to Run MySQL as a Normal User">A.3.2節，「如何以普通用戶身份運行MySQL」</a>。</p>
			<p>作為其它<span>Unix</span>用戶而不用<span>root</span>運行<span>mysqld</span>，您不需要更改<span>user</span>資料表中的<span>root</span>帳號，因為<span>MySQL</span>帳號的帳號與<span>Unix</span>帳號的帳號無關。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要允許使用資料表的符號連結。<span>(</span>可以用<span>--skip-symbolic-links</span>選項禁用）<span>。</span>如果您用<span>root</span>運行<strong><span>mysqld</span></strong>則特別重要，因為任何對伺服器的數據目錄有寫訪問權限的人則能夠刪除系統中的任何檔案！參見<a href="optimization.html#symbolic-links-to-tables" title="7.6.1.2. Using Symbolic Links for Tables on Unix">7.6.1.2節，「在Unix平台上使用資料表的符號連結</a>」。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>確保<strong><span>mysqld</span></strong>運行時，只使用對資料庫目錄具有讀或寫權限的<span>Unix</span>用戶來運行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要將<span>PROCESS</span>或<span>SUPER</span>權限授給非管理用戶。<strong><span>mysqladmin 
			processlist</span></strong>的輸出顯示出當前執行的查詢正文，如果另外的用戶發出一個<span>UPDATE 
			user SET password=PASSWORD(&#39;not_secure&#39;)</span>查詢，被允許執行那個命令的任何用戶可能看得到。</p>
			<p><strong>
			<span>mysqld</span></strong>為有<span>SUPER</span>權限的用戶專門保留一個額外的連接，因此即使所有普通連接被佔用，<span>MySQL
			</span>
			<span>root</span>用戶仍可以登錄並檢查伺服器的活動。</p>
			<p>可以使用<span>SUPER</span>權限來終止客戶端連接，通過更改系統變數的值更改服務的器操作，並控制複製伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不要向非管理用戶授予<span>FILE</span>權限。有這權限的任何用戶能在擁有<span><b><span>mysqld</span></b></span>守護程序權限的檔案系統那裡寫一個檔案！為了更加安全，由<span>SELECT 
			... INTO OUTFILE</span>生成的所有檔案對每個人是可寫的，並且您不能覆蓋已經存在的檔案。</p>
			<p><strong>
			<span>file</span></strong>權限也可以被用來讀取任何作為運行伺服器的<span>Unix</span>用戶可讀取或訪問的檔案。使用該權限，您可以將任何檔案讀入資料庫資料表。這可能被濫用，例如，通過使用<span>LOAD 
			DATA</span>裝載<tt >「<span>/etc/passwd</span>」</tt>進一個資料庫資料表，然後能用<span>SELECT</span>顯示它<span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您不信任您的<span>DNS</span>，您應該在授權資料表中使用<span>IP</span>數字而不是主機名。在任何情況下，您應該非常小心地使用包含通配符的主機名來建立
			授權資料表條目！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您想要限制單個帳號允許的連接數量，您可以設置<strong><span>mysqld</span></strong>中的<span>max_user_connections</span>變數來完成。<span>GRANT</span>語句也可以支援 
			資源控制選項來限制伺服器對一個帳號允許的使用範圍。參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privileges-options"></a>
			5.6.3.&nbsp;Mysqld安全相關啟動選項<span><strong class="command"></strong></span></h3></div></div></div>
			<p>下列<span><b><span>mysqld</span></b></span>選項影響安全：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--allow-suspicious-udfs</span></p>
			<p>該選項控制是否可以載入主函數只有<span>xxx</span>符的用戶定義函數。預設情況下，該選項被關閉，並且只能載入至少有輔助符的<span>UDF</span>。這樣可以防止從未包含合法<span>UDF</span>的共享對像檔案載入函數。參見<a href="extending-mysql.html#udf-security" title="27.2.3.6. User-Defined Function Security Precautions">27.2.3.6節，「用戶定義函數安全注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>--local-infile[={0|1}]</span></p>
			<p>如果用<span>--local-infile=0</span>啟動伺服器<span>，</span>則客戶端不能使用<span>LOCAL</span><span> 
			in </span><span>LOAD DATA</span>語句。參見<a href="database-administration.html#load-data-local" title="5.6.4. Security Issues with LOAD DATA LOCAL">5.6.4節，「LOAD DATA LOCAL安全問題<code class="literal"></code>」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--old-passwords</span></p>
			<p>強制伺服器為新密碼生成短<span>(pre-4.1)</span>密碼哈希。當伺服器必須支援舊版本客戶端程式時，為了保證相容性這很有用。參見<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9節，「MySQL 4.1中的密碼哈希處理」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>(<em><span>OBSOLETE</span></em>)
			</span><span>
			--safe-show-database</span></p>
			<p>在以前版本的<span>MySQL</span>中，該選項使<span>SHOW 
			DATABASES</span>語句只顯示用戶具有部分權限的資料庫名。在<span>MySQL 5.1</span>中，該選項不再作為現在的
			預設行為使用，有一個<span>SHOW 
			DATABASES</span>權限可以用來控制每個帳號對資料庫名的訪問。參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--safe-user-create</span></p>
			<p>如果啟用，用戶不能用<span>GRANT</span>語句建立新用戶，除非用戶有<span>mysql.user</span>資料表的<span>INSERT</span>權限。如果您想讓用戶具有授權權限來建立新用戶，您應給用戶授予下面的權限：</p>
			<pre ><span>mysql&gt; </span><span><b><span>GRANT INSERT(user) ON mysql.user TO &#39;<i>user_name</i>&#39;@&#39;<i>host_name</i>&#39;;</span></b></span></pre>
			<p>這樣確保用戶不能直接更改權限列，必須使用<span>GRANT</span>語句給其它用戶授予該權限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--secure-auth</span></p>
			<p>不允許鑒定有舊<span>(pre-4.1)</span>密碼的帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>--skip-grant-</span><span>tables</span></span></p>
			<p>這個選項導致伺服器根本不使用權限系統。這給每個人以<em><span>完全訪問</span></em>所有的資料庫的權力！（通過執行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span><span>命令</span></strong>，或執行<span>FLUSH 
			PRIVILEGES</span>語句，您能告訴一個正在運行的伺服器再次開始使用授權資料表。） &nbsp;</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--skip-name-resolve</span></p>
			<p>主機名不被解析。所有在授權資料表的<span>Host</span>的列值必須是<span>IP</span>號或<span>localhost</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--skip-networking</span></p>
			<p>在網絡上不允許<span>TCP/IP</span>連接。所有到<span>mysqld</span>的連接必須經由<span>Unix</span>套接字進行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			--skip-show-database</span></p>
			<p>使用該選項，只允許有<span>SHOW 
			DATABASES</span>權限的用戶執行<span>SHOW 
			DATABASES</span>語句，該語句顯示所有資料庫名。不使用該選項，允許所有用戶執行<span>SHOW 
			DATABASES</span>，但只顯示用戶有<span>SHOW 
			DATABASES</span>權限或部分資料庫權限的資料庫名。請注意全局權限指資料庫的權限。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="load-data-local"></a>
			5.6.4.&nbsp;LOAD DATA LOCAL安全問題<code class="literal"></code></h3></div></div></div>
			<p><span>LOAD DATA</span>語句可以裝載伺服器主機上的檔案，若指定<span>LOCAL</span>關鍵字，可以裝載客戶端檔案。</p>
			<p>支援<span>LOCAL</span>版本的<span>LOAD 
			DATA</span>語句有兩個可能的安全問題：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>由<span>MySQL</span>伺服器啟動檔案從客戶端向伺服器主機的傳輸。理論上，打過補丁的伺服器可以告訴客戶端程式傳輸伺服器選擇的檔案，而不是客戶用<span>LOAD 
			DATA</span>語句指定的檔案。這樣伺服器可以訪問客戶端上客戶有讀訪問權限的任何檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Web</span>環境中，客戶從<span>Web</span>伺服器連接，用戶可以使用<span>LOAD 
			DATA LOCAL</span>來讀取<span>Web</span>伺服器程序有讀訪問權限的任何檔案<span>(</span>假定用戶可以運行<span>SQL</span>伺服器的任何命令<span>)</span>。在這種環境中，<span>MySQL</span>伺服器的客戶實際上是<span>Web</span>伺服器，而不是連接<span>Web</span>伺服器的用戶運行的程式。</p>
			<p>要處理這些問題，我們更改了<span>MySQL 3.23.49</span>和<span>MySQL 
			4.0.2(Windows</span>中的<span>4.0.13)</span>中的<span>LOAD 
			DATA LOCAL</span>的處理方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>預設情況下，現在所有二進制分中的發<span>MySQL</span>客戶端和庫是用<span>--enable-local-infile</span>選項編譯，以便與<span>MySQL 
			3.23.48</span>和以前的版本兼容。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您從原始碼構建<span>MySQL</span>但沒有使用<span>--enable-local-infile</span>選項來進行<strong><span 
>configure</span></strong>，則客戶不能使用<span>LOAD 
			DATA LOCAL</span>，除非顯式使用<span><span>mysql_options</span><span> 
			(...MYSQL_OPT_</span><span>本地<span>_INFILE</span>，<span>0)</span></span></span>。參見<a href="apis.html#mysql-options" title="25.2.3.48. mysql_options()">25.2.3.48節，「mysql_options()」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>您可以用<span>--local-infile=0</span>選項啟動<strong><span>mysqld</span></strong>從伺服器端禁用所有<span>LOAD 
			DATA LOCAL</span>命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於<strong><span>mysql</span></strong>命令行客戶端，可以通過指定<span>--local-infile[=1]</span>選項啟用<span>LOAD 
			DATA LOCAL</span>，或通過<span>--local-infile=0</span>選項禁用。類似地，對於<strong><span>mysqlimport</span></strong>，<span>--local</span><span> 
			or </span><span>-L</span>選項啟用本地數據檔案裝載。在任何情況下，成功進行本地裝載需要伺服器啟用相關選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<span>LOAD 
			DATA LOCAL</span><span> Perl</span>指令或其它讀選項檔案中的<span><span>[</span><span>client</span><span>]</span></span>組的程式，您可以在組內新增<span>local-infile=1</span>選項。但是，為了便面不理解<span>local-infile</span>的程式產生問題，則規定使用<span>loose-</span><span> 
			prefix</span>：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>loose-local-infile=1</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>LOAD 
			DATA LOCAL INFILE</span>在伺服器或客戶端被禁用，試圖執行該語句的客戶端將收到下面的錯誤消息：</p>
			<pre ><span>ERROR 1148: The used command is not allowed with this MySQL version</span></pre>
		</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="privilege-system"></a>
		5.7.&nbsp;MySQL訪問權限系統</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#what-privileges">
			5.7.1. 權限系統的作用</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges">
			5.7.2. 權限系統工作原理</a></span></dt><dt><span class="section"><a href="database-administration.html#privileges-provided">
			5.7.3. MySQL提供的權限</a></span></dt><dt><span class="section"><a href="database-administration.html#connecting">
			5.7.4. 與MySQL伺服器連接</a></span></dt><dt><span class="section"><a href="database-administration.html#connection-access">
			5.7.5. 訪問控制, 階段1：連接核實</a></span></dt><dt><span class="section"><a href="database-administration.html#request-access">
			5.7.6. 訪問控制, 階段2：請求核實</a></span></dt><dt><span class="section"><a href="database-administration.html#privilege-changes">
			5.7.7. 權限更改何時生效</a></span></dt><dt><span class="section"><a href="database-administration.html#access-denied">
			5.7.8. 拒絕訪問錯誤的原因<code class="literal"></code></a></span></dt><dt><span class="section"><a href="database-administration.html#password-hashing">
			5.7.9. MySQL 4.1中的密碼哈希處理</a></span></dt></dl></div><a class="indexterm" name="id2765314"></a><a class="indexterm" name="id2765321"></a><a class="indexterm" name="id2765331"></a><a class="indexterm" name="id2765338"></a><div class="section"><div class="titlepage"><div><div>
			<b><span>MySQL</span></b>有先進但非標準的安全<span>/</span>權限系統。本節描述它的工作原理。<h3 class="title"><a name="what-privileges"></a>
			5.7.1.&nbsp;權限系統的作用</h3></div></div></div><a class="indexterm" name="id2765361"></a><a class="indexterm" name="id2765371"></a><a class="indexterm" name="id2765378"></a></div><div class="section"><div class="titlepage"><div><div>
			<strong><span>MySQL</span></strong>權限系統的主要功能是證實連接到一台給定主機的用戶，並且賦予該用戶在資料庫上的<span>SELECT</span>、<span>INSERT</span>、<span>UPDATE</span>和<span>DELETE</span>權限。<p>
			附加的功能包括有匿名的用戶並對於<strong><span>MySQL</span></strong>特定的功能例如<span>LOAD 
			DATA INFILE</span>進行授權及管理操作的能力。</p>
			<h3 class="title"><a name="privileges"></a>
			5.7.2.&nbsp;權限系統工作原理</h3></div></div></div><a class="indexterm" name="id2765432"></a>
			<p><strong>
			<span>
			MySQL</span></strong>權限系統保證所有的用戶只執行允許做的事情。當您連接<strong><span>MySQL</span></strong>伺服器時，您的身份由<strong><i><span>您從那兒連接的主機</span></i></strong>和<strong><i><span>您指定的帳號</span></i></strong>來決定。連接後發出請求後，系統根據您的身份和<strong><span>您想做什麼</span></strong>來授予權限。</p>
			<p><strong><span>MySQL</span></strong>在認定身份中考慮您的主機名和帳號字，是因為幾乎沒有原因假定一個給定的用戶在因特網上屬於同一個人。例如，從<span>office.com</span>連接的用戶<span>joe</span>不一定和從<span>elsewhere.com</span>連接的<span>joe</span>是同一個人。<strong><span>MySQL</span></strong>通過允許您區分在不同的主機上碰巧有同樣名字的用戶來處理它：您可以對<span>joe</span>從<span>office.com</span>進行的連接授與一個權限集，而為<span>joe</span>從<span>elsewhere.com</span>的連接授予一個不同的權限集。</p>
			<p><strong>
			<span>
			MySQL</span></strong>存取控制包含<span>2</span>個階段：</p>
			<ul type="disc">
				<li>階段<span>1</span>：伺服器檢查是否允許您連接。</li>
				<li>階段<span>2</span>：假定您能連接，伺服器檢查您發出的每個請求。看您是否有足夠的權限實施它。例如，如果您從資料庫資料表中選擇<span>(select)</span>行或從資料庫刪除資料表，伺服器確定您對資料表有<span>SELECT</span>權限或對資料庫有<span>DROP</span>權限。</li>
			</ul>
			<p>如果連接時您的權限被更改了<span>(</span>通過您和其它人<span>)</span>，這些更改不一定立即對您發出的下一個語句生效。詳情參見<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7節，「權限更改何時生效」</a>。</p>
			<p>伺服器在<span>mysql</span>資料庫的
			授權資料表中保存權限訊息<span>(</span>即在<span>mysql</span>資料庫中<span>)</span>。當<span>MySQL</span>伺服器啟動時將這些資料表的內容讀入內存，在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7節，「權限更改何時生效」</a>的環境下重新讀取它們。訪問控制決策取決於內存中的
			授權資料表的份數。</p>
			<p>一般情況，您通過<span>GRANT</span>和<span>REVOKE</span>語句間接來操作
			授權資料表的內容，設置帳號並控制個人的權限。參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。下面討論了
			授權資料表的結構以及伺服器與客戶端交互操作時如何使用其內容。</p>
			<p>伺服器在存取控制的兩個階段使用<span>mysql</span>資料庫中的<span>user</span>、<span>db</span>和<span>host</span>資料表，這些授權資料表中的列如下：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table8">
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>資料表名</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong>
					<span>user</span></strong></td>
					<td>
					<p><strong>
					<span>db</span></strong></td>
					<td>
					<p><strong>
					<span>host</span></strong></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					列範圍</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>User</span></td>
					<td>
					<p>
					<span>Db</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Password</span></td>
					<td>
					<p>
					<span>User</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					權限列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Select_priv</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Insert_priv</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Update_priv</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Index_priv</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_routine_priv</span></td>
					<td>
					<p>
					<span>Create_routine_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Alter_routine_priv</span></td>
					<td>
					<p>
					<span>Alter_routine_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>References_priv</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span style="font-family: &quot;Arial Unicode MS&quot;;
  color:windowtext">&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Reload_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Shutdown_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Process_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>File_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Show_db_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Super_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Lock_tables_priv</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Execute_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Repl_slave_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Repl_client_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					安全列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>ssl_type</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>ssl_cipher</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>x509_issuer</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>x509_subject</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					資源控制列</span></strong></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_questions</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_updates</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_connections</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="172" style="width:129.0pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>max_user_connections</span></td>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p>對存取控制的第二階段<span>(</span>請求證實<span>)</span>，伺服器執行請求驗證以確保每個客戶端有充分的權限滿足各需求。除了<span>user</span>、<span>db</span>和<span>host</span>授權資料表，如果請求涉及資料表，伺服器可以另外參考<span>tables_priv</span>和<span>columns_priv</span>資料表。<span>tables_priv</span>和<span>columns_priv</span>資料表可以對資料表和列提供更精確的權限控制。這些資料表的列如下：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table9">
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>資料表名</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong>
					<span>tables_priv</span></strong></td>
					<td>
					<p><strong>
					<span>columns_priv</span></strong></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					範圍列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Host</span></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Db</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>User</span></td>
					<td>
					<p>
					<span>User</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Table_name</span></td>
					<td>
					<p>
					<span>Table_name</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Column_name</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					權限列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Table_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Column_priv</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					其它列</span></strong></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Timestamp</span></td>
					<td>
					<p>
					<span>Timestamp</span></td>
				</tr>
				<tr>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><span>&nbsp;</span></td>
					<td width="103" style="width:77.25pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>Grantor</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p><span>Timestamp</span>和<span>Grantor</span>列當前還未使用，這兒不再進一步討論。</p>
			<p>為了對涉及保存程式的請求進行驗證，伺服器將查閱<span>procs_priv</span>資料表。該資料表具有以下列：</p>
			<table border="1" cellpadding="0" id="table10">
				<tr>
					<td>
					<p><strong><span>資料表名</span></strong></td>
					<td>
					<p><strong>
					<span>procs_priv</span></strong></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					範圍列</span></strong></td>
					<td>
					<p>
					<span>Host</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Db</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>User</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Routine_name</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Routine_type</span></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					權限列</span></strong></td>
					<td>
					<p>
					<span>Proc_priv</span></td>
				</tr>
				<tr>
					<td>
					<p><strong><span>
					其它列</span></strong></td>
					<td>
					<p>
					<span>Timestamp</span></td>
				</tr>
				<tr>
					<td>
					<p><span>&nbsp;</span></td>
					<td>
					<p>
					<span>Grantor</span></td>
				</tr>
			</table>
			<p><span>Routine_type</span>列為<span>ENUM</span>列，值為<span>&#39;FUNCTION&#39;</span>或<span>&#39;PROCEDURE&#39;</span>，資料表示行所指的程式類型。該列允許為同名函數和程式單獨授權。</p>
			<p><span>Timestamp</span>和<span>Grantor</span>列當前還未使用，這兒不再進一步討論。</p>
			<p>每個授權資料表包含範圍列和權限列：</p>
			<p style="text-indent: -21.0pt; margin-left: 21.0pt;   ">
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>範圍列決定資料表中每個條目（行）的範圍，即，行適用的上下文。例如<span>,
			</span>一個<span>user</span>資料表行的<span>Host</span>和<span>User</span>值為<span>&#39;thomas.loc.gov&#39;</span>和<span><span>&#39;bob&#39;</span>，</span>將被用於證實來自主機<span>thomas.loc.gov</span>的<span>bob</span>對伺服器的連接。同樣，一個<span>db</span>資料表行的<span>Host</span>、<span>User</span>和<span>Db</span>列的值是<span>&#39;thomas.loc.gov&#39;</span>、<span>&#39;bob&#39;</span>和<span>&#39;reports&#39;</span>將用在<span>bob</span>從主機<span>thomas.loc.gov</span>聯接訪問<span>reports</span>資料庫的時候。<span>tables_priv</span>和<span>columns_priv</span>資料表包含範圍列，指出每個行適用的資料表或資料表<span>/</span>列的組合。<span>procs_priv</span>範圍列指出每個行適用的保存程式。</p>
			<p style="margin-left: 27.0pt;   ">
			對於檢查存取的用途，比較<span>Host</span>值是忽略大小寫的。<span>User</span>、<span>Passwor</span><span>d</span>、<span>Db</span>和<span>Table_name</span>值是區分大小寫的。<span>Column_name</span>值在<strong><span
細明體;">MySQL</span></strong><span>3.22.12</span>或以後版本是忽略大小寫的。</p>
			<p style="text-indent: -21.0pt; margin-left: 21.0pt;   ">
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			權限列指出由一個資料表行授予的權限，即，可實施什麼操作。伺服器組合各種的授權資料表的訊息形成一個用戶權限的完整描述。為此使用的規則在<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6節，「訪問控制, 階段2：請求核實」</a>描述。</p>
			<p>範圍列包含字串，如下所述；每個列的預設值是空字串：</p>
			<table border="1" cellpadding="0" id="table11">
				<tr>
					<td width="116">
					<p><strong><span>列名</span></strong></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>類型</span></strong></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Host</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(60)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>User</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(16)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Password</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(16)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Db</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Table_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Column_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
				<tr>
					<td width="116">
					<p>
					<span>Routine_name</span></td>
					<td width="69" style="width:51.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>CHAR(64)</span></td>
				</tr>
			</table>
			<p>為了訪問檢查目的，<span>Host</span>值的比較對大小寫不敏感。<span>User</span>、<span>Password</span>、<span>Db</span>和<span>Table_name</span>值對大小寫敏感。<span>Column_name</span>值對大小寫不敏感。</p>
			<p>
			在<span>user</span>、<span>db</span>和<span>host</span>資料表中，所有權限列於單獨的列內，被聲明為<span><span>ENUM(&#39;N&#39;,&#39;Y&#39;) 
			DEFAULT &#39;N&#39;</span>。</span>換句話說<span>，</span>每一個權限都可以被禁用和啟用，並且
			預設是禁用<span>。</span></p>
			<p>在<span>tables_priv</span>、<span>columns_priv</span>和<span>procs_priv</span>資料表中，權限列被聲明為<span>SET</span>列。這些列的值可以包含該資料表控制的權限的組合：</p>
			<table border="1" cellpadding="0" id="table12">
				<tr>
					<td>
					<p><strong><span>資料表名</span></strong></td>
					<td>
					<p><strong><span>列名</span></strong></td>
					<td>
					<p><strong><span>
					可能的設置元素</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>tables_priv</span></td>
					<td>
					<p>
					<span>Table_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, &#39;Delete&#39;, 
					&#39;Create&#39;, &#39;Drop&#39;, &#39;Grant&#39;, &#39;References&#39;, &#39;Index&#39;, &#39;Alter&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>tables_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, 
					&#39;References&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>columns_priv</span></td>
					<td>
					<p>
					<span>Column_priv</span></td>
					<td>
					<p>
					<span>&#39;Select&#39;, &#39;Insert&#39;, &#39;Update&#39;, 
					&#39;References&#39;</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>procs_priv</span></td>
					<td>
					<p>
					<span>Proc_priv</span></td>
					<td>
					<p>
					<span>&#39;Execute&#39;, &#39;Alter Routine&#39;, &#39;Grant&#39;</span></td>
				</tr>
			</table>
			<p>簡單地說，伺服器使用這樣的授權資料表：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>user</span>表範圍列決定是否允許或拒絕到來的連接。對於允許的連接，<span>user</span>資料表授予的權限指出用戶的全局<span>(</span>超級用戶<span>)</span>權限。這些權限適用於伺服器上的<em><span 
>all</span></em>資料庫。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>db</span>表範圍列決定用戶能從哪個主機存取哪個資料庫。權限列決定允許哪個操作。授予的資料庫級別的權限適用於資料庫和它的資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>當您想要一個給定的<span>db</span>資料表行應用於若干主機時，<span>db</span>和<span>host</span>資料表一起使用。例如，如果您想要一個用戶能在您的網絡從若干主機使用一個資料庫，在用戶的<span>db</span>資料表行的<span>Host</span>值設為空值，然後將那些主機的每一個移入<span>host</span>資料表。這個機制詳細描述在<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6節，「訪問控制, 階段2：請求核實」</a>。</p>
			<p><strong>
			<span>注</span></strong>釋：<span>host</span>資料表不受<span>GRANT</span>和<span>REVOKE</span>語句的影響。大多數<span>MySQL</span>安裝根本不需要使用該資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			tables_priv</span>和<span>columns_priv</span>資料表類似於<span>db</span>資料表，但是更精緻：它們在資料表和列級應用而非在資料庫級。授予資料表級別的權限適用於資料表和所有它的列。授予列級別的權限只適用於專用列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>procs_priv</span>資料表適用於保存的程式。授予程式級別的權限只適用於單個程式。</p>
			<p>
			管理權限<span>(</span>例如<span>RELOAD</span>或<span>SHUTDOWN</span>等等<span>)</span>僅在<span>user</span>資料表中被指定。這是因為管理性操作是伺服器本身的操作並且不是特定資料庫，因此沒有理由在其他授權資料表中列出這樣的權限。事實上，只需要查詢<span>user</span>資料表來決定您是否執行一個管理操作。 
			</p>
			<p>
			<span>FILE</span>權限也僅在<span>user</span>資料表中指定。它不是管理性權限，但您在伺服器主機上讀或寫檔案的能力與您正在存取的資料庫無關。</p>
			<p>
			當<span><b><span>mysqld</span></b></span>伺服器啟動時，將授權資料表的內容讀入到內存中。您可以通過<span>FLUSH 
			PRIVILEGES</span>語句或執行<strong><span 
>mysqladmin flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>命令讓它重新讀取資料表。對授權資料表的更改生效在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7節，「權限更改何時生效」</a>描述。 </p>
			<p>
			當您修改授權資料表的內容時，確保您按您想要的方式更改權限設置是一個好主意。要檢查給定帳號的權限，使用<span>SHOW 
			GRANTS</span>語句。例如，要檢查<span>Host</span>和<span>User</span>值分別為<span>pc84.example.com</span>和<span>bob</span>的帳號所授予的權限，應通過語句：</p>
			<p>
			<span>&nbsp;</span></p>
			<p>
			<span>mysql&gt; </span><span><b>
			<span>SHOW GRANTS FOR &#39;bob&#39;@&#39;pc84.example.com&#39;;</span></b></span></p>
			<p>一個有用的診斷工具是<span><b><span>mysqlaccess</span></b></span>指令，由<span>Carlier 
			Yves </span>提供給<strong><span>MySQL</span></strong>分發。使用<span>--help</span>選項使用<span><b><span>mysqlaccess</span></b></span>查明它怎樣工作。注意：<span><b><span>mysqlaccess</span></b></span>僅用<span>user</span>、<span>db</span>和<span>host</span>資料表檢查存取。它不檢查<span>tables_priv</span>、<span>columns_priv</span>或<span>procs_priv</span>資料表中指定的資料表、列和程式級權限。</p>
			<p>對於診斷權限相關的問題的其它幫助，參見<a href="database-administration.html#access-denied" title="5.7.8. Causes of Access denied Errors">5.7.8節，「拒絕訪問錯誤的原因<code class="literal"></code>」</a>。對於安全問題常規建議，參見<a href="database-administration.html#security" title="5.6. General Security Issues">5.6節，「一般安全問題」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privileges-provided"></a>
			5.7.3.&nbsp;MySQL提供的權限</h3></div></div></div><a class="indexterm" name="id2767488"></a>
			<p>帳號權限訊息被儲存在<span>mysql</span>資料庫的<span>user</span>、<span>db</span>、<span>host</span>、<span><span>tables_priv</span>、<span>columns_priv</span></span>和<span>procs_priv</span>資料表中。在<strong><span>MySQL</span></strong>啟動時並在<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7節，「權限更改何時生效」</a>所說的情況時，伺服器將這些資料庫資料表內容讀入內存。</p>
			<p><span>GRANT</span>和<span>REVOKE</span>語句所用的涉及權限的名稱顯示在下資料表，還有在授權資料表中每個權限的資料表列名稱和每個權限有關的上下文。關於每個權限的含義相關的詳細訊息參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table13">
				<tr>
					<td>
					<p><strong><span>權限</span></strong></td>
					<td>
					<p><strong><span>列</span></strong></td>
					<td>
					<p><strong><span>
					上下文</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE</span></td>
					<td>
					<p>
					<span>Create_priv</span></td>
					<td>
					<p>資料庫、資料表或索引</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DROP</span></td>
					<td>
					<p>
					<span>Drop_priv</span></td>
					<td>
					<p>資料庫或資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>GRANT OPTION</span></td>
					<td>
					<p>
					<span>Grant_priv</span></td>
					<td>
					<p>資料庫、資料表或保存的程式</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REFERENCES</span></td>
					<td>
					<p>
					<span>References_priv</span></td>
					<td>
					<p>資料庫或資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALTER</span></td>
					<td>
					<p>
					<span>Alter_priv</span></td>
					<td>
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>DELETE</span></td>
					<td>
					<p>
					<span>Delete_priv</span></td>
					<td>
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>INDEX</span></td>
					<td>
					<p>
					<span>Index_priv</span></td>
					<td valign="top">
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>INSERT</span></td>
					<td>
					<p>
					<span>Insert_priv</span></td>
					<td valign="top">
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SELECT</span></td>
					<td>
					<p>
					<span>Select_priv</span></td>
					<td valign="top">
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>UPDATE</span></td>
					<td>
					<p>
					<span>Update_priv</span></td>
					<td valign="top">
					<p>資料表</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE VIEW</span></td>
					<td>
					<p>
					<span>Create_view_priv</span></td>
					<td>
					<p>視圖</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHOW VIEW</span></td>
					<td>
					<p>
					<span>Show_view_priv</span></td>
					<td>
					<p>視圖</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>ALTER ROUTINE</span></td>
					<td>
					<p>
					<span>Alter_routine_priv</span></td>
					<td valign="top">
					<p>保存的程式</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE ROUTINE</span></td>
					<td>
					<p>
					<span>Create_routine_priv</span></td>
					<td valign="top">
					<p>保存的程式</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>EXECUTE</span></td>
					<td>
					<p>
					<span>Execute_priv</span></td>
					<td valign="top">
					<p>保存的程式</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>FILE</span></td>
					<td>
					<p>
					<span>File_priv</span></td>
					<td>
					<p>伺服器主機上的檔案訪問</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE TEMPORARY TABLES</span></td>
					<td>
					<p>
					<span>Create_tmp_table_priv</span></td>
					<td>
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>LOCK TABLES</span></td>
					<td>
					<p>
					<span>Lock_tables_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CREATE USER</span></td>
					<td>
					<p>
					<span>Create_user_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>PROCESS</span></td>
					<td>
					<p>
					<span>Process_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>RELOAD</span></td>
					<td>
					<p>
					<span>Reload_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REPLICATION CLIENT</span></td>
					<td>
					<p>
					<span>Repl_client_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>REPLICATION SLAVE</span></td>
					<td>
					<p>
					<span>Repl_slave_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHOW DATABASES</span></td>
					<td>
					<p>
					<span>Show_db_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SHUTDOWN</span></td>
					<td>
					<p>
					<span>Shutdown_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>SUPER</span></td>
					<td>
					<p>
					<span>Super_priv</span></td>
					<td valign="top">
					<p>伺服器管理</td>
				</tr>
			</table>
			<p>當從早期的沒有<span>CREATE VIEW</span>、<span>SHOW 
			VIEW</span>、<span>CREATE 
			ROUTINE</span>、<span>ALTER 
			ROUTINE</span>和<span>EXECUTE</span>權限的版本的<span>MySQL</span>中升級時，要想使用這些權限，您必須使用<span>MySQL</span>分發提供的<strong><span>mysql_fix_privilege_tables</span></strong>指令升級
			授權資料表。參見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</p>
			<p>如果啟用了二進制記錄，要想建立或修改保存的程式，您還需要<span>SUPER</span>權限，詳細描述見<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4節，「儲存子程式和觸發程式的二進制日誌功能」</a>。</p>
			<p>通過<span>CREATE</span>和<span>DROP</span>權限，您可以建立新資料庫和資料表，或刪除<span>(</span>移掉<span>)</span>已有資料庫和資料表。<em><span>如果您將</span></em><span><i><span>mysql</span></i></span><em><span>資料庫中的</span></em><span><i><span>DROP</span></i></span><em><span>權限授予某用戶，用戶可以刪掉<span>MySQL</span>訪問權限保存的資料庫。</span></em></p>
			<p>
			<span>SELECT</span>、<span>INSERT</span>、<span>UPDATE</span>和<span>DELETE</span>權限允許您在一個資料庫現有的資料表上實施操作。 
			</p>
			<p><span>SELECT</span>語句只有在他們真正從一個資料表中檢索行時才需要<span>SELECT</span>權限。一些<span>SELECT</span>語句不訪問資料表，甚至沒有任何到伺服器上的資料庫裡的存取任何東西的授權。例如，您可使用<span><b><span>mysql</span></b></span>客戶端作為一個簡單的計算器來評估未引用資料表的資料表達式：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT 1+1;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PI()*2;</span></b></span></pre>
			<p><span>INDEX</span>權限允許您建立或刪除索引。<span>INDEX</span>適用已有資料表<span>。</span>如果您具有某個資料表的<span>CREATE</span>權限，您可以在<span>CREATE 
			TABLE</span>語句中包括索引定義。</p>
			<p>通過<span>ALTER</span>權限，您可以使用<span>ALTER 
			TABLE</span>來更改資料表的結構和重新命名資料表<span>。</span></p>
			<p>需要<span>CREATE ROUTINE</span>權限來建立保存的程式（函數和程式），<span>ALTER 
			ROUTINE</span>權限來更改和刪除保存的程式，<span>EXECUTE</span>來執行保存的程式。</p>
			<p><span>GRANT</span>權限允許您把您自己擁有的那些權限授給其他的用戶。可以用於資料庫、資料表和保存的程式。</p>
			<p><span>FILE</span>權限給予您用<span>LOAD 
			DATA INFILE</span>和<span>SELECT 
			... INTO OUTFILE</span>語句讀和寫伺服器上的檔案，任何被授予<span>FILE</span>權限的用戶都能讀或寫<strong><span style="font-weight:
normal">MySQL</span></strong>伺服器能讀或寫的任何檔案。<span>(</span>說明用戶可以讀任何資料庫目錄下的檔案，因為伺服器可以訪問這些檔案）<span>。
			</span><span>FILE</span>權限允許用戶在<span>MySQL</span>伺服器具有寫權限的目錄下建立新檔案。不能覆蓋已有檔案。</p>
			<p>其餘的權限用於管理性操作，它使用<span><b><span>mysqladmin</span></b></span>程式或<span>SQL</span>語句實施。下資料表顯示每個管理性權限允許您執行的<span><b><span>mysqladmin</span></b></span>命令：</p>
			<table border="1" cellpadding="0" style="margin-left: -.4pt" id="table14">
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>權限</span></strong></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p><strong><span>
					權限擁有者允許執行的命令</span></strong></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>RELOAD</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>flush-hosts</span><span>,
					</span><span>
					flush-logs</span><span>, </span>
					<span>
					flush-privileges</span><span>, </span>
					<span>
					flush-status</span><span>, </span>
					<span>
					flush-tables</span><span>, </span>
					<span>
					flush-threads</span><span>, </span>
					<span>refresh</span><span>,
					</span><span>
					reload</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>SHUTDOWN</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>shutdown</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>PROCESS</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>processlist</span></td>
				</tr>
				<tr>
					<td width="85" style="width:63.75pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>SUPER</span></td>
					<td width="886" style="width:664.2pt;padding:.75pt .75pt .75pt .75pt">
					<p>
					<span>kill</span></td>
				</tr>
			</table>
			<p><span>reload</span>命令告訴伺服器將授權資料表重新讀入內存。<span>flush-privileges</span>是<span>reload</span>的同義詞，<span>refresh</span>命令清空所有資料表並打開並關閉記錄檔案，其它<span>flush-<i>xxx</i></span>命令執行類似<span>refresh</span>的功能，但是範圍更有限，並且在某些情況下可能更好用。例如，如果您只是想清空記錄檔案，<span>flush-logs</span>比<span>refresh</span>是更好的選擇。</p>
			<p><span>shutdown</span>命令關掉伺服器。只能從<strong><span>mysqladmin</span></strong>發出命令。沒有相應的<span>SQL</span>語句。</p>
			<p>
			<span  >processlist</span><span>命令顯示在伺服器內執行的線程的訊息（即其它帳號相關的客戶端執行的語句）。</span><span>kill</span><span>命令殺死伺服器線程。您總是能顯示或殺死您自己的線程，但是您需要</span><span>PROCESS</span><span>權限來顯示或殺死其他用戶和</span><span>SUPER</span><span>權限啟動的線程。</span>參見<a href="sql-syntax.html#kill" title="13.5.5.3. KILL Syntax">13.5.5.3節，「KILL語法」</a>。</div><div class="section"><div class="titlepage"><div><div>
			擁有<span>CREATE TEMPORARY 
			TABLES</span><span>權限</span>便可以使用<span>CREATE 
			TABLE</span>語句中的關鍵字<span>TEMPORARY</span>。<p>
			擁有<span>LOCK TABLES</span><span>權限</span>便可以直接使用<span>LOCK 
			TABLES</span>語句來鎖定您擁有<span>SELECT</span>權限的資料表。包括使用寫鎖定，可以防止他人讀鎖定的資料表。</p>
			<p>擁有<span>REPLICATION 
			CLIENT</span><span>權限</span>便可以使用<span>SHOW 
			MASTER STATUS</span>和<span>SHOW 
			SLAVE STATUS</span>。</p>
			<p><span>REPLICATION SLAVE</span><span>權限應授予從伺服器所使用的將當前伺服器連接為主伺服器的帳號</span>。沒有這個權限，<span>從伺服器不能發出對主伺服器上的資料庫所發出的更新請求。</span></p>
			<p>擁有<span>SHOW DATABASES</span><span>權限</span>便允許帳號使用<span>SHOW 
			DATABASE</span>語句來查看資料庫名。沒有該權限的帳號只能看到他們具有部分權限的資料庫， 如果資料庫用<span>--skip-show-database</span>選項啟動，則根本不能使用這些語句。請注意全局權限指資料庫的權限。</p>
			<p>總的說來，只授予權限給需要他們的那些用戶是好主意，但是您應該在授予<span>FILE</span>和管理權限時試驗特定的警告：</p>
			<ul type="disc">
				<li>
				<span>FILE</span>權限可以被濫用於將伺服器主機上<span>MySQL</span>能讀取的任何檔案讀入到資料庫資料表中。包括任何人可讀的檔案和伺服器數據目錄中的檔案。可以使用<span>SELECT</span>訪問資料庫資料表，然後將其內容傳輸到客戶端上。</li>
				<li>
				<span>GRANT</span>權限允許用戶將他們的權限給其他用戶。有不同的權限並有<span>GRANT</span>權限的<span>2</span>個用戶可以合併權限。</li>
				<li>
				<span>ALTER</span>權限可以用於通過重新命名資料表來推翻權限系統。</li>
				<li>
				<span>SHUTDOWN</span>權限通過終止伺服器可以被濫用完全拒絕為其他用戶服務。</li>
				<li>
				<span>PROCESS</span>權限能被用來察看當前執行的查詢的明文文本，包括設定或改變密碼的查詢。</li>
				<li>
				<span>SUPER</span>權限能用來終止其它用戶或更改伺服器的操作方式。</li>
				<li>授給<span>mysql</span>資料庫本身的權限能用來改變密碼和其他訪問權限訊息。密碼被加密儲存，所以惡意的用戶不能簡單地讀取他們以知道明文密碼。然而，具有<span>user</span>資料表<span>Password</span>列寫訪問權限的用戶可以更改帳號的密碼，並可以用該帳號連接<span>MySQL</span>伺服器。</li>
			</ul>
			<p>有一些事情您不能用<strong><span>MySQL</span></strong>權限系統做到：</p>
			<ul type="disc">
				<li>您不能明顯地指定某個給定的用戶應該被拒絕訪問。即，您不能明顯地匹配用戶然後拒絕連接。</li>
				<li>您不能指定用戶有權建立立或刪除資料庫中的資料表，但不能建立或刪除資料庫本身。</li>
			</ul>
			<h3 class="title"><a name="connecting"></a>
			5.7.4.&nbsp;與MySQL伺服器連接</h3></div></div></div><a class="indexterm" name="id2768716"></a><a class="indexterm" name="id2768727"></a><a class="indexterm" name="id2768733"></a><a class="indexterm" name="id2768744"></a>
			<p>當您想要訪問<span>MySQL</span>伺服器時，<span>MySQL</span>客戶端程式一般要求您指定參數：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>伺服器運行的主機名</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>姓名</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>密碼</p>
			<p>例如，可以從命令行按照下述提示啟動<strong><span>MySQL</span></strong>客戶端<span>(</span>用<span>shell&gt;</span>資料表示<span>)</span>：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h <i>host_name</i> -u <i>user_name</i> -p<i>your_pass</i></b></span></pre>
			<p><span>-h</span><span>,
			</span><span>-u</span>和<span>-p</span>選項還可以採用形式<span>--host=<i>host_name</i></span>、<span>--user=<i>user_name</i></span>和<span>--password=<i>your_pass</i></span>。請注意在<span>-p</span>或<span>--password=</span>和後面的密碼之間<i>沒有<em><span>空格</span></em></i>。</p>
			<p>如果您使用<span>-p</span>或<span>--password</span>選項但沒有指定密碼值，客戶端程式提示您輸入密碼。當您輸入密碼時並不顯示密碼。這比在在命令行輸入密碼要安全得多。系統上的任何用戶可以通過命令<strong><span>ps 
			auxww</span></strong>在命令行中指定密碼。參見<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6節，「使您的密碼安全」</a>。</p>
			<p>如果沒有指定連接參數，<span>MySQL</span>客戶端程式使用預設值：</p>
			<ul type="disc">
				<li>預設主機名是<span>localhost</span>。</li>
				<li>預設帳號在<span>Windows</span>中是<span>ODBC</span>，在<span>Unix</span>中是您的<span>Unix</span>登錄名。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果沒有<span>-p</span>，則不提供密碼。</p>
			<p>這樣<span>, </span>對<span>Unix</span>用戶<span>joe</span>，下列命令是等價的： 
			</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h localhost -u joe</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL<b> -h localhost</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL<b> -u joe</b></span></pre>
			<pre><span>shell&gt; </span><span  >MySQL</span></pre>
			<p>其它<strong><span
細明體;">MySQL</span></strong>客戶端程式類似。</p>
			<p>當進行連接時，您可以指定要使用的不同的預設值，這樣不必每次在您使用客戶端程式是在命令行上輸入它們。這可以有很多方法做到：</p>
			<ul type="disc">
				<li>您可以在選項檔案的<span>[client]</span>小節裡指定連接參數。檔案的相關小節看上去可能像這樣：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>host=</span><span><i><span>host_name</span></i></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>user=</span><span><i><span>user_name</span></i></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>password=</span><span><i><span>your_pass</span></i></span></pre>
			<p>在<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>中詳細討論了選項檔案。</p>
			<ul type="disc">
				<li>您可以用環境變數指定連接參數。主機可用<span>MYSQL_HOST</span>指定，<strong><span>MySQL</span></strong>帳號可用<span>USER</span>指定<span>(</span>僅對<span>Windows</span>和<span>NetWare</span><span>)</span>，密碼可用<span>MYSQL_PWD</span>指定，儘管這不安全；參見<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6節，「使您的密碼安全」</a>。變數參見<a href="environment-variables.html">附錄F：</a><a href="environment-variables.html" title="Appendix F. Environment Variables"><i>環境變數</i></a>。</li>
			</ul>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="connection-access"></a>
			5.7.5.&nbsp;訪問控制, 階段1：連接核實</h3></div></div></div><a class="indexterm" name="id2769142"></a><a class="indexterm" name="id2769149"></a><a class="indexterm" name="id2769156"></a><a class="indexterm" name="id2769166"></a>
			<p>當您試圖連接<strong><span>MySQL</span></strong>伺服器時，伺服器基於您的身份以及您是否能通過供應正確的密碼驗證身份來接受或拒絕連接。如果不是，伺服器完全拒絕您的訪問，否則，伺服器接受連接，然後進入階段<span>2</span>並且等待請求。</p>
			<p>您的身份基於<span>2</span>個訊息：</p>
			<ul type="disc">
				<li>您從那個主機連接</li>
				<li>您的<strong><span>MySQL</span></strong>帳號</li>
			</ul>
			<p>身份檢查使用<span>3</span>個<span>user</span>資料表<span>(</span><span>Host</span><span>,
			</span><span>User</span>和<span>Password</span><span>)</span>範圍列執行。伺服器只有在<span>user</span>資料表記錄的<span>Host</span>和<span>User</span>列匹配客戶端主機名和帳號並且提供了正確的密碼時才接受連接。</p>
			<p>在<span>user</span>資料表<span>Host</span>值的指定方法：</p>
			<ul type="disc">
				<li>
				<span>Host</span>值可以是主機名或<span>IP</span>號，或<span>&#39;localhost&#39;</span>指出本地主機。</li>
				<li>您可以在<span>Host</span>列值使用通配符字元<samp >「<span>%</span>」</samp>和<samp >「<span>_</span>」</samp>。</li>
				<li>
				<span>Host</span>值<span>&#39;%&#39;</span>匹配任何主機名，空<span>Host</span>值等價於<span>&#39;%&#39;</span>。它們的含義與<span>LIKE</span>操作符的模式匹配操作相同。例如，<span>&#39;%&#39;</span>的<span>Host</span>值與所有主機名匹配，而<span>&#39;%.mysql.com&#39;</span>匹配<span>mysql.com</span>域的所有主機。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於指定為<span>IP</span>號的<span>Host</span>值，您可以指定一個網絡掩碼，說明使用多少位地址位來評比網絡號。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON db.*</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span>-&gt; </span><span><b><span>TO david@&#39;192.58.197.0/255.255.255.0&#39;;</span></b></span></pre>
			<p>允許<span>david</span>從任何客戶端用<span>IP</span>號<span>client_ip</span>來連接，下面的條件為真：</p>
			<pre ><span>client_ip &amp; netmask = host_ip</span></pre>
			<p><span>That is, for the
			</span><span>GRANT</span><span> 
			statement just shown: </span></p>
			<pre ><span>client_ip &amp; 255.255.255.0 = 192.58.197.0</span></pre>
			<p>滿足該條件並可以連接<span>MySQL</span>伺服器的<span>IP</span>號的範圍為<span>192.58.197.0</span>到<span><span>192.58.197.255</span>。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>註釋：網絡掩碼只用來告訴伺服器使用<span>8</span>、<span>16</span>、<span>24</span>或<span>32</span>位地址，例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.0.0.0/255.0.0.0(192 A</span><span>類網絡的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.0.0/255.255.0.0(192.168 A</span><span>類網絡的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.1.0/255.255.255.0(192.168.1 C</span><span>類網絡的任何地址</span><span>)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>192.168.1.1(</span><span>只有該</span><span>IP)</span></pre>
			<p>下面的網絡掩碼<span>(28 </span>位<span>)</span>無效：</p>
			<pre ><span>192.168.0.1/255.255.255.240</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>db</span>資料表記錄中的空<span>Host</span>值資料表示它的權限應結合匹配客戶端名的<span>host</span>資料表中的行使用。通過<span>AND(</span>相與<span>)</span>而不是或<span>(</span>聯合<span>)</span>操作將權限組合到一起。您可以從<a href="database-administration.html#request-access" title="5.7.6. Access Control, Stage 2: Request Verification">5.7.6節，「訪問控制, 階段2：請求核實」</a>找到關於<span>host</span>資料表的詳細訊息。</p>
			<p>其它<span>grant</span>資料表的空<span>Host</span>值與<span>&#39;%&#39;</span>相同。</p>
			<p>既然您能在<span>Host</span>字段使用<span>IP</span>通配符值<span>(</span>例如，<span>&#39;144.155.166.%&#39;</span>匹配在一個子網上的每台主機<span>)</span>，有可能某人可能企圖探究這種能力，通過命名一台主機為<span>144.155.166.somewhere.com</span>。為了阻止這樣的企圖，<strong><span style="font-weight:
normal">MySQL</span></strong>不允許匹配以數字和一個點起始的主機名，這樣，如果您用一個命名為類似<span>1.2.foo.com</span>的主機，它的名字決不會匹配授權資料表中的<span>Host</span>列。只有一個<span>IP</span>數字能匹配<span>IP</span>通配符值。</p>
			<p>通配符字元在<span>User</span>列中不允許，但是您能指定空的值，它匹配任何名字。如果<span>user</span>資料表匹配的連接有一個空帳號，用戶被認為是匿名用戶<span>(</span>沒有名字的用戶<span>)</span>，而非客戶端實際指定的名字。這意味著一個空的帳號被用於在連接期間的進一步的訪問檢查<span>(</span>即，在階段<span>2</span>期間<span>)</span>。</p>
			<p><span>Password</span>列可以是空的。這不是通配符，也不意味著匹配任何密碼，它意味著用戶必須不指定一個密碼進行連接。</p>
			<p><span>user</span>資料表中的<span>非空</span><span>Password</span><span>值代資料表加密的密碼。<strong><span>MySQL</span></strong>不以任何人可以看的明文文本格式儲存密碼，相反，正在試圖聯接的用戶提供的密碼被加密<span>(</span>使用</span><span>PASSWORD( 
			)</span><span>函數<span>)</span>，在連接過程中使用加密的密碼檢查密碼是否正確。</span><span>(</span><span>加密後的密碼未通過連接即可實現）<span>。</span>從<span>MySQL</span>角度，加密的密碼是實際密碼，因此您不應讓其它人訪問它！特別是，絕對不要讓非管理用戶讀</span><span  >mysql</span><span>資料庫中的資料表！</span></p>
			<p><span>MySQL 5.1</span>使用強鑒定方法<span>(</span>最先在<span>MySQL 
			4.1</span>中適用<span>)</span>在前面的版本中在連接程序中的密碼保護較好。即使<span>TCP/IP</span>包被截取或<span>mysql</span>資料庫 
			被捕獲也很安全。<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9節，「MySQL 4.1中的密碼哈希處理」</a>中詳細討論了密碼加密。</p>
			<p>下面的例子顯示出各種<span>user</span>資料表中<span>Host</span>和<span>User</span>值的組合如何應用於到來的連接：</p>
			<table border="0" cellpadding="0" width="100%" style="width: 100.0%" id="table15">
				<tr>
					<td>
					<p>
					<span>Host</span><strong><span>值</span></strong></td>
					<td>
					<p>
					<span>User</span><strong><span>值</span></strong></td>
					<td>
					<p><strong><span>
					被條目匹配的連接</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;thomas.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從<span>thomas.loc.gov</span><span>
					</span>連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;thomas.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;&#39;</span><span>
					</span></td>
					<td>
					<p>任何用戶<span>, </span>從<span>thomas.loc.gov</span>連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從任何主機連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;&#39;</span><span>
					</span></td>
					<td>
					<p>任何用戶<span>, </span>從任何主機連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;%.loc.gov&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從在<span>loc.gov</span>域的任何主機連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;x.y.%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從<span>x.y.net</span>、<span>x.y.com</span><span>,</span><span>x.y.edu</span>等聯接。（這或許無用）</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;144.155.166.177&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從有<span>144.155.166.177</span><span> 
					IP</span>地址的主機連接</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>&#39;144.155.166.%&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>&#39;fred&#39;</span><span>
					</span></td>
					<td>
					<p>
					<span>fred</span><span>,
					</span>從<span>144.155.166 
					C</span>類子網的任何主機連接</td>
				</tr>
			</table>
			<p>到來的連接中的客戶端名和帳號可能與<span>user</span>資料表中的多行匹配。例如，由<span>fred</span>從<span>thomas.loc.gov</span>的連接匹配多個條目如上所述。</p>
			<p>如果有多個匹配，伺服器必須選擇使用哪個條目。按照下述方法解決問題：</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器在啟動時讀入<span>user</span>資料表後進行排序。</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>然後當用戶試圖連接時，以排序的順序瀏覽條目</p>
			<p>
			<span>l<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器使用與客戶端和帳號匹配的第一行。</p>
			<p><span>user</span>資料表排序工作如下，假定<span>user</span>資料表看起來像這樣：</p>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>| localhost | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| localhost |&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<p>當伺服器讀取資料表時，它首先以最具體的<span>Host</span>值排序。主機名和<span>IP</span>號是最具體的。<span>&#39;%&#39;</span>意味著「任何主機」並且是最不特定的。有相同<span>Host</span>值的條目首先以最具體的<span>User</span>值排序<span>(</span>空<span>User</span>值意味著「任何用戶」並且是最不特定的<span>)</span>。最終排序的<span>user</span>資料表看起來像這樣：</p>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<pre><span>| localhost | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| localhost |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | root&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span><span> ...</span></pre>
			<pre><span>+-----------+----------+-</span></pre>
			<p>當客戶端試圖連接時，伺服器瀏覽排序的條目並使用找到的第一匹配。對於由<span>jeffrey</span>從<span>localhost</span>的連接，資料表內有兩個條目匹配：<span>Host</span>和<span>User</span>值為<span>&#39;localhost&#39;</span>和<span>&#39;&#39;</span>的條目，和值為<span>&#39;%&#39;</span>和<span>&#39;jeffrey&#39;</span>的條目。<span>&#39;localhost&#39;</span>條目首先匹配，伺服器可以使用。</p>
			<p>還有一個例子。假定<span>user</span>資料表看起來像這樣：</p>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>| thomas.loc.gov |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<p>排序後的資料表看起來像這樣：</p>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | User&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<pre><span>| thomas.loc.gov |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </span><span>…</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | jeffrey&nbsp; | </span><span>…</span></pre>
			<pre><span>+----------------+----------+-</span></pre>
			<p>由<span>jeffrey</span>從<span>thomas.loc.gov</span>的連接與第一行匹配，而由<span>jeffrey</span>從<span>whitehouse.gov</span>的連接被第二個匹配。</p>
			<p>
			普遍的誤解是認為，對給定的帳號，當伺服器試圖對連接尋找匹配時，明確命名那個用戶的所有條目將首先被使用。這明顯不符合事實。先前的例子說明了這點，在那裡由<span>jeffrey</span>從<span>thomas.loc.gov</span>的連接沒被包含<span>&#39;jeffrey&#39;</span>作為<span>User</span>列值的行匹配，但是由沒有帳號的題目匹配！結果是，<span>jeffrey</span>被鑒定為匿名用戶，即使他連接時指定了帳號。</p>
			<p>如果您能夠連接伺服器，但您的權限不是您期望的，您可能被鑒定為其它帳號。要想找出伺服器用來鑒定您的帳號，使用<span>CURRENT_USER()</span>函數。它返回<span><i><span>user_name</span></i><span>@<i>host_name</i></span></span>格式的值，說明<span>User</span>和<span>Host</span><span>
			</span>值匹配<span>user</span>資料表記錄。假定<span>jeffrey</span>連接並發出下面的查詢：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT CURRENT_USER();</span></b></span></pre>
			<pre><span>+----------------+</span></pre>
			<pre><span>| CURRENT_USER() |</span></pre>
			<pre><span>+----------------+</span></pre>
			<pre><span>| @localhost&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+----------------+</span></pre>
			<p>這兒顯示的結果說明<span>user</span>資料表行有空的<span>User</span>列值。換句話說，伺服器將<span>jeffrey</span>視為匿名用戶。</p>
			<p>診斷鑒定問題的另一個方法是打印出<span>user</span>資料表並且手動排序它看看第一個匹配在哪兒進行。又見<a href="functions.html#information-functions" title="12.9.3. Information Functions">12.9.3節，「訊息函數」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="request-access"></a>
			5.7.6.&nbsp;訪問控制, 階段2：請求核實</h3></div></div></div>
			<p>一旦您建立了連接，伺服器進入訪問控制的階段<span>2</span>。對在此連接上進來的每個請求，伺服器檢查您想執行什麼操作，然後檢查是否有足夠的權限來執行它。這正是在授權資料表中的權限列發揮作用的地方。這些權限可以來自<span>user</span>、<span>db</span>、<span>host</span>、<span>tables_priv</span>或<span>columns_priv</span>資料表。（您會發現參考<a href="database-administration.html#privileges" title="5.7.2. How the Privilege System Works">5.7.2節，「權限系統工作原理」</a>很有幫助，它列出了每個
			授權資料表中呈現的列。）</p>
			<p><span>user</span>資料表在全局基礎上授予賦予您的權限，該權限不管當前的資料庫是什麼均適用。例如，如果<span>user</span>資料表授予您<span>DELETE</span>權限， 
			您可以刪除在伺服器主機上從任何資料庫刪除行！換句話說，<span>user</span>資料表權限是超級用戶權限。只把<span>user</span>資料表的權限授予超級用戶如伺服器或資料庫主管是明智的。對其他用戶，您應該把在<span>user</span>資料表中的權限設成<span>&#39;N&#39;</span>並且僅在特定資料庫的基礎上授權。您可以為特定的資料庫、資料表或列授權。</p>
			<p><span>db</span>和<span>host</span>資料表授予資料庫特定的權限。在這些資料表中的範圍列的值可以採用以下方式：</p>
			<ul type="disc">
				<li>通配符字元<samp >「<span>%</span>」</samp>並<samp >「<span>_</span>」</samp>可用於兩個資料表的<span>Host</span>和<span>Db</span>列。它們與用<span  >LIKE</span>操作符執行的模式匹配操作具有相同的含義。如果授權時您想使用某個字元，必須使用反斜現引用。例如，要想在資料庫名中包括下劃線<span>(</span><span>『</span><span  >_</span><span>』<span>)</span></span>，在<span  >GRANT</span>語句中用<span>『</span><span  >\_</span><span>』</span>來指定<span>。</span></li>
				<li>在<span>db</span>資料表的<span>&#39;%&#39;Host</span>值意味著「任何主機」，在<span>db</span>資料表中空<span>Host</span>值意味著「對進一步的訊息咨詢<span>host</span>資料表」（本節後面將描述的一個過程）。</li>
				<li>在<span>host</span>資料表的<span>&#39;%&#39;</span>或空<span>Host</span>值意味著「任何主機」。</li>
				<li>在兩個資料表中的<span>&#39;%&#39;</span>或空<span>Db</span>值意味著「任何資料庫」。</li>
				<li><span>在兩個資料表中的空</span><span>User</span><span>值匹配匿名用戶。</span></li>
			</ul>
			<p><span>db</span>和<span>host</span>資料表在伺服器啟動時被讀取並排序<span>(</span>同時它讀<span>user</span>資料表<span>)</span>。<span>db</span>資料表在<span>Host</span>、<span>Db</span>和<span>User</span>範圍列上排序，並且<span>host</span>資料表在<span>Host</span>和<span>Db</span>範圍列上排序。對於<span>user</span>資料表，首先根據最具體的值最後根據最不具體的值排序，並且當伺服器尋找匹配條目時，它使用它找到的第一匹配。</p>
			<p><span>tables_priv</span>和<span>columns_priv</span>資料表授予資料表和列特定的權限。這些資料表的範圍列的值可以如下被指定：</p>
			<ul type="disc">
				<li>通配符<samp >「<span>%</span>」</samp>並<samp >「<span>_</span>」</samp>可用在使用在兩個資料表的<span>Host</span>列。</li>
				<li>在兩個資料表中的<span>&#39;%&#39;</span>或空<span>Host</span>意味著「任何主機」。</li>
				<li>在兩個資料表中的<span>Db</span>、<span><span>Table_</span><span>name</span></span>和<span><span>Column_</span><span>name</span></span>列不能包含通配符或空。</li>
			</ul>
			<p><span>tables_priv</span>和<span>columns_priv</span>資料表根據<span>Host</span>、<span>Db</span>和<span>User</span>列被排序。這類似於<span>db</span>資料表的排序，因為只有<span>Host</span>列可以包含通配符，排序更簡單。</p>
			<p>
			請求證實程序在下面描述。（如果您熟悉訪問檢查的原始碼，您會注意到這裡的描述與在代碼使用的算法略有不同。描述等價於代碼實際做的東西；不同處只是使解釋更簡單。）</p>
			<p>對需要管理權限的請求<span>(</span><span>SHUTDOWN</span>、<span>RELOAD</span>等等<span>)</span>，伺服器僅檢查<span>user</span>資料表條目，因為那是唯一指定管理權限的資料表。如果行授權請求的操作，訪問被授權，否則拒絕。例如，如果您想要執行<strong><span>mysqladmin 
			shutdown</span></strong>，但是由於<span>user</span>資料表行沒有為您授予<span>HUTDOWN</span>權限，甚至不用檢查<span>db</span>或<span>host</span>資料表就拒絕您的訪問。（因為它們不包含<span>hutdown_priv</span>行列，沒有這樣做的必要。）</p>
			<p>對資料庫有關的請求<span>(</span><span>INSERT</span>、<span>UPDATE</span>等等<span>)</span>，伺服器首先通過搜尋<span>user</span>資料表行來檢查用戶的全局<span>(</span>超級用戶<span>)</span>權限。如果行允許請求的操作，訪問被授權。如果在<span>user</span>資料表中全局權限不夠，伺服器通過檢查<span>db</span>和<span>host</span>資料表確定特定的用戶資料庫權限：</p>
			<ol start="1" type="1">
				<li>伺服器在<span>db</span>資料表的<span>Host</span>、<span>Db</span>和<span>User</span>列上搜尋匹配。<span>Host</span>和<span>User</span>對應連接用戶的主機名和<strong><span>MySQL</span></strong>帳號。<span>Db</span>列對應用戶想要訪問的資料庫。如果沒有<span>Host</span>和<span>User</span>的行，訪問被拒絕。</li>
				<li>如果<span>db</span>資料表中有匹配的行而且它的<span>Host</span>列不是空的，該行定義用戶的資料庫特定的權限。</li>
				<li>如果匹配的<span>db</span>資料表的行的<span>Host</span>列是空的，它資料表示<span>host</span>資料表列舉被允許訪問資料庫的主機。在這種情況下，在<span>host</span>資料表中作進一步搜尋以發現<span>Host</span>和<span>Db</span>列上的匹配。如果沒有<span>host</span>資料表行匹配，訪問被拒絕。如果有匹配，用戶資料庫特定的權限以在<span>db</span>和<span>host</span>資料表的行的權限，即在兩個行都是<span>&#39;Y&#39;</span>的權限的交集<span>(</span><em><span>而不是</span></em>並集！<span>)</span>計算。（這樣您可以授予在<span>db</span>資料表行中的一般權限，然後用<span>host</span>資料表行按主機主機為基礎有選擇地限制它們。） 
				</li>
			</ol>
			<p>在確定了由<span>db</span>和<span>host</span>資料表行授予的資料庫特定的權限後，伺服器把他們加到由<span>user</span>資料表授予的全局權限中。如果結果允許請求的操作，訪問被授權。否則，伺服器檢查在<span>tables_priv</span>和<span>columns_priv</span>資料表中的用戶的資料表和列權限並把它們加到用戶權限中。基於此結果允許或拒絕訪問。</p>
			<p>用布爾術語資料表示，前面關於用戶權限如何計算的描述可以這樣總結：</p>
			<pre><span>global privileges</span></pre>
			<pre><span>OR (database privileges AND host privileges)</span></pre>
			<pre><span>OR table privileges</span></pre>
			<pre><span>OR column privileges</span></pre>
			<p>它可能不明顯，為什麼呢，如果全局<span>user</span>行的權限最初發現對請求的操作不夠，伺服器以後把這些權限加到資料庫、資料表並列的特定權限。原因是請求可能要求超過一種類型的權限。例如，如果您執行<span>INSERT 
			INTO ... SELECT</span>語句，您就需要<span>INSERT</span>和<span>SELECT</span>權限。您的權限必須是<span>user</span>資料表行授予一個權限而<span>db</span>資料表行授予另一個權限。在這種情況下，您有必要的權限執行請求，但是伺服器不能自己把兩個資料表區別開來；兩個行授予的權限必須組合起來。</p>
			<p><span>host</span>資料表不受<span>GRANT</span>或<span>REVOKE</span>語句的影響，因此在大多數<span>MySQL</span>安裝中沒有使用。如果您直接修改它，您可以用於某種專門目的，例如用來維護安全伺服器列資料表。例如，在<span>TcX</span>，<span>host</span>資料表包含在本地網絡上所有的機器的資料表。這些資料表被授予所有的權限。</p>
			<p>您也可以使用<span>host</span>資料表指定<em><span>不</span></em>安全的主機。假定您有一台機器<span>public.your.domain</span>，它位於您認為不安全的公共區域，您可以用下列的<span>host</span>資料表條目允許除了那台機器外的網絡上所有主機的訪問：</p>
			<pre><span>+--------------------+----+-</span></pre>
			<pre><span>| Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Db | ...</span></pre>
			<pre><span>+--------------------+----+-</span></pre>
			<pre><span>| public.your.domain | %&nbsp; | ... (all privileges set to &#39;N&#39;)</span></pre>
			<pre><span>| %.your.domain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | %&nbsp; | ... (all privileges set to &#39;Y&#39;)</span></pre>
			<pre><span>+--------------------+----+-</span></pre>
			<p>當然，一定要測試授權資料表中的行<span>(</span>例如，使用<span>SHOW 
			GRANTS</span>或<strong><span>mysqlaccess</span></strong><span>)</span>，確保您的訪問權限實際按您期望的方式被設置。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="privilege-changes"></a>
			5.7.7.&nbsp;權限更改何時生效</h3></div></div></div>
			<p>當<span>mysqld</span>啟動時，所有授權資料表的內容被讀進內存並且從此時生效。</p>
			<p>當伺服器注意到授權資料表被改變了時，現存的客戶端連接有如下影響： </p>
			<ul type="disc">
				<li>資料表和列權限在客戶端的下一次請求時生效。</li>
				<li>資料庫權限改變在下一個<span>USE
				<i>db_name</i></span>命令生效。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>全局權限的改變和密碼改變在下一次客戶端連接時生效。</p>
			<p>如果用<span>GRANT</span>、<span>REVOKE</span>或<span>SET 
			PASSWORD</span>對授權資料表進行修改，伺服器會注意到並立即重新將授權資料表載入內存。</p>
			<p>如果您手動地修改授權資料表<span>(</span>使用<span>INSERT</span>、<span>UPDATE</span>或<span>DELETE</span>等等<span>)</span>，您應該執行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>告訴伺服器再裝載授權資料表，否則您的更改將<em><span>不會生效</span></em>，除非您重啟伺服器。</p>
			<p>如果您直接更改了授權資料表但忘記重載，重啟伺服器後您的更改方生效。這樣可能讓您迷惑為什麼您的更改沒有什麼變化！</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="access-denied"></a>
			5.7.8.&nbsp;拒絕訪問錯誤的原因<code class="literal"></code></h3></div></div></div>
			<p>當您試著聯接<strong><span>MySQL</span></strong>伺服器時，如果碰到問題，下面各項可以幫助您糾正問題：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			確保伺服器在運行。如果伺服器沒有運行，則您不能連接伺服器。如果您視圖連接伺服器並看到下述消息，可能是伺服器沒有運行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 2003: Can&#39;t connect to MySQL server on &#39;</span><span><i><span>host_name</span></i></span><span>&#39; (111)</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 2002: Can&#39;t connect to local MySQL server through socket</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&#39;/tmp/mysql.sock&#39; (111)</span></pre>
			<p>也可能伺服器正在運行，但您可能使用與伺服器上偵聽的不一樣的<span>TCP/IP</span>端口、命名管道或<span>Unix</span>套接字檔案。您可以使用客戶端程式，指定端口選項來指示正確的端口或套接字選項來指示正確的命名管道或<span>Unix</span>套接字檔案。要找出套接字檔案的地點，應：</p>
			<pre><span>shell&gt; </span><span><b><span>netstat -ln | grep mysql</span></b></span></pre>
			<ul type="disc">
				<li>必須正確設置授權資料表，以便伺服器可以使用它們進行訪問控制。對於某些分發版類型<span>(</span>例如<span>Windows</span>中的二進制分發版或<span>Linux</span>中的<span>RPM</span>分發版<span>),</span>安裝過程初始化包含
				授權資料表的<span>mysql</span>資料庫。如果分發版沒有這樣做，您必須運行<strong><span>mysql_install_db</span></strong>指令來手動初始化授權資料表。詳細內容參見<a href="installing.html#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2節，「Unix下安裝後的過程」</a>。</li>
			</ul>
			<p style="margin-left: 45.0pt">
			確定是否要初始化授權資料表的一個方法是尋找數據目錄下的<span>mysql</span>目錄<span>（</span>數據目錄名通常為<span>data</span>或<span>var</span>，位於<span>MySQL</span>安裝目錄下<span>）</span>。應保證<strong><span
細明體;">MySQL</span></strong>資料庫目錄有檔案<tt >「</tt><span>user.MYD</span><tt >」</tt>。否則，執行<strong><span>mysql_install_db</span></strong>指令。運行並重啟伺服器後，執行該命令來測試初始權限：</p>
			<p style="margin-left: 45.0pt"><span>
			shell&gt; </span><span><b><span>mysql 
			-u root test</span></b></span></p>
			<p style="margin-left: 45.0pt">伺服器應該讓您無誤地連接。</p>
			<ul type="disc">
				<li>在新的安裝以後，您應該連接伺服器並且設置您的用戶及其訪問授權：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
			<p>伺服器應該讓您連接，因為<strong><span>MySQL</span></strong><span>
			</span><span>root</span>用戶初始時沒有密碼。那也是安全風險，當您正在設置其他<strong><span>MySQL</span></strong>用戶時，也應設定<span>root</span>密碼是一件重要的事請。關於設置初始密碼的說明，參見<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>。</p>
			<ul type="disc">
				<li>如果您將一個現存的<strong><span style="font-weight:
     normal">MySQL</span></strong>安裝升級到較新的版本，運行了<strong><span>mysql_fix_privilege_tables</span></strong>指令嗎？如果沒有，運行它。增加新功能後，授權資料表的結構可能會改變，因此更新後應確保資料表的結構隨之更新。相關說明參見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客戶端程式試圖連接時收到以下錯誤訊息，說明伺服器需要新格式的密碼，而客戶端不能生成：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Client does not support authentication protocol requested</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>by server; consider upgrading MySQL client</span></pre>
			<p>關於如何處理的詳細訊息，參見<a href="database-administration.html#password-hashing" title="5.7.9. Password Hashing in MySQL 4.1">5.7.9節，「MySQL 4.1中的密碼哈希處理」</a>和<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3節，「客戶端不支援鑒定協議」</a>。</p>
			<ul type="disc">
				<li>如果您作為<span>root</span>試試連接並且得到這個錯誤，這意味著，您沒有行在<span>user</span>資料表中的<span>User</span>列值為<span>&#39;root&#39;</span>並且<span>mysqld</span>不能為您的客戶端解析主機名：</li>
				<li><span>Access denied for user 
				&#39;&#39;@&#39;unknown&#39; to database mysql</span></li>
			</ul>
			<p>在這種情況下，您必須用<span>--skip-grant-tables</span>選項重啟伺服器並且編輯<tt >「</tt><span>/etc/hosts</span><tt >」</tt>或<tt >「</tt><span>\windows\hosts</span><tt >」</tt>檔案為您的主機增加行。</p>
			<ul type="disc">
				<li>如果您從<span>3.22.11</span>以前的版本更新現存的<strong><span>MySQL</span></strong>安裝到<span>3.22.11</span>版或以後版本，您運行了<span>mysql_fix_privilege_tables</span>指令嗎？如果沒有，運行它。在<span>GRANT</span>語句變得能工作時，授權資料表的結構用<strong><span>MySQL</span></strong><span> 
				3.22.11</span>修改 。</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			記住客戶端程式使用選項檔案或環境變數中指定的連接參數。如果客戶端程式發送不正確的預設連接參數，而您沒有在命令行中指定，檢查環境變數和適用的選項檔案。例如，當您不用任何選項運行客戶端程式，得到<span>Access 
			denied</span>錯誤，確保您沒有在選項檔案中指定舊密碼！</p>
			<p>您可以通過使用<span>--no-defaults</span>選項使用客戶端程式來禁用選項檔案。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysqladmin --no-defaults -u root version</span></b></span></pre>
			<p>客戶端使用的選項檔案見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。環境變數列於<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果遇到下述錯誤，說明<span>root</span>密碼錯誤：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysqladmin -u root -p<i>xxxx</i> ver</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)</span></pre>
			<p>
			如果您未指定密碼時出現前面的錯誤，說明某個選項檔案中的密碼不正確。試試前面所說的<span>--no-defaults</span>選項。</p>
			<p>關於密碼更改的訊息參見<a href="database-administration.html#passwords" title="5.8.5. Assigning Account Passwords">5.8.5節，「設置帳號密碼」</a>。</p>
			<p>如果您丟失或忘記<span>root</span>密碼，您可以用<span>--skip-grant-tables</span>重啟 
			<strong><span>mysqld</span></strong>來更改密碼。參見<a href="problems.html#resetting-permissions" title="A.4.1. How to Reset the Root Password">A.4.1節，「如何復位根用戶密碼」</a><span>. </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<span>SET 
			PASSWORD</span>、<span>INSERT</span>或<span>UPDATE</span>更改密碼，您必須使用<span>&nbsp;
			</span><span>PASSWORD()</span>函數加密密碼。如果您不使用<span>PASSWORD()</span>函數，密碼不工作。例如，下面的語句設置密碼，但沒能加密，因此用戶後面不能連接：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;abe&#39;@&#39;<i>host_name</i>&#39; = &#39;eagle&#39;;</span></b></span></pre>
			<p>相反，應這樣設置密碼：</p>
			<pre ><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;abe&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;eagle&#39;);</span></b></span></pre>
			<p>當您使用<span>GRANT</span>或<span>CREATE 
			USER</span>語句或<strong><span>mysqladmin 
			password</span></strong>命令指定密碼時，不需要<span>PASSWORD()</span>函數，它們會自動使用<span>PASSWORD()</span>來加密密碼。參見<a href="database-administration.html#passwords" title="5.8.5. Assigning Account Passwords">5.8.5節，「設置帳號密碼」</a>和<a href="sql-syntax.html#create-user" title="13.5.1.1. CREATE USER Syntax">13.5.1.1節，「CREATE 
			USER語法」</a>。</p>
			<div class="Section1">
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				localhost</span>是您本地主機名的一個同義詞，並且也是如果您不明確地指定主機而客戶端嘗試連接的預設主機。</p>
				<p>要想在這種系統上避免該問題，您可以使用<span>--host=127.0.0.1</span>選項來明確命名伺服器主機。這樣將通過<span>TCP/IP</span>協議來連接本地<strong><span>mysqld</span><span>伺服器</span></strong>。您還可以指定<span>--host</span>選項使用<span>TCP/IP</span>，使用實際的本機主機名。在這種情況下，主機名必須指定為伺服器主機上的<span>user</span>資料表行，即使您在伺服器上運行客戶端程式。</p>
				<p>
				<span  >
				·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>當嘗試用</span><span>mysql 
				-u user_name</span><span>與資料庫連接時，如果您得到一個</span><span>Access 
				denied</span><span>錯誤，可能會遇到與</span><span>user</span><span>資料表有關的問題，通過執行</span><span>mysql 
				-u root mysql</span><span>並且執行下面的<span>SQL</span>語句進行檢查：</span></p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SELECT * FROM user;</span></b></span></pre>
				<p>結果應該包含一個有<span>Host</span>和<span>User</span>列的行匹配您的計算機主機名和您的<strong><span>MySQL</span></strong>帳號。</p>
				<ul type="disc">
					<li>
					<span>Access denied</span>錯誤消息將告訴您，您正在用哪個用戶嘗試登錄，您正在試圖連接哪個主機，是否使用了密碼。通常，您應該在<span>user</span>資料表中有一行，正確地匹配在錯誤消息給出的主機名和帳號。例如，如果遇到包含<span>using 
					password: NO</span>的錯誤訊息，說明您登錄時沒有密碼。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果當您試著從一個不是<strong><span>MySQL</span></strong>伺服器正在運行的主機上連接時，遇到下列錯誤，那麼在<span>user</span>資料表中沒有匹配那台主機的行：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Host ... is not allowed to connect to this MySQL server</span></pre>
				<p>可以通過組合您正在試圖連接的用戶<span>/</span>主機名設置一個帳號來修正它。如果您不知道正連接的機器的<span>IP</span>號或主機名，應該把一個<span>&#39;%&#39;</span>行作為<span>Host</span>列值放在<span>user</span>資料表中。在試圖從客戶端器連接以後，通過<span>SELECT 
				USER()</span>查詢顯示您如何真正進行連接。（然後用在日誌檔案上面顯示出的實際的主機名代替<span>user</span>資料表中的<span>&#39;%&#39;</span>行。否則，您將得到一個不安全的系統，因為它允許從任何主機上以任何帳號連接。）</p>
				<p>在<span>Linux</span>中，發生該錯誤的另一個原因可能是您正使用於您所使用版本的<span>glibc</span>庫不同版本的庫編譯的二進制<span>MySQL</span>版本。在這種情況下，您應升級作業系統或<span>glibc</span>，或下載<span>MySQL</span>版本的原始碼分發版並自己編譯。原始碼<span>RPM</span>一般很容易編譯並安裝，因此不是大問題。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您連接時指定主機名，但得到錯誤消息主機名未顯示或為<span>IP</span>號，資料表示當<span>MySQL</span>伺服器將<span>IP</span>號解析為客戶端來名時遇到錯誤：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysqladmin -u root -p<i>xxxx</i> -h <i>some-hostname</i> ver</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access denied for user &#39;root&#39;@&#39;&#39; (using password: YES)</span></pre>
				<p>這資料表示<span>DNS</span>問題。要想修復，執行<strong><span>mysqladmin 
				flush-hosts</span></strong>來重設內部<span> DNS</span>主機名緩存。參見<a href="optimization.html#dns" title="7.5.6. How MySQL Uses DNS">7.5.6節，「MySQL如何使用DNS」</a>。</p>
				<p>一些常用的解決方案包括：</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>試試找出<span>DNS</span>伺服器的錯誤並修復。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>MySQL</span>授權資料表中指定<span>IP</span>號而不是主機名。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>/etc/hosts</span>中放入客戶端名。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>--skip-name-resolve</span>選項啟動<strong><span>mysqld</span></strong>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>--skip-host-cache</span>選項啟動<strong><span>mysqld</span></strong>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>Unix</span>中，如果您在同一台機器上運行伺服器和客戶端，連接到<span>localhost</span>。連接到的<span>localhost</span>的<span>Unix</span>連接使用<span>Unix</span>套接字檔案而不是<span>TCP/IP</span>。</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>Windows</span>中，您在同一台機器上運行伺服器和客戶端並且伺服器支援命名管道連接，連接主機名<span>(</span>週期<span>)</span>。連接使用命名管道而不是<span>TCP/IP</span>。</p>
				<ul type="disc">
					<li>如果<span>mysql 
					-u root test</span>工作但是<span>mysql 
					-h your_hostname -u root test</span>導致<span><span>Access 
					denied</span>（<i><span>your_hostname</span></i></span>是本地機的實際主機名<span>）</span>，那麼在<span>user</span>資料表中可能沒有您的主機的正確名字。這裡的一個普遍的問題是在<span>user</span>資料表行中的<span>Host</span>值指定一個唯一的主機名，但是您系統的名字解析例程返回一個完全正規的域名<span>(</span>或相反<span>)</span>。例如，如果您在<span>user</span>資料表中有一個主機是<span>&#39;tcx&#39;</span>的行，但是您的<span>DNS</span>告訴<strong><span style="
     ">MySQL</span></strong>您的主機名是<span>&#39;tcx.subnet.se&#39;</span>，行將不工作。嘗試把一個行加到<span>user</span>資料表中，它包含您主機的<span>IP</span>號作為<span>Host</span>列的值。（另外，您可以把一個行加到<span>user</span>資料表中，它有包含一個通配符如<span>&#39;tcx.%&#39;</span>的<span>Host</span>值。然而，使用以<samp >「<span>%</span>」</samp>結尾的主機名是<em><span>不安全的</span></em>並且<em><span>不</span></em>推薦！） 
					</li>
					<li>如果<span>mysql 
					-u <i>user_name</i> test</span>工作但是<span>mysql 
					-u <i>user_name</i> <i>other_db_name</i></span>不工作，您沒有為給定的用戶授予<span><i><span>other_db_name</span></i></span>資料庫的訪問權限。</li>
					<li>當在伺服器上執行<span>mysql 
					-u <i>user_name</i></span>時，它工作，但是在其它遠程客戶端上執<span>mysql 
					-h <i>host_name</i> -u <i>user_name</i></span>時，它卻不工作，您沒有為給定的用戶授予從遠程主機訪問伺服器的權限。</li>
					<li>如果您不能弄明白您為什麼得到<span>Access 
					denied</span>，從<span>user</span>資料表中刪除所有<span>Host</span>包含通配符值的行<span>(</span>包含<samp >「<span>%</span>」</samp>或<samp >「<span>_</span>」<span>的條目</span></samp><span>)</span>。一個很普遍的錯誤是用<span>Host</span><span>=</span><span>&#39;%&#39;</span>和<span>User</span><span>=</span><span>&#39;<i>some_user</i>&#39;</span>插入一個新行，認為這將允許您指定<span>localhost</span>從同一台機器進行連接。它不工作的原因是
					預設權限包括一個有<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;&#39;</span>的行，因為那個行的<span>Host</span>值<span>&#39;localhost&#39;</span>比<span>&#39;%&#39;</span>更具體，當從<span>localhost</span>連接時，它用於指向新行！正確的步驟是插入<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;<i>some_user</i>&#39;</span>的第<span>2</span>個行，或刪除<span>Host</span><span>=</span><span>&#39;localhost&#39;</span>和<span>User</span><span>=</span><span>&#39;&#39;</span>行。刪除條目後，記住用<span>FLUSH 
					PRIVILEGES</span>語句重載授權資料表。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您得到下列錯誤，可以與<span>db</span>或<span>host</span>資料表有關：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Access to database denied</span></pre>
				<p>如果從<span>db</span>資料表中選擇了在<span>Host</span>列有空值的條目，保證在<span>host</span>資料表中有一個或多個相應的條目，指定<span>db</span>資料表中的條目適用哪些主機。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您能夠連接<span>MySQL</span>伺服器，但如果在使用命令<span>SELECT 
				... INTO OUTFILE</span>或<span>LOAD 
				DATA INFILE</span>語句時，您得到<span>Access 
				denied</span>錯誤，在<span>user</span>資料表中的條目可能沒有啟用<span>FILE</span>權限。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您直接更改授權資料表<span>(</span>例如，使用<span>INSERT</span>、<span>UPDATE</span>或<span>DELETE</span>語句<span>)</span>並且您的更改好像被忽略了，記住您必須執行<span>FLUSH 
				PRIVILEGES</span>語句或<strong><span>mysqladmin 
				flush-privileges</span></strong>命令讓伺服器來重讀授權資料表。否則，直到伺服器下次重啟，您的更改方有效。記住用<span>UPDATE</span>命令更改<span>root</span>密碼後，在清空權限前，您不需要指定新密碼，因為伺服器還不知道您已經更改了密碼！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果您的權限似乎在一個會話過程中改變了，可能是一個超級用戶改變了他們。再次裝入授權資料表會影響新客戶端連接，但是它也影響現存的連接，如<a href="database-administration.html#privilege-changes" title="5.7.7. When Privilege Changes Take Effect">5.7.7節，「權限更改何時生效」</a>小節所述。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您有<span>Perl</span>、<span>Python</span>或<span>ODBC</span>程式的存取問題，試著用<span>mysql 
				-u <i>user_name</i> <i>db_name</i></span>或<span>mysql 
				-u <i>user_name</i> -p<i>your_pass</i> <i>db_name</i></span>與伺服器連接。如果您能用<span><b><span>mysql</span></b></span>客戶端進行連接，這是程式的一個問題而不是訪問權限的問題。（注意在<span>-p</span>和密碼之間沒有空格；也可以使用<span>--password=<i>your_pass</i></span>語法指定密碼。如果使用<span>-p</span>選項<span>，</span><span>MySQL</span>提示您輸入密碼。）</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>為了測試，用<span>--skip-grant-tables</span>選項啟動<span><b><span>mysqld</span></b></span>守護程序，然後您可以改變<strong><span>MySQL</span></strong>授權資料表並且使用<span><b><span>mysqlaccess</span></b></span>指令檢查您的修改是否有如期的效果。當您對您的改變滿意時，執行<span><b><span>mysqladmin 
				flush-privileges</span></b></span>告訴<span><b><span>mysqld</span></b></span>伺服器開始使用新的
				授權資料表。（再次裝入授權資料表覆蓋了<span>--skip-grant-tables</span>選項。這允許您告訴伺服器開始使用授權資料表，而不用停掉並重啟它）。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果任何其它事情失敗，用調試選項<span>(</span>例如，<span>--debug=d,general,query</span><span>)</span>啟動<span><b><span>mysqld</span></b></span>伺服器。這將打印有關嘗試連接的主機和用戶訊息，和發出的每個命令的訊息。請參見<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2節，「建立跟蹤檔案」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您有任何與<strong><span>MySQL</span></strong>授權資料表的其它問題，而且覺得您必須將這個問題發送到郵件資料表，一定要提供一個<strong><span>MySQL</span></strong>授權資料表的傾倒副本<span>(dump)</span>。您可用<span><b><span>mysqldump 
				mysql</span></b></span>命令複製資料庫資料表。像平時一樣，用<span><b><span>mysqlbug</span></b></span>指令郵寄您的問題。參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>。在一些情況下可以用<span>--skip-grant-tables</span>重啟<span><b><span>mysqld</span></b></span>以便能運行<span><b><span>mysqldump</span></b></span>。</div>
			<span>
			<br clear="all" style="page-break-before: always">
&nbsp;</span><div class="titlepage">
				<div>
					<div>
						<h3 class="title"><a name="password-hashing"></a>5.7.9.&nbsp;MySQL 4.1中的密碼哈希處理</h3>
					</div></div></div>
			<div class="toc">
				<dl>
					<dt><span class="section">
					<a href="database-administration.html#application-password-use">
					5.7.9.1. 更改應用程式密碼哈希值的含義</a></span></dt>
				</dl></div>
			<p><span>MySQL</span>用戶帳號列於<span>mysql</span>資料庫中的<span>user</span>資料表內。每個<span>MySQL</span>帳號指定一個密碼，儘管保存在<span>user</span>資料表<span>Password</span>列的密碼不是明文，但哈希值是從資料表中的記錄計算的。用<span>PASSWORD()</span>函數來計算密碼的哈希值。</p>
			<p><span>MySQL</span>在客戶端<span>/</span>伺服器通信的兩個階段使用密碼：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客戶端試圖連接伺服器，有一個初始鑒定步驟，客戶必須提供一個密碼，並且必須與客戶想要使用的帳號在<span>user</span>資料表保存的哈希值匹配。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>客戶端連接後，它可以<span>(</span>如果有充分的權限<span>)
			</span>設置或更改<span>user</span>資料表內所列的帳號的密碼哈希值值。客戶端可以通過<span>PASSWORD()</span>函數來生成密碼哈希值，或使用<span>GRANT</span>或<span>SET 
			PASSWORD</span>語句。</p>
			<p>換句話說，當客戶端首次試圖連接時，伺服器使用哈希值進行鑒定。如果連接的客戶端使用<span>PASSWORD()</span>函數或使用<span>GRANT</span>或<span>SET</span>語句來設置或更改密碼，則伺服器<i>產生</i>哈希值。</p>
			<p>在<span>MySQL 4.1</span>中密碼哈希算法已經更新，提供了更好的安全性並降低了密碼被截取的風險。但是，該新機制只能在<span>MySQL 
			4.1(</span>和更新版本的<span>)</span>伺服器和客戶端中使用，會產生一些相容性問題。<span>4.1</span>或新客戶端可以連接<span>4.1</span>之前的伺服器，因為客戶端可以同時理解舊的和新的密碼哈希機制。但是，<span>4.1</span>之前的客戶端試圖連接<span>4.1</span>版或更新版的伺服器時會遇到困難。例如，<span>3.23</span>版<strong><span>mysql</span></strong>客戶端試圖連接<span>5.1</span>伺服器時會失敗並出現下面的錯誤消息：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -h localhost -u root</span></b></span></pre>
			<pre><span>Client does not support authentication protocol requested</span></pre>
			<pre><span>by server; consider upgrading MySQL client</span></pre>
			<p>出現該問題的另一個普通例子是在升級到<span>MySQL 4.1</span>或更新版後，試圖使用舊版本的<span>PHP<strong><span> 
			mysql</span></strong></span>延伸名。<span>(</span>參見<a href="apis.html#php-problems" title="25.3.1. Common Problems with MySQL and PHP">25.3.1節，「使用MySQL和PHP的常見問題」</a>）<span>。 </span></p>
			<p>下面討論了新、舊密碼機制之間的差別，以及如果您升級了伺服器但需要為<span>4.1</span>版以前的客戶端保持向後相容性該怎樣做。<a href="problems.html#old-client" title="A.2.3. Client does not support authentication protocol">A.2.3節，「客戶端不支援鑒定協議」</a>中有更詳細的訊息。該訊息將<span>MySQL</span>資料庫從<span>4.0</span>版本或更低版升級到<span>4.1</span>版或更高版的<span>PHP</span>編程人員特別重要。</p>
			<p><strong><span>注</span></strong>釋：該討論對比了<span>4.1</span>版的行為和<span>4.1</span>前的行為，這兒描述的<span>4.1</span>中的行為實際上從<span>4.1.1</span>開始。<span>MySQL 
			4.1.0</span>是一個「舊」的發佈，因為它的實施機制與<span>4.1.1</span>版和更新版中的稍有不同。在<span>MySQL 
			5.0 </span>參考手冊中詳細描述了<span>4.1.0</span>和最新版之間的差別。</p>
			<p>在<span>MySQL 4.1</span>之前<span>,</span>用<span>PASSWORD()</span>函數計算的密碼哈希值有<span>16</span>個字節長。應為：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<pre><span>+--------------------+</span></pre>
			<pre><span>| PASSWORD(&#39;mypass&#39;) |</span></pre>
			<pre><span>+--------------------+</span></pre>
			<pre><span>| 6f8c114b58f2ce9e&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------------+</span></pre>
			<p>在<span>MySQL 4.1</span>之前，<span>user</span>資料表的<span>Password</span>列<span>(</span>保存了哈希值<span>)</span>也是<span>16</span>字節長。</p>
			<p>在<span>MySQL 4.1</span>中<span>,</span>已經對<span>PASSWORD()</span>函數進行了修改，可以生成<span>41</span>字節的哈希值：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<pre><span>| PASSWORD(&#39;mypass&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<pre><span>| *6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4 |</span></pre>
			<pre><span>+-------------------------------------------+</span></pre>
			<p>同樣，<span>user</span>資料表的<span>Password</span>列必須有<span>41</span>字節長來保存這些值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您新安裝<span>MySQL 5.1,</span><span> 
			Password</span>列自動為<span>41</span>字節長。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>從<span>MySQL 4.1(4.1.1</span>或<span>4.1</span>系列的更新版<span>)</span>升級到<span>MySQL 
			5.1</span>，應不會出現相關問題，因為兩個版本使用相同的密碼哈希機制。如果您想要將更早版本的<span>MySQL</span>升級到<span>MySQL5.1,</span>您應先升級到<span>4.1</span>，然後將<span>4.1</span>升級到<span>5.1</span>。</p>
			<p>加寬的<span>Password</span>列可以同時保存新、舊格式的密碼哈希值。可以有兩種方式確定任何給定格式的密碼哈希值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>明顯的不同之處是長度<span>(16</span>字節和<span>41</span>字節<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>2</span>個不同之處是新格式的密碼哈希值都以『<span>*</span>』字元開頭，而舊格式的密碼絕對不是。</p>
			<p><span>&nbsp;</span>長密碼哈希值具有更好的加密屬性，並且客戶端根據長哈希值進行鑒定比舊的短哈希值更加安全。</p>
			<p>短密碼哈希值和長密碼哈希值之間的不同之處與伺服器如何使用密碼進行鑒定以及如何為執行密碼更改操作的連接的客戶端生成密碼哈希值都有關。</p>
			<p>伺服器使用密碼哈希值進行鑒定的方式受<span>Password</span>列的寬度影響：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果列較短，只用短哈希鑒定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果列較長，可以有短或長哈希值，並且伺服器可以使用任何一種格式：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>4.1</span>之前的客戶端可以連接，它們只可以使用舊的哈希機制，它們可以只鑒定有短哈希的帳號。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>4.1</span>及以後版本的客戶端可以鑒定有短哈希或長哈希的帳號。</p>
			<p>對於短哈希帳號的鑒定過程，<span>4.1</span>和以後版本的客戶端比為舊版本的客戶端實際要安全得多。從安全性角度，從最低安全到最安全的梯度為：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客戶端用短密碼哈希值進行鑒定</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>或以後版本的客戶端用短密碼哈希值進行鑒定</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>或以後版本的客戶端用長密碼哈希值進行鑒定</p>
			<p>伺服器為連接的客戶端生成密碼哈希值的方式受<span>Password</span>列寬度和<span>--old-passwords</span>選項的影響。<span>4.1</span>或更新版本的伺服器只有滿足某個條件才生成長哈希：<span>Password</span>列必須足夠寬以容納長哈希值並且未給定<span>--old-passwords</span>選項。這些條件適合：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Password</span>列必須足夠寬以容納長哈希<span>(41</span>字節<span>)</span>值。如果列沒有更新，仍然為<span>4.1</span>之前的<span>16</span>字節寬，當客戶端使用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>執行密碼更改操作時，伺服器注意到長哈希不適合，只生成短哈希。如果您已經升級到<span>4.1</span>但還沒有運行 
			<strong><span>
			mysql_fix_privilege_tables</span></strong>指令來擴寬<span>Password</span>列時會出現這種行為。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>Password</span>列足夠寬，則可以保存短或長密碼哈希值。在這種情況下，<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>生成長哈希，除非 用<span>--old-passwords</span>選項啟動伺服器。該選項強制伺服器生成短密碼哈希值。</p>
			<p>
			<span>--old-passwords</span>選項的目的是當伺服器生成長密碼哈希值時，允許您維持同<span>4.1</span>之前的客戶端的向後相容性。該選項不影響鑒定<span>(4.1</span>和以後版本的客戶端仍然可以使用有長密碼哈希值的帳號<span>)</span>，但它防止在密碼更改操作中在<span>user</span>資料表中建立長密碼哈希值。在這種情況下，該帳號不能再用於<span>4.1</span>之前的客戶端。沒有<span>--old-passwords</span>選項，可能會出現下面的不期望的情況：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>舊客戶端連接有短密碼哈希值的帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>客戶更改自己的密碼。沒有<span>--old-passwords</span>，可以為該帳號生成長密碼哈希值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>下次舊客戶試圖連接帳號時不能連接上，因為帳號有長密碼哈希值，需要新的哈希機制進行鑒定。<span>(</span>一旦帳號<span>user</span>資料表中為長密碼哈希值，只有<span>4.1</span>和以後版本的客戶端可以鑒定它，因為<span>4.1</span>之前的客戶端不理解長哈希）<span>。
			</span></p>
			<p>該場景說明，如果您必須支援舊的<span>4.1</span>之前的客戶端，不使用<span>--old-passwords</span>選項運行<span>4.1</span>或更新版本的伺服器很危險。用<span>--old-passwords</span>運行伺服器，密碼更改操作不會生成長密碼哈希值，這樣舊客戶端也可以訪問帳號。<span>(</span>這些客戶端不能意外地因更改了密碼將自己鎖出去，並留下長密碼哈希值）<span>。
			</span></p>
			<p>
			<span>--old-passwords</span>選項的不利之處是您建立或更改的密碼使用短哈希，甚至對於<span>4.1</span>客戶端也如此。這樣，您丟失了長密碼哈希值提供的安全性。如果您想要建立有長哈希的帳號<span>(</span>例如，為<span>4.1</span>客戶端<span>)</span>，您必須不使用<span>--old-passwords</span>來運行伺服器。</p>
			<p>下面的場景可用於運行<span>4.1</span>或以後的伺服器，包括<span>MySQL 
			5.1</span>：</p>
			<p><strong><span>場景<span>1</span>：</span></strong><span>user</span>資料表中的短<span>Password</span>列：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>只有短哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器只使用短哈希進行客戶端鑒定。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於連接的客戶端，使用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密碼哈希生成操作專使用短哈希。對帳號的任何更改均會生成短密碼哈希值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&nbsp;</span><span>--old-passwords</span>選項可以使用但是多餘，因為<span>Password</span>列較短，伺服器只生成短密碼哈希值。</p>
			<p><strong><span>場景<span>2</span>：</span></strong>長<span>Password</span>列；沒有用<span>--old-passwords</span>選項啟動伺服器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>短或長哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>和以後版本的客戶端<span>(</span>包括<span>5.1</span>客戶端<span>)</span>可以鑒定有短或長哈希的帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客戶端只能鑒定有短哈希的帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於連接的客戶端，使用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密碼哈希生成操作專使用短哈希。對帳號的任何更改均會生成短密碼哈希值。</p>
			<p>如前面所示，該場景的危險性在於<span>4.1</span>之前的客戶端可能不能訪問有短密碼哈希值的帳號。通過<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span><span>A</span>對這些帳號密碼的更改會產生長的密碼哈希值。從該點看，<span>4.1</span>之前的客戶端升級到<span>4.1</span>之前不能鑒定該帳號。</p>
			<p>要處理該問題，可以用特殊方法更改密碼。例如，一般情況您可以使用<span>SET 
			PASSWORD</span>按照下面的方法更改帳號密碼：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;<i>some_user</i>&#39;@&#39;<i>some_host</i>&#39; = PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<p>要想更改密碼但建立短哈希，使用<span>OLD_PASSWORD()</span>函數：</p>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;<i>some_user</i>&#39;@&#39;<i>some_host</i>&#39; = OLD_PASSWORD(&#39;mypass&#39;);</span></b></span></pre>
			<p>當您想明顯生成短哈希時<span>，<span>OLD_PASSWORD()</span></span>很有用。</p>
			<p><strong><span>場景<span>3</span>：</span></strong>長<span>Password</span>列；用<span>--old-passwords</span>選項啟動<span>4.1</span>或新版本的伺服器：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>短或長哈希可以保存到<span>Password</span>列。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>和以後版本的客戶端可以鑒定有短或長哈希的帳號<span>(</span>請注意只有不使用<span>--old-passwords</span>選項啟動伺服器，方可以建立長哈希<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>4.1</span>之前的客戶端只可以鑒定短哈希帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於連接的客戶端，使用<span><span>PASSWORD()</span>、<span>GRANT</span></span>或<span>SET 
			PASSWORD</span>的密碼哈希生成操作專使用短哈希。對帳號的任何更改均會生成短密碼哈希值。</p>
			<p>在該場景中，您不能建立長密碼哈希值的帳號，因為<span>--old-passwords</span>選項防止生成長哈希。並且，如果您在使用<span>--old-passwords</span>選項前建立長哈希帳號，當<span>--old-passwords</span>有時更改帳號密碼，結果會使帳號的密碼為短密碼，安全性較長哈希要降低。</p>
			<p>這些場景的不利之處可以概括為：</p>
			<p>在場景<span>1</span>中<span>,</span>您不能利用長哈希提供更安全的鑒定。</p>
			<p>在場景<span>2</span>中<span>, </span>如果您沒有顯式使用<span>OLD_PASSWORD()</span>來更改密碼，則<span>4.1</span>之前的客戶端不能再訪問短哈希帳號。</p>
			<p>在場景<span>3</span>中<span>,</span><span>--old-passwords</span>防止短哈希帳號不可訪問，但密碼更改操作使帳號的長哈希轉換為短哈希，當<span>--old-passwords</span>有效時不能將它改回長哈希。</p>
			<div class="section">
				<div class="titlepage">
					<div>
						<div>
							<h4 class="title">
							<a name="application-password-use"></a>
							5.7.9.1.&nbsp;更改應用程式密碼哈希值的含義</h4></div></div></div>
				<p>升級到<span>MySQL4.1</span>或更新版本後，使用<span>PASSWORD()</span>為自己的目的生成密碼的應用程式會出現相容性問題。應用程式實際不應這樣做，因為<span>PASSWORD()</span>只應用來管理<span>MySQL</span>帳號的密碼。但一些應用程式使用<span>PASSWORD()</span>用於自己的目的。</p>
				<p>如果您從<span>MySQL 4.1</span>之前的版本升級到<span>4.1</span>或以後版本，並在生成長密碼哈希值的條件下運行伺服器，應用程式使用<span>PASSWORD()</span>破解自己的密碼。這種情況下推薦的方法是修改應用程式，使用其它函數，例如<span>SHA1()</span>或<span>MD5()</span>，來產生哈希值。如果不行，您可以使用<span>OLD_PASSWORD()</span>函數，該函數用來提供舊格式的短哈希。但是，請注意<span>OLD_PASSWORD()</span>可能有一天不再被支援。</p>
				<p>如果伺服器運行在生成短哈希的條件下，可以使用 
				<span>OLD_PASSWORD()</span>但與<span>PASSWORD()</span>等同。</p>
				<p>將<span>MySQL</span>資料庫從<span>4.0</span>或更低版本移植到<span>4.1</span>或更高版本的<span>PHP</span>編程人員應參閱<a href="Old%20Client">舊客戶端</a>。</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="user-account-management"></a>
		5.8.&nbsp;MySQL用戶帳號管理</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#user-names">
			5.8.1. MySQL帳號和密碼</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-users">
			5.8.2. 向MySQL增加新用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#removing-users">
			5.8.3. 從MySQL刪除用戶帳號</a></span></dt><dt><span class="section"><a href="database-administration.html#user-resources">
			5.8.4. 限制帳號資源</a></span></dt><dt><span class="section"><a href="database-administration.html#passwords">
			5.8.5. 設置帳號密碼</a></span></dt><dt><span class="section"><a href="database-administration.html#password-security">
			5.8.6. 使您的密碼安全</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-connections">
			5.8.7. 使用安全連接</a></span></dt></dl></div>
		<p>本節描述如何為<span>MySQL</span>伺服器的客戶端設置帳號。討論了下面的主題：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>MySQL</span>使用的帳號名和密碼的含義，以及如何比較您的作業系統所使用的帳號名和密碼</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何設置新帳號並移除已有帳號</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何更改密碼</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>安全使用密碼指導</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如何使用安全<span>SSL</span>連接 </p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="user-names"></a>
			5.8.1.&nbsp;MySQL帳號和密碼</h3></div></div></div><a class="indexterm" name="id2773917"></a><a class="indexterm" name="id2773927"></a>
			<p>用帳號和客戶端或主機定義<span>MySQL</span>帳號，用戶可以根據這些名稱來連接伺服器。帳號也有密碼。<span>MySQL</span>和作業系統使用帳號和密碼的方式有幾處區別：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>用於鑒定目的帳號與<span>Windows</span>或<span>Unix</span>使用的帳號<span>(</span>登錄名<span>)</span>沒有關係。在<span>Unix</span>中，大多數<span>MySQL</span>客戶端預設試圖使用當前<span>Unix</span>的帳號作為<span>MySQL</span>帳號來登錄，但這樣只是為了方便。
			預設值可以很容易被覆蓋，因為客戶端程式允許用<span>-u</span>或<span>--user</span>選項來指定帳號。因為這資料表示任何人可以試圖使用任何帳號來連接伺服器，除非所有<span>MySQL</span>帳號有密碼，否則您不能使資料庫保持安全。通過為沒有密碼的帳號指定帳號，任何人能夠成功連接伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>帳號最大客達<span>16</span>字元長。這樣可以限制<span>MySQL</span>伺服器和客戶端之間的硬編碼，並且防止通過修改<span>mysql</span>資料庫中資料表的定義來偷竊密碼。</p>
			<p><strong>
			<span>注</span></strong><span>:</span>您<em><span>應絕對不要以任何方式修改</span></em><span><i><span>mysql</span></i></span><em><span>資料庫中的任何資料表，只能運行<span>MySQL</span>分發中專為此目的提供的指令。將<span>MySQL</span>系統資料表重新定義為其它方式會導致未定義的<span>(</span>和不支援的<span>!)</span>行為</span></em>。</p>
			<p>作業系統帳號與<span>MySQL</span>帳號完全不相關，甚至最大長度可能不同。例如，<span> 
			Unix</span>帳號限制為<span>8</span>個字元。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>密碼與登錄到您的作業系統的密碼沒有關係。不需要將您用來登錄<span>Windows</span>或<span>Unix</span>機器的密碼和您用來訪問該機器上的<span>MySQL</span>伺服器的密碼關聯起來。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MySQL</span>的加密密碼使用自己的算法。該加密算法不同於<span>Unix</span>登錄過程使用的算法。<span>MySQL</span>密碼加密與<span>PASSWORD()</span><span>SQL</span>函數的方法相同。<span>Unix</span>密碼加密與<span>ENCRYPT()</span><span>SQL</span>函數的方法相同。<span>PASSWORD()</span>和<span>ENCRYPT()</span>函數的描述參見<a href="functions.html#encryption-functions" title="12.9.2. Encryption Functions">12.9.2節，「加密函數」</a>。從版本<span>4.1 </span>起，<span>MySQL</span>使用更強的鑒定方法，同以前的版本相比可以在連接過程中提供更好的密碼保護。即使<span>TCP/IP</span>包被截取或<span>mysql</span>資料庫被捕獲也很安全。<span>(</span>在前面的版本中，即使密碼以加密形式保存到<span>user</span>資料表中，仍可以通過加密密碼值來連接<span>MySQL</span>伺服器）<span>。</span></p>
			<p>當安裝<span>MySQL</span>時，授權資料表裝載時有一系列初使帳號。這些帳號的名稱和訪問權限見<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>，其中還討論了如何未這些帳號賦予密碼。因此，您一般應使用<span>GRANT</span>和<span>REVOKE</span>語句來設置、修改和移除<span>MySQL</span>帳號。參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</p>
			<p>當用命令行客戶端連接<span>MySQL</span>伺服器時，您應為想要使用的帳號指定帳號和密碼：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=monty --password=<i>guess</i> <i>db_name</i></span></b></span></pre>
			<p>如果您想用較短的選項，命令應為：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u monty -p<i>guess</i> <i>db_name</i></span></b></span></pre>
			<p>
			<span>-p</span>選項和後面的密碼值之間絕對不能有<i>空格</i>。參見<a href="database-administration.html#connecting" title="5.7.4. Connecting to the MySQL Server">5.7.4節，「與MySQL伺服器連接」</a>。</p>
			<p>前面的命令包括命令行中的密碼值，會很危險。參見<a href="database-administration.html#password-security" title="5.8.6. Keeping Your Password Secure">5.8.6節，「使您的密碼安全」</a>。要想避免，指定<span>--password</span>或<span>-p</span>選項後面不跟任何密碼值：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=monty --password <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql -u monty -p <i>db_name</i></span></b></span></pre>
			<p>然後客戶端程式輸出提示符並等待您輸入密碼。<span>(</span>在這些示範中，<span><i><span>db_name</span></i></span>並不為密碼，因為用空格將它同前面的密碼項隔離開了）<span>。</span></p>
			<p>在一些系統中，<span>MySQL</span>用來提示輸入密碼的庫使用自動將密碼限制到<span>8</span>個字元。這是系統庫的問題，而不是<span>MySQL</span>的問題。<span>MySQL</span>本身並不限制密碼的長度。要解決該問題，將<span>MySQL</span>密碼改為<span>8</span>個字元和更少字元的值，或將密碼放入選項檔案中。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adding-users"></a>
			5.8.2.&nbsp;向MySQL增加新用戶帳號</h3></div></div></div><a class="indexterm" name="id2774260"></a><a class="indexterm" name="id2774269"></a><a class="indexterm" name="id2774281"></a><a class="indexterm" name="id2774291"></a><a class="indexterm" name="id2774302"></a><a class="indexterm" name="id2774312"></a><a class="indexterm" name="id2774322"></a>
			<p>可以用兩種方式建立<span>MySQL</span>帳號：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>GRANT</span>語句</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>直接操作<span>MySQL</span>授權資料表</p>
			<p>最好的方法是使用<span>GRANT</span>語句，因為這樣更精確，錯誤少。從<span>MySQL 
			3.22.11</span>起提供了<span>GRANT</span>；其語法見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</p>
			<p>建立帳號的其它方法是使用<span>MySQL</span>帳號管理功能的第三方程式。<span>phpMyAdmin</span>即是一個程式。</p>
			<p>下面的示範說明如何使用<strong><span 
細明體;">MySQL</span></strong>客戶端程式來設置新用戶。假定按照<a href="installing.html#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>描述的
			預設值來設置權限。這說明為了更改，您必須以<span>MySQL
			</span>
			<span>root</span>用戶連接<span>MySQL</span>伺服器，並且<span>root</span>帳號必須有<span>mysql</span>資料庫的<span>INSERT</span>權限和<span>RELOAD</span>管理權限。</p>
			<p>首先，使用<strong><span 
細明體;">MySQL</span></strong>程式以<span>MySQL </span>
			<span>root</span>用戶來連接伺服器：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> --user=root </b>MySQL</span></pre>
			<p>如果您為<span>root</span>帳號指定了密碼，還需要為該<strong><span>MySQL</span></strong>命令和本節中的其它命令提供<span>--password</span>或<span>-p</span>選項。</p>
			<p><span>以<span>root</span></span>連接到伺服器上後，可以新增新帳號。下面的語句使用<span>GRANT</span>來設置四個新帳號：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON *.* TO &#39;monty&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;some_pass&#39; WITH GRANT OPTION;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON *.* TO &#39;monty&#39;@&#39;%&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;some_pass&#39; WITH GRANT OPTION;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT RELOAD,PROCESS ON *.* TO &#39;admin&#39;@&#39;localhost&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;dummy&#39;@&#39;localhost&#39;;</span></b></span></pre>
			<p>用<span>GRANT</span>語句建立的帳號有下面的屬性：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>其中兩個帳號有相同的帳號<span>monty</span>和密碼<span>some_pass</span>。兩個帳號均為超級用戶帳號，具有完全的權限可以做任何事情。一個帳號<span> 
			(</span><span>&#39;monty&#39;@&#39;localhost&#39;</span><span>)</span>只用於從本機連接時。另一個帳號<span>(</span><span>&#39;monty&#39;@&#39;%&#39;</span><span>)</span>可用於從其它主機連接。請注意<span>monty</span>的兩個帳號必須能從任何主機以<span>monty</span>連接。沒有<span>localhost</span>帳號，當<span>monty</span>從本機連接時，<strong><span>mysql_install_db</span></strong>建立的<span>localhost</span>的匿名用戶帳號將佔先。結果是，<span>monty</span>將被視為匿名用戶。原因是匿名用戶帳號的<span>Host</span>列值比<span>&#39;monty&#39;@&#39;%&#39;</span>帳號更具體，這樣在<span>user</span>資料表排序順序中排在前面。<span>(</span><span>user</span>資料表排序的討論參見<a href="database-administration.html#connection-access" title="5.7.5. Access Control, Stage 1: Connection Verification">5.7.5節，「訪問控制, 階段1：連接核實」</a>）<span>。 </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>一個帳號有帳號<span>admin</span>，沒有密碼。該帳號只用於從本機連接。授予了<span>RELOAD</span>和<span>PROCESS</span>管理權限。這些權限允許<span>admin</span>用戶執行<strong><span>mysqladmin 
			reload</span></strong>、<strong><span>mysqladmin 
			refresh</span></strong>和<strong><span>mysqladmin 
			flush-</span></strong><span><b><i><span>xxx</span></i></b></span>命令，以及<strong><span>mysqladmin 
			processlist</span></strong>。未授予訪問資料庫的權限。您可以通過<span>GRANT</span>語句新增此類權限。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>一個帳號有帳號<span>dummy</span>，沒有密碼。該帳號只用於從本機連接。未授予權限。通過<span>GRANT</span>語句中的<span>USAGE</span>權限，您可以建立帳號而不授予任何權限。它可以將所有全局權限設為<span>&#39;N&#39;</span>。假定您將在以後將具體權限授予該帳號。</p>
			<p>除了<span>GRANT</span>，您可以直接用<span>INSERT</span>語句建立相同的帳號，然後使用<span>FLUSH 
			PRIVILEGES</span>告訴伺服器重載授權資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;monty&#39;,PASSWORD(&#39;some_pass&#39;),</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;%&#39;,&#39;monty&#39;,PASSWORD(&#39;some_pass&#39;),</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user SET Host=&#39;localhost&#39;,User=&#39;admin&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Reload_priv=&#39;Y&#39;, Process_priv=&#39;Y&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;dummy&#39;,&#39;&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>當您用<span>INSERT</span>建立帳號時使用<span>FLUSH 
			PRIVILEGES</span>的原因是告訴伺服器重讀授權資料表。否則，只有重啟伺服器後更改方會被注意到。使用 
			<span>GRANT</span>，則不需要使用<span>FLUSH 
			PRIVILEGES</span>。</p>
			<p>用<span>INSERT</span>使用<span>PASSWORD()</span>函數是為了加密密碼。<span>GRANT</span>語句為您加密密碼，因此不需要<span>PASSWORD()</span>。</p>
			<p>
			<span>&#39;Y&#39;</span>值啟用帳號權限。對於<span>admin</span>帳號，還可以使用更加可讀的<span>INSERT</span>擴充的語法（使用<span>SET</span>）。</p>
			<p>在為<span>dummy</span>帳號的<span>INSERT</span>語句中，只有<span>user</span>資料表中的<span>Host</span>、<span>User</span>和<span>Password</span>列記錄為指定的值。沒有一個權限列為顯式設置，因此<span>MySQL</span>將它們均指定為
			預設值<span>&#39;N&#39;</span>。這樣等同於<span>GRANT 
			USAGE</span>的操作。</p>
			<p>請注意要設置超級用戶帳號，只需要建立一個權限列設置為<span>&#39;Y&#39;</span>的<span>user</span>資料表條目。<span>user</span>資料表權限為全局權限，因此其它
			授權資料表不再需要條目。</p>
			<p>下面的例子建立<span>3</span>個帳號，允許它們訪問專用資料庫。每個帳號的帳號為<span>custom</span>，密碼為<span><span>obscure</span>。</span></p>
			<p>要想用<span>GRANT</span>建立帳號，使用下面的語句：</p>
			<pre><span>shell&gt; </span><span  >MySQL<b> --user=root </b>MySQL</span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON bankaccount.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON expenses.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;whitehouse.gov&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON customer.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;custom&#39;@&#39;server.domain&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;obscure&#39;;</span></b></span></pre>
			<p>這<span>3</span>個帳號可以用於：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>1</span>個帳號可以訪問<span>bankaccount</span>資料庫，但只能從本機訪問。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>2</span>個帳號可以訪問<span>expenses</span>資料庫，但只能從主機<span>whitehouse.gov</span>訪問。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>第<span>3</span>個帳號可以訪問<span>customer</span>資料庫，但只能從主機<span>server.domain</span>訪問。</p>
			<p>要想不用<span>GRANT</span>設置<span>custom</span>帳號，使用<span>INSERT</span>語句直接修改
			授權資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --user=root mysql</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;whitehouse.gov&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;server.domain&#39;,&#39;custom&#39;,PASSWORD(&#39;obscure&#39;));</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;localhost&#39;,&#39;bankaccount&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;whitehouse.gov&#39;,&#39;expenses&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO db</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>(Host,Db,User,Select_priv,Insert_priv,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>Update_priv,Delete_priv,Create_priv,Drop_priv)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;server.domain&#39;,&#39;customer&#39;,&#39;custom&#39;,</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>前<span>3</span>個<span>INSERT</span>語句在<span>user</span>資料表中加入條目，允許用戶<span>custom</span>從各種主機用給定的密碼進行連接，但不授予全局權限<span>(</span>所有權限設置為
			預設值<span>&#39;N&#39;</span><span>)</span>。後面<span>3</span>個<span>INSERT</span>語句在<span>user</span>資料表中加入條目，為<span>custom</span>授予<span>bankaccount</span>、<span>expenses</span>和<span>customer</span>資料庫權限，但只能從合適的主機訪問。<span>通常若直接修改
			授權資料表，則應告訴伺服器用</span><span  >FLUSH 
			PRIVILEGES</span><span>重載授權資料表，使權限更改生效。</span></p>
			<p><span>如果您想要讓某個用戶從給定域的所有機器訪問<span>(</span>例如，</span><span  >mydomain.com</span><span>)</span><span>，您可以在帳號名的主機部分使用含『</span><span  >%</span><span>』通配符的</span><span>GRANT</span><span>語句：</span></p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ...</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>ON *.*</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>TO &#39;myname&#39;@&#39;%.mydomain.com&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;mypass&#39;;</span></b></span></pre>
			<p>要想通過直接修改授權資料表來實現：</p>
			<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password,...)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>VALUES(&#39;%.mydomain.com&#39;,&#39;myname&#39;,PASSWORD(&#39;mypass&#39;),...);</span></b></span></pre>
			<p><span>mysql&gt; </span>
			<span><b><span>FLUSH PRIVILEGES;</span></b></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="removing-users"></a>
			5.8.3.&nbsp;從MySQL刪除用戶帳號</h3></div></div></div><a class="indexterm" name="id2775271"></a><a class="indexterm" name="id2775281"></a><a class="indexterm" name="id2775291"></a><a class="indexterm" name="id2775301"></a><a class="indexterm" name="id2775312"></a><a class="indexterm" name="id2775322"></a><a class="indexterm" name="id2775332"></a><a class="indexterm" name="id2775342"></a>
			<p>要想移除帳號，應使用<span>DROP USER</span>語句，請參見<a href="sql-syntax.html#drop-user" title="13.5.1.2. DROP USER Syntax">13.5.1.2節，「DROP 
		USER語法」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="user-resources"></a>
			5.8.4.&nbsp;限制帳號資源</h3></div></div></div><a class="indexterm" name="id2775377"></a><a class="indexterm" name="id2775386"></a><a class="indexterm" name="id2775395"></a><a class="indexterm" name="id2775405"></a>
			<p>限制<span>MySQL</span>伺服器資源使用的一個方法是將<span>max_user_connections</span>系統變數設置為非零值。但是，該方法嚴格限於全局，不允許管理具體帳號。並且，它只限制使用單一帳號同時連接的數量，而不是客戶端連接後的操作。許多<span>MySQL</span>管理員對兩種類型的控制均感興趣，特別是<span>Internet</span>服務提供者。</p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>您可以為具體帳號限制下面的伺服器資源：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>帳號每小時可以發出的查詢數</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>帳號每小時可以發出的更新數</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>帳號每小時可以連接伺服器的次數</p>
			<p>客戶端可以執行的語句根據查詢限制來記數。只有修改資料庫或資料表的語句根據更新限制來記數。</p>
			<p>還可以限制每個帳號的同時連接伺服器的連接數。</p>
			<p>本文中的帳號為<span>user</span>資料表中的單個記錄。根據<span>User</span>和<span>Host</span>列值唯一識別每個帳號。</p>
			<p>做為使用該特性的先決條件，<span>mysql</span>資料庫的<span>user</span>資料表必須包含資源相關的列。資源限制保存在<span>max_questions</span>、<span>max_updates</span>、<span>max_connections</span>和<span>max_user_connections</span>列內。如果<span>user</span>資料表沒有這些列，必須對它進行升級；參見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</p>
			<p>要想用<span>GRANT</span>語句設置資源限制，使<span>WITH</span>子句來命名每個要限制的資源和根據每小時記數的限制值。例如，要想只以限制方式建立可以訪問<span>customer</span>資料庫的新帳號，執行該語句：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT ALL ON customer.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>IDENTIFIED BY &#39;frank&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_QUERIES_PER_HOUR 20</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span><b><span>MAX_UPDATES_PER_HOUR 10</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>MAX_CONNECTIONS_PER_HOUR 5</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>MAX_USER_CONNECTIONS 2;</span></b></span></pre>
			<p>限制類型不需要全部在<span>WITH</span>子句中命名，但已經命名的可以按任何順序。每個每小時限制值均應為整數，代資料表每小時的記數。如果<span>GRANT</span>語句沒有<span>WITH</span>子句，則每個限制值設置為
			預設值零<span>(</span>即沒有限制<span>)</span>。對於<span>MAX_USER_CONNECTIONS</span>，限制為整數，資料表示帳號一次可以同時連接的最大連接數。如果限制設置為
			預設值零，則根據<span>MAX_USER_CONNECTIONS</span>系統變數確定該帳號可以同時連接的數量。</p>
			<p>要想設置或更改已有帳號的限制，在全局級別使用<span>GRANT 
			USAGE</span>語句<span>(</span>在<span>*.*</span><span>)</span>。下面的語句可以將<span>francis</span>的查詢限制更改為<span>100</span>：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_QUERIES_PER_HOUR 100;</span></b></span></pre>
			<p>該語句沒有改變帳號的已有權限，只修改了指定的限制值。</p>
			<p>要想取消已有限制，將該值設置為零。例如，要想取消<span>francis</span>每小時可以連接的次數的限制，使用該語句：</p>
			<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;francis&#39;@&#39;localhost&#39;</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WITH MAX_CONNECTIONS_PER_HOUR 0;</span></b></span></pre>
			<p>當帳號使用資源時如果有非零限制，則對資源使用進行記數。</p>
			<p>
			伺服器運行時，它統計每個帳號使用資源的次數。如果帳號在最後一個小時的連接次數達到限制，該帳號的進一步的連接被拒絕。類似地，如果帳號達到查詢或更新次數的限制，進一步的查詢或更新被拒絕。在這種情況下，會給出相關錯誤消息。</p>
			<p>根據每個帳號進行資源計算，而不是根據每個客戶端。例如，如果您的帳號的查詢限制為<span>50,</span>您不能通過兩個客戶端同時連接伺服器將限制增加到<span>100</span>。兩個連接的查詢被計算到一起。</p>
			<p>可以為所有帳號從全局重設當前的每小時資源使用記數，或單獨重設給定的帳號：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想將所有帳號當前的記數重設為零，可以執行<span>FLUSH 
			USER_RESOURCES</span>語句。還可以通過重載授權資料表來重設記數<span>(</span>例如，使用<span>FLUSH 
			PRIVILEGES</span>語句或<strong><span>mysqladmin 
			reload</span></strong>命令<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>將具體帳號的限制重新授予任何值，可以將它設置為零。要想實現，按照前面所述使用<span>GRANT 
			USAGE</span>，並將限制值指定為該帳號當前的限制值。</p>
			<p>計數器重設不影響<span>MAX_USER_CONNECTIONS</span>限制。</p>
			<p>當伺服器啟動時所有記數從零開始。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="passwords"></a>
			5.8.5.&nbsp;設置帳號密碼</h3></div></div></div><a class="indexterm" name="id2775767"></a><a class="indexterm" name="id2775776"></a><a class="indexterm" name="id2775785"></a><a class="indexterm" name="id2775795"></a>
			<div class="itemizedlist">
				<ul type="disc">
					<li>可以用<strong><span>mysqladmin</span></strong>命令在命令行指定密碼：<pre><span>shell&gt; </span><span><b><span>mysqladmin -u <i>user_name</i> -h <i>host_name</i> password &quot;<i>newpwd</i>&quot;</span></b></span></pre>
					<p>該命令重設密碼的帳號為<span>user</span>資料表內匹配<span>User</span>列的<span><i><span>user_name</span></i></span>和<span>Host</span>列<em><span>您發起連接的</span></em>客戶端的記錄。</p>
					<p>為帳號賦予密碼的另一種方法是執行<span>SET 
					PASSWORD</span>語句：</p>
					<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;jeffrey&#39;@&#39;%&#39; = PASSWORD(&#39;biscuit&#39;);</span></b></span></pre>
					<p>只有<span>root</span>等可以更新<span>mysql</span>資料庫的用戶可以更改其它用戶的密碼。如果您沒有以匿名用戶連接，省略<span>FOR</span>子句便可以更改自己的密碼：</p>
					<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD = PASSWORD(&#39;biscuit&#39;);</span></b></span></pre>
					<p>您還可以在全局級別使用<span>GRANT 
					USAGE</span>語句<span>(</span>在<span>*.*</span><span>)</span>來指定某個帳號的密碼而不影響帳號當前的權限：</p>
					<pre><span>mysql&gt; </span><span><b><span>GRANT USAGE ON *.* TO &#39;jeffrey&#39;@&#39;%&#39; IDENTIFIED BY &#39;biscuit&#39;;</span></b></span></pre>
					<p>一般情況下最好使用上述方法來指定密碼，您還可以直接修改<span>user</span>資料表：</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>要想在建立新帳號時建立密碼，在<span>Password</span>列提供一個值：</p>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>VALUES(&#39;%&#39;,&#39;jeffrey&#39;,PASSWORD(&#39;biscuit&#39;));</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>要想更改已有帳號的密碼，使用<span>UPDATE</span>來設置<span>Password</span>列值：</p>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>mysql&gt; </span><span><b><span>UPDATE user SET Password = PASSWORD(&#39;bagel&#39;)</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>WHERE Host = &#39;%&#39; AND User = &#39;francis&#39;;</span></b></span></pre>
					<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<p>當您使用<span>SET 
					PASSWORD</span>、<span>INSERT</span>或<span>UPDATE</span>指定帳號的密碼時，必須用<span>PASSWORD()</span>函數對它進行加密。<span>(</span>唯一的特例是如果密碼為空，您不需要使用<span>PASSWORD()</span><span>)</span>。需要使用<span>PASSWORD()</span>是因為<span>user</span>資料表以加密方式保存密碼，而不是明文。如果您忘記了，您可能會像這樣設置密碼：</p>
					<pre><span>shell&gt; </span><span><b><span>mysql -u root mysql</span></b></span></pre>
					<pre><span>mysql&gt; </span><span><b><span>INSERT INTO user (Host,User,Password)</span></b></span></pre>
					<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>VALUES(&#39;%&#39;,&#39;jeffrey&#39;,&#39;biscuit&#39;);</span></b></span></pre>
					<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
					<pre><span>&nbsp;</span></pre>
					<p>結果是密碼<span>&#39;biscuit&#39;</span>保存到<span>user</span>資料表後沒有加密。當<span>jeffrey</span>使用該密碼連接伺服器時，值被加密並同保存在<span>user</span>資料表中的進行比較。但是，保存的值為字串<span>&#39;biscuit&#39;</span>，因此比較將失敗，伺服器拒絕連接：</p>
					<pre><span>shell&gt; </span><span><b><span>mysql -u jeffrey -pbiscuit test</span></b></span></pre>
					<pre><span>Access denied</span></pre>
					<p>如果您使用<span>GRANT 
					... IDENTIFIED BY</span>語句或<strong><span>mysqladmin 
					password</span></strong>命令設置密碼，它們均會加密密碼。在這種情況下，不需要使用 
					<span>PASSWORD()</span>函數。</p>
					<p><strong><span>注</span></strong>釋：<span>PASSWORD()</span>加密不同於<span>Unix</span>密碼加密。參見<a href="database-administration.html#user-names" title="5.8.1. MySQL Usernames and Passwords">5.8.1節，「MySQL帳號和密碼」</a>。</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="password-security"></a>
			5.8.6.&nbsp;使您的密碼安全</h3></div></div></div>
			<p>在管理級別，您決不能將<span>mysql.user</span>資料表的訪問權限授予任何非管理帳號。</p>
			<p>當您運行客戶端程式連接<span>MySQL</span>伺服器時，以一種暴露的可被其他用戶發現的方式指定您的密碼是不妥當的。當您運行客戶端程式時，您可以使用下列方法指定您的密碼，還有每個方法的風險評估：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用一個在命令行上<span>-p<i>your_pass</i></span>或<span>--password=<i>your_pass</i></span>的選項。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u francis -pfrank <i>db_name</i></span></b></span></pre>
			<p>這很方便但是不安全，因為您的密碼對系統狀態程式<span>(</span>例如<span>ps</span><span>)</span>變得可見，它可以被其他的用戶使用來顯示命令行。一般<strong><span>MySQL</span></strong>客戶在他們的初始化順序期間用零覆蓋命令行參數，但是仍然有一個短暫間隔時間內參數值可見的。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用一個<span>-p</span>或<span>--password</span>選項<span>(</span>沒有指定密碼<span>)</span>。在這種情況下，客戶端程式請求來自終端的密碼：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -u francis -p <i>db_name</i></span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Enter password: ********</span></pre>
			<p><span>&nbsp;</span><samp >「<span>*</span>」</samp>字元指示輸入密碼的地方。輸入密碼時密碼看不見。</p>
			<p>
			因為它對其他用戶不可見，與在命令行上指定它相比，這樣進入您的密碼更安全。然而，這個輸入一個密碼的方法僅僅為您交互式運行程式是合適的。如果您想要從非交互式運行的一個指令使用一個客戶端，就沒有從終端輸入入密碼的機會。在某些系統中，您甚至會發現指令的第一行被（錯誤地）讀並解釋為您的密碼！</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在一個配置檔案中儲存您的密碼。例如，在<span>Unix</span>中，您可在主目錄的<tt >「<span>.my.cnf</span>」</tt>檔案中的<span>[client]</span>節列出您的密碼：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[client]</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>password=your_pass</span></pre>
			<p>如果您在<tt >「<span>.my.cnf</span>」</tt>裡面儲存密碼，除了您本人其它人不能訪問該檔案。保證檔案的訪問模式是<span>400</span>或<span><span>600</span>。</span>例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>chmod 600 .my.cnf</span></b></span></pre>
			<p>關於選項檔案的詳細討論參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>您可在<span>MYSQL_PWD</span>環境變數中儲存密碼。但是這種指定<span>MySQL</span>密碼的方法是極不安全的，不應該使用。<span>ps</span>的某些版本包括顯示運行程序的環境的選項；如果您設定<span>MYSQL_PWD</span>，您的密碼將被運行<strong><span>ps</span></strong>的所有人看見，甚至在沒有這樣一個版本的<span>ps</span>的系統上，沒有其它方法觀察到程序環境的假設是不明智的。參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</p>
			<p>總之，最安全的方法是讓客戶端程式提示輸入密碼或在適當保護的選項檔案中指定密碼。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="secure-connections"></a>
			5.8.7.&nbsp;使用安全連接</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#secure-basics">
				5.8.7.1. SSL基本概念</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-requirements">
				5.8.7.2. 需求(OpenSSL)</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-using-yassl">
				5.8.7.3. 使用yaSSL</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-create-certs">
				5.8.7.4. 為MySQL設置SSL證書</a></span></dt><dt><span class="section"><a href="database-administration.html#secure-grant">5.8.7.5. SSL GRANT 
				選項</a></span></dt><dt><span class="section"><a href="database-administration.html#ssl-options">
				5.8.7.6. SSL命令行選項</a></span></dt><dt><span class="section"><a href="database-administration.html#windows-and-ssh">
				5.8.7.7. 用SSH以遠程方式從Windows連接到MySQL</a></span></dt></dl></div><a class="indexterm" name="id2776412"></a><a class="indexterm" name="id2776419"></a><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>支援<span>MySQL</span>客戶端和伺服器之間的安全<span>(</span>加密的<span>)</span>連接所使用的安全套接字層<span>(SSL)</span>協議。本節討論如何使用<span>SSL</span>連接。還描述了在<span>Windows</span>中設置<span>SSH</span>的方法。<p>
				<span>MySQL</span>的標準配置傾向於盡可能快，因此預設情況不使用加密連接。使用該協議會使客戶端<span>/</span>伺服器協議慢得多。對數據進行加密非常耗<span>CPU</span>，需要計算機多做許多工作，會延遲<span>MySQL</span>的其它任務。對於需要通過加密連接提供安全的應用程式，可以保證額外的計算。</p>
				<p><span>MySQL</span>允許在連接前啟用加密。您可以根據具體應用程式的需求選擇普通未加密連接或安全加密<span>SSL</span>連接。</p>
				<h4 class="title"><a name="secure-basics"></a>5.8.7.1.&nbsp;SSL基本概念</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				要想理解<span>MySQL</span>如何使用<span>SSL</span>，需要解釋一些基本<span>SSL</span>和<span>X509</span>概念。熟悉的人們可以跳過該部分。<p>
				預設情況下，<span>MySQL</span>在客戶端和伺服器之間使用未加密的連接。這說明可以訪問網絡的部分人可以看到您的通信，並看到發送和接收的數據。他們甚至可以更改在客戶端和伺服器之間傳遞的數據。要想提高安全性，當使用客戶端程式時，您可以通過<span>--compress</span>選項壓縮客戶端<span>/</span>伺服器之間的通信。但是，這樣並不能阻擋住頑固的攻擊者。</p>
				<p>
				當您需要以安全方式在網絡中傳遞訊息時，未加密的連接是不可接受的。加密是使任何數據不可讀的方法。事實上，今天的許多慣例需要加密算法提供更加安全的要素。它們應能抵抗各種已知的攻擊，例如更改加密消息的順序或兩次重放數據。</p>
				<p><span>SSL</span>是一種使用不同的加密算法確保從公用網接收到的數據是可信的協議。它具有檢測數據更改、丟失或重放的機制。<span>SSL</span>還包括使用<span> 
				X509</span>標準提供身份認證的算法。</p>
				<p>使用<span>X509</span>，可以識別<span>Internet</span>上的某些人。通常用於電子商務應用程式中。按照基本概念，應有某種稱之為「<span class="quote">認證機構</span>」<span>(</span>或<span>CA)</span>的機構，可以向請求者分發電子證書。證書依賴非對稱加密算法，有兩個加密密鑰<span>(</span>公共密鑰和私人密鑰<span>)</span>。認證持有者可以向其它方出示證書來證明身份。證書包括持有者的公共密鑰。只能使用對應的私人密鑰對含該公共密鑰的加密數據進行解密，私人密鑰由證書持有者擁有。</p>
				<p>如果您需要關於<span>SSL</span>、<span>X509</span>、或加密的詳細訊息，使用<span>Internet</span>搜索引擎來搜索您感興趣的關鍵字。</p>
				<h4 class="title"><a name="secure-requirements"></a>5.8.7.2.&nbsp;需求(OpenSSL)</h4></div></div></div>
				<p>要想在<span>MySQL</span>伺服器和客戶端程式之間使用<span>SSL</span>連接，系統必須能夠支援<span>OpenSSL</span>。如果用支援內嵌式<span>yaSSL</span>的<span>MySQL</span>版本，不要讀該節，但應閱讀<a href="database-administration.html#secure-using-yassl" title="5.8.7.3. Using yaSSL">5.8.7.3節，「使用yaSSL」</a>。</p>
				<p>要想獲得安全的<span>MySQL</span>連接，必須：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>安裝<span>OpenSSL</span>庫。我們已經測試了帶<span>OpenSSL 
				0.9.6</span>的<span>MySQL</span>。如果您需要<span>OpenSSL</span>，請訪問<span><a target="_top"  href="http://www.openssl.org"><span><u><span style="color:blue">http://www.openssl.org</span></u></span></a></span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>配置<span>MySQL</span>，用<span>--with-vio</span>和<span>--with-openssl</span>選項運行<strong><span>configure</span></strong>指令。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>確保升級了授權資料表，使<span>mysql.user</span>資料表內包含<span>SSL</span>相關列。如果
				授權資料表是從<span>MySQL 
				4.0.0</span>之前的版本升級，這很重要。升級過程見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>要想檢查是否運行的<b><span>mysqld</span></b><strong><span>伺服器</span></strong>支援<span>OpenSSL</span>，應檢查<span>have_openssl</span>系統變數的值：</p>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mysql&gt; </span><span><b><span>SHOW VARIABLES LIKE &#39;have_openssl&#39;;</span></b></span></pre>
				<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| Variable_name | Value |</span></pre>
				<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| have_openssl&nbsp; | YES&nbsp;&nbsp; |</span></pre>
				<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------+-------+</span></pre>
				<p>如果值為<span>YES</span>，伺服器支援<span>OpenSSL</span>連接。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="secure-using-yassl"></a>
				5.8.7.3.&nbsp;使用yaSSL</h4></div></div></div><a class="indexterm" name="id2776679"></a>
				<p>使用<span>MySQL</span>的內嵌式<span>yaSSL</span>支援，可以很容易地使用安全連接。不需要安裝<span>OpenSSL</span>和執行<a href="database-administration.html#secure-requirements" title="5.8.7.2. Requirements (OpenSSL)">5.8.7.2節，「需求(OpenSSL)」</a>中的步驟。並且，<span>MySQL</span>和<span>yaSSL</span>使用相同的授權模型。</p>
				<p>當前，在以下平台上支援<span>yaSSL</span>：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux/x86-64 Red Hat Enterprise 
				3.0 </span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux RHAS21 Itanium-2</span>，帶<span>gcc</span>，靜態連結</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Linux Itanium-2</span>，帶<span>gcc</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Windows</span></p>
				<p>當從原始碼構建<span>MySQL</span>時如果您想要啟用<span>yaSSL</span>，應這樣配置<span>MySQL</span>：</p>
				<pre><span>./configure --with-yassl=yes</span></pre>
				<p>要想啟動<span>MySQL</span>伺服器支援<span>yaSSL</span>，使用支援<span>OpenSSL</span>的相同的選項，並識別建立安全連接需要的證書：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqld --ssl-ca=<i>cacert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-cert=<i>server-cert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-key=<i>server-key.pem</i></span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-ca</span>識別認證機構證書。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cert</span>識別伺服器證書。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>--ssl-key</span>識別客戶證書。</p>
				<p>要想用<span>yaSSL</span>支援建立與<span>MySQL</span>伺服器的安全連接，應這樣啟動客戶端：</p>
				<pre><span>shell&gt; </span><span><b><span>mysql --ssl-ca=<i>cacert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-cert=<i>server-cert.pem</i> \</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--ssl-key=<i>server-key.pem</i></span></b></span></pre>
				<p>換句話說，選項與伺服器的相同，並且認證機構證書必須相同。</p>
				<p>要想從應用程式建立安全連接，使用<span>mysql_real_connect()</span>之前，應使用<span>mysql_ssl_set()</span><span>API</span>函數來設置相應認證選項。參見<a href="apis.html#mysql-ssl-set" title="25.2.3.64. mysql_ssl_set()">25.2.3.64節，「mysql_ssl_set()」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="secure-create-certs"></a>
				5.8.7.4.&nbsp;為MySQL設置SSL證書</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				下面是一個為<span>MySQ</span>設置<span>SSL</span>證書的例子：<pre><span>DIR=`pwd`/openssl</span></pre>
				<pre><span>PRIV=$DIR/private</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>mkdir $DIR $PRIV $DIR/newcerts</span></pre>
				<pre><span>cp /usr/share/ssl/openssl.cnf $DIR</span></pre>
				<pre><span>replace ./demoCA $DIR -- $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Create necessary files: $database, $serial and $new_certs_dir</span></pre>
				<pre><span># directory (optional)</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>touch $DIR/index.txt</span></pre>
				<pre><span>echo &quot;01&quot; &gt; $DIR/serial</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Generation of Certificate Authority(CA)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl req -new -x509 -keyout $PRIV/cakey.pem -out $DIR/cacert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># ................++++++</span></pre>
				<pre><span># .........++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/private/cakey.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL admin</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create server request and key</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl req -new -keyout $DIR/server-key.pem -out \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; $DIR/server-req.pem -days 3600 -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># ..++++++</span></pre>
				<pre><span># ..........++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/server-key.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL server</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Please enter the following &#39;extra&#39; attributes</span></pre>
				<pre><span># to be sent with your certificate request</span></pre>
				<pre><span># A challenge password []:</span></pre>
				<pre><span># An optional company name []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Remove the passphrase from the key (optional)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl rsa -in $DIR/server-key.pem -out $DIR/server-key.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Sign server cert</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl ca&nbsp; -policy policy_anything -out $DIR/server-cert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf -infiles $DIR/server-req.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Check that the request matches the signature</span></pre>
				<pre><span># Signature ok</span></pre>
				<pre><span># The Subjects Distinguished Name is as follows</span></pre>
				<pre><span># countryName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;FI&#39;</span></pre>
				<pre><span># organizationName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL AB&#39;</span></pre>
				<pre><span># commonName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL admin&#39;</span></pre>
				<pre><span># Certificate is to be certified until Sep 13 14:22:46 2003 GMT</span></pre>
				<pre><span># (365 days)</span></pre>
				<pre><span># Sign the certificate? [y/n]:y</span></pre>
				<pre><span>#</span></pre>
				<pre><span>#</span></pre>
				<pre><span># 1 out of 1 certificate requests certified, commit? [y/n]y</span></pre>
				<pre><span># Write out database with 1 new entries</span></pre>
				<pre><span># Data Base Updated</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create client request and key</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl req -new -keyout $DIR/client-key.pem -out \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; $DIR/client-req.pem -days 3600 -config $DIR/openssl.cnf</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Generating a 1024 bit RSA private key</span></pre>
				<pre><span># .....................................++++++</span></pre>
				<pre><span># .............................................++++++</span></pre>
				<pre><span># writing new private key to &#39;/home/monty/openssl/client-key.pem&#39;</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Verifying password - Enter PEM pass phrase:</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># You are about to be asked to enter information that will be</span></pre>
				<pre><span># incorporated into your certificate request.</span></pre>
				<pre><span># What you are about to enter is what is called a Distinguished Name</span></pre>
				<pre><span># or a DN.</span></pre>
				<pre><span># There are quite a few fields but you can leave some blank</span></pre>
				<pre><span># For some fields there will be a default value,</span></pre>
				<pre><span># If you enter &#39;.&#39;, the field will be left blank.</span></pre>
				<pre><span># -----</span></pre>
				<pre><span># Country Name (2 letter code) [AU]:FI</span></pre>
				<pre><span># State or Province Name (full name) [Some-State]:.</span></pre>
				<pre><span># Locality Name (eg, city) []:</span></pre>
				<pre><span># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></pre>
				<pre><span># Organizational Unit Name (eg, section) []:</span></pre>
				<pre><span># Common Name (eg, YOUR name) []:MySQL user</span></pre>
				<pre><span># Email Address []:</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Please enter the following &#39;extra&#39; attributes</span></pre>
				<pre><span># to be sent with your certificate request</span></pre>
				<pre><span># A challenge password []:</span></pre>
				<pre><span># An optional company name []:</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Remove a passphrase from the key (optional)</span></pre>
				<pre><span>#</span></pre>
				<pre><span>openssl rsa -in $DIR/client-key.pem -out $DIR/client-key.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Sign client cert</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>openssl ca&nbsp; -policy policy_anything -out $DIR/client-cert.pem \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -config $DIR/openssl.cnf -infiles $DIR/client-req.pem</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span># Sample output:</span></pre>
				<pre><span># Using configuration from /home/monty/openssl/openssl.cnf</span></pre>
				<pre><span># Enter PEM pass phrase:</span></pre>
				<pre><span># Check that the request matches the signature</span></pre>
				<pre><span># Signature ok</span></pre>
				<pre><span># The Subjects Distinguished Name is as follows</span></pre>
				<pre><span># countryName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;FI&#39;</span></pre>
				<pre><span># organizationName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL AB&#39;</span></pre>
				<pre><span># commonName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :PRINTABLE:&#39;MySQL user&#39;</span></pre>
				<pre><span># Certificate is to be certified until Sep 13 16:45:17 2003 GMT</span></pre>
				<pre><span># (365 days)</span></pre>
				<pre><span># Sign the certificate? [y/n]:y</span></pre>
				<pre><span>#</span></pre>
				<pre><span>#</span></pre>
				<pre><span># 1 out of 1 certificate requests certified, commit? [y/n]y</span></pre>
				<pre><span># Write out database with 1 new entries</span></pre>
				<pre><span># Data Base Updated</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>#</span></pre>
				<pre><span># Create a my.cnf file that you can use to test the certificates</span></pre>
				<pre><span>#</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>cnf=&quot;&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf [client]&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-cert=$DIR/client-cert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-key=$DIR/client-key.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf [mysqld]&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-cert=$DIR/server-cert.pem&quot;</span></pre>
				<pre><span>cnf=&quot;$cnf ssl-key=$DIR/server-key.pem&quot;</span></pre>
				<pre><span>echo $cnf | replace &quot; &quot; &#39;</span></pre>
				<pre><span>&#39; &gt; $DIR/my.cnf</span></pre>
				<p>
				<span>
				&nbsp;</span></p>
				<p>要想測試<span>SSL</span>連接，按下面方法啟動伺服器，其中<span>$DIR</span>是示範<span>my.cnf</span>選項檔案安裝的路徑名：</p>
				<pre><span>shell&gt; </span><span  >MySQL<b>d --defaults-file=$DIR/my.cnf &amp;</b></span></pre>
				<p>然後使用相同的選項檔案使用客戶端程式：</p>
				<pre><span>shell&gt; </span><span  >MySQL<b> --defaults-file=$DIR/my.cnf</b></span></pre>
				<p>如果您有<span>MySQL</span>原始碼分發版，還可以修改前面的<span>my.cnf</span>檔案來指向<span>SSL</span>目錄中的示範證書和密鑰檔案來測試您的設置。</p>
				<h4 class="title"><a name="secure-grant"></a>5.8.7.5. SSL GRANT 
				選項</h4></div></div></div><a class="indexterm" name="id2777138"></a><a class="indexterm" name="id2777145"></a><a class="indexterm" name="id2777154"></a>
				<p><span>MySQL</span>可以檢查<span>X509</span>證書的屬性和基於帳號和密碼的通用鑒定方法。要想為<span>MySQL</span>帳號指定<span>SSL</span>相關選項，使用<span>GRANT</span>語句的<span>REQUIRE</span>子句。參見<a href="sql-syntax.html#grant" title="13.5.1.3. GRANT and REVOKE Syntax">13.5.1.3節，「GRANT和REVOKE語法」</a>。</p>
				<p>有多種可能來限制一個帳號的連接類型：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果帳號沒有<span>SSL</span>或<span>X509</span>需求，如果帳號和密碼合法，允許未加密的連接。但是，如果客戶有正確的證書和密鑰檔案，在客戶選項中可以使用加密連接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE SSL</span>選項限制伺服器只允許該帳號的<span>SSL</span>加密連接。請注意如果有<span>ACL</span>記錄允許非<span>SSL</span>連接，該選項會被忽略。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp; </span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39; REQUIRE SSL;</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE X509</span>資料表示客戶必須有合法證書但確切的證書、分發者和主體不重要。唯一的需求是應可以被某個<span>CA</span>認證機構驗證它的簽名。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39; REQUIRE X509;</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE ISSUER &#39;issuer&#39;</span>限制連接企圖，即客戶必須出示<span>CA
				</span>
				<span>&#39;issuer&#39;</span>簽發的合法<span>X509</span>證書。如果客戶出示了一個合法證書，但是是由不同的分發者簽發，伺服器拒絕連接。使用<span>X509</span>證書資料表示要加密，因此不需要<span>SSL</span>選項。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>REQUIRE ISSUER &#39;/C=FI/ST=Some-State/L=Helsinki/</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com&#39;;</span></pre>
				<p>請注意<span>ISSUER</span>值應做為單一字串輸入。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE SUBJECT &#39;subject&#39;</span><span> </span>
				限制連接企圖，即客戶必須出示主題為<span>&#39;subject&#39;</span>的合法<span>X509</span>證書。如果客戶出示了一個合法證書，但是有不同的主題，伺服器拒絕連接。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>REQUIRE SUBJECT &#39;/C=EE/ST=Some-State/L=Tallinn/</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O=MySQL demo client certificate/</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CN=Tonu Samuel/Email=tonu@example.com&#39;;</span></pre>
				<p>請注意<span>SUBJECT</span>值應做為單一字串輸入。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				REQUIRE CIPHER &#39;cipher&#39;</span>用來確保使用足夠強的密碼和密鑰長度。如果使用舊的短加密密鑰算法，<span>SSL</span>本身可能很弱。使用該選項，我們可以索取確切的加密方法來連接。</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>REQUIRE CIPHER &#39;EDH-RSA-DES-CBC3-SHA&#39;;</span></b></span></pre>
				<p>在<span>REQUIRE</span>子句中，可以結合使用<span><span>SUBJECT</span><span>、<span>ISSUER</span></span></span>和<span>CIPHER</span>選項：</p>
				<pre><span>mysql&gt; </span><span><b><span>GRANT ALL PRIVILEGES ON test.* TO &#39;root&#39;@&#39;localhost&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>IDENTIFIED BY &#39;goodsecret&#39;</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>REQUIRE SUBJECT &#39;/C=EE/ST=Some-State/L=Tallinn/</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O=MySQL demo client certificate/</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CN=Tonu Samuel/Email=tonu@example.com&#39;</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -&gt; </span><span><b><span>AND ISSUER &#39;/C=FI/ST=Some-State/L=Helsinki/</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com&#39;</span></pre>
				<pre><span>&nbsp;&nbsp; &nbsp;-&gt; </span><span><b><span>AND CIPHER &#39;EDH-RSA-DES-CBC3-SHA&#39;;</span></b></span></pre>
				<p>請注意<span>SUBJECT</span>和<span>ISSUER</span>值應做為單一字串輸入。</p>
				<p>在<span>MySQL 5.1</span>中<span>,</span>在<span>REQUIRE</span>選項之間可以選用<span>AND</span>關鍵字。</p>
				<p>選項的順序不重要，但任何選項不能用兩次。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssl-options"></a>
				5.8.7.6.&nbsp;SSL命令行選項</h4></div></div></div><a class="indexterm" name="id2777483"></a></div><div class="section"><div class="titlepage"><div><div>
				下面列出了規定<span>SSL</span>、證書檔案和密鑰檔案使用的選項。它們可以位於命令行中或選項檔案中。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl</span></p>
				<p>對於伺服器，該選項規定該伺服器允許<span>SSL</span>連接。對於客戶端程式，它允許客戶使用<span>SSL</span>連接伺服器。單單該選項不足以使用<span>SSL</span>連接。還必須指定<span>--ssl-ca</span>、<span>--ssl-cert</span>和<span>--ssl-key</span>選項。</p>
				<p>通常從反向使用該選項資料表示不應使用<span>SSL</span>。要想實現，將選項指定為<span>--skip-ssl</span>或<span>--ssl=0</span>。</p>
				<p>請注意使用<span>--ssl</span>不<em><span>需要</span></em><span>SSL</span>連接。例如，如果編譯的伺服器或客戶不支援<span>SSL</span>，則使用普通的未加密的連接。</p>
				<p>確保使用<span>SSL</span>連接的安全方式是使用含<span>REQUIRE 
				SSL</span>子句的<span>GRANT</span>語句在伺服器上建立一個帳號。然後使用該帳號來連接伺服器，伺服器和客戶端均應啟用<span>SSL</span>支援。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-ca=<i>file_name</i></span></p>
				<p>含可信<span>SSL CA</span>的清單的檔案的路徑。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-capath=<i>directory_name</i></span></p>
				<p>包含<span>pem</span>格式的可信<span>SSL 
				CA</span>證書的目錄的路徑。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cert=<i>file_name</i></span></p>
				<p><span>SSL</span>證書檔案名，用於建立安全連接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-cipher=<i>cipher_list</i></span></p>
				<p>允許的用於<span>SSL</span>加密的密碼的清單。<span><i><span>cipher_list</span></i></span>的格式與<span>OpenSSL</span><span> 
				ciphers</span>命令相同。</p>
				<p>示範：<span>--ssl-cipher=ALL:-AES:-EXP</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--ssl-key=<i>file_name</i></span></p>
				<p><span>SSL</span>密鑰檔案名，用於建立安全連接。</p>
				<h4 class="title"><a name="windows-and-ssh"></a>
				5.8.7.7.&nbsp;用SSH以遠程方式從Windows連接到MySQL</h4></div></div></div><a class="indexterm" name="id2777700"></a><a class="indexterm" name="id2777706"></a></div></div></div><div class="section"><div class="titlepage"><div><div>
		本節說明如何用<span>SSH</span>安全連接到遠程<span>MySQL</span>伺服器<span>(David 
		Carlson </span>
		<span>&lt;<a  href="mailto:dcarlson@mplcomm.com">dcarlson@mplcomm<span>。</span>com</a>&gt;</span><span>)</span>：<p>
		<span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>主機上安裝<span>SSH</span>客戶端。作為用戶，我所發現的最好的非免費客戶端來自<span><a target="_top"  href="http://www.vandyke.com/">http://www.vandyke.com/</a></span>的<span>SecureCRT</span>。另一個選則是<span><a target="_top"  href="http://www.f-secure.com/">http://www.f-secure.com/</a></span>的<span>f-secure</span>。您還可以從<span><a target="_top"  href="http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/">http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/</a></span><span>
		</span>的<span>Google</span>找到一些免費客戶端。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>啟動<span>Windows SSH</span>客戶端。設置<span>Host_Name 
		= yourmysqlserver_URL_or_IP</span>。設置<span>userid=your_userid</span>以便登錄伺服器。此<span>userid</span>值可以與您的<span>MySQL</span>帳號的帳號不相同。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>設置端口映射。可以進行遠程映射<span>(</span>設置<span>local_port: 
		3306</span><span>, </span>
		<span>remote_host: 
		yourmysqlservername_or_ip</span><span>, </span>
		<span>remote_port: 3306</span><span>)</span>或本地映射<span>(</span>設置<span>port: 
		3306</span><span>, </span>
		<span>host: localhost</span><span>,
		</span><span>remote port: 3306</span><span>)</span>。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>進行保存，否則下次需要重設。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>剛建立的<span>SSH</span>會話登錄伺服器。</p>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>機器上啟動相應<span>ODBC</span>應用程式<span>(</span>例如<span>Access)</span>。</p>
		<p><span>7.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在<span>Windows</span>中建立一個新的檔案按照常用方法通過<span>ODBC</span>驅動程式連結<span>MySQL</span>，不同的是要為<span>MySQL</span>伺服器輸入<span>localhost</span>，而不是<span>yourmysqlservername</span>。</p>
		<p>您應有使用<span>SSH</span>加密的<span>ODBC</span>連接到<span>MySQL</span>。</p>
		<h2 class="title"><a name="disaster-prevention"></a>
		5.9.&nbsp;備份與恢復</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#backup">
			5.9.1. 資料庫備份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-example">
			5.9.2. 示範用備份與恢復策略</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery">
			5.9.3. 自動恢復</a></span></dt><dt><span class="section"><a href="database-administration.html#table-maintenance">
			5.9.4. 資料表維護和崩潰恢復</a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk">
			5.9.5. myisamchk：MyISAM資料表維護實用工具</a></span></dt><dt><span class="section"><a href="database-administration.html#maintenance-schedule">
			5.9.6. 建立資料表維護計劃</a></span></dt><dt><span class="section"><a href="database-administration.html#table-info">
			5.9.7. 獲取關於資料表的訊息</a></span></dt></dl></div>
		<p>本節討論如何進行資料庫備份<span>(</span>完全備份和增量備份<span>)</span>，以及如何執行資料表的維護。本節描述的<span>SQL</span>語句語法參見<a href="database-administration.html">第5章：</a><a href="database-administration.html" title="Chapter 5. Database Administration"><i>資料庫管理</i></a>。此處提供的大多數訊息主要適合<span>MyISAM</span>資料表。<span>InnoDB</span>備份程式參見<a href="storage-engines.html#backing-up" title="15.2.8. Backing Up and Recovering an InnoDB Database">15.2.8節，「InnoDB資料庫的備份和恢復<code class="literal"></code>」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="backup"></a>
			5.9.1.&nbsp;資料庫備份</h3></div></div></div><a class="indexterm" name="id2777931"></a><a class="indexterm" name="id2777941"></a>
			<p>因為<span>MySQL</span>資料表保存為檔案方式，很容易備份。要想保持備份的一致性，對相關資料表執行<span>LOCK 
			TABLES</span>操作，然後對資料表執行<span>FLUSH 
			TABLES</span>。參見<a href="sql-syntax.html#lock-tables" title="13.4.5. LOCK TABLES and UNLOCK TABLES Syntax">13.4.5節，「LOCK 
		TABLES和UNLOCK TABLES語法」</a>和<a href="sql-syntax.html#flush" title="13.5.5.2. FLUSH Syntax">13.5.5.2節，「FLUSH語法」</a>。您只需要讀鎖定；這樣當您複製資料庫目錄中的檔案時，允許其它客戶繼續查詢資料表。需要<span>FLUSH 
			TABLES</span>語句來確保開始備份前將所有激活的索引頁寫入硬盤。</p>
			<p>如果您想要進行<span>SQL</span>級別的資料表備份，您可以使用<span>SELECT 
			INTO ...OUTFILE</span>或<span>BACKUP 
			TABLE</span>。對於<span>SELECT 
			INTO ...OUTFILE</span>， 輸出的檔案不能先存在。對於<span>BACKUP 
			TABLE</span>也如此，因為覆蓋完整的檔案會有安全風險。參見<a href="sql-syntax.html#select" title="13.2.7. SELECT Syntax">13.2.7節，「SELECT語法」</a>和<a href="sql-syntax.html#backup-table" title="13.5.2.2. BACKUP TABLE Syntax">13.5.2.2節，「BACKUP 
		TABLE語法」</a>。</p>
			<p>備份資料庫的另一個技術是使用<strong><span>mysqldump</span></strong>程式或<strong><span>mysqlhotcopy</span></strong><b>指令</b>。參見<a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8節，「mysqldump：資料庫備份程式」</a>和<a href="client-side-scripts.html#mysqlhotcopy" title="8.9. mysqlhotcopy — A Database Backup Program">8.9節，「mysqlhotcopy：資料庫備份程式」</a>。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>完全備份資料庫：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>mysqldump --tab=<i>/path/to/some/dir</i> --opt <i>db_name</i></span></b></span></pre>
			<p>或：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysqlhotcopy <i>db_name</i> <i>/path/to/some/dir</i></span></b></span></pre>
			<p>只要伺服器不再進行更新，還可以只複製所有資料表檔案<span>(</span><span><span>*.frm</span><span>、<span>*.MYD</span></span></span>和<span>*.MYI</span>檔案<span>)</span>。<strong><span>mysqlhotcopy</span></strong>指令使用該方法。<span>(</span>但請注意如果資料庫包含<span>InnoDB</span>資料表，這些方法不工作。<span>InnoDB</span>不將資料表的內容保存到資料庫目錄中，<strong><span>mysqlhotcopy</span></strong>只適合<span>MyISAM</span>資料表）<span>。
			</span></p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果<strong><span>mysqld</span></strong>在運行則停止，然後用<span>--log-bin[=file_name]</span>選項來啟動。參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。二進制日誌檔案中提供了<span>&nbsp; </span>執行<strong><span>mysqldump</span></strong>之後對資料庫的更改進行複製所需要的訊息。</p>
			<p>對於<span>InnoDB</span>資料表，可以進行線上備份，不需要對資料表進行鎖定；參見<a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8節，「mysqldump：資料庫備份程式」</a>。</p>
			<p><span>MySQL</span>支援增量備份<span>:</span>需要用<span>--log-bin</span>選項來啟動伺服器以便啟用二進制日誌；參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。當想要進行增量備份時<span>(</span>包含上一次完全備份或增量備份之後的所有更改<span>)</span>，應使用<span>FLUSH 
			LOGS</span>回滾二進制日誌。然後，您需要將從最後的完全或增量備份的某個時刻到最後某個點的所有二進制日誌複製到備份位置。這些二進制日誌為增量備份；<span>恢復時，按照下面的解釋應用。下次進行完全備份時，還應使用</span><span  >FLUSH 
			LOGS</span>或<span  >mysqlhotcopy 
			--flushlogs</span><span>回滾二進制日誌。參見</span><a href="client-side-scripts.html#mysqldump" title="8.8. mysqldump — A Database Backup Program">8.8節，「mysqldump：資料庫備份程式」</a><span>和</span><a href="client-side-scripts.html#mysqlhotcopy" title="8.9. mysqlhotcopy — A Database Backup Program">8.9節，「mysqlhotcopy：資料庫備份程式」</a><span>。</span></p>
			<p>如果<span>MySQL</span>伺服器為從複製伺服器，則無論選擇什麼備份方法，當備份從機數據時，還應備份<span>master.info</span>和<span>relay-log.info</span>檔案。恢復了從機數據後，需要這些檔案來繼續複製。如果從機執行複製<span>LOAD 
			DATA INFILE</span>命令，您應還備份用<span>--slave-load-tmpdir</span>選項指定的目錄中的<span>SQL_LOAD-*</span>檔案。<span>(</span>如果未指定，該位置預設為<span>tmpdir</span>變數值）<span>。</span>從機需要這些檔案來繼續複製中斷的<span>LOAD 
			DATA INFILE</span>操作。</p>
			<p>如果必須恢復<span>MyISAM</span>資料表，先使用<span>REPAIR 
			TABLE</span>或<strong><span>myisamchk 
			-r</span></strong>來恢復。<span>99.9%</span>的情況下該方法可以工作。如果<strong><span>myisamchk</span></strong>失敗，試試下面的方法。請注意只有用<span>--log-bin</span>選項啟動了<span>MySQL</span>從而啟用二進制日誌它才工作；參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>恢復原<strong><span>mysqldump</span></strong>備份，或二進制備份。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>執行下面的命令重新更新二進制日誌：</p>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>mysqlbinlog hostname-bin.[0-9]* | mysql</span></b></span></pre>
			<p>在某些情況下，您可能只想要從某個位置重新運行某些二進制日誌。<span>(</span>通常您想要從恢復備份的日期重新運行所有二進制日誌，查詢不正確時例外<span>)</span>。關於<strong><span>mysqlbinlog</span></strong>工具和如何使用它的詳細訊息參見<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6節，「mysqlbinlog：用於處理二進制日誌檔案的實用工具」</a>。</p>
			<p>還可以對具體檔案進行選擇備份：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想複製資料表，使用<span>SELECT 
			* INTO OUTFILE &#39;<i>file_name</i>&#39; FROM <i>tbl_name</i></span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想重載資料表，使用<span>LOAD 
			DATA INFILE &#39;file_name&#39; REPLACE ...</span>並恢復。要避免複製記錄，資料表必須有<span>PRIMARY 
			KEY</span>或一個<span>UNIQUE</span>索引。當新記錄複製唯一鍵值的舊記錄時，<span>REPLACE</span>關鍵字可以將舊記錄替換為新記錄。</p>
			<p>如果備份時遇到伺服器性能問題，可以有幫助的一個策略是在從伺服器而不是主伺服器上建立複製並執行備份。參見<a href="replication.html#replication-intro" title="6.1. Introduction to Replication">6.1節，「複製介紹」</a>。</p>
			<p>如果使用<span>Veritas</span>檔案系統，可以這樣備份：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從客戶端程式執行<span>FLUSH 
			TABLES WITH READ LOCK</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從另一個<span>shell</span>執行<span>mount 
			vxfs snapshot</span>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從第一個客戶端執行<span>UNLOCK 
			TABLES</span>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從快照複製檔案。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>卸載快照。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="backup-strategy-example"></a>
			5.9.2.&nbsp;示範用備份與恢復策略</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#backup-policy">
				5.9.2.1. 備份策略</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-recovery">
				5.9.2.2. 為恢復進行備份</a></span></dt><dt><span class="section"><a href="database-administration.html#backup-strategy-summary">
				5.9.2.3. 備份策略摘要</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本節討論進行備份的程式，在出現崩潰後，可以恢復數據：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>作業系統崩潰 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>電源故障 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>檔案系統崩潰 </p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>硬件問題<span>(</span>硬盤、母板等等<span>)
				</span></p>
				<p>該命令不包括<strong><span>mysqldump</span></strong>和<strong><span>mysql</span></strong>程式的<span>--user</span>和<span><span>—</span><span>password</span></span>等選項。應包括必要的選項讓<span>MySQL</span>伺服器允許您連接它。</p>
				<p>我們假定數據保存在<span>MySQL</span>的<span>InnoDB</span>儲存引擎中，支援事務和自動崩潰恢復。我們假定崩潰時<span>MySQL</span>伺服器帶負載。如果不帶負載，則不需要恢復。</p>
				<p>出現作業系統崩潰或電源故障時，我們可以假定重啟後硬盤上的<span>MySQL</span><span style="font-family:  MS Mincho">ś</span>數據仍可用。由於崩潰，<span>InnoDB</span>數據檔案中的數據可能不再保持一致性，但<span>InnoDB</span>讀取它的日誌並會查到掛起的提交的和未提交的事務清單，它們沒有清空到數據檔案中。<span>InnoDB</span>自動捲回未提交的事務，並清空到它的數據檔案中。通過<span>MySQL</span>錯誤日誌將該恢復過程相關訊息傳達給用戶。下面的例子為日誌摘錄：</p>
				<pre><span>InnoDB: Database was not shut down normally.</span></pre>
				<pre><span>InnoDB: Starting recovery from log files...</span></pre>
				<pre><span>InnoDB: Starting log scan based on checkpoint at</span></pre>
				<pre><span>InnoDB: log sequence number 0 13674004</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13739520</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13805056</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13870592</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 13936128</span></pre>
				<pre><span>...</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20555264</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20620800</span></pre>
				<pre><span>InnoDB: Doing recovery: scanned up to log sequence number 0 20664692</span></pre>
				<pre><span>InnoDB: 1 uncommitted transaction(s) which must be rolled back</span></pre>
				<pre><span>InnoDB: Starting rollback of uncommitted transactions</span></pre>
				<pre><span>InnoDB: Rolling back trx no 16745</span></pre>
				<pre><span>InnoDB: Rolling back of trx no 16745 completed</span></pre>
				<pre><span>InnoDB: Rollback of uncommitted transactions completed</span></pre>
				<pre><span>InnoDB: Starting an apply batch of log records to the database...</span></pre>
				<pre><span>InnoDB: Apply batch completed</span></pre>
				<pre><span>InnoDB: Started</span></pre>
				<pre><span>mysqld: ready for connections</span></pre>
				<p>如果檔案系統崩潰或出現硬件問題，我們可以假定重啟後硬盤上的<span>MySQL</span><span style="font-family:  MS Mincho">ś</span>數據不可用。這說明<span>MySQL</span>未能成功啟動，因為一些硬盤數據塊不再可讀。在這種情況下，需要重新格式化硬盤，安裝一個新的，或糾正問題。然後需要從備份中恢復<span>MySQL</span>數據，這說明我們必須先做好備份。要想確保，應及時返回並設計備份策略。</p>
				<h4 class="title"><a name="backup-policy"></a>5.9.2.1.&nbsp;備份策略</h4></div></div></div>
				<p>我們都知道必須按計劃定期進行備份。可以用幾個工具完全備份<span>(</span>在某個時間點的數據快照<span>)MySQL</span>。例如，<span>InnoDB 
				Hot Backup</span>為<span>InnoDB</span>數據檔案提供線上非數據塊物理備份，<strong><span>mysqldump</span></strong>提供線上邏輯備份。這裡使用<strong><span>mysqldump</span></strong>。</p>
				<p>假定我們在星期日下午<span>1</span>點進行了備份，此時負荷較低。下面的命令可以完全備份所有資料庫中的所有<span>InnoDB</span>資料表：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --all-databases &gt; backup_sunday_1_PM.sql</span></b></span></pre>
				<p>這是線上非塊備份，不會干擾對資料表的讀寫。<span>我們以前假定我們的資料表為</span><span  >InnoDB</span><span>資料表，因此</span><span  >--single-transaction</span><span>使用一致性地讀，並且保證</span><strong><span>mysqldump</span></strong>所看見的<span>數據不會更改。<span>(</span>其它客戶端對</span><span  >InnoDB</span><span>資料表進行的更改不會被</span><strong><span>mysqldump</span></strong><span>程序看見）<span>。</span>如果我們還有其它類型的資料表，我們必須假定在備份過程中它們不會更改。例如，對於</span><span  >mysql</span><span>資料庫中的</span><span  >MyISAM</span>資料表<span>，我們必須假定在備份過程中沒有對<span>MySQL</span>帳號進行管理更改。</span></p>
				<p><strong><span>mysqldump</span></strong>命令產生的<span>.sql</span>檔案包含一系列<span>SQL
				</span><span>INSERT</span>語句，可以用來重載轉儲的資料表。</p>
				<p>
				需要進行完全備份，但有時不方便。會產生大的備份檔案並需要花時間來生成。從某個角度，完全備份並不理想，因為每個成功的完全備份包括所有數據，甚至自從上一次完全備份以來沒有更改的部分。完成了初使完全備份後，進行增量備份會更有效。這樣備份檔案要小得多，備份時間也較短。不利之處是，恢復時不能只重載完全備份來恢復數據。還必須要用增量備份來恢復增量更改。</p>
				<p>要想進行增量備份，我們需要保存增量更改。應使用<span>--log-bin</span>選項啟動<span>MySQL</span>伺服器，以便更新數據時將這些更改保存到檔案中。該選項啟用二進制日誌，因此伺服器寫將每個更新數據的<span>SQL</span>語句寫入<span>MySQL</span>二進制日誌。讓我們看看用<span>--log-bin</span>選項啟動的已經運行多日的<span>MySQL</span>伺服器的數據目錄。我們找到以下<span>MySQL</span>二進制日誌檔案：</p>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp; 1277324 Nov 10 23:59 gbichot2-bin.000001</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 Nov 10 23:59 gbichot2-bin.000002</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 79 Nov 11 11:06 gbichot2-bin.000003</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 508 Nov 11 11:08 gbichot2-bin.000004</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem 220047446 Nov 12 16:47 gbichot2-bin.000005</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp; 998412 Nov 14 10:08 gbichot2-bin.000006</span></pre>
				<pre><span>-rw-rw---- 1 guilhem&nbsp; guilhem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 361 Nov 14 10:07 gbichot2-bin.index</span></pre>
				<p>每次重啟，<span>MySQL</span>伺服器用序列中的下一個編號建立一個新的二進制日誌檔案。當伺服器運行時，您還可以通過執行<span>FLUSH 
				LOGS</span><span> SQL</span>語句或<strong><span>mysqladmin 
				flush-logs</span></strong>命令，告訴伺服器關閉當前的二進制日誌檔案並建立一個新檔案。<strong><span>mysqldump</span></strong>也有一個選項來清空日誌。數據目錄中的<span>.index</span>檔案包含該目錄下所有<span>MySQL</span>二進制日誌的清單。該檔案用於複製。</p>
				<p>恢復時<span>MySQL</span>二進制日誌很重要，因為它們是增量備份。如果進行完全備份時確保清空了日誌，則後面建立的二進制日誌檔案包含了備份後的所有數據更改。讓我們稍稍修改前面的<strong><span>mysqldump</span></strong>命令，讓它在完全備份時能夠清空<span> 
				MySQL</span>二進制日誌，以便轉儲檔案包含包含新的當前的二進制日誌：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --flush-logs --master-data=2</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --all-databases &gt; backup_sunday_1_PM.sql</span></pre>
				<p>執行該命令後，數據目錄則包含新的二進制日誌檔案，<span>gbichot2-bin.000007</span>。結果<span>.sql</span>檔案包含下列行：</p>
				<pre><span>-- Position to start replication or point-in-time </span>恢復時<span>y from</span></pre>
				<pre><span>-- CHANGE MASTER TO MASTER_LOG_FILE=&#39;gbichot2-bin.000007&#39;,MASTER_LOG_POS=4;</span></pre>
				<p>因為<strong><span>mysqldump</span></strong>命令可以執行完全備份，這些行資料表示兩件事情：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>.sql</span>檔案包含所有寫入<span>gbichot2-bin.000007</span>二進制日誌檔案或最新的檔案之前的更改。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>備份後所記錄的所有數據更改不出現在<span>.sql</span>中，但出現在<span>gbichot2-bin.000007</span>二進制日誌檔案或最新的檔案中。</p>
				<p>在星期一下午<span>1</span>點，我們可以清空日誌開始新的二進制日誌檔案來建立增量備份。例如，執行<strong><span>mysqladmin 
				flush-logs</span></strong>命令建立<span>gbichot2-bin.000008</span>。星期日下午<span>1</span>點的完全備份和星期一下午<span>1</span>點之間的所有更改為檔案<span>gbichot2-bin.000007</span>。該增量備份很重要，因此最好將它複製到安全的地方。<span>(</span>例如，備份到磁帶或<span>DVD</span>上，或複製到另一台機器上）<span>。</span>在星期二下午<span>1</span>點，執行另一個<strong><span>mysqladmin 
				flush-logs</span></strong>命令。星期一下午<span>1</span>點和星期二下午<span>1</span>點之間的所有所有更改為檔案<span>gbichot2-bin.000008</span><span>(</span>也應複製到某個安全的地方<span>)</span>。</p>
				<p><span>MySQL</span>二進制日誌佔據硬盤空間。要想釋放空間，應隨時清空。操作方法是刪掉不再使用的二進制日誌，例如進行完全備份時：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqldump --single-transaction --flush-logs --master-data=2</span></b></span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --all-databases --delete-master-logs &gt; backup_sunday_1_PM.sql</span></pre>
				<p><strong><span>注</span></strong>釋：如果您的伺服器為複製主伺服器，用<strong><span>mysqldump 
				--delete-master-logs</span></strong>刪掉<span>MySQL</span>二進制日誌很危險，因為從伺服器可能還沒有完全處理該二進制日誌的內容。</p>
				<p><span>PURGE MASTER 
				LOGS</span>語句的描述中解釋了為什麼在刪掉<span>MySQL</span>二進制日誌之前應進行確認。參見<a href="sql-syntax.html#purge-master-logs" title="13.6.1.1. PURGE MASTER LOGS Syntax">13.6.1.1節，「PURGE 
			MASTER LOGS語法」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="backup-recovery"></a>
				5.9.2.2.&nbsp;為恢復進行備份</h4></div></div></div>
				<p>現在假設在星期三上午<span>8</span>點出現了災難性崩潰，需要使用備份檔案進行恢復。恢復時，我們首先恢復最後的完全備份<span>(</span>從星期日下午<span>1</span>點開始<span>)</span>。完全備份檔案是一系列<span>SQL</span>語句，因此恢復它很容易：</p>
				<pre><span>shell&gt; </span><span><b><span>mysql &lt; backup_sunday_1_PM.sql</span></b></span></pre>
				<p>在該點，數據恢復到星期日下午<span>1</span>點的狀態。要想恢復從那時起的更改，我們必須使用增量備份，也就是，<span>gbichot2-bin.000007</span>和<span>gbichot2-bin.000008</span>二進制日誌檔案。根據需要從備份處取過這些檔案，然後按下述方式處理：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqlbinlog gbichot2-bin.000007 gbichot2-bin.000008 | mysql</span></b></span></pre>
				<p>我們現在將數據恢復到星期二下午<span>1</span>點的狀態，但是從該時刻到崩潰之間的數據仍然有丟失。要想恢復，我們需要<span>MySQL</span>伺服器將<span>MySQL</span>二進制日誌保存到安全的位置<span>(RAID 
				disks, SAN, ...)</span>，應為與數據檔案的保存位置不同的地方，保證這些日誌不在毀壞的硬盤上。<span>(</span>也就是，我們可以用<span>--log-bin</span>選項啟動伺服器，指定一個其它物理設備上的與數據目錄不同的位置。這樣，即使包含該目錄的設備丟失，日誌也不會丟失）<span>。</span>如果我們執行了這些操作，我們手頭上會有<span>gbichot2-bin.000009</span>檔案，我們可以用它來恢復大部分最新的數據更改，而不會丟失到崩潰時的數據。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="backup-strategy-summary"></a>
				5.9.2.3.&nbsp;備份策略摘要</h4></div></div></div>
				<p>出現作業系統崩潰或電源故障時，<span>InnoDB</span>自己可以完成所有數據恢復工作。但為了確保您可以睡好覺，應遵從下面的指導：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>一定用<span>--log-bin</span>或甚至<span>--log-bin=<i>log_name</i></span>選項運行<span>MySQL</span>伺服器，其中日誌檔案名位於某個安全媒介上，不同於數據目錄所在驅動器。如果您有這樣的安全媒介，最好進行硬盤負載均衡<span>(</span>這樣能夠提高性能<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>定期進行完全備份，使用<strong><span>mysqldump</span></strong>命令進行線上非塊備份。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>FLUSH</span><span> 
				LOGS</span>或<strong><span>mysqladmin 
				flush-logs</span></strong>清空日誌進行定期增量備份。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="point-in-time-recovery"></a>
			5.9.3.&nbsp;自動恢復</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#point-in-time-recovery-times">
				5.9.3.1. 指定恢復時間</a></span></dt><dt><span class="section"><a href="database-administration.html#point-in-time-recovery-positions">
				5.9.3.2. 指定恢復位置</a></span></dt></dl></div><a class="indexterm" name="id2779136"></a><a class="indexterm" name="id2779143"></a>
			<p>如果<span>MySQL</span>伺服器啟用了二進制日誌，您可以使用<strong><span>mysqlbinlog</span></strong>工具來恢復從指定的時間點開始<span> 
			(</span>例如，從您最後一次備份<span>)</span>直到現在或另一個指定的時間點的數據。關於啟用二進制日誌的訊息，參見<a href="database-administration.html#binary-log" title="5.11.3. The Binary Log">5.11.3節，「二進制日誌」</a>。對於<strong><span>mysqlbinlog</span></strong>的詳細訊息，參見<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6節，「mysqlbinlog：用於處理二進制日誌檔案的實用工具」</a>。</p>
			<p>要想從二進制日誌恢復數據，您需要知道當前二進制日誌檔案的路徑和檔案名。一般可以從選項檔案<span>(</span>即<span>my.cnf</span><span> 
			or </span><span>my.ini</span>，取決於您的系統<span>)</span>中找到路徑。如果未包含在選項檔案中，當伺服器啟動時，可以在命令行中以選項的形式給出。啟用二進制日誌的選項為<span>--log-bin</span>。要想確定當前的二進制日誌檔案的檔案名，輸入下面的<span>MySQL</span>語句：</p>
			<pre><span>SHOW BINLOG EVENTS \G</span></pre>
			<p>您還可以從命令行輸入下面的內容：</p>
			<pre><span>mysql --user=</span><span><i><span>root</span></i></span><span> -p</span><span><i><span>my_pwd</span></i></span><span> -e &#39;SHOW BINLOG EVENTS \G&#39;</span></pre>
			<p>將密碼<span><i><span>my_pwd</span></i></span>替換為伺服器的<span><i><span>root</span></i></span>密碼。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="point-in-time-recovery-times"></a>
				5.9.3.1.&nbsp;指定恢復時間</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				對於<span>MySQL 4.1.4</span>，可以在<strong><span>mysqlbinlog</span></strong>語句中通過<span>--start-date</span>和<span>--stop-date</span>選項指定<span>DATETIME</span>格式的起止時間。舉例說明，假設在今天上午<span>10:00(</span>今天是<span>2005</span>年<span>4</span>月<span>20</span>日<span>)</span>，執行<span>SQL</span>語句來刪除一個大資料表。要想恢復資料表和數據，您可以恢復前晚上的備份，並輸入：<pre><span>mysqlbinlog --stop-date=&quot;2005-04-20 9:59:59&quot; /var/log/mysql/bin.123456 \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span></pre>
				<p>該命令將恢復截止到在<span>--stop-date</span>選項中以<span>DATETIME</span>格式給出的日期和時間的所有數據。如果您沒有檢測到幾個小時後輸入的錯誤的<span>SQL</span>語句，可能您想要恢復後面發生的活動。根據這些，您可以用起使日期和時間再次運行<strong><span>mysqlbinlog</span></strong>：</p>
				<pre><span>mysqlbinlog --start-date=&quot;2005-04-20 10:01:00&quot; /var/log/mysql/bin.123456 \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> \</span></pre>
				<p>在該行中，從上午<span>10:01</span>登錄的<span>SQL</span>語句將運行。組合執行前夜的轉儲檔案和<strong><span 
>mysqlbinlog</span></strong>的兩行可以將所有數據恢復到上午<span>10:00</span>前一秒鐘。您應檢查日誌以確保時間確切。下一節介紹如何實現。</p>
				<h4 class="title"><a name="point-in-time-recovery-positions"></a>
				5.9.3.2.&nbsp;指定恢復位置</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			也可以不指定日期和時間，而使用<strong><span>mysqlbinlog</span></strong>的選項<span>--start-position</span>和<span>--stop-position</span>來指定日誌位置。它們的作用與起止日選項相同，不同的是給出了從日誌起的位置號。使用日誌位置是更準確的恢復方法，特別是當由於破壞性<span>SQL</span>語句同時發生許多事務的時候。要想確定位置號，可以運行<strong><span>mysqlbinlog</span></strong>尋找執行了不期望的事務的時間範圍，但應將結果重新指向文本檔案以便進行檢查。操作方法為：<pre><span>mysqlbinlog --start-date=&quot;2005-04-20 9:55:00&quot; --stop-date=&quot;2005-04-20 10:05:00&quot; \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/log/mysql/bin.123456 &gt; /tmp/mysql_restore.sql</span></pre>
			<p>該命令將在<span>/tmp</span>目錄建立小的文本檔案，將顯示執行了錯誤的<span>SQL</span>語句時的<span>SQL</span>語句。您可以用文本編輯器打開該檔案，尋找您不要想重複的語句。如果二進制日誌中的位置號用於停止和繼續恢復操作，應進行註釋。用<span>log_pos</span>加一個數字來標記位置。使用位置號恢復了以前的備份檔案後，您應從命令行輸入下面內容：</p>
			<pre><span>mysqlbinlog --stop-position=&quot;368312&quot; /var/log/mysql/bin.123456 \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> </span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>mysqlbinlog --start-position=&quot;368315&quot; /var/log/mysql/bin.123456 \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; | mysql -u </span><span><i><span>root</span></i></span><span> -p</span><span><i><span>mypwd</span></i></span><span> \ </span></pre>
			<p>上面的第<span>1</span>行將恢復到停止位置為止的所有事務。下一行將恢復從給定的起始位置直到二進制日誌結束的所有事務。因為<strong><span>mysqlbinlog</span></strong>的輸出包括每個<span>SQL</span>語句記錄之前的<span>SET 
			TIMESTAMP</span>語句，恢復的數據和相關<span>MySQL</span>日誌將反應事務執行的原時間。</p>
			<h3 class="title"><a name="table-maintenance"></a>
			5.9.4.&nbsp;資料表維護和崩潰恢復</h3></div></div></div>
			<p>後面幾節討論如何使用<strong><span 
>myisamchk</span></strong>來檢查或維護<span>MyISAM</span>資料表<span>(</span>對應<span>.MYI</span>和<span>.MYD</span>檔案的資料表<span>)</span>。</p>
			<p>您可以使用<span><b><span>myisamchk</span></b></span>實用程式來獲得有關您的資料庫資料表的訊息或檢查、修復、最佳化他們。下列小節描述如何使用<span><b><span>myisamchk</span></b></span>（包括它的選項的描述），如何建立資料表的維護計劃，以及如何使用<span><b><span>myisamchk</span></b></span>執行各種功能。</p>
			<p>儘管用<strong><span>myisamchk</span></strong>修復資料表很安全，在修復<span>(</span>或任何可以大量更改資料表的維護操作<span>)</span>之前先進行備份<em><span>也是很好的習慣</span></em>
			</p>
			<p>影響索引的<strong><span 
>myisamchk</span></strong>操作會使<span>ULLTEXT</span>索引用<span>full-text</span>參數重建，不再與<span>MySQL</span>伺服器使用的值兼容。要想避免，請閱讀<a href="database-administration.html#myisamchk-general-options" title="5.9.5.1. General Options for myisamchk">5.9.5.1節，「用於myisamchk的一般選<span><strong class="command">項</strong></span>」</a>的說明。</p>
			<p>在許多情況下，您會發現使用<span>SQL</span>語句實現<span>MyISAM</span>資料表的維護比執行<strong><span 
>myisamchk</span></strong>操作要容易地多：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想檢查或維護<span>MyISAM</span>資料表，使用<span>CHECK 
			TABLE</span>或<span>REPAIR 
			TABLE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想最佳化<span>MyISAM</span>資料表，使用<span>OPTIMIZE 
			TABLE</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>要想分析<span>MyISAM</span>資料表，使用<span>ANALYZE 
			TABLE</span>。</p>
			<p>可以直接這些語句，或使用<strong><span>mysqlcheck</span></strong>客戶端程式，可以提供命令行接口。</p>
			<p>這些語句比<strong><span 
>myisamchk</span></strong>有利的地方是伺服器可以做任何工作。使用<strong><span>myisamchk</span></strong>，您必須確保伺服器在同一時間不使用資料表。否則，<strong><span>myisamchk</span></strong>和伺服器之間會出現不期望的相互干涉。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="myisamchk"></a>
			5.9.5.&nbsp;myisamchk：MyISAM資料表維護實用工具</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#myisamchk-general-options">
				5.9.5.1. 用於myisamchk的一般選<span><strong class="command">項</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-check-options">
				5.9.5.2. 用於myisamchk的檢<span><strong class="command">查選項</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-repair-options">
				5.9.5.3. myisamchk的修復選項<span><strong class="command"></strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-other-options">
				5.9.5.4. 用於myisamchk的其<span><strong class="command">它選項</strong></span></a></span></dt><dt><span class="section"><a href="database-administration.html#myisamchk-memory">5.9.5.5. <span><strong class="command">
				myisamchk</strong></span>內存使用</a></span></dt><dt><span class="section"><a href="database-administration.html#crash-recovery">
				5.9.5.6. 將myisa<span><strong class="command">mchk用於崩潰恢</strong></span>復</a></span></dt><dt><span class="section"><a href="database-administration.html#check">
				5.9.5.7. 如何檢查MyISAM資料表的錯誤</a></span></dt><dt><span class="section"><a href="database-administration.html#repair">
				5.9.5.8. 如何修復資料表</a></span></dt><dt><span class="section"><a href="database-administration.html#table-optimization">
				5.9.5.9. 資料表最佳化</a></span></dt></dl></div>
			<p>可以使用<span><b><span>myisamchk</span></b></span>實用程式來獲得有關資料庫資料表的訊息或檢查、修復、最佳化他們。<strong><span>myisamchk</span></strong>適用<span>MyISAM</span>資料表<span>(</span>對應<span>.MYI</span>和<span>.MYD</span>檔案的資料表<span>)</span>。</p>
			<p>使用<strong><span>myisamchk</span></strong>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk [<i>options</i>] <i>tbl_name</i> ...</span></b></span></pre>
			<p><span><i><span>options</span></i></span>指定您想讓<strong><span 
>myisamchk</span></strong>做什麼。在後面描述它們。還可以通過使用<span><b><span>myisamchk 
			--help</span></b></span>得到選項列資料表。</p>
			<p>
			<span><i><span>tbl_name</span></i></span>是您想要檢查或修復的資料庫資料表。如果您不在資料庫目錄的某處運行<span><b><span>myisamchk</span></b></span>，您必須指定資料庫目錄的路徑，因為<span><b><span>myisamchk</span></b></span>不知道您的資料庫位於哪兒。實際上，<span><b><span>myisamchk</span></b></span>不在乎您正在操作的檔案是否位於一個資料庫目錄；您可以將對應於資料庫資料表的檔案拷貝到別處並且在那裡執行恢復操作。</p>
			<p>如果您願意，可以用<span><b><span>myisamchk</span></b></span>命令行命名幾個資料表。還可以通過命名索引檔案<span>(</span>用<tt>「<span> 
			.MYI</span>」</tt>後綴<span>)</span>來指定一個資料表。它允許您通過使用模式<tt >「<span>*.MYI</span>」<span>指定</span></tt>在一個目錄所有的資料表。例如，如果您在資料庫目錄，可以這樣在目錄下檢查所有的<span>MyISAM</span>資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk *.MYI</span></b></span></pre>
			<p>如果您不在資料庫目錄下，可通過指定到目錄的路徑檢查所有在那裡的資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk /path/to/database_dir/*.MYI</span></b></span></pre>
			<p>您甚至可以通過為<strong><span>MySQL</span></strong>數據目錄的路徑指定一個通配符來檢查所有的資料庫中的所有資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk /path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>推薦的快速檢查所有<span>MyISAM</span>資料表的方式是：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk --silent --fast /path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>如果您想要檢查所有<span>MyISAM</span>資料表並修復任何破壞的資料表，可以使用下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>myisamchk --silent --force --fast --update-state \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>-O key_buffer=64M -O sort_buffer=64M \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>-O read_buffer=1M -O write_buffer=1M \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>/path/to/datadir/*/*.MYI</span></b></span></pre>
			<p>該命令假定您有大於<span>64MB</span>的自由內存。關於用<strong><span>myisamchk</span></strong>分配內存的詳細訊息，參見<a href="database-administration.html#myisamchk-memory" title="5.9.5.5. myisamchk Memory Usage">5.9.5.5節，「<span><strong class="command">myisamchk</strong></span>內存使用」</a>。</p>
			<p>當您運行<strong><span>myisamchk</span></strong>時，必須確保其它程式不使用資料表。否則，當您運行<strong><span>myisamchk</span></strong>時，會顯示下面的錯誤消息：</p>
			<pre><span>warning: clients are using or haven&#39;t closed the table properly</span></pre>
			<p>這說明您正嘗試檢查正被另一個還沒有關閉檔案或已經終止而沒有正確地關閉檔案的程式<span>(</span>例如<strong><span>mysqld</span><span>伺服器</span></strong><span>)</span>更新的資料表。</p>
			<p>如果<strong><span>mysqld</span></strong>正在運行，您必須通過<span>FLUSH 
			TABLES</span>強制清空仍然在內存中的任何資料表修改。當您運行<strong><span>myisamchk</span></strong>時，必須確保其它程式不使用資料表。避免該問題的最容易的方法是使用<span>CHECK 
			TABLE</span>而不用<strong><span>myisamchk</span></strong>來檢查資料表。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-general-options"></a>
				5.9.5.1.&nbsp;用於myisamchk的一般選<span><strong class="command">項</strong></span></h4></div></div></div><a class="indexterm" name="id2779929"></a><a class="indexterm" name="id2779940"></a>
				<p>本節描述的選項可以用於用<strong><span>myisamchk</span></strong>執行的任何類型的資料表維護操作。本節後面的章節中描述的選項只適合具體操作，例如檢查或修復資料表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--help</span>，<span>-?</span><span>
				</span></p>
				<p>顯示幫助消息並退出。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--debug=<i>debug_options</i>, -# <i>debug_options</i></span></p>
				<p>輸出調試記錄檔案。<span><i><span>debug_options</span></i></span>字串經常是<span>&#39;d:t:o,<i>filename</i>&#39;</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--silent</span>，<span>-s</span></p>
				<p>沉默模式。僅當發生錯誤時寫輸出。您能使用<span>-s</span>兩次<span>(</span><span>-ss</span><span>)</span>使<span><b><span>myisamchk</span></b></span>沉默。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--verbose</span>，<span>-v</span></p>
				<p>冗長模式。打印更多的訊息。這能與<span>-d</span>和<span>-e</span>一起使用。為了更冗長，使用<span>-v</span>多次<span>(</span><span>-vv</span><span>,
				</span><span>-vvv</span><span>)</span>！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--version</span><span>, </span>
				<span>-V</span></p>
				<p>顯示版本訊息並退出。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--wait</span><span>, </span>
				<span>-w</span></p>
				<p>
				如果資料表被鎖定，不是提示錯誤終止，而是在繼續前等待到資料表被解鎖。請注意如果用<span>--skip-external-locking</span>選項運行<b><span>mysqld</span></b>，只能用另一個<strong><span>myisamchk</span></strong>命令鎖定資料表。</p>
				<p>還可以通過<span>--<i>var_name</i>=<i>value</i></span>選項設置下面的變數：</p>
				<table border="1" cellpadding="0" id="table16">
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p><strong>
						<span>變數</span></strong></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><strong>
						<span>預設值</span></strong></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>decode_bits</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>9</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_max_word_len</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p>取決於版本</td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_min_word_len</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>4</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>ft_stopword_file</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p>內建列資料表</td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>key_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>523264</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>myisam_block_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>1024</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>read_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>262136</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>sort_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>2097144</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>sort_key_blocks</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>16</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>stats_method</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>nulls_unequal</span></td>
					</tr>
					<tr>
						<td width="175" style="width:131.25pt;padding:.75pt .75pt .75pt .75pt">
						<p>
						<span>write_buffer_size</span></td>
						<td width="154" style="width:115.85pt;padding:.75pt .75pt .75pt .75pt">
						<p><span>262136</span></td>
					</tr>
				</table>
				<p>可以用<strong><span>myisamchk 
				--help</span></strong>檢查<strong><span>myisamchk</span></strong>變數及其
				預設值：</p>
				<p>當用排序鍵值修復鍵值時使用<span>sort_buffer_size</span>，使用<span>--recover</span>時這是很普通的情況。</p>
				<p>當用<span>--extend-check</span>檢查資料表或通過一行一行地將鍵值插入資料表中<span>(</span>如同普通插入<span>)</span>來修改鍵值時使用<span>Key_buffer_size</span>。在以下情況通過鍵值緩衝區進行修復：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>--safe-recover</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當直接建立鍵值檔案時，需要對鍵值排序的臨時檔案有兩倍大。通常是當<span>CHAR</span>、<span>VARCHAR</span>、或<span>TEXT</span>列的鍵值較大的情況，因為排序操作在處理過程中需要保存全部鍵值。如果您有大量臨時空間，可以通過排序強制使用<strong><span>myisamchk</span></strong>來修復，可以使用<span>--sort-recover</span>選項。</p>
				<p>通過鍵值緩衝區的修復佔用的硬盤空間比使用排序麼少，但是要慢。</p>
				<p>如果想要快速修復，將<span>key_buffer_size</span>和<span>sort_buffer_size</span>變數設置到大約可用內存的<span>25%</span>。可以將兩個變數設置為較大的值，因為一個時間只使用一個變數。</p>
				<p>
				<span>myisam_block_size</span>是用於索引塊的內存大小。</p>
				<p>
				<span>stats_method</span>影響當給定<span>--analyze</span>選項時，如何為索引統計搜集處理<span>NULL</span>值。它如同<span>myisam_stats_method</span>系統變數。詳細訊息參見<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3節，「伺服器系統變數」</a>和<a href="optimization.html#myisam-index-statistics" title="7.4.7. MyISAM Index Statistics Collection">7.4.7節，「MyISAM索引統計集合」</a>的<span>myisam_stats_method</span>的描述。</p>
				<p>
				<span>ft_min_word_len</span>和<span>ft_max_word_len</span>資料表示<span>FULLTEXT</span>索引的最小和最大字長。<span>ft_stopword_file</span>為停止字檔案的檔案名。需要在以下環境中對其進行設置。</p>
				<p>如果您使用<strong><span 
>myisamchk</span></strong>來修改資料表索引<span>(</span>例如修復或分析<span>)</span>，使用最小和最大字長和停止字檔案的
				預設全文參數值（除非您另外指定）重建<span>FULLTEXT</span>索引。這樣會導致查詢失敗。</p>
				<p>出現這些問題是因為只有伺服器知道這些參數。它們沒有保存在<span>MyISAM</span>索引檔案中。如果您修改了伺服器中的最小或最大字長或停止字檔案，要避免該問題，為用於<strong><span>mysqld</span></strong>的<strong><span>myisamchk</span></strong>指定相同的<span>ft_min_word_len</span>，<span>ft_max_word_len</span>和<span>ft_stopword_file</span>值。例如，如果您將最小字長設置為<span>3,</span>可以這樣使用<strong><span>myisamchk</span></strong>來修復資料表：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk --recover --ft_min_word_len=3 <i>tbl_name</i>.MYI</span></b></span></pre>
				<p>要想確保<strong><span>myisamchk</span></strong>和伺服器使用相同的全文參數值，可以將它們放入選項檔案的<span>[mysqld]</span>和<span>[myisamchk]</span>小節：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>ft_min_word_len=3</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>[myisamchk]</span></pre>
				<pre><span>ft_min_word_len=3</span></pre>
				<p>除了<strong><span>myisamchk</span></strong>，還可以使用<span>REPAIR 
				TABLE</span>、<span>ANALYZE 
				TABLE</span>、<span>OPTIMIZE 
				TABLE</span>或<span>ALTER 
				TABLE</span>。這些語句由伺服器執行，知道要使用的正確的全文參數值。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-check-options"></a>
				5.9.5.2.&nbsp;用於myisamchk的檢<span><strong class="command">查選項</strong></span></h4></div></div></div><a class="indexterm" name="id2780751"></a><a class="indexterm" name="id2780761"></a>
				<p><strong><span>myisamchk</span></strong>支援下面的資料表檢查操作選項：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--check</span><span>, </span>
				<span>-c</span></p>
				<p>檢查資料表的錯誤。如果您不明確指定操作類型選項，這就是預設操作。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--check-only-changed</span><span>, </span>
				<span>-C</span></p>
				<p>只檢查上次檢查後有變更的資料表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--extend-check</span><span>, </span>
				<span>-e</span></p>
				<p>
				非常仔細地檢查資料表。如果資料表有許多索引將會相當慢。該選項只能用於極端情況。一般情況下，可以使用<strong><span>myisamchk</span></strong>或<strong><span>myisamchk 
				--medium-check</span></strong>來確定資料表內是否有錯誤。</p>
				<p>如果您使用了<span>--extend-check</span>並且有充分的內存，將<span>key_buffer_size</span>變數設置為較大的值可以使修復操作運行得更快。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--fast</span>，<span>-F</span></p>
				<p>只檢查沒有正確關閉的資料表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--force</span><span>, </span>
				<span>-f</span></p>
				<p>如果<strong><span>myisamchk</span></strong>發現資料表內有任何錯誤，則自動進行修復。維護類型與<span>--repair</span>或<span>-r</span>選項指定的相同。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--information</span><span>, </span>
				<span>-i</span></p>
				<p>打印所檢查資料表的統計訊息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--medium-check</span><span>, </span>
				<span>-m</span></p>
				<p>比<span>--extend-check</span>更快速地進行檢查。只能發現<span>99.99%</span>的錯誤，在大多數情況下就足夠了。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--read-only</span><span>, </span>
				<span>-T</span></p>
				<p>不要將資料表標記為已經檢查。如果您使用<strong><span>myisamchk</span></strong>來檢查正被其它應用程式使用而沒有鎖定的資料表很有用，例如當用<span>--skip-external-locking</span>選項運行時運行<strong><span 
>mysqld</span></strong>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--update-state</span><span>, </span>
				<span>-U</span></p>
				<p>將訊息保存在<span>.MYI</span>檔案中，來資料表示資料表檢查的時間以及是否資料表崩潰了。該選項用來充分利用<span>--check-only-changed</span>選項，但如果<strong><span 
>mysqld</span><span>伺服器</span></strong>正使用資料表並且正用<span>--skip-external-locking</span>選項運行時不應使用該選項。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-repair-options"></a>
				5.9.5.3.&nbsp;myisamchk的修復選項<span><strong class="command"></strong></span></h4></div></div></div><a class="indexterm" name="id2781039"></a><a class="indexterm" name="id2781050"></a>
				<p><strong><span>myisamchk</span></strong>支援下面的資料表修復操作的選項：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--backup</span><span>,
				</span>
				<span>-B</span></p>
				<p>將<span>.MYD</span>檔案備份為<span>file_name-time.BAK</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--character-sets-dir=<i>path</i></span></p>
				<p>字元編碼安裝目錄。參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--correct-checksum</span></p>
				<p>糾正資料表的校驗和訊息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--data-file-length=<i>len</i>, 
				-D <i>len</i></span></p>
				<p>數據檔案的最大長度<span>(</span>當重建數據檔案且為「滿」時<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--extend-check</span>，<span>-e</span></p>
				<p>
				進行修復，試圖從數據檔案恢復每一行。一般情況會發現大量的垃圾行。不要使用該選項<span>,</span>除非您不顧後果。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--force</span><span>,
				</span>
				<span>-f</span></p>
				<p>覆蓋舊的中間檔案<span>(</span>檔案名類似<span><i><span>tbl_name</span></i><span>.TMD</span></span><span>)</span>，而不是中斷。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--keys-used=<i>val</i></span><span>,
				</span>
				<span>-k <i>val</i></span></p>
				<p>對於<strong><span>myisamchk</span></strong>，該選項值為位值，說明要更新的索引。選項值的每一個二進制位對應資料表的一個索引，其中第一個索引對應位<span>0</span>。選項值<span>0</span>禁用對所有索引的更新，可以保證快速插入。通過<strong><span>myisamchk 
				-r</span></strong>可以重新激活被禁用的索引。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--no-symlinks</span><span>,
				</span>
				<span>-l</span></p>
				<p>不跟隨符號連接。通常<span><b><span>myisamchk</span></b></span>修復一個符號連接所指的資料表。在<span>MySQL 
				4.0</span>中該選項不存在，因為從<span>4.0</span>開始的版本在修復過程中不移除符號連結。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--parallel-recover</span><span>,
				</span>
				<span>-p</span></p>
				<p>與<span>-r</span>和<span>-n</span>的用法相同，但使用不同的線程並行建立所有鍵。<em><span
>這是<span>alpha</span>代碼。自己承擔風險！</span></em></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--quick</span>，<span>-q</span></p>
				<p>
				不修改數據檔案，快速進行修復。出現複製鍵時，您可以兩次指定該項以強制<strong><span>myisamchk</span></strong>修改原數據檔案。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--recover</span><span>,
				</span>
				<span>-r</span></p>
				<p>可以修復幾乎所有一切問題，除非唯一的鍵不唯一時<span>(</span>對於<span>MyISAM</span>資料表，這是非常不可能的情況<span>)</span>。如果您想要恢復資料表，這是首先要嘗試的選項。如果<strong><span>myisamchk</span></strong>報告資料表不能用<span>-r</span>恢復，則只能嘗試<span>-o</span>。在不太可能的情況下<span>-r</span>失敗，數據檔案保持完好）<span>。
				</span></p>
				<p>如果您有大量內存，您應增加<span>sort_buffer_size</span>的值<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--safe-recover</span><span>,
				</span>
				<span>-o</span></p>
				<p>
				使用一個老的恢復方法讀取，按順序讀取所有行，並根據找到的行更新所有索引樹。這比<span>-r</span>慢些，但是能處理<span>-r</span>不能處理的情況。該恢復方法使用的硬盤空間比<span>-r</span>少。一般情況，您應首先用<span>-r</span>維修，如果<span>-r</span>失敗則用<span>-o</span>。</p>
				<p>如果您有大量內存，您應增加<span>sort_buffer_size</span>的值<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>(<em><span>OBSOLETE</span></em>)
				</span><span>
				--set-character-set=<i>name</i></span></p>
				<p>在<span>MySQL 5.1</span>中不使用。參見<span>--set-collation</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--set-collation=<i>name</i></span></p>
				<p>更改用來排序資料表索引的校對規則。校對規則名的第一部分包含字元編碼名。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-recover</span><span>, </span>
				<span>-n</span></p>
				<p>強制<strong><span>myisamchk</span></strong>通過排序來解析鍵值，即使臨時檔案將可能很大。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>--tmpdir=<i>path</i>, 
				-t <i>path</i></span></p>
				<p>用於保存臨時檔案的目錄的路徑。如果未設置，<strong><span>myisamchk</span></strong>使用<span>TMPDIR</span>環境變數的值。<span>tmpdir</span>可以設置為一系列目錄路徑，用於成功地以<span>round-robin</span>模式建立臨時檔案。在<span>Unix</span>中，目錄名之間的間隔字元為冒號<span>(</span>『<span>:</span>』<span>)</span>，在<span>Windows</span>、<span>NetWare</span>和<span>OS/2</span>中為分號<span> 
				(</span>『<span>；</span>』<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--unpack</span>，<span>-u</span></p>
				<p>將用<strong><span>myisampack</span></strong>打包的資料表解包。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="myisamchk-other-options"></a>
				5.9.5.4.&nbsp;用於myisamchk的其<span><strong class="command">它選項</strong></span></h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<strong><span>myisamchk</span></strong>支援以下資料表檢查和修復之外的其它操作的選項：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--analyze</span>，<span>-a</span></p>
				<p>
				分析鍵值的分佈。這通過讓聯結最佳化器更好地選擇資料表應該以什麼次序聯結和應該使用哪個鍵來改進聯結性能。要想獲取分佈相關訊息，使用<strong><span>myisamchk 
				--description --verbose </span></strong>
				<span><b><i><span>tbl_name</span></i></b></span>命令或<span>SHOW 
				KEYS FROM <i>tbl_name</i></span>語句。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--description</span><span>, </span>
				<span>-d</span></p>
				<p>打印出關於資料表的描述性訊息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--set-auto-increment[=<i>value</i>]</span><span>,
				</span><span>-A[<i>value</i>]</span></p>
				<p>強制從給定值開始的新記錄使用<span>AUTO_INCREMENT</span>編號<span>(</span>或如果已經有<span>AUTO_INCREMENT</span>值大小的記錄，應使用更高值<span>)</span>。如果未指定<span><i><span>value</span></i></span>，新記錄的<span>AUTO_INCREMENT</span>編號應使用當前資料表的最大值加上<span>1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-index</span><span>, </span>
				<span>-S</span></p>
				<p>
				以從高到低的順序排序索引樹塊。這將最佳化搜尋並且將使按鍵值的資料表掃瞄更快。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				--sort-records=<i>N</i>, -R <i>N</i></span></p>
				<p>
				根據一個具體索引排序記錄。這使您的數據更局部化並且可以加快在該鍵上的<span>SELECT</span>和<span>ORDER 
				BY</span>的範圍搜索。（第一次做排序可能很慢！）為了找出一張資料表的索引編號，使用<span>SHOW 
				INDEX</span>，它以<span><b><span>myisamchk</span></b></span>看見他們的相同順序顯示一張資料表的索引。索引從<span>1</span>開始編號。</p>
				<p>如果鍵沒有打包<span>(</span><span>PACK_KEYS=0</span><span>)</span>，它們的長度相同，因此當<strong><span>myisamchk</span></strong><span>
				</span>排序並移動記錄時，只覆蓋索引中的記錄偏移量。如果鍵已經打包<span>(</span><span>PACK_KEYS=1</span><span>)</span>，<strong><span>myisamchk</span></strong>必須先解開打包的鍵塊，然後重新建立索引並再次將鍵塊打包。<span>(</span>在這種情況下，重新建立索引比更新每個索引的偏移量要快）<span>。
				</span></p>
				<h4 class="title"><a name="myisamchk-memory"></a>5.9.5.5. <span><strong class="command">myisamchk</strong></span>內存使用</h4></div></div></div><a class="indexterm" name="id2781795"></a>
				<p>當您運行<strong><span>myisamchk</span></strong>時內存分配重要<span>.MYI<strong><span>samchk</span></strong></span>使用的內存大小不能超過用<span>-O</span>選項指定的。如果您想對每一個大資料表使用<strong><span>myisamchk</span></strong>，您必須首先確定您想使用多少內存。修復時可以使用的
				預設值只有<span>3MB</span>。使用更大的內存，可以讓<strong><span>myisamchk</span></strong>工作得更快一些。例如，如果有大於<span>32MB</span>的<span>RAM</span>，可以使用如下所示選項<span>(</span>除了您可以指定的其它選項<span>)</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk -O sort=16M -O key=16M -O read=1M -O write=1M ...</span></b></span></pre>
				<p>對於大多數情況，使用<span>-O 
				sort=16M</span>應該足夠了。</p>
				<p>應記住<strong><span>myisamchk</span></strong>使用<span>TMPDIR</span>中的臨時檔案。如果<span>TMPDIR</span>指向內存檔案系統，您可能很容易得到內存溢出的錯誤。如果發生，設定<span>TMPDIR</span>指向有更多空間的檔案系統目錄並且重啟<span><b><span>myisamchk</span></b></span>。</p>
				<p>修復時<strong><span>myisamchk</span></strong>也需要大量硬盤空間：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>將數據檔案大小擴大一倍<span>(</span>原檔案和複製檔案<span>)</span>。如果您用<span>--quick</span>修復則不需要該空間；在這種情況下，只重新建立了索引檔案。在檔案系統上需要的空間與原數據檔案相同！<span>(</span>建立的複製檔案位於原檔案所在目錄）<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				代替舊索引檔案的新索引檔案所佔空間。修復工作一開始，就對舊索引檔案進行了刪減，因此您通常會忽略該空間。在檔案系統上需要的該空間與原數據檔案相同！</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當使用<span>--recover</span>或<span>---sort-recover</span><span>(</span>但不使用<span>--safe-recover</span><span>)</span>時，需要排序緩衝區空間。需要的空間為：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>(</span><span><i><span>largest_key</span></i></span><span> + </span><span><i><span>row_pointer_length</span></i></span><span>) * </span><span><i><span>number_of_rows</span></i></span><span> * 2</span></pre>
				<p>可以用<strong><span>myisamchk 
				-dv </span></strong><span><b><i>
				<span>tbl_name</span></i></b></span>檢查鍵值和<span>row_pointer_length</span>的長度。在臨時目錄分配該空間<span>(</span>用<span>TMPDIR</span>或<span>--tmpdir=<i>path</i></span>指定<span>)</span>。</p>
				<p>如果在修復過程中出現硬盤空間問題，可以試試用<span>--safe-recover</span>代替<span>--recover</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="crash-recovery"></a>
				5.9.5.6.&nbsp;將myisa<span><strong class="command">mchk用於崩潰恢</strong></span>復</h4></div></div></div><a class="indexterm" name="id2782009"></a><a class="indexterm" name="id2782019"></a>
				<p>如果用<span>--skip-external-locking</span>運行<strong><span>mysqld</span></strong><span>(</span>在某些系統上為
				預設設置，例如<span>Linux)</span>，當<strong><span>mysqld</span></strong>使用某個資料表時，您不能可靠地使用<strong><span>myisamchk</span></strong>來檢查相同的資料表。當您運行<strong><span>myisamchk</span></strong>時如果可以確保沒有人在通過<strong><span>mysqld</span></strong>訪問資料表，在開始檢查資料表前，您只需要運行<strong><span>mysqladmin 
				flush-tables</span></strong>。如果您不能保證，則您檢查資料表時您必須停止<strong><span>mysqld</span></strong>。如果<strong><span>mysqld</span></strong>更新資料表時運行<strong><span>myisamchk</span></strong>，您可能會獲得資料表被破壞的警告，即使事實並非如此。</p>
				<p>如果不使用<span>--skip-external-locking</span>，可以隨時使用<strong><span 
>myisamchk</span></strong>來檢查資料表。當檢查資料表時，所有嘗試更新資料表的客戶端將等待，直到<strong><span>myisamchk</span></strong>準備好可以繼續。</p>
				<p>如果使用<strong><span>myisamchk</span></strong>來修復或最佳化資料表，<em><span>必須</span></em>確保<strong><span 
>mysqld</span><span>伺服器</span></strong>沒有在使用該資料表<span>(</span>如果您正使用<span>--skip-external-locking</span>選項也適用<span>)</span>。如果不關閉<strong><span>mysqld</span></strong>，在運行<strong><span>myisamchk</span></strong>之前至少應執行<strong><span>mysqladmin 
				flush-tables</span></strong>。如果伺服器和<strong><span>myisamchk</span></strong>同時訪問資料表，資料表<em><span>可能會被破壞</span></em>。</p>
				<p>本節描述如何檢查和處理<span>MySQL</span>資料庫中的數據破壞。如果資料表經常被破壞，您應盡力找到原因。參見<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2節，「如果MySQL依然崩潰，應作些什麼」</a>。</p>
				<p>關於<span>MyISAM</span>資料表怎樣會被破壞的解釋，參見<a href="storage-engines.html#myisam-table-problems" title="15.1.4. MyISAM Table Problems">15.1.4節，「MyISAM資料表方面的問題」</a>。</p>
				<p>在執行崩潰恢復時，理解在一個資料庫中的每一個<span><i><span>MyISAM</span></i></span>資料表<span>tbl_name</span>對應的在資料庫目錄中的<span>3</span>個檔案是很重要的：</p>
				<table border="1" cellpadding="0" id="table17">
					<tr>
						<td>
						<p><strong>
						<span>檔案</span></strong></td>
						<td>
						<p><strong>
						<span>目的</span></strong></td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.frm</span></span></td>
						<td>
						<p>定義<span>(</span>格式<span>)</span>檔案</td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.MYD</span></span></td>
						<td>
						<p>數據檔案</td>
					</tr>
					<tr>
						<td>
						<p><span><i>
						<span>tbl_name</span></i><span>.MYI</span></span></td>
						<td>
						<p>索引檔案</td>
					</tr>
				</table>
				<p>
				這<span>3</span>類檔案的每一類都可能遭受不同形式的損壞，但是問題最常發生在數據檔案和索引檔案。 
				</p>
				<p><span><b><span>myisamchk</span></b></span>通過一行一行地建立一個<tt >「<span>.MYD</span>」</tt>數據檔案的副本來工作，它通過刪除舊的<tt >「<span>.MYD
				</span></tt>檔案並且重命名新檔案到原來的檔案名結束修復階段。如果您使用<span>--quick</span>，<span><b><span>myisamchk</span></b></span>不建立一個臨時<tt >「<span>.MYD</span>」</tt>檔案，只是假定<tt >「<span>.MYD</span>」</tt>檔案是正確的並且僅建立一個新的索引檔案，不接觸<tt >「<span>.MYD</span>」</tt>檔案，這是安全的，因為<span><b><span>myisamchk</span></b></span>自動檢測<tt >「<span>.MYD</span>」</tt>檔案是否損壞並且在這種情況下，放棄修復。您也可以給<span><b><span>myisamchk</span></b></span>兩個<span>--quick</span>選項。在這種情況下，<span><b><span>myisamchk</span></b></span>不會在一些錯誤上<span>(</span>象重複鍵<span>)</span>放棄，相反試圖通過修改<tt >「<span>.MYD</span>」</tt>檔案解決它們。通常，只有在太少的空閒磁盤空間上實施正常修復，使用兩個<span>--quick</span>選項時才有用。在這種情況下，您至少應該在運行<span><b><span>myisamchk</span></b></span>前做進行備份。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="check"></a>
				5.9.5.7.&nbsp;如何檢查MyISAM資料表的錯誤</h4></div></div></div><a class="indexterm" name="id2782358"></a><a class="indexterm" name="id2782368"></a><a class="indexterm" name="id2782379"></a></div><div class="section"><div class="titlepage"><div><div>
				要想檢查<span>MyISAM</span>資料表，應使用下面的命令：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk <i>tbl_name</i></span></p>
				<p>這樣能找出<span>99.99%</span>的錯誤。它不能找出的是<strong><span>僅僅</span></strong>涉及數據檔案的損壞<span>(</span>這很不常見<span>)</span>。如果想要檢查一張資料表，通常應該沒有選項地運行<span>myisamchk</span>或用<span>-s</span>或<span>--silent</span>選項的任何一個。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -m <i>
				tbl_name</i></span></p>
				<p>這樣能找出<span>99.99%</span>的錯誤。它首先檢查所有索引條目的錯誤並通讀所有行。它還計算行內所有鍵值的校驗和，並確認校驗和與索引樹內鍵的校驗和相匹配。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -e <i>
				tbl_name</i></span></p>
				<p>可以完全徹底地檢查數據<span>(</span><span>-e</span>意思是「延伸檢查」<span>)</span>。它對每一行做每個鍵的讀檢查以證實它們確實指向正確的行。這在一個有很多鍵的大資料表上可能花很長時間。<span><b><span>myisamchk</span></b></span>通常將在它發現第一個錯誤以後停止。如果您想要獲得更多的訊息，可以增加<span>--verbose</span><span>(</span><span>-v</span><span>)</span>選項。這使得<span><b><span>myisamchk</span></b></span>繼續一直到最多<span>20</span>個錯誤。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>myisamchk -e -i <i>
				tbl_name</i></span></p>
				<p>象前面的命令一樣，但是<span>-i</span>選項告訴<span><b><span>myisamchk</span></b></span>還打印出一些統計訊息。</p>
				<p>在一般使用中，一個簡單的<span><b><span>myisamchk</span></b></span>（沒有除資料表名以外的參數）就足夠檢查資料表了。</p>
				<h4 class="title"><a name="repair"></a>
				5.9.5.8.&nbsp;如何修復資料表</h4></div></div></div><a class="indexterm" name="id2782551"></a><a class="indexterm" name="id2782561"></a>
				<p>本節描述如何對<span>MyISAM</span>資料表使用<strong><span>myisamchk</span></strong><span>(</span>延伸名<span>.MYI</span>和<span>.MYD</span><span>)</span>。</p>
				<p>您還可以<span>(</span>並且應該，如果可能<span>)</span>使用<span>CHECK 
				TABLE</span>和<span>REPAIR 
				TABLE</span>語句來檢查和修復<span>MyISAM</span>資料表。參見<a href="sql-syntax.html#check-table" title="13.5.2.3. CHECK TABLE Syntax">13.5.2.3節，「CHECK 
			TABLE語法」</a>和<a href="sql-syntax.html#repair-table" title="13.5.2.6. REPAIR TABLE Syntax">13.5.2.6節，「REPAIR 
			TABLE語法」</a>。</p>
				<p>一張損壞的資料表的症狀通常是查詢意外中斷並且能看到下述錯誤：</p>
				<ul type="disc">
					<li>
					<tt >「<i><span>tbl_name</span></i><span>.frm</span>」</tt>被鎖定不能更改。</li>
					<li>不能找到檔案<tt >「<i><span>tbl_name</span></i><span>.MYI</span>」</tt>（<span>Errcode</span>：<span><i><span>nnn</span></i></span>）。</li>
					<li>檔案意外結束。</li>
					<li>記錄檔案被毀壞。</li>
					<li>從資料表處理器得到錯誤<span><i><span>nnn</span></i></span>。</li>
				</ul>
				<p>要想得到錯誤相關的詳細訊息，您可以運行<strong><span>perror</span></strong><span>
				</span><span><i>
				<span>nnn</span></i></span>，其中<span><i><span>nnn</span></i></span>為錯誤編號。下面的示範顯示了如何使用<strong><span>perror</span></strong>來找到最常用錯誤編號（用資料表的方式指出問題）的含義：</p>
				<pre><span>shell&gt; </span><span><b><span>perror 126 127 132 134 135 136 141 144 145</span></b></span></pre>
				<pre><span>126 = Index file is crashed / Wrong file format</span></pre>
				<pre><span>127 = Record-file is crashed</span></pre>
				<pre><span>132 = Old database file</span></pre>
				<pre><span>134 = Record was already deleted (or record file crashed)</span></pre>
				<pre><span>135 = No more room in record file</span></pre>
				<pre><span>136 = No more room in index file</span></pre>
				<pre><span>141 = Duplicate unique key or constraint on write or update</span></pre>
				<pre><span>144 = Table is crashed and last repair failed</span></pre>
				<p><span>145 = Table was marked as 
				crashed and should be repaired</span></p>
				<p>請注意錯誤<span>135(</span>記錄檔案中沒有更多的空間<span>)</span>和錯誤<span>136(</span>索引檔案中沒有更多的空間<span>)</span>不是可以通過簡單修復可以修復的錯誤。在這種情況下，必須使用<span>ALTER 
				TABLE</span>來增加<span>MAX_ROWS</span>和<span>AVG_ROW_LENGTH</span>資料表選項值：</p>
				<pre><span>ALTER TABLE </span><span><i><span>tbl_name</span></i></span><span> MAX_ROWS=</span><span><i><span>xxx</span></i></span><span> AVG_ROW_LENGTH=</span><span><i><span>yyy</span></i></span><span>;</span></pre>
				<p>如果您不知道當前的資料表的選項值，使用<span>SHOW 
				CREATE TABLE</span>或<span>DESCRIBE</span>來查詢<span>。</span></p>
				<p>對於其它的錯誤，您必須修復資料表。<strong><span>myisamchk</span></strong>通常可以檢測和修復大多數問題。</p>
				<p>修復過程包括四個階段，此處將進行描述。開始修復前，應進入資料庫目錄並檢查資料表檔案的授權。在<span>Unix</span>中，確保它們對於運行<strong><span>mysqld</span><span>的</span></strong>用戶可讀<span>(</span>您也應可讀，因為您需要訪問檢查的檔案<span>)</span>。如果您需要修改檔案，您還必須擁有寫訪問權限。</p>
				<p>用<strong><span>myisamchk</span></strong>修復資料表的選項的描述參見<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5節，「myisamchk：MyISAM資料表維護實用工具」</a>的前幾節。</p>
				<p>下面幾節列出了上述命令失敗或您想要使用<strong><span>myisamchk</span></strong>提供的延伸特性等情況的例子。</p>
				<p>如果您要通過命令行來修復資料表，必須首先停止<strong><span>mysqld</span><span
細明體;">伺服器</span></strong>。請注意當您在遠程伺服器上運行<strong><span>mysqladmin 
				shutdown</span></strong>時，<strong><span>mysqladmin</span></strong>返回後，<strong><span>mysqld</span><span>伺服器將</span></strong>仍然運行一會兒，直到停止所有查詢並將所有鍵清空到硬盤上。</p>
				<p>
				<strong><span>階段<span>1</span>：檢查您的資料表</span></strong></p>
				<p>如果您有很多時間，運行<strong><span>myisamchk 
				*.MYI</span></strong>或<strong><span>myisamchk 
				-e *.MYI</span></strong>。使用<span>-s</span>（沉默）選項禁止不必要的訊息。</p>
				<p>如果<strong><span>mysqld</span><span>伺服器處於宕機狀態</span></strong>，應使用<span>--update-state</span>選項來告訴<strong><span 
>myisamchk</span></strong>將資料表標記為<span>&#39;</span>檢查過的<span>&#39;</span>。</p>
				<p>
				您必須只修復那些<span><b><span>myisamchk</span></b></span>報告有錯誤的資料表。對這樣的資料表，繼續到階段<span>2</span>。</p>
				<p>如果在檢查時，您得到奇怪的錯誤<span>(</span>例如<span>out 
				of memory</span>錯誤<span>)</span>，或如果<span><b><span>myisamchk</span></b></span>崩潰，到階段<span>3</span>。</p>
				<p>
				<strong><span>階段<span>2</span>：簡單安全的修復</span></strong></p>
				<p>註釋：如果想更快地進行修復，當運行<strong><span>myisamchk</span></strong>時，您應將<span>sort_buffer_size</span>和<span>Key_buffer_size</span>變數的值設置為可用內存的大約<span>25%</span>。</p>
				<p>首先，試試<span><b><span>myisamchk 
				-r -q <i>tbl_name</i></span></b></span><span>(</span><span>-r 
				-q</span>意味著「快速恢復模式」<span>)</span>。這將試圖不接觸數據檔案來修復索引檔案。如果數據檔案包含它應有的一切內容和指向數據檔案內正確地點的刪除連接，這應該管用並且資料表可被修復。開始修復下一張資料表。否則，執行下列過程：</p>
				<ol start="1" type="1">
					<li>在繼續前對數據檔案進行備份。 </li>
					<li>使用<span><b><span>myisamchk 
					-r <i>tbl_name</i></span></b></span><span>(</span><span>-r</span>意味著「恢復模式」<span>)</span>。這將從數據檔案中刪除不正確的記錄和已被刪除的記錄並重建索引檔案。 
					</li>
					<li>如果前面的步驟失敗，使用<span><b><span>myisamchk 
					--safe-recover <i>tbl_name</i></span></b></span>。安全恢復模式使用一個老的恢復方法，處理常規恢復模式不行的少數情況<span>(</span>但是更慢<span>)</span>。 
					</li>
				</ol>
				<p>如果在修復時，您得到奇怪的錯誤<span>(</span>例如<span>out 
				of memory</span>錯誤<span>)</span>，或如果<span><b><span>myisamchk</span></b></span>崩潰，到階段<span>3</span>。</p>
				<p>
				<strong><span>階段<span>3</span>：困難的修復</span></strong></p>
				<p>
				只有在索引檔案的第一個<span>16K</span>塊被破壞，或包含不正確的訊息，或如果索引檔案丟失，您才應該到這個階段。在這種情況下，需要建立一個新的索引檔案。按如下步驟操做：</p>
				<ol start="1" type="1">
					<li>把數據檔案移到安全的地方。</li>
					<li>使用資料表描述檔案建立新的<span>(</span>空<span>)</span>數據檔案和索引檔案：</li>
					<li><span>shell&gt; </span>
					<span><b><span>mysql <i>
					db_name</i></span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>SET 
					AUTOCOMMIT=1;</span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>TRUNCATE 
					TABLE <i>tbl_name</i>;</span></b></span></li>
					<li><span>mysql&gt; </span>
					<span><b><span>quit</span></b></span></li>
				</ol>
				<p>如果您的<span>MySQL</span>版本沒有<span>TRUNCATE 
				TABLE</span>，則使用<span>DELETE 
				FROM <i>tbl_name</i></span>。</p>
				<ol start="7" type="1">
					<li>
					將老的數據檔案拷貝到新建立的數據檔案之中。（不要只是將老檔案移回新檔案之中；您要保留一個副本以防某些東西出錯。） 
					</li>
				</ol>
				<p>回到階段<span>2</span>。現在<span><b><span>myisamchk 
				-r -q</span></b></span>應該工作了。（這不應該是一個無限循環）。</p>
				<p>您還可以使用<span>REPAIR 
				TABLE <i>tbl_name</i> USE_FRM</span>，將自動執行整個程式。</p>
				<p>
				<strong><span>階段<span>4</span>：非常困難的修復</span></strong>
				</p>
				<p>
				只有<span>.frm</span>描述檔案也破壞了，您才應該到達這個階段。這應該從未發生過，因為在資料表被建立以後，描述檔案就不再改變了。</p>
				<ol start="1" type="1">
					<li>從一個備份恢復描述檔案然後回到階段<span>3</span>。您也可以恢復索引檔案然後回到階段<span>2</span>。對後者，您應該用<span><b><span>myisamchk 
					-r</span></b></span>啟動。</li>
					<li>
					如果您沒有進行備份但是確切地知道資料表是怎樣建立的，在另一個資料庫中建立資料表的一個拷貝。刪除新的數據檔案，然後從其他資料庫將描述檔案和索引檔案移到破壞的資料庫中。這樣提供了新的描述和索引檔案，但是讓<span>.MYD</span>數據檔案獨自留下來了。回到階段<span>2</span>並且嘗試重建索引檔案。</li>
				</ol>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="table-optimization"></a>
				5.9.5.9.&nbsp;資料表最佳化</h4></div></div></div><a class="indexterm" name="id2783206"></a><a class="indexterm" name="id2783216"></a>
				<p>為了組合碎片記錄並且消除由於刪除或更新記錄而浪費的空間，以恢復模式運行<span><b><span>myisamchk</span></b></span>：</p>
				<pre><span>shell&gt; </span><span><b><span>myisamchk -r <i>tbl_name</i></span></b></span></pre>
				<p>
				您可以用<span>SQL</span>的<span>OPTIMIZE 
				TABLE</span>語句使用的相同方式來最佳化資料表，<span>OPTIMIZE 
				TABLE</span>可以修復資料表並對鍵值進行分析，並且可以對索引樹進行排序以便更快地搜尋鍵值。實用程式和伺服器之間不可能交互操作，因為當您使用<span>OPTIMIZE 
				TABLE</span>時，伺服器做所有的工作。參見<a href="sql-syntax.html#optimize-table" title="13.5.2.5. OPTIMIZE TABLE Syntax">13.5.2.5節，「OPTIMIZE 
			TABLE語法」</a>。</p>
				<p><span><b><span>myisamchk</span></b></span>還有很多其它可用來提高資料表的性能的選項：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-S</span><span>,
				</span><span>
				--sort-index</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-R
				<i>index_num</i></span><span>, </span>
				<span>--sort-records=<i>index_num</i></span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>-a</span><span>,
				</span><span>--analyze</span></p>
				<p>關於這些選項的完整的描述，參見<a href="database-administration.html#myisamchk" title="5.9.5. myisamchk — MyISAM Table-Maintenance Utility">5.9.5節，「myisamchk：MyISAM資料表維護實用工具」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="maintenance-schedule"></a>
			5.9.6.&nbsp;建立資料表維護計劃</h3></div></div></div><a class="indexterm" name="id2783350"></a><a class="indexterm" name="id2783361"></a>
			<p>定期對資料表進行檢查而非等到問題出現後再檢查資料庫資料表是一個好主意。檢查和修復<span>MyISAM</span>資料表的一個方式是使用<span>CHECK 
			TABLE</span>和<span>REPAIR 
			TABLE</span>語句。參見<a href="sql-syntax.html#check-table" title="13.5.2.3. CHECK TABLE Syntax">13.5.2.3節，「CHECK 
		TABLE語法」</a>和<a href="sql-syntax.html#repair-table" title="13.5.2.6. REPAIR TABLE Syntax">13.5.2.6節，「REPAIR 
		TABLE語法」</a>。</p>
			<p>檢查資料表的另一個方法是使用<strong><span>myisamchk</span></strong>。為維護目的，可以使用<span><b><span>myisamchk 
			-s</span></b></span>檢查資料表。<span>-s</span>選項（簡稱<span>--silent</span>）使<span><b><span>myisamchk</span></b></span>以沉默模式運行，只有當錯誤出現時才打印消息。</p>
			<p>
			在伺服器啟動時檢查資料表是一個好主意。例如，無論何時機器在更新當中重新啟動了，您通常需要檢查所有可能受影響的資料表。（即「預期的破壞了的資料表」）。要想自動檢查<span>MyISAM</span>資料表，用<span>--myisam-recover</span>選項啟動伺服器。</p>
			<p>一個更好的測試將是檢查最後修改時間比<tt >「<span>.pid</span>」</tt>檔案新的資料表。</p>
			<p>您還應該在正常系統操作期間定期檢查資料表。在<span>MySQL AB</span>，我們運行一個<span><b><span>cron</span></b></span>任務，每週一次檢查所有重要的資料表，使用<tt >「</tt><span>crontab</span><tt >」</tt>檔案中這樣的行：</p>
			<pre><span>35 0 * * 0 /path/to/myisamchk --fast --silent /path/to/datadir/*/*.MYI</span></pre>
			<p>
			可以打印損壞的資料表的訊息，以便我們在需要時能夠檢驗並且修復它們。</p>
			<p>
			多年了我們還沒有發現<span>(</span>的確是真的<span>)</span>都沒有任何意外損壞的資料表時<span>(</span>由於除硬件故障外的其它原因造成損壞的資料表<span>)</span>，每週一次對我們是足夠了。</p>
			<p>我們建議現在開始，您對所有最後<span>24</span>小時內被更新了的資料表每晚都執行<span><b><span>myisamchk 
			-s</span></b></span>，直到您變得像我們那樣信任<strong><span>MySQL</span></strong>。</p>
			<p>一般情況，<span>MySQL</span>資料表很少需要維護。如果您用動態大小的行更改<span>MyISAM</span>資料表<span>(</span>含<span>VARCHAR</span>、<span>BLOB</span>或<span>TEXT</span>列的資料表<span>)</span>或有刪除了許多行的資料表，您可能想要不時地（每月一次）整理<span>/</span>組合資料表的空間。</p>
			<p>可以對有問題的資料表執行<span>OPTIMIZE 
			TABLE</span>來最佳化。或者是，如果可以停一會<strong><span>mysqld</span><span
細明體;">伺服器</span></strong>，進入數據目錄，當伺服器停止時使用該命令：</p>
			<p><span>shell&gt; </span>
			<span><b><span>myisamchk -r -s 
			--sort-index -O sort_buffer_size=16M */*.MYI</span></b></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="table-info"></a>
			5.9.7.&nbsp;獲取關於資料表的訊息</h3></div></div></div><a class="indexterm" name="id2783572"></a>
			<p>為了獲得關於一個資料表的描述或統計，使用下面的命令：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -d </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>以「描述模式」運行<span><b><span>myisamchk</span></b></span>，生成資料表的描述。如果用<span>--skip-external-locking</span>選項啟動<strong><span
細明體;">MySQL</span></strong>伺服器，<span><b><span>myisamchk</span></b></span>可以報告運行的資料表被更新的錯誤。然而，既然在描述模式中<span><b><span>myisamchk</span></b></span>不更改資料表，沒有任何破壞數據的風險。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -d -v </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>為了生成更多關於<span><b><span>myisamchk</span></b></span>正在做什麼的訊息，加上<span>-v</span>告訴它以冗長模式運行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -eis </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>僅顯示資料表的最重要的訊息。因為必須讀取整個資料表，該操作很慢。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			myisamchk -eiv </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span></p>
			<p>這類似 
			<span>-eis</span>，只是告訴您正在做什麼。</p>
			<p>下面為這些命令的輸出示範。它們基於含這些數據和索引檔案大小的資料表：</p>
			<pre><span>-rw-rw-r--&nbsp;&nbsp; 1 monty&nbsp;&nbsp;&nbsp; tcx&nbsp;&nbsp;&nbsp;&nbsp; 317235748 Jan 12 17:30 company.MYD</span></pre>
			<pre><span>-rw-rw-r--&nbsp;&nbsp; 1 davida&nbsp;&nbsp; tcx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 96482304 Jan 12 18:35 company.MYM</span></pre>
			<p><strong><span>myisamchk -d</span></strong>輸出示範：</p>
			<pre><span>MyISAM file:&nbsp;&nbsp;&nbsp;&nbsp; company.MYI</span></pre>
			<pre><span>Record format:&nbsp;&nbsp; Fixed length</span></pre>
			<pre><span>Data records:&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recordlength:&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>table description:</span></pre>
			<pre><span>Key Start Len Index&nbsp;&nbsp; Type</span></pre>
			<pre><span>1&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; unique&nbsp; double</span></pre>
			<pre><span>2&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped</span></pre>
			<pre><span>3&nbsp;&nbsp; 219&nbsp;&nbsp; 8&nbsp;&nbsp; multip. double</span></pre>
			<pre><span>4&nbsp;&nbsp; 63&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped</span></pre>
			<pre><span>5&nbsp;&nbsp; 167&nbsp;&nbsp; 2&nbsp;&nbsp; multip. unsigned short</span></pre>
			<pre><span>6&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>7&nbsp;&nbsp; 155&nbsp;&nbsp; 4&nbsp;&nbsp; multip. text</span></pre>
			<pre><span>8&nbsp;&nbsp; 138&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>9&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; 193&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text</span></pre>
			<p><strong><span>myisamchk -d -v</span></strong><span>
			</span>輸出示範：</p>
			<pre><span>MyISAM file:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; company</span></pre>
			<pre><span>Record format:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fixed length</span></pre>
			<pre><span>File-version:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span></pre>
			<pre><span>Creation time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1999-10-30 12:12:51</span></pre>
			<pre><span>Recover time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1999-10-31 19:13:01</span></pre>
			<pre><span>Status:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checked</span></pre>
			<pre><span>Data records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Datafile parts:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Datafile pointer (bytes):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; Keyfile pointer (bytes):&nbsp;&nbsp;&nbsp;&nbsp; 3</span></pre>
			<pre><span>Max datafile length:&nbsp; 3791650815&nbsp; Max keyfile length: 4294967294</span></pre>
			<pre><span>Recordlength:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>table description:</span></pre>
			<pre><span>Key Start Len Index&nbsp;&nbsp; Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rec/key&nbsp;&nbsp;&nbsp;&nbsp; Root Blocksize</span></pre>
			<pre><span>1&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; unique&nbsp; double&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 15845376&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>2&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 25062400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>3&nbsp;&nbsp; 219&nbsp;&nbsp; 8&nbsp;&nbsp; multip. double&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 73 40907776&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>4&nbsp;&nbsp; 63&nbsp;&nbsp;&nbsp; 10&nbsp; multip. text packed stripped&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 48097280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>5&nbsp;&nbsp; 167&nbsp;&nbsp; 2&nbsp;&nbsp; multip. unsigned short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4840 55200768&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>6&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1346 65145856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>7&nbsp;&nbsp; 155&nbsp;&nbsp; 4&nbsp;&nbsp; multip. text&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4995 75090944&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>8&nbsp;&nbsp; 138&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 87 85036032&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>9&nbsp;&nbsp; 177&nbsp;&nbsp; 4&nbsp;&nbsp; multip. unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 178 96481280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; 193&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text</span></pre>
			<p><strong><span>myisamchk -eis</span></strong><span>
			</span>輸出示範：</p>
			<pre><span>Checking MyISAM file: company</span></pre>
			<pre><span>Key:&nbsp; 1:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 2:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 50%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 3:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Key:&nbsp; 4:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp; 60%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 5:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 6:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 7:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 8:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>Key:&nbsp; 9:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Total:&nbsp;&nbsp;&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 17%</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>Records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp;&nbsp; M.recordlength:&nbsp;&nbsp;&nbsp;&nbsp; 226</span></pre>
			<pre><span>Packed:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Recordspace used:&nbsp;&nbsp;&nbsp;&nbsp; 100%&nbsp;&nbsp; Empty space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Blocks/Record:&nbsp;&nbsp; 1.00</span></pre>
			<pre><span>Record blocks:&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp;&nbsp; Delete blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recorddata:&nbsp;&nbsp;&nbsp;&nbsp; 317235748&nbsp;&nbsp;&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Lost space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; Linkdata:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>User time 1626.51, System time 232.36</span></pre>
			<pre><span>Maximum resident set size 0, Integral resident set size 0</span></pre>
			<pre><span>Non physical pagefaults 0, Physical pagefaults 627, Swaps 0</span></pre>
			<pre><span>Blocks in 0 out 0, Messages in 0 out 0, Signals 0</span></pre>
			<pre><span>Voluntary context switches 639, Involuntary context switches 28966</span></pre>
			<p><strong><span>myisamchk -eiv</span></strong><span>
			</span>輸出示範：</p>
			<pre><span>Checking MyISAM file: company</span></pre>
			<pre><span>Data records: 1403698&nbsp;&nbsp; Deleted blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>- check file-size</span></pre>
			<pre><span>- check delete-chain</span></pre>
			<pre><span>block_size 1024:</span></pre>
			<pre><span>index&nbsp; 1:</span></pre>
			<pre><span>index&nbsp; 2:</span></pre>
			<pre><span>index&nbsp; 3:</span></pre>
			<pre><span>index&nbsp; 4:</span></pre>
			<pre><span>index&nbsp; 5:</span></pre>
			<pre><span>index&nbsp; 6:</span></pre>
			<pre><span>index&nbsp; 7:</span></pre>
			<pre><span>index&nbsp; 8:</span></pre>
			<pre><span>index&nbsp; 9:</span></pre>
			<pre><span>No recordlinks</span></pre>
			<pre><span>- check index reference</span></pre>
			<pre><span>- check data record references index: 1</span></pre>
			<pre><span>Key:&nbsp; 1:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 2</span></pre>
			<pre><span>Key:&nbsp; 2:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp; 50%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 3</span></pre>
			<pre><span>Key:&nbsp; 3:&nbsp; Keyblocks used:&nbsp; 97%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>- check data record references index: 4</span></pre>
			<pre><span>Key:&nbsp; 4:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp; 60%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 5</span></pre>
			<pre><span>Key:&nbsp; 5:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed: &nbsp;&nbsp;&nbsp;0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 6</span></pre>
			<pre><span>Key:&nbsp; 6:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 7</span></pre>
			<pre><span>Key:&nbsp; 7:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 8</span></pre>
			<pre><span>Key:&nbsp; 8:&nbsp; Keyblocks used:&nbsp; 99%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 3</span></pre>
			<pre><span>- check data record references index: 9</span></pre>
			<pre><span>Key:&nbsp; 9:&nbsp; Keyblocks used:&nbsp; 98%&nbsp; Packed:&nbsp;&nbsp;&nbsp; 0%&nbsp; Max levels:&nbsp; 4</span></pre>
			<pre><span>Total:&nbsp;&nbsp;&nbsp; Keyblocks used:&nbsp;&nbsp; 9%&nbsp; Packed:&nbsp;&nbsp; 17%</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>- check records and index references</span></pre>
			<pre><span>[LOTS OF ROW NUMBERS DELETED]</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>Records:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1403698&nbsp;&nbsp; M.recordlength:&nbsp;&nbsp; 226&nbsp;&nbsp; Packed:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%</span></pre>
			<pre><span>Recordspace used:&nbsp;&nbsp;&nbsp; 100%&nbsp; Empty space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0%&nbsp; Blocks/Record: 1.00</span></pre>
			<pre><span>Record blocks:&nbsp;&nbsp; 1403698&nbsp;&nbsp; Delete blocks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Recorddata:&nbsp;&nbsp;&nbsp; 317235748&nbsp;&nbsp; Deleted data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>Lost space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; Linkdata:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>User time 1639.63, System time 251.61</span></pre>
			<pre><span>Maximum resident set size 0, Integral resident set size 0</span></pre>
			<pre><span>Non physical pagefaults 0, Physical pagefaults 10580, Swaps 0</span></pre>
			<pre><span>Blocks in 4 out 0, Messages in 0 out 0, Signals 0</span></pre>
			<pre><span>Voluntary context switches 10604, Involuntary context switches 122798</span></pre>
			<p>下面解釋<span><b><span>myisamchk</span></b></span>產生的訊息的類型。「<span>keyfile</span>」是索引檔案。「記錄」和「行」是同義詞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>MyISAM 
			file</span></p>
			<p><span>ISAM(</span>索引<span>)</span>檔案名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			File-version</span></p>
			<p><span>ISAM</span>格式的版本。當前總是<span>2</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Creation 
			time</span></p>
			<p>數據檔案建立的時間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Recover 
			time</span></p>
			<p>索引<span>/</span>數據檔案上次被重建的時間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Data 
			records</span></p>
			<p>在資料表中有多少記錄。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			blocks</span></p>
			<p>有多少刪除的塊仍然保留著空間。您可以最佳化資料表以使這個空間減到最小。參見<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>最佳化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Datafile 
			parts</span></p>
			<p>對動態記錄格式，這指出有多少數據塊。對於一個沒有碎片的最佳化過的資料表，這與<span>Data 
			records</span>相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			data</span></p>
			<p>不能回收的刪除數據有多少字節。您可以最佳化資料表以使這個空間減到最小。參見<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>最佳化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Datafile 
			pointer</span></p>
			<p>數據檔案指針的大小，以字節計。它通常是<span>2</span>、<span>3</span>、<span>4</span>或<span>5</span>個字節。大多數資料表用<span>2</span>個字節管理，但是目前這還不能從<strong><span
細明體;">MySQL</span></strong>控制。對固定資料表，這是一個記錄地址。對動態資料表，這是一個字節地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Keyfile 
			pointer</span></p>
			<p>索引檔案指針的大小，以字節計。它通常是<span>1</span>、<span>2</span>或<span>3</span>個字節。大多數資料表用<span> 
			2 </span>個字節管理，但是它自動由<strong><span>MySQL</span></strong>計算。它總是一個塊地址。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			datafile length</span></p>
			<p>資料表的數據檔案<span>(</span><span>.MYD</span>檔案<span>)</span>能夠有多長，以字節計。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			keyfile length</span></p>
			<p>資料表的鍵值檔案<span>(</span><span>.MYI</span>檔案<span>)</span>能夠有多長，以字節計。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp; </span><span>Recordlength</span></p>
			<p>每個記錄佔多少空間，以字節計。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Record 
			format</span></p>
			<p>用於儲存資料表行的格式。上面的例子使用<span><span>Fixed 
			length</span>。</span>其他可能的值是<span>Compressed</span>和<span>Packed</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>table 
			description</span></p>
			<p>在資料表中所有鍵值的列資料表。對每個鍵，給出一些底層的訊息：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Key</span></p>
			<p>該鍵的編號。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Start</span></p>
			<p>該索引部分從記錄的哪裡開始。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Len</span></p>
			<p>
			該索引部分是多長。對於緊湊的數字，這應該總是列的全長。對字串，它可以比索引的列的全長短些，因為您可能會索引到字串列的前綴。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Index</span></p>
			<p>
			<span>unique</span>或<span>multip</span>（<span>multiple)</span>。表明一個值是否能在該索引中存在多次。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Type</span></p>
			<p>該索引部分有什麼數據類型。這是一個<span>packed</span>、<span>stripped</span>或<span>empty</span>選項的<span>ISAM</span>數據類型。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>Root</span></p>
			<p>根索引塊的地址。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Blocksize</span></p>
			<p>每個索引塊的大小。預設是<span>1024</span>，但是從原始碼構建<span>MySQL</span>時，該值可以在編譯時改變。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><span>Rec/key</span></p>
			<p>
			這是由最佳化器使用的統計值。它告訴對該鍵的每個值有多少條記錄。唯一鍵總是有一個<span>1</span>值。在一個資料表被裝載後<span>(</span>或變更很大<span>)</span>，可以用<span><b><span>myisamchk 
			-a</span></b></span>更新。如果根本沒被更新，給定一個<span>30</span>的預設值。</p>
			<p>在上面例子的資料表中，第<span>9</span>個鍵有兩個<span>table 
			description</span>行。者說明它是有<span>2</span>個部分的多部鍵。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Keyblocks used</span></p>
			<p>鍵塊使用的百分比是什麼。當在例子中使用的資料表剛剛用<span><b><span>myisamchk</span></b></span>重新組織時，該值非常高<span>(</span>很接近理論上的最大值<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Packed</span></p>
			<p><strong>
			<span>
			MySQL</span></strong>試圖用一個通用後綴壓縮鍵。這只能被用於<span>CHAR</span><span>/</span><span>VARCHAR</span><span>/</span><span>DECIMAL</span>列的鍵。對於左部分類似的長字串，能顯著地減少使用空間。在上面的第<span>3</span>個例子中，第<span>4</span>個鍵是<span>10</span>個字元長，可以減少<span>60%</span>的空間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Max 
			levels</span></p>
			<p>對於該鍵的<span>B</span>樹有多深。有長鍵的大資料表有較高的值。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Records</span></p>
			<p>資料表中有多少行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			M.recordlength</span></p>
			<p>
			平均記錄長度。對於有定長記錄的資料表，這是準確的記錄長度，因為所有記錄的長度相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>Packed</span></p>
			<p><strong>
			<span>
			MySQL</span></strong>從字串的結尾去掉空格。<span>Packed</span>值表明這樣做達到的節約的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recordspace used</span></p>
			<p>數據檔案被使用的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Empty 
			space</span></p>
			<p>數據檔案未被使用的百分比。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Blocks/Record</span></p>
			<p>每個記錄的平均塊數<span>(</span>即，一個碎片記錄由多少個連接組成<span>)</span>。對固定格式資料表，這總是<span>1</span>。該值應該盡可能保持接近<span>1.0</span>。如果它變得太大，您可以重新組織資料表。參見<a href="optimization.html">第7章：</a><a href="optimization.html" title="Chapter 7. Optimization"><i>最佳化</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recordblocks</span></p>
			<p>多少塊<span>(</span>連結<span>)</span>被使用。對固定格式，它與記錄的個數相同。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Deleteblocks</span></p>
			<p>多少塊<span>(</span>連結<span>)</span>被刪除。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			Recorddata</span></p>
			<p>在數據檔案中使用了多少字節。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Deleted 
			data</span></p>
			<p>在數據檔案中多少字節被刪除<span>(</span>未使用<span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Lost 
			space</span></p>
			<p>
			如果一個記錄被更新為更短的長度，就損失了一些空間。這是所有這樣的損失之和，以字節計。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Linkdata</span></p>
			<p>當使用動態資料表格式，記錄碎片用指針連接<span>(</span>每個<span>4
			</span>～<span> 7</span>字節<span>)</span>。 
			 
			<span>Linkdata</span>指這樣的指針使用的內存量之和。</p>
			<p>如果一張資料表已經用<span><b><span>myisampack</span></b></span>壓縮了，<span><b><span>myisamchk 
			-d</span></b></span>打印每個資料表列的附加訊息。對於它的一個例子及其含義的描述，參見<a href="client-side-scripts.html#myisampack" title="8.2. myisampack — Generate Compressed, Read-Only MyISAM Tables">8.2節，「myisampack：生成壓縮、只讀MyISAM資料表」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="localisation"></a>
		5.10.&nbsp;MySQL本地化和國際應用</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#character-sets">
			5.10.1. 數據和排序用字元編碼</a></span></dt><dt><span class="section"><a href="database-administration.html#languages">
			5.10.2. 設置錯誤消息語言</a></span></dt><dt><span class="section"><a href="database-administration.html#adding-character-set">
			5.10.3. 新增新的字元編碼</a></span></dt><dt><span class="section"><a href="database-administration.html#character-arrays">
			5.10.4. 字元定義數組</a></span></dt><dt><span class="section"><a href="database-administration.html#string-collating">
			5.10.5. 字串比較支援</a></span></dt><dt><span class="section"><a href="database-administration.html#multi-byte-characters">
			5.10.6. 多字節字元支援</a></span></dt><dt><span class="section"><a href="database-administration.html#problems-with-character-sets">
			5.10.7. 字元編碼問題</a></span></dt><dt><span class="section"><a href="database-administration.html#time-zone-support">
			5.10.8. MySQL伺服器時區支援</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			本節描述如何配置伺服器來使用不同的字元編碼。還討論如何設置伺服器的時區並啟用各個連接的時區支援。<h3 class="title"><a name="character-sets"></a>
			5.10.1.&nbsp;數據和排序用字元編碼</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#german-character-set">
				5.10.1.1. 使用德國字元編碼</a></span></dt></dl></div><a class="indexterm" name="id2784650"></a><a class="indexterm" name="id2784657"></a><a class="indexterm" name="id2784667"></a>
			<p>預設情況下，<span>MySQL</span>使用<span>cp1252(Latin1)</span>字元編碼根據<span>Swedish/Finnish</span>規則進行排序。這些
			預設值適合美國和西歐大部分國家。</p>
			<p>所有<span>MySQL</span>二進制分發版用<span>--with-extra-charsets=complex</span>編譯而成。可以在所有標準程式中新增代碼，使它們可以處理<span>latin1</span>和所有多字節二進制字元編碼。其它字元編碼根據需要從字元編碼定義檔案載入。</p>
			<p>字元編碼確定在名稱中使用什麼字元。它還確定如何用<span>SELECT</span>語句的<span>ORDER 
			BY</span>和<span>GROUP 
			BY</span>子句對字串進行排序。</p>
			<p>還可以在啟動伺服器時用<span>--default-character-set</span>選項更改字元編碼。字元編碼可以用<span>--with-charset=<i>charset</i></span>和<span>--with-extra-charsets=<i>list-of-charsets</i> 
			| complex | all | none</span>選項來<strong><span>configure</span></strong>，字元編碼配置檔案列於<span>SHAREDIR/charsets/Index</span>。參見<a href="installing.html#configure-options" title="2.8.2. Typical configure Options">2.8.2節，「典型配置選項<span><strong class="command"></strong></span>」</a>。</p>
			<p>還可以在您啟動伺服器時用<span>--default-collation</span>選項更改字元編碼
			校對規則。校對規則必須是預設字元編碼的合法校對規則。<span>(</span>使用<span>SHOW 
			COLLATION</span>語句來確定每個字元編碼使用哪個校對規則）<span>。 </span>
			參見<a href="installing.html#configure-options" title="2.8.2. Typical configure Options">2.8.2節，「典型配置選項<span><strong class="command"></strong></span>」</a>。</p>
			<p>如果在運行<span>MySQL</span>時更改字元編碼，還會更改排序順序。結果是您必須對所有資料表運行<strong><span>myisamchk 
			-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span><span>
			</span>，或正確地對索引進行排序。</p>
			<p>當客戶端連接<span>MySQL</span>伺服器時，伺服器告訴客戶端伺服器的預設字元編碼是什麼。客戶端切換到該字元編碼進行連接。</p>
			<p>當轉義<span>SQL</span>查詢的字串時，您應使用<span>mysql_real_escape_string()</span>。<span>mysql_real_escape_string()</span>等價於舊的<span>mysql_escape_string()</span>函數，不同的是它使用<span>MYSQL</span>連接句柄作為第一個參數，以便轉義字元時可以使用相應的字元編碼。</p>
			<p>如果客戶端的編譯路徑不是伺服器的安裝目錄，並且配置<span>MySQL</span>時沒有包括<span>MySQL</span>二進制中的所有字元編碼，如果伺服器運行時需要使用客戶端設置的字元編碼之外的其它字元編碼，您必須告訴客戶端從哪裡找到更多的字元編碼。</p>
			<p>可以指定<span>--character-sets-dir</span>選項來資料表示動態<span>MySQL</span>字元編碼所保存目錄的路徑。例如，可以將下面的行放入選項檔案中：</p>
			<pre><span>[client]</span></pre>
			<pre><span>character-sets-dir=/usr/local/mysql/share/mysql/charsets</span></pre>
			<p>您可以強制客戶端使用專用字元編碼：</p>
			<pre><span>[client]</span></pre>
			<pre><span>default-character-set=</span><span><i><span>charset</span></i></span></pre>
			<p>但是一般情況不需要。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="german-character-set"></a>
				5.10.1.1.&nbsp;使用德國字元編碼</h4></div></div></div>
				<p>在<span>MySQL 5.1</span>中<span>,</span>分別指定字元編碼和
				校對規則。這說明如果您想使用<span>German</span>排序順序，您應選擇<span>latin1</span><span>
				</span>字元編碼和<span>latin1_german1_ci</span>或<span>latin1_german2_ci</span>校對規則。例如，要用<span>latin1_german1_ci</span>校對規則啟動伺服器，應使用<span>--character-set-server=latin1</span>和<span>--collation-server=latin1_german1_ci</span>選項。</p>
				<p>關於這兩種校對規則的不同之處，參見<a href="charset.html#charset-we-sets" title="10.10.2. West European Character Sets">10.10.2節，「西歐字元編碼」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="languages"></a>
			5.10.2.&nbsp;設置錯誤消息語言</h3></div></div></div><a class="indexterm" name="id2784935"></a><a class="indexterm" name="id2784946"></a><a class="indexterm" name="id2784956"></a><a class="indexterm" name="id2784966"></a></div><div class="section"><div class="titlepage"><div><div>
			預設情況下，<strong><span 
>mysqld</span></strong>用英語給出錯誤消息，但也可以用以下語言顯示：<span>Czech</span>、<span>Danish</span>、<span>Dutch</span>、<span>Estonian</span>、<span>French</span>、<span>German</span>、<span>Greek</span>、<span>Hungarian</span>、<span>Italian</span>、<span>Japanese</span>、<span>Korean</span>、<span>Norwegian</span>、<span>Norwegian-ny</span>、<span>Polish</span>、<span>Portuguese</span>、<span>Romanian</span>、<span>Russian</span>、<span>Slovak</span>、<span>Spanish</span>或<span> 
			Swedish</span>。<p>要想在啟動<strong><span 
>mysqld</span></strong>後用具體語言顯示錯誤消息，使用<span>--language</span>或<span>-L</span>選項。選項值可以為語言名稱或錯誤消息檔案的全路徑。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld --language=swedish</span></b></span></pre>
			<p>或：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld --language=/usr/local/share/swedish</span></b></span></pre>
			<p>語言名應為小寫。</p>
			<p>語言檔案位於<span>(</span>預設情況下<span>)MySQL</span>基本目錄的<span>share/<i>LANGUAGE</i></span>目錄下。</p>
			<p>要想更改錯誤消息檔案，應編輯<span>errmsg.txt</span>檔案，然後執行下面的命令以生成<span>errmsg.sys</span>檔案：</p>
			<pre><span>shell&gt; </span><span><b><span>comp_err errmsg.txt errmsg.sys</span></b></span></pre>
			<p>如果您升級到新版本的<span>MySQL</span>，記住使用新的<span>errmsg.txt</span>檔案來重新更改。</p>
			<h3 class="title"><a name="adding-character-set"></a>
			5.10.3.&nbsp;新增新的字元編碼</h3></div></div></div><a class="indexterm" name="id2785079"></a><a class="indexterm" name="id2785090"></a>
			<p>本節討論在<span>MySQL</span>中新增新字元編碼的程式。您必須有一個<span>MySQL</span>原始碼分發版。</p>
			<p>要選擇正確的程式，先確定字元編碼是簡單字元編碼還是複雜字元編碼：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果字元編碼不需要使用特殊字串校對規則程式進行排序，並且不需要多字節字元支援，則為簡單字元編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果需要上述某個特性，則為複雜字元編碼。</p>
			<p>例如，<span>latin1</span>和<span>danish</span>為簡單字元編碼，而<span>big5</span>和<span>czech</span>為複雜字元編碼。</p>
			<p>在下面的程式中，字元編碼名用<i><span  >MYSET</span></i>資料表示。</p>
			<p>對於簡單字元編碼，應：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span  >sql/share/charsets/Index</span>檔案最後新增<i><span  >MYSET</span></i>。並指定唯一的編號。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>建立檔案<span  >sql/share/charsets/<i>MYSET</i>.conf</span>。<span>(</span>您可以使用<span  >sql/share/charsets/latin1.conf</span>的備份檔案作為該檔案的基礎）<span>。
			</span></p>
			<p><b>該</b>檔案的語法很簡單：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>註釋從『<span>#</span>』字元開始，一直到該行末尾。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>各字之間用任意數量的空格間隔開。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>定義字元編碼時，每個字必須為十六進制格式的數字。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span  >ctype</span>數組佔據前<span>257</span>個字。<span  >to_lower[]</span>、<span  >to_upper[]</span>和<span  >sort_order[]</span>數組依次佔據<span>256</span>個字。</p>
			<p>參見<a href="database-administration.html#character-arrays" title="5.10.4. The Character Definition Arrays">5.10.4節，「字元定義數組」</a>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>將字元編碼名新增到<span>configurE.in</span>的<span  >CHARSETS_AVAILABLE</span>和<span  >COMPILED_CHARSETS</span>列。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>重新配置、編譯並測試。</p>
			<p>對於複雜字元編碼，應：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span>MySQL</span>原始碼分發版中建立檔案<span  >strings/ctype-<i>MYSET</i>.c</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span  >sql/share/charsets/Index</span>檔案最後新增<i><span  >MYSET</span></i>。並指定唯一的編號。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>看看已有的<span  >ctype-*.c</span>檔案<span>(</span>例如<span  >strings/ctype-big5.c</span><span>)</span>，看看需要定義什麼。請注意檔案中的數組名必須為<span  >ctype_<i>MYSET</i></span>、<span  >to_lower_<i>MYSET</i></span>等等。對應簡單字元編碼的數組。參見<a href="database-administration.html#character-arrays" title="5.10.4. The Character Definition Arrays">5.10.4節，「字元定義數組」</a>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在檔案頂部，新增註釋：</p>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span></pre>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* This comment is parsed by configure to create ctype.c,</span></pre>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* so don&#39;t change it unless you know what you are doing.</span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*</span></pre>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. number_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>MYNUMBER</span></i></span></pre>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. strxfrm_multiply_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>N</span></i></span></pre>
			<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* .configure. mbmaxlen_</span><span><i><span>MYSET</span></i></span><span>=</span><span><i><span>N</span></i></span></pre>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*/</span></pre>
			<p><strong>
			<span>configure</span></strong>程式使用該註釋自動將字元編碼包括進<span>MySQL</span>庫中。</p>
			<p>在下面章節中解釋<span>strxfrm_multiply</span>和<span>mbmaxlen</span><span>
			</span>行。只有需要字串比較函數或多字節字元編碼函數時，才需要單獨將它們包括進來。</p>
			<p>
			<span>13.</span>然後您應建立下面的函數：</p>
			<ol start="13" type="1">
				<ul type="disc">
					<li>
					<span  >
					my_strncoll_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_strcoll_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_strxfrm_<i>MYSET</i>()</span><span> </span>
					</li>
					<li>
					<span  >
					my_like_range_<i>MYSET</i>()</span><span> </span>
					</li>
				</ul>
			</ol>
			<p>參見<a href="database-administration.html#string-collating" title="5.10.5. String Collating Support">5.10.5節，「字串比較支援」</a></p>
			<p>
			<span>14.</span>將字元編碼名新增到<span>configurE.in</span>的<span  >CHARSETS_AVAILABLE</span>和<span  >COMPILED_CHARSETS</span>列。</p>
			<p>
			<span>15.</span>重新配置、編譯並測試。</p>
			<p><span  >sql/share/charsets/README</span>檔案中包括詳細的說明。</p>
			<p>如果您想要<span>MySQL</span>分發中的字元編碼，請向<span>MySQL</span>內部郵件系統發郵件。參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The MySQL郵件列資料表」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="character-arrays"></a>
			5.10.4.&nbsp;字元定義數組</h3></div></div></div>
			<p>
			<span>to_lower[]</span>和<span>to_upper[]</span>是簡單數組，含有小寫和大寫字元，對應字元編碼的每個成員。例如：</p>
			<pre><span>to_lower[&#39;A&#39;] should contain &#39;a&#39;</span></pre>
			<pre><span>to_upper[&#39;a&#39;] should contain &#39;A&#39;</span></pre>
			<p>
			<span>sort_order[]</span>是一個映射，資料表示如何排列字元的順序，以便進行比較和排序。通常<span>(</span>但非對於所有字元編碼<span>)</span>與<span>to_upper[]</span>相同，說明排序對大小寫敏感。<span>MySQL</span>排序字元基於<span>sort_order[]</span>元素的值。對於更加複雜的排序規則，參見<a href="database-administration.html#string-collating" title="5.10.5. String Collating Support">5.10.5節，「字串比較支援」</a>的字串
			校對規則討論。</p>
			<p>
			<span>ctype[]</span>是一個位數組，每個字元為一個元素。<span>(</span>請注意字元值索引<span>to_lower[]</span>、<span>to_upper[]</span>和<span>sort_order[]</span>，但用字元值<span>+ 
			1</span>索引<span>ctype[]</span>。這是傳統的轉換方法，能夠處理<span>EOF</span>）<span>。</span></p>
			<p>
			<span>m_ctype.h</span>中有下面的位掩碼定義：</p>
			<pre><span>#define _U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Uppercase */</span></pre>
			<pre><span>#define _L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Lowercase */</span></pre>
			<pre><span>#define _N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Numeral (digit) */</span></pre>
			<pre><span>#define _S&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;010&nbsp;&nbsp;&nbsp;&nbsp; /* Spacing character */</span></pre>
			<pre><span>#define _P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 020&nbsp;&nbsp;&nbsp;&nbsp; /* Punctuation */</span></pre>
			<pre><span>#define _C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 040&nbsp;&nbsp;&nbsp;&nbsp; /* Control character */</span></pre>
			<pre><span>#define _B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0100&nbsp;&nbsp;&nbsp; /* Blank */</span></pre>
			<pre><span>#define _X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0200&nbsp;&nbsp;&nbsp; /* heXadecimal digit */</span></pre>
			<p>每個字元的<span>ctype[]</span>條目應為相應的描述字元的位掩碼值的聯合。例如，<span>&#39;A&#39;</span>是大寫字元<span>(</span><span>_U</span><span>)</span>以及十六進制整數<span>(</span><span>_X</span><span>)</span>，因此<span>ctype[&#39;A&#39;+1]</span>應包含 
			值：</p>
			<p><span>_U + _X = 01 + 0200 = 0201</span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="string-collating"></a>
			5.10.5.&nbsp;字串比較支援</h3></div></div></div><a class="indexterm" name="id2785702"></a><a class="indexterm" name="id2785712"></a></div><div class="section"><div class="titlepage"><div><div>
			如果語言的排序規則比較複雜，不能用簡單<span>sort_order[]</span>資料表來處理，需要使用字串比較函數。<p>
			最好的文檔是已有字元編碼。以<span>big5</span>、<span>czech</span>、<span>gbk</span>、<span>sjis</span>和<span>tis160</span>字元編碼作為例子。</p>
			<p>您必須在檔案頂部的特殊註釋處指定<span>strxfrm_multiply_<i>MYSET</i>=<i>N</i></span>值。<span><i><span>N</span></i></span>應設置為字串在<span>my_strxfrm_<i>MYSET</i></span>過程中可能增長的最大比例<span>(</span>必須為正整數<span>)</span>。</p>
			<h3 class="title"><a name="multi-byte-characters"></a>
			5.10.6.&nbsp;多字節字元支援</h3></div></div></div><a class="indexterm" name="id2785790"></a><a class="indexterm" name="id2785800"></a></div><div class="section"><div class="titlepage"><div><div>
			如果您想要新增包括多字節字元的新字元編碼支援，需要使用多字節字元函數。<p>最好的文檔是已有字元編碼。以<span>euc_kr</span>、<span>gb2312,gbk</span>、<span>sjis</span>和<span>ujis</span>字元編碼作為例子。這些字元編碼位於<span>strings</span>目錄的<span>ctype-<i>charset</i>.c</span>檔案中。</p>
			<p>必須在檔案頂部的特殊註釋處指定<span>mbmaxlen_<i>MYSET</i>=<i>N</i></span>值。<span><i><span>N</span></i></span>應設置為字元編碼內最長字元的字節數。</p>
			<h3 class="title"><a name="problems-with-character-sets"></a>
			5.10.7.&nbsp;字元編碼問題</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果您想要使用沒有編譯為二進制的字元編碼，可能會遇到下面的問題：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>您的程式的字元編碼保存路徑不正確。<span>(</span>預設為<span>/usr/local/mysql/share/mysql/charsets</span><span>)</span>。可以在運行有問題的程式時通過<span>--character-sets-dir</span>選項來修復。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>字元編碼為多字節字元編碼，不能動態載入。在這種情況下，您必須重新編譯程式，以支援字元編碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>字元編碼為動態字元編碼，但您沒有對應的配置檔案。在這種情況下，您應從新<span>MySQL</span>分發安裝該字元編碼的配置檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果<span>Index</span>檔案沒有包含字元編碼名，程式將顯示下面的錯誤消息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ERROR 1105: File &#39;/usr/local/share/mysql/charsets/?.conf&#39;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>not found (Errcode</span>：<span>2)</span></pre>
			<p>在這種情況下，您應獲得新<span>Index</span>檔案或在當前檔案中手動新增字元編碼。</p>
			<p>對於<span>MyISAM</span>資料表，可以用<strong><span>myisamchk 
			-dvv </span></strong><span><b><i>
			<span>tbl_name</span></i></b></span>檢查資料表的字元編碼名和編號。</p>
			<h3 class="title"><a name="time-zone-support"></a>
			5.10.8.&nbsp;MySQL伺服器時區支援</h3></div></div></div>
			<p><span>&nbsp;MySQL</span>伺服器有幾個時區設置：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>系統時區。伺服器啟動時便試圖確定主機的時區，用它來設置<span>system_time_zone</span>系統變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>伺服器當前的時區。全局系統變數<span>time_zone</span>資料表示伺服器當前使用的時區。初使值為<span>&#39;SYSTEM&#39;</span>，說明伺服器時區與系統時區相同。可以用<span>--default-time-zone=<i>timez</i></span>選項顯式指定初使值。如果您有<span>SUPER</span><span>
			</span>權限，可以用下面的語句在運行時設置全局變數值：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET GLOBAL time_zone = <i>timezone</i>;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>每個連接的時區。每個客戶端連接有自己的時區設置，用會話<span>time_zone</span>變數給出。其初使值與全局變數<span>time_zone</span>相同，但可以用下面的語句重設：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>mysql&gt; </span><span><b><span>SET time_zone = <i>timezone</i>;</span></b></span></pre>
			<p>可以用下面的方法查詢當前的全局變數值和每個連接的時區：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT @@global.time_zone, @@session.time_zone;</span></b></span></pre>
			<p><span><i>
			<span>timezone</span></i></span>值為字串，資料表示<span>UTC</span>的偏移量，例如<span>&#39;+10:00&#39;</span>或<span>&#39;-6:00&#39;</span>。如果已經建立並裝入<span>mysql</span>資料庫中的時區相關資料表，您還可以使用命名的時區，例如<span>&#39;Europe/Helsinki&#39;</span>、<span>&#39;US/Eastern&#39;</span>或<span>&#39;MET&#39;</span>。值<span>&#39;SYSTEM&#39;</span>說明該時區應與系統時區相同。時區名對大小寫不敏感。</p>
			<p><span>MySQL</span>安裝程式在<span>mysql</span>資料庫中建立時區資料表，但不裝載。您必須手動裝載。<span>(</span>如果您正從以前的版本升級到<span>MySQL 
			4.1.3</span>或更新版本，您應通過升級<span>mysql</span>資料庫來建立資料表。參見<a href="installing.html#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>中的說明）<span>。</span></p>
			<p>如果您的系統有自己的時區訊息資料庫<span>(</span>描述時區的一系列檔案<span>)</span>，應使用<strong><span>mysql_tzinfo_to_sql</span></strong>程式來填充時區資料表。示範系統如<span>Linux</span>、<span>FreeBSD</span>、<span>Sun 
			Solaris</span>和<span>Mac OS X</span>。這些檔案的可能位置為<span>/usr/share/zoneinfo</span>目錄。如果您的系統沒有時區訊息資料庫，可以使用本節後面描述的下載的軟件包。</p>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>程式用來裝載時區資料表。在命令行中，將時區訊息目錄路徑名傳遞到<strong><span>mysql_tzinfo_to_sql</span></strong>並輸出發送到<strong><span>mysql</span></strong>程式。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql</span></b></span></pre>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>讀取系統時區檔案並生成<span>SQL</span>語句。<strong><span>mysql</span></strong>處理這些語句並裝載時區資料表。</p>
			<p><strong><span>
			mysql_tzinfo_to_sql</span></strong>還可以用來裝載單個時區檔案，並生成閏秒訊息。</p>
			<p>要想裝載對應時區<span><i><span>tz_name</span></i></span>的單個時區檔案<span><i><span>tz_file</span></i></span>，應這樣使用<strong><span 
>mysql_tzinfo_to_sql</span></strong>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql <i>tz_file</i> <i>tz_name</i> | mysql -u root mysql</span></b></span></pre>
			<p>如果您的時區需要計算閏秒，按下面方法初使化閏秒訊息，其中<span><i><span>tz_file</span></i></span>是時區檔案名：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql_tzinfo_to_sql --leap <i>tz_file</i> | mysql -u root mysql</span></b></span></pre>
			<p>如果您的系統沒有時區訊息資料庫<span> (</span>例如，<span>Windows</span>或<span>HP-UX)</span>，您可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/timezones.html">http://dev.mysql.com/downloads/timezones.html</a></span>下載預構建時區資料表軟件包。該軟件包包含<span>MyISAM</span>時區資料表所用的<span>.frm</span>、<span>.MYD</span>和<span>.MYI</span>檔案。這些資料表應屬於<span>mysql</span>資料庫，因此應將這些檔案放到<span>MySQL</span>伺服器數據目錄的<span>mysql</span>子目錄。操作時應關閉伺服器。</p>
			<p><strong><span>警告！</span></strong>如果您的系統有時區訊息資料庫，請不要使用下載的軟件包。而應使用<strong><span>mysql_tzinfo_to_sql</span></strong>實用工具！否則，<span>MySQL</span>和系統上其它應用程式處理日期時間的方法會有所不同。</p>
			<p>關於在複製時時區設置相關請查閱<a href="replication.html#replication-features" title="6.7. Replication Features and Known Problems">6.7節，「複製特性和已知問題」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="log-files"></a>
		5.11.&nbsp;MySQL日誌檔案</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#error-log">
			5.11.1. 錯誤日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#query-log">
			5.11.2. 通用查詢日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#binary-log">
			5.11.3. 二進制日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#slow-query-log">
			5.11.4. 慢速查詢日誌</a></span></dt><dt><span class="section"><a href="database-administration.html#log-file-maintenance">
			5.11.5. 日誌檔案維護</a></span></dt></dl></div><a class="indexterm" name="id2786354"></a>
		<p><span>MySQL</span>有幾個不同的日誌檔案，可以幫助您找出<strong><span>mysqld</span></strong>內部發生的事情：</p>
		<table border="1" cellpadding="0" id="table18">
			<tr>
				<td>
				<p><strong><span>日誌檔案</span></strong></td>
				<td>
				<p><strong><span>
				記入檔案中的訊息類型</span></strong></td>
			</tr>
			<tr>
				<td>
				<p>錯誤日誌</td>
				<td>
				<p>記錄啟動、運行或停止<strong><span
  >mysqld</span></strong><b>時出</b>現的問題。</td>
			</tr>
			<tr>
				<td>
				<p>查詢日誌</td>
				<td>
				<p>記錄建立的客戶端連接和執行的語句。</td>
			</tr>
			<tr>
				<td>
				<p>更新日誌</td>
				<td>
				<p>記錄更改數據的語句。不<span>贊成使用該日誌。</span></td>
			</tr>
			<tr>
				<td>
				<p>二進制日誌</td>
				<td>
				<p>記錄所有更改數據的語句。還用於複製。</td>
			</tr>
			<tr>
				<td>
				<p>慢日誌</td>
				<td>
				<p>記錄所有執行時間超過<span>long_query_time</span>秒的所有查詢或不使用索引的查詢。</td>
			</tr>
		</table>
		<p>預設情況下，所有日誌建立於<strong><span>mysqld</span></strong>數據目錄中。通過刷新日誌，您可以強制 
		<strong><span>mysqld</span></strong>來關閉和重新打開日誌檔案（或者在某些情況下切換到一個新的日誌）。當您執行一個<span>FLUSH 
		LOGS</span>語句或執行<strong><span 
>mysqladmin flush-logs</span></strong>或<strong><span>mysqladmin 
		refresh</span></strong>時，出現日誌刷新。參見<a href="sql-syntax.html#flush" title="13.5.5.2. FLUSH Syntax">13.5.5.2節，「FLUSH語法」</a>。</p>
		<p>如果您正使用<span>MySQL</span>複製功能，從複製伺服器將維護更多日誌檔案，被稱為接替日誌。相關討論參見<a href="replication.html">第6章：</a><a href="replication.html" title="Chapter 6. Replication in MySQL"><i>MySQL中的複製</i></a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="error-log"></a>
			5.11.1.&nbsp;錯誤日誌</h3></div></div></div>
			<p>錯誤日誌檔案包含了當<strong><span 
>mysqld</span></strong>啟動和停止時，以及伺服器在運行過程中發生任何嚴重錯誤時的相關訊息。</p>
			<p>如果<strong><span>mysqld</span></strong>莫名其妙地死掉並且<strong><span>mysqld_safe</span></strong>需要重新啟動它，<strong><span>mysqld_safe</span></strong>在錯誤日誌中寫入一條<span  >restarted 
			mysqld</span>消息。如果<strong><span>mysqld</span></strong>注意到需要自動檢查或著修復一個資料表，則錯誤日誌中寫入一條消息。</p>
			<p>在一些作業系統中，如果<strong><span 
>mysqld</span></strong>死掉，錯誤日誌包含堆棧跟蹤訊息。跟蹤訊息可以用來確定<strong><span>mysqld</span></strong>死掉的地方。參見<a href="porting.html#using-stack-trace" title="E.1.4. Using a Stack Trace">E.1.4節，「使用堆棧跟蹤」</a>。</p>
			<p>可以用<span>--log-error[=<i>file_name</i>]</span>選項來指定<strong><span 
>mysqld</span></strong>保存錯誤日誌檔案的位置。如果沒有給定<span><i><span>file_name</span></i></span>值，<strong><span>mysqld</span></strong>使用錯誤日誌名<span><i><span>host_name.err
			</span></i></span>並在數據目錄中寫入日誌檔案。如果您執行<span>FLUSH 
			LOGS</span>，錯誤日誌用<span>-old</span>重新命名後綴並且<strong><span>mysqld</span></strong>建立一個新的空日誌檔案。<span>(</span>如果未給出<span>--log-error</span>選項，則不會重新命名）<span>。</span></p>
			<p>如果不指定<span>--log-error</span>，或者<span>(</span>在<span>Windows</span>中<span>)</span>如果您使用<span>--console</span>選項，錯誤被寫入標準錯誤輸出<span>stderr</span>。通常標準輸出為您的終端。</p>
			<p>在<span>Windows</span>中，如果未給出<span>--console</span>選項，錯誤輸出總是寫入<span>.err</span>檔案。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-log"></a>
			5.11.2.&nbsp;通用查詢日誌</h3></div></div></div><a class="indexterm" name="id2786662"></a><a class="indexterm" name="id2786669"></a></div><div class="section"><div class="titlepage"><div><div>
			如果您想要知道<strong><span 
>mysqld</span></strong>內部發生了什麼，您應該用<span>--log[=<i>file_name</i>]</span>或<span>-l 
			[<i>file_name</i>]</span>選項啟動它。如果沒有給定<span><i><span>file_name</span></i></span>的值，
			預設名是<span><i><span>host_name</span></i><span>.log</span></span><b>。</b>所有連接和語句被記錄到日誌檔案。當您懷疑在客戶端發生了錯誤並想確切地知道該客戶端發送給<strong><span>mysqld</span></strong>的語句時，該日誌可能非常有用<b>。</b><p>
			<strong><span>mysqld</span></strong>按照它接收的順序記錄語句到查詢日誌。這可能與執行的順序不同。這與更新日誌和二進制日誌不同，它們在查詢執行後，但是任何一個鎖釋放之前記錄日誌。<span>(</span>查詢日誌還包含所有語句，而二進制日誌不包含只查詢數據的語句）<span>。
			</span></p>
			<p>伺服器重新啟動和日誌刷新不會產生新的一般查詢日誌檔案<span>(</span>儘管刷新關閉並重新打開一般查詢日誌檔案<span>)</span>。在<span>Unix</span>中，您可以通過下面的命令重新命名檔案並建立一個新檔案：</p>
			<pre><span>shell&gt; </span><span><b><span>mv hostname.log hostname-old.log</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin flush-logs</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cp hostname-old.log to-backup-directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>rm hostname-old.log</span></b></span></pre>
			<p>在<span>Windows</span>中，伺服器打開日誌檔案期間您不能重新命名日誌檔案。您必須先停止伺服器然後重新命名日誌檔案。然後，重啟伺服器來建立新的日誌檔案。</p>
			<h3 class="title"><a name="binary-log"></a>
			5.11.3.&nbsp;二進制日誌</h3></div></div></div><a class="indexterm" name="id2786780"></a><a class="indexterm" name="id2786787"></a><a class="indexterm" name="id2786797"></a>
			<p>二進制日誌以一種更有效的格式，並且是事務安全的方式包含更新日誌中可用的所有訊息。</p>
			<p>二進制日誌包含了所有更新了數據或者已經潛在更新了數據（例如，沒有匹配任何行的一個<span>DELETE</span>）的所有語句。語句以「<span class="quote">事件</span>」的形式保存，它描述數據更改。</p>
			<p><strong><span>注</span></strong>釋：二進制日誌已經代替了老的更新日誌，更新日誌在<span>MySQL 
			5.1</span>中不再使用。</p>
			<p>
			二進制日誌還包含關於每個更新資料庫的語句的執行時間訊息。它不包含沒有修改任何數據的語句。如果您想要記錄所有語句（例如，為了識別有問題的查詢），您應使用一般查詢日誌。參見<a href="database-administration.html#query-log" title="5.11.2. The General Query Log">5.11.2節，「通用查詢日誌」</a>。</p>
			<p>二進制日誌的主要目的是在恢復使能夠最大可能地更新資料庫，因為二進制日誌包含備份後進行的所有更新。</p>
			<p>二進制日誌還用於在主複製伺服器上記錄所有將發送給從伺服器的語句。參見<a href="replication.html">第6章：</a><a href="replication.html" title="Chapter 6. Replication in MySQL"><i>MySQL中的複製</i></a>。</p>
			<p>運行伺服器時若啟用二進制日誌則性能大約慢<span>1%</span>。但是，二進制日誌的好處，即用於恢復並允許設置複製超過了這個小小的性能損失。</p>
			<p>當用<span>--log-bin[=<i>file_name</i>]</span>選項啟動時，<strong><span 
>mysqld</span></strong>寫入包含所有更新數據的<span>SQL</span>命令的日誌檔案。如果未給出<i><span  >file_name</span></i>值，
			預設名為<span>-bin</span>後面所跟的主機名。如果給出了檔案名，但沒有包含路徑，則檔案被寫入數據目錄。建議指定一個檔案名，原因參見<a href="problems.html#open-bugs" title="A.8.1. Open Issues in MySQL">A.8.1節，「MySQL中的打開事宜」</a>。</p>
			<p>如果您在日誌名中提供了延伸名<span>(</span>例如，<span  >--log-bin=<i>file_name.extension</i></span><span>)</span>，則延伸名被悄悄除掉並忽略。</p>
			<p><strong><span>mysqld</span></strong>在每個二進制日誌名後面新增一個數字延伸名。每次您啟動伺服器或刷新日誌時該數字則增加。如果當前的日誌大小達到<span>max_binlog_size</span>，還會自動建立新的二進制日誌。如果您正使用大的事務，二進制日誌還會超過<span>max_binlog_size</span>：事務全寫入一個二進制日誌中，絕對不要寫入不同的二進制日誌中。</p>
			<p>為了能夠知道還使用了哪個不同的二進制日誌檔案，<strong><span>mysqld</span></strong>還建立一個二進制日誌索引檔案，包含所有使用的二進制日誌檔案的檔案名。預設情況下與二進制日誌檔案的檔案名相同，延伸名為<span>&#39;.index&#39;</span>。您可以用<span>--log-bin-index[=<i>file_name</i>]</span>選項更改二進制日誌索引檔案的檔案名。當<strong><span>mysqld</span></strong>在運行時，不應手動編輯該檔案；如果這樣做將會使<strong><span>mysqld</span></strong>變得混亂。</p>
			<p>可以用<span>RESET 
			MASTER</span>語句刪除所有二進制日誌檔案，或用<span>PURGE 
			MASTER LOGS</span>只刪除部分二進制檔案。參見<a href="sql-syntax.html#reset" title="13.5.5.5. RESET Syntax">13.5.5.5節，「RESET語法」</a>和<a href="sql-syntax.html#replication-master-sql" title="13.6.1. SQL Statements for Controlling Master Servers">13.6.1節，「用於控制主伺服器的SQL語句」</a>。</p>
			<p>二進制日誌格式有一些已知限制，會影響從備份恢復。參見<a href="replication.html#replication-features" title="6.7. Replication Features and Known Problems">6.7節，「複製特性和已知問題」</a>。</p>
			<p>保存程式和觸發器的二進制日誌的描述參見<a href="stored-procedures.html#stored-procedure-logging" title="20.4. Binary Logging of Stored Routines and Triggers">20.4節，「儲存子程式和觸發程式的二進制日誌功能」</a>。</p>
			<p>可以使用下面的<strong><span 
>mysqld</span></strong>選項來影響記錄到二進制日誌知的內容。又見選項後面的討論。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--binlog-do-db=<i>db_name</i></span></p>
			<p>告訴主伺服器，如果當前的資料庫<span>(</span>即<span>USE</span>選定的資料庫<span>)</span>是<span><i><span>db_name</span></i></span>，應將更新記錄到二進制日誌中。其它所有沒有明顯指定的資料庫<span>&nbsp;
			</span>被忽略。如果使用該選項，您應確保只對當前的資料庫進行更新。</p>
			<p>對於<span>CREATE 
			DATABASE</span>、<span>ALTER 
			DATABASE</span>和<span>DROP 
			DATABASE</span>語句，有一個例外，即通過操作的資料庫來決定是否應記錄語句，而不是用當前的資料庫。</p>
			<p>一個不能按照期望執行的例子：如果用<span>binlog-do-db=sales</span>啟動伺服器，並且執行<span><span>USE 
			prices; UPDATE sales.january SET amount=amount+1000</span><span>；</span></span>，該語句不寫入二進制日誌。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--binlog-ignore-db=<i>db_name</i></span></p>
			<p>告訴主伺服器，如果當前的資料庫<span>(</span>即<span>USE</span>選定的資料庫<span>)</span>是<span><i><span>db_name</span></i></span>，不應將更新保存到二進制日誌中。如果您使用該選項，您應確保只對當前的資料庫進行更新。</p>
			<p>一個不能按照您期望的執行的例子：如果伺服器用<span>binlog-ignore-db=sales</span>啟動，並且執行<span><span>USE 
			prices; UPDATE sales.january SET amount=amount+1000</span><span>；</span></span>，該語句不寫入二進制日誌。</p>
			<p>類似於<span>--binlog-do-db</span>，對於<span>CREATE 
			DATABASE</span>、<span>ALTER 
			DATABASE</span>和<span>DROP 
			DATABASE</span>語句，有一個例外，即通過操作的資料庫來決定是否應記錄語句，而不是用當前的資料庫。</p>
			<p>要想記錄或忽視多個資料庫，使用多個選項，為每個資料庫指定相應的選項。</p>
			<p>伺服器根據下面的規則對選項進行評估，以便將更新記錄到二進制日誌中或忽視。請注意對於<span>CREATE</span><span>/</span><span>ALTER</span><span>/</span><span>DROP 
			DATABASE</span>語句有一個例外。在這些情況下，根據以下規則，所<i>建立、<em><span>修改或刪除的</span></em></i>資料庫將代替當前的資料庫。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>是否有<span>binlog-do-db</span>或<span>binlog-ignore-db</span>規則<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>沒有：將語句寫入二進制日誌並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：執行下一步。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有一些規則<span>(</span><span>binlog-do-db</span>或<span>binlog-ignore-db</span>或二者都有<span>)</span>。當前有一個資料庫<span>(</span><span>USE</span>是否選擇了資料庫<span>?)?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>沒有：<i>不要</i>寫入語句，並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：執行下一步。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有當前的資料庫。是否有<span>binlog-do-db</span>規則<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：當前的資料庫是否匹配<span>binlog-do-db</span>規則<span>?
			</span></p>
			<p >
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>有：寫入語句並退出。</p>
			<p >
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>沒有：不要寫入語句，退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>No</span>：執行下一步。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>有一些<span>binlog-ignore-db</span>規則。當前的資料庫是否匹配<span>binlog-ignore-db</span>規則<span>?
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有：不要寫入語句，並退出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>沒有：寫入查詢並退出。</p>
			<p>例如，只用<span>binlog-do-db=sales</span>運行的伺服器不將當前資料庫不為<span>sales</span>的語句寫入二進制日誌<span>(</span>換句話說，<span>binlog-do-db</span>有時可以資料表示「<span class="quote">忽視其它資料庫</span>」<span>)</span>。</p>
			<p>如果您正進行複製，應確保沒有從伺服器在使用舊的二進制日誌檔案，方可刪除它們。一種方法是每天一次執行<strong><span>mysqladmin 
			flush-logs</span></strong>並刪除三天前的所有日誌。可以手動刪除，或最好使用<span>PURGE 
			MASTER LOGS</span><span>(</span>參見<a href="sql-syntax.html#replication-master-sql" title="13.6.1. SQL Statements for Controlling Master Servers">13.6.1節，「用於控制主伺服器的SQL語句」</a><span>)</span>，該語句還會安全地更新二進制日誌索引檔案<span>(</span>可以採用日期參數<span>)</span>。</p>
			<p>具有<span>SUPER</span>權限的客戶端可以通過<span>SET 
			SQL_LOG_BIN=0</span>語句禁止將自己的語句記入二進制記錄。參見<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3節，「SET語法」</a>。</p>
			<p>您可以用<strong><span>mysqlbinlog</span></strong>實用工具檢查二進制日誌檔案。如果您想要重新處理日誌止的語句，這很有用。例如，可以從二進制日誌更新<span>MySQL</span>伺服器，方法如下：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqlbinlog log-file | mysql -h server_name</span></b></span></pre>
			<p>關於<strong><span>mysqlbinlog</span></strong>實用工具的詳細訊息以及如何使用它，參見<a href="client-side-scripts.html#mysqlbinlog" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6節，「mysqlbinlog：用於處理二進制日誌檔案的實用工具」</a>。</p>
			<p>如果您正使用事務，必須使用<span>MySQL</span>二進制日誌進行備份，而不能使用舊的更新日誌。</p>
			<p>查詢結束後、鎖定被釋放前或提交完成後則立即記入二進制日誌。這樣可以確保按執行順序記入日誌。</p>
			<p>對非事務資料表的更新執行完畢後立即保存到二進制日誌中。對於事務資料表，例如<span>BDB</span>或<span>InnoDB</span>資料表，所有更改資料表的更新<span>(</span><span>UPDATE</span>、<span>DELETE</span>或<span>INSERT</span><span>)
			</span>被緩存起來，直到伺服器接收到<span>COMMIT</span>語句。在該點，執行完<span>COMMIT</span>之前，<strong><span>mysqld</span></strong>將整個事務寫入二進制日誌。當處理事務的線程啟動時，它為緩衝查詢分配<span>binlog_cache_size</span>大小的內存。如果語句大於該值，線程則打開臨時檔案來保存事務。線程結束後臨時檔案被刪除。</p>
			<p>
			<span>Binlog_cache_use</span>狀態變數顯示了使用該緩衝區<span>(</span>也可能是臨時檔案<span>)</span>保存語句的事務的數量。<span>Binlog_cache_disk_use</span>狀態變數顯示了這些事務中實際上有多少必須使用臨時檔案。這兩個變數可以用於將<span>binlog_cache_size</span>調節到足夠大的值，以避免使用臨時檔案。</p>
			<p><span>max_binlog_cache_size(</span>預設<span>4GB)</span>可以用來限制用來緩存多語句事務的緩衝區總大小。如果某個事務大於該值，將會失敗並
			回滾。</p>
			<p>如果您正使用更新日誌或二進制日誌，當使用<span>CREATE 
			... SELECT</span><span> or </span>
			<span>INSERT ... SELECT</span>時，並行插入被轉換為普通插入。這樣通過在備份時使用日誌可以確保重新建立資料表的備份。</p>
			<p>請注意<span>MySQL 5.1</span>值的二進制日誌格式與以前版本的<span>MySQL</span>不同，因為複製改進了。參見<a href="replication.html#replication-compatibility" title="6.5. Replication Compatibility Between MySQL Versions">6.5節，「不同MySQL版本之間的複製相容性」</a>。</p>
			<p>預設情況下，並不是每次寫入時都將二進制日誌與硬盤同步。因此如果作業系統或機器<span>(</span>不僅僅是<span>MySQL</span>伺服器<span>)</span>崩潰，有可能二進制日誌中最後的語句丟失了。要想防止這種情況，您可以使用<span>sync_binlog</span>全局變數<span>(1</span>是最安全的值，但也是最慢的<span>)</span>，使二進制日誌在每<span><i><span>N</span></i></span>次二進制日誌寫入後與硬盤同步。參見<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3節，「伺服器系統變數」</a>。即使<span>sync_binlog</span>設置為<span>1,</span>出現崩潰時，也有可能資料表內容和二進制日誌內容之間存在不一致性。例如，如果使用<span>InnoDB</span>資料表，<span>MySQL</span>伺服器處理<span>COMMIT</span>語句，它將整個事務寫入二進制日誌並將事務提交到<span>InnoDB</span>中<span>。</span>如果在兩次操作之間出現崩潰，重啟時，事務被<span>InnoDB</span>回滾，但仍然存在二進制日誌中。可以用<span>--innodb-safe-binlog</span>選項解決該問題，可以增加<span>InnoDB</span>資料表內容和二進制日誌之間的一致性。<span>(</span>註釋：在<span>MySQL 
			5.1</span>中不需要<span>--innodb-safe-binlog</span>；由於引入了<span>XA</span>事務支援，該選項作廢了）<span>。
			</span></p>
			<p>該選項可以提供更大程度的安全，還應對<span>MySQL</span>伺服器進行配置，使每個事務的二進制日誌<span>(</span><span>sync_binlog 
			=1</span><span>)</span>和<span>(</span>預設情況為真<span>)</span><span>InnoDB</span>日誌與硬盤同步。該選項的效果是崩潰後重啟時，在滾回事務後，<span>MySQL</span>伺服器從二進制日誌剪切
			回滾的<span>InnoDB</span>事務。這樣可以確保二進制日誌反饋<span>InnoDB</span>資料表的確切數據等，並使從伺服器保持與主伺服器保持同步<span>(</span>不接收
			回滾的語句<span>)</span>。</p>
			<p>請注意即使<span>MySQL</span>伺服器更新其它儲存引擎而不是<span>InnoDB</span>，也可以使用<span>--innodb-safe-binlog</span>。在<span>InnoDB</span>崩潰恢復時，只從二進制日誌中刪除影響<span>InnoDB</span>資料表的語句<span>/</span>事務。如果崩潰恢復時<span>MySQL</span>伺服器發現二進制日誌變短了<span>(</span>即至少缺少一個成功提交的<span>InnoDB</span>事務<span>)</span>，如果<span>sync_binlog 
			=1</span>並且硬盤<span>/</span>檔案系統的確能根據需要進行同步<span>(</span>有些不需要<span>)</span>則不會發生，則輸出錯誤消息<span> 
			(&quot;</span>二進制日誌<span>&lt;</span>名<span>&gt;</span>比期望的要小<span>&quot;)</span>。在這種情況下，二進制日誌不準確，複製應從主伺服器的數據快照開始。</p>
			<p>寫入二進制日誌檔案和二進制日誌索引檔案的方法與寫入<span>MyISAM</span>資料表相同。參見<a href="problems.html#full-disk" title="A.4.3. How MySQL Handles a Full Disk">A.4.3節，「MySQL處理磁盤滿的方式」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="slow-query-log"></a>
			5.11.4.&nbsp;慢速查詢日誌</h3></div></div></div><a class="indexterm" name="id2787743"></a><a class="indexterm" name="id2787750"></a>
			<p>用<span>--log-slow-queries[=<i>file_name</i>]</span>選項啟動時，<strong><span>mysqld</span></strong>寫一個包含所有執行時間超過<span>long_query_time</span>秒的<span>SQL</span>語句的日誌檔案。獲得初使資料表鎖定的時間不算作執行時間。</p>
			<p>如果沒有給出<span><i><span>file_name</span></i></span>值，
			預設未主機名，後綴為<span>-slow.log</span>。如果給出了檔案名，但不是絕對路徑名，檔案則寫入數據目錄。</p>
			<p>語句執行完並且所有鎖釋放後記入慢查詢日誌。記錄順序可以與執行順序不相同。</p>
			<p>慢查詢日誌可以用來找到執行時間長的查詢，可以用於最佳化。但是，檢查又長又慢的查詢日誌會很困難。要想容易些，您可以使用<strong><span>mysqldumpslow</span></strong>命令獲得日誌中顯示的查詢摘要來處理慢查詢日誌。</p>
			<p>在<span>MySQL 5.1</span>的慢查詢日誌中，不使用索引的慢查詢同使用索引的查詢一樣記錄。要想防止不使用索引的慢查詢記入慢查詢日誌，使用<span>--log-short-format</span>選項。參見<a href="database-administration.html#server-options" title="5.3.1. mysqld Command-Line Options">5.3.1節，「<span><strong class="command">mysqld</strong></span>命令行選項」</a>。</p>
			<p>在<span>MySQL 5.1</span>中<span>,</span>通過<span>--log-slow-admin-statements</span>伺服器選項，您可以請求將慢管理語句，例如<span>OPTIMIZE 
			TABLE</span>、<span>ANALYZE 
			TABLE</span>和 <span>
			ALTER TABLE</span>寫入慢查詢日誌。</p>
			<p>用查詢緩存處理的查詢不加到慢查詢日誌中，因為資料表有零行或一行而不能從索引中受益的查詢也不寫入慢查詢日誌。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="log-file-maintenance"></a>
			5.11.5.&nbsp;日誌檔案維護</h3></div></div></div><a class="indexterm" name="id2787873"></a><a class="indexterm" name="id2787883"></a><a class="indexterm" name="id2787893"></a>
			<p><span>MySQL</span>伺服器可以建立各種不同的日誌檔案，從而可以很容易地看見所進行的操作。參見<a href="database-administration.html#log-files" title="5.11. The MySQL Log Files">5.11節，「MySQL日誌檔案」</a>。但是，您必須定期清理這些檔案，確保日誌不會佔用太多的硬盤空間。</p>
			<p>當啟用日誌使用<span>MySQL</span>時，您可能想要不時地備份並刪除舊的日誌檔案，並告訴<span>MySQL</span>開始記入新檔案。參見<a href="database-administration.html#backup" title="5.9.1. Database Backups">5.9.1節，「資料庫備份」</a>。</p>
			<p>在<span> Linux (</span><span>Redhat</span><span>)</span>的安裝上，您可為此使用<span>mysql-log-rotate</span>指令。如果您從<span>RPM</span>分發安裝<strong><span>MySQL</span></strong>，指令應該自動被安裝了。</p>
			<p>在其它系統上，您必須自己安裝短指令，您可從<span><b><span>cron</span></b></span>等入手處理日誌檔案。</p>
			<p>您可以通過<strong><span>mysqladmin 
			flush-logs</span></strong>或<span>SQL</span>語句<span>FLUSH 
			LOGS</span>來強制<strong><span
細明體;">MySQL</span></strong>開始使用新的日誌檔案。</p>
			<p>日誌清空操作做下列事情：</p>
			<ul type="disc">
				<li>如果使用標準日誌<span>(</span><span>--log</span><span>)</span>或慢查詢日誌<span>(</span><span>--log-slow-queries</span><span>)</span>，關閉並重新打開日誌檔案。<span>(</span>預設為<span>mysql.log</span>和<span>`hostname`-slow.log</span><span>)</span>。</li>
				<li>如果使用更新日誌<span>(</span><span>--log-update</span><span>)</span>或二進制日誌<span>(</span><span>--log-bin</span><span>)</span>，關閉日誌並且打開有更高序列號的新日誌檔案。</li>
			</ul>
			<p>如果您只使用更新日誌，您只需要重新命名日誌檔案，然後在備份前清空日誌。例如，您可以這樣做：</p>
			<pre><span>shell&gt; </span><span><b><span>cd mysql-data-directory</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mv mysql.log mysql.old</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin flush-logs</span></b></span></pre>
			<p>然後做備份並刪除<tt >「<span>mysql.old</span>」</tt>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="multiple-servers"></a>
		5.12.&nbsp;在同一台機器上運行多個MySQL伺服器</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-servers">
			5.12.1. 在Windows下運行多個伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-unix-servers">
			5.12.2. 在Unix中運行多個伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-server-clients">
			5.12.3. 在多伺服器環境中使用客戶端程式</a></span></dt></dl></div><a class="indexterm" name="id2788055"></a><a class="indexterm" name="id2788066"></a><a class="indexterm" name="id2788073"></a><a class="indexterm" name="id2788080"></a><a class="indexterm" name="id2788090"></a>
		<p>在一些情況下，您可能想要在同一台機器上運行多個<strong><span>mysqld</span><span
細明體;">伺服器</span></strong>。您可能想要測試一個新的<span>MySQL</span>發佈，同時不影響現有產品的設置。或者，您可能想使不同的用戶訪問來訪問不同的<strong><span>mysqld</span><span>伺服器</span></strong>以便他們自己來管理。<span>(</span>例如，您可能是一個<span>Internet</span>服務提供商，希望為不同的客戶來提供獨立的<span>MySQL</span>安裝）<span>。</span></p>
		<p>要想在一個單獨的機器上運行多個伺服器，每個伺服器必須有唯一的各運行參數值。這些值可以在命令行中設置或在選項檔案中設置。參見<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3節，「指定程式選項」</a>。</p>
		<p>至少下面的選項對每個伺服器必須是不同的：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--port=<i>port_num</i></span></p>
		<p>
		<span>--port</span>控制著<span>TCP/IP</span>連接的端口號。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--socket=<i>path</i></span></p>
		<p>
		<span>--socket</span>控制<span>Unix</span>中的<span>Unix</span>套接字檔案路徑和在<span>Windows</span>中的命名管道名稱。在<span>Windows</span>中，只有支援命名管道連接的伺服器才需要明確指定管道名稱。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--shared-memory-base-name=<i>name</i></span></p>
		<p>該選項當前只在<span>Windows</span>中使用。它指定<span>Windows</span>伺服器使用的、允許客戶端通過共享內存來連接的共享內存名。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--pid-file=<i>path</i></span></p>
		<p>該選項只在<span>Unix</span>中使用。它指出伺服器在其中寫入程序<span>ID</span>的檔案名。</p>
		<p>如果您使用下面的日誌檔案選項，對於每個伺服器來說，它們必須是不同的：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>&nbsp;
		</span>
		<span>--log=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-bin=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-update=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--log-error=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--bdb-logdir=<i>path</i></span></p>
		<p>日誌檔案選項的描述參見<a href="database-administration.html#log-file-maintenance" title="5.11.5. Log File Maintenance">5.11.5節，「日誌檔案維護」</a>。</p>
		<p>為了提高性能，您可以為每個伺服器指定下面選項的不同的值，以便在物理磁盤之間平均分配負荷：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--tmpdir=<i>path</i></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>--bdb-tmpdir=<i>path</i></span></p>
		<p>還推薦使用不同的臨時目錄，以便容易地確定哪個<span>MySQL</span>伺服器建立了給定的臨時檔案。</p>
		<p>一般情況，每個伺服器應還使用不同的數據目錄，可以通過<span>--datadir=path</span>選項來指定。</p>
		<p><strong><span>警告：</span></strong>一般情況，您決不要讓兩個伺服器更新相同資料庫中的數據。否則，如果您的作業系統不支援故障排除系統鎖定，該可能會導致非常奇怪的結果。如果（不理會該警告）運行的多個伺服器使用相同的數據目錄並且啟用了日誌記錄，您必須使用適當的選項來為每個伺服器指定唯一的日誌檔案名。否則，伺服器嘗試用相同的檔案來記錄日誌。請注意這種類型的設置只能在<span>MyISAM</span>和<span>MERGE</span>資料表上工作，對其它任何儲存引擎不起作用。</p>
		<p>多個伺服器共享一個數據目錄的警告也適用於<span>NFS</span>環境。允許多個<span>MySQL</span>伺服器通過<span>NFS</span>訪問一個共同的數據目錄是一個<em><span>非常不好的主義</span></em>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>主要問題是<span>NFS</span>存在速度瓶頸。它不是用於這種用途。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>用<span>NFS</span>的另一個冒險是您必須提出一個方法來確保兩個或多個伺服器不會相互干擾。<span>NFS</span>檔案的鎖定通常由<span>lockd</span>後台程式處理，但是目前，沒有一個運行平台能夠在每種情況下<span>100%</span>可靠地進行鎖定。</p>
		<p>使您更加容易：忘記在伺服器之間通過<span>NFS</span>共享數據目錄。一個較好的解決方案是使用包含幾個<span>CPU</span>並且和使用有效處理多線程的作業系統的機器。</p>
		<p>如果在不同的位置有多個<span>MySQL</span>的安裝，一般情況可以用<span>--basedir=path</span>選項為每個伺服器指定基本安裝目錄，使每個伺服器使用不同的數據目錄、日誌檔案和<span>PID</span>檔案。（所有這些值的
		預設值相對於根目錄來確定）。那樣的話， 
		您唯一需要指定的其它選項是<span>--socket</span>和<span>--port</span>選項。例如，假如使用<span>tar</span>檔案二進制分發版安裝不同的<span>MySQL</span>版本。這些安裝在不同的位置，因此可以使用各個安裝伺服器相應的根目錄中的<strong><span>bin/mysqld_safe</span></strong>命令<strong><span>來</span></strong>啟動伺服器。<strong><span>mysqld_safe</span></strong>確定正確的<span>--basedir</span>選項傳遞給<strong><span 
>mysqld</span></strong>，您僅需要為<strong><span>mysqld_safe</span></strong>指定<span>--socket</span>和<span>--port</span>選項。</p>
		<p>
		正如下面幾節所討論的那樣，可以通過設置環境變數或用指定的命令行選項來啟動更多的伺服器。但是，如果您需要在一個更穩定的基礎上運行多個伺服器，一個更方便的方法是使用選項檔案來為每個伺服器指定那些選項值，它對每個伺服器必須是唯一的。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-windows-servers"></a>
			5.12.1.&nbsp;在Windows下運行多個伺服器</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#multiple-windows-command-line-servers">
				5.12.1.1. 在命令行中啟動多個Windows伺服器</a></span></dt><dt><span class="section"><a href="database-administration.html#multiple-windows-services">
				5.12.1.2. 做為服務啟動多個Windows伺服器</a></span></dt></dl></div>
			<p>在<span>Windows</span>中，可以從命令行手動啟動來運行多個伺服器，每個伺服器使用合適的操作參數。在基於<span>Windows 
			NT</span>的系統中，安裝幾個伺服器時，您還有將多個伺服器安裝為<span>Windows</span>服務並運行的選項。關於從命令行運行<span>MySQL</span>伺服器或作為服務運行的一般說明在
        <a href="installing.html#windows-installation" title="2.3. Installing MySQL on Windows">
			2.3節，「在Windows上安裝MySQL」</a>中給出。本節描述怎樣確保您用不同的啟動選項值（對於每個伺服器必須是唯一的，例如數據目錄）啟動各個伺服器。這些選項的描述見<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12節，「在同一台機器上運行多個MySQL伺服器」</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="multiple-windows-command-line-servers"></a>
				5.12.1.1.&nbsp;在命令行中啟動多個Windows伺服器</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				為了從命令行手動啟動多個伺服器，可以在命令行中或在選項檔案中指定適當的選項。把選項放在選項檔案中比較方便，但是需要確保每個伺服器可以獲得自己的選項。為了實現，為每個建立一個選項檔案，並且運行服務時通過<span  >--defaults-file</span>選項告訴伺服器選項檔案名。<p>
				假設您想要在端口<span>3307</span>使用數據目錄<span>C:\mydata1</span>運行<strong><span>mysqld</span></strong>，並且想在端口<span>3308</span>使用數據目錄<span>C:\mydata1</span>運行<strong><span>mysqld-max</span></strong>。<span>(</span>要想這樣做，啟動伺服器之前要確保，每個數據目錄存在並且有自己的<span>mysql</span>資料庫拷貝，它包含
				授權資料表）<span>。
				</span></p>
				<p>然後建立兩個選項檔案。例如，建立一個檔案名為<span>C:\my-opts1.cnf</span>的配置檔案，它看起來像這個樣子：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir = C:/mydata1</span></pre>
				<pre><span>port = 3307</span></pre>
				<p>建立第二個檔案名為<span>C:\my-opts1.cnf</span>的配置檔案，它看起來像這個樣子：</p>
				<pre><span>mysqld]</span></pre>
				<pre><span>datadir = C:/mydata2</span></pre>
				<pre><span>port = 3308</span></pre>
				<p>然後，用它們自己的選項檔案啟動每個伺服器：</p>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld --defaults-file=C:\my-opts1.cnf</span></b></span></pre>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld-max --defaults-file=C:\my-opts2.cnf</span></b></span></pre>
				<p>在<span>NT</span>中，每個伺服器在前台啟動（伺服器退出前，不會顯示新的提示符）；需要在兩個控制台窗口中執行這兩個命令。</p>
				<p>要想關閉伺服器，必須連接到相應的端口號：</p>
				<p>
				<span  >C:\&gt;
				</span><b><span>C:\mysql\bin\mysqladmin 
				--port=3307 shutdown</span></b></p>
				<p>
				<span  >C:\&gt;
				</span><b><span>C:\mysql\bin\mysqladmin 
				--port=3308 shutdown</span></b></p>
				<p>如剛才所討論的，伺服器配置允許客戶端通過<span>TCP/IP</span>來連接。如果您的<span>Windows</span>版本支援命名管道並且您想允許命名管道連接，使用<strong><span>mysqld-nt</span></strong>或<strong><span>mysqld-max-nt</span></strong>伺服器並指定啟用命名管道並且指定管道名的選項。支援命名管道連接的每個伺服器必須使用一個唯一的管道名。例如，<span>C:\my-opts1.cnf</span>檔案可能像這樣來書寫：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir = C:/mydata1</span></pre>
				<pre><span>port = 3307</span></pre>
				<pre><span>enable-named-pipe</span></pre>
				<pre><span>socket = mypipe1</span></pre>
				<p>然後，這樣啟動伺服器：</p>
				<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqld-nt --defaults-file=C:\my-opts1.cnf</span></b></span></pre>
				<p>同樣修改第<span>2</span>個伺服器使用的<span>C:\my-opts2.cnf</span>檔案。</p>
				<h4 class="title"><a name="multiple-windows-services"></a>
				5.12.1.2.&nbsp;做為服務啟動多個Windows伺服器</h4></div></div></div>
				<p>在基於<span>NT</span>的系統中，<span>MySQL</span>伺服器可以以<span>Windows</span>服務的方式來運行。安裝、控制和刪除單個<span>MySQL</span>服務的過程描述見<a href="installing.html#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12節，「以Windows服務方式啟動MySQL」</a>。</p>
				<p>您還可以以服務的方式安裝多個<span>MySQL</span>伺服器。此時，除了所有參數對每個伺服器必須是唯一的，您還必須確保每個伺服器使用不同的服務名。</p>
				<p>在下面的說明中，假設您想要運行<strong><span>mysqld-nt</span></strong>伺服器的兩個不同的版本，它們分別安裝在<span>C:\mysql-4.1.8</span>和<span>C:\mysql-5.1.2-alpha</span>目錄中。<span>(</span>可能存在這種情況，如果您正在運行版本<span>4.1.8</span>作為您的產品伺服器，還想使用<span>5.1.2-alpha</span>版本來進行測試）<span>。
				</span></p>
				<p>當用<span  >--install</span>或<span  >--install-manual</span>選項安裝一個<span>MySQL</span>服務時，應遵從以下原則：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您沒有指定服務名，伺服器使用預設的<span>MySQL</span>服務名，從標準選項檔案的<span>[mysqld]</span>組中讀取選項。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您在<span  >--install</span>選項後指定了服務名，伺服器忽略<span>[mysqld]</span>選項組，從具有相同名的組中讀取選項作為服務名。伺服器從標準選項檔案中讀取選項。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您在服務名後面指定一個<span>--defaults-file</span>選項，伺服器忽略標準選項檔案，只從命名的檔案的<span>[mysqld]</span>組讀取選項。</p>
				<p><strong><span>注</span></strong>釋：<span>MySQL 
				4.0.17</span>之前，只有使用預設服務名（<span><span>MySQL</span><span>）</span></span>安裝的一個伺服器或使用服務名<strong><span>mysqld</span></strong>顯式安裝的一個伺服器從標準選項檔案讀<span>[mysqld]</span>組。到<span>4.0.17</span>時，如果伺服器讀標準選項檔案，則它們均讀<span>[mysqld]</span>組，即使它們安裝時使用了另一個服務名。這樣允許您為選項使用<span>[mysqld]</span>組，用於所有<span>MySQL</span>伺服器，並將根據每個伺服器命名的選項組用於該伺服器<span>，即使用那個服務名安裝的伺服器。</span></p>
				<p>
				根據前面敘述，您可以通過幾個方法來設置多個伺服器。下面的說明描述了一些示範。在嘗試之前，應確保您首先關閉並且卸載了所有已有的<span>MySQL</span>伺服器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>方法<span>1</span>：</span></strong>在一個標準選項檔案中指定所有伺服器選項。要想這樣做，為每個伺服器使用不同的服務名。假設您想使用服務名<span>mysqld1</span>運行<span>4.1.8</span>版的<strong><span>mysqld-nt</span><span>並</span></strong>使用服務名<span>mysqld2</span>運行<span>5.1.2-alpha</span>版的<strong><span>mysqld-n</span></strong><b><span>t</span></b>。在這種情況下，您可以為<span>4.1.8</span>使用<span>[mysqld1]</span>組，為<span>5.1.2-alpha</span>使用<span>[mysqld2]</span>組。例如，您可以像這樣建立 
				<span>C:\my.cnf</span>檔案：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># options for mysqld1 service</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[mysqld1]</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>basedir = C:/mysql-4.1.8</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>port = 3307</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>enable-named-pipe</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>socket = mypipe1</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span># options for mysqld2 service</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>[mysqld2]</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>basedir = C:/mysql-5.1.2-alpha</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>port = 3308</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>enable-named-pipe</span></pre>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>socket = mypipe2</span></pre>
				<p>如下面所示安裝伺服器，使用伺服器的全路徑名來確保<span>Windows</span>為每個服務註冊正確的可執行程式：</p>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-4.1.8\bin\mysqld-nt --install mysqld1</span></b></span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-5.1.2-alpha\bin\mysqld-nt --install mysqld2</span></b></span></pre>
				<p>為了啟動伺服器，使用服務管理器，或用帶有適當的服務名的<strong><span>NET 
				START</span></strong>：</p>
				<p>
				<span  >C:\&gt;
				</span><b><span>NET START 
				mysqld1</span></b></p>
				<p>
				<span  >C:\&gt;
				</span><b><span>NET START 
				mysqld2</span></b></p>
				<p>要想停止服務，使用服務管理器，或用帶有適當的服務名的<strong><span>NET 
				STOP</span></strong>：</p>
				<pre ><span>C:\&gt; </span><span><b><span>NET STOP mysqld1</span></b></span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>NET STOP mysqld2</span></b></span></pre>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>方法<span>2</span>：</span></strong>為每個伺服器用不同的檔案指定選項，當您安裝服務時使用<span>--defaults-file</span>告訴每個伺服器使用什麼檔案。此時，每個檔案應用一個<span>[mysqld]</span>組列出選項。</p>
				<p>使用這種方法為<span>4.1.8</span>版本的<strong><span>mysqld-nt</span></strong>指定選項，應像這樣建立一個<span>C:\my-opts1.cnf</span>檔案：</p>
				<pre ><span>[mysqld]</span></pre>
				<pre ><span>basedir = C:/mysql-4.1.8</span></pre>
				<pre ><span>port = 3307</span></pre>
				<pre ><span>enable-named-pipe</span></pre>
				<pre ><span>socket = mypipe1</span></pre>
				<p>對於<span>5.1.2-alpha</span>版的<strong><span>mysqld-nt</span></strong>，像這樣建立一個<span>C:\my-opts2.cnf</span>檔案：</p>
				<pre ><span>[mysqld]</span></pre>
				<pre ><span>basedir = C:/mysql-5.1.2-alpha port = 3308</span></pre>
				<pre ><span>enable-named-pipe</span></pre>
				<pre ><span>socket = mypipe2</span></pre>
				<p>安裝服務如下（在一個單一行中輸入每個命令）：</p>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-4.1.8\bin\mysqld-nt -- installmysqld1</span></b></span></pre>
				<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --defaults-file=C:\my-opts1.cnf</span></pre>
				<pre ><span>C:\&gt; </span><span><b><span>C:\mysql-5.1.2-alpha\bin\mysqld-nt -- installmysqld2</span></b></span></pre>
				<pre ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --defaults-file=C:\my-opts2.cnf</span></pre>
				<p>當您作為服務安裝一個<span>MySQL</span>伺服器時，要想使用<span>--defaults-file</span>選項，您必須在此選項之前加服務名。</p>
				<p>安裝服務後，按照與前面的示範相同的方法啟動和停止。</p>
				<p>要想卸載多個服務，對每個服務使用<strong><span>mysqld 
				--remove</span></strong>，在<span>--remove</span>選項後指定服務名。如果服務名是
				預設的<span>(</span><span>MySQL</span><span>)</span>，您可以不指定。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-unix-servers"></a>
			5.12.2.&nbsp;在Unix中運行多個伺服器</h3></div></div></div>
			<p>在<span>Unix</span>中運行多個伺服器最容易的方法是使用不同的<span>TCP/IP</span>端口<span>s</span>和<span>Unix</span>套接字檔案編譯，因此每個實例在不同的網絡接口偵聽。另外，每個安裝應在不同的基礎目錄中編譯，那將自動為您的每個伺服器產生使用不同的編譯進來的數據目錄、日誌檔案和<span>PID</span>檔案位置。</p>
			<p>假設一個現有的<span>4.1.8</span>版本伺服器配置為預設<span>TCP/IP</span>端口號<span>(3306)</span>和<span>Unix</span>套接字檔案<span>(</span><span>/tmp/mysql.sock</span><span>)</span>。要想配置一個新的<span>5.1.2-alpha</span>版的伺服器來使用不同的操作參數，使用一個<strong><span>configure</span></strong>命令，大概像這樣使用：</p>
			<pre><span>shell&gt; </span><span><b><span>./configure --with-tcp-port=<i>port_number</i> \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--with-unix-socket-path=<i>file_name</i> \</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>--prefix=/usr/local/mysql-5.1.2-alpha</span></b></span></pre>
			<p>這裡，<span><i><span>port_number</span></i></span>和<span><i><span>file_name</span></i></span>必須不同於預設<span>TCP/IP</span>端口號和<span>Unix</span>套接字檔案路徑名，並且<span>--prefix</span>值應指定一個不同於現有<span>MySQL</span>安裝目錄的安裝目錄。</p>
			<p>如果您有一個<span>MySQL</span>伺服器正偵聽一個給定的端口號，您可以使用下面的命令來找出針對一些重要配置變數它使用了那些操作參數，包括基礎目錄和<span>Unix</span>套接字檔案名：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin --host=<i>host_name</i> --port=<i>port_number</i> variables</span></b></span></pre>
			<p>通過該命令顯示的訊息，當配置其它伺服器時，您可以告訴伺服器該選項沒有使用的值。</p>
			<p>請注意，如果您指定<span>localhost</span>作為一個主機名，<strong><span>mysqladmin</span></strong>預設使用<span>Unix</span>套接字檔案連接，而不是<span>TCP/IP</span>。從<span> 
			MySQL 4.1</span>開始，通過<span><span>--protocol=</span><span> 
			TCP | SOCKET | PIPE | MEMORY}</span></span>選項，您可以顯示地指定連接協議。</p>
			<p>如果只是用一個不同的<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口號啟動，不必編譯新的<span>MySQL</span>伺服器。還可以在運行時指定這些值。這樣做的一個方法是使用命令行選項：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqld_safe --socket=<i>file_name</i> --port=<i>port_number</i></span></b></span></pre>
			<p>要啟動第二個伺服器，提供不同的<span>--socket</span>和<span><span>--</span><span>port</span></span>選項值，並且傳遞一個<span>--datadir=path</span>選項給<strong><span>mysqld_safe</span></strong>，以便伺服器使用一個不同的數據目錄。</p>
			<p>達到相似效果的另一個方法是使用環境變數來設置<span> Unix</span>套接字檔案名和<span>TCP/IP</span>端口號：</p>
			<pre><span>shell&gt; </span><span><b><span>MYSQL_UNIX_PORT=/tmp/mysqld-new.sock</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>MYSQL_TCP_PORT=3307</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>export MYSQL_UNIX_PORT MYSQL_TCP_PORT</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql_install_db --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqld_safe --datadir=/path/to/datadir &amp;</span></b></span></pre>
			<p>這是一個快速啟動第二個伺服器以用於測試的方法。該方法的最大好處是環境變數設定值適用於您從相同的<span>shell</span>使用的任何客戶端程式。因而，那些客戶端連接自動指向第二個伺服器！</p>
			<p>
        <a href="environment-variables.html" title="Appendix F. Environment Variables">
			附錄F：<i>環境變數</i></a>包括您可以使用的影響<strong><span 
>mysqld</span></strong>的其它環境變數列資料表<strong><span style="
">。</span></strong></p>
			<p>對於自動伺服器啟動，對於每個伺服器，機器引導時執行的啟動指令應執行下面的命令，每個命令用一個相應的選項檔案路徑：</p>
			<pre><span>mysqld_safe --defaults-file=path</span></pre>
			<p>每個選項檔案應包含一個給定伺服器特定的選項值。</p>
			<p>在<span>Unix</span>中，<strong><span>mysqld_multi</span></strong>指令是啟動多個伺服器的另一個方法。參見<a href="database-administration.html#mysqld-multi" title="5.1.5. mysqld_multi — Program for Managing Multiple MySQL Servers">5.1.5節，「mysqld_multi：管理多個MySQL伺服器的程式」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multiple-server-clients"></a>
			5.12.3.&nbsp;在多伺服器環境中使用客戶端程式</h3></div></div></div>
			<p>當您想要用一個客戶端程式連接一個<span>MySQL</span>伺服器時，該伺服器偵聽不同的網絡<span>接口，而不是編譯到您的客戶端的網絡接口，您可以使用下面的方法：</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>啟動客戶端，用<span>--host=<i>host_name</i> 
			--port=<i>port_number</i></span>通過<span>TCP/IP</span>來連接一個遠程伺服器，用<span>--host=127.0.0.1 
			--port=<i>port_number</i></span>通過<span>TCP/IP</span>來連接一個本地伺服器，或者用<span>--host=localhost 
			--socket=<i>file_name</i></span>通過一個<span>Unix</span>套接字檔案或一個<span>Windows</span>命名管道來連接一個本地伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>從<span>MySQL 4.1</span>起，啟動客戶端時用<span>--protocol=tcp</span>通過<span>TCP/IP</span>來連接，用<span>--protocol=socket</span>通過一個<span>Unix</span>套接字檔案來連接，用<span>--protocol=pipe</span>通過一個命名管道來連接，或用<span>--protocol=memory</span>通過共享內存來連接。對於<span>TCP/IP</span>連接，您可能還需要指定<span>--host</span>和<span><span>--</span><span>port</span></span>選項。對於其它類型的連接，您可能需要指定一個<span>--socket</span>選項來指定一個<span>Unix</span>套接字檔案或命名管道名，或者一個<span>--shared-memory-base-name</span>選項來指定共享內存名。共享內存連接僅在<span>Windows</span>中支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>中，在您啟動客戶端之前，設置<span>MYSQL_UNIX_PORT</span>和<span>MYSQL_TCP_PORT</span>環境變數來指定<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口號。如果您經常使用具體的套接字檔案或端口號，您可以在<span>.login</span>檔案中放置命令來設置環境變數以便您每次登錄時該命令起作用。參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在一個選項檔案的<span>[client]</span>組中指定預設<span>Unix</span>套接字檔案和<span>TCP/IP</span>端口號。例如，您可以在<span>Windows</span>中使用<span>C:\my.cnf</span>檔案，或在<span>Unix</span>中主目錄內使用<span>.my.cnf</span>檔案。參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>C</span>程式中，在<span>mysql_real_connect()</span>使用時，您可以指定套接字檔案或端口號參數。通過使用<span><span>mysql_options()</span>，</span>您還可以有程式讀選項檔案。參見<a href="apis.html#c-api-functions" title="25.2.3. C API Function Descriptions">25.2.3節，「C API函數描述」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您正在使用<span>Perl </span>
			<span>DBD::mysql</span>模塊，您可以從<span>MySQL</span>選項檔案中讀取選項。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>$dsn = &quot;DBI:mysql:test;mysql_read_default_group=client;&quot;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;mysql_read_default_file=/usr/local/mysql/data/my.cnf&quot;;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp; </span><span>$dbh = DBI-&gt;connect($dsn, $user, $password);</span></pre>
			<p>參見<a href="apis.html#perl" title="25.4. MySQL Perl API">25.4節，「MySQL Perl API」</a>。</p>
			<p>其它程式接口可以為讀選項檔案提供相似的功能。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="query-cache"></a>
		5.13.&nbsp;MySQL查詢高速緩衝</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="database-administration.html#query-cache-how">
			5.13.1. 查詢高速緩衝如何工作</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-in-select">
			5.13.2. 查詢高速緩衝SELECT選項</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-configuration">
			5.13.3. 查詢高速緩衝配置</a></span></dt><dt><span class="section"><a href="database-administration.html#query-cache-status-and-maintenance">
			5.13.4. 查詢高速緩衝狀態和維護</a></span></dt></dl></div><a class="indexterm" name="id2789707"></a><a class="indexterm" name="id2789713"></a>
		<p>查詢緩存儲存<span>SELECT</span>查詢的文本以及發送給客戶端的相應結果。如果隨後收到一個相同的查詢，伺服器從查詢緩存中重新得到查詢結果，而不再需要解析和執行查詢。</p>
		<p>如果您有一個不經常改變的資料表並且伺服器收到該資料表的大量相同查詢，查詢緩存在這樣的應用環境中十分有用。對於許多<span>Web</span>伺服器來說存在這種典型情況，它根據資料庫內容生成大量的動態頁面。</p>
		<p><strong><span>注</span></strong>釋：查詢緩存不返回舊的數據。當資料表更改後，查詢緩存值的相關條目被清空。</p>
		<p><strong><span>注</span></strong>釋：如果您有許多<strong><span 
>mysqld</span></strong>伺服器更新相同的<span>MyISAM</span>資料表，在這種情況下查詢緩存不起作用。</p>
		<p><strong><span>注</span></strong>釋：查詢緩存不適用於伺服器方編寫的語句。如果正在使用伺服器方編寫的語句，要考慮到這些語句將不會應用查詢緩存。參見
      <a href="apis.html#c-api-prepared-statements" title="25.2.4. C API Prepared Statements">
		25.2.4節，「C API預處理語句」</a>。</p>
		<p>下面是查詢緩存的一些性能數據。這些結果是在<span>Linux Alpha 2 x 500MHz</span>系統（<span>2GB 
		RAM</span>，<span>64MB</span>查詢緩存）上運行<span>MySQL</span>基準組件產生的。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果執行的所有查詢是簡單的<span>(</span>如從只有一行數據的資料表中選取一行<span>)</span>，但查詢是不同的，查詢不能被緩存，查詢緩存激活率是<span>13%</span>。這可以看作是最壞的情形。在實際應用中，查詢要複雜得多，因此，查詢緩存使用率一般會很低。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>從只有一行的資料表中搜尋一行數據時，使用查詢緩存比不使用速度快<span>2</span><span>38%</span><span>。這可以看作查詢使用緩存時速度提高最小的情況。</span></p>
		<p>伺服器啟動時要禁用查詢緩存，設置<span>query_cache_size</span>系統變數為<span>0</span>。禁用查詢緩存代碼後，<span>沒有明顯的速度提高。</span>編譯<span>MySQL</span>時，通過在<strong><span>configure</span><span>中</span></strong>使用<span>--without-query-cache</span>選項，可以從伺服器中徹底去除查詢緩存能力。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-how"></a>
			5.13.1.&nbsp;查詢高速緩衝如何工作</h3></div></div></div>
			<p>本節描述查詢緩存的工作原理。<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3節，「查詢高速緩衝配置」</a>描述了怎樣控制是否使用查詢緩存。</p>
			<p>查詢解析之前進行比較，因此下面的兩個查詢被查詢緩存認為是不相同的：</p>
			<pre><span>SELECT * FROM </span><span><i><span>tbl_name</span></i></span></pre>
			<pre><span>Select * from </span><span><i><span>tbl_name</span></i></span></pre>
			<p>查詢必須是完全相同的<span>(</span>逐字節相同<span>)</span>才能夠被認為是相同的。另外，同樣的查詢字串由於其它原因可能認為是不同的。使用不同的資料庫、不同的協議版本或者不同
			預設字元編碼的查詢被認為是不同的查詢並且分別進行緩存。</p>
			<p>從查詢緩存中提取一個查詢之前，<span>MySQL</span>檢查用戶對所有相關資料庫和資料表的<span>SELECT</span>權限。<span>如果沒有權限，</span>不使用緩存結果。</p>
			<p>如果從查詢緩存中返回一個查詢結果，伺服器把<span>Qcache_hits</span>狀態變數的值加一，而不是<span>Com_select</span>變數。參見<a href="database-administration.html#query-cache-status-and-maintenance" title="5.13.4. Query Cache Status and Maintenance">5.13.4節，「查詢高速緩衝狀態和維護」</a>。</p>
			<p>如果一個資料表被更改了，那麼使用那個資料表的所有緩衝查詢將不再有效，並且從緩衝區中移出。這包括那些映射到改變了的資料表的使用<span>MERGE</span>資料表的查詢。一個資料表可以被許多類型的語句更改，例如<span>INSERT</span>、<span>UPDATE</span>、<span>DELETE</span>、<span>TRUNCATE</span>、<span>ALTER 
			TABLE</span>、<span>DROP 
			TABLE</span>或<span>DROP 
			DATABASE</span>。</p>
			<p><span>COMMIT</span>執行完後，被更改的事務<span>InnoDB</span>資料表不再有效。</p>
			<p>使用<span>InnoDB</span>資料表時，查詢緩存也在事務中工作，使用該資料表的版本號來檢測其內容是否仍舊是當前的。</p>
			<p>在<span>MySQL 5.1</span>中，視圖產生的查詢被緩存。</p>
			<p>
			<span>SELECT SQL_CALC_FOUND_ROWS 
			...</span>和<span>SELECT 
			FOUND_ROWS()</span><span> type</span>類型的查詢使用查詢緩存。即使因建立的行數也被保存在緩衝區內，前面的查詢從緩存中提取，<span>FOUND_ROWS()</span>也返回正確的值。</p>
			<p>如果一個查詢包含下面函數中的任何一個，它不會被緩存：</p>
			<table border="1" cellpadding="0" id="table19">
				<tr>
					<td>
					<p>
					<span>BENCHMARK()</span></td>
					<td>
					<p>
					<span>CONNECTION_ID()</span></td>
					<td>
					<p>
					<span>CURDATE()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CURRENT_DATE()</span></td>
					<td>
					<p>
					<span>CURRENT_TIME()</span></td>
					<td>
					<p>
					<span>
					CURRENT_TIMESTAMP()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>CURTIME()</span></td>
					<td>
					<p>
					<span>DATABASE()</span></td>
					<td>
					<p>帶一個參數的<span>ENCRYPT()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>FOUND_ROWS()</span></td>
					<td>
					<p>
					<span>GET_LOCK()</span></td>
					<td>
					<p>
					<span>LAST_INSERT_ID()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>LOAD_FILE()</span></td>
					<td>
					<p>
					<span>MASTER_POS_WAIT()</span></td>
					<td>
					<p>
					<span>NOW()</span></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>RAND()</span></td>
					<td>
					<p>
					<span>RELEASE_LOCK()</span></td>
					<td>
					<p>
					<span>SYSDATE()</span></td>
				</tr>
				<tr>
					<td>
					<p>不帶參數的<span>UNIX_TIMESTAMP()</span></td>
					<td>
					<p>
					<span>USER()</span></td>
					<td>
					<p><span>&nbsp;</span></td>
				</tr>
			</table>
			<p>在下面的這些條件下，查詢也不會被緩存：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用自行定義函數<span>(UDFs)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用自行定義變數。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>引用<span>mysql</span>系統資料庫中的資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>下面方式中的任何一種：</p>
			<pre ><span>SELECT ...IN SHARE MODE</span></pre>
			<pre ><span>SELECT ...FOR UPDATE</span></pre>
			<pre ><span>SELECT ...INTO OUTFILE ...</span></pre>
			<pre ><span>SELECT ...INTO DUMPFILE ...</span></pre>
			<pre ><span>SELECT * FROM ...WHERE autoincrement_col IS NULL</span></pre>
			<p>最後一種方式不能被緩存是因為它被用作為<span>ODBC</span>工作區來獲取最近插入的<span>ID</span>值。參見<a href="connectors.html#odbc-and-last-insert-id" title="26.1.14.1. How to Get the Value of an AUTO_INCREMENT Column in ODBC">26.1.14.1節，「如何在ODBC中獲取AUTO_INCREMENT列的值<code class="literal"></code>」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span>被作為編寫好的語句，即使沒有使用佔位符。例如，下面使用的查詢：</p>
			<pre ><span>char *my_sql_stmt = &quot;SELECT a</span>，<span>b FROM table_c&quot;;</span></pre>
			<pre ><span>&nbsp;&nbsp; </span><span>/* ...*/</span></pre>
			<pre ><span>mysql_stmt_prepare(stmt</span>，<span>my_sql_stmt</span>，<span>strlen(my_sql_stmt));</span></pre>
			<p>不被緩存。參見<a href="apis.html#c-api-prepared-statements" title="25.2.4. C API Prepared Statements">25.2.4節，「C API預處理語句」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>TEMPORARY</span>資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>不使用任何資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用戶有某個資料表的列級權限。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-in-select"></a>
			5.13.2.&nbsp;查詢高速緩衝SELECT選項</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			可以在<span>SELECT</span>語句中指定查詢緩存相關選項：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>SQL_CACHE</span></p>
			<p>如果<span  >query_cache_type</span>系統變數的值是<span>ON</span>或<span><span>DEMAND</span>，</span>查詢結果被緩存。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span><span>SQL_NO_CACHE</span></p>
			<p>查詢結果不被緩存。</p>
			<p>示範：</p>
			<pre><span>SELECT SQL_CACHE id, name FROM customer;</span></pre>
			<pre><span>SELECT SQL_NO_CACHE id, name FROM customer;</span></pre>
			<h3 class="title"><a name="query-cache-configuration"></a>
			5.13.3.&nbsp;查詢高速緩衝配置</h3></div></div></div>
			<p>通過<span  >have_query_cache</span>伺服器系統變數指示查詢緩存是否可用：</p>
			<pre><span>mysql&gt; </span><b><span>SHOW VARIABLES LIKE &#39;have_query_cache&#39;;</span></b></pre>
			<pre><span>+------------------+-------+</span></pre>
			<pre><span>| Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></pre>
			<pre><span>+------------------+-------+</span></pre>
			<pre><span>| have_query_cache | YES&nbsp;&nbsp; |</span></pre>
			<pre><span>+------------------+-------+</span></pre>
			<p>即使禁用查詢緩存，當使用標準<span> MySQL</span>二進制時，這個值總是<span>YES</span>。</p>
			<p>其它幾個系統變數控制查詢緩存操作。當啟動<strong><span>mysqld</span></strong>時，這些變數可以在選項檔案或者命令行中設置。所有查詢緩存系統變數名以<span  >query_cache_
			</span>開頭。它們的詳細描述見<a href="database-administration.html#server-system-variables" title="5.3.3. Server System Variables">5.3.3節，「伺服器系統變數」</a>，還給出了額外的配置訊息。</p>
			<p>為了設置查詢緩存大小，設置<span  >query_cache_size</span>系統變數。設置為<span>0</span>資料表示禁用查詢緩存。
			預設緩存大小設置為<span>0</span>；也就是禁用查詢緩存。</p>
			<p>當設置<span  >query_cache_size</span>變數為非零值時，應記住查詢緩存至少大約需要<span>40KB</span>來分配其數據結構。<span>(</span>具體大小取決於系統結構）<span>。</span>如果您把該值設置的太小，將會得到一個警告，如本例所示：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET GLOBAL 
			query_cache_size = 40000;</span></b></p>
			<p>
			<span  >Query OK, 
			0 rows affected, 1 warning (0.00 sec)</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW WARNINGS\G</span></b></p>
			<p>
			<span  >
			*************************** 1. row ***************************</span></p>
			<p>
			<span  >&nbsp; Level: 
			Warning</span></p>
			<p>
			<span  >&nbsp;&nbsp; Code: 
			1282</span></p>
			<p>
			<span  >Message: 
			Query cache failed to set size 39936; new query cache size is 0</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET GLOBAL 
			query_cache_size = 41984;</span></b></p>
			<p>
			<span  >Query OK, 
			0 rows affected (0.00 sec)</span></p>
			<p>
			<span>
			&nbsp;</span></p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW VARIABLES 
			LIKE &#39;query_cache_size&#39;;</span></b></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			query_cache_size | 41984 |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>如果查詢緩存大小設置為大於<span>0</span>，<span  >query_cache_type</span>變數影響其工作方式。這個變數可以設置為下面的值：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>0</span>或<span>OFF</span>將阻止緩存或查詢緩存結果。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>1</span>或<span>ON</span>將允許緩存，以<span>SELECT 
			SQL_NO_CACHE</span>開始的查詢語句除外。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>2</span>或<span  >DEMAND</span>，僅對以<span  >SELECT 
			SQL_CACHE</span>開始的那些查詢語句啟用緩存。</p>
			<p>設置<span  >query_cache_type</span>變數的<span>GLOBAL</span>值將決定更改後所有連接客戶端的緩存行為。具體客戶端可以通過設置<span  >query_cache_type</span>變數的會話值控制它們本身連接的緩存行為。例如，一個客戶可以禁用自己的查詢緩存，方法如下：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SET SESSION 
			query_cache_type = OFF;</span></b></p>
			<p>要控制可以被緩存的具體查詢結果的最大值，應設置<span  >query_cache_limit</span>變數。
			預設值是<span>1MB</span>。</p>
			<p>
			當一個查詢結果（返回給客戶端的數據）從查詢緩衝中提取期間，它在查詢緩存中排序。因此，數據通常不在大的數據塊中處理。查詢緩存根據數據排序要求分配數據塊，因此，當一個數據塊用完後分配一個新的數據塊。因為內存分配操作是昂貴的<span>(</span>費時的<span>)</span>，所以通過<span  >query_cache_min_res_unit</span>系統變數給查詢緩存分配最小值。當查詢執行時，最新的結果數據塊根據實際數據大小來確定，因此可以釋放不使用的內存。根據您的伺服器執行查詢的類型，您會發現調整<span  >query_cache_min_res_unit</span>變數的值是有用的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span  >
			query_cache_min_res_unit</span>預設值是<span>4KB</span>。這應該適合大部分情況。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			如果您有大量返回小結果數據的查詢，預設數據塊大小可能會導致內存碎片，顯示為大量空閒內存塊。由於缺少內存，內存碎片會強制查詢緩存從緩存內存中修整（刪除）查詢。這時，您應該減少<span  >query_cache_min_res_unit</span>變數的值。空閒塊和由於修整而移出的查詢的數量通過<span  >Qcache_free_blocks</span>和<span  >Qcache_lowmem_prunes</span>變數的值給出。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>
			&nbsp;</span>如果大量查詢返回大結果（檢查 
			<span>Qcache_total_blocks</span>和<span  >Qcache_queries_in_cache</span>狀態變數），您可以通過增加<span>query_cache_min_res_unit</span>變數的值來提高性能。但是，注意不要使它變得太大（參見前面的條目）。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="query-cache-status-and-maintenance"></a>
			5.13.4.&nbsp;查詢高速緩衝狀態和維護</h3></div></div></div>
			<p>可以使用下面的語句檢查<span>MySQL</span>伺服器是否提供查詢緩存功能：</p>
			<p>
			<span  >mysql&gt;
			</span><b><span>SHOW VARIABLES 
			LIKE &#39;have_query_cache&#39;;</span></b></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			Variable_name&nbsp;&nbsp;&nbsp; | Value |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>
			<span  >| 
			have_query_cache | YES&nbsp;&nbsp; |</span></p>
			<p>
			<span  >
			+------------------+-------+</span></p>
			<p>可以使用<span  >FLUSH 
			QUERY CACHE</span>語句來清理查詢緩存碎片以提高內存使用性能。該語句不從緩存中移出任何查詢。</p>
			<p><span  >RESET 
			QUERY CACHE</span>語句從查詢緩存中移出所有查詢。<span  >FLUSH 
			TABLES</span>語句也執行同樣的工作。</p>
			<p>為了監視查詢緩存性能，使用<span>SHOW 
			STATUS</span>查看緩存狀態變數：</p>
			<pre><span>mysql&gt; </span><span><b><span>SHOW STATUS LIKE &#39;Qcache%&#39;;</span></b></span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<pre><span>|</span>變數名<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span>值<span> |</span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<pre><span>| Qcache_free_blocks&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 36&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_free_memory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 138488 |</span></pre>
			<pre><span>| Qcache_hits&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 79570&nbsp; |</span></pre>
			<pre><span>| Qcache_inserts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 27087&nbsp; |</span></pre>
			<pre><span>| Qcache_lowmem_prunes&nbsp;&nbsp;&nbsp; | 3114&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_not_cached&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 22989&nbsp; |</span></pre>
			<pre><span>| Qcache_queries_in_cache | 415&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| Qcache_total_blocks&nbsp;&nbsp;&nbsp;&nbsp; | 912&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-------------------------+--------+</span></pre>
			<p>這些變數的描述見<a href="database-administration.html#server-status-variables" title="5.3.4. Server Status Variables">5.3.4節，「伺服器狀態變數」</a>。這裡描述它們的一些應用。</p>
			<p><span>SELECT</span>查詢的總數量等價於：</p>
			<pre><span>Com_select</span></pre>
			<pre><span>+ Qcache_hits</span></pre>
			<pre><span>+ queries with errors found by parser</span></pre>
			<p><span>Com_select</span>的值等價於：</p>
			<pre><span>Qcache_inserts</span></pre>
			<pre><span>+ Qcache_not_cached</span></pre>
			<pre><span>+ queries with errors found during columns/rights check</span></pre>
			<p>查詢緩存使用長度可變塊，因此<span>Qcache_total_blocks</span>和<span>Qcache_free_blocks</span>可以顯示查詢緩存內存碎片。執行<span  >FLUSH 
			QUERY CACHE</span>後，只保留一個空閒塊。</p>
			<p>
			每個緩存查詢至少需要兩個塊（一個塊用於查詢文本，一個或多個塊用於查詢結果）。並且，每一個查詢使用的每個資料表需要一個塊。但是，如果兩個或多個查詢使用相同的資料表，僅需要分配一個塊。</p>
			<p><span>
			Qcache_lowmem_prunes</span>狀態變數提供的訊息能夠幫助您您調整查詢緩存的大小。它計算為了緩存新的查詢而從查詢緩衝區中移出到自由內存中的查詢的數目。查詢緩衝區使用最近最少使用<span>(LRU)</span>策略來確定哪些查詢從緩衝區中移出。調整訊息在<a href="database-administration.html#query-cache-configuration" title="5.13.3. Query Cache Configuration">5.13.3節，「查詢高速緩衝配置」</a>中給出。</div></div></div><div><hr><p>
      這是MySQL參考手冊的翻譯版本，關於MySQL參考手冊，<span class="GramE">請訪問</span><a target="_top"  href="http://dev.mysql.com/doc/mysql/en">dev.mysql.com</a>。 
		原始參考手冊為英文版，與英文版參考手冊相比，本翻譯版可能不是最新的。</p></div>
</body></html>
