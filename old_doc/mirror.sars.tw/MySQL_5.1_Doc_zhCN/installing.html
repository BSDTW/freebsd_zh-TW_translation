<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 2. Installing MySQL</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="introduction.html" title="Chapter 1. General Information"><link rel="next" href="tutorial.html" title="Chapter 3. Tutorial">
<style>
<!--
 li.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	font-size:12.0pt;
	
	; margin-left:0cm; margin-right:0cm; margin-top:0cm}
span.quote
	{}
 table.MsoNormalTable
	{mso-style-parent:"";
	font-size:10.0pt;
	
	}
span.guibutton
	{}
span.guiicon
	{}
span.guimenu
	{}
span.guisubmenu
	{}
span.guimenuitem
	{}
span.guilabel
	{}
span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
-->
</style>
</head><body><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="installing"></a>
	第2章：安裝MySQL</h2></div></div></div><div class="toc"><p><b>
	目錄</b></p><dl><dt><span class="section">
			<a href="#general-installation-issues">
			2.1. 一般安裝問題</a></span></dt><dd><dl><dt><span class="section">
				<a href="#which-os">
				2.1.1. MySQL支援的作業系統</a></span></dt><dt><span class="section">
				<a href="#which-version">
				2.1.2. 選擇要安裝的MySQL分發版</a></span></dt><dt><span class="section">
				<a href="#getting-mysql">
				2.1.3. 怎樣獲得MySQL</a></span></dt><dt><span class="section">
				<a href="#verifying-package-integrity">
				2.1.4. 通過MD5校驗和或GnuPG驗證軟件包的完整性<code class="literal"></code></a></span></dt><dt><span class="section">
				<a href="#installation-layouts">
				2.1.5. 安裝佈局</a></span></dt></dl></dd><dt><span class="section">
			<a href="#quick-standard-installation">
			2.2. 使用二進制分發版的標準MySQL安裝</a></span></dt><dt><span class="section">
			<a href="#windows-installation">2.3. 
			在Windows上安裝MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#windows-system-requirements">
				2.3.1. Windows系統要求</a></span></dt><dt><span class="section">
				<a href="#windows-choosing-package">
				2.3.2. 選擇安裝軟件包</a></span></dt><dt><span class="section">
				<a href="#windows-using-installer">2.3.3. 
				用自動安裝器安裝MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-install-wizard">
				2.3.4. 使用MySQL安裝嚮導</a></span></dt><dt><span class="section">
				<a href="#windows-config-wizard">
				2.3.5. 使用配置嚮導</a></span></dt><dt><span class="section">
				<a href="#windows-install-archive">2.3.6. 
				通過非安裝Zip檔案安裝MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-extract-archive">
				2.3.7. 提取安裝檔案檔案</a></span></dt><dt><span class="section">
				<a href="#windows-create-option-file">
				2.3.8. 建立選項檔案</a></span></dt><dt><span class="section">
				<a href="#windows-select-server">
				2.3.9. 選擇MySQL伺服器類型</a></span></dt><dt><span class="section">
				<a href="#windows-server-first-start">
				2.3.10. 首次啟動伺服器</a></span></dt><dt><span class="section">
				<a href="#windows-start-command-line">
				2.3.11. 從Windows命令行啟動MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-start-service">
				2.3.12. 以Windows服務方式啟動MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-testing">
				2.3.13. 測試MySQL安裝</a></span></dt><dt><span class="section">
				<a href="#windows-troubleshooting">
				2.3.14. 在Windows環境下對MySQL安裝的故障診斷與排除</a></span></dt><dt><span class="section">
				<a href="#windows-upgrading">
				2.3.15. 在Windows下升級MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-vs-unix">
				2.3.16. Windows版MySQL同Unix版MySQL對比</a></span></dt></dl></dd><dt><span class="section">
			<a href="#linux-rpm">2.4. 
			在Linux下安裝MySQL</a></span></dt><dt><span class="section">
			<a href="#mac-os-x-installation">2.5.在Mac 
			OS X中安裝MySQL</a></span></dt><dt><span class="section">
			<a href="#netware-installation">2.6. 
			在NetWare中安裝MySQL</a></span></dt><dt><span class="section">
			<a href="#installing-binary">2.7. 
			在其它類Unix系統中安裝MySQL</a></span></dt><dt><span class="section">
			<a href="#installing-source">
			2.8. 使用原始碼分發版安裝MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#quick-install">
				2.8.1. 原始碼安裝概述</a></span></dt><dt><span class="section">
				<a href="#configure-options">
				2.8.2. 典型配置選項<span><strong class="command"></strong></span></a></span></dt><dt><span class="section">
				<a href="#installing-source-tree">
				2.8.3. 從開發原始碼樹安裝</a></span></dt><dt><span class="section">
				<a href="#compilation-problems">
				2.8.4. 處理MySQL編譯問題</a></span></dt><dt><span class="section">
				<a href="#mit-pthreads">
				2.8.5. MIT-pthreads注意事項</a></span></dt><dt><span class="section">
				<a href="#windows-source-build">2.8.6. 
				在Windows下從原始碼安裝MySQL</a></span></dt><dt><span class="section">
				<a href="#windows-client-compiling">
				2.8.7. 在Windows下編譯MySQL客戶端</a></span></dt></dl></dd><dt><span class="section">
			<a href="#post-installation">
			2.9. 安裝後的設置和測試</a></span></dt><dd><dl><dt><span class="section">
				<a href="#windows-post-installation">
				2.9.1. Windows下安裝後的過程</a></span></dt><dt><span class="section">
				<a href="#unix-post-installation">
				2.9.2. Unix下安裝後的過程</a></span></dt><dt><span class="section">
				<a href="#default-privileges">
				2.9.3. 使初始MySQL帳號安全</a></span></dt></dl></dd><dt><span class="section">
			<a href="#upgrade">
			2.10. 升級MySQL</a></span></dt><dd><dl><dt><span class="section">
				<a href="#upgrading-from-5-0">
				2.10.1. 從5.0版升級</a></span></dt><dt><span class="section">
				<a href="#upgrading-grant-tables">
				2.10.2. 升級授權資料表</a></span></dt><dt><span class="section">
				<a href="#upgrading-to-arch">
				2.10.3. 將MySQL資料庫拷貝到另一台機器</a></span></dt></dl></dd><dt><span class="section">
			<a href="#downgrading">
			2.11. 降級MySQL</a></span></dt><dt><span class="section">
			<a href="#operating-system-specific-notes">
			2.12. 具體作業系統相關的注意事項</a></span></dt><dd><dl><dt><span class="section">
				<a href="#linux">
				2.12.1. Linux注意事項</a></span></dt><dt><span class="section">
				<a href="#mac-os-x">
				2.12.2. Mac OS X注意事項</a></span></dt><dt><span class="section">
				<a href="#solaris">
				2.12.3. Solaris注意事項</a></span></dt><dt><span class="section">
				<a href="#bsd-notes">
				2.12.4. BSD注意事項</a></span></dt><dt><span class="section">
				<a href="#other-unix-notes">
				2.12.5. 其它Unix注意事項</a></span></dt><dt><span class="section">
				<a href="#os-2">
				2.12.6. OS/2注意事項</a></span></dt></dl></dd><dt><span class="section">
			<a href="#perl-support">
			2.13. Perl安裝注意事項</a></span></dt><dd><dl><dt><span class="section">
				<a href="#perl-installation">
				2.13.1. 在Unix中安裝Perl</a></span></dt><dt><span class="section">
				<a href="#activestate-perl">
				2.13.2. 在Windows下安裝ActiveState Perl</a></span></dt><dt><span class="section">
				<a href="#perl-support-problems">
				2.13.3. 使用Perl DBI/DBD接口的問題<code class="literal"></code></a></span></dt></dl></dd></dl></div><a class="indexterm" name="id2702364"></a>
	<p>本章描述怎樣獲得並安裝<strong><span>MySQL</span></strong>：</p>
	<p><span>1.<span>&nbsp;&nbsp;&nbsp;
	</span></span><b>要瞭解支援哪些平台</b>。請注意並非所有支援的平台同等適合運行<span>MySQL</span>。在部分平台上會比其它平台更有效、穩定。詳情請參見<a href="#which-os" title="2.1.1. Operating Systems Supported by MySQL">2.1.1節，「MySQL支援的作業系統」</a> 。</p>
	<p><span>2.<span>&nbsp;&nbsp;&nbsp;
	</span></span><b>確定您應該使用的分發的版本</b>。可獲得<strong><span style="font-family:
細明體;">MySQL</span></strong>的多個版本，大部分有多種分發版。您可以選擇包含二進制（預編譯）代碼或原始碼形式的預打包分發。如果不能確定，則使用二進制分發版。對於想看我們的最新開發並幫助我們測試新代碼的用戶，我們提供了公共訪問接口，可以訪問我們最新的原始碼樹。為了確定您應該使用的分發的版本和類型，請參見<a href="#which-version" title="2.1.2. Choosing Which MySQL Distribution to Install">2.1.2節，「選擇要安裝的MySQL分發版」</a>。</p>
	<p><span>3.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>下載想安裝的分發版</span><span>。</span></strong>對於能從其獲得<strong><span>MySQL</span></strong>的站點列資料表，請參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。用來驗證分發版完整性的指令參見<a href="#verifying-package-integrity" title="2.1.4. Verifying Package Integrity Using MD5 Checksums or GnuPG">2.1.4節，「通過MD5校驗和或GnuPG驗證軟件包的完整性<code class="literal"></code>」</a>。</p>
	<p><span>4.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>安裝分發版</span><span>。</span></strong>針對二進制代碼和原始碼分發版的安裝說明在<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2節，「使用二進制分發版的標準MySQL安裝」</a>中講述。針對二進制代碼和原始碼分發版的安裝說明在<a href="#installing-source" title="2.8. MySQL Installation Using a Source Distribution">2.8節，「使用原始碼分發版安裝MySQL」</a>中講述。</p>
	<p><strong><span>注</span></strong>釋：如果您想要將當前版本的<span>MySQL</span>升級到最新版本，而不是首次安裝<span>MySQL</span>，關於升級過程和升級前應考慮的問題請參見<a href="#upgrade" title="2.10. Upgrading MySQL">2.10節，「升級MySQL」</a>。</p>
	<p>如果遇到安裝問題，<a href="#operating-system-specific-notes" title="2.12. Operating System-Specific Notes">2.12節，「具體作業系統相關的注意事項」</a>中提供了解決平台相關問題的訊息。</p>
	<p><span>5.<span>&nbsp;&nbsp;&nbsp;
	</span></span><strong><span>進行安裝後的設置。</span></strong>安裝<span>MySQL</span>後，請閱讀<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>。本節介紹了重要的訊息，可以確保<span>MySQL</span>伺服器正確工作。本節還描述了如何使尚未有密碼的初始<span>MySQL</span>用戶帳號的安全。不管您是用二進制代碼還是原始碼分發版來安裝<strong><span>MySQL</span></strong>，這些過程均適用。</p>
	<span>如果要運行<span>MySQL</span>基準指令，必須使用支援<span>MySQL</span>的<span>Perl</span>。請參見</span><a href="#perl-support" title="2.13. Perl Installation Notes">2.13節，「Perl安裝注意事項」</a>。<div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="general-installation-issues"></a>
		2.1.&nbsp;一般安裝問題</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#which-os">
			2.1.1. MySQL支援的作業系統</a></span></dt><dt><span class="section">
			<a href="#which-version">
			2.1.2. 選擇要安裝的MySQL分發版</a></span></dt><dt><span class="section">
			<a href="#getting-mysql">
			2.1.3. 怎樣獲得MySQL</a></span></dt><dt><span class="section">
			<a href="#verifying-package-integrity">
			2.1.4. 通過MD5校驗和或GnuPG驗證軟件包的完整性<code class="literal"></code></a></span></dt><dt><span class="section">
			<a href="#installation-layouts">
			2.1.5. 安裝佈局</a></span></dt></dl></div>
		<p>在安裝<span>MySQL</span>前，您應該：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>確定是否<span>MySQL</span>將運行在您的平台上。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>選擇安裝的分發版。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>下載分發版並驗證其完整性。</p>
		<p>本節包含執行上述步驟必需的訊息。之後，您可以按照本章中後面幾節的說明來安裝選擇的分發版。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="which-os"></a>
			2.1.1.&nbsp;MySQL支援的作業系統</h3></div></div></div><a class="indexterm" name="id2702625"></a><a class="indexterm" name="id2702635"></a><a class="indexterm" name="id2702642"></a><a class="indexterm" name="id2702649"></a><a class="indexterm" name="id2702656"></a>
			<p>本節列出了可以運行<span>MySQL</span>的作業系統。</p>
			<p>我們使用<span>GNU Autoconf</span>，因此將<strong><span style="font-family:
細明體;">MySQL</span></strong>移植到所有使用<span>Posix</span>線程和<span>C++</span>編譯器的現代系統是可能的。<span>(</span>要求伺服器支援線程。如果只是編譯客戶端代碼，則只需要<span>C++</span>編譯器<span>)</span>。我們主要在<span>Linux(SuSE</span>和<span>Red 
			Hat)</span>、<span>FreeBSD</span>和<span>Sun 
			Solaris(</span>版本<span>8</span>和<span>9)</span>上使用並開發本軟件。</p>
			<p>已經報告<strong><span>MySQL</span><span>可以</span></strong>在下列作業系統<span>/</span>線程包的組合上成功地進行編譯。注意，對於很多作業系統，原生的線程僅支援最新的版本。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>AIX 4.x</span>和<span>5.x</span>。請參見<a href="#ibm-aix" title="2.12.5.3. IBM-AIX notes">2.12.5.3節，「IBM-AIX注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Amiga</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>BSDI 
			2.x</span>。請參見<a href="#bsdi" title="2.12.4.4. BSD/OS Version 2.x Notes">2.12.4.4節，「BSD/OS 2.x版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>BSDI3.0,3.1</span>和<span>4.x</span>。請參見<a href="#bsdi" title="2.12.4.4. BSD/OS Version 2.x Notes">2.12.4.4節，「BSD/OS 2.x版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>Digital Unix 4.x</span>。請參見<a href="#alpha-dec-unix" title="2.12.5.5. Alpha-DEC-UNIX Notes (Tru64)">2.12.5.5節，「Alpha-DEC-UNIX(Tru64)版注意事項」</a>.。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>FreeBSD 
			2.x</span>。請參見<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1節，「FreeBSD注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>FreeBSD 3.x</span>和<span>4.x</span>。請參見<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1節，「FreeBSD注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>LinuxThreads</span>的<span>FreeBSD 
			4.x</span>。請參見<a href="#freebsd" title="2.12.4.1. FreeBSD Notes">2.12.4.1節，「FreeBSD注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>DCE</span>線程或<span>MIT-pthreads</span>包的<span>HP-UX 
			10.20</span>。請參見<a href="#hp-ux-10-20" title="2.12.5.1. HP-UX Version 10.20 Notes">2.12.5.1節，「HP-UX 10.20版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>HP-UX 11.x</span>。請參見<a href="#hp-ux-11-x" title="2.12.5.2. HP-UX Version 11.x Notes">2.12.5.2節，「HP-UX 11.x版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有<span>LinuxThreads 0.7.1+</span>或<span>glibc</span><span> 
			2.0.7+</span>，適合各種<span>CPU</span>的<span>Linux 
			2.0+</span>。請參見<a href="#linux" title="2.12.1. Linux Notes">2.12.1節，「Linux注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Mac OS X</span>。請參見<a href="#mac-os-x" title="2.12.2. Mac OS X Notes">2.12.2節，「Mac OS X注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>NetBSD 1.3/1.4 Intel</span>和<span>NetBSD 
			1.3 Alpha(</span>需要<span>GNU make)</span>。請參見<a href="#netbsd" title="2.12.4.2. NetBSD Notes">2.12.4.2節，「NetBSD注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Novell NetWare 6.0</span>。請參見<a href="#netware-installation" title="2.6. Installing MySQL on NetWare">2.6節，「在NetWare中安裝MySQL」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>OpenBSD &gt; 2.5</span>。包括<span>MIT-pthreads</span>包的<span>OpenBSD 
			&lt; 2.5</span>。請參見<a href="#openbsd" title="2.12.4.3. OpenBSD 2.5 Notes">2.12.4.3節，「OpenBSD 2.5版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>OS/2 Warp 3, FixPack 29</span>和<span>OS/2 
			Warp 4, FixPack 4. </span>參見<a href="#os-2" title="2.12.6. OS/2 Notes">2.12.6節，「OS/2注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有最新<span>FSU Pthreads</span>移植包的<span>SCO 
			OpenServer 5.0.X</span>。請參見<a href="#sco" title="2.12.5.8. SCO UNIX and OpenServer 5.0.x Notes">2.12.5.8節，「SCO UNIX和OpenServer 5.0.x版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SCO UnixWare 7.1.x</span>。請參見<a href="#sco-unixware" title="2.12.5.9. SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes">2.12.5.9節，「SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SCO Openserver 6.0.x</span>。請參見<a href="#sco-openserver" title="2.12.5.10. SCO OpenServer 6.0.x Notes">2.12.5.10節，「SCO OpenServer 6.0.x版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>有原生線程的<span>SGI Irix 6.x</span>。請參見<a href="#sgi-irix" title="2.12.5.7. SGI Irix Notes">2.12.5.7節，「SGI Irix注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>SPARC</span>和<span>x86</span>上有原生線程的<span>Solaris 
			2.5</span>和以上版本。請參見<a href="#solaris" title="2.12.3. Solaris Notes">2.12.3節，「Solaris注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>包括<span>MIT-pthreads</span>包的<span>SunOS 
			4.x</span>。請參見<a href="#solaris" title="2.12.3. Solaris Notes">2.12.3節，「Solaris注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Tru64 Unix</span>。請參見<a href="#alpha-dec-unix" title="2.12.5.5. Alpha-DEC-UNIX Notes (Tru64)">2.12.5.5節，「Alpha-DEC-UNIX(Tru64)版注意事項」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows 9x</span>、<span>Me</span>、<span>NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>。請參見<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。</p>
			<p>並非所有支援的平台同等適合運行<span>MySQL</span>。根據以下因素確定某個平台適合高負荷關鍵任務<span>MySQL</span>伺服器的程度：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>線程庫的穩定性。可能某個平台的反應不錯，但<span>MySQL</span>的穩定性取決於它所使用的線程庫，不管其它部分是否完善。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>內核和線程庫利用均衡多處理器<span>(SMP)</span>系統的能力。換句話說，當程序建立一個線程時，應允許線程運行原程序所運行<span>CPU</span>之外的其它處理器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>內核和線程庫運行在短範圍頻繁獲取和釋放互斥體而不需要過多地交換內容的多個線程的能力。如果執行<span>pthread_mutex_lock()</span>時產生的<span>CPU</span>時間太短，則會嚴重影響<span>MySQL</span>。如果不關注該問題，增加過多的<span>CPU</span>實際會降低<span>MySQL</span>的速度。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>常規檔案系統的穩定性和性能。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果資料庫資料表很大，檔案系統處理大檔案的能力和處理效率。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>我們在該平台上使用<span>MySQL AB</span>的經驗水平。如果我們熟悉一個平台，我們可以對具體平台進行最佳化並固定編譯時間。我們還可以提供建議如何更好地為<span>MySQL</span>配置系統。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>我們在類似配置下所完成的內部測試的數量。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在同一平台類似配置下成功運行<span>MySQL</span>的用戶數。如果該數字很高，則說明遇到具體平台問題的幾率要小得多。</p>
			<p>根據前面的標準，允許<span>MySQL</span>的最好的平台是<span>x86,</span>安裝<span>SuSE 
			Linux</span>，使用<span>2.4</span>或<span>2.6</span>內核，和<span>ReiserFS(</span>或類似<span>Linux</span>分發版<span>)</span>和安裝了<span> 
			Solaris(2.7-9)</span>的<span>SPARC</span>。<span>FreeBSD</span>排第三位，但我們真正希望一旦線程庫得到改進，它也可以提高排名。從某一觀點我們還希望提高其它<span>MySQL</span>目前正在上面編譯、允許的平台的排名，但穩定性和性能上可以要求不同等級。這需要我們與<span>MySQL</span>所依賴的作業系統和庫組件開發人員共同努力。如果您對改進某個組件感興趣，可能影響其開發，需要更多的關於<span>MySQL</span>如何能運行得更好的說明，請向我們的<span>MySQL
			</span>
			<span>internals</span>發送郵件。請參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The MySQL郵件列資料表」</a>。</p>
			<p>請注意前面的對比並不是說一個作業系統總體上比另一個作業系統要好。我們只是討論選擇一個<span>OS</span>來專門運行<span>MySQL</span>。記住了這一點，如果考慮更多的因素，對比結果可能會不同。在某些情況下，一個<span>OS</span>比另一個<span>OS</span>好的原因只是我們已經為具體平台做出了更多的努力來進行測試和最佳化。我們只是陳述我們的觀點幫助您選擇運行<span>MySQL</span>的平台。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="which-version"></a>
			2.1.2.&nbsp;選擇要安裝的MySQL分發版</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#choosing-version">
				2.1.2.1. 選擇要安裝的MySQL版本</a></span></dt><dt><span class="section">
				<a href="#choosing-distribution-format">
				2.1.2.2. 選擇分發格式</a></span></dt><dt><span class="section">
				<a href="#many-versions">
				2.1.2.3. 如何發佈更新以及何時發佈更新</a></span></dt><dt><span class="section">
				<a href="#release-philosophy">
				2.1.2.4. 發佈原則：發行版本中沒有已知的問題</a></span></dt><dt><span class="section">
				<a href="#mysql-binaries">
				2.1.2.5. MySQL AB編譯的MySQL二進製版本</a></span></dt></dl></div><a class="indexterm" name="id2703181"></a><a class="indexterm" name="id2703188"></a><a class="indexterm" name="id2703194"></a><a class="indexterm" name="id2703201"></a><a class="indexterm" name="id2703211"></a><div class="section"><div class="titlepage"><div><div>
				準備安裝<span>MySQL</span>時，您應確定使用哪個版本。<span>MySQL</span>的開發有幾個發佈系列，可以選擇最適合您要求的一個版本。確定了安裝的版本後，便可以選擇分發版。有二進制或原始碼發佈格式。<h4 class="title"><a name="choosing-version"></a>
				2.1.2.1.&nbsp;選擇要安裝的MySQL版本</h4></div></div></div>
				<p>首先要作出決策，您是否想要使用最新的開發版本或最終的穩定版本。在<span>MySQL</span>開發過程中，同時存在多個發佈系列，每個發佈處在成熟度的不同階段：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.2</span>是最新開發的發佈系列，是將執行新功能的系列。不久的將來可以使用<span>Alpha</span>發行，以便感興趣的用戶進行廣泛的測試。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.1</span>是當前穩定<span>(</span>產品質量<span>)</span>發佈系列。只針對漏洞修復重新發佈；沒有增加會影響穩定性的新功能。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 5.0</span>是前一穩定<span>(</span>產品質量<span>)</span>發佈系列。只針對嚴重漏洞修復和安全修復重新發佈；沒有增加會影響該系列的重要功能。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL 4.0</span>和<span>3.23</span>是舊的穩定<span>(</span>產品質量<span>)</span>發佈系列。該版本不再使用，新的發佈只用來修復特別嚴重的漏洞（以前的安全問題）。</p>
				<p>
				我們不認為有完全的凍結版，因為任何版本均需要對漏洞進行修復和其它修復。對於「某種程度的凍結」，我們是指我們可以在產品發佈中增加一些不會影響當前工作的小東西。自然，前一系列的相關漏洞修復會移植到後面的系列。</p>
				<p>通常<span>, </span>如果您是第一次開始使用<strong><span>MySQL</span></strong>或想要將它移植到一些還沒有二進制分發版的系統上，我們推薦使用最終的穩定版本。目前是<span>MySQL 
				5.1</span>。我們已經使用<span>MySQL</span>基準對所有<span>MySQL</span>發佈進行了檢查，包括來自開發系列的發佈，在發佈前還使用基準套件來測試它。</p>
				<p>
				如果您正在運行一個老的系統並且想要升級，但是又不想冒險進行非無縫升級，應該升級到最新版本中您正使用的相同的發佈系列（只有版本號的最後部分比您使用的新）。我們已經試著僅修復致命問題，對那個版本進行了很小的相對安全的改動。</p>
				<p>如果您想要使用產品發佈系列中所沒有的新功能，您可以使用開發系列的版本。請注意開發發佈不如產品發佈穩定。</p>
				<p>如果您想要使用包含所有最新補丁和漏洞修復的最新原始碼，可以使用我們的<span>BitKeeper</span>庫。這些庫還沒有發佈，但可以預覽代碼，將來的發佈基於這些代碼。</p>
				<p><strong>
				<span>
				MySQL</span></strong>的命名機制使用由<span>3</span>個數字和一個後綴組成的版本號。例如，像<strong><span>mysql-5.0.9-beta</span></strong>的版本號這樣解釋：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>1</span>個數字<span>(</span><strong><span>5</span></strong><span>)</span>是主版本號，描述了檔案格式。所有版本<span>5</span>的發行都有相同的檔案格式。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>2</span>個數字<span>(</span><strong><span>0</span></strong><span>)</span>是發行級別。主版本號和發行級別組合到一起便構成了發行序列號。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>第<span>3</span>個數字<span>(</span><strong><span>9</span></strong><span>)</span>是在此發行系列的版本號，隨每個新分發版遞增。通常您需要已經選擇的發行<span>(release)</span>的最新版本<span>(</span>版本<span>)</span>。</p>
				<p>
				每次更新後，版本字串的最後一個數字遞增。如果相對於前一個版本增加了新功能或有微小的不相容性，字串的第二個數字遞增。如果檔案格式改變，第一個數字遞增。</p>
				<p>後綴顯示發行的穩定性級別。通過一系列後綴顯示如何改進穩定性。可能的後綴有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				alpha</span></strong>表明發行包含大量未被徹底測試的新代碼。已知的問題應該在新聞小節被記錄。請參見<a href="news.html">附錄D：</a><a href="news.html" title="Appendix D. MySQL Change History"><i>MySQL變更史</i></a>。在大多數<span>alpha</span>版本中也有新的命令和延伸。<span>alpha</span>版本也可能有主要代碼更改等開發。但我們在發佈前一定對其進行測試。</p>
				<p>
				<span>
				·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				beta</span></strong>意味著該版本功能是完整的，並且所有的新代碼被測試了，沒有增加重要的新特徵，應該沒有已知的問題。當<span>alpha</span>版本至少一個月沒有出現報導的致命漏洞，並且沒有計劃增加導致已經實施的功能不穩定的新功能時，版本則從<span>alpha</span>版變為<strong><span >beta</span></strong>版。</p>
				<p>在以後的<strong><span >beta</span></strong>版、發佈版或產品發佈中，所有<span>API</span>、外部可視結構和<span>SQL</span>命令列均不再更改。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>rc</span></strong>是<span>發佈代資料表；</span>是一個發行了一段時間的<span>beta</span>版本，看起來應該運行正常。只增加了很小的修復。<span>(</span><span>發佈代資料表即以前所稱的</span><span>gamma
				</span>版<span>) </span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果沒有後綴，這意味著該版本已經在很多地方運行一段時間了，而且沒有非平台特定的問題報告。只增加了關鍵漏洞修復修復。這就是我們稱為一個產品（穩定）或「通用」版本的東西。</p>
				<p><strong>
				<span>
				MySQL</span></strong>的命名機制於其它產品稍有不同。一般情況，我們可以很放心地使用已經投放市場兩周而沒有被相同發佈系列的新版本所代替的版本。</p>
				<p><strong>
				<span>
				MySQL</span></strong>所有版本都經過我們的標準測試和基準測試運行，以保證它們可相當安全地使用。因為標準測試不斷擴充以檢測以前發現的問題，測試套件一直在改進之中。</p>
				<p>所有版本都至少已經用下列套件進行了測試：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>一個內部測試套件</p>
				<p>
				<span>mysql-test</span>目錄包含一整套測試案例。我們針對每個二進制伺服器進行這些測試。關於該測試套件的詳細訊息參見<a href="extending-mysql.html#mysql-test-suite" title="27.1.2. MySQL Test Suite">27.1.2節，「MySQL測試套件」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MySQL</span>基準套件</p>
				<p>
				它運行一定範圍的普通查詢。它也是一個測試，檢測最新的最佳化處理是否真的使代碼更快。請參見<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4節，「MySQL基準套件」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>crash-me</span>測試</p>
				<p>這嘗試決定資料庫支援什麼功能和它的能力與限制是什麼。請參見<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4節，「MySQL基準套件」</a>。</p>
				<p>另一個測試是在內部生產環境中使用最新<strong><span>MySQL</span></strong>版本，至少在一台機器上。我們有超過<span>100GB</span>的數據可供使用。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="choosing-distribution-format"></a>
				2.1.2.2.&nbsp;選擇分發格式</h4></div></div></div>
				<p>選擇了<span>MySQL</span>的安裝版本後，要做的第二項決策是您是使用原始碼分發版還是二進制分發版。大多數情況，如果您的平台上已經有了一個二進制分發版，您可能使用二進制分發版。大多數平台可以使用原格式二進制分發版，例如<span>Linux</span>使用<span>RPM</span>檔案，<span>Mac 
				OS X</span>使用<span>DMG</span>安裝軟件包。也可以使用<span>Zip</span>檔案或壓縮<strong><span>tar</span></strong>檔案。</p>
				<p>選擇二進制分發版的理由：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>二進制分發版比原始碼分發版更容易安裝。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>為了滿足不同用戶的需求，我們提供了兩種不同的二進製版本：一個是編譯過的帶非事務儲存引擎<span>(</span>小的快速庫<span>)</span>，另一個配置了最重要的延伸選項，例如事務安全資料表。兩個版本均從相同的原始碼分發版編譯而來。所有本地<span>MySQL</span>客戶端均可以連接任一版本的<span>MySQL</span>伺服器。</p>
				<p>延伸<span>MySQL</span>庫分發版標有<span>-max</span>後綴，配置了與<strong><span>mysqld-max</span></strong>相同的選項。請參見<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2節，「mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器」</a>。</p>
				<p>如果想要使用<span>MySQL-Max</span><span> 
				RPM</span>，必須首先安裝標準<span>MySQL-server</span><span> 
				RPM</span>。</p>
				<p>在某些環境下，最好安裝原始碼分發版<span>MySQL</span>：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您想要在某個明顯的位置安裝<span>MySQL</span>。標準二進制分發版可以安裝到任何地方，但您想更加靈活地將<span>MySQL</span>組件放到某個地方。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您想要將<strong><span>mysqld</span></strong>配置一些標準二進制分發版中未包括的一些特殊特徵。下面是一些您想要使用的最常用的選項：</p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-innodb</span><span>(</span>在所有<span>MySQL 
				5.1</span>庫版本中預設使用<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-berkeley-db</span><span>(</span>只適合部分平台<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-libwrap</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>
				<span>--with-</span><span>名<span>d-z-libs</span></span></span><span>(</span>適合部分二進制<span>)</span></p>
				<p>
				<span>
				o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--with-debug[=full]</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您想要將<strong><span>mysqld</span></strong>配置一些標準二進制分發版中已經包括的一些特殊特徵。例如，一般編譯過的分發版支援所有字元編碼。如果您想要一個更小的<span>MySQL</span>伺服器，可以重新編譯只支援您需要的字元編碼。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您有一個專用編譯器<span>(</span>例如<span>pgcc</span><span>)</span>或想要使用更好地最佳化適用您的處理器的編譯器選項。二進制分發版編譯的選項適合同一處理器族的各種處理器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您想要使用<span>BitKeeper</span>庫中的最新原始碼，以訪問所有最新漏洞修復。例如，如果您發現了漏洞並將它報告給<span>MySQL</span>開發小組，漏洞修復傳遞給原始碼庫，您便可以訪問它。發佈實際發行後才會出現漏洞修復。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您想要閱讀<span>(</span>或修改<span>)</span>構成<strong><span>MySQL</span></strong>的<span>C</span>和<span>C++</span>代碼，您應該拿到原始碼分發版。原始碼總是最終的手冊。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>原始碼分發版也比二進制的分發版包含更多的測試和實例。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="many-versions"></a>
				2.1.2.3.&nbsp;如何發佈更新以及何時發佈更新</h4></div></div></div><a class="indexterm" name="id2703931"></a><a class="indexterm" name="id2703941"></a>
				<p><strong>
				<span>
				MySQL</span></strong>進展的相當快，我們想要與其它<strong><span>MySQL</span></strong>用戶分享它。當我們有一個看來其它人似乎需要的非常有用的功能時，我們就試著製作一個發行版本。</p>
				<p>
				我們也嘗試幫助那些需要很容易實現的功能的用戶，我們也關注我們授權的用戶想要什麼，我們更特別關注我們支援的客戶想要什麼，並且盡力幫助他們。</p>
				<p>沒有人一定要下載一個新版本，新聞小節中將告訴您新版本是否有一些您確實想要的東西。請參見<a href="news.html" title="Appendix D. MySQL Change History">附錄D：<i>MySQL變更史</i></a>。</p>
				<p>當更新<strong><span>MySQL</span></strong>時，我們使用下列策略：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>將發佈每個系列。每次發佈時，版本的最後一個數字為同一系列前一版本的基礎上加<span>1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>穩定的測試過的產品版本每年準備出現<span>1-2</span>次，但是如果發現小問題，只有問題修復的一個版本將被發行。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>工作版本<span>/</span>對舊版本的漏洞修復檔案每<span>4-8</span>周出現一次。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>對一些平台的二進制分發版，主要版本由我們製作。其它人可以為其它系統製作二進制分發版，但是可能不多見。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我們一旦識別並修正了非緊急但煩人的問題，則立即將其發佈，可以從公共<span>BitKeeper</span>庫中立即得到修復代碼，並將包含到下一發佈版中。</p>
				<ul type="disc">
					<li>
					在任何情況下，如果在一個發行中有一個致命問題，我們將盡快製作一個新版本來修復。（我們希望其它公司也這樣做！<span>)
					</span></li>
				</ul>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="release-philosophy"></a>
				2.1.2.4.&nbsp;發佈原則：發行版本中沒有已知的問題</h4></div></div></div>
				<p>我們投入了大量的時間和工作來使我們的發佈沒有問題。我們從來沒有發佈過含有<em><span>已知</span></em>致命重複性問題的單一<span>MySQL</span>版本。<span>(</span>「<span class="quote">致命</span>」問題指能在正常應用中導致<span>MySQL</span>癱瘓的問題，對於正常查詢產生錯誤答案，或有安全問題）<span>。
				</span></p>
				<p>我們已經將所有公開問題、問題和由設計決策決定的事宜記入檔案。請參見<a href="problems.html#bugs" title="A.8. Known Issues in MySQL">A.8節，「MySQL中的已知事宜」</a>。</p>
				<p>我們的目標是修復一切可以修復的東西，而不會使穩定的<span>MySQL</span>版本變得不穩定。在某些情況，這意味著我們可以在開發版本中修復問題，而不是在穩定的<span> 
				(</span>產品<span>) </span>版本。自然，我們會將這些問題記入文檔，以便用戶能知道。</p>
				<p>下面描述了我們如何操作：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我們通過我們的客戶支援列資料表、在<span><a target="_top"  href="http://bugs.mysql.com/">http://bugs.mysql.com/</a>
				</span>問題資料庫和<span>MySQL</span>外部郵件列資料表來監控問題。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當前版本中所有被報導的問題被輸入問題資料庫。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當我們修復問題，我們總是為其設計一次測試案例，並將其包括進測試系統中，以確保不會漏檢使問題再現。<span>(</span>所有修復的問題中大約<span>90%</span>的具有測試案例）<span>。
				</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>為新增到<span>MySQL</span>中的所有新功能建立測試案例。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我們開始構建新的<span>MySQL</span>發佈前，我們確保修復了<span>MySQL</span>版本<span>(3.23.x</span>、<span>4.0.x</span>、<span>4.1.x</span>、<span>5.0.x</span>等等<span>)</span>中所有被報導的重複性問題。如果某些內容不能修復<span>(</span>由於<span>MySQL</span>內部的一些設計決策<span>)</span>，我們在本手冊中記錄下來。請參見<a href="problems.html#bugs" title="A.8. Known Issues in MySQL">A.8節，「MySQL中的已知事宜」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我們在所有支援二進制的平台<span>(15+</span>平台<span>)</span>上構建並運行我們的測試套件和基準套件。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果在某個平台上測試或基準套件失敗，我們不會公佈二進制。如果問題是由於原始碼中的普通問題，我們將進行修復並在所有系統上構建並測試。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>構建和測試過程需要<span>2-3</span>天。如果在該過程中我們收到致命問題相關報告<span>(</span>例如，會<span>造成內核轉儲<span>)</span></span>，我們將修復該問題並重新啟動構建過程。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span><a target="_top"  href="http://dev.mysql.com/">http<span>：</span>//dev.mysql.com/</a></span>上公佈二進制後，我們則向<span>mysql</span>發出公告消並<span>announce</span>郵件列資料表。請參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The 
				MySQL郵件列資料表」</a>。公告消息包含所有發佈的更改列資料表和已知問題。只有部分發版不需要<strong><span>已知的問題</span></strong>部分。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>為了讓我們的用戶快速訪問最新<span>MySQL</span>功能，我們每<span>4-8</span>周產生一個新的<span>MySQL</span>發佈。每天構建原始碼快照，可以從<span><a target="_top"  href="http://downloads.mysql.com/snapshots.php">http://downloads.mysql.com/snapshots.php</a></span>獲得。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				如果，儘管經過我們最大的努力，我們在發佈後仍收到問題報告，即在某個具體平台上出現嚴重問題，我們將立即進行修復，並為該平台構建一個新的 
				<span>&#39;a&#39;</span>版本。由於我們的大用戶群，可以很快地查出並解決此類問題。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>我們為保證穩定版本所做的跟蹤記錄不錯。在最近<span>150</span>個發佈中，我們只需要對其中不到<span>10</span>個重新構建。其中有<span>3</span>個案例，問題為我們的構建機器上的<span>glibc</span><span>
				</span>庫，花了很長時間來跟蹤。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-binaries"></a>
				2.1.2.5.&nbsp;MySQL AB編譯的MySQL二進製版本</h4></div></div></div><a class="indexterm" name="id2704293"></a>
				<p>作為<span>MySQL AB</span>的服務，我們提供了一套二進制<span>MySQL</span>分發版，已經在我們的站點上所列的系統或支援<span>MySQL</span>、友好地為我們提供訪問的機器上的系統上編譯過。</p>
				<p>除了具體平台安裝軟件包格式提供的二進制分發版，我們還以壓縮<strong><span>tar</span></strong>檔案<span>(</span><span>.tar.gz</span>檔案<span>)</span>為多種平台提供了二進制分發版。請參見<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2節，「使用二進制分發版的標準MySQL安裝」</a>。</p>
				<p>對於<span>Windows</span>分發版，參見<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。</p>
				<p>使用指令 
				<span>Build-tools/Do-compile</span>生成這些分發版，可以編譯原始碼並使用<strong><span>scripts/make_binary_distribution</span></strong>建立二進制<span>tar.gz</span>檔案。</p>
				<p>通過下面的編譯器和選項來配置並構建二進制分發版。可以查看各個庫二進制<strong><span>tar</span></strong>檔案分發版的指令<strong><span>bin/mysqlbug</span></strong>內的變數<span>COMP_ENV_INFO</span>和 
				<span>CONFIGURE_LINE</span>來查看這些訊息。</p>
				<div class="itemizedlist"><ul type="disc"><li>在<span>MySQL 
					AB</span>開發系統上構建下面的二進制：<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx x86</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 -mcpu=pentiumpro&quot; 
					CXX=gcc CXXFLAGS=&quot;-O2 -mcpu=pentiumpro -felide-constructors&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --disable-shared --with-client-ldflags=-all-static 
					--with-mysqld-ldflags=-all-static</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.x x86</span>中的<strong><span>icc</span></strong><span>(Intel 
					C++ Compiler 8.1</span>或更高版本<span>)</span>：</p>
					<p>
					<span>CC=icc CXX=icpc 
					CFLAGS=&quot;-O3 -unroll2 -ip -mp -no-gcc -restrict&quot; CXXFLAGS=&quot;-O3 
					-unroll2 -ip -mp -no-gcc -restrict&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --enable-assembler --disable-shared 
					--with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static 
					--with-embedded-server --with-innodb</span></p>
					<p>請注意<span>Intel
					</span>編譯器<span>8.1</span>版和更高版有不同的「純」<span>C(</span><span>icc</span><span>)</span>驅動程式和<span>C++(</span><span>icpc</span><span>)</span>驅動程式；如果您使用<strong><span>icc
					</span></strong><span>8.0</span>版本或較早的版本來構建<span>MySQL</span>，需要設置<span>CXX=icc</span>。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx Intel Itanium 2</span>中的<strong><span>ecc</span></strong><span> 
					(Intel C++ Itanium Compiler 7.0)</span>：</p>
					<p>
					<span>CC=ecc CFLAGS=&quot;-O2 
					-tpp2 -ip -nolib_inline&quot; CXX=ecc CXXFLAGS=&quot;-O2 -tpp2 -ip -nolib_inline&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx Intel Itanium</span>中的<strong><span>ecc</span></strong><span>(Intel 
					C++ Itanium Compiler 7.0)</span>：</p>
					<p>
					<span>CC=ecc CFLAGS=-tpp1 
					CXX=ecc CXXFLAGS=-tpp1 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx alpha</span>中的<span>ccc</span><span>(Compaq 
					C V6.2-505 / Compaq C++ V6.3-006)</span>：</p>
					<p>
					<span>CC=ccc CFLAGS=&quot;-fast 
					-arch generic&quot; CXX=cxx CXXFLAGS=&quot;-fast -arch generic -noexceptions 
					-nortti&quot; ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile --with-mysqld-ldflags=-non_shared 
					--with-client-ldflags=-non_shared --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.x.xx ppc</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx s390</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2&quot; 
					CXX=gcc CXXFLAGS=&quot;-O2 -felide-constructors&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-client-ldflags=-all-static 
					--with-mysqld-ldflags=-all-static</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.4.xx x86_64(AMD64)</span>中的<strong><span>gcc</span></strong><span> 
					3.2.1</span>：</p>
					<p>
					<span>CXX=gcc 
					./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 x86</span>中的<strong><span>gcc</span></strong><span> 
					3.2.3</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared --with-inno</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 SPARC</span>中的<strong><span>gcc</span></strong><span> 
					3.2</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --enable-assembler 
					--with-named-z-libs=no --with-named-curses-libs=-lcurses 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 8 SPARC 64-bit</span>中的<strong><span>gcc</span></strong><span> 
					3.2</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-m64 -fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -m64 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--with-named-curses-libs=-lcurses --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 9 SPARC</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-curses-libs=-lcurses 
					--disable-shared</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Sun Solaris 9 SPARC</span>中的<span>cc-5.0</span><span>(Sun 
					Forte 5.0)</span>：</p>
					<p>
					<span>CC=cc-5.0 CXX=CC 
					ASFLAGS=&quot;-xarch=v9&quot; CFLAGS=&quot;-Xa -xstrconst -mt -D_FORTEC_ -xarch=v9&quot; 
					CXXFLAGS=&quot;-noex -mt -D_FORTEC_ -xarch=v9&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 4.3.2 ppc</span>中的<strong><span>gcc</span></strong><span> 
					3.2.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many &quot; CXX=gcc CXXFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 4.3.3 ppc</span>中的<span>xlC_r</span><span>(IBM 
					Visual Age C/C++ 6.0)</span>：</p>
					<p>
					<span>CC=xlc_r 
					CFLAGS=&quot;-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; 
					CXX=xlC_r CXXFLAGS =&quot;-ma -O2 -qstrict -qoptimize=2 
					-qmaxmem=8192&quot; ./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 5.1.0 ppc</span>中的<strong><span>gcc</span></strong><span> 
					3.3</span>：</p>
					<p>
					<span>CFLAGS=&quot;-O2 
					-mcpu=powerpc -Wa,-many&quot; CXX=gcc CXXFLAGS=&quot;-O2 -mcpu=powerpc 
					-Wa,-many -felide-constructors -fno-exceptions -fno-rtti&quot; 
					./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>IBM AIX 5.2.0 ppc</span>中的<span>xlC_r</span><span>(IBM 
					Visual Age C/C++ 6.0)</span>： </p>
					<p>
					<span>CC=xlc_r CFLAGS=&quot;-ma 
					-O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; CXX=xlC_r CXXFLAGS=&quot;-ma 
					-O2 -qstrict -qoptimize=2 -qmaxmem=8192&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-z-libs=no --disable-shared 
					--with-embedded-server --with-innodb</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 10.20 pa-risc1.1</span>中的<strong><span>gcc</span></strong><span> 
					3.1</span>：</p>
					<p>
					<span>CFLAGS=&quot;-DHPUX 
					-I/opt/dce/include -O3 -fPIC&quot; CXX=gcc CXXFLAGS=&quot;-DHPUX 
					-I/opt/dce /include -felide-constructors -fno-exceptions -fno-rtti 
					-O3 -fPIC&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-pthread --with-named-thread-libs=-ldce 
					--with-lib-ccflags=-fPIC --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.00 pa-risc</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.50)</span>：</p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=+DAportable CXXFLAGS=+DAportable ./configure 
					--prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared 
					--with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.11 pa-risc2.0 64bit</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.33)</span>： </p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.11 pa-risc2.0 32bit</span>中的<span>aCC</span><span>(HP 
					ANSI C++ B3910B A.03.33)</span>： </p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=&quot;+DAportable&quot; CXXFLAGS=&quot;+DAportable&quot; ./configure 
					--prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>HP-UX 11.22 ia64 64bit</span>中的<span>aCC</span><span>(HP 
					aC++/ANSI C B3910B A.05.50)</span>：</p>
					<p>
					<span>CC=cc CXX=aCC 
					CFLAGS=&quot;+DD64 +DSitanium2&quot; CXXFLAGS=&quot;+DD64 +DSitanium2&quot; 
					./configure --prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared 
					--with-embedded-server --with-innodb</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Apple Mac OS X 10.2 powerpc</span>中的<strong><span>gcc</span></strong><span> 
					3.1</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>FreeBSD 4.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>
					CFLAGS=-DHAVE_BROKEN_REALPATH ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-z-libs=not-used 
					--disable-shared</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>使用<span>LinuxThreads</span>的<span>FreeBSD 
					4.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.4</span>：</p>
					<p>
					<span>CFLAGS=&quot;-DHAVE_BROKEN_REALPATH 
					-D__USE_UNIX98 -D_REENTRANT -D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads&quot; 
					CXXFLAGS=&quot;-DHAVE_BROKEN_REALPATH -D__USE_UNIX98 -D_REENTRANT 
					-D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads&quot; 
					./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --with-named-thread-libs=&quot;-DHAVE_GLIBC2_STYLE_GETHOSTBYNAME_R 
					-D_THREAD_SAFE -I /usr/local/include/pthread/linuxthreads 
					-L/usr/local/lib -llthread -llgcc_r&quot; --disable-shared 
					--with-embedded-server --with-innodb</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>QNX Neutrino 6.2.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3qnx-nto 20010315</span>：</p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--disable-shared</span></p>
					<p>下面的二進制是在由其它用戶提供給<span>MySQL AB</span>的第三方系統上構建而成。這是免費贈送；<span>MySQL 
					AB</span>沒有完全控制這些系統，因此我們只能對在這些系統上構建的二進制提供有限的支援。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp; </span><span>SCO Unix 3.2v5.0.7 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.95.3: </span></p>
					<p>
					<span>CFLAGS=&quot;-O3 
					-mpentium&quot; LDFLAGS=-static CXX=gcc CXXFLAGS=&quot;-O3 -mpentium 
					-felide-constructors&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SCO UnixWare 7.1.4 i386</span>中的<strong><span>CC</span></strong><span> 
					3.2: </span></p>
					<p>
					<span>CC=cc CFLAGS=&quot;-O&quot; 
					CXX=CC ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --with-named-z-libs=no 
					--enable-thread-safe-client --disable-shared --with-readline</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>CO OpenServer 6.0.0 i386</span>中的<strong><span>CC</span></strong><span> 
					3.2: </span></p>
					<p>
					<span>CC=cc CFLAGS=&quot;-O&quot; 
					CXX=CC ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-z-libs=no --enable-thread-safe-client 
					--disable-shared --with-readline</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Compaq Tru64 OSF/1 V5.1 732 
					alpha</span>中的<span>cc/cxx</span><span>(Compaq 
					C V6.3-029i / DIGITAL C++ V6.1-027): </span></p>
					<p>
					<span>CC=&quot;cc -pthread&quot; 
					CFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed 
					-speculate all&quot; CXX=&quot;cxx -pthread&quot; CXXFLAGS=&quot;-O4 -ansi_alias 
					-fast -inline speed -speculate all -noexceptions -nortti&quot; 
					./configure --prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot; 
					--disable-shared --with-mysqld-ldflags=-all-static</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp;&nbsp; </span><span>SGI Irix 6.5 IP32</span>中的<strong><span>gcc</span></strong><span> 
					3.0.1: </span></p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXXFLAGS=&quot;-O3 
					-fno-omit-frame-pointer -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>FreeBSD/sparc64 5.0</span>中的<strong><span>gcc</span></strong><span> 
					3.2.1: </span></p>
					<p>
					<span>
					CFLAGS=-DHAVE_BROKEN_REALPATH ./configure 
					--prefix=/usr/local/mysql 
					--localstatedir=/usr/local/mysql/data 
					--libexecdir=/usr/local/mysql/bin 
					--with-extra-charsets=complex --enable-thread-safe-client 
					--enable-local-infile --disable-shared --with-innodb</span><span>
					</span></p>
					<p>在<span>MySQL AB</span>過去提供的二進制軟件包中應用了下面的編譯選項。這些二進制不再進行更新，但是在這裡列出了這些編譯選項供參考。</p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>
					&nbsp;</span><span>Linux 2.2.xx SPARC</span>中的<strong><span>egcs</span></strong><span> 
					1.1.2: </span></p>
					<p>
					<span>CC=gcc CFLAGS=&quot;-O3 
					-fno-omit-frame-pointer&quot; CXX=gcc CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer 
					-felide-constructors -fno-exceptions -fno-rtti&quot; ./configure 
					--prefix=/usr/local/mysql --with-extra-charsets=complex 
					--enable-thread-safe-client --enable-local-infile 
					--enable-assembler --disable-shared</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>Linux 2.2.x x686</span>中的<strong><span>gcc</span></strong><span> 
					2.95.2: </span></p>
					<p>
					<span>CFLAGS=&quot;-O3 -mpentiumpro&quot; 
					CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro -felide-constructors -fno-exceptions 
					-fno-rtti&quot; ./configure --prefix=/usr/local/mysql 
					--enable-assembler --with-mysqld-ldflags=-all-static 
					--disable-shared --with-extra-charsets=complex</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 4.1.4 2 sun4c</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=&quot;-O3 -felide-constructors&quot; ./configure --prefix=/usr/local/mysql 
					--disable-shared --with-extra-charsets=complex 
					--enable-assembler</span><span> </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 5.5.1(</span>及以上版本<span>)sun4u</span>中的<strong><span  style="font-family:
細明體">egcs</span></strong><span> 1.0.3a</span>或<span>2.90.27</span>或<strong><span>gcc</span></strong><span> 
					2.95.2</span>和更新版<span>: </span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span>
					<span>CC=gcc CFLAGS=&quot;-O3&quot; 
					CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors -fno-exceptions -fno-rtti&quot; 
					./configure --prefix=/usr/local/mysql --with-low-memory 
					--with-extra-charsets=complex --enable-assembler</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>SunOS 5.6 i86pc</span>中的<strong><span>gcc</span></strong><span> 
					2.8.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-low-memory --with-extra-charsets=complex</span><span>
					</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>BSDI BSD/OS 3.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.1: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>BSDI BSD/OS 2.1 i386</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2: </span></p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>
					<span>
					·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					</span></span><span>AIX 4.2</span>中的<strong><span>gcc</span></strong><span> 
					2.7.2.2</span>：</p>
					<p>
					<span>CC=gcc CXX=gcc 
					CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql 
					--with-extra-charsets=complex</span></p>
					<p>如果您有更好的上述配置選項，可以向<span>MySQL </span>
					<span>internals</span>郵件列資料表發送郵件。請參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The MySQL郵件列資料表」</a>。</p>
					<p>在我們的站點中列出的<span>MySQL 5.1</span>發佈的<span>RPM</span>分發版是由<span>MySQL 
					AB</span>產生的。</p>
					<p>如果您想要編譯<span>MySQL</span>調試版本，應當在前面的<strong><span>configure</span></strong>命令中加上<span>--with-debug</span>或<span>--with-debug=full</span>，並去掉<span>-fomit-frame-pointer</span>選項。</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="getting-mysql"></a>
			2.1.3.&nbsp;怎樣獲得MySQL</h3></div></div></div><a class="indexterm" name="id2705455"></a><a class="indexterm" name="id2705461"></a><a class="indexterm" name="id2705468"></a><a class="indexterm" name="id2705478"></a><a class="indexterm" name="id2705485"></a><a class="indexterm" name="id2705492"></a></div><div class="section"><div class="titlepage"><div><div>
			檢查<span>MySQL</span>下載頁<span>(<a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/<span>
			</span></a>)</span>獲取當前版本和下載指令訊息。關於<span>MySQL</span>下載鏡像站點的完整的最新列資料表，參見<span><a target="_top"  href="http://dev.mysql.com/downloads/mirrors.html"><span>
			<u><span style="color:blue">
			http://dev.mysql.com/downloads/mirrors.html</span></u></span></a></span>。您可以在此發現<span>MySQL</span>鏡像站點和如何報告有問題的或過時的鏡像站點的訊息。<p>
			我們的主鏡像站點位於<span><a target="_top"  href="http://mirrors.sunsite.dk/mysql/">http://mirrors.sunsite.dk/mysql/</a></span>。</p>
			<h3 class="title"><a name="verifying-package-integrity"></a>
			2.1.4.&nbsp;通過MD5校驗和或GnuPG驗證軟件包的完整性<code class="literal"></code></h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#verifying-md5-checksum">
				2.1.4.1. 驗證MD5校驗和</a></span></dt><dt><span class="section">
				<a href="#checking-gpg-signature">
				2.1.4.2. 通過GnuPG進行簽名檢查<code class="literal"></code></a></span></dt><dt><span class="section">
				<a href="#checking-rpm-signature">
				2.1.4.3. 使用RPM進行簽名檢查<code class="literal"></code></a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				下載了適合您的需求的<span>MySQL</span>安裝軟件包並在安裝前，您應當確保它的完整性，沒有被篡改。<span>MySQL 
				AB</span>提供了<span>3</span>種完整性檢查方法：<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>MD5</span>校驗和</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>GnuPG</span>、<span>GNU 
				Privacy Guard</span>對簽名進行加密</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>對於<span>RPM</span>軟件包，使用內嵌式<span>RPM</span>完整性驗證機制</p>
				<p>下面的章節描述了如何使用這些方法。</p>
				<p>如果您注意到<span>MD5</span>校驗和與<span>GPG</span>簽名不匹配，首先應嘗試多次下載相關安裝軟件包，可以從其它鏡像站點。如果您反覆嘗試仍不能成功驗證安裝軟件包的完整性，請將此類問題通知給我們，包括完整的安裝軟件包名和您使用的下載站點，在<span>&lt;<a  href="mailto:webmaster@mysql.com">webmaster@mysql.com</a>&gt;</span>或<span>&lt;<a  href="mailto:build@mysql.com">build@mysql.com</a>&gt;</span>。不要使用問題<span>-</span>報告機制來報告下載問題。</p>
				<h4 class="title"><a name="verifying-md5-checksum"></a>
				2.1.4.1.&nbsp;驗證MD5校驗和</h4></div></div></div>
				<p>下載<span>MySQL</span>安裝軟件包後，您應當確保它的<span>MD5</span>校驗和與提供的<span>MySQL</span>下載頁上的相匹配。每個安裝軟件包有唯一的校驗和，可以用下面的命令來驗證，其中<span>package_name</span>是您下載的安裝軟件包的名稱：</p>
				<pre><span>shell&gt; </span><span><b><span>md5sum package_name</span></b></span></pre>
				<p>示範：</p>
				<pre><span>&nbsp; shell&gt; md5sum mysql-st</span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></pre>
				<pre><span>&nbsp; aaab65abbec64d5e907dcd41b8699945&nbsp; mysql-st</span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></pre>
				<p>您應當驗證結果校驗和<span>(</span>十六進制數字字串<span>)</span>與下載頁上相關安裝軟件包下面顯示的校驗和相匹配。</p>
				<p><strong><span>註釋：</span></strong>一定要驗證<strong><span>歸檔檔案</span></strong><span>(</span>例如，<span>.zip</span>或<span>.tar.gz</span>檔案<span>)</span>的校驗和，而不是其中包括的檔案。</p>
				<p>請注意並非所有作業系統支援<strong><span>md5sum</span></strong>命令。在一些作業系統上，只是稱為<strong><span>md5</span><span>，</span></strong>另一些根本不裝載它。在<span>Linux</span>中，它是<strong><span>GNU 
				Text Utilities</span></strong>安裝軟件包的一部分，適合各種平台。可以從<span><a target="_top"  href="http://www.gnu.org/software/textutils/">http<span>：</span>//www.gnu.org/software/textutils/</a></span>下載原始碼。如果您已經安裝了<span>OpenSSL</span>，還可以使用命令<strong><span>openssl 
				md5 package_name</span></strong>。<span><a target="_top"  href="http://www.fourmilab.ch/md5/">http<span>：</span>//www.fourmilab.ch/md5/</a></span>提供了<span>DOS/Windows</span>使用的<strong><span>md5</span></strong>命令行實用工具。<strong><span>winMd5Sum</span></strong>是一個圖形<span>MD5</span>檢查工具，可以從<span><a target="_top"  href="http://www.nullriver.com/index/products/winmd5sum">http<span>：</span>//www.nullriver.com/index/products/winmd5sum</a></span>獲得。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="checking-gpg-signature"></a>
				2.1.4.2.&nbsp;通過GnuPG進行簽名檢查<code class="literal"></code></h4></div></div></div>
				<p>驗證安裝軟件包完整性和真實性的另一個方法是使用加密簽名。這比使用<span>MD5</span>校驗和更可靠，但是需要更多的工作。</p>
				<p><span>MySQL AB</span>用<strong><span>GnuPG</span></strong><span>(GNU 
				Privacy Guard)</span>對下載<span>MySQ</span>軟件包進行簽名。<strong><span>GnuPG</span></strong>是開放原始碼，不同於<span>Phil 
				Zimmermann</span>的聞名的<span>Pretty Good Privacy (<strong><span>PGP</span></strong>)</span>。關於<strong><span>GnuPG</span></strong>和如何獲得並安裝到您的系統的詳細訊息，請參見<span><a target="_top"  href="http://www.gnupg.org/">http<span>：</span>//www.gnupg.org/</a></span>。大多數<span>Linux</span>分發版裝有預設安裝的<strong><span>GnuPG</span></strong>。關於<strong><span>GnuPG</span></strong>的詳細訊息，參見 
				<span>
				<a target="_top"  href="http://www.openpgp.org/">
				http<span>：</span>//www.openpgp.org/</a></span>。</p>
				<p>要想驗證具體安裝軟件包的簽名，您首先需要獲得<span>MySQL AB</span>公共<span>GPG</span>構建密鑰的拷貝。可以從<span><a target="_top"  href="http://www.keyserver.net/">http<span>：</span>//www.keyserver.net/</a></span>下載密鑰。您想要獲得的密鑰名為<span>build@mysql.com</span>。另外，可以從下面的文本直接剪切並粘貼密鑰：</p>
				<pre><span>Key ID:</span></pre>
				<pre><span>pub&nbsp; 1024D/5072E1F5 2003-02-03</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp; MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;</span></pre>
				<pre><span>Fingerprint: A4A9 4068 76FC BD3C 4567&nbsp; 70C8 8C71 8D3B 5072 E1F5</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>Public Key (ASCII-armored):</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>-----BEGIN PGP PUBLIC KEY BLOCK-----</span></pre>
				<pre><span>Version: GnuPG v1.0.6 (GNU/Linux)</span></pre>
				<pre><span>Comment: For info see http://www.gnupg.org</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3</span></pre>
				<pre><span>RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ</span></pre>
				<pre><span>fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3</span></pre>
				<pre><span>BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW</span></pre>
				<pre><span>hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV</span></pre>
				<pre><span>K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE</span></pre>
				<pre><span>kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI</span></pre>
				<pre><span>QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep</span></pre>
				<pre><span>rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q7TXlTUUwgUGFj</span></pre>
				<pre><span>a2FnZSBzaWduaW5nIGtleSAod3d3Lm15c3FsLmNvbSkgPGJ1aWxkQG15c3FsLmNv</span></pre>
				<pre><span>bT6IXQQTEQIAHQUCPj6jDAUJCWYBgAULBwoDBAMVAwIDFgIBAheAAAoJEIxxjTtQ</span></pre>
				<pre><span>cuH1cY4AnilUwTXn8MatQOiG0a/bPxrvK/gCAJ4oinSNZRYTnblChwFaazt7PF3q</span></pre>
				<pre><span>zIhMBBMRAgAMBQI+PqPRBYMJZgC7AAoJEElQ4SqycpHyJOEAn1mxHijft00bKXvu</span></pre>
				<pre><span>cSo/pECUmppiAJ41M9MRVj5VcdH/KN/KjRtW6tHFPYhMBBMRAgAMBQI+QoIDBYMJ</span></pre>
				<pre><span>YiKJAAoJELb1zU3GuiQ/lpEAoIhpp6BozKI8p6eaabzF5MlJH58pAKCu/ROofK8J</span></pre>
				<pre><span>Eg2aLos+5zEYrB/LsrkCDQQ+PqMdEAgA7+GJfxbMdY4wslPnjH9rF4N2qfWsEN/l</span></pre>
				<pre><span>xaZoJYc3a6M02WCnHl6ahT2/tBK2w1QI4YFteR47gCvtgb6O1JHffOo2HfLmRDRi</span></pre>
				<pre><span>Rjd1DTCHqeyX7CHhcghj/dNRlW2Z0l5QFEcmV9U0Vhp3aFfWC4Ujfs3LU+hkAWzE</span></pre>
				<pre><span>7zaD5cH9J7yv/6xuZVw411x0h4UqsTcWMu0iM1BzELqX1DY7LwoPEb/O9Rkbf4fm</span></pre>
				<pre><span>Le11EzIaCa4PqARXQZc4dhSinMt6K3X4BrRsKTfozBu74F47D8Ilbf5vSYHbuE5p</span></pre>
				<pre><span>/1oIDznkg/p8kW+3FxuWrycciqFTcNz215yyX39LXFnlLzKUb/F5GwADBQf+Lwqq</span></pre>
				<pre><span>a8CGrRfsOAJxim63CHfty5mUc5rUSnTslGYEIOCR1BeQauyPZbPDsDD9MZ1ZaSaf</span></pre>
				<pre><span>anFvwFG6Llx9xkU7tzq+vKLoWkm4u5xf3vn55VjnSd1aQ9eQnUcXiL4cnBGoTbOW</span></pre>
				<pre><span>I39EcyzgslzBdC++MPjcQTcA7p6JUVsP6oAB3FQWg54tuUo0Ec8bsM8b3Ev42Lmu</span></pre>
				<pre><span>QT5NdKHGwHsXTPtl0klk4bQk4OajHsiy1BMahpT27jWjJlMiJc+IWJ0mghkKHt92</span></pre>
				<pre><span>6s/ymfdf5HkdQ1cyvsz5tryVI3Fx78XeSYfQvuuwqp2H139pXGEkg0n6KdUOetdZ</span></pre>
				<pre><span>Whe70YGNPw1yjWJT1IhMBBgRAgAMBQI+PqMdBQkJZgGAAAoJEIxxjTtQcuH17p4A</span></pre>
				<pre><span>n3r1QpVC9yhnW2cSAjq+kr72GX0eAJ4295kl6NxYEuFApmr1+0uUq/SlsQ==</span></pre>
				<pre><span>=YJkx</span></pre>
				<pre><span>-----END PGP PUBLIC KEY BLOCK-----</span></pre>
				<p><span>您可以使用<strong><span>gpg 
				--import</span></strong>將構建密鑰導入您的個人公共<span>GPG</span>鑰匙圈</span><span>（</span><span>keyring</span>）<span>。例如，如果您把密鑰保存到</span><span>mysql_pubkey.asc</span><span>檔案中，導入命令應為：</span></p>
				<pre><span>shell&gt; </span><span><b><span>gpg --import mysql_pubkey.asc</span></b></span></pre>
				<p>關於公共密鑰如何工作的詳細訊息，請參閱<span>GPG</span>文檔。</p>
				<p>下載並導入公共構建密鑰後，下載期望的<span>MySQL</span>安裝軟件包和相應的簽名，也可以從下載頁上獲得。簽名檔案名與分發版檔案相同，有<span> 
				an </span>
				<span>.asc</span>延伸名。例如：</p>
				<table border="1" cellpadding="0" id="table1">
					<tr>
						<td>
						<p>分發檔案</td>
						<td>
						<p><span>
						<span>mysql-st</span><span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz</span></span></span></td>
					</tr>
					<tr>
						<td>
						<p>簽名檔案</td>
						<td>
						<p><span>
						<span>mysql-st</span><span>和<span>ard-5.1.2-alpha-linux-i686.tar.gz.asc</span></span></span></td>
					</tr>
				</table>
				<p>確保兩個檔案保存在同一目錄下，運行下面的命令來驗證分發檔案的簽名：</p>
				<pre><span>shell&gt; </span><span><b><span>gpg --verify package_name.asc</span></b></span></pre>
				<p>示範：</p>
				<pre><span>&nbsp; shell&gt; gpg --verify mysql-standard-5.1.2-alpha-linux-i686.tar.gz.asc</span></pre>
				<pre><span>&nbsp; gpg: Signature made Tue 12 Jul 2005 23:35:41 EST using DSA key ID 5072E1F5</span></pre>
				<pre><span>&nbsp; gpg: Good signature from &quot;MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;&quot;</span></pre>
				<p>
				<span>Good signature</span>消息資料表示所有內容都很正確。您可以忽略任何<span>insecure 
				memory</span>警告。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="checking-rpm-signature"></a>
				2.1.4.3.&nbsp;使用RPM進行簽名檢查<code class="literal"></code></h4></div></div></div>
				<p><span>RPM</span>軟件包沒有單獨的簽名。<span>RPM</span>軟件包內置<span>GPG</span>簽名和<span>MD5</span>校驗和。可以運行下面的命令來驗證安裝軟件包：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --checksig package_name.rpm</span></b></span></pre>
				<p>示範：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --checksig MySQL-server-5.1.2-alpha-0.i386.rpm</span></b></span></pre>
				<pre><span>MySQL-server-5.1.2-alpha-0.i386.rpm</span>：<span> md5 gpg OK</span></pre>
				<p><strong><span>註釋：</span></strong>如果您正使用<span>RPM 
				4.1</span>，並且出現關於<span>(GPG) 
				NOT OK (MISSING KEYS: GPG#5072e1f5)</span>的抱怨，儘管您已經將<span>MySQL</span>公共構建密鑰導入到您自己的<span>GPG</span>鑰匙圈，您必須首先將密鑰導入到<span>RPM</span>鑰匙圈中。<span>RPM 
				4.1</span>不再使用您的個人<span>GPG</span>鑰匙圈<span>(</span>或<span>GPG</span>本身<span>)</span>。<span>RPM 
				4.1</span>維護自己的鑰匙圈，因為它是系統範圍的應用程式，而用戶<span>GPG</span>公共鑰匙圈是具體的用戶檔案。要想將<span>MySQL</span>公共密鑰導入<span>RPM</span>鑰匙圈，要首先獲得前面章節描述的密鑰。然後使用<strong><span>rpm 
				--import</span></strong>導入密鑰。例如，如果您的公共密鑰保存在<span>mysql_pubkey.asc</span>檔案中，應使用下述命令導入公共密鑰：</p>
				<pre><span>shell&gt; </span><span><b><span>rpm --import mysql_pubkey.asc</span></b></span></pre>
				<p>如果您需要獲得<span>MySQL</span>公共密鑰，參見<a href="#checking-gpg-signature" title="2.1.4.2. Signature Checking Using GnuPG">2.1.4.2節，「通過GnuPG進行簽名檢查<code class="literal"></code>」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="installation-layouts"></a>
			2.1.5.&nbsp;安裝佈局</h3></div></div></div><a class="indexterm" name="id2706133"></a><a class="indexterm" name="id2706140"></a><a class="indexterm" name="id2706147"></a><a class="indexterm" name="id2706157"></a></div></div><div class="section"><div class="titlepage"><div><div>
		這節描述安裝<span>MySQL AB</span>提供的二進制代碼和原始碼分發時建立的預設目錄佈局。如果您安裝其它供應商提供的分發，應使用其它佈局。<p>
		在<span>Windows</span>中，<span>MySQL 5.1</span>的預設安裝目錄是<span>C:\Program 
		Files\MySQL\MySQL Server 5.1</span>。<span>(</span>一些<span>Windows</span>用戶寧願安裝到原來的預設安裝目錄 
		<span><span>
		C</span><span>：<span>\mysql</span></span></span>。然而，子目錄佈局仍然相同）<span>。</span>安裝目錄包括以下子目錄：</p>
		<table border="1" cellpadding="0" id="table2">
			<tr>
				<td width="116">
				<p><strong><span>目錄</span></strong></td>
				<td width="249">
				<p><strong><span>目錄內容</span></strong></td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>bin</span></td>
				<td width="249">
				<p>客戶端程式和<strong><span>mysqld</span></strong>伺服器</td>
			</tr>
			<tr>
				<td width="116">
				<p><tt >
				<span>data</span></tt></td>
				<td width="249">
				<p>日誌檔案，資料庫</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>Docs</span></td>
				<td width="249">
				<p>文檔</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>examples</span></td>
				<td width="249">
				<p>示範程式和指令</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>include</span></td>
				<td width="249">
				<p>包含<span>(</span>頭<span>)</span>檔案</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>lib</span></td>
				<td width="249">
				<p>庫</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>scripts</span></td>
				<td width="249">
				<p>實用工具指令</td>
			</tr>
			<tr>
				<td width="116">
				<p>
				<span>share</span></td>
				<td width="249">
				<p>錯誤消息檔案</td>
			</tr>
		</table>
		<p>使用<span>MySQL AB&#39;s Linux RPM</span>分發進行安裝後，將在以下系統目錄產生檔案：</p>
		<table border="1" cellpadding="0" id="table3">
			<tr>
				<td width="224">
				<p><strong><span>目錄</span></strong></td>
				<td width="261">
				<p><strong><span>目錄內容</span></strong></td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/bin</span></td>
				<td width="261">
				<p>客戶端程式和指令</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/sbin</span></td>
				<td width="261">
				<p><strong>
				<span>mysqld</span></strong>伺服器</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/var/lib/mysql</span></td>
				<td width="261">
				<p>日誌檔案，資料庫</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>
				/usr/share/doc/packages</span></td>
				<td width="261">
				<p>文檔</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/include/mysql</span></td>
				<td width="261">
				<p>包含<span>(</span>頭<span>)</span>檔案</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/lib/mysql</span></td>
				<td width="261">
				<p>庫</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/share/mysql</span></td>
				<td width="261">
				<p>錯誤消息和字元編碼檔案</td>
			</tr>
			<tr>
				<td width="224">
				<p>
				<span>/usr/share/sql-bench</span></td>
				<td width="261">
				<p>基準程式</td>
			</tr>
		</table>
		<p>在<span>Unix</span>中，可以在您選擇的安裝位置解壓並安裝<strong><span>tar</span></strong>檔案二進制分發<span>(typically
		</span>
		<span>/usr/local/mysql</span><span>)</span>並在該位置建立以下目錄：</p>
		<table border="1" cellpadding="0" id="table4">
			<tr>
				<td width="128">
				<p><strong><span>目錄</span></strong></td>
				<td width="285">
				<p><strong><span>目錄內容</span></strong></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>bin</span></td>
				<td width="285">
				<p>客戶端程式和<strong><span>mysqld</span></strong>伺服器</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>data</span></td>
				<td width="285">
				<p>日誌檔案，資料庫</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>docs</span></td>
				<td width="285">
				<p>文檔，<span>ChangeLog</span></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>include</span></td>
				<td width="285">
				<p>包含<span>(</span>頭<span>)</span>檔案</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>lib</span></td>
				<td width="285">
				<p>庫</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>scripts</span></td>
				<td width="285">
				<p><strong>
				<span>mysql_install_db</span></strong></td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>share/mysql</span></td>
				<td width="285">
				<p>錯誤消息檔案</td>
			</tr>
			<tr>
				<td width="128">
				<p>
				<span>sql-bench</span></td>
				<td width="285">
				<p>基準程式</td>
			</tr>
		</table>
		<p>配置並編譯完原始碼分發後，便開始安裝。預設情況下，可以將檔案安裝到<span>/usr/local</span>，即在下面的子目錄中：</p>
		<table border="1" cellpadding="0" id="table5">
			<tr>
				<td width="140">
				<p><strong><span>目錄</span></strong></td>
				<td width="213">
				<p><strong><span>目錄內容</span></strong></td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>bin</span></td>
				<td width="213">
				<p>客戶端程式和指令</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>include/mysql</span></td>
				<td width="213">
				<p>包含<span>(</span>頭<span>)</span>檔案</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>info</span></td>
				<td width="213">
				<p><span>Info</span>格式的文檔</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>lib/mysql</span></td>
				<td width="213">
				<p>庫</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>libexec</span></td>
				<td width="213">
				<p><strong>
				<span>mysqld</span></strong>伺服器</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>share/mysql</span></td>
				<td width="213">
				<p>錯誤消息檔案</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>sql-bench</span></td>
				<td width="213">
				<p>基準程式和<span>crash-me</span>測試</td>
			</tr>
			<tr>
				<td width="140">
				<p>
				<span>var</span></td>
				<td width="213">
				<p>資料庫和日誌檔案</td>
			</tr>
		</table>
		<p>在一個安裝目錄內，原始碼安裝的佈局在下列方面不同於二進制安裝：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span><b><span>mysqld</span></b></span>伺服器被安裝在<tt >「<span>libexec</span>」</tt>目錄而不是<tt >「<span>bin</span>」</tt>目錄內。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>數據目錄是<tt >「<span>var</span>」</tt>而非<tt >「<span>data</span>」</tt>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span><b>
		<span>m</span><span>ysql_install_db</span></b></span>被安裝在<tt >「<span>bin</span>」</tt>目錄而非<tt >「<span>scripts</span>」</tt>內。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>頭檔案和庫目錄是<tt >「<span>include/mysql</span>」</tt>和<tt >「<span>lib/mysql</span>」</tt>而非<tt >「<span>include</span>」</tt>和<tt >「<span>lib</span>」</tt>。</p>
		<p>執行原始碼分髮根目錄下的<span>scripts/make_binary_distribution</span>指令，您可以用編譯過的原始碼分發版建立您自己的二進制安裝。</p>
		<h2 class="title"><a name="quick-standard-installation"></a>
		2.2.&nbsp;使用二進制分發版的標準MySQL安裝</h2></div></div></div>
		<p>後面幾章包括如何在安裝軟件包格式適合的平台上平台安裝<span>MySQL</span>。<span>(</span>即執行「<span class="quote">二進制安裝</span>」）<span>。</span>也可以在多種平台上安裝<span>MySQL</span>二進制分發版。關於適合所有平台的軟件包的通用安裝指令參見<a href="#installing-binary" title="2.7. Installing MySQL on Other Unix-Like Systems">2.7節，「在其它類Unix系統中安裝MySQL」</a>。</p>
		<p>關於二進制分發版的使用和如何獲得的詳細訊息請參見<a href="#general-installation-issues" title="2.1. General Installation Issues">2.1節，「一般安裝問題」</a>。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="windows-installation"></a>2.3. 在Windows上安裝MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
		<a href="#windows-system-requirements">
		2.3.1. Windows系統要求</a></span></dt><dt><span class="section">
		<a href="#windows-choosing-package">
		2.3.2. 選擇安裝軟件包</a></span></dt><dt><span class="section">
		<a href="#windows-using-installer">2.3.3. 
		用自動安裝器安裝MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-install-wizard">
		2.3.4. 使用MySQL安裝嚮導</a></span></dt><dt><span class="section">
		<a href="#windows-config-wizard">
		2.3.5. 使用配置嚮導</a></span></dt><dt><span class="section">
		<a href="#windows-install-archive">2.3.6. 
		通過非安裝Zip檔案安裝MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-extract-archive">
		2.3.7. 提取安裝檔案檔案</a></span></dt><dt><span class="section">
		<a href="#windows-create-option-file">
		2.3.8. 建立選項檔案</a></span></dt><dt><span class="section">
		<a href="#windows-select-server">
		2.3.9. 選擇MySQL伺服器類型</a></span></dt><dt><span class="section">
		<a href="#windows-server-first-start">
		2.3.10. 首次啟動伺服器</a></span></dt><dt><span class="section">
		<a href="#windows-start-command-line">
		2.3.11. 從Windows命令行啟動MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-start-service">
		2.3.12. 以Windows服務方式啟動MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-testing">
		2.3.13. 測試MySQL安裝</a></span></dt><dt><span class="section">
		<a href="#windows-troubleshooting">
		2.3.14. 在Windows環境下對MySQL安裝的故障診斷與排除</a></span></dt><dt><span class="section">
		<a href="#windows-upgrading">
		2.3.15. 在Windows下升級MySQL</a></span></dt><dt><span class="section">
		<a href="#windows-vs-unix">
		2.3.16. Windows版MySQL同Unix版MySQL對比</a></span></dt></dl></div>
		<p><span>MySQL AB</span>已經提供了<span>Windows</span>中安裝的<span>MySQL 
		3.21</span>以上版本，並提供了每天下載<span>MySQL</span>的比率。本節描述在<span>Windows</span>中安裝<span>MySQL</span>的過程。</p>
		<p>使用<span>Windows</span>版本<span>MySQL</span>安裝器，結合<span>GUI</span>配置嚮導，可以自動安裝<span>MySQL</span>，建立選項檔案，啟動伺服器並使預設用戶帳號安全。</p>
		<p>如果您要升級已有的<span>4.1.5</span>版以前的<span>MySQL,</span>您必須執行以下步驟：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>獲得並安裝分發版。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>根據需要設置選項檔案。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>選擇想要使用的伺服器。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>啟動伺服器。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>為初始<span>MySQL</span>帳號指定密碼。</p>
		<p>該過程還適合安裝軟件包內不包括安裝器的<span>MySQL</span>安裝。</p>
		<p><span>Windows</span>版<span>MySQL 5.1</span>有<span>3</span>種分發格式：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>&nbsp;</span>二進制分發版包含一個設置程式，可以安裝您需要的任何內容，因此可以立即啟動伺服器。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>&nbsp;</span>原始碼分發版包含所有使用<span>Visual 
		Studio 2003</span>編譯器來構建可執行程式的代碼和支援檔案。</p>
		<p>一般來講，您應當使用二進制分發版。它比其它的分發版使用起來要簡單，不再需要其它工具來啟動並運行<span>MySQL</span>。</p>
		<p>本節描述了如何使用二進制分發版在<span>Windows</span>中安裝<span>MySQL</span>。要想使用原始碼分發版安裝，參見<a href="#windows-source-build" title="2.8.6. Installing MySQL from Source on Windows">2.8.6節，「在Windows下從原始碼安裝MySQL」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-system-requirements"></a>
			2.3.1.&nbsp;Windows系統要求</h3></div></div></div>
			<p>要想在<span>Windows</span>中運行<span>MySQL</span>，您需要：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>32</span>位<span>Windows</span>作業系統，例如<span>9x</span>、<span>Me</span>、<span>NT</span>、<span>2000</span>、<span>XP</span>或<span>Windows 
			Server 2003</span>。</p>
			<p>基於<span>Windows NT</span>的作業系統<span>(NT</span>，<span>2000,XP</span>，<span>2003)</span>，將<span>MySQL</span>伺服器做為服務來運行。強烈建議使用基於<span>Windows 
			NT</span>的作業系統。請參見<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12節，「以Windows服務方式啟動MySQL」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>TCP/IP</span>協議支援。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows</span>版本<span>MySQL</span>二進制分發版，可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/">http<span>：</span>//dev.mysql.com/<span>下載</span>/</a></span>下載。請參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
			<p>註釋：如果您從<span>FTP</span>下載分發版，我們建議使用充分的<span>FTP</span>客戶端以保證續傳，避免下載過程中檔案被破壞。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以讀取 
			<span>.zip</span>檔案的工具，以解壓分發檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>硬盤上有足夠的空間保證根據您的需求來解包、安裝和建立資料庫<span>(</span>一般建議至少有<span>200</span>兆字節<span>)</span>。</p>
			<p>您還可以有以下可選需求：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您計劃通過<span>ODBC</span>連接<span>MySQL</span>伺服器，您還需要一個連接器<span>/ODBC</span>驅動程式。請參見<a href="connectors.html#odbc-connector" title="26.1. MySQL Connector/ODBC">26.1節，「MySQL Connector/ODBC」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果資料表需要佔用的空間大於<span>4GB</span>，則在<span>NTFS</span>或更新的檔案系統上安裝<span>MySQL</span>。當建立資料表時不要忘記使用<span>MAX_ROWS</span>和 
			<span>AVG_ROW_LENGTH</span>。請參見<a href="sql-syntax.html#create-table" title="13.1.5. CREATE TABLE Syntax">13.1.5節，「CREATE 
			TABLE語法」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-choosing-package"></a>
			2.3.2.&nbsp;選擇安裝軟件包</h3></div></div></div>
			<p>在<span>Windows</span>中安裝<span>MySQL</span>時，有<span>3</span>種<span>MySQL 
			5.1</span>安裝軟件包可供選擇：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>基本安裝</span></strong>：該安裝軟件包的檔案名類似於<span>mysql-essential-5.1.2-alpha-win32.msi</span>，包含在<span>Windows</span>中安裝<span>MySQL</span>所需要的最少的檔案，包括配置嚮導。該安裝軟件包不包括可選組件，例如嵌入式伺服器和基準套件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>完全安裝</span></strong>：該安裝軟件包的檔案名類似於<span>mysql-5.1.2-alpha-win32.zip</span>，包含在<span>Windows</span>中安裝<span>MySQL</span>所需要的全部檔案，包括配置嚮導。該安裝軟件包包括可選組件，例如嵌入式伺服器和基準套件。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>非自動安裝檔案</span></strong>：該安裝軟件包的檔案名類似於<span>mysql-noinstall-5.1.2-alpha-win32.zip</span>，包含完整安裝包中的全部檔案，只是不包括配置嚮導。該安裝軟件包不包括自動安裝器，必須手動安裝和配置。</p>
			<p>對於大多數用戶，建議選擇基本安裝。</p>
			<p>您的選擇會影響您後面必須遵從的安裝過程。如果您選擇基本安裝或完全安裝，參見<a href="#windows-using-installer" title="2.3.3. Installing MySQL with the Automated Installer">2.3.3節，「用自動安裝器安裝MySQL」</a>。如果您選擇非自動安裝<span>MySQL</span>，參見<a href="#windows-install-archive" title="2.3.6. Installing MySQL from a Noinstall Zip Archive">2.3.6節，「通過非安裝Zip檔案安裝MySQL」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-using-installer"></a>2.3.3. 用自動安裝器安裝MySQL</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		在<span>Windows</span>中安裝<span>MySQL</span>時，新用戶可以使用<span>MySQL</span>安裝幫助和<span>MySQL 
		Configuration Wizard</span>（配置嚮導）。<span>MySQL</span>安裝和配置的方式是使新用戶可以立即開始使用<span>MySQL</span>。<p>
		基本安裝和完全安裝中均包括<span>MySQL</span>安裝幫助和配置嚮導，建議在大多數標準<span>MySQL</span>安裝中選擇。例外情況包括想在單個伺服器上安裝多個實例的用戶和想完全控制伺服器配置的高級用戶。</p>
		<h3 class="title"><a name="windows-install-wizard"></a>
			2.3.4.&nbsp;使用MySQL安裝嚮導</h3></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#mysql-install-wizard-introduction">
				2.3.4.1. 前言</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-starting">
			2.3.4.2. 下載並啟動MySQL安裝嚮導</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-install-type">
			2.3.4.3. 選擇安裝類型</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-custom-install">
			2.3.4.4. 定制安裝對話框</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-confirmation-dialog">
			2.3.4.5. 配置對話框</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-changes">
			2.3.4.6. MySQL安裝嚮導所作的更改</a></span></dt><dt><span class="section">
			<a href="#mysql-install-wizard-upgrading">
				2.3.4.7. 升級MySQL</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-introduction"></a>
				2.3.4.1.&nbsp;前言</h4></div></div></div>
			<p><span>MySQL</span>安裝幫助是<span>MySQL</span>伺服器的安裝器，使用最新的<span>Microsoft 
			Window</span>安裝器技術。結合使用<span>MySQL</span>安裝幫助和配置嚮導，用戶安裝並 
			配置完<span>MySQL</span>伺服器後便可以直接使用。</p>
			<p><span>MySQL</span>安裝幫助是<span>MySQL 5.1</span>伺服器分發的標準安裝器。使用<span>MySQL</span>安裝幫助安裝<span>MySQL</span>之前，用戶需要手動關閉並卸載已經安裝的以前版本的<span>MySQL</span>。關於對以前版本進行升級的詳細訊息請參見
          <a href="#mysql-install-wizard-upgrading" title="2.3.4.7. Upgrading MySQL">
			2.3.4.7節，「升級MySQL」</a>。</p>
			<p>最近版本的<span>Windows</span>包含了改進版本的<span>Microsoft 
			Windows</span>安裝器<span>(MSI)</span>。<span>MSI</span>已經成為<span>Windows 
			2000</span>、<span>Windows XP</span>和<span>Windows 
			Server 2003</span>應用程式安裝的事實標準。<span>MySQL</span>安裝幫助中使用了該技術，使安裝過程更加靈活、順利。</p>
			<p><span>Microsoft Windows</span>安裝器引擎隨著<span>Windows 
			XP</span>的更新而更新；使用以前<span>Windows</span>版本的用戶可以參考<span><a target="_top"  href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539">Microsoft
			<span>知識庫文章</span></a></span>查閱關於升級到最新版<span>Windows</span>安裝器引擎的資料。</p>
			<p>此外，<span>Microsoft</span>最近已經引入了<span>WiX(Windows
			</span>安裝器<span> XML)</span>工具包。這是<span>Microsoft</span>公認的開放原始碼項目。我們轉換到<span>WiX</span>是因為它是一個開放原始碼項目，可以使用指令更加靈活地處理整個<span>Windows</span>安裝過程。</p>
			<p>對<span>MySQL</span>裝幫助的改進依賴於各用戶的支援和反饋。如果您發現<span>MySQL</span>安裝幫助缺少對您很重要的某些功能，或如果您發現某個問題，請使用我們的<span><a target="_top"  href="http://bugs.mysql.com/"><span>MySQL問題系統</span></a></span>來索取功能或報告問題。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-starting"></a>
			2.3.4.2.&nbsp;下載並啟動MySQL安裝嚮導</h4></div></div></div>
			<p>可以從<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>下載<span>MySQL</span>伺服器安裝軟件包。如果您下載的安裝軟件包在<span>Zip</span>檔案中，您需要先提取檔案。</p>
			<p>啟動幫助的過程取決於下載的安裝軟件包的內容。如果有<span>setup.exe</span>檔案，雙擊啟動安裝過程。如果有<span>.msi</span>檔案，雙擊啟動安裝過程。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-install-type"></a>
			2.3.4.3.&nbsp;選擇安裝類型</h4></div></div></div>
			<p>有<span>3</span>種安裝類型：<strong><span>Typical(</span><span>典型安裝<span>)</span>、<span>Complete(</span>完全安裝<span>)</span></span></strong>和<strong><span>Custom(</span><span>定制安裝<span>)</span></span></strong>。</p>
			<p><strong><span>Typical(</span><span>典型安裝<span>)</span></span></strong>安裝只安裝<span>MySQL</span>伺服器、<strong><span>mysql</span></strong>命令行客戶端和命令行實用程式。命令行客戶端和實用程式包括<strong><span>mysqldump</span><span>、<span>myisamchk</span></span></strong>和其它幾個工具來幫助您管理<span>MySQL</span>伺服器。</p>
			<p><strong><span>Complete(</span><span>完全安裝<span>)</span></span></strong>安裝將安裝軟件包內包含的所有組件。完全安裝軟件包包括的組件包括嵌入式伺服器庫、基準套件、支援指令和文檔。</p>
			<p><strong><span>Custom(</span><span>定制安裝<span>)</span></span></strong>安裝允許您完全控制您想要安裝的軟件包和安裝路徑。關於定制安裝的詳細訊息請參見<a href="#mysql-install-wizard-custom-install" title="2.3.4.4. The Custom Install Dialog">2.3.4.4節，「定制安裝對話框」</a>。</p>
			<p>如果您選擇<strong><span  style="font-family:
細明體">Typical(</span><span>典型安裝<span>)</span></span></strong>或<strong><span>Complete(</span><span>完全安裝<span>)</span></span></strong>安裝並點擊<span class="guibutton"><span>Next</span></span>按鈕，您將進入確認窗口確認選擇並開始安裝。如果您選擇<strong><span>定制</span></strong>安裝並點擊<span class="guibutton"><span>Next</span></span>按鈕，您將進入定制安裝對話框，參見<a href="#mysql-install-wizard-custom-install" title="2.3.4.4. The Custom Install Dialog">2.3.4.4節，「定制安裝對話框」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-custom-install"></a>
			2.3.4.4.&nbsp;定制安裝對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果您想要更改<span>MySQL</span>安裝幫助安裝的安裝路徑或具體組件，應當選擇<strong><span>Custom(</span><span>定制安裝<span>)</span></span></strong>安裝。<p>
			所有可用組件列入定制安裝對話框左側的樹狀視圖內。未安裝的組件用紅色 <span class="guiicon">
			<span>X</span></span><span> </span>
			圖標資料表示；已經安裝的組件有灰色圖標。要想更改組件，點擊該組件的圖標並從下拉列資料表中選擇新的選項。</p>
			<p>可以點擊安裝路徑右側的<span class="guibutton"><span>Change...</span></span>按鈕來更改預設安裝路徑。</p>
			<p>選擇了安裝組件和安裝路徑後，點擊<span class="guibutton"><span>Next</span></span>按鈕進入確認對話框。</p>
			<h4 class="title"><a name="mysql-install-wizard-confirmation-dialog"></a>
			2.3.4.5.&nbsp;配置對話框</h4></div></div></div>
			<p>選擇了安裝類型和可選安裝組件後，則進入確認對話框。該對話框中將顯示安裝類型和安裝路徑供檢查。</p>
			<p>如果您滿意設定值要想安裝<span>MySQL</span>，點擊<span class="guibutton"><span>Install</span>（安裝）</span>按鈕。要想更改設定值，點擊<span class="guibutton"><span>Back</span></span>按鈕。要想退出<span>MySQL</span>安裝幫助不再安裝<span> 
			MySQL</span>，點擊<span class="guibutton"><span>Cancel</span></span>按鈕。</p>
			<p><span>完成安裝後，將出現註冊選項和<span>MySQL</span>網址。註冊後便可以訪問</span><a href="http://forums.mysql.com" target="_top">forums.mysql.com</a><span>處的<span>MySQL</span>論壇，可以在</span><span><a target="_top"  href="http://bugs.mysql.com">bugs.mysql.com</a></span><span>報告問題，並可以註冊為時事新聞訂戶。在安裝器的最後一個窗口內，提供了安裝摘要，並提供選項以啟動<span>MySQL 
			Configuration Wizard</span>（配置嚮導），可以用來建立配置檔案，安裝<span>MySQL</span>服務並進行安全配置。</span></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-changes"></a>
			2.3.4.6.&nbsp;MySQL安裝嚮導所作的更改</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			點擊<span class="guibutton"><span>Install</span>（安裝）</span>按鈕後，<span>MySQL</span>安裝幫助開始安裝過程，並對系統進行下面章節描述的更改。<p>
			<strong><span>更改註冊資料表</span></strong></p>
			<p>在典型安裝中，<span>MySQL</span>安裝幫助在<span>HKEY_LOCAL_MACHINE\SOFTWARE\MySQL 
			AB</span>建立<span>Windows</span>註冊鍵值。</p>
			<p><span>MySQL</span>安裝幫助根據正安裝的伺服器的主要版本建立一個鍵值，例如 
			<span>
			<span>MySQL</span><span>伺服器<span>5.1</span>。</span></span>它包含兩個字串值，<span>Location</span>和<span>Version</span>。<span>Location</span>字串包含安裝目錄。在預設安裝中，它包含<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\</span>。<span>Version</span>字串包含發佈號。例如，安裝<span>MySQL 
			Server 5.1.2-alpha</span>，鍵值包含一個<span>5.1.2-alpha</span>值。</p>
			<p>這些註冊鍵值用來幫助外部工具識別<span>MySQL</span>伺服器的安裝位置，不需要掃瞄整個硬盤來確定<span>MySQL</span>伺服器的安裝路徑。運行伺服器時不需要註冊鍵值，使用<span>noinstall</span><span> 
			Zip</span>檔案時不建立註冊鍵值。</p>
			<p><strong><span>更改啟動菜單</span></strong></p>
			<p><span>MySQL</span>安裝幫助在<span>Windows </span>
			<span class="guimenu">啟動</span>菜單中建立一條新的條目，使用<span>MySQL</span>菜單，根據安裝的<span>MySQL</span>的主版本來命名。例如，如果安裝了<span>MySQL 
			5.1, MySQL</span>安裝幫助在<span class="guimenu">啟動</span>菜單中建立<span class="guisubmenu"><span>MySQL 
			Server 5.1</span></span>部分。</p>
			<p>將在新<span class="guimenu">啟動</span>菜單部分建立下面的條目：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>命令行客戶端</span>：這是<strong><span>mysql</span></strong>命令行客戶端的快捷方式，對其進行配置以連接為<span>root</span>用戶。當連接時快捷方式提示輸入<span>root</span>用戶密碼。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>伺服器實例配置嚮導</span>：這是<span>MySQL 
			Configuration Wizard</span>（配置嚮導）的快捷方式。使用該快捷方式來配置新安裝的伺服器，或重新配置已有的伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span class="guimenuitem"><span>MySQL</span>文檔</span>：可以連接到保存在<span>MySQL</span>伺服器安裝目錄下的文檔。採用基本安裝方式安裝<span>MySQL</span>伺服器時，該選項不可用。</p>
			<p><strong><span>更改檔案系統</span></strong></p>
			<p>預設情況下，<span>MySQL</span>安裝幫助將<span>MySQL 5.1</span>伺服器安裝到<span>C:\<i>Program 
			Files</i>\MySQL\MySQL Server <i>5.1</i></span>，其中<span><i><span>Program 
			Files</span></i></span>是系統應用程式的預設位置，<span><i><span>5.1</span></i></span>是<span>MySQL</span>伺服器的主要版本。這是建議的<span>MySQL</span>伺服器的新安裝位置，替換了前面的預設位置<span><span>c</span><span>：<span>\mysql</span></span></span>。</p>
			<p>預設情況下，所有<span>MySQL</span>應用程式保存到目錄<span>C:\<i>Program 
			Files</i>\MySQL</span>下，其中<span><i><span>Program 
			Files</span></i></span>是應用程式在<span>Windows</span>中的預設安裝位置。開發機器上的典型<span>MySQL</span>安裝應為：</p>
			<pre><span>C:\Program Files\MySQL\MySQL Server 5.1</span></pre>
			<pre><span>C:\Program Files\MySQL\MySQL Administrator 1.0</span></pre>
			<pre><span>C:\Program Files\MySQL\MySQL Query Browser 1.0</span></pre>
			<p>該方法使管理和維護具體系統上安裝的<span>MySQL</span>應用程式更加容易。</p>
			<h4 class="title"><a name="mysql-install-wizard-upgrading"></a>
				2.3.4.7.&nbsp;升級MySQL</h4></div></div></div>
			<p>使用<span>MSI</span>的升級功能，<span>MySQL</span>安裝幫助可以自動執行伺服器升級。這意味著安裝新版本前，不需要手動卸載前面安裝的程式。安裝新版本前，安裝器自動關閉並卸載前面安裝的<span>MySQL</span>服務。</p>
			<p>只有在主版本號和次要版本號相同的安裝之間進行升級時，才能自動進行升級。例如，可以自動從<span>MySQL 
			4.1.5</span>升級到<span>MySQL 4.1.6,</span>但是不能從<span>MySQL 
			5.0</span>升級到<span>MySQL 5.1</span>。</p>
			<p>參見<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15節，「在Windows下升級MySQL」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-config-wizard"></a>
			2.3.5.&nbsp;使用配置嚮導</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mysql-config-wizard-introduction">
				2.3.5.1. 前言</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-starting">
				2.3.5.2. 啟動MySQL配置嚮導</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-maintenance">
				2.3.5.3. 選擇維護選項</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-configuration-type">
				2.3.5.4. 選擇配置類型</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-server-type">
				2.3.5.5. 伺服器類型對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-database-usage">
				2.3.5.6. 資料庫使用情況對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-tablespace">
				2.3.5.7. InnoDB資料表空間對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-connections">
				2.3.5.8. 並發連接對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-networking">
				2.3.5.9. 聯網選項對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-character-set">
				2.3.5.10. 字元編碼對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-service">
				2.3.5.11. 服務選項對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-security">
				2.3.5.12. 安全選項對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-confirmation">
				2.3.5.13. 配置對話框</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-file-location">
				2.3.5.14. my.ini檔案的位置</a></span></dt><dt><span class="section">
				<a href="#mysql-config-wizard-editing">
				2.3.5.15. 編輯my.ini檔案</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-introduction"></a>
				2.3.5.1.&nbsp;前言</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置嚮導）可以幫助自動配置<span>Windows</span>中的伺服器。<span>MySQL 
				Configuration Wizard</span>（配置嚮導）問您一系列問題，然後將回答放到模板中生成一個<span>my.ini</span>檔案，該檔案與您的安裝一致。<p>
				<span>MySQL Configuration Wizard</span>（配置嚮導）包含在<span>MySQL 
				5.1</span>伺服器中，目前只適用於<span>Windows</span>用戶。</p>
				<p><span>MySQL Configuration Wizard</span>（配置嚮導）在很大程度上是<span>MySQL 
				AB</span>經過多年從許多用戶收到的反饋的結果。然而，如果您發現它缺少某些對您很重要的功能，或如果您發現一個問題，請使用我們的<span><a target="_top"  href="http://bugs.mysql.com/"><span>MySQL 
				問題系統</span></a></span>來索取功能或報告問題。</p>
				<h4 class="title"><a name="mysql-config-wizard-starting"></a>
				2.3.5.2.&nbsp;啟動MySQL配置嚮導</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				一般情況當<span>MySQL</span>安裝幫助退出時，從<span>MySQL</span>安裝幫助啟動<span>MySQL 
				Configuration Wizard</span>（配置嚮導）。還可以點擊<span>Windows</span><span class="guimenu">啟動</span>菜單中<span>MySQL</span><span class="guimenuitem">伺服器實例配置嚮導</span>條目中的<span>MySQL</span>部分來啟動<span>MySQL 
				Configuration Wizard</span>（配置嚮導）。<p>並且，還可以進入<span>MySQL</span>安裝<span>bin</span>目錄直接啟動<span>MySQLInstanceConfig.exe</span>檔案。</p>
				<h4 class="title"><a name="mysql-config-wizard-maintenance"></a>
				2.3.5.3.&nbsp;選擇維護選項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				如果<span>MySQL Configuration Wizard</span>（配置嚮導）檢查到<span>my.ini</span>檔案，您可以選擇重新配置已有的伺服器，或通過刪除<span>my.ini</span>檔案並停止、卸載<span>MySQL</span>服務來卸載伺服器實例。<p>
				要想重新配置已有的伺服器，選擇<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>選項並點擊<span class="guibutton"><span>Next</span></span>按鈕。已有的<span>my.ini</span>檔案重新命名為<span>my<i>timestamp</i>.ini.bak</span>，其中<span><i><span>timestamp</span></i></span>是<span>my.ini</span>檔案建立是的日期和時間。要想卸載已有的伺服器實例，選擇<span class="guimenuitem"><span>Remove 
				Instance</span></span>選項並點擊<span class="guibutton"><span>Next</span></span>按鈕。</p>
				<p>如果選擇了<span class="guimenuitem"><span>Remove 
				Instance</span></span>選項，則進入確認窗口。點擊<span class="guibutton"><span>Execute</span></span>按鈕：<span>MySQL 
				Configuration Wizard</span>（配置嚮導）停止並卸載<span>MySQL</span>服務，然後刪除<span>my.ini</span>檔案。伺服器安裝和自己的<span>data</span>檔案夾不刪除。</p>
				<p>如果選擇了<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>選項，則進入配置<span class="guimenu">類型</span>對話框，可以選擇您想要配置的安裝類型。</p>
				<h4 class="title"><a name="mysql-config-wizard-configuration-type"></a>
				2.3.5.4.&nbsp;選擇配置類型</h4></div></div></div>
				<p>當啟動<span>MySQL Configuration Wizard</span>（配置嚮導）重新安裝<span>MySQL</span>，或為已有安裝選擇<span class="guimenuitem"><span>Re-configure 
				Instance</span></span>選項，則進入配置<span class="guimenu">類型</span>對話框。</p>
				<p>可以選擇兩種配置類型：<span class="guimenuitem"><span>Detailed 
				Configuration</span>（詳細配置）</span>和<span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>。<span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>選項適合想要快速啟動<span>MySQL</span>而不必考慮伺服器配置的新用戶。<span class="guimenuitem">詳細配置</span>選項適合想要更加細粒度控制伺服器配置的高級用戶。</p>
				<p>如果您是<span>MySQL</span>的新手，需要配置為單用戶開發機的伺服器，<span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>應當適合您的需求。選擇<span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>選項，則<span> MySQL 
				Configuration Wizard</span>（配置嚮導）自動設置所有配置選項，但不包括<span class="guimenuitem">服務選項</span>和安全<span class="guimenuitem">選項</span>。</p>
				<p><span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>設置選項可能與安裝<span>MySQL</span>的系統不兼容。如果系統上已經安裝了<span>MySQL</span>和您想要配置的安裝，建議選擇<span class="guimenuitem">詳細配置</span>。</p>
				<p>要想<span class="guimenuitem"><span>Standard 
				Configuration</span>（標準配置）</span>，請分別參閱<a href="#mysql-config-wizard-service" title="2.3.5.11. The Service Options Dialog">2.3.5.11節，「服務選項對話框」</a>和<a href="#mysql-config-wizard-security" title="2.3.5.12. The Security Options Dialog">2.3.5.12節，「安全選項對話框」</a><span class="guimenuitem">的服務選項</span>和安全<span class="guimenuitem">選項</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-server-type"></a>
				2.3.5.5.&nbsp;伺服器類型對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				可以選擇<span>3</span>種伺服器類型，選擇哪種伺服器將影響到<span>MySQL 
				Configuration Wizard</span>（配置嚮導）對內存、硬盤和過程或使用的決策。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Developer Machine(</span>開發機器<span>)</span></span>：該選項代資料表典型個人用桌面工作站。假定機器上運行著多個桌面應用程式。將<span>MySQL</span>伺服器配置成使用最少的系統資源。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Server 
				Machine</span>（伺服器）</span>：該選項代資料表伺服器，<span>MySQL</span>伺服器可以同其它應用程式一起運行，例如<span>FTP</span>、<span>email</span>和<span>web</span>伺服器。<span>MySQL</span>伺服器配置成使用適當比例的系統資源。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Dedicated MySQL Server Machine</span>（專用<span>MySQL</span>伺服器）</span>：該選項代資料表只運行<span>MySQL</span>服務的伺服器。假定運行沒有運行其它應用程式。<span>MySQL</span>伺服器配置成使用所有可用系統資源。</p>
				<h4 class="title"><a name="mysql-config-wizard-database-usage"></a>
				2.3.5.6.&nbsp;資料庫使用情況對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span class="guimenu">通過<span>Database Usage</span>（資料庫使用）</span>對話框，您可以指出建立<span>MySQL</span>資料表時使用的資料表處理器。通過該選項，您可以選擇是否使用<span>InnoDB</span>儲存引擎，以及<span>InnoDB</span>佔用多大比例的伺服器資源。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Multifunctional Database</span>（多功能資料庫）</span>：選擇該選項，則同時使用<span>InnoDB</span>和<span>MyISAM</span>儲存引擎，並在兩個引擎之間平均分配資源。建議經常使用兩個儲存引擎的用戶選擇該選項。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Transactional Database Only</span>（只是事務處理資料庫）</span>：該選項同時使用<span>InnoDB</span>和<span>MyISAM</span><span>
				</span>儲存引擎，但是將大多數伺服器資源指派給<span>InnoDB</span>儲存引擎。建議主要使用<span>InnoDB</span>只偶爾使用<span>MyISAM</span>的用戶選擇該選項。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>
				Non-Transactional Database Only</span>（只是非事務處理資料庫）</span>：該選項完全禁用<span>InnoDB</span>儲存引擎，將所有伺服器資源指派給<span>MyISAM</span>儲存引擎。建議不使用<span>InnoDB</span>的用戶選擇該選項。</p>
				<h4 class="title"><a name="mysql-config-wizard-tablespace"></a>
				2.3.5.7.&nbsp;InnoDB資料表空間對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				有些用戶可能想要將<span>InnoDB</span>資料表空間檔案放到不同的位置，而不放到<span>MySQL</span>伺服器數據目錄。如果您的系統有較大的空間或較高性能的儲存設備（例如<span>RAID</span>儲存系統），則最好將資料表空間檔案單獨放到一個位置。<p>
				要想更改<span>InnoDB</span>資料表空間檔案的預設位置，從驅動器下拉列資料表選擇一個新的驅動器，並從路徑下拉列資料表選擇新的路徑。要想建立路徑，點擊 
				<span class="guibutton"><span>...</span></span>按鈕。</p>
				<p>如果您要更改已有伺服器的配置，更改路徑前您必須點擊<span class="guibutton"><span>Modify</span></span>按鈕。此時啟動伺服器之前，您必須將已有資料表空間檔案移到新位置。</p>
				<h4 class="title"><a name="mysql-config-wizard-connections"></a>
				2.3.5.8.&nbsp;並發連接對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				限制所建立的與<span>MySQL</span>伺服器之間的並行連接數量很重要，以便防止伺服器耗盡資源。在<span class="guimenu"><span>Concurrent 
				Connections</span>（並行連接）</span>對話框中，可以選擇伺服器的使用方法，並根據情況限制並行連接的數量。還可以手動設置並行連接的限制。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Decision 
				Support</span>（決策支援）<span>(DSS)/OLAP</span></span>：如果伺服器不需要大量的並行連接可以選擇該選項。假定最大連接數目設置為<span>100,</span>平均並行連接數為<span>20</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Online 
				Transaction Processing</span>（聯機事務處理）<span>(OLTP)</span></span>：如果您的伺服器需要大量的並行連接則選擇該選項。最大連接數設置為<span>500</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Manual 
				Setting</span>（人工設置）</span>：選擇該選項可以手動設置伺服器並行連接的最大數目。從前面的下拉框中選擇並行連接的數目，如果您期望的數目不在列資料表中，則在下拉框中輸入最大連接數。</p>
				<h4 class="title"><a name="mysql-config-wizard-networking"></a>
				2.3.5.9.&nbsp;聯網選項對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在<span>Networking Options</span>（<span class="guimenu">網絡選項）</span>對話框中可以啟用或禁用<span>TCP/IP</span>網絡，並配置用來連接<span>MySQL</span>伺服器的端口號。<p>
				預設情況啟用<span>TCP/IP</span>網絡。要想禁用<span>TCP/IP</span>網絡，取消選擇<span class="guimenuitem"><span>Enable 
				TCP/IP Networking</span></span>選項旁邊的檢查框。</p>
				<p>預設使用<span>3306</span>端口。要想更訪問<span>MySQL</span>使用的端口，從下拉框選擇一個新端口號或直接向下拉框輸入新的端口號。如果您選擇的端口號已經被佔用，將提示確認選擇的端口號。</p>
				<h4 class="title"><a name="mysql-config-wizard-character-set"></a>
				2.3.5.10.&nbsp;字元編碼對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>伺服器支援多種字元編碼，可以設置適用於所有資料表、列和資料庫的預設伺服器字元編碼。使用<span class="guimenu"><span>Character 
				Set</span>（</span>字元編碼對話框）來更改<span> MySQL</span>伺服器的預設字元編碼。<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Standard 
				Character Set</span>（標準字元編碼）</span>：如果想要使用<span>Latin1</span>做為預設伺服器字元編碼，則選擇該選項。<span>Latin1</span>用於英語和許多西歐語言。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Best 
				Support For Multilingualism</span>（支援多種語言）</span>：如果想要使用<span>UTF8</span>做為預設伺服器字元編碼，則選擇該選項。<span>UTF8</span>可以 
				將不同語言的字元儲存為單一的字元編碼。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span class="guimenuitem"><span>Manual 
				Selected Default Character Set/Collation</span></span>（<span class="guimenuitem">人工選擇的預設字元編碼<span>/</span>校對規則）</span>：如果想要手動選擇伺服器的預設字元編碼，請選擇該項。從下拉列資料表中選擇期望的字元編碼。</p>
				<h4 class="title"><a name="mysql-config-wizard-service"></a>
				2.3.5.11.&nbsp;服務選項對話框</h4></div></div></div>
				<p>在基於<span>Windows NT</span>的平台上，可以將<span>MySQL</span>伺服器安裝成服務。安裝成服務，系統啟動時可以自動啟動<span>MySQL</span>伺服器，甚至出現服務故障時可以隨<span>Windows</span>自動啟動。</p>
				<p><span>預設情況，<span>MySQL 
				Configuration Wizard</span>（配置嚮導）將<span>MySQL</span>伺服器安裝為服務，服務名為<span>MySQL</span>。如果您不想安裝服務，取消</span><span class="guimenuitem"><span>Install 
				As Windows Service</span></span><span>選項旁邊的選擇框。可以從下拉框選擇新的服務名或在下拉框輸入新的服務名來更改服務名。</span></p>
				<p>要想將<span>MySQL</span>伺服器安裝為服務，但是不自動啟動，不選中<span class="guimenuitem"><span>Launch 
				the MySQL Server Automatically</span></span>選項旁邊的檢查框。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-security"></a>
				2.3.5.12.&nbsp;安全選項對話框</h4></div></div></div>
				<p>強烈建議為您的<span>MySQL</span>伺服器設置一個<span>root</span>密碼，預設情況<span>MySQL 
				Configuration Wizard</span>（配置嚮導）要求您設置一個<span>root</span>密碼。如果您不想設置<span>root</span>密碼，不選中<span class="guimenuitem"><span>Modify 
				Security Settings</span>（修改安全設定值）</span>選項旁邊的選擇框。</p>
				<p>要想設置<span>root</span>密碼，在<span class="guimenuitem"><span>New 
				root password(</span>輸入新密碼<span>)</span></span>和<span class="guimenuitem"><span>Confirm</span>（確認）</span>兩個框內輸入期望的密碼。如果重新配置已有的伺服器，您還需要<span class="guimenuitem"><span>Current 
				root password</span>（當前<span>root</span>密碼）</span>框內輸入已有的<span>root</span>密碼。</p>
				<p>要想防止通過網絡以<span>root</span>登錄，選中<span class="guimenuitem"><span>Root 
				may only connect from localhost</span>（只允許從本機登陸連接<span>root</span>）</span>選項旁邊的框。這樣可以提高<span>root</span>帳號的安全。</p>
				<p>要想建立一個匿名用戶帳號，選中<span class="guimenuitem"><span>Create 
				An Anonymous Account</span>（建立匿名帳號）</span>選項旁邊的框。建立匿名帳號會降低伺服器的安全，並造成登錄和授權困難。因此不建議。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-confirmation"></a>
				2.3.5.13.&nbsp;配置對話框</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置嚮導）的最後一個對話框是<span class="guimenu"><span>Confirmation</span>（確認）對話框</span>。要想啟動配置過程，點擊<span class="guibutton"><span>Execute</span></span>。要想返回要想到前面的對話框，點擊<span class="guibutton"><span>Back</span></span>按鈕。要想不配置伺服器即退出<span>MySQL 
				Configuration Wizard</span>（配置嚮導），點擊<span>Cancel</span>按鈕。<p>
				點擊<span class="guibutton"><span>Execute</span></span>按鈕後，<span>MySQL 
				Configuration Wizard</span>（配置嚮導）執行一系列的任務，執行過程將顯示在屏幕上。</p>
				<p><span>MySQL Configuration Wizard</span>（配置嚮導）首先使用<span>MySQL 
				AB</span>開發人員和工程師準備的模板根據您的選擇確定配置檔案選項。該模板的名稱為<span>my-template.ini</span>，位於伺服器安裝目錄中。</p>
				<p><span>MySQL Configuration Wizard</span>（配置嚮導）將這些選項寫入到一個<span>my.ini</span>檔案中。<span>my.ini</span>檔案的最終位置顯示在寫<span class="guilabel">配置檔案</span>任務的旁邊。</p>
				<p>如果選擇為<span>MySQL</span>伺服器建立一個服務，<span>MySQL 
				Configuration Wizard</span>（配置嚮導）則建立並啟動服務。如果您重新配置已有的服務，<span>MySQL 
				Configuration Wizard</span>（配置嚮導）則根據您的配置更改重新啟動服務。</p>
				<p>如果選擇設置<span>root</span>密碼，<span>MySQL 
				Configuration Wizard</span>（配置嚮導）則連接伺服器，設置新<span>root</span>密碼並應用您選擇的其它安全設定值。</p>
				<p><span>MySQL Configuration Wizard</span>（配置嚮導）完成任務後，則顯示一個概要。點擊<span class="guibutton"><span>Finish</span></span>按鈕退出<span>MySQL 
				Configuration Wizard</span>（配置嚮導）。</p>
				<h4 class="title"><a name="mysql-config-wizard-file-location"></a>
				2.3.5.14.&nbsp;my.ini檔案的位置</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL Configuration Wizard</span>（配置嚮導）將<span>my.ini</span>檔案放到<span>MySQL</span>伺服器的安裝目錄中。這樣可以幫助將配置檔案與具體伺服器實例關聯起來。<p>
				要想確保<span>MySQL</span>伺服器知道從哪裡搜尋<span>my.ini</span>檔案，即做為服務安裝的一部分傳遞給<span>MySQL</span>伺服器的部分：<span>--defaults-file=&quot;<i>C:\Program 
				Files\MySQL\MySQL Server 5.1</i>\my.ini&quot;</span>，其中<span><i><span>C:\Program 
				Files\MySQL\MySQL Server 5.1</span></i></span><span>
				</span>被<span>MySQL</span>伺服器的安裝路徑替代。</p>
				<p>
				<span>--defaults-file</span>指導<span>MySQL</span>伺服器讀取具體的配置檔案。</p>
				<h4 class="title"><a name="mysql-config-wizard-editing"></a>
				2.3.5.15.&nbsp;編輯my.ini檔案</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			要想修改<span>my.ini</span>檔案，用文本編輯器打開並進行必要的修改。您還可以用<span><a target="_top"  href="http://www.mysql.com/products/administrator/">MySQL 
			Administrator</a></span>實用工具修改伺服器配置。<p><span>MySQL</span>客戶端和實用程式，例如<strong><span>mysql</span></strong>命令行客戶端和<strong><span>mysqldump</span></strong>不能將<span>my.ini</span>檔案放到伺服器安裝目錄中。要想配置客戶端和實用工具，根據<span>Windows
			</span>版本，在<span><span>C</span><span>：<span>\Windows</span></span></span>或<span><span>C</span><span>：<span>\WINNT</span></span></span>目錄下建立一個新的<span>my.ini</span>檔案。</p>
			<h3 class="title"><a name="windows-install-archive"></a>2.3.6. 通過非安裝Zip檔案安裝MySQL</h3></div></div></div>
			<p>想使用非自動安裝包的用戶可以使用本節的指令手動安裝<span>MySQL</span>。從<span>Zip</span>文檔安裝<span>MySQL</span>的過程為：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>將文檔提取到期望的安裝目錄中。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>建立一個選項檔案。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>選擇<span>MySQL</span>伺服器類型。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>啟動<span>MySQL</span>伺服器。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使預設用戶帳號安全。</p>
			<p>下面一節描述了該過程。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-extract-archive"></a>
			2.3.7.&nbsp;提取安裝檔案檔案</h3></div></div></div>
			<p>要想手動安裝<span>MySQL</span>，其步驟為：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果您從以前的版本升級，開始升級過程前請參閱<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15節，「在Windows下升級MySQL」</a>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用基於<span>Windows NT</span>的作業系統，例如<span>Windows 
			NT</span>、<span>Windows 2000</span>、<span>Windows 
			XP</span>或<span>Windows Server 2003,</span>確保登錄的帳號具有管理員權限。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>選擇安裝位置。傳統安裝中<span>MySQL</span>伺服器安裝到<span><span>C</span><span>：<span>\mysql</span></span></span>，<span>MySQL 
			Installation Wizard</span>（安裝幫助）將<span>MySQL</span>安裝到<span>C:\Program 
			Files\MySQL</span>。如果您不想將<span>MySQL</span>安裝到<span><span>C</span><span>：<span>\mysql</span></span></span>，您必須在啟動過程或在選項檔案中指定安裝目錄的路徑。請參見<a href="#windows-create-option-file" title="2.3.8. Creating an Option File">2.3.8節，「建立選項檔案」</a>。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>zip</span>檔案工具，將安裝檔案提取到選定的安裝位置。使用某些工具，可以將文檔提取到選擇的安裝位置的檔案夾中。在這種情況下，您可以將子檔案夾中的內容移動到選擇的安裝位置。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-create-option-file"></a>
			2.3.8.&nbsp;建立選項檔案</h3></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			如果想要指定運行伺服器的啟動選項，可以在命令行中指出或放到一個選項檔案中。對於伺服器每次啟動都用到的選項，您會發現使用選項檔案來指定<span>MySQL</span>配置非常方便。特別是在以下環境中：<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>安裝或數據目錄位置不是預設位置<span>(</span><span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>和<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>需要調節伺服器設定值。</p>
			<p>檔<span>MySQL</span>伺服器在<span>Windows</span>中啟動時，它從兩個檔案中尋找選項：<span>Windows</span>目錄中的<span>my.ini</span>檔案和<span><span>C</span><span>：<span>\my.cnf</span></span></span><span>
			</span>檔案。<span>Windows</span>目錄典型名稱為<span><span>C</span><span>：<span>\WINDOWS</span></span></span>或<span><span>C</span><span>：<span>\WINNT</span></span></span>。可以使用下面的命令從<span>WINDIR</span>環境變數值確定自己的確切位置：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>echo %WINDIR%</span></b></span></pre>
			<p><span>MySQL</span>首先從<span>my.ini</span>檔案中尋找選項，然後從<span>my.cnf</span>檔案中尋找。為了避免混淆，最好只使用一個檔案。如果您的<span>PC</span>使用了一個引導加載器，其中<span><span>C</span><span>：</span></span>不是引導盤，唯一的選則是使用<span>my.ini</span>檔案。不管您使用哪個選項檔案，必須為純文本檔案。</p>
			<p>還可以使用<span>MySQL</span>分發中的示範選項檔案。在安裝目錄中搜尋以下檔案：<span><span>my-small.cnf</span><span>、<span>my-medium.cnf</span>、</span></span><span>my-large.cnf</span>和<span>my-huge.cnf</span>，您可以重新命名並複製到相應位置用作基本配置檔案。</p>
			<p>可以用任何文本編輯器來建立並修改選項檔案，例如記事本。例如，如果<span>MySQL</span>安裝在<span><span>E</span><span>：<span>\mysql</span>，</span></span>數據目錄安裝在<span>E:\mydata\data</span>，您可以 
			建立含有<span>[mysqld]</span>部分的選項檔案，指定<span>basedir</span>和<span>datadir</span>參數的值：</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span># set basedir to your installation path</span></pre>
			<pre><span>basedir=E:/mysql</span></pre>
			<pre><span># set datadir to the location of your data directory</span></pre>
			<pre><span>datadir=E:/mydata/data</span></pre>
			<p>請注意在選項檔案中使用正斜線兒不是反斜線指定<span>Windows</span>路徑名。如果使用反斜線，必須用雙反斜線：</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span># set basedir to your installation path</span></pre>
			<pre><span>basedir=E:\\mysql</span></pre>
			<pre><span># set datadir to the location of your data directory</span></pre>
			<pre><span>datadir=E:\\mydata\\data</span></pre>
			<p>在<span>Windows</span>下，<span>MySQL</span>安裝器將數據目錄直接放到安裝<span>MySQL</span>的目錄下。如果您想要使用其它位置的數據目錄，應當將<span>data</span>目錄中的全部內容複製到新的目錄下。例如，如果<span>MySQL</span>安裝到<span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>中，數據目錄預設在<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>。如果想要使用<span>E:\mydata</span>做為數據目錄，您必須做兩件事情：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>將整個<span>data</span>目錄和全部內容從<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>移動到<span>E:\mydata</span>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>每次啟動伺服器時，使用<span>--datadir</span>選項來指定新的數據目錄。</p>
			<h3 class="title"><a name="windows-select-server"></a>
			2.3.9.&nbsp;選擇MySQL伺服器類型</h3></div></div></div>
			<p>下面的資料表顯示了<span>Windows</span>下可用的<span>MySQL 
			5.1</span>伺服器：</p>
			<table border="1" cellpadding="0" id="table6">
				<tr>
					<td width="152">
					<p><strong><span>
					二進制</span></strong></td>
					<td width="636">
					<p><strong><span>描述</span></strong></td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld- debug</span></strong></td>
					<td width="636">
					<p>已經編譯過，可以進行完全調試和自動內存分配檢查，用於資料表<span>InnoDB</span>和<span><span>BDB</span><span>。</span></span></td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld</span></strong></td>
					<td width="636">
					<p>最佳化的二進制，支援<span>InnoDB</span>。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-nt</span></strong></td>
					<td width="636">
					<p>最佳化的二進制，支援<span>Windows NT</span>，<span>2000 
					XP</span>，有命名管道。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-max</span></strong></td>
					<td width="636">
					<p>最佳化的二進制，支援<span>InnoDB</span>和<span>BDB</span>資料表。</td>
				</tr>
				<tr>
					<td width="152">
					<p><strong>
					<span>mysqld-max-nt</span></strong></td>
					<td width="636">
					<p>同<strong><span>mysqld-max</span></strong>，但是已經編譯過，支援命名管道。</td>
				</tr>
			</table>
			<p>已經對所有前面的二進制進行了最佳化以適用現代<span>Intel</span>處理器，但是應當工作在<span>Intel 
			i386-</span>類或更高的處理器上。</p>
			<p>所有<span>Windows MySQL 5.1</span>伺服器支援資料庫目錄符號連結。</p>
			<p><span>MySQL</span>支援所有<span>Windows</span>平台的<span>TCP/IP</span>。<strong><span>mysqld-nt</span></strong>和<span >mysql-max-nt</span>伺服器支援<span>Windows 
			NT</span>、<span>2000</span>、<span>XP</span>和<span>2003</span>的命名管道。然而，在所有平台下預設使用<span>TCP/IP</span>。<span>(</span>在許多<span>Windows</span>配置中，命名管道比<span>TCP/IP</span>慢）<span>。
			</span></p>
			<p>命名管道在以下條件下使用：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果使用<span>--enable-named-pipe</span>選項啟動伺服器，則啟用了命名管道。需要明確使用該選項，因為當使用命名管道關閉<span>MySQL</span>伺服器時，某些用戶會遇到問題。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>只有<strong><span>mysqld-nt</span></strong>或<strong><span>mysqld-max-nt</span></strong>伺服器，並且伺服器運行在支援命名管道的<span>Windows</span>版本<span>(NT</span>、<span>2000</span>、<span>XP</span>、<span>2003)</span>，才能夠使用命名管道連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>這些伺服器可以運行在<span>Windows 98 </span>或<span>Me</span>中，但是必須安裝<span>TCP/IP</span>協議；此時不可以使用命名管道連接。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>這些伺服器不能在<span>Windows 95</span>中運行。</p>
			<p><strong><span>註釋：</span></strong>參考手冊中的大多數例子使用<strong><span>mysqld</span></strong>做為伺服器名。如果您選擇使用不同的伺服器，例如<strong><span>mysqld-nt</span></strong>，則在相應例子中的命令中進行相應的替換。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-server-first-start"></a>
			2.3.10.&nbsp;首次啟動伺服器</h3></div></div></div>
			<p>本節中的訊息主要適用選擇<span>Noinstall</span><span>MySQL</span>安裝版本，或想要手動配置和測試<span>MySQL</span>而不用<span>GUI</span>工具的情況。</p>
			<p>在<span>Windows 95,98,</span>或<span>Me</span>中，<span>MySQL</span>客戶端總使用<span>TCP/IP</span>連接伺服器。<span>(</span>這樣允許網絡中的所有機器連接<span>MySQL</span>伺服器）<span>。</span>因此，在啟動<span>MySQL</span>之前，您必須確保機器支援<span>TCP/IP</span>。可以從<span>Windows 
			CD-ROM</span>中找到<span>TCP/IP</span>。</p>
			<p>請注意如果使用舊版本的<span>Windows 95(</span>例如，<span>OSR2)</span>，很可能您使用了舊的<span>Winsock</span>包；<span>MySQL</span>需要<span>Winsock 
			2</span>。可以從<a href="http://www.microsoft.com/" target="_top">http://www.microsoft.com/</a>獲得最新的<span>Winsock</span>。<span>Windows 
			98</span>包含新的<span>Winsock 2</span>庫，因此不需要更新庫。</p>
			<p>在基於<span>NT</span>的系統中，例如<span> Windows NT</span>、<span>2000</span>、<span>XP</span>或<span>2003,</span>客戶端可以有兩個選擇。可以使用<span>TCP/IP</span>，如果伺服器支援命名管道連接，也可以使用命名管道。要想使<span>MySQL</span>使用<span>Windows 
			NT 4</span>中的<span>TCP/IP,</span>您必須安裝服務<span>pack 
			3(</span>或更新的補丁<span>)</span>。</p>
			<p>如果用<span>--shared-memory</span>選項啟動，<span>Windows</span>版<span>MySQL</span>還支援共享內存連接。客戶端可以通過<span>--protocol=memory</span>選項通過共享內存進行連接。</p>
			<p>關於運行哪個伺服器二進制的訊息，參見<a href="#windows-select-server" title="2.3.9. Selecting a MySQL Server type">2.3.9節，「選擇MySQL伺服器類型」</a>。</p>
			<p>本節對<span>MySQL</span>伺服器啟動進行了概述。下面章節詳細說明了從命令行或<span>Windows
			</span>服務啟動<span>MySQL</span>伺服器的具體訊息。</p>
			<p>這些章節的例子假定<span>MySQL</span>安裝到預設位置<span><span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span><span>。</span></span>如果您將<span>MySQL</span>安裝到了其它位置，則要更改例子中的路徑名。</p>
			<p>在控制台窗口<span>(</span>或「<span class="quote"><span>DOS 
			window</span></span>」<span>)</span>中，最好根據命令提示進行測試。這樣可以讓伺服器在<span>window</span>中容易看見的地方顯示狀態消息。如果配置出現錯誤，通過這些消息，可以更容易地識別並修復問題。</p>
			<p>要想啟動伺服器，輸入命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --console</span></b></span></pre>
			<p>支援<span>InnoDB</span>的伺服器啟動時，您應當能看見下面的消息：</p>
			<pre><span>InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:</span></pre>
			<pre><span>InnoDB: a new database to be created</span>！</pre>
			<pre><span>InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200</span></pre>
			<pre><span>InnoDB: Database physically writes the file full: wait...</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280</span></pre>
			<pre><span>InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created</span></pre>
			<pre><span>InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280</span></pre>
			<pre><span>InnoDB: Doublewrite buffer not found: creating new</span></pre>
			<pre><span>InnoDB: Doublewrite buffer created</span></pre>
			<pre><span>InnoDB: creating foreign key constraint system tables</span></pre>
			<pre><span>InnoDB: foreign key constraint system tables created</span></pre>
			<pre><span>011024 10:58:25&nbsp; InnoDB: Started</span></pre>
			<p>伺服器完成啟動序列後，您應當能看見下述內容，資料表示伺服器準備好，可以進行客戶端連接：</p>
			<pre><span>mysqld: ready for connections</span></pre>
			<pre><span>Version: &#39;5.1.2-alpha&#39;&nbsp; socket: &#39;&#39;&nbsp; port: 3306</span></pre>
			<p>伺服器繼續向控制台寫入診斷輸出。您可以打開新的控制台窗口運行客戶端程式。</p>
			<p>如果省略<span>--console</span>選項，伺服器向數據目錄<span>(</span>預設為<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>中的錯誤日誌寫入診斷輸出。錯誤日誌檔案的延伸名為<span>.err</span>。</p>
			<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的帳號一開始沒有密碼。伺服器啟動後，您應當根據<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明設置密碼。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-command-line"></a>
			2.3.11.&nbsp;從Windows命令行啟動MySQL</h3></div></div></div>
			<p>可以從命令行手動啟動<span>MySQL</span>伺服器。可以在任何版本的<span>Windows</span>中實現。</p>
			<p>要想從命令行啟動<strong><span  style="font-family:
細明體">mysqld</span></strong>伺服器，您應當啟動控制台窗口<span>(</span>或「<span class="quote"><span>DOS 
			window</span></span>」<span>)</span>並輸入命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld</span></b></span></pre>
			<p>根據系統中<span>MySQL</span>安裝位置的不同，前面的例子中使用的路徑也不同。</p>
			<p>在非<span>NT</span>版本的<span>Windows</span>中，在後台啟動<strong><span>mysqld</span></strong>。也就是，伺服器啟動後，您應當可以看見後面的命令提示。如果您用該方法在<span>Windows 
			NT</span>、<span>2000</span>、<span>XP</span>或<span>2003</span>中啟動伺服器，伺服器則在前台運行，在伺服器退出前，不會出現命令提示。因此，當伺服器運行時，應當打開另一個控制台窗口來運行客戶端程式。</p>
			<p>下述命令可以停止<span>MySQL</span>伺服器：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p>該命令使用<span>MySQL</span>管理工具<strong><span>mysqladmin</span></strong>連接伺服器並告知它關閉服務。該命令使用<span>MySQL
			</span>
			<span>root</span>用戶連接，這是<span>MySQL</span>權限系統中的預設管理帳號。請注意<span>MySQL</span>權限系統中的用戶完全獨立於<span>Windows</span>下的登錄用戶。</p>
			<p>如果<strong><span>mysqld</span></strong>不能啟動，檢查錯誤日誌看看伺服器是否寫入了顯示問題原因的任何消息。錯誤日誌位於<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span>目錄中。是帶後綴<span>.err</span>的檔案。還可以嘗試將伺服器啟動為<strong><span>mysqld 
			--console</span></strong>；此時，可以從窗口中獲得一些有用的訊息，可以幫助解決問題。</p>
			<p>最後選項是用<span>--standalone 
			--debug</span>啟動<strong><span>mysqld</span></strong>。此時，<strong><span>mysqld</span></strong><span>
			</span>寫入日誌檔案<span><span>C</span><span>：<span>\mysqld.trace</span>，</span></span>應當包含<strong><span>mysqld</span></strong>不啟動的原因。請參見<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2節，「建立跟蹤檔案」</a>。</p>
			<p>使用<strong><span>mysqld --verbose 
			--help</span></strong>顯示<strong><span  style="font-family:
細明體">mysqld</span></strong>的所有選項。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-service"></a>
			2.3.12.&nbsp;以Windows服務方式啟動MySQL</h3></div></div></div>
			<p>在<span>NT</span>家族 <span>(Windows NT</span>，<span>2000,XP</span>，<span>2003)</span>中，建議將<span>MySQL</span>安裝為<span>Windows</span>服務，當<span>Windows</span>啟動、停止時，<span>MySQL</span>也自動啟動、停止。還可以從命令行使用<strong><span  style="font-family:
細明體">NET</span></strong>命令，或使用圖形<strong><span>Services</span></strong>工具來控制<span>AMySQL</span>伺服器。</p>
			<p>在<span>Windows</span>控制面板<span>(Windows 
			2000,XP</span>和<span>Server 2003</span>的<span class="guimenuitem">管理工具下面</span><span>)</span>中可以看見<strong><span>Services</span></strong>工具<span>(Windows
			<strong><span>Service Control Manager</span></strong>)</span>。<span>建議從命令行安裝活卸載伺服器時關閉</span><strong><span>Services</span></strong><span>工具。這樣可以防止許多錯誤。</span></p>
			<p>安裝<span>MySQL Windows</span>服務之前，應當使用下面的命令先停止當前正運行的伺服器：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p><strong><span>註釋：</span></strong>如果<span>MySQL
			</span>
			<span>root</span>用戶帳號有密碼，您需要使用命令 
			<strong><span>C:\Program 
			Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root -p shutdown</span></strong>並根據提示輸入密碼。</p>
			<p>該命令使用<span>MySQL</span>管理工具<strong><span>mysqladmin</span></strong>，連接伺服器並告知它關閉服務。該命令使用<span>MySQL
			</span>
			<span>root</span>用戶連接，這是<span>MySQL</span>權限系統中的預設管理帳號。請注意<span>MySQL</span>權限系統中的用戶完全獨立於<span>Windows</span>下的登錄用戶。</p>
			<p>使用該命令安裝伺服器</p>
			<pre><span>C</span>：<span>\&gt;</span><span><b><span> mysqld --install</span></b></span></pre>
			<p>如果只使用伺服器名安裝<strong><span  style="font-family:
細明體">mysqld</span></strong>時有問題，嘗試使用全路徑名來安裝。例如：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install</span></b></span></pre>
			<p>您還可以將<span>MySQL </span>
			<span>bin</span>目錄的路徑加到<span>Windows</span>系統<span>PATH</span>環境變數中：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>右擊<span>Windows</span>桌面上的<span class="guiicon"><span>My 
			Computer</span>（我的計算機）</span>圖標，選擇<span class="guimenuitem"><span>Properties</span>（屬性）。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>然後從出現的<span class="guimenu"><span>System 
			Properties</span></span>菜單中選擇<span class="guimenuitem"><span>Advanced</span>（高級）標籤</span>，然後點擊<span class="guibutton"><span>Environment 
			Variables</span></span>（<span class="guibutton">環境變數）</span>按鈕。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>選擇<span class="guilabel"><span>System 
			Variables</span>（</span>系統<span class="guilabel">變數）下面的</span><span class="guimenuitem"><span>Path</span>（路徑）</span>，然後點擊<span class="guibutton"><span>Edit</span></span>（<span class="guibutton">編輯）</span>按鈕。將彈出<span class="guimenu"><span>Edit 
			System Variable</span>（編輯系統變數）</span>對話框。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>將光標放到標記<span class="guilabel"><span>Variable 
			Value</span></span>（<span class="guilabel">變數值）處的</span>文本的後面。<span>(</span>使用<strong><span>End</span></strong>鍵確保光標位於文本的最後<span>)</span>。然後輸入<span>MySQL
			</span>
			<span>bin</span>目錄<span>&nbsp;&nbsp;
			</span>的完整路徑<span>(</span>例如，<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\bin</span><span>)</span>，請注意應使用分號將該路徑與該域內的其它值隔離開。一次關閉該對話框和各個對話框，點擊<span class="guibutton"><span>OK</span></span>直到打開的所有對話框被關閉。您現在可以在<span>DOS</span>提示符下從系統的任何目錄輸入<span>MySQL</span>可執行程式名來使用<span>MySQL</span>可執行程式，而不必提供路徑名。包括伺服器、<span>MySQL</span>客戶端和所有<span>MySQL</span>命令行實用程式，例如<strong><span>mysqladmin</span></strong>和<strong><span>mysqldump</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>請注意在同一個機器上運行多個<span>MySQL</span>伺服器時，不需要在<span>Windows
			</span>
			<span>PATH</span>中加入<span>MySQL
			</span>
			<span>bin</span>目錄。</p>
			<p><strong><span>警告</span></strong>：編輯系統<span>PATH</span>時必須特別注意；意外刪除或修改已有路徑值會造成系統故障甚至癱瘓。</p>
			<p>服務安裝命令不會啟動伺服器。在本節後面將給出相關指令。</p>
			<p>安裝服務時，可以使用<span>MySQL 5.1</span>中的下面的參數：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以直接在<span>--install</span>選項後面指定服務名。預設服務名是<span>MySQL</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果給出了服務名，後面可以跟一個選項。一般情況，應當為<span>defaults-file=<i>file_name</i></span>，指定選項檔案的名稱，伺服器啟動時應當從中讀取選項。</p>
			<p>可以使用單個選項代替<span>--defaults-file</span>，但是不提倡這樣做。<span>--defaults-file</span>更加靈活一些，因為您可以將多個伺服器啟動選項放入命名的選項檔案中。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以在服務名後面指定一個<span>--local-service</span>選項。這樣伺服器運行時使用<span>LocalService</span><span> 
			Windows</span>帳號，只具有有限的系統權限。該帳號只適用於<span>Windows XP</span>或更新版本。如果服務名後面同時跟有<span>--defaults-file</span>和<span>--local-service</span>，二者可以按任何順序排放。</p>
			<p>對於<span>Windows MySQL</span>伺服器，根據下面規則確定伺服器使用的服務名和選項檔案：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服務安裝命令中，沒有在<span>--install</span>選項後面指定了服務名或使用預設服務名<span>(</span><span>MySQL</span><span>)</span>，伺服器則使用<span>MySQL</span>服務名並從標準選項檔案的<span>[mysqld]</span>組讀取選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服務安裝命令中，在<span>--install</span>選項後面指定的服務名不是預設服務名<span>(</span><span>MySQL</span><span>)</span>。則從具有相同服務名的組中讀取選項，並從標準選項檔案讀取選項。</p>
			<p>伺服器還從標準選項檔案的<span>[mysqld]</span>組讀取選項。您可以使用<span>[mysqld]</span>組中的選項用於所有<span>MySQL
			</span>服務，還可以使用具有相同服務名的組，用於該服務名所對應的伺服器。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果在服務安裝命令中，在服務名後面指定了<span>--defaults-file</span>選項，伺服器只從命名檔案的<span>[mysqld]</span>組中讀取選項，忽略標準選項檔案。</p>
			<p>對於更複雜的例子可以考慮使用命令：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install MySQL --defaults-file=C:\my-opts.cnf</span></b></span></pre>
			<p>該命令中，<span>--install</span>選項後面給出了預設服務名<span>(</span><span>MySQL</span><span>)</span>。如果未給出<span>--defaults-file</span>選項，該命令可以讓伺服器從標準選項檔案的<span>[mysqld]</span>組中讀數。由於提供了<span>--defaults-file</span>選項，伺服器只從命名檔案的<span>[mysqld]</span>組讀取選項。</p>
			<p>還可以在啟動<span>MySQL</span>服務之前，在<span>Windows
			<strong><span>Services</span></strong></span>工具中指定啟動參數選項。</p>
			<p><span>MySQL</span>伺服器安裝為服務後，<span>Windows</span>啟動時自動啟動服務。還可以從<strong><span>Services</span></strong>工具直接啟動服務，或使用命令<strong><span>NET 
			START MySQL</span></strong>。<strong><span>NET</span></strong>命令忽略大小寫。</p>
			<p>做為服務運行時，<strong><span  style="font-family:
細明體">mysqld</span></strong>不能訪問控制台窗口，因此看不見任何消息。如果<strong><span>mysqld</span></strong>未啟動，檢查錯誤日誌看看伺服器是否寫入了顯示問題原因的任何消息。錯誤日誌位於<span>MySQL</span>數據目錄中<span>(</span>例如，<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>，是帶後綴<span>.err</span>的檔案。</p>
			<p>如果<span>MySQL</span>伺服器安裝為服務，並且服務正運行，<span>Windows</span>關閉時自動停止服務。還可以通過<span>Services</span>工具、<strong><span>NET 
			STOP MySQL</span></strong>命令或 <strong>
			<span>mysqladmin shutdown</span></strong>命令手動停止伺服器。</p>
			<p>如果不想在引導過程中自動啟動服務，還可以將服務設置為手動啟動模式。實現的方法是使用<span>--install-manual</span>選項而非<span>--install</span>選項：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --install-manual</span></b></span></pre>
			<p>要想卸載伺服器，如果服務正運行則應首先使用命令<strong><span>NET 
			STOP MYSQL</span></strong>停止服務。然後使用<span>--remove</span>選項卸載服務：</p>
			<pre><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld --remove</span></b></span></pre>
			<p>如果<strong><span>mysqld</span></strong>不是服務，可以從命令行啟動它。詳細說明參見<a href="#windows-start-command-line" title="2.3.11. Starting MySQL from the Windows Command Line">2.3.11節，「從Windows命令行啟動MySQL」</a>。</p>
			<p>如果在安裝過程中遇到問題，請參閱<a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">2.3.14節，「在Windows環境下對MySQL安裝的故障診斷與排除」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-testing"></a>
			2.3.13.&nbsp;測試MySQL安裝</h3></div></div></div><a class="indexterm" name="id2711089"></a><a class="indexterm" name="id2711096"></a></div><div class="section"><div class="titlepage"><div><div>
			可以通過以下命令測試<span>MySQL</span>伺服器是否工作：<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqlshow</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqlshow -u root mysql</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin version status proc</span></b></span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql test</span></b></span></pre>
			<p>如果<strong><span>mysqld</span></strong>對客戶端程式<span>TCP/IP</span>連接的響應較慢，可能是<span>DNS</span>問題。此時，使用<span>--skip-name-resolve</span>選項啟動<strong><span>mysqld</span></strong>，在<span>MySQL</span>授權資料表的<span>Host</span>列只使用<span>localhost</span>和<span>IP</span>號。</p>
			<p>可以通過<span>--pipe</span>或<span>--protocol=PIPE</span>選項強制<span>MySQL</span>客戶端使用命名管道連接代替<span>TCP/IP</span>連接，或指定<span>.</span><span>(</span>階段<span>)</span>做為主機名。使用<span>--socket</span>選項指定管道名。</p>
			<h3 class="title"><a name="windows-troubleshooting"></a>
			2.3.14.&nbsp;在Windows環境下對MySQL安裝的故障診斷與排除</h3></div></div></div>
			<p>首次安裝、運行<span>MySQL</span>時，您可能會遇到一些錯誤，使<span>MySQL</span>伺服器不能啟動。本節的目的是幫助您診斷並糾正這些錯誤。</p>
			<p>解決伺服器問題時您的第一資料是錯誤日誌。<span>MySQL</span>伺服器使用錯誤日誌來記錄伺服器不能啟動的訊息。錯誤日誌位於<span>my.ini</span>檔案指定的數據目錄中。預設數據目錄位於<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\dat</span>。請參見<a href="database-administration.html#error-log" title="5.11.1. The Error Log">5.11.1節，「錯誤日誌」</a>。</p>
			<p>另一個錯誤相關資訊來源是<span>MySQL</span>服務啟動時控制台上顯示的消息。將<strong><span>mysqld</span></strong>安裝為服務後，從命令行通過<strong><span>NET 
			START mysql</span></strong>命令來查看<span>MySQL</span>服務啟動相關的錯誤消息。請參見<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12節，「以Windows服務方式啟動MySQL」</a>。</p>
			<p>下面距離說明了首次安裝並啟動<span>MySQL</span>服務時會遇到的最常見的錯誤消息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>System error 1067 has occurred.</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Fatal error: Can&#39;t open privilege tables: Table &#39;mysql.host&#39; doesn&#39;t exist</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>當<span>MySQL</span>伺服器找不到<span>MySQL</span>權限資料庫或關鍵檔案時會出現這些消息。當<span>MySQL</span>基或數據目錄沒有安裝在預設位置<span>(</span><span><span>C</span><span>：<span>\mysql</span></span></span>和 
			<span>C:\Program 
			Files\MySQL\MySQL Server 5.1\data</span><span>)</span>，而是安裝到其它位置時通常會遇到該問題。</p>
			<p>發生該問題的一種情況是對<span>MySQL</span>進行升級或安裝到了新位置，但是沒有對配置檔案進行更新以對應新的安裝位置。此外還可能是新舊配置檔案衝突，當升級<span>MySQL</span>時，一定要刪除或重新命名舊的配置檔案。</p>
			<p>如果您沒有將<span>MySQL</span>安裝到<span>C:\Program 
			Files\MySQL\MySQL Server 5.1</span>目錄下，而是安裝到了其它目錄下，您需要通過使用配置<span>(</span><span>my.ini</span><span>)</span>檔案讓<span>MySQL</span>伺服器知道安裝目錄。<span>my.ini</span>檔案應位於<span>Windows</span>目錄下，典型為<span><span>C</span><span>：<span>\WINNT</span></span></span>或<span><span>C</span><span>：<span>\WINDOWS</span></span></span>。可以在命令提示符下輸入下面的命令從<span>WINDIR</span>環境變數值中確定確切位置：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>echo %WINDIR%</span></b></span></pre>
			<p>可以通過文本編輯器（例如記事本）來建立並修改選項檔案。例如，如果<span>MySQL</span>安裝在<span><span>E</span><span>：<span>\mysql</span></span></span>下<span>，</span>數據目錄在<span>D:\MySQLdata</span>，您可以建立選項檔案並設置<span>[mysqld]</span>來指定<span>basedir</span>和<span>datadir</span>參數的值：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span># set basedir to your installation path</span></pre>
			<pre ><span>basedir=E:/mysql</span></pre>
			<pre ><span># set datadir to the location of your data directory</span></pre>
			<pre ><span>datadir=D:/MySQLdata</span></pre>
			<p>請注意應使用<span>(</span>正<span>)</span>斜線而不是反斜線在選項檔案中指定<span>Windows</span>路徑名。如果使用反斜線，則必須使用雙斜線：</p>
			<pre ><span>[mysqld]</span></pre>
			<pre ><span># set basedir to your installation path</span></pre>
			<pre ><span>basedir=C:\\Program Files\\MySQL\\MySQL Server 5.1</span></pre>
			<pre ><span># set datadir to the location of your data directory</span></pre>
			<pre ><span>datadir=D:\\MySQLdata</span></pre>
			<p>如果在<span>MySQL</span>配置檔案中更改<span>datadir</span>值，在重新啟動<span>MySQL</span>伺服器之前，必須移動已有<span>MySQL</span>數據目錄中的內容。</p>
			<p>參見<a href="#windows-create-option-file" title="2.3.8. Creating an Option File">2.3.8節，「建立選項檔案」</a>。</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Error: Cannot create Windows service for MySql. Error: 0</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>當您沒有事先停止並卸載已有<span>MySQL</span>服務，並且使用<span>MySQL 
			Configuration Wizard</span>（配置嚮導）重新安裝或升級<span>MySQL</span>時，會遇到該問題。發生的原因是，當配置嚮導試圖安裝服務時，它發現已經有一個同名的服務。</p>
			<p>解決該問題的一個方案是使用配置嚮導時選擇<span>mysql</span>之外的其它服務名。這樣可以正確安裝新服務，但保留了原來的服務。但是這樣不好，最好是卸掉不再使用的舊服務。</p>
			<p>要想永遠卸掉舊的<span>MySQL</span>服務，通過管理權限用戶在命令行執行下面的命令：</p>
			<pre ><span>C:\&gt;</span><span><b><span>sc delete mysql</span></b></span></pre>
			<pre ><span>[SC] DeleteService SUCCESS</span></pre>
			<p>如果<span>Windows</span>版本中沒有<span>sc</span>工具，可以從<span><a target="_top"  href="http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp"><span>
			<u><span style="color:blue">
			http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp</span></u>
			</span></a></span>下載<span>delsrv</span>工具並使用<span>delsrvMySQL</span>語法。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-upgrading"></a>
			2.3.15.&nbsp;在Windows下升級MySQL</h3></div></div></div><a class="indexterm" name="id2711468"></a>
			<p>本節列出了在<span>Windows</span>中升級<span>MySQL</span>應採取的步驟。</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>進行升級前您應先備份當前的<span>MySQL</span>安裝。請參見<a href="database-administration.html#backup" title="5.9.1. Database Backups">5.9.1節，「資料庫備份」</a>。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>下載最新<span>Windows</span>版<span>MySQL</span>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>升級<span>MySQL</span>前，必須停止伺服器。</p>
			<p>如果伺服器安裝為服務，必須在命令提示符下在命令行中用下面的命令停止服務：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>NET STOP MYSQL</span></b></span></pre>
			<p>如果<span>MySQL</span>伺服器不是服務，使用下面的命令停止伺服器：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqladmin -u root shutdown</span></b></span></pre>
			<p>
			<span >4.<span>&nbsp;&nbsp;&nbsp;
			</span></span><span>當從以前至的<span>4.1.5</span>版本升級到<span>MySQL 
			5.1</span>時<span>,</span>或從<span>Zip</span>檔案安裝的<span>MySQL</span>升級到<span>MySQL
			</span></span><span>Installation Wizard</span>（<span>安裝幫助）安裝的<span>MySQL</span>時，您必須手動卸載前面安裝的<span>MySQL</span>服務。</span></p>
			<p>要想卸載<span>MySQL</span>服務，使用下面的命令：</p>
			<pre ><span>C</span>：<span>\&gt; </span><span><b><span>C:\mysql\bin\mysqld --remove</span></b></span></pre>
			<p><strong>
			<span>如果您不想卸載已有的服務，<span>MySQL 
			Installation Wizard</span>（安裝幫助）則不會正確安裝新的<span>MySQL</span>服務。</span></strong></p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<span>MySQL Installation Wizard</span>（安裝幫助），按照<a href="#windows-install-wizard" title="2.3.4. Using the MySQL Installation Wizard">2.3.4節，「使用MySQL安裝嚮導」</a>的描述來啟動幫助。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果用<span>Zip</span>檔案安裝<span>MySQL</span>，應提取檔案。您可以覆蓋已有的<span>MySQL</span>安裝<span>(</span>通常位於<span><span>C</span><span>：<span>\mysql</span></span></span><span>)</span>，或將它安裝到其它目錄，例如 
			<span>
			<span>C</span><span>：<span>\mysql4</span></span></span>。建議覆蓋原有的安裝。</p>
			<p>
			<span>7.<span>&nbsp;&nbsp;&nbsp;
			</span></span>重新啟動伺服器。如果您運行<span>MySQL</span>服務，則使用<strong><span>NET 
			START MySQL</span></strong>，還可以直接使用<strong><span>mysqld</span></strong>。</p>
			<p>
			<span>8.<span>&nbsp;&nbsp;&nbsp;
			</span></span>關於在<span>Windows</span>之外的作業系統升級<span>MySQL</span>的詳細訊息，請參閱<a href="#upgrade" title="2.10. Upgrading MySQL">2.10節，「升級MySQL」</a>。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>如果遇到錯誤，參見
            <a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">
			2.3.14節，「在Windows環境下對MySQL安裝的故障診斷與排除」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-vs-unix"></a>
			2.3.16.&nbsp;Windows版MySQL同Unix版MySQL對比</h3></div></div></div><a class="indexterm" name="id2711671"></a><a class="indexterm" name="id2711682"></a>
			<p>已經證明，<span>Windows</span>版<span>MySQL</span>很穩定。<span>Windows</span>版<span>MySQL</span>的功能與相應的<span>Unix</span>版相同，只有以下例外：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>
			Windows 95</span><span>和線程</span></strong></p>
			<p><span>Windows 95</span>建立一個線程時大約需要<span>200</span>字節的主內存。<span>MySQL</span>的每個連接都會建立一個新線程，因此如果您的伺服器正處理許多連接，您不應當在<span>Windows 
			95</span>中運行<strong><span>mysqld</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>有限的端口數目</span></strong></p>
			<p><span>Windows</span>系統有大約<span>4,000</span>個端口供客戶端連接，某個端口的連接關閉後，在能夠重新利用該端口前，需要<span>2</span>至<span>4</span>分鐘。在客戶端頻繁連接並從伺服器上中斷時，在可以重新使用關閉的端口前，有可能用完了所有可用的端口。如果發生這種情況，<span>MySQL</span>伺服器不會響應，即使它仍在運行。請注意機器上運行的其它應用程式也可以使用端口，此時可供<span>MySQL</span>使用的端口數要少。</p>
			<p>詳細訊息參見<span><a target="_top"  href="http://support.microsoft.com/default.aspx?scid=kb;en-us;196271"><span><u><span style="color:blue">http://support.microsoft.com/default.aspx?scid=kb;en-us;196271</span></u>
			</span></a></span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>並行讀</span></strong></p>
			<p><span>MySQL</span>依靠<span>pread()</span>和<span>pwrite()</span>系統使用來同時使用<span>INSERT</span>和<span>SELECT</span>。目前我們使用互斥來競爭<span>pread()</span>和<span>pwrite()</span>。我們將來想用虛擬接口替換檔案級接口，因此要想更快，我們可以在<span>NT</span>、<span>2000</span>和<span>XP</span>上使用<span>readfile()</span><span>/</span><span>writefile()</span>接口。目前<span>MySQL 
			5.1</span>可以打開的檔案的限制數目為<span>2,048,</span>意味著在<span>Windows 
			NT</span>，<span>2000,XP</span>和<span>2003</span>上可以運行的並行線程不如<span>Unix</span>上多。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>阻塞讀</span></strong></p>
			<p><span>MySQL</span>為每個連接使用阻塞讀取，如果啟用了命名管道連接，其含義如下：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>連接不會在<span>8</span>小時後自動中斷，而在<span>Unix</span>版<span>MySQL</span>中會發生。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>如果連接被掛起，不殺掉<span>MySQL</span>則不會將其中斷。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>mysqladmin 
			kill</span></strong>不會殺掉睡眠中的連接。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>只要有睡眠連接，<strong><span>mysqladmin 
			shutdown</span></strong>不會中斷。</p>
			<p>我們計劃在將來修復該問題。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>ALTER TABLE</span></b></span></p>
			<p>執行<span>ALTER 
			TABLE</span>語句時，將該資料表鎖定不讓其它線程使用。在<span>Windows</span>中，您不能刪除正被另一個線程使用的檔案。在將來，我們會找出辦法解決該問題。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DROP TABLE</span></b></span></p>
			<p>在<span>Windows</span>中對一個被<span>MERGE</span>資料表應用的資料表執行<span>DROP 
			TABLE</span>不會實現，因為<span>MERGE</span>處理器將資料表從<span>MySQL</span>上層映射隱藏起來。由於<span>Windows</span>不允許刪除打開的檔案，必須在刪除資料表之前首先清空所有<span>MERGE</span>資料表<span>(</span>使用<span>FLUSH 
			TABLES</span><span>)</span>或刪掉<span>MERGE</span>資料表。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DATA DIRECTORY</span></b></span><strong><span> 
			and </span></strong><span><b>
			<span>INDEX DIRECTORY</span></b></span></p>
			<p>在<span>Windows</span>中將忽略<span>DATA 
			DIRECTORY</span>和<span>INDEX 
			DIRECTORY</span>選項，因為<span>Windows</span>不支援符號連接。在具有非功能<span>realpath()</span>使用的系統中，這些選項也被忽略。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>DROP DATABASE</span></b></span></p>
			<p>您不能刪掉正被線程使用的資料庫。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>從<span>Task 
			Manager</span>（任務管理器）殺掉<span>MySQL</span></span></strong></p>
			<p>您不能從<span>Task Manager</span>（任務管理求）或使用<span>Windows 
			95</span>的<span>shutdown</span>工具來殺掉<span>MySQL</span>。您必須通過<strong><span>mysqladmin 
			shutdown</span></strong>停止它。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>大小寫名</span></strong></p>
			<p>由於<span>Windows</span>對檔案名大小寫不敏感。因此在<span>Windows</span>中<span>MySQL</span>資料庫名和資料表名對大小寫也不敏感。唯一的限制是在同一個語句中，必須同時使用大寫或小寫指定資料庫名和資料表名。請參見<a href="language-structure.html#name-case-sensitivity" title="9.2.2. Identifier Case Sensitivity">9.2.2節，「識別符大小寫敏感性」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>『</span></strong><span><b><span>\</span></b></span><strong><span>』路徑名間隔符</span></strong></p>
			<p><span>Windows</span>中的路徑名用『<span>\</span>』符間隔開，在<span>MySQL</span>中還是轉義字元。如果您使用<span>LOAD 
			DATA INFILE</span>或<span>SELECT 
			... INTO OUTFILE</span>，用『<span>/</span>』符使用<span>Unix-</span>類檔案名：</p>
			<pre ><span>mysql&gt; </span><span><b><span>LOAD DATA INFILE &#39;C:/tmp/skr.txt&#39; INTO TABLE skr;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT * INTO OUTFILE &#39;C:/tmp/skr.txt&#39; FROM skr;</span></b></span></pre>
			<p>您還可以使用雙『<span>\</span>』符：</p>
			<pre ><span>mysql&gt; </span><span><b><span>LOAD DATA INFILE &#39;C:\\tmp\\skr.txt&#39; INTO TABLE skr;</span></b></span></pre>
			<pre ><span>mysql&gt; </span><span><b><span>SELECT * INTO OUTFILE &#39;C:\\tmp\\skr.txt&#39; FROM skr;</span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><strong><span>管道問題。</span></strong></p>
			<p>管道不能在<span>Windows</span>命令行提示符下可靠地工作。如果管道包括字元<span>^Z</span><span>/</span><span>CHAR(24)</span>，<span>Windows</span>認為遇到了檔案末尾並中斷程式。</p>
			<p>這主要是按照如下所示使用二進制日誌的主要問題：</p>
			<pre ><span>C</span>：<span>\&gt;</span><span><b><span>mysqlbinlog binary-log-name | mysql --user=root</span></b></span></pre>
			<p>如果使用日誌時出現問題，懷疑是由於<span>^Z</span><span> 
			/ </span>
			<span>CHAR(24)</span>字元，您可以使用下面的程式：</p>
			<pre ><span>C:\&gt; </span><span><b><span>mysqlbinlog binary-log-file --result-file=/tmp/bin.sql</span></b></span></pre>
			<pre ><span>C:\&gt; </span><span><b><span>mysql --user=root --execute &quot;source /tmp/bin.sql&quot;</span></b></span></pre>
			<p>後面的命令還可以用來可靠讀取任何包含二進制數據的<span>SQL</span>檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><b>
			<span>Access denied for user</span></b></span><strong><span>錯誤</span></strong></p>
			<p>如果您試圖運行<span>MySQL</span>客戶端程式來連接同一機器上運行的伺服器，但是遇到錯誤<span>Access 
			denied for user &#39;<i>some-user</i>&#39;@&#39;unknown&#39; to database &#39;mysql&#39;</span>，這意味著<span>MySQL</span>不能正確識別您的主機名。</p>
			<p>要解決該問題，您應當建立一個名為<span>\windows\hosts</span>包含下面訊息的檔案：</p>
			<pre ><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost</span></pre>
			<p>這兒有一些公開問題，提供給想要幫助我們改進<span>Windows</span>中的<span>MySQL</span>的人們：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>增加宏來使用<span>Windows</span>提供的更快的線程安全增<span>/</span>減方法。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="linux-rpm"></a>2.4. 在Linux下安裝MySQL</h2></div></div></div><a class="indexterm" name="id2712323"></a><a class="indexterm" name="id2712330"></a><a class="indexterm" name="id2712337"></a>
		<p>建議在<span>Linux</span>中使用<span>RPM</span>包來安裝<span>MySQL</span>。<span>MySQL 
		RPM</span>目前已經嵌入到<span>SuSE Linux 7.3</span>系統中，但是應當能在大多數支援<strong><span>rpm</span></strong>和使用<span>glibc</span>的<span>Linux</span>版本中工作。要想獲得<span>RPM</span>軟件包，參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
		<p><span>MySQL AB</span>不提供與具體平台相關的<span>RPM</span>；具體平台相關的<span>RPM</span>和通用<span>RPM</span>之間的區別是具體平台相關<span>RPM</span>為目標平台而構建，為動態連接。而通用<span>RPM</span>與<span>Linux</span>線程之間是靜態連接。</p>
		<p><strong><span>註釋：</span></strong>通常由其它供應商提供<span>MySQL</span>的<span>RPM</span>分發版。其特徵和功能與<span>MySQL 
		AB</span>所構建的不同，該手冊中的指令不一定適合安裝其它供應商提供的<span>MySQL</span>的<span>RPM</span>分發版。此時應咨詢供應商的說明。</p>
		<p>如果<span>RPM</span>檔案有問題<span>(</span>例如，如果您收到錯誤「<span>Sorry, 
		the host &#39;<i>xxxx</i>&#39; could not be looked up</span>」<span>)</span>，參見<a href="#binary-notes-linux" title="2.12.1.2. Linux Binary Distribution Notes">2.12.1.2節，「Linux二進制分發版說明」</a>。</p>
		<p>在大多數情況，您只需要安裝<span>MySQL-server</span>和<span>MySQL-client</span>軟件包來安裝<span>MySQL</span>。在標準安裝中不需要其它的包。如果您想要運行含更多功能的<span>MySQL-Max</span>伺服器，還應當安裝<span>MySQL</span><span>-Max</span><span> 
		RPM</span>。必須先安裝<span>M</span><span> 
		MySQL-server</span><span> RPM</span>再安裝該模塊。請參見<a href="database-administration.html#mysqld-max" title="5.1.2. The mysqld-max Extended MySQL Server">5.1.2節，「mysq<span><strong class="command">ld-max延伸My</strong></span>SQL伺服器」</a>。</p>
		<p>如果安裝<span>MySQL</span>軟件包時出現從屬錯誤<span>(</span>例如，「<span>error: 
		removing these packages would break dependencies: libmysqlclient.so.10 
		is needed by ..</span>」<span>)</span>，您還應當安裝包<span>MySQL-shared-compat</span>，其中包括兩個向後兼容的共享庫<span>(MySQL 
		4.0</span>為<span>libmysqlclient.so.12</span>，<span>MySQL 
		3.23</span>為<span>libmysqlclient.so.10</span><span>)</span>。</p>
		<p>許多<span>Linux</span>分發版包含了<span>MySQL 3.23</span>，通常動態連接應用程式以節省硬盤空間。如果這些共享庫在單獨的包內<span>(</span>例如，<span>MySQL-shared</span><span>)</span>，只需要安裝這些包並升級<span>MySQL</span>伺服器和客戶端軟件包<span>(</span>為靜態連接，不依賴共享庫<span>)</span>。<span>對於包含與<span>MySQL</span>伺服器相同軟件包中的共享庫的分發版<span>(</span>例如，<span>Red 
		Hat Linux)</span>，您可以安裝<span>3.23 </span></span>
		<span>
		MySQL-shared</span><span> RPM</span><span>，或使用</span><span>MySQL-shared-compat</span><span>包。</span></p>
		<p>可以使用以下<span>RPM</span>包：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-server-<i>VERSION</i>.i386.rpm</span></p>
		<p><span>MySQL</span>伺服器。您需要該選項，除非您只想連接運行在另一台機器上的<span>MySQL</span>伺服器。
		註釋：在<span>MySQL 
		4.0.10</span>之前，伺服器<span>RPM</span>檔案被稱為<span>MySQL-<i>VERSION</i>.i386.rpm</span>。也就是說，名稱中不含有<span>-server</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-Max-<i>VERSION</i>.i386.rpm</span></p>
		<p><span>MySQL-Max</span>伺服器。該伺服器具有其它功能，這是<span>MySQL-server</span><span> 
		RPM</span>不具備的。您必須首先安裝<span>MySQL-server</span><span> 
		RPM</span>，因為<span>MySQL</span><span>-Max</span><span> 
		RPM</span>依賴於它。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-client-<i>VERSION</i>.i386.rpm</span></p>
		<p>標準<span>MySQL</span>客戶端程式。您可能總是要安裝該軟件包。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-bench-<i>VERSION</i>.i386.rpm</span></p>
		<p>測試和基準。需要<span>Perl</span>和<span><span>DBD</span><span>：：<span>mysql</span></span></span>模塊。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-devel-<i>VERSION</i>.i386.rpm</span></p>
		<p>庫和包含檔案，如果您想要編譯其它<span>MySQL</span>客戶端，例如<span>Perl</span>模塊，則需要。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-shared-<i>VERSION</i>.i386.rpm</span></p>
		<p>該軟件包包含某些語言和應用程式需要動態裝載的共享庫<span>(</span><span>libmysqlclient.so*</span><span>)</span>，使用<span>MySQL</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-shared-compat-<i>VERSION</i>.i386.rpm</span></p>
		<p>該軟件包包括<span>MySQL 3.23</span>和<span>MySQL 
		4.0</span>的共享庫。如果您安裝了應用程式動態連接<span>MySQL 3.23</span>，但是您想要升級到<span>MySQL 
		4.0</span>而不想打破庫的從屬關係，則安裝該軟件包而不要安裝<span>MySQL-shared</span>。從<span>MySQL 
		4.0.13</span>起包含該安裝軟件包。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-embedded-<i>VERSION</i>.i386.rpm</span></p>
		<p>嵌入式<span>MySQL</span>伺服器庫<span>(</span>從<span>MySQL 
		4.0</span>起<span>)</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>MySQL-<i>VERSION</i>.src.rpm</span></p>
		<p>包含以前所有軟件包的原始碼。可用來在其它架構上重建<span>RPM(</span>例如，<span>Alpha</span>或<span>SPARC)</span>。</p>
		<p>要想看到<span>RPM</span>軟件包內的所有檔案<span>(</span>例如，<span>MySQL-server</span><span> 
		RPM)</span>，運行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -qpl MySQL-server-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p>要想執行標準最小安裝，運行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-server-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-client-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p>要想只安裝客戶端軟件包，運行：</p>
		<pre><span>shell&gt; </span><span><b><span>rpm -i MySQL-client-<i>VERSION</i>.i386.rpm</span></b></span></pre>
		<p><span>RPM</span>提供在安裝軟件包前驗證其完整性和真實性的功能。如果您要想瞭解關於該功能的更多訊息，參見<a href="#verifying-package-integrity" title="2.1.4. Verifying Package Integrity Using MD5 Checksums or GnuPG">2.1.4節，「通過MD5校驗和或GnuPG驗證軟件包的完整性<code class="literal"></code>」</a>。</p>
		<p>伺服器<span>RPM</span>將數據放入<span>/var/lib/mysql</span>目錄。<span>RPM</span>還為<span>mysql</span>用戶建立登錄帳號<span>(</span>如果還沒有<span>)</span>，用來運行<span>MySQL</span>伺服器，並在<span>/etc/init.d/</span>建立相應條目，以便在引導時自動啟動伺服器。<span>(</span>這意味著如果您已經安裝並且已經更改啟動指令，您可能要複製指令，以便您安裝新<span>RPM</span>時 
		不會丟掉指令<span>)</span>。關於系統啟動時如何自動啟動<span>MySQL</span>的詳細訊息，參見
      <a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">
		2.9.2.2節，「自動啟動和停止MySQL」</a>。</p>
		<p>如果想要在舊的不支援<span>/etc/init.d</span><span>(</span>直接或通過符號連接<span>)</span>初始化指令的<span>Linux</span>分發版中安裝<span>MySQL 
		RPM</span>，您應當建立一個指向初始化指令實際安裝的位置的符號連接。例如，如果安裝位置為<span>/etc/rc.d/init.d</span>，安裝<span>RPM</span>前使用這些命令建立<span>/etc/init.d</span>，作為指向該位置的符號連接：</p>
		<pre><span>shell&gt; </span><span><b><span>cd /etc</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>ln -s rc.d/init.d</span><span>。</span></b></span></pre>
		<p>目前主要<span>Linux</span>分發版應當支援使用<span>/etc/init.d</span>的新目錄佈局，因為需要<span>LSB(Linux</span>標準基<span>)</span>相容性。</p>
		<p>如果您安裝的<span>RPM</span>檔案包括<span>MySQL-server</span>，安裝後<span>MySQL<strong><span>d</span></strong></span>伺服器應當能啟動並運行。您應當能使用<span>MySQL</span>啟動。</p>
		<p>如果出現問題，可以從二進制安裝部分找到詳細訊息。<a href="#installing-binary" title="2.7. Installing MySQL on Other Unix-Like Systems">2.7節，「在其它類Unix系統中安裝MySQL」</a>。</p>
		<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的帳號開始沒有密碼。啟動伺服器後，應當按照<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明為它們設置密碼。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="mac-os-x-installation"></a>
		2.5.在Mac OS X中安裝MySQL</h2></div></div></div><a class="indexterm" name="id2712944"></a><a class="indexterm" name="id2712954"></a>
		<p>可以在<span>Mac OS X 10.2.x(</span>「<span class="quote"><span>Jaguar</span></span>」<span>)</span>和以上版本上<span>Mac 
		OS X</span>使用二進制安裝軟件包的<span>PKG</span>格式代替二進制分發版來安裝<span>MySQL</span>。請注意該軟件包不支援舊版本的<span>Mac 
		OS X(</span>例如，<span>10.1.x)</span>。</p>
		<p>安裝軟件包位於硬盤映像<span>(</span><span>.dmg</span><span>)</span>檔案中，必須首先雙擊搜索起中的圖標來安裝該檔案。應當安裝圖像並顯示其內容。</p>
		<p>要想獲得<span>MySQL</span>，參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
		<p><strong><span>註釋：</span></strong>在繼續安裝前，一定要使用<span>MySQL</span>管理器應用程式<span>(</span>在<span>Mac 
		OS X</span>伺服器上<span>)</span>或通過命令行的<strong><span>mysqladmin 
		shutdown</span></strong>關閉所有運行<span>MySQL</span>伺服器實例。</p>
		<p>要想安裝<span>MySQL PKG</span>檔案，雙擊軟件包圖標。將啟動<span>Mac 
		OS X</span>安裝軟件包安裝器，將指導您完成<span>MySQL</span>安裝。</p>
		<p><span>Mac OS X</span>安裝軟件包的安裝器中有一個問題，您會在目標盤選擇對話框中發現該錯誤消息：</p>
		<pre><span>You cannot install this software on this disk. (null)</span></pre>
		<p>如果出現該錯誤，只需要點擊<span>Go 
		Back</span>按鈕返回前面的窗口。然後點擊<span>Continue</span>再次選擇目標盤，此時應當可以正確地選擇目標盤。我們已經向<span>Apple</span>報告了該問題，它正在調查該問題。</p>
		<p><span>MySQL</span>的<span>Mac OS X PKG</span>安裝到<span  >/usr/local/mysql-<i>VERSION</i></span>，並且還會安裝一個符號連接，<span>/usr/local/mysql</span>，指向新的位置。如果有<span>/usr/local/mysql</span>目錄，首先將它改名為<span>/usr/local/mysql.bak</span>。安裝完後，安裝器執行<strong><span  style="font-family:
細明體">mysql_install_db</span></strong>在<span>MySQL</span>資料庫中建立授權資料表。</p>
		<p>安裝佈局與<strong><span  style="font-family:
細明體">tar</span></strong>檔案二進制分發版類似；所有<span>MySQL</span>二進制代碼位於目錄<span>/usr/local/mysql/bin</span>中。預設情況，<span>MySQL</span>套接字檔案建立為<span  >/tmp/mysql.sock</span>。請參見<a href="#installation-layouts" title="2.1.5. Installation Layouts">2.1.5節，「安裝佈局」</a>。</p>
		<p><span>MySQL</span>安裝需要<span>Mac OS X</span>的<span  >mysql</span>用戶帳號。在<span>Mac 
		OS X 10.2</span>及以上版本中，預設情況應存在<span  >mysql</span>用戶帳號。</p>
		<p>如果正運行<span>Mac OS X</span>伺服器，需要安裝<span>MySQL</span>。隨<span>Mac 
		OS X</span>伺服器版本安裝的<span>MySQL</span>版本如下資料表所示：</p>
		<table border="1" cellpadding="0" id="table7">
			<tr>
				<td>
				<p><strong>
				<span>Mac OS X</span><span>伺服器版本</span></strong></td>
				<td>
				<p><strong>
				<span>MySQL</span><span>版本</span></strong></td>
			</tr>
			<tr>
				<td>
				<p><span>10.2-10.2.2</span></td>
				<td>
				<p><span>3.23.51</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.2.3-10.2.6</span></td>
				<td>
				<p><span>3.23.53</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.3</span></td>
				<td>
				<p><span>4.0.14</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.3.2</span></td>
				<td>
				<p><span>4.0.16</span></td>
			</tr>
			<tr>
				<td>
				<p><span>10.4.0</span></td>
				<td>
				<p><span>4.1.10a</span></td>
			</tr>
		</table>
		<p>本節只覆蓋官方<span>MySQL Mac OS X PKG</span>版本。一定要閱讀<span>Apple</span>關於<span>MySQL</span>安裝的幫助訊息：運行「<span class="quote">幫助視圖</span>」應用程式，選擇「<span class="quote"><span>Mac 
		OS X</span>伺服器</span>」幫助，搜索「<span class="quote"><span>MySQL</span></span>」，閱讀標題為「<span class="quote">安裝<span>MySQL</span></span>」的內容。</p>
		<p>對於<span>Mac OS X</span>伺服器上已經安裝的<span>MySQL</span>版本，如果早於<span>4.0</span>，應特別注意應當使用<strong><span>mysqld_safe</span></strong>而不是<strong><span>safe_mysqld</span></strong>來啟動<strong><span>mysqld</span></strong>。</p>
		<p>如果您前面在<span>Mac OS X</span>上安裝了從<a href="http://www.entropy.ch" target="_top">http://www.entropy.ch</a>下載的<span>Marc 
		Liyanage</span>的<span>MySQL</span>軟件包，您可以只使用該頁給出的二進制安裝佈局按照更新說明來安裝。</p>
		<p>如果您從<span>Marc</span>的<span>3.23.xx </span>版本或從<span>Mac 
		OS X</span>的<span>MySQL</span>伺服器版本升級到官方<span>MySQL 
		PKG</span>，您還需要將已有<span>MySQL</span>授權資料表轉換為當前格式，因為已經加了許多新的安全權限。請參見<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</p>
		<p>如果您想在系統啟動過程中自動啟動<span>MySQL</span>，您還需要安裝<span>MySQL 
		Startup Item</span>。在<span>MySQL 5.1</span>中<span>,</span>它是<span>Mac 
		OS X</span>安裝盤映像的一部分，是一個獨立的安裝軟件包。只需要雙擊<span class="guiicon"><span>MySQLStartupItem.</span></span>圖標並按照說明來安裝。</p>
		<p>請注意<span>Startup Item</span>只需要安裝一次！不需要在以後每次升級<span>MySQL</span>軟件包時都安裝它。</p>
		<p><span>MySQL 5.1</span>的<span>Startup Item</span>安裝在<span  >/Library/StartupItems/MySQLCOM</span>。<span>(</span>在<span>MySQL 
		4.1.2</span>以前的版本<span>,</span>安裝位置為<span  >/Library/StartupItems/MySQL</span>，但與<span>Mac 
		OS X</span>伺服器安裝的<span>MySQL Startup Item</span>衝突<span>)</span>。<span>Startup 
		Item</span>安裝時在系統配置檔案<span  >/etc/hostconfig</span>中加入變數<span>MySQL</span><span>COM=-YES-</span>。如果您想要<span>disable</span>自動啟動<span>MySQL</span>，只需要將該變數更改為<span>MySQL</span><span>COM=-NO-</span>。</p>
		<p>在<span>Mac OS X</span>伺服器上，預設<span>MySQL</span>安裝使用<span  >/etc/hostconfig</span>檔案中的變數<span>MySQL</span>。<span>MySQL 
		AB Startup Item</span>安裝器將其設置為<span>MySQL</span><span>=-NO-</span>禁用該變數。這樣可以避免啟動時間與<span>MySQL 
		AB Startup Item</span>使用的<span>MySQL</span><span>COM</span>變數衝突。但是，不會關閉運行的<span>MySQL</span>伺服器。您應當自己關閉。</p>
		<p>安裝完後，可以在終端窗口運行下面的命令來啟動<span>MySQL</span>。您必須具有管理員權限來執行該任務。</p>
		<p>如果您已經安裝的<span>Startup Item</span>：</p>
		<p><span >shell&gt; <b>
		sudo /Library/StartupItems/MySQLCOM/MySQLCOM start</b></span></p>
		<p><span >(Enter your 
		password, if necessary)</span></p>
		<p><span >(Press 
		Control-D or enter &quot;exit&quot; to exit the shell)</span></p>
		<p>如果不使用<span>Startup Item</span>，輸入下面的命令序列：</p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd /usr/local/mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >sudo ./bin/mysqld_safe</span></b></p>
		<p>
		<span  >(Enter your 
		password, if necessary)</span></p>
		<p>
		<span  >(Press 
		Control-Z)</span></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >bg</span></b></p>
		<p>
		<span  >(Press 
		Control-D or enter &quot;exit&quot; to exit the shell)</span></p>
		<p>您應當能夠連接<span>MySQL</span>伺服器，例如，通過運行<span>/usr/local/mysql/bin/mysql</span>來連接。</p>
		<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的帳號開始沒有密碼。啟動伺服器後，應當按照<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明來設置密碼。</p>
		<p>您可以為外殼源檔案起一個別名，使它更容易訪問常用的程式，例如從命令行運行<strong><span>mysql</span></strong>和<strong><span>mysqladmin</span></strong>。<strong><span>tcsh</span></strong>語法為：</p>
		<pre><span>aliasMySQL /usr/local/mysql/bin/mysql</span></pre>
		<pre><span>aliasMySQLadmin /usr/local/mysql/bin/mysqladmin</span></pre>
		<p>對於<strong><span>bash</span></strong>，使用：</p>
		<pre><span>aliasMySQL=/usr/local/mysql/bin/mysql</span></pre>
		<pre><span>aliasMySQLadmin=/usr/local/mysql/bin/mysqladmin</span></pre>
		<p>最好是在<span  >PATH</span>環境變數中加入<span>/usr/local/mysql/bin</span>。例如，如果外殼命令是<strong><span  style="font-family:
細明體">tcsh</span></strong>，在<span>$HOME/.tcshrc</span>檔案中加入下面一行：</p>
		<pre><span>setenv PATH ${PATH}:/usr/local/mysql/bin</span></pre>
		<p>如果根目錄中沒有<span>.tcshrc</span>檔案，則用文本編輯器建立該檔案。</p>
		<p>如果您對已有的安裝進行升級，請注意安裝新<span>MySQL PKG</span>時不會卸載舊的安裝目錄。遺憾的是，<span>Mac 
		OS X</span>安裝器尚未提供功能來正確升級前面安裝的軟件包。</p>
		<p>要想在新安裝中使用已有的資料庫，您需要將舊數據目錄中的內容複製到新的數據目錄。執行該操作時，確保關閉新、舊伺服器。將以前安裝的<span>MySQL</span>資料庫檔案拷貝過來並成功啟動新的伺服器後，應當卸載舊的檔案以節省硬盤空間。並且，還應當卸掉位於<span  >/Library/Receipts/mysql-<i>VERSION</i>.pkg</span>的舊版本<span>Package 
		Receipt</span>目錄。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="netware-installation"></a>2.6. 在NetWare中安裝MySQL</h2></div></div></div><a class="indexterm" name="id2713546"></a><a class="indexterm" name="id2713553"></a>
		<p>將<span>MySQL</span>裝入到<span>NetWare</span>首先由<span>Novell</span>實現。<span>Novell</span>客戶應當滿意，<span>NetWare 
		6.5</span>中捆綁了<span>SQL</span>二進制，並具有自動商業使用授權，用於運行該版本<span>NetWare</span>的所有伺服器。</p>
		<p><span>NetWare</span>的<span>MySQL</span>使用<span>NetWare</span>的<span>Metrowerks 
		CodeWarrior</span>和專用跨編譯版<span>GNU</span>自動工具編譯而成。</p>
		<p>可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a></span>獲得最新的二進制軟件包<span>NetWare</span>。請參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
		<p>為了使<span>MySQL</span>駐留在主機上，<span>NetWare</span>伺服器必須滿足以下要求：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>安裝的<span><a target="_top"  href="http://support.novell.com/filefinder/18197/index.html">NetWare 
		6.5</a> </span>或<span><a target="_top"  href="http://support.novell.com/filefinder/13659/index.html">NetWare 
		6.0</a></span>的<span>Latest Support Pack</span>（最新支援補丁）。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>系統必須滿足<span>Novell</span>的最低要求以運行相關版本的<span>NetWare</span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>MySQL</span>數據及其二進制，必須安裝到<span>NSS</span>卷內；不支援傳統卷。</p>
		<p>要想在<span>NetWare</span>下安裝<span>MySQL</span>，遵從下面的步驟：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>如果您對前面的安裝進行升級，停止<span>MySQL</span>伺服器。應使用下面的命令從伺服器控制台完成：</p>
		<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SERVER:&nbsp; mysqladmin -u root shutdown</span></pre>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>從客戶端登錄到目標伺服器上，訪問安裝<span>MySQL</span>的位置。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>將二進制軟件包<span>Zip</span>檔案提取到伺服器上。一定要使用<span>Zip</span>檔案中的路徑。簡單地將檔案提取到<span><span>SYS</span><span>：<span>\</span></span></span>是很安全的。</p>
		<p>如果您從前面的安裝升級，您可能需要複製數據目錄<span>(</span>例如，<span  >SYS:MYSQL\DATA</span><span>)</span>和<span>my.cnf</span>（如果您已經定制）。然後您可以刪除舊版本的<span>MySQL</span>。</p>
		<p><span>5.<span>&nbsp;&nbsp;&nbsp;
		</span></span>您可以將目錄重新命名為更加一致和易於使用的名稱。在本手冊的例子中使用<span><span>SYS</span><span>：<span>MYSQL</span></span></span>來指向安裝目錄。</p>
		<p>請注意在<span>NetWare</span>上安裝<span>MySQL</span>不會檢測到是否已經安裝了<span>NetWare</span>發佈之外的<span>MySQL</span>版本。因此，如果您已經在<span><span>SYS</span><span>：<span>\MYSQL</span></span></span>安裝了從網站上下載的最新<span>MySQL</span>版本<span>(</span>例如，<span>MySQL 
		4.1</span>或更新版本<span>)</span>，在升級<span>NetWare</span>伺服器之前，必須重新命名檔案夾；否則，<span><span>SYS</span><span>：<span>\MySQL</span></span></span>中的檔案會被<span>NetWare 
		Support Pack</span>中的版本所覆蓋。</p>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在伺服器控制台中，加入含有<span> MySQL NLM</span>的目錄的搜索路徑。例如：</p>
		<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SERVER:&nbsp; SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<p><span>8.<span>&nbsp;&nbsp;&nbsp;
		</span></span>初始化數據目錄和授權資料表，如果需要，應在伺服器控制台執行<strong><span>mysql_install_db</span></strong>。</p>
		<p><span>9.<span>&nbsp;&nbsp;&nbsp;
		</span></span>在伺服器控制台使用<strong><span  style="font-family:
細明體">mysqld_safe</span></strong>啟動<span>MySQL</span>伺服器。</p>
		<p><span>10.</span>要完成安裝，還應當在<span>autoexec.ncf</span>中加入以下命令。例如，如果<span>MySQL</span>安裝在<span><span>SYS</span><span>：<span>MYSQL</span></span></span>中，您想讓<span>MySQL</span>自動啟動，可以加入以下行：</p>
		<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre><span>13.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>MYSQLD_SAFE</span></pre>
		<p>如果<span>MySQL</span>運行在<span>NetWare 
		6.0</span>上<span>,</span>我們強烈建議您在命令行中使用<span>--skip-external-locking</span>選項：</p>
		<pre ><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre ><span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre ><span>MYSQLD_SAFE --skip-external-locking</span></pre>
		<p>還需要使用<span  >CHECK 
		TABLE</span>和<span  >REPAIR 
		TABLE</span>來替代<strong><span>myisamchk</span></strong>，因為<strong><span>myisamchk</span></strong>使用外部鎖。已經知道外部鎖在<span>NetWare 
		6.0</span>中有問題；在<span>NetWare 6.5</span>中已經解決了該問題。</p>
		<p><span>NetWare</span>中的<strong><span>mysqld_safe</span></strong>提供了窗口保留功能。當卸載<span>(</span>關閉<span>)<strong><span>mysqld_safe</span></strong> 
		NLM</span>時，預設情況窗口不會消失。相反，會提示用戶輸入：</p>
		<pre ><span>*&lt;NLM has terminated; Press any key to close the screen&gt;*</span></pre>
		<p>如果您想讓<span>NetWare</span>自動關閉窗口，在<strong><span>mysqld_safe</span></strong><b>中</b>使用<span  >--autoclose</span>選項。例如：</p>
		<pre ><span>#Starts the MySQL 5.1.x database server</span></pre>
		<pre ><span>SEARCH ADD SYS:MYSQL\BIN</span></pre>
		<pre ><span>MYSQLD_SAFE --autoclose</span></pre>
		<p><span>14.</span>當首次安裝或從前面的版本升級<span>MySQL 
		5.1</span>版時，應下載並安裝最新的相應<span>Perl</span>模塊和<span>PHP</span>延伸名：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>Perl for NetWare:
		<a target="_top"  href="http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/">
		http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/</a></span></p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>PHP for NetWare:
		<a target="_top"  href="http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/">
		http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/</a></span></p>
		<p><span>&nbsp;(MySQL 4.1</span>的<span>PHP 
		5</span>延伸名適用於<span>MySQL 5.1)</span>。</p>
		<p>在<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>中詳細描述了<span>NetWare</span>中的<strong><span>mysqld_safe</span></strong>的行為。</p>
		<p>如果伺服器上已經安裝了<span>MySQL</span>，一定要檢查<span>autoexec.ncf</span>中已有的<span>MySQL</span>啟動命令，如果需要則編輯或刪除這些命令。</p>
		<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的初始帳號沒有密碼。啟動伺服器後，您應當使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明來設置密碼。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="installing-binary"></a>2.7. 在其它類Unix系統中安裝MySQL</h2></div></div></div><a class="indexterm" name="id2713971"></a><a class="indexterm" name="id2713982"></a>
		<p>本節介紹在各種平台上安裝<strong><span>tar</span></strong>壓縮檔案格式的<span>MySQL</span>二進制分發版<span>(</span>檔案有<span>.tar.gz</span><span>
		</span>延伸名<span>)</span>。詳細目錄參見<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5節，「MySQL AB編譯的MySQL二進製版本」</a>。</p>
		<p>要想獲得<span>MySQL</span>，參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
		<p><span>MySQL<strong><span style="font-family:
細明體">tar</span></strong></span>檔案二進制分發版的檔案名格式為<span  >mysql-<i>VERSION</i>-<i>OS</i>.tar.gz</span>，其中<span><i><span>VERSION</span></i></span>是版本號<span>(</span>例如，<span>5.1.2-alpha</span><span>)</span>，<span><i><span>OS</span></i></span>資料表示分發版安裝的作業系統類型<span>(</span>例如，<span>pc-linux-i686</span><span>)</span>。</p>
		<p>除了這些通用軟件包，我們還為各平台提供了具體的二進制安裝軟件包。關於如何安裝的詳細訊息參見<a href="#quick-standard-installation" title="2.2. Standard MySQL Installation Using a Binary Distribution">2.2節，「使用二進制分發版的標準MySQL安裝」</a>。</p>
		<p>您需要下面的工具來安裝<span>MySQL <strong>
		<span>tar</span></strong></span>檔案二進制分發版：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>GNU gunzip</span>解壓縮分發版。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一個適當的<span>tar</span>解包分發版。<span> 
		GNU tar</span>已知可以。一些作業系統中含有預安裝的<strong><span>tar</span></strong>，已知有問題。例如，已知<span>Mac 
		OS X <strong><span>tar</span></strong></span>和<span>Sun
		<strong><span>tar</span></strong></span>對於長檔案名有問題。在<span>Mac 
		OS X</span>中，您可以使用預安裝的<strong><span  style="font-family:
細明體">gnutar</span></strong>程式。在其它系統中若<strong><span  style="font-family:
細明體">tar</span></strong>不完善，您應當首先安裝<span>GNU <strong>
		<span>tar</span></strong></span>。</p>
		<p>如果您遇到問題，在把問題寄到<span>MySQL</span>郵件目錄時，<strong><span>請一定使用</span></strong><span><b><span>mysqlbug</span></b></span>，就算問題不是一個問題，<span><b><span>mysqlbug</span></b></span>也會收集系統訊息，將有助於其它人解決您的問題。不使用<span><b><span>mysqlbug</span></b></span>，您將減少得到您問題的一個解決方案的可能性！在您解包分發版後，您會<tt >在「<span>bin</span>」</tt>目錄下找到<span><b><span>mysqlbug</span></b></span>。請參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>。</p>
		<p>必須執行以便安裝並使用<strong><span style="
">MySQL</span></strong>二進制分發版的基本命令是：</p>
		<p>
		<span  >shell&gt; </span>
		<b><span >groupadd mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >useradd -g mysql mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd /usr/local</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >gunzip &lt; <i>/path/to/mysql-VERSION-OS</i>.tar.gz 
		| tar xvf -</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >ln -s <i>full-path-to-mysql-VERSION-OS</i> 
		mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >cd mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >scripts/mysql_install_db 
		--user=mysql</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chown -R root&nbsp; .</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chown -R mysql data</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >chgrp -R mysql .</span></b></p>
		<p>
		<span  >shell&gt; </span>
		<b><span >bin/mysqld_safe --user=mysql 
		&amp;</span></b></p>
		<p><strong><span>註釋：</span></strong>該過程未設置<span>MySQL</span>帳號的密碼。完成下面的過程後，繼續執行想<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>。</p>
		<p>下面為安裝二進制分發版的更詳細的描述：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>為<strong><span>mysqld</span></strong>增加一個登錄用戶和組：</p>
		<p>
		<span  >2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >groupadd 
		mysql</span></b></p>
		<p>
		<span  >3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >useradd 
		-g mysql mysql</span></b></p>
		<p>這些命令將增加<span>MySQL</span>組和<span>MySQL</span>用戶。不同版本的<span>Unix</span>中，<strong><span>useradd</span></strong>和<strong><span>groupadd</span></strong>的語法可能會稍有不同。還可以稱為<strong><span>adduser</span></strong>和<strong><span>addgroup</span></strong>。</p>
		<p>您可能會將這些用戶和組命名為<span  >mysql</span>之外的名稱。如果是這樣，在下面的步驟中替換為相應的名稱。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>挑選一個您想解開分發包的目錄，進入該目錄。在下面的例子中，我們將分發解包在「<span>/usr/local</span>」下（因此，下列說明假設您有權限在「<span>/usr/local</span>」中建立檔案和目錄，如果該目錄被保護，您需要以<span>root</span>實施安裝）<span>。</span></p>
		<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd /usr/local</span></b></span></pre>
		<p><span>6.<span>&nbsp;&nbsp;&nbsp;
		</span></span>從<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>中列出的站點之一獲得一個分發檔案。對於一個給定的版本，所有平台的二進制分發版均從相同的<span>MySQL</span>原始碼分發版構建。</p>
		<p><span>7.<span>&nbsp;&nbsp;&nbsp;
		</span></span>解包分發版，將建立安裝目錄。然後生成到該目錄的一個符號連結：</p>
		<p>
		<span  >8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >gunzip &lt;
		<i>/path/to/mysql-VERSION-OS</i>.tar.gz | tar xvf -</span></b></p>
		<p>
		<span  >9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >ln -s <i>
		full-path-to-mysql-VERSION-OS</i> mysql</span></b></p>
		<p><strong>
		<span>tar</span></strong>命令建立<span  >mysql-<i>VERSION</i>-<i>OS</i></span>目錄。<span>ln</span>命令生成到該目錄的一個符號連結。這讓您更容易地把安裝目錄指定為<span>/usr/local/mysql</span>。</p>
		<p>使用<span>GNU <strong>
		<span>tar</span></strong></span>，則不再需要<span>gunzip</span>。可以用下面的命令替換第一行來解包和提取分發版：</p>
		<pre ><span >shell&gt; </span><b><span>tar zxvf <i>/path/to/mysql-VERSION-OS</i>.tar.gz</span></b></pre>
		<p><span>10.</span>進入安裝目錄：</p>
		<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; <span><b>cd mysql</b></span></span></pre>
		<p>您會在<span>mysql</span>目錄下發現幾個檔案和子目錄，對安裝目的最重要的是「<span>bin</span>」和「<span>scripts</span>」子目錄。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span>bin</span></p>
		<p>這個目錄包含客戶端程式和伺服器，您應該把這個目錄的完整路徑加到<span>PATH</span>環境變數，以便<span>shell</span>能正確的找到<span>MySQL</span>程式。請參見<a href="environment-variables.html">附錄F：</a><a href="environment-variables.html" title="Appendix F. Environment Variables"><i>環境變數</i></a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>
		<span  >scripts</span></p>
		<p>這個目錄包含<span>mysql_install_db</span>指令，用來初始化<span  >mysql</span>資料庫的
		授權資料表，其中貯存了伺服器訪問允許。</p>
		<p><span>12.</span>如果還沒有安裝<span>MySQL</span>，必須建立<span>MySQL</span>授權資料表：</p>
		<pre><span>13.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>scripts/mysql_install_db --user=mysql</span></b></span></pre>
		<p>如果您用<span>root</span>運行命令，應當使用<span  >--user</span>選項。選項的值應與您在第一步為運行伺服器所建立的登錄帳號相同。如果您用該用戶登錄來運行命令，可以省略<span  >--user</span>選項。</p>
		<p>建立或升級授權資料表後，需要手動重新啟動伺服器。</p>
		<p><span>14.</span>將程式二進制的所有權改為<span><span>root</span><span>，</span></span>數據目錄的所有權改為運行<strong><span>mysqld</span></strong><span>
		</span>的用戶。如果位於安裝目錄<span>(</span><span>/usr/local/mysql</span><span>)</span>下，命令應為：</p>
		<p>
		<span  >15.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chown -R 
		root&nbsp; .</span></b></p>
		<p>
		<span  >16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chown -R 
		mysql data</span></b></p>
		<p>
		<span  >17.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>shell&gt; </span><b><span >chgrp -R 
		mysql .</span></b></p>
		<p>第一個命令將檔案的所有屬性改為<span>root</span>用戶。第二個命令將數據目錄的所有屬性改為<span  >mysql</span>用戶。第三個命令將組屬性改為<span  >mysql</span>組。</p>
		<p><span>18.</span>如果您喜歡在引導機器時自動啟動<span>MySQL</span>，可以拷貝<span>support-files/mysql.server</span>檔案到系統有啟動檔案的地方。更多的訊息可以在<span>support-files/mysql.server</span>指令中和<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>中找到。</p>
		<p><span>19.</span>如果安裝了<span>DBI</span>和<span  >DBD::mysql</span><span>
		</span><span>Perl</span>模塊，可以使用<b><span>bin/mysql_setpermission</span></b>指令增加新帳號。關於說明，參見 
		<a href="#perl-support" title="2.13. Perl Installation Notes">
		2.13節，「Perl安裝注意事項」</a>。</p>
		<p><span>20.</span>如果您想使用<b><span>mysqlaccess</span></b>而在某個非標準的地點有<span>MySQL</span>分發版，您必須改變地點，在那兒<b><span>mysqlaccess</span></b>期望找到<b><span>mysql</span></b>客戶端。編輯「<span>bin/mysqlaccess</span>」指令，大約在第<span>18</span>行，尋找類似下面的行：</p>
		<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp; </span><span>$MYSQL&nbsp;&nbsp;&nbsp;&nbsp; = &#39;/usr/local/bin/mysql&#39;;&nbsp;&nbsp;&nbsp; # path to mysql executable</span></pre>
		<p>改變路徑以反映出<b><span>mysql</span></b>實際儲存在您系統上的地點。如果不這樣做，當運行<b><span>mysqlaccess</span></b>時，您將遇到一個<span>broken 
		pipe</span>的錯誤。</p>
		<p>在所有東西被解包並且安裝以後，您應該初始化並且測試您的分發版。</p>
		<p>可以用下列命令啟動<span>MySQL</span>伺服器：</p>
		<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
		<p>關於<strong><span>mysqld_safe</span></strong>的詳細訊息參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
		<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的帳號開始沒有密碼。啟動伺服器後，應當使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明來設置密碼。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="installing-source"></a>
		2.8.&nbsp;使用原始碼分發版安裝MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#quick-install">
			2.8.1. 原始碼安裝概述</a></span></dt><dt><span class="section">
			<a href="#configure-options">
			2.8.2. 典型配置選項<span><strong class="command"></strong></span></a></span></dt><dt><span class="section">
			<a href="#installing-source-tree">
			2.8.3. 從開發原始碼樹安裝</a></span></dt><dt><span class="section">
			<a href="#compilation-problems">
			2.8.4. 處理MySQL編譯問題</a></span></dt><dt><span class="section">
			<a href="#mit-pthreads">
			2.8.5. MIT-pthreads注意事項</a></span></dt><dt><span class="section">
			<a href="#windows-source-build">2.8.6. 
			在Windows下從原始碼安裝MySQL</a></span></dt><dt><span class="section">
			<a href="#windows-client-compiling">
			2.8.7. 在Windows下編譯MySQL客戶端</a></span></dt></dl></div><a class="indexterm" name="id2714841"></a><a class="indexterm" name="id2714851"></a><a class="indexterm" name="id2714861"></a>
		<p>安裝原始碼之前，首先檢查我們的二進制是否適合您的平台，是否可以工作。我們做了大量的工作確保我們的二進制用最合適的選項來構建。</p>
		<p>要獲得<span>MySQLa </span>原始碼分發版，參見<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>。</p>
		<p><span>MySQL</span>原始碼分發版為<strong><span>tar</span></strong>壓縮檔案，檔案名格式為<span  >mysql-<i>VERSION</i>.tar.gz</span>，其中 
		<i><span  >VERSION</span></i>是版本號，例如<span>5.1.2-alpha</span>。</p>
		<p>您需要下列工具構造並安裝<strong><span>MySQL</span></strong>原始碼：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>GNU gunzip</span>解壓縮該分發版。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一個適當的<span>tar</span>解包分發版。<span>GNU 
		tar</span>已知可以。一些作業系統中含有預安裝的<strong><span>tar</span></strong>，已知有問題。例如，已知<span>Mac 
		OS X <strong><span>tar</span></strong></span>和<span>Sun
		<strong><span>tar</span></strong></span>對於長檔案名有問題。在<span>Mac 
		OS X</span>中，您可以使用預安裝的<strong><span  style="font-family:
細明體">gnutar</span></strong>程式。在其它系統中若<strong><span  style="font-family:
細明體">tar</span></strong>不完善，您應當首先安裝<span>GNU <strong>
		<span>tar</span></strong></span>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>一個能工作的<span>ANSI C++</span>編譯器。<b><span>gcc</span></b><span>&gt; 
		= 2.95.2</span>、<b><span>egcs</span></b><span>&gt; 
		= 1.0.2</span>或<strong><span>egcs 
		2.91.66</span></strong>、<span>SGI C++</span>和<span>SunPro 
		C++</span>是一些已知能工作的編譯器。當使用<b><span>gcc</span></b>時，不需要<span>libg++</span>。<span>gcc2.7.x</span>有一個問題，使得它可能不能編譯一些完全合法的<span>C++</span>檔案，例如「<span>sql/sql_base.cc</span>」。如果您僅有<span>gcc2.7.x</span>，您必須升級<span>gcc</span>才能編譯<span>MySQL</span>。已知<strong><span>gcc</span></strong><span> 
		2.8.1</span>在某些平台上有一些問題，因此如果平台上有新的編譯器，則不要使用<strong><span  style="font-family:
細明體">gcc</span></strong><span> 2.8.1</span>。</p>
		<p>編譯<span>MySQL 3.23.x</span>時，建議使用<strong><span>gcc</span></strong><span> 
		2.95.2</span>或更新版。</p>
		<p>
		<span  >
		·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
		</span><span>一個優秀的</span><b><span>make</span></b><span>程式。總是推薦<span>GNU
		</span></span><b><span>make</span></b><span>且有時必須使用。如果您有問題</span><span>，</span><span>我們推薦試一試<span>GNU</span></span><span>
		<b>make</b></span><span>3.75</span><span>或更新版</span><span>。</span></p>
		<p>如果您使用的<strong><span  style="font-family:
細明體">gcc</span></strong>版本足夠新，可以識別<span>-fno-exceptions</span>選項，則使用該選項<em><span>非常重要</span></em>。否則，您編譯二進制時出現問題。我們建議您同時使用<span>-felide-constructors</span>和<span>-fno-rtti</span>選項。當有疑問時，執行下面操作：</p>
		<pre><span>CFLAGS=&quot;-O3&quot; CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; ./configure \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --enable-assembler \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static</span></pre>
		<p>在大多數系統中，可以得到快速、穩定的二進制。</p>
		<p>如果您遇到問題，在把問題郵寄到<span>MySQL</span>郵件目錄時，<strong><span>請總是使用</span></strong><span><b><span>mysqlbug</span></b></span>，就算問題不是一個問題，<span><b><span>mysqlbug</span></b></span>收集系統訊息，將有助於其它人解決您的問題。不使用<span><b><span>mysqlbug</span></b></span>，您將減少得到問題的解決方案的可能性！在解包分發版後，您會<tt >在「<span>bin</span>」</tt>目錄下找到<span><b><span>mysqlbug</span></b></span>。請參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="quick-install"></a>
			2.8.1.&nbsp;原始碼安裝概述</h3></div></div></div>
			<p>您必須執行的安裝<span>MySQL</span>原始碼分發版的基本命令是：</p>
			<pre><span>shell&gt; </span><span><b><span>groupadd mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>useradd -g mysql mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>gunzip &lt; mysql-<i>VERSION</i>.tar.gz | tar -xvf -</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cd mysql-<i>VERSION</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>./configure --prefix=/usr/local/mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cp support-files/my-medium.cnf /etc/my.cnf</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cd /usr/local/mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chown -R root&nbsp; .</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chown -R mysql var</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>chgrp -R mysql .</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>如果從一個原始碼<span>RPM</span>開始，那麼執行如下命令：</p>
			<pre><span>shell&gt; </span><span><b><span>rpmbuild --rebuild --clean MySQL-<i>VERSION</i>.src.rpm</span></b></span></pre>
			<p>這樣您製作一個可以安裝的二進制<span>RPM</span>。對於舊版本的<span>RPM</span>，您可能需要替換用<strong><span>rpm</span><span>替換</span></strong>命令<strong><span>rpmbuild</span></strong>。</p>
			<p><strong><span>註釋：</span></strong>該過程不為任何<span>MySQL</span>帳號設置密碼。完成下面的過程後，根據<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>進行安裝後的設置和測試。</p>
			<p>以下是安裝<span>MySQL</span>原始碼分發版的更詳細的描述：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span><strong>
			<span>為</span><span>mysqld</span></strong>增加一個登錄用戶和組： 
			</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>groupadd mysql</span></b></span></pre>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>useradd -g mysql mysql</span></b></span></pre>
			<p>這些命令將增加<span>MySQL</span>組和<span> 
			MySQL</span>用戶。不同版本的<span>Unix</span>中，<strong><span>useradd</span></strong><span>
			</span>和<strong><span>groupadd</span></strong>的語法可能會稍有不同。還可以稱為<strong><span>adduser</span></strong>和<strong><span>addgroup</span></strong>。</p>
			<p>您可能會將這些用戶和組命名為<span  >mysql</span>之外的名稱。如果是這樣，在下面的步驟中替換為相應的名稱。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>挑選一個您想解開分發包的目錄，進入該目錄。</p>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從<a href="#getting-mysql" title="2.1.3. How to Get MySQL">2.1.3節，「怎樣獲得MySQL」</a>中列出的站點之一獲得一個分發檔案。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在當前目錄下解包分發版：</p>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>gunzip &lt; <i>/path/to/mysql-VERSION</i>.tar.gz | tar xvf -</span></b></span></pre>
			<p>該命令建立<span>mysql-<i>VERSION</i></span><span>
			</span>目錄。</p>
			<p>使用<span>GNU <strong>
			<span>tar</span></strong></span>，則不再需要<span>gunzip</span>。您可以用下面的命令來解包和提取分發：</p>
			<pre ><span>shell&gt; </span><span><b><span>tar zxvf <i>/path/to/mysql-VERSION-OS</i>.tar.gz</span></b></span></pre>
			<p>
			<span>8.<span>&nbsp;&nbsp;&nbsp;
			</span></span>進入解包分發版的頂級目錄：</p>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; cd&nbsp; mysql-VERSION</span></pre>
			<p>請注意目前必須從頂級目錄配置和構建<span>MySQL</span>。您不能在其它目錄中構建。</p>
			<p>
			<span>10.</span>配置發佈版並且編譯：</p>
			<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./configure --prefix=/usr/local/mysql</span></b></span></pre>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<p>當您運行<b><span>configure</span></b>時，您可能想要指定一些選項，運行<b><span>./configure 
			--help</span></b>得到一個選項列資料表。<a href="#configure-options" title="2.8.2. Typical configure Options">2.8.2節，「典型配置選項<span><strong class="command"></strong></span>」</a>討論一些很有用的選項。</p>
			<p>如果<b><span>configure</span></b>失敗，您將向<span>MySQL</span>郵件目錄發送包含您認為能幫您解決該問題的包含「<span>config.log</span>」中所有行的郵件，也要包括<b><span>configure</span></b>的最後幾行輸出。用<b><span>mysqlbug</span></b>指令郵寄錯誤報告。請參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>。</p>
			<p>如果編譯失敗，參見<a href="#compilation-problems" title="2.8.4. Dealing with Problems Compiling MySQL">2.8.4節，「處理MySQL編譯問題」</a>尋求幫助。</p>
			<p>
			<span>13.</span>安裝分發版：</p>
			<pre><span>14.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<p>如果您想要設置一個選項檔案，使用<span>support-files</span>目錄中的一個作為模板。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>cp support-files/my-medium.cnf /etc/my.cnf</span></b></span></pre>
			<p>可能您需要用<span><span>root</span><span>用戶</span></span>運行這些命令。</p>
			<p>如果想要配置為支援<span>InnoDB</span>資料表，應當編輯<span>/etc/my.cnf</span>檔案，去掉<span>innodb_...</span>開始選項行前面的<span>#</span>符，並將選項值改為您想要的。請參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>和<a href="storage-engines.html#innodb-configuration" title="15.2.3. InnoDB Configuration">15.2.3節，「InnoDB配置」</a>。</p>
			<p>
			<span>15.</span>進入安裝目錄：</p>
			<pre><span>16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd /usr/local/mysql</span></b></span></pre>
			<p>
			<span>17.</span>如果還沒有安裝的<span>MySQL</span>，必須建立<span>MySQL</span>授權資料表：</p>
			<pre><span>18.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<p>如果用<span>root</span>運行命令，應當使用<span  >--user</span>選項。選項的值應與您在第一步為運行伺服器所建立的登錄帳號相同。如果用該用戶登錄來運行命令，可以省略<span  >--user</span>選項。</p>
			<p>用<strong><span>mysql_install_db</span></strong>建立<span>MySQL</span>授權資料表後，需要手動重新啟動伺服器</p>
			<p>
			<span>19.</span>將程式二進制的所有權改為<span><span>root</span><span>，</span></span>數據目錄的所有權改為您運行<strong><span>mysqld</span></strong>的用戶。如果位於安裝目錄<span>(</span><span>/usr/local/mysql</span><span>)</span>下，命令應為：</p>
			<pre><span>20.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>chown -R root&nbsp; .</span></b></span></pre>
			<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>chown -R mysql var</span></b></span></pre>
			<pre><span>22.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>chgrp -R mysql .</span></b></span></pre>
			<p>第一個命令將檔案的所有屬性改為<span>root</span>用戶。第二個命令將數據目錄的所有屬性改為<span  >mysql</span>用戶。第三個命令將組屬性改為<span  >mysql</span>組。</p>
			<p>
			<span>23.</span>如果您喜歡在引導機器時自動啟動<span>MySQL</span>，您可以拷貝<span>support-files/mysql.server</span>檔案到您系統有啟動檔案的地方。更多的訊息可以在<span>support-files/mysql.server</span>指令中和<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>中找到。</p>
			<p>
			<span>24.</span>如果安裝了<span>DBI</span>和<span  >DBD::mysql</span><span>
			</span><span>Perl</span>模塊，可以使用<b><span>bin/mysql_setpermission</span></b>指令增加新帳號。關於說明，參見<a href="#perl-support" title="2.13. Perl Installation Notes">2.13節，「Perl安裝注意事項」</a>。</p>
			<p>在所有東西被安裝以後，您應當使用該命令初始化並且測試您的分發版：</p>
			<pre><span>shell&gt; </span><span><b><span>/usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>如果這個命令提示<span>mysqld daemon ended</span>並馬上失敗，那麼您能在數據目錄中的檔案「<span>hostname&#39;.err</span>」找到一些訊息。</p>
			<p>關於<strong><span>mysqld_safe</span></strong>的詳細訊息參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
			<p><strong><span>註釋：</span></strong><span>MySQL</span>授權資料表中的帳號開始沒有密碼。啟動伺服器後，您應當使用<a href="#post-installation" title="2.9. Post-Installation Setup and Testing">2.9節，「安裝後的設置和測試」</a>中的說明來設置密碼。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-options"></a>
			2.8.2.&nbsp;典型配置選項<span><strong class="command"></strong></span></h3></div></div></div><a class="indexterm" name="id2715852"></a><a class="indexterm" name="id2715862"></a><a class="indexterm" name="id2715871"></a><a class="indexterm" name="id2715880"></a><a class="indexterm" name="id2715891"></a><a class="indexterm" name="id2715898"></a><a class="indexterm" name="id2715905"></a>
			<p><b><span>configure</span></b>指令給您一個很大的控制權來控制如何配置<span>MySQL</span>原始碼分發版。一般使用<b><span>configure</span></b>命令行的選項來進行。您也可以用某些環境變數作用於<b><span>configure</span></b>。請參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。要查看<b><span>configure</span></b>支援的選擇列資料表，可以運行命令：</p>
			<pre><span>shell&gt; </span><span><b><span>./configure --help</span></b></span></pre>
			<ul type="disc">
				<li>如果只編譯<span>MySQL</span>客戶端庫和客戶端程式而不是伺服器，使用<span>--without-server</span>選項：</li>
				<li><span>shell&gt; .<b>/configure 
				--without-server</b></span></li>
			</ul>
			<p>如果您沒有<span>C++</span>編譯器，則不能編譯<b><span>mysql</span></b><span>(</span>有一個客戶端程式需要<span>C++)</span>。在這種情況下，您可以去掉<span>configure</span>裡面測試<span>C++</span>編譯器的代碼，然後運行帶有<span> 
			--without-server</span>選項的<b><span>./configure</span></b>。編譯步驟步將仍然嘗試構造<b><span>mysql</span></b>，但是您可以忽略任何關於「<span>mysql.cc</span>」的警告。（如果<b><span>make</span></b>停止，試試<b><span>make 
			-k</span></b>告訴它即使出錯繼續剩下的構造步驟）。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您想要構建嵌入式<span>MySQL</span>庫<span> 
			(</span><span>libmysqld.a</span><span>),</span>您應當使用<span>--with-embedded-server</span>選項。</p>
			<ul type="disc">
				<li>如果您不想要位於「<span>/usr/local/var</span>」目錄下面的日誌<span>(log)</span>檔案和資料庫，使用類似於下列<span>configure</span>命令的一個： 
				</li>
				<li><span>shell&gt;<b>./configure--prefix=/usr/local/mysql
				</b></span></li>
				<li><span>shell&gt;<b>./configure--prefix=/usr/local
				</b></span><b>– </b></li>
				<li><b><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localstatedir=/usr/local/mysql/data</span></b></li>
			</ul>
			<p>
			第一個命令改變安裝前綴以便將所有內容安裝到「<span>/usr/local/mysql</span>」下面而非
			預設的「<span>/usr/local</span>」。第二個命令保留預設安裝前綴，但是覆蓋了資料庫目錄預設目錄<span>(</span>通常是「<span>/usr/local/var</span>」<span>)</span>並且把它改為<span>/usr/local/mysql/data</span>。編譯完<span>MySQL</span>後，可以通過選項檔案更改這些選項。請參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</p>
			<ul type="disc">
				<li>如果您正在使用<span>Unix</span>並且您想要<span>MySQL</span>的套接字位於
				預設位置以外的某個地方<span>(</span>通常在目錄「<span>/tmp</span>」或「<span>/var/run</span>」，使用像這樣的<b><span>configure</span></b>的命令：</li>
				<li><span>shell&gt;<b> 
				./configure\-- with-unix-socket-</b></span></li>
				<li><b><span>path=/usr/local/mysql/tmp/mysql.sock</span></b></li>
			</ul>
			<p>
			注意給出的檔案名必須是一個絕對路徑。您還可以在以後使用<span>MySQL</span>選項檔案更改<span>mysql.sock</span>的位置。請參見<a href="problems.html#problems-with-mysql-sock" title="A.4.5. How to Protect or Change the MySQL Socket File /tmp/mysql.sock">A.4.5節，「如何保護或更改MySQL套接字檔案/tmp/mysql.sock<code class="filename"></code>」</a>。</p>
			<ul type="disc">
				<li>如果您想編譯靜態連結程式<span>(</span>例如，製作二進制分發版、獲得更快的速度或與解決與<span>RedHat</span>分發版的一些問題<span>)</span>，像這樣運行<b><span>configure</span></b>：</li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><b><span>shell&gt;./configure --with-client-ldflags=-all-static\</span></b></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><b><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--with-mysqld-ldflags=-all-static</span></b></p>
			<ul type="disc">
				<li>如果您正在使用<span>gcc</span>並且沒有安裝<span>libg++</span>或<span>libstdc++</span>，您可以告訴<b><span>configure</span></b>使用<span>gcc</span>作為<span>C++</span>編譯器： 
				</li>
				<li><span>shell&gt; <b>CC=gcc&nbsp; CXX=gcc&nbsp; 
				./configure</b></span></li>
			</ul>
			<p>當您使用<span>gcc</span>作為<span>C++</span>編譯器用時，它將不試圖連結<span>libg++</span>或<span>libstdc++</span>。即使您安裝了這些庫，這樣也很好，因為過去使用<span>MySQL</span>時，它們的部分版本會出現一些奇怪的問題。</p>
			<p>下面列出了一些經常使用的編譯器和環境變數設定值。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>gcc</span></strong><span> 
			2.7.2</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>egcs</span></strong><span> 
			1.0.3a</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-fno-exceptions -fno-rtti&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span><strong><span>gcc</span></strong><span> 
			2.95.2</span>： </p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-felide-constructors -fno-exceptions -fno-rtti&quot;</span></pre>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>pgcc</span><span> 
			2.90.29 </span>或更新版：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double&quot; CXX=gcc \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>CXXFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double \</span></pre>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>-felide-constructors -fno- exceptions -fno-rtti&quot;</span></pre>
			<p>在大多數情況，在<strong><span  style="font-family:
細明體">configure</span></strong>行使用前面列出的選項並加入下面的選項，可以得到合理的最佳化的<span>MySQL</span>二進制：</p>
			<pre ><span>--prefix=/usr/local/mysql --enable-assembler \</span></pre>
			<pre ><span>--with-mysqld-ldflags=-all-static</span></pre>
			<p>換句話說，對於所有最近的<strong><span>gcc</span></strong>版，整個<strong><span>configure</span></strong>行應為：</p>
			<pre ><span>CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \</span></pre>
			<pre ><span>-felide-constructors -fno- exceptions -fno-rtti&quot; ./ configure \</span></pre>
			<pre ><span>--prefix=/usr/local/mysql --enable-assembler \</span></pre>
			<pre ><span>--with-mysqld-ldflags=-all-static</span></pre>
			<p>我們在<span>MySQL</span>網址<span><a target="_top"  href="http://www.mysql.com/">http://www.mysql.com/</a></span>提供的二進制均已經編譯過並進行了最佳化，對於大多數用戶應當比較完善。請參見<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5節，「MySQL AB編譯的MySQL二進製版本」</a>。其中有一些配置設定值，可以選用來構建更快的二進制，但是只適用高級用戶。請參見<a href="optimization.html#compile-and-link-options" title="7.5.4. How Compiling and Linking Affects the Speed of MySQL">7.5.4節，「編譯和連結怎樣影響MySQL的速度」</a>。</p>
			<p>如果構造失敗並且產生有關編譯器或連結器的錯誤，不能建立共享庫「<span>libmysqlclient.so.#</span>」<span>(</span>「<span>#</span>」是一個版本號<span>),
			</span>您可以通過為<b><span>configure</span></b>指定<span>--disable-shared</span>選項來解決此問題。在這種情況下，<b><span>configure</span></b>將不構造一個共享<span>libmysqlclient.so.#</span>庫。</p>
			<ul type="disc">
				<li>預設地，<span>MySQL</span>使用<span>latin1</span><span>(cp1252)</span>字元編碼。為了改變
				預設設置，使用<span>--with-charset</span>選項：</li>
				<li><span>shell&gt; <b>./configure 
				-- with-charset=<i>CHARSET</i></b></span></li>
			</ul>
			<p><i>
			<span>CHARSET</span></i>可以是<span><span>big5</span><span>、<span>cp1251</span>、<span>cp1257</span>、<span>czech</span>、<span>danish</span>、<span>dec8</span>、<span>dos</span>、<span>euc_kr</span>、<span>gb2312</span>、<span>gbk</span>、<span>german1</span>、<span>hebrew</span>、<span>hp8</span>、<span>hungarian</span>、<span>koi8_ru</span>、<span>koi8_ukr</span>、<span>latin1</span>、<span>latin2</span>、<span>sjis</span>、<span>swe7</span>、<span>tis620</span>、<span>ujis</span>、<span>usa7</span></span></span>或<span>win1251ukr</span>。請參見<a href="database-administration.html#character-sets" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1節，「數據和排序用字元編碼」</a>。</p>
			<p>可以指定預設校對規則。<span>MySQL</span>預設使用<span>latin1_swedish_ci</span>校對規則。要想更改，使用<span>--with-collation</span>選項：</p>
			<pre ><span>shell&gt; </span><span><b><span>./configure --with-collation=<i>COLLATION</i></span></b></span></pre>
			<p>要想更改字元編碼和校對規則，要同時使用<span>--with-charset</span>和<span>--with-collation</span>選項。
			校對規則必須是字元編碼的合法校對規則。<span>(</span>使用<span>SHOW 
			COLLATION</span>語句來確定每個字元編碼使用哪個校對規則<span>)</span>。</p>
			<p>如果想在伺服器和客戶端之間變換字元，您應該看一下<span>SET 
			OPTION CHARACTER SET</span>命令。請參見<a href="sql-syntax.html#set-option" title="13.5.3. SET Syntax">13.5.3節，「SET語法」</a>。</p>
			<p><strong>
			<span>警告：</span></strong>如果您在建立了任何資料庫資料表之後改變字元編碼，您將必須對每個資料表運行<strong><span>myisamchk 
			-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span>，否則索引可能不正確地排序。（如果安裝了<span>MySQL</span>，建立一些資料表，然後重新配置<span>MySQL</span>使用一個不同的字元編碼並且重新安裝它，這時就可能發生這種情況。）</p>
			<p>通過<strong><span>configure</span></strong>選項<span>--with-extra-charsets=<i>LIST</i></span>，您可以定義在伺服器中再定義哪些字元編碼。<span><i><span>LIST</span></i></span><span>
			</span>指下面任何一項：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>空格間隔的一系列字元編碼名</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>complex</span><span> 
			-</span>，以包括不能動態裝載的所有字元編碼</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>
			<span>all</span><span>
			</span>–，以將所有字元編碼包括進二進制</p>
			<ul type="disc">
				<li>為了配置<span>MySQL</span>帶有調試代碼，使用<span>--with-debug</span>選項：</li>
				<li><span>shell&gt;<b> ./configure 
				--with-debug</b></span></li>
			</ul>
			<p>
			這導致包含一個安全的內存分配器，能發現一些錯誤和並提供關於正在發生的事情的輸出。請參見<a href="porting.html#debugging-server" title="E.1. Debugging a MySQL Server">E.1節，「調試MySQL伺服器」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果客戶端程式使用線程，還必須使用<span>--enable-thread-safe-client</span>配置選項來編譯線程安全版的<span>MySQL</span>客戶端庫。將建立一個<span>libmysqlclient_r</span>庫，可以用來連接應用程式線程。請參見<a href="apis.html#threaded-clients" title="25.2.15. How to Make a Threaded Client">25.2.15節，「如何生成線程式客戶端」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以使用<span>--with-big-tables</span>選項構建支援大資料庫資料表的<span>MySQL</span>。</p>
			<p>該選項使變數用來將資料表行數保存到<span>unsigned 
			long long</span>中而不是<span>unsigned 
			long</span>。結果是允許資料表有大約<span>1.844E+19 ((2<sup>32</sup>)<sup>2</sup>)</span>行而不是<span>2<sup>32</sup> 
			(~4.295E+09) </span>行。在以前，要完成該功能必須手動將<span>-DBIG_TABLES</span>傳遞給編譯器。</p>
			<span>
			屬於特定系統的選項可在本章特定系統的小節裡找到。請參見</span><a href="#operating-system-specific-notes" title="2.12. Operating System-Specific Notes">2.12節，「具體作業系統相關的注意事項」</a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="installing-source-tree"></a>
			2.8.3.&nbsp;從開發原始碼樹安裝</h3></div></div></div><a class="indexterm" name="id2717054"></a><a class="indexterm" name="id2717061"></a>
			<p><strong><span>注意</span></strong>：如果您想幫助我們測試新代碼，應當閱讀本節。如果您只想在系統上安裝並運行<span>MySQL</span>，應當使用標準發佈分發版<span>(</span>二進制或原始碼分發版<span>)</span>。</p>
			<p>要想獲得我們的最新開發原始碼樹，應使用說明：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>從<span><a  href="http://www.bitmover.com/bk-client.shar下載BitKeeper">http://www.bitmover.com/bk-client.shar<span>下載</span>BitKeeper</a></span>免費客戶端。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>上安裝免費客戶端：</p>
			<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>sh bk-client.shar</span></b></span></pre>
			<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd bk_client-1.1</span></b></span></pre>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make all</span></b></span></pre>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>PATH=$PWD:$PATH</span></b></span></pre>
			<p>在<span>Windows</span>上的安裝方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>從<span><a target="_top"  href="http://cygwin.com/">http://cygwin.com</a></span>下載並安裝<span>Cygwin</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>確保<strong><span>gcc</span></strong>和<strong><span>make</span></strong>已經安裝到<span>Cygwin</span>。可以用<strong><span>which 
			gcc</span></strong>和 <strong><span>
			which make</span></strong>命令進行測試。如果任何一個沒有安裝，運行<span> 
			Cygwin</span>安裝包管理器，選擇<strong><span>gcc</span><span>、<span>make</span></span><span>並</span></strong>安裝。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Cygwin</span>中，運行：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>sh bk-client.shar</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>cd bk_client-1.1</span></b></span></pre>
			<p>然後編輯<span>Makefile</span>並將行<span>s
			</span>
			<span>$(CC) $(CFLAGS) -o sfio 
			-lz sfio.c</span>更改為：</p>
			<pre><span>$(CC) $(CFLAGS) -o sfio sfio.c -lz</span></pre>
			<p>現在運行<strong><span>make</span></strong>命令並設置路徑：</p>
			<pre><span>shell&gt; </span><span><b><span>make all</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>PATH=$PWD:$PATH</span></b></span></pre>
			<p>
			<span>7.<span>&nbsp;&nbsp;&nbsp;
			</span></span>安裝<span>BitKeeper</span>免費客戶端後，首先進入工作目錄，然後使用以下命令在本地複製<span>MySQL 
			5.1</span>：</p>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>sfioball -r+ bk://mysql.bkbits.net/mysql-5.1 mysql-5.1</span></b></span></pre>
			<p>一般情況，您不需要自己構建文檔，因為我們已經在<span><a target="_top"  href="http://dev.mysql.com/doc/">http://dev.mysql.com/doc/</a></span>提供了許多格式。我們每天更新您可以下載的格式<span>(HTML</span>、<span>PDF</span>等<span>)</span>，因此您沒有必要從<span>MySQL</span><span>doc</span>樹中的<span>DocBook 
			XML</span>基本格式來建立。如果您想要複製文檔庫，使用下面的命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>sfioball -r+ bk://mysql.bkbits.net/mysqldoc mysqldoc</span></b></span></pre>
			<p>在前面的例子中，在當前目錄的<span>MySQL</span><span>-5.1/</span>子目錄中設置原始碼樹。</p>
			<p>如果您位於防火牆後面，只能初始化<span>HTTP</span>連接，還可以通過<span>HTTP</span>使用<span>BitKeeper</span>。</p>
			<p>如果需要使用代理伺服器，設置環境變數<span>http_proxy</span>指向代理：</p>
			<pre ><span>shell&gt; </span><span><b><span>export http_proxy=&quot;http://your.proxy.server:8080/&quot;</span></b></span></pre>
			<p>當複製庫時用<span>http://</span>替換<span><span>bk</span><span>：<span>//</span></span></span>。例如：</p>
			<pre ><span>shell&gt; </span><span><b><span>sfioball -r+ http://mysql.bkbits.net/mysql-5.1 mysql-5.1</span></b></span></pre>
			<p>下載原始碼樹可能需要一段時間，取決於連接速度。請耐心等待。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>要想更新本地<span>MySQL 5.1</span>庫複製，使用命令：</p>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>update bk://mysql.bkbits.net/mysql-5.1</span></b></span></pre>
			<p>
			<span>11.</span>您需要<span>GNU <strong>
			<span>make</span></strong></span><strong><span>、<span>autoconf</span></span></strong><span> 
			2.58 (</span>或更新版<span>)</span>、<strong><span>automake</span></strong><span> 
			1.8</span>、<strong><span>libtool</span></strong><span> 
			1.5</span>和<strong><span>m4</span></strong>來運行後面的命令。儘管許多作業系統安裝了<strong><span>make</span></strong>，很可能編譯失敗，出現許多奇怪的問題消息。因此，強烈建議您使用<span>GNU
			<strong><span>make</span></strong>(</span>有時名為<strong><span>gmake</span></strong><span>)</span>。</p>
			<p>幸運的是，大量的作業系統預裝了<span>GNU</span>工具鏈或提供了可安裝軟件包。您可以隨時從下面的地址下載：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/autoconf/">
			http://www.gnu.org/software/autoconf/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/automake/">
			http://www.gnu.org/software/automake/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/libtool/">
			http://www.gnu.org/software/libtool/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/m4/">
			http://www.gnu.org/software/m4/</a> </span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<a target="_top"  href="http://www.gnu.org/software/make/">
			http://www.gnu.org/software/make/</a> </span></p>
			<p>要想配置<span>MySQL 5.1,</span>您還需要<span>GNU
			<strong><span>bison</span></strong> 1.75</span>或更新版。舊版本的<strong><span>bison</span></strong>會報告錯誤：</p>
			<pre ><span>sql_yacc.yy:#####: fatal error: maximum table size (32767) exceeded</span></pre>
			<p>註釋：實際上並沒有超出最大資料表空間；這是由舊版本的<strong><span>bison</span><span style="font-family:
細明體;">的</span></strong>問題造成的該問題。</p>
			<p>下面的例子顯示了配置原始碼樹需要的典型命令。第一個<span>cd</span>命令將位置改為樹的頂級目錄；用相應目錄名替換<span>MySQL</span><span>-5.1</span>。</p>
			<pre ><span>shell&gt; </span><span><b><span>cd mysql-5.1</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>bk -r edit</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>aclocal; autoheader</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>libtoolize --automake --force</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>automake --force --add-missing; autoconf</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd innobase; aclocal; autoheader; autoconf; automake)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd bdb/dist; sh s_all)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>./configure&nbsp; # Add your favorite options here</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<p>對於下面的命令，可以使用<strong><span>BUILD/autorun.sh</span></strong>作為快捷方式：</p>
			<pre ><span>shell&gt; </span><span><b><span>aclocal; autoheader</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>libtoolize --automake --force</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>automake --force --add-missing; autoconf</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd innobase; aclocal; autoheader; autoconf; automake)</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>(cd bdb/dist; sh s_all)</span></b></span></pre>
			<p>使用將目錄改為<span>innobase</span>和<span>bdb/dist</span>目錄的命令行來配置<span>InnoDB</span>和<span> 
			Berkeley DB (</span><span>BDB</span><span>)</span>儲存引擎。如果您不需要<span>InnoDB</span>或<span>BDB</span>支援，您可以省略這些命令行。</p>
			<p>如果在該階段您遇到一些奇怪的錯誤，請確認您是否已經安裝了 <strong>
			<span>libtool</span></strong>。</p>
			<p>標準配置指令位於<span>BUILD/</span>子目錄。您會發現使用<span>BUILD/compile-pentium-debug</span>指令比使用前面的外殼命令要方便得多。要想在不同的架構上編譯，可以修改指令，即去掉<span>Pentium</span>相關標誌。</p>
			<p>
			<span>12.</span>構建完成後，運行<strong><span  style="font-family:
細明體">make install</span></strong>。在產品機器上運行時應注意；該命令會覆蓋您正使用的版本。如果您安裝了另一個<span>MySQL</span>，我們建議您使用 
			與您的產品伺服器上不同的<span>--prefix</span>、<span>--with-tcp-port</span>和<span>--unix-socket-path</span>選項值來運行<strong><span  style="font-family:
細明體">./configure</span></strong>。</p>
			<p>
			<span>13.</span>強制運行新安裝和嘗試會破壞新功能。應先運行<strong><span>make 
			test</span></strong>。請參見<a href="extending-mysql.html#mysql-test-suite" title="27.1.2. MySQL Test Suite">27.1.2節，「MySQL測試套件」</a>。</p>
			<p>
			<span>14.</span>如果您已經進入<strong><span  style="font-family:
細明體">make</span></strong>階段而分發版不編譯，請報告給我們的<span><a target="_top"  href="http://bugs.mysql.com/">http://<span>bug</span>s.mysql.com/</a></span>中的問題資料庫。如果您已經安裝了<span>GNU</span>工具的最新版本，如果視圖處理配置檔案時出錯，請報告給我們。但是，如果您執行<span>aclocal</span>並且遇到<span>command 
			not found</span><span> error</span>或類似問題，不要報告給我們。而是應確保安裝了所有必要的工具，並且<span>PATH</span>變數設置正確，保證外殼命令可以找到它們。</p>
			<p>
			<span>15.</span>複製完庫<span>(</span><span>sfioball</span><span>)</span>獲得原始碼樹後，您應當定期更新庫<span>(</span><span>update</span><span>)</span>。</p>
			<p>
			<span>16.</span>您可以檢查樹的更改史，瀏覽原始碼樹中的<span>BK/</span><span class="MsoHyperlink"><span>
			</span></span>
			<span>ChangeLog</span>檔案並查看<span>ChangeSet</span>描述找到所有不同點。要想檢查特殊的更改集，必須使用<strong><span>sfioball</span></strong>命令提取原始碼樹的兩次不同的修訂，然後使用外部<strong><span>diff</span></strong>命令來比較。如果您看到有疑問的奇怪的不同之處或代碼，一定要向<span>MySQL
			</span>
			<span>internals</span>郵件列資料表發送郵件。請參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The MySQL郵件列資料表」</a>。並且，如果您有更好的思想，請向上述地址發送郵件。</p>
			<p>
			<span>17.BitKeeper</span>免費客戶端預裝了原始碼。免費客戶端可用的唯一文檔是原始碼本身。</p>
			<p>您還可以線上瀏覽更改集、註釋和原始碼。要想瀏覽<span>MySQL 5.1</span>的相關訊息，請到<span><a target="_top"  href="http://mysql.bkbits.net:8080/mysql-5.1">http://mysql.bkbits.net:8080/mysql-5.1</a></span>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="compilation-problems"></a>
			2.8.4.&nbsp;處理MySQL編譯問題</h3></div></div></div><a class="indexterm" name="id2717824"></a><a class="indexterm" name="id2717834"></a><a class="indexterm" name="id2717844"></a><a class="indexterm" name="id2717851"></a><a class="indexterm" name="id2717860"></a>
			<p>所有<span>MySQL</span>程式在<span>Solaris</span>或<span>Linux</span>上使用<b><span>gcc</span></b>編譯並且沒有任何警告。在其它系統上，由於系統包含檔案的差別可能會發生警告。對於使用<span>MIT-pthreads</span>時發生的警告。請參見<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5節，「MIT-pthreads注意事項」</a>。其它問題，檢查下面的資料表。</p>
			<p>許多問題的解決方案涉及重新配置。如果您確實需要重新配置，注意下列事項：</p>
			<ul type="disc">
				<li>如果<b><span>configure</span></b>在它已經被運行了以後運行，它可以使用先前收集的訊息。這個訊息儲存在「<span>config.cache</span>」裡面。當<b><span>configure</span></b>啟動時，它尋找該檔案而且如果它存在，假定訊息仍然是正確的，讀入它的內容。當您重新配置時，該假設無效。</li>
				<li>每次運行<b><span>configure</span></b>的時候，必須運行<b><span>make</span></b>再重新編譯。然而<span>,
				</span>您可能想要把先前構造的老的目標檔案刪除，因為它們使用不同的配置選項編譯而成。</li>
			</ul>
			<p>為了防止使用舊的配置訊息或目標檔案，重新運行<b><span>configure</span></b>前運行這些命令：</p>
			<p><span>shell&gt; <b>rm&nbsp; config.cache</b></span></p>
			<p><span>shell&gt; <b>make clean</b></span></p>
			<p>另外，您可以運行<b><span>make distclean</span></b>。</p>
			<p>下資料表描述了一些最常發生的編譯<span>MySQL</span>的問題：</p>
			<ul type="disc">
				<li>如果在編譯「<span>sql_yacc.cc</span>」時，遇到如下錯誤，可能是儲存器或交換空間溢出：</li>
			</ul>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Internal compiler error: program cc1plus got fatal signal 11</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Out of virtual memory</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Virtual memory exhausted</span></pre>
			<p>該問題是<span>gcc</span>要求大量的內存編譯帶有嵌入函數<span>(inline 
			function)</span>的「<span>sql_yacc.cc</span>」。試試以<span>--with-low-memory</span>選項運行<b><span>configure</span></b>：</p>
			<p><span>
			shell&gt; <b>./configure -- with-low-memory</b></span></p>
			<p>如果您正在使用<b><span>gcc</span></b>，該選項使得將<span>-fno-inline</span>加到編譯行，如果您正使用其它的編譯器，則加入<span>-O0</span>。您應該試一試<span>--with-low-memory</span>選項，即使您有特別多的儲存器和交換空間，而您認為不可能運行得溢出。這個問題甚至會在很慷慨的硬件配置的系統上出現，通常用<span>--with-low-memory</span>選項修正它。</p>
			<ul type="disc">
				<li>預設情況，<b><span>configure</span></b>選則<b><span>c++</span></b>作為編譯器並用<span>-lg++</span>選項的<span>GNU
				<b>c++</b></span>連結。如果您正在使用<b><span>gcc</span></b>，這個特性在配置期間導致如下問題：<span>
				</span></li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>configure: error: installation or 
			configuration problem:</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>C++ compiler cannot create 
			executables.</span></p>
			<p>也可能在編譯期間看到<b><span>g++</span></b>、<span>libg++</span>或<span>libstdc++</span>相關的問題。</p>
			<p>這些問題的一個原因是您可能沒有<b><span>g++</span></b>，或可能有<b><span>g++</span></b>但無<span>libg++</span>或<span>libstdc++</span>。看一下「<span>config.log</span>」檔案。它應該包含<span>c++</span>編譯器不能工作的準確原因！為了解決這些問題，可以使用<span>gcc</span>作為<span>C++</span>編譯器。試試設置環境變數<span>CXX</span>為<span>&quot;gcc 
			-O3&quot;</span>。例如：</p>
			<p><span>
			shell&gt; <b>CXX=&quot;gcc -O3&quot; ./configure</b></span></p>
			<p>可以工作，因為<b><span>gcc</span></b>象<b><span>g++</span></b>一樣編譯<span>C++</span>原始碼，但
			預設地它不連結<span>libg++</span>或<span>libstdc++</span>。</p>
			<p>解決這些問題的其它方法當然是安裝<b><span>g++</span></b>、<span>libg++</span>和<span>libstdc++</span>。然而，我們建議不要在<span>MySQL</span>中使用<span>libg++</span>或<span><span>libstdc++</span><span>，</span></span>因為只會增加<strong><span>mysqld</span></strong>二進制空間而不會帶來任何好處。部分版本的庫在過去曾經給用戶帶來一些奇怪的問題。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您的編譯以下面任何錯誤而失敗，必須升級<b><span>make</span></b>版本到<b><span>GNUmake</span></b>：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>making all in mit-pthreads</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>make: Fatal error in reader: Makefile, line 18:</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Badly formed macro assignment</span></pre>
			<p>或：</p>
			<pre ><span>make: file `Makefile&#39; line 18: Must be a separator (:</span></pre>
			<p>或：</p>
			<pre ><span>pthread.h: No such file or directory</span></pre>
			<p>已知<span>Solaris</span>和<span>FreeBSD</span>的<span>make</span>程式有問題。</p>
			<p>已知<span>GNU make 3.75</span>能工作。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您想要定義<span>C</span>或<span>C++</span>編譯器所使用的標誌，把標誌加到<span>CFLAGS</span>和<span>CXXFLAGS</span>環境變數中即可。也可以使用<span>CC</span>和<span>CXX</span>來指定編譯器名字。例如：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CC=gcc</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CFLAGS=-O3</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CXX=gcc</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>CXXFLAGS=-O3</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>export CC CFLAGS CXX CXXFLAGS</span></b></span></pre>
			<p>對於已經知道在不同系統上有用的標誌定義列資料表，參見<a href="#mysql-binaries" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5節，「MySQL AB編譯的MySQL二進製版本」</a>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您遇到象如下的一條錯誤消息，則需要升級<b><span>gcc</span></b>編譯器：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>client/libmysql.c:273: parse error before `__attribute__&#39;</span></pre>
			<p><b><span>gcc</span></b><span>2.8.1</span>已知可以工作，但是我們推薦使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>或<strong><span>egcs</span></strong><span> 
			1.0.3a</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果編譯<b><span>mysqld</span></b>時顯示範如下面的那些錯誤<span>,<b>
			</b></span><b><span>configure</span></b>沒有正確地檢測傳到<span>accept()</span>、<span>getsockname()</span>或<span>getpeername()</span>最後參數的類型：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>cxx: Error: mysqld.cc, line 645: In this statement, the referenced</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type of the pointer value &#39;&#39;length&#39;&#39; is &#39;&#39;unsigned long&#39;&#39;,</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which is not compatible with &#39;&#39;int&#39;&#39;.</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>new_sock = accept(sock, (struct sockaddr *)&amp;cAddr, &amp;length);</span></pre>
			<p>為了修正它，編輯「<span>config.h</span>」檔案<span>(</span>它由<span>configure</span>生成<span>)</span>。尋找這些行：</p>
			<pre ><span>/* Define as the base type of the last arg to accept */</span></pre>
			<pre ><span>#define SOCKET_SIZE_TYPE XXX</span></pre>
			<ul type="disc">
				<li>更改<span>XXX</span>為<span>size_t</span>或<span>int</span>，取決於您的作業系統。（注意：每次運行<b><span>configure</span></b>都必須這樣做，因為<b><span>configure</span></b>重新生成「<span>config.h</span>」）<span>。</span></li>
				<li>「<span>sql_yacc.cc</span>」檔案由「<span>sql_yacc.yy</span>」生成。通常構造過程不需要創造「<span>sql_yacc.cc</span>」，因為<span>MySQL</span>有一個已經生成的拷貝，然而，如果您確實需要再建立它，可能會碰到這個錯誤：<span>
				</span></li>
			</ul>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>&quot;sql_yacc.yy&quot;, line xxx fatal: 
			default action causes potential...</span></p>
			<p>這是一個<b><span>yacc</span></b>版本不完善的跡象。您可能需要安裝<b><span>bison</span></b>（<span>GNU</span>的<b><span>yacc</span></b><span>)</span>並使用它。<span>
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Debian Linux 3.0</span>上<span>,
			</span>如果您編譯的<span>MySQL 5.1</span>要支援<span>Berkeley 
			DB</span>，需要安裝<span>gawk</span>代替預設的<span>mawk</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您需要調試<span>mysqld</span>或<span>MySQL</span>客戶端，運行<b><span>configure</span></b>，使用<span>--with-debug</span>選項，然後重新編譯並且將客戶端程式連結到新的客戶端庫。請參見<a href="porting.html#debugging-client" title="E.2. Debugging a MySQL Client">E.2節，「調試MySQL客戶端」</a>。</p>
			<p>
			<span  >
			·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>如果您在<span>Linux(</span>例如，</span><span>SuSE 
			Linux 8.1</span>或<span>Red Hat Linux 7.3</span><span >)</span><span>下遇到類似下面的編譯錯誤：</span></p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: warning: passing arg 5 of `gethostbyname_r&#39; from</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>incompatible pointer type</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: too few arguments to function `gethostbyname_r&#39;</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>libmysql.c:1329: warning: assignment makes pointer from integer</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>without a cast</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>make[2]: *** [libmysql.lo] Error 1</span></pre>
			<p>預設情況，<strong><span  style="font-family:
細明體">configure</span></strong>指令試圖使用<strong><span  style="font-family:
細明體">g++</span></strong><span> GNU C++</span>編譯器來確定正確的參數。如果未安裝<strong><span>g++</span><span>，</span></strong>將會產生錯誤的結果。有兩種方法可以解決該問題：</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>確保安裝了<span>GNU C++ <strong>
			<span>g++</span></strong></span>。在某些<span>Linux</span>分發版上，需要安裝的軟件包叫做<span>gpp</span>；在其它分發版上名為<strong><span>gcc-c++</span></strong>。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>使用<strong><span>gcc</span></strong>作為<span>C++
			</span>編譯器，將<span>CXX</span>環境變數設置為<strong><span  style="font-family:
細明體">gcc</span></strong>：</p>
			<pre><span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>export CXX=&quot;gcc&quot;</span></pre>
			<p>請注意之後需要再次運行<strong><span  style="font-family:
細明體">configure</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mit-pthreads"></a>
			2.8.5.&nbsp;MIT-pthreads注意事項</h3></div></div></div><a class="indexterm" name="id2718879"></a><a class="indexterm" name="id2718886"></a>
			<p>這節描述使用<span>MIT-pthreads</span>時所涉及的一些問題。</p>
			<p>在<span>Linux</span>上，應該不使用<span>MIT-pthreads</span>而是安裝<span>LinuxThreads</span>！參見<a href="#linux" title="2.12.1. Linux Notes">2.12.1節，「Linux注意事項」</a>。</p>
			<p>如果您的系統不提供原生的線程支援，將需要使用<span>MIT-pthreads</span>包構造<strong><span style="font-family:
細明體;">MySQL</span></strong>。這包括大多數<span>FreeBSD</span>系統、<span>SunOS 
			4.x</span>、<span>Solaris 2.4</span>和更早版本及其它，參見<a href="#which-os" title="2.1.1. Operating Systems Supported by MySQL">2.1.1節，「MySQL支援的作業系統」</a>。</p>
			<p><span>MIT-pthreads</span>不是<span>MySQL 5.1</span>原始碼分發版的一部分。如果您需要該安裝包，需要單獨從<span><a target="_top"  href="http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz">http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz</a></span>下載。</p>
			<p>下載後，將源檔案提取到<span>MySQL</span>原始碼目錄的頂級目錄。將建立新的<span>mit-pthreads</span>子目錄。</p>
			<ul type="disc">
				<li>在大多數系統上，您能通過使用<b><span>configure</span></b>並用<span>--with-mit-threads</span>選項來強迫運行<span>MIT-pthreads</span>：</li>
				<li><span>shell&gt; .<b>/configure 
				-- with-mit-threads</b></span></li>
			</ul>
			<p>當使用<span>MIT-pthreads</span>時，不支援在一個非原始碼目錄構造，因為我們想要使我們對代碼的改變減到最小。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>決定是否使用<span>MIT-pthreads</span>的檢查僅在處理伺服器代碼的配置過程期間發生。如果已經用<span>--without-server</span>配置了分發版並只構造客戶端代碼，客戶端將不知道<span>MIT-pthreads</span>是否正在被使用並且是否使用
			預設的<span>Unix</span>套接字連接。因為在某些平台上<span>Unix</span>套接字檔案不能在<span>MIT-pthreads</span>下面工作，這意味著當您運行客戶端程式時，您需要使用<span>-h</span>或<span>--host</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>當使用<span>MIT-pthreads</span>編譯<span>MySQL</span>時，因為性能原因，系統鎖定
			預設為禁止使用。您可以用<span>--external-locking</span>選項告訴伺服器使用系統鎖定。只是在相同數據檔案上運行兩個<span>MySQL</span>伺服器時采需要，因此不推薦。</p>
			<ul type="disc">
				<li>有時<span>pthreadbind()</span>命令不能綁定一個套接字但沒有任何錯誤消息<span>(</span>至少在<span>Solaris</span>上<span>)</span>，結果是所有到伺服器的連接均失敗。例如：</li>
				<li><span>shell&gt; <b>mysqladmin 
				version</b></span></li>
				<li><span>mysqladmin: connect to 
				server at &#39;&#39; failed;</span></li>
				<li><span>error: &#39;Can&#39;t connect 
				to mysql server on localhost (146)&#39;</span></li>
			</ul>
			<p>解決它的方法是殺死<b><span>mysqld</span></b>伺服器並且重啟它。這只有當我們強迫伺服器停止並馬上進行重啟時在發生。</p>
			<ul type="disc">
				<li>使用<span>MIT-pthreads</span>，不能用<span>SIGINT</span>（<span>break)</span>中斷<span>sleep()</span>系統使用。這只有在運行<b><span>mysqladmin 
				--sleep</span></b>時才能注意到。在中斷起作用並且程序停止之前必須等待<span>sleep()</span>終止。<span>
				</span></li>
				<li>當連結時，您可能會收到這樣的警告消息<span>(</span>至少在<span>Solaris</span>上<span>)</span>；它們可以被忽視：</li>
				<li><span>ld: warning: symbol `_iob&#39; 
				has differing sizes:</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; (file /my/local/pthreads/lib/libpthread.a(findfp.o) 
				value=0x4;</span></li>
				<li><span>file /usr/lib/libc.so 
				value=0x140);</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; /my/local/pthreads/lib/libpthread.a(findfp.o) 
				definition taken</span></li>
				<li><span>ld: warning: symbol `__iob&#39; 
				has differing sizes:</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; (file /my/local/pthreads/lib/libpthread.a(findfp.o) 
				value=0x4;</span></li>
				<li><span>file /usr/lib/libc.so 
				value=0x140);</span></li>
				<li><span>&nbsp;&nbsp;&nbsp; /my/local/pthreads/lib/libpthread.a(findfp.o) 
				definition taken</span></li>
			</ul>
			<p><span>
			&nbsp;</span></p>
			<ul type="disc">
				<li>一些其它的警告也可被忽略：</li>
				<li><span>implicit declaration of 
				function `int strtoll(...)&#39;</span></li>
				<li><span>implicit declaration of 
				function `int strtoul(...)&#39;</span></li>
				<li>我們還沒有讓<span>readline</span>在<span>MIT-pthreads</span>上工作。（這不需要，但是可能某些人會感興趣。）</li>
			</ul>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-source-build"></a>2.8.6. 在Windows下從原始碼安裝MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#windows-vc-plus-plus-build">
			2.8.6.1. 使用VC++構建MySQL</a></span></dt><dt><span class="section">
			<a href="#windows-bitkeeper-build">
			2.8.6.2. 從最新的開發原始碼建立Windows原始碼安裝包</a></span></dt></dl></div>
			<p>下面的說明描述了如何在<span>Windows</span>下從<span>5.1</span>版原始碼構建<span>MySQL</span>二進制。說明用於從包含最新開發原始碼的標準原始碼分發版或從<span>BitKeeper</span>樹來構建二進制。</p>
			<p><strong><span>註釋：</span></strong>本文檔中的說明嚴格限於在<span>Windows</span>下從最新原始碼分發版或從<span>BitKeeper</span>樹來測試<span>MySQL</span>的用戶。作為產品使用時，<span>MySQL 
			AB</span>不建議使用您自己從原始碼構建的<span>MySQL</span>伺服器。一般情況，最好使用<span>MySQL 
			AB</span>預編譯的對性能進行最佳化的適用<span>Windows</span>的<span>MySQL</span>二進制分發版。安裝二進制分發版的說明參見<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。</p>
			<p>要想在<span>Windows</span>中從原始碼構建<span>MySQL</span>，<span>Windows</span>系統中應有下面的編譯器和資源：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Visual Studio 2003</span>編譯器系統<span>(VC++ 
			7.0)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>3</span>到<span>5GB</span>的硬盤空間。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows 2000</span>或更高版本。</p>
			<p>確切的系統需求見：<span><a target="_top"  href="http://msdn.microsoft.com/vstudio/productinfo/sysreqs/default.aspx">http://msdn.microsoft.com/vstudio/productinfo/sysreqs/default.aspx</a></span></p>
			<p>還需要適用<span>Windows</span>的<span>MySQL</span>原始碼分發版。有兩種方法可以獲得<span>MySQL 
			5.1 </span>原始碼分發版：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>獲得<span>MySQL AB</span>打包的原始碼分發版軟件包。預打包的原始碼分發版可從 
			<span>
			<a target="_top"  href="http://dev.mysql.com/downloads/">
			http://dev.mysql.com/downloads/</a></span>獲得。</p>
			<p>
			<span>2.<span>&nbsp;&nbsp;&nbsp;
			</span></span>您可以用最新<span>BitKeeper</span>開發原始碼樹構建原始碼分發版。如果您計劃構建，必須在<span>Unix</span>系統中建立安裝軟件包，並將它轉移到<span>Windows</span>系統。<span>(</span>這樣操作的理由是部分配置和構建步驟需要只能在<span>Unix</span>中工作的工具）<span>。BitKeeper</span>方法需要：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>運行<span>Unix</span>或類似<span>Unix</span>的系統，例如<span>Linux</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>該系統上安裝的<span>BitKeeper 3.0</span>。關於如何下載和安裝<span>BitKeeper</span>的說明參見<a href="#installing-source-tree" title="2.8.3. Installing from the Development Source Tree">2.8.3節，「從開發原始碼樹安裝」</a>。</p>
			<p>如果您使用<span>Windows</span>原始碼分發版，您可以直接跳到<a href="#windows-vc-plus-plus-build" title="2.8.6.1. Building MySQL Using VC++">2.8.6.1節，「使用VC++構建MySQL」</a>。要想從<span>BitKeeper</span>樹構建，繼續<a href="#windows-bitkeeper-build" title="2.8.6.2. Creating a Windows Source Package from the Latest Development Source">2.8.6.2節，「從最新的開發原始碼建立Windows原始碼安裝包」</a>。</p>
			<p>如果您發現某些組件不能按預料的工作，或者您有好的建議可以改進目前的在<span>Windows</span>中的構建過程，請向<span>win32</span>郵件列資料表發送消息。請參見<a href="introduction.html#mailing-list" title="1.7.1.1. The MySQL Mailing Lists">1.7.1.1節，「The MySQL郵件列資料表」</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="windows-vc-plus-plus-build"></a>
				2.8.6.1.&nbsp;使用VC++構建MySQL</h4></div></div></div>
				<p><strong><span>註釋：</span></strong><span>MySQL 
				4.1</span>和以上版本的<span>VC++</span>工作區檔案與<span>Microsoft 
				Visual Studio 2003</span>版本兼容，<span>MySQL AB</span>人員已經在每個版本之前進行了測試。</p>
				<p>按照以下步驟構建<span>MySQL</span>：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>建立工作目錄<span>(</span>例如，<span><span>C</span><span>：<span>\</span></span></span><span class="MsoHyperlink"><span>
				</span></span>
				<span>workdir</span><span>)</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用<strong><span>WinZip</span></strong>或其它可以讀取<span>.zip</span>檔案的<span>Windows</span>工具將原始碼分發版解壓縮到上述目錄。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>啟動<span>Visual Studio</span>。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>從<span class="guimenu"><span>File</span></span>菜單，選擇<span class="guimenuitem"><span>Open 
				Workspace</span></span>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>打開工作目錄中的<span>MySQL</span><span>.dsw</span>工作區。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>從<span class="guimenu"><span>Build</span></span><span>
				</span>菜單，選擇<span class="guisubmenu"><span>Set Active 
				Configuration</span></span>菜單。</p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>點擊窗口選擇<span class="guimenuitem"><span>mysqld 
				- Win32 Debug</span></span>並點擊<span class="guibutton"><span>OK</span></span>。</p>
				<p>
				<span>8.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按<strong><span>F7</span></strong>開始構建調試伺服器、庫和客戶端應用程式。</p>
				<p>
				<span>9.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按同樣方法編譯發佈版本。</p>
				<p>
				<span>10.</span>程式和庫的調試版本位於<span>client_debug</span>和<span>lib_debug</span>目錄。程式和庫的發佈版本位於<span>client_release</span>和<span>lib_release</span>目錄。請注意如果您想要構建調試版本和發佈版本，可以從<span class="guimenu"><span>Build</span></span>菜單選擇<span class="guimenuitem"><span>Build 
				All</span></span>選項。</p>
				<p>
				<span>11.</span>測試伺服器。使用前面的說明構建伺服器時，預設<span>MySQL</span>基本目錄和數據目錄位於<span>C:\mysql</span>和<span>C:\mysql\data</span>。如果您想要使用原始碼樹根目錄和數據目錄作為基本目錄和數據目錄來測試伺服器，需要告訴伺服器其路徑名。可以在命令行用<span>--basedir</span>和<span>--datadir</span>選項來完成，或將相應選項放入選項檔案<span>(</span>在<span>Windows</span>目錄或<span><span>C</span><span>：<span>\my.cnf</span></span></span>中的<span>my.ini</span>檔案<span>)</span>。如果想要使用的數據目錄在其它地方，可以指定其路徑名。</p>
				<p>
				<span>12.</span>根據您想要使用的伺服器，從<span>client_release</span>或<span>client_debug</span>目錄啟動伺服器。常用伺服器啟動說明見<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。如果想要使用其它基本目錄或數據目錄，需要相應地更改指令。</p>
				<p>
				<span>13.</span>當伺服器根據您的配置獨立運行或作為服務時，嘗試從<span>client_release</span>或<span>client_debug</span>目錄中的<span>MySQL</span>交互式命令行實用工具連接它。</p>
				<p>如果構建的程式工作正常，停止伺服器。按照以下步驟安裝<span>MySQL</span>：</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>建立安裝<span>MySQL</span>的目錄。例如，要安裝到<span><span>C</span><span>：<span>\mysql</span></span></span>，使用命令：</p>
				<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql</span></b></span></pre>
				<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\bin</span></b></span></pre>
				<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\data</span></b></span></pre>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>mkdir C:\mysql\share</span></b></span></pre>
				<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C:\&gt; </span><span><b><span>mkdir C:\mysql\scripts</span></b></span></pre>
				<p>如果想要編譯其它客戶端程式並連接到<span>MySQL</span>，您還需要建立幾個目錄：</p>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\include</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib\debug</span></span></b></span></pre>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\lib\opt</span></span></b></span></pre>
				<p>如果想要對<span>MySQL</span>進行基準檢查，建立目錄：</p>
				<pre ><span>C</span>：<span>\&gt; </span><span><b><span>mkdir C</span><span>：<span>\mysql\sql-bench</span></span></b></span></pre>
				<p>基準檢查需要<span>Perl</span>支援。請參見<a href="#perl-support" title="2.13. Perl Installation Notes">2.13節，「Perl安裝注意事項」</a>。</p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>將下面的目錄從<span>workdir</span>目錄複製到<span><span>C</span><span>：<span>\mysql</span></span></span>目錄：</p>
				<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\&gt; </span><span><b><span>cd \workdir</span></b></span></pre>
				<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>copy client_release\*.exe C:\mysql\bin</span></b></span></pre>
				<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>copy client_debug\mysqld.exe C:\mysql\bin\mysqld-debug.exe</span></b></span></pre>
				<pre><span>11.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>C:\workdir&gt; </span><span><b><span>xcopy scripts\*.* C:\mysql\scripts /E</span></b></span></pre>
				<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C:\workdir&gt; </span><span><b><span>xcopy share\*.* C:\mysql\share /E</span></b></span></pre>
				<p>如果想要編譯其它客戶端程式並連接到<span>MySQL</span>，還應當複製幾個庫和頭檔案：</p>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\mysqlclient.lib C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\libmysql.* C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_debug\zlib.* C:\mysql\lib\debug</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\mysqlclient.lib C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\libmysql.* C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy lib_release\zlib.* C:\mysql\lib\opt</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy include\*.h C:\mysql\include</span></b></span></pre>
				<pre ><span>C:\workdir&gt; </span><span><b><span>copy libmysql\libmysql.def C:\mysql\include</span></b></span></pre>
				<p>如果您想要對<span>MySQL</span>進行基準測試，您還應當：</p>
				<pre ><span>C:\workdir&gt; </span><span><b><span>xcopy sql-bench\*.* C:\mysql\bench /E</span></b></span></pre>
				<p>按照二進制<span>Windows</span>分發版相同的方法設置並啟動伺服器。請參見<a href="#windows-installation" title="2.3. Installing MySQL on Windows">2.3節，「在Windows上安裝MySQL」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="windows-bitkeeper-build"></a>
				2.8.6.2.&nbsp;從最新的開發原始碼建立Windows原始碼安裝包</h4></div></div></div>
				<p>要想從當前的<span>BitKeeper</span>原始碼樹建立<span>Windows</span>原始碼安裝包，使用下面的說明。請注意必須在運行<span>Unix</span>或類<span>Unix</span>作業系統的系統上執行該過程。例如，已知該過程在<span>Linux</span>上工作得很好。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>複製<span>MySQL 5.1</span>的<span>BitKeeper</span>原始碼樹。關於如何複製原始碼樹的詳細訊息，相關說明參見<a href="#installing-source-tree" title="2.8.3. Installing from the Development Source Tree">2.8.3節，「從開發原始碼樹安裝」</a>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>配置和構建分發版，得到可工作的伺服器二進制。實現的一個方法是在原始碼樹頂級目錄運行下面的命令：</p>
				<pre><span>3.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./BUILD/compile-pentium-max</span></b></span></pre>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>確保構建過程成功完成後，從原始碼樹頂級目錄運行下面的實用工具指令：</p>
				<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>./scripts/make_win_src_distribution</span></b></span></pre>
				<p>該指令建立在<span>Windows
				</span>系統中使用的原始碼安裝包。可以根據您的需求為指令提供不同的選項。它接受下面的選項：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--help</span></p>
				<p>顯示幫助消息。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--debug</span></p>
				<p>打印關於指令操作的訊息，不建立包。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--tmp</span></p>
				<p>指定臨時位置。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--suffix</span></p>
				<p>安裝軟件包後綴名。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--dirname</span></p>
				<p>複製檔案的目錄名<span>(</span>媒介之間<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--silent</span></p>
				<p>不打印正處理檔案的詳細列資料表。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>--tar</span></p>
				<p>建立<span>tar.gz</span>安裝軟件包而不是<span>.zip</span>安裝軟件包。</p>
				<p>預設情況，<strong><span  style="font-family:
細明體">make_win_src_distribution</span></strong>建立<span>Zip-</span>格式的檔案，檔案名為<span>mysql-<i>VERSION</i>-win-src.zip</span>，其中<span><i><span>VERSION</span></i></span>代資料表<span>MySQL</span>原始碼樹的版本。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>將建立的<span>Windows</span>原始碼安裝包複製或上載到<span>Windows</span>機器上。要想編譯，使用<a href="#windows-vc-plus-plus-build" title="2.8.6.1. Building MySQL Using VC++">2.8.6.1節，「使用VC++構建MySQL」</a>中的說明。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-client-compiling"></a>
			2.8.7.&nbsp;在Windows下編譯MySQL客戶端</h3></div></div></div><a class="indexterm" name="id2720028"></a><a class="indexterm" name="id2720038"></a>
			<p>在原始碼檔案中，應當在<span>MySQL</span><span>.h</span>之前包括<span>my_global.h</span>：</p>
			<pre><span>#include &lt;my_global.h&gt;</span></pre>
			<pre><span>#include &lt;mysql.h&gt;</span></pre>
			<p>
			<span>my_global.h</span>包括您在<span>Windows</span>中編譯程式所需要的<span>Windows</span>兼容檔案<span>(</span>例如 
			<span>windows.h</span><span>)</span>。</p>
			<p>可以將代碼連接到動態<span>libmysql.lib</span>庫，它只是一個包裝器以便根據需要裝載<span>libmysql.dll</span>，或連接靜態<span>mysqlclient.lib</span>庫。</p>
			<p><span>MySQL</span>客戶端庫編譯為線程庫，因此您應當將代碼編譯為多線程。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="post-installation"></a>
		2.9.&nbsp;安裝後的設置和測試</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#windows-post-installation">
			2.9.1. Windows下安裝後的過程</a></span></dt><dt><span class="section">
			<a href="#unix-post-installation">
			2.9.2. Unix下安裝後的過程</a></span></dt><dt><span class="section">
			<a href="#default-privileges">
			2.9.3. 使初始MySQL帳號安全</a></span></dt></dl></div><a class="indexterm" name="id2720113"></a><a class="indexterm" name="id2720124"></a><a class="indexterm" name="id2720134"></a>
		<p>安裝完<span>MySQL</span>後，有一些問題您應當處理。例如，在<span>Unix</span>中，您應當初始化數據目錄並建立<span>MySQL</span>授權資料表。對於所有平台，一個重要安全問題是
		授權資料表中的初始帳號沒有密碼。您應當指定密碼以防止未授權訪問<span>MySQL</span>伺服器。您可以建立時區資料表以識別命名的時區。<span>(</span>目前，只在<span>Unix</span>上裝了這些資料表。不久將在<span>Windows</span>中解決該問題）<span>。</span></p>
		<p>下面章節包括適用<span>Windows</span>系統和<span>Unix</span>系統的安裝後的過程。另一節，<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3節，「啟動MySQL伺服器以及其故障診斷和排除」</a>，適用所有平台；它描述了啟動伺服器時遇到問題時如何解決。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>也適用所有平台。您應當按照說明確保您已經正確地為您的<span>MySQL</span>帳號指定密碼來保護其安全。</p>
		<p>如果您準備建立其它用戶帳號，您可以在<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7節，「MySQL訪問權限系統」</a>和<a href="database-administration.html#user-account-management" title="5.8. MySQL User Account Management">5.8節，「MySQL用戶帳號管理」</a>找到關於<span>MySQL</span>訪問控制系統和帳號管理的訊息。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="windows-post-installation"></a>
			2.9.1.&nbsp;Windows下安裝後的過程</h3></div></div></div>
			<p>在<span>Windows</span>中，不需要建立數據目錄和授權資料表。<span>MySQL 
			Windows</span>分發版包括在數據目錄下的<span>MySQL</span>資料庫中的一套預初始化的帳號的
			授權資料表。不要運行<span>Unix</span>中使用的<strong><span>mysql_install_db</span></strong>指令。但是，如果您沒有使用<span>Windows 
			Installation Wizard</span>（安裝幫助）來安裝<span>MySQL</span>，應當為帳號指定密碼。請參見<a href="#mysql-install-wizard-introduction" title="2.3.4.1. Introduction">2.3.4.1節，「前言」</a>。在<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>。</p>
			<p>設置密碼前，您可能想要運行一些客戶端程式來確保您能夠連接伺服器，並且操作正確。確保伺服器在運行<span>(</span>參見<a href="#windows-server-first-start" title="2.3.10. Starting the Server for the First Time">2.3.10節，「首次啟動伺服器」</a><span>)</span>，然後發出下面的命令來驗證您可以從伺服器獲取訊息。輸出應當類似於：</p>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqlshow</span></b></span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| Databases |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| mysql&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysqlshow mysql</span></b></span></pre>
			<pre><span>Database: mysql</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>|&nbsp;&nbsp;&nbsp; Tables&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>| columns_priv |</span></pre>
			<pre><span>| db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| func&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>| host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| tables_priv&nbsp; |</span></pre>
			<pre><span>| user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+--------------+</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>C:\&gt; </span><span><b><span>C:\mysql\bin\mysql -e &quot;SELECT Host,Db,User FROM db&quot; mysql</span></b></span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<pre><span>| host | db&nbsp;&nbsp;&nbsp; | user |</span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<pre><span>| %&nbsp;&nbsp;&nbsp; | test% |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+------+-------+------+</span></pre>
			<p>如果您正運行支援服務的<span>Windows</span>版本，您想讓<span>MySQL</span>伺服器在<span>Windows</span>啟動時自動運行，參見<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12節，「以Windows服務方式啟動MySQL」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="unix-post-installation"></a>
			2.9.2.&nbsp;Unix下安裝後的過程</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mysql-install-db">
				2.9.2.1. 與運行mysql_install_<span><strong class="command">db有關的問題</strong></span></a></span></dt><dt><span class="section">
				<a href="#automatic-start">
				2.9.2.2. 自動啟動和停止MySQL</a></span></dt><dt><span class="section">
				<a href="#starting-server">
				2.9.2.3. 啟動MySQL伺服器以及其故障診斷和排除</a></span></dt></dl></div>
			<p>在<span>Unix</span>上安裝<span>MySQL</span>後，需要初始化
			授權資料表、啟動伺服器，並確保伺服器工作正常。您還要讓伺服器隨系統的啟動和停止自動啟動和停止。應當為授權資料表中的帳號指定密碼。</p>
			<p>在<span>Unix</span>中，由<strong><span>mysql_install_db</span></strong>設置
			授權資料表。在某些安裝中，該程式自動運行：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<span>RPM</span>分發版在<span>Linux</span>上安裝<span>MySQL</span>，伺服器<span>RPM</span>運行<strong><span>mysql_install_db</span></strong>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您使用<span>PKG</span>分發版在<span>Mac 
			OS X</span>上安裝<span>MySQL</span>，安裝器運行<strong><span>mysql_install_db</span></strong>。</p>
			<p>否則，您需要自己運行<strong><span  style="font-family:
細明體">mysql_install_db</span></strong>。</p>
			<p>下面的過程描述了如何初始化授權資料表<span> (</span>如果還沒有初始化<span>)</span>並啟動伺服器。還推薦了一些您可以用來測試伺服器是否可以訪問以及是否工作正確的命令。關於自動啟動和停止伺服器的訊息，參見<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>。</p>
			<p>您完成過程並讓伺服器運行後，您應當為<strong><span>mysql_install_db</span></strong>建立的帳號指定密碼。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>中列出了相關說明。</p>
			<p><span>在本節的例子中，伺服器用<span>MySQL</span>登錄帳號的用戶<span>ID</span>運行。假定存在這樣的帳號。如果不存在，要麼建立帳號，或用其它已有的用來運行伺服器的登錄帳號來替代。</span></p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span></span>進入<span>MySQL</span>的頂級安裝目錄，此處為<span><i><span>BASEDIR</span></i></span>：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd <i>BASEDIR</i></span></b></span></pre>
			<p><span><i>
			<span>BASEDIR</span></i></span>可能為<span>/usr/local/mysql</span><span>
			</span>或<span>/usr/local</span>。以下步驟假定您位於該目錄。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>根據需要，運行<b><span>mysql_install_db</span></b><span>
			</span>程式設置含有確定如何讓用戶連接伺服器的權限的初始<span>MySQL</span>授權資料表。如果您使用的分發版類型不能運行程式，您需要執行該步驟。</p>
			<p>典型，只有首次安裝<span>MySQL</span>時，才需要運行<strong><span>mysql_install_db</span></strong>，因此如果您升級已有的安裝您可以跳過該步驟，但<strong><span>mysql_install_db</span></strong>不會覆蓋已有的
			授權資料表，因此可以在任何環境下安全運行。</p>
			<p>要想初始化授權資料表，根據<strong><span  style="font-family:
細明體">mysql_install_db</span></strong>是位於<span>bin</span>還是<span>scripts</span>目錄下，使用下面的一個命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>scripts/mysql_install_db --user=mysql</span></b></span></pre>
			<p><strong>
			<span>mysql_install_db</span></strong>指令建立數據目錄、擁有所有資料庫權限的<span>mysql</span>資料庫和可以用來測試<span>MySQL</span>的<span>test</span>資料庫。指令為<span>root</span>帳號和匿名用戶帳號建立
			授權資料表條目。帳號一開始沒有密碼。<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>中描述了初始權限。簡單說，這些權限允許<span>MySQL </span>
			<span>root</span>用戶執行任何操作，允許任何人使用<span>test</span>名建立或使用資料庫或用<span>test_</span>啟動。</p>
			<p>一定要確保由<span>mysql</span>登錄帳號擁有資料庫目錄和檔案，以便在以後運行時 
			伺服器具有讀、寫訪問權限。為此，如果您用<span><span>root</span><span>用戶</span></span>運行<strong><span>mysql_install_db</span></strong>，應當使用<span>--user</span>選項。否則，當以<span>mysql</span>登錄時，應當執行指令，您可以省略命令中的<span>--user</span>選項。</p>
			<p><strong>
			<span>mysql_install_db</span></strong>在<span>mysql</span>資料庫中建立幾個資料表，包括<span>user</span>、<span>db</span>、<span>host</span>、 
			<span>tables_priv</span>、<span>columns_priv</span>和<span>func</span>以及其它。<a href="database-administration.html#privilege-system" title="5.7. The MySQL Access Privilege System">5.7節，「MySQL訪問權限系統」</a>中有完整的列資料表和描述。</p>
			<p>如果您不想要<span>test</span>資料庫，啟動伺服器後，可以用<strong><span>mysqladmin 
			-u root drop test</span></strong>卸掉。</p>
			<p>如果有<strong><span>mysql_install_db</span></strong>相關問題，參見<a href="#mysql-install-db" title="2.9.2.1. Problems Running mysql_install_db">2.9.2.1節，「與運行mysql_install_<span><strong class="command">db有關的問題</strong></span>」</a>。</p>
			<p>有一些選擇運行<b><span>mysql_install_db</span></b>指令<span>,</span>正如<span>MySQL</span>分發版中所提供的：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果想讓初始權限與標準預設值不同，您可以在運行前修改<strong><span>mysql_install_db</span></strong>。然而，最好是在設置
			授權資料表後使用<span>GRANT</span>和<span>REVOKE</span>來更改權限。換句話說，您可以運行<strong><span>mysql_install_db</span></strong>，然後通過<span>MySQL
			</span>
			<span>root</span>用戶使用<span>mysql 
			-u rootMySQL</span>來連接伺服器，以便發出<span>GRANT</span>和<span>REVOKE</span>命令。</p>
			<p>如果您想要在幾個機器上用相同的權限安裝<span>MySQL</span>，可以將<span><span>GRANT</span><span>和<span>REVOKE</span></span></span>語句放入一個檔案中，以指令方式執行檔案，運行<b><span>mysql_install_db</span></b>之後使用<span>mysql</span>。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>bin/</span></b></span><strong><span > mysql_install_db</span></strong><span><b><span> --user=mysql</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>bin/mysql -u root &lt; your_script_file</span></b></span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>這樣，您就可以避免在每台機器上手動發出命令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>完全可以重新建立授權資料表。如果您剛剛知道如何使用<span><span>GRANT</span><span>和<span>REVOKE</span>，</span></span>並且運行<b><span>mysql_install_db</span></b><span>
			</span>之後進行了許多修改，想要關閉資料表重新啟動，您可能想要這樣操作。</p>
			<p>要想重新建立授權資料表，從含有<span>MySQL</span>資料庫的目錄中移走所有 
			<span>.frm</span>、<span>.MYI</span>和 
			<span>.MYD</span>檔案。<span>(</span>這是數據目錄下面的<span>mysql</span>目錄，當您運行<strong><span  style="font-family:
細明體">mysqld --help</span></strong><span> </span>時，列為<span>datadir</span>值<span>)</span>。然後再次運行<b><span>mysql_install_db</span></b><span>
			</span>指令。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>可以使用<span>--skip-grant-tables</span>選項手動啟動<strong><span  style="font-family:
細明體">mysqld</span></strong>，並使用<strong><span>mysql</span></strong>自己增加權限訊息：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql --skip-grant-tables &amp;</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysql mysql</span></b></span></pre>
			<p>手動從<strong><span>mysql</span></strong>執行<b><span>mysql_install_db</span></b>中的<span>SQL</span>命令。確保後面鑰運行<strong><span>mysqladmin 
			flush-privileges</span></strong>或<strong><span>mysqladmin 
			reload</span></strong>，讓伺服器重載授權資料表。</p>
			<p>請注意不使用<strong><span  style="font-family:
細明體">mysql_install_db</span></strong>，不僅需要手動安裝授權資料表，還需要先建立。</p>
			<p>
			<span>4.<span>&nbsp;&nbsp;&nbsp;
			</span></span>啟動<span>MySQL</span>伺服器：</p>
			<pre><span>5.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
			<p>一定要讓<span>MySQL</span>伺服器使用非權限<span>(non-</span><span>root</span><span>)
			</span>登錄帳號運行。為此，如果您以系統<span>root</span>運行<span>mysql_safe</span>，應當使用<span>--user</span>選項。否則，您應當用<span>mysql</span>登錄到系統來執行指令，這樣可以省略命令中的<span>--user</span>選項。</p>
			<p> <a href="problems.html#changing-mysql-user" title="A.3.2. How to Run MySQL as a Normal User">
			A.3.2節，「如何以普通用戶身份運行MySQL」</a>中給出了非特權用戶運行<span>MySQL</span>的說明。</p>
			<p>
			如果在執行該步前您忘記了建立授權資料表，當您啟動伺服器時，在錯誤日誌檔案中將出現下面的消息：</p>
			<pre ><span>mysqld: Can&#39;t find file: &#39;host.frm&#39;</span></pre>
			<p>如果啟動伺服器時遇到其它問題，查閱<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3節，「啟動MySQL伺服器以及其故障診斷和排除」</a>。</p>
			<p>
			<span>6.<span>&nbsp;&nbsp;&nbsp;
			</span></span>使用<strong><span>mysqladmin</span></strong>驗證伺服器在運行中。以下命令提供了簡單的測試，可檢查伺服器是否已經啟動並能響應連接：</p>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqladmin version</span></b></span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>bin/mysqladmin variables</span></b></span></pre>
			<p><span>&nbsp;</span><b><span>mysqladmin 
			version</span></b>的輸出根據平台和<span>MySQL</span>版本的不同而稍有變化，但是應當類似於：</p>
			<pre ><span>shell&gt; </span><span><b><span>bin/mysqladmin version</span></b></span></pre>
			<pre ><b><span>mysqladmin</span></b><span>&nbsp; Ver 8.41 Distrib 5.1.2-alpha, for pc-linux-gnu on i686</span></pre>
			<pre ><span>Copyright (C) 2000 MySQL AB &amp; MySQL Finland AB &amp; TCX DataKonsult AB</span></pre>
			<pre ><span>This software comes with ABSOLUTELY NO WARRANTY. This is free software,</span></pre>
			<pre ><span>and you are welcome to modify and redistribute it under the GPL license</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>Server version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.1.2-alpha-Max</span></pre>
			<pre ><span>Protocol version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</span></pre>
			<pre ><span>Connection&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Localhost via UNIX socket</span></pre>
			<pre ><span>UNIX socket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/lib/mysql/mysql.sock</span></pre>
			<pre ><span>Uptime:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14 days 5 hours 5 min 21 sec</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<pre ><span>Threads: 1&nbsp; Questions: 366&nbsp; Slow queries: 0&nbsp; </span></pre>
			<pre ><span>Opens: 0&nbsp; Flush tables: 1&nbsp; Open tables: 19&nbsp; </span></pre>
			<pre ><span>Queries per second avg: 0.000</span></pre>
			<pre ><span>&nbsp;</span></pre>
			<p>要想看還可以怎樣使用<b><span>mysqladmin</span></b>，用<span>-- 
			help</span>選項使用它。</p>
			<p>
			<span>9.<span>&nbsp;&nbsp;&nbsp;
			</span></span>驗證可以關閉伺服器：</p>
			<pre><span>10.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqladmin -u root shutdown</span></b></span></pre>
			<p>
			<span>11.</span>驗證是否可以重啟伺服器。可以直接使用<strong><span>mysqld_safe</span></strong>或使用<b><span>mysqld</span></b>。例如：</p>
			<pre><span>12.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql --log &amp;</span></b></span></pre>
			<p>如果<span>mysqld_safe</span>失敗，參見<a href="#starting-server" title="2.9.2.3. Starting and Troubleshooting the MySQL Server">2.9.2.3節，「啟動MySQL伺服器以及其故障診斷和排除」</a>。</p>
			<p>
			<span>13.</span>進行一些簡單的測試，驗證您可以從伺服器查詢訊息。輸出應當類似於：</p>
			<pre><span>14.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqlshow</span></b></span></pre>
			<pre><span>15.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>16.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| Databases |</span></pre>
			<pre><span>17.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>18.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| mysql&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>19.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| test&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>20.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+-----------+</span></pre>
			<pre><span>21.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>22.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysqlshow mysql</span></b></span></pre>
			<pre><span>23.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Database: mysql</span></pre>
			<pre><span>24.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>25.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>26.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>27.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| columns_priv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span></pre>
			<pre><span>28.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>29.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| func&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>30.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_category&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>31.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_keyword&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>32.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_relation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>33.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| help_topic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>34.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>35.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>36.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| procs_priv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>37.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| tables_priv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>38.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>39.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_leap_second&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>40.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>41.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_transition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>42.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| time_zone_transition_type |</span></pre>
			<pre><span>43.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>44.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+---------------------------+</span></pre>
			<pre><span>45.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span></pre>
			<pre><span>46.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>bin/mysql -e &quot;SELECT Host,Db,User FROM db&quot; mysql</span></b></span></pre>
			<pre><span>47.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<pre><span>48.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| host | db&nbsp;&nbsp;&nbsp;&nbsp; | user |</span></pre>
			<pre><span>49.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<pre><span>50.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| %&nbsp;&nbsp;&nbsp; | test&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>51.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>| %&nbsp;&nbsp;&nbsp; | test_% |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>52.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>+------+--------+------+</span></pre>
			<p>
			<span>53.</span>在<span>sql-bench</span>目錄<span>(</span>在<span>MySQL</span>安裝目錄下<span>)</span>中有一個基準套件，可以用來比較<span>MySQL</span>在不同平台上的執行情況。基準套件在<span>Perl</span>中編寫。它使用<span>Perl 
			DBI</span>模塊來為各種資料庫提供一個與資料庫無關的接口，並且還需要其它<span>Perl</span>模塊來運行基準套件。必須安裝以下模塊：</p>
			<pre><span>54.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBI</span></pre>
			<pre><span>55.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBD::mysql</span></pre>
			<pre><span>56.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Data::Dumper</span></pre>
			<pre><span>57.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Data::ShowTable</span></pre>
			<p>可以從<span>CPAN(<a target="_top"  href="http://www.cpan.org/">http://www.cpan.org/</a>)</span>獲得這些模塊。請參見<a href="#perl-installation" title="2.13.1. Installing Perl on Unix">2.13.1節，「在Unix中安裝Perl」</a>。</p>
			<p><span>&nbsp;</span><span>sql-bench/Results</span>目錄包含了在不同資料庫和平台上的各種運行結果。要想進行測試，執行命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>cd sql-bench</span></b></span></pre>
			<pre ><span>shell&gt; </span><span><b><span>perl run-all-tests</span></b></span></pre>
			<p>如果沒有<span>sql-bench</span>目錄，您可能使用<span>RPM</span>檔案安裝了<span>MySQL</span>，沒有使用原始碼<span>RPM</span>。<span>(</span>原始碼<span>RPM</span>包括<span>sql-bench</span><span> 
			benchmark</span>目錄）<span>。 </span>此時，必須先安裝基準套件後才能使用。有一個單獨的<span>mysql-bench-VERSION-i386.rpm</span>基準<span>RPM</span>檔案，其中包含了基準代碼和數據。</p>
			<p>如果您有原始碼分發版，其<span>tests</span>子目錄中也有一些測試可供運行。例如，要運行<span>auto_increment.tst</span>，從原始碼分發版的頂級目錄執行該命令：</p>
			<pre ><span>shell&gt; </span><span><b><span>mysql -vvf test &lt; ./tests/auto_increment.tst</span></b></span></pre>
			<p>期望的結果被顯示在<tt >「<span> 
			./tests/auto_increment.res</span>」</tt>檔案中。</p>
			<p>
			<span>58.</span>至此，您應當可以運行伺服器了。然而，初始<span>MySQL</span>帳號均沒有密碼，因此應當使用<a href="#default-privileges" title="2.9.3. Securing the Initial MySQL Accounts">2.9.3節，「使初始MySQL帳號安全」</a>中的說明來指定密碼。</p>
			<p><span>MySQL 5.1</span>安裝過程在<span>MySQL</span>資料庫中建立時區資料表。但是，必須手動裝載資料表。相關說明參見<a href="database-administration.html#time-zone-support" title="5.10.8. MySQL Server Time Zone Support">5.10.8節，「MySQL伺服器時區支援」</a>。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-db"></a>
				2.9.2.1.&nbsp;與運行mysql_install_<span><strong class="command">db有關的問題</strong></span></h4></div></div></div><a class="indexterm" name="id2721408"></a><a class="indexterm" name="id2721418"></a>
				<p><b><span>mysql_install_db</span></b><span>
				</span>指令的目的是生成新的<span>MySQL</span>授權資料表。它不覆蓋已有的<span>MySQL</span>授權資料表，並且它不影響任何其它數據。</p>
				<p>如果您想要重新建立授權資料表，首先停止<b><span>mysqld</span></b>伺服器（如果它正運行）。然後重新命名數據目錄下的<span>MySQL</span>目錄並保存，然後運行<strong><span>mysql_install_db</span></strong>。例如：</p>
				<pre><span>shell&gt; </span><span><b><span>mv mysql-data-directory/mysql mysql-data-directory/mysql-old</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>mysql_install_db --user=mysql</span></b></span></pre>
				<p>本節列出了運行<strong><span  style="font-family:
細明體">mysql_install_db</span></strong>時您可能遇到的問題：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				mysql_install_db fails to install the grant tables</span></strong><span>
				</span></p>
				<p>您會發現<b><span>mysql_install_db</span></b>不能安裝
				授權資料表，顯示下面的消息後終止：</p>
				<pre ><span>Starting mysqld daemon with databases from XXXXXX</span></pre>
				<pre ><span>mysqld ended</span></pre>
				<p>在這種情況下，您應該很小心地檢驗日誌檔案！日誌檔案應該位於目錄<tt >「<span>XXXXXX</span>」</tt>，用錯誤消息命名，並且應該指出為什麼<span><b><span>mysqld</span></b></span>沒啟動。如果您不理解發生的事情，郵寄一份錯誤報告，包含日誌檔案！參見<a href="introduction.html#bug-reports" title="1.7.1.3. How to Report Bugs or Problems">1.7.1.3節，「如何通報問題和問題」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong>
				<span>已經有一個</span><span>amysqld</span><span>程序在運行</span></strong></p>
				<p>
				資料表示伺服器在運行，這種情況下可能已經建立了授權資料表。如果如此，則不再需要運行<strong><span>mysql_install_db</span></strong>，因為只需要運行一次<span>(</span>當您首次安裝<span>MySQL</span>時<span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>
				當一個伺服器正運行時，安裝第二個伺服器不工作</span></strong></p>
				<p>這只有在當您已經有已存在的<strong><span>MySQL</span></strong>安裝但是想要把新安裝放在一個不同的地方時才會發生。例如，您可能已經有了一個產品安裝，但為了測試想要同時運行<span>2</span>個安裝。通常當您試著運行第二個伺服器時，發生的問題是它試圖和第一個使用同樣的套接字和端口。在這種情況下，您將遇到錯誤消息：</p>
				<pre ><span>Can&#39;t start server: Bind on TCP/IP port:</span></pre>
				<pre ><span>Address already in use</span></pre>
				<pre ><span>Can&#39;t start server: Bind on unix socket...</span></pre>
				<p>關於設置多個伺服器的說明，參見<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12節，「在同一台機器上運行多個MySQL伺服器」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><strong><span>您沒有</span></strong><tt ><b>「<span> 
				/tmp </span>」</b></tt><strong><span>的寫權限</span></strong></p>
				<p>如果您沒有寫權限在預設位置<span>(</span>在<tt >「<span>/tmp</span>」</tt>裡<span>)</span>建立一個<span>Unix</span>套接字檔案，或沒有<tt >在「<span>/tmp</span>」</tt>建立臨時檔案的授權，在運行<span><b><span>mysql_install_db</span></b></span>或<span><b><span>mysqld</span></b>伺服器</span>時，您將遇到一個錯誤。</p>
				<p>您可以在開始<span><b><span>mysql_install_db</span></b></span>或<span><b><span>mysqld</span></b>之前</span>執行以下命令指定一個不同的<span>Unix</span>套接字檔案位置和臨時目錄：</p>
				<pre ><span>shell&gt; </span><span><b><span>TMPDIR=/<i>some_tmp_dir</i>/</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>MYSQL_UNIX_PORT=/<i>some_tmp_dir</i>/mysql.sock</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>export TMPDIR MYSQL_UNIX_PORT</span></b></span></pre>
				<p><span><i>
				<span>some_tmp_dir</span></i></span>應該是您有寫授權的某個目錄的全路徑。</p>
				<p>然後，您應當能夠用這些命令運行<strong><span>mysql_install_db</span></strong>並啟動伺服器：</p>
				<pre ><span>shell&gt; </span><span><b><span>bin/mysql_install_db --user=mysql</span></b></span></pre>
				<pre ><span>shell&gt; </span><span><b><span>bin/mysqld_safe --user=mysql &amp;</span></b></span></pre>
				<p>如果<b><span>mysql_install_db</span></b>位於<span>scripts</span>目錄下，首先修改命令<span>scripts/mysql_install_db</span>。</p>
				<p>參見<a href="problems.html#problems-with-mysql-sock" title="A.4.5. How to Protect or Change the MySQL Socket File /tmp/mysql.sock">A.4.5節，「如何保護或更改MySQL套接字檔案/tmp/mysql.sock<code class="filename"></code>」</a>。請參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="automatic-start"></a>
				2.9.2.2.&nbsp;自動啟動和停止MySQL</h4></div></div></div><a class="indexterm" name="id2721827"></a><a class="indexterm" name="id2721837"></a><a class="indexterm" name="id2721847"></a>
				<p>通常您可以用以下方法啟動<b><span>mysqld</span></b>伺服器：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>直接使用<b><span>mysqld</span></b>。該方法適合任何平台。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>作為<span>Windows</span>服務運行<span>MySQL</span>伺服器。可以在支援服務的<span>Windows</span>版本<span>(</span>例如<span> 
				NT</span>、<span>2000</span>、<span>XP</span>和<span>2003)</span>上實現。可以將服務設置為在<span>Windows
				</span>啟動時自動啟動伺服器，或根據需要啟動的手動服務。相關說明參見<a href="#windows-start-service" title="2.3.12. Starting MySQL as a Windows Service">2.3.12節，「以Windows服務方式啟動MySQL」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<b><span>mysqld_safe</span></b>，可以為<strong><span  style="font-family:
細明體">mysqld</span></strong>確定正確的選項然後使用這些選項來運行。該指令適用於基於<span>BSD Unix</span>的系統。請參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<b><span>mysql.server</span></b>。該指令主要用於使用系統<span>V-style</span>運行目錄的系統的啟動和關閉，它通常安裝到<span>mysql</span>下。<strong><span>mysql.server</span></strong>指令使用<b><span>mysqld_safe</span></b>來啟動伺服器。請參見<a href="database-administration.html#mysql-server" title="5.1.4. mysql.server — MySQL Server Startup Script">5.1.4節，「mysql.server：MySQL伺服器啟動指令」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>您可以在<span>Mac OS X</span>上安裝一個單獨的<span>MySQL 
				Startup Item</span>安裝包來使系統啟動時自動啟動<span>MySQL</span>。<span>Startup 
				Item</span>使用<b><span>mysql.server</span></b>來啟動伺服器。詳細介紹參見
              <a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">
				2.5節，「在Mac OS X上安裝MySQL」</a>。</p>
				<p><b><span>mysql.server</span></b>和<b><span>mysqld_safe</span></b>指令和<span>Mac 
				OS X Startup Item</span>可以用來手動啟動伺服器，或自動啟動系統。<strong><span>mysql.server</span></strong>和<span>Startup 
				Item</span>還可以用來停止伺服器。</p>
				<p>
				<span>mysql.server</span>指令可以被用來啟動或停止伺服器，通過用<span>start</span>或<span>stop</span>參數使用它：<span>
				</span></p>
				<pre><span>shell&gt; </span><span><b><span>mysql.server start</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>mysql.server stop</span></b></span></pre>
				<p>在<span><b><span>mysql.server</span></b></span>啟動伺服器之前，它把目錄改變到<strong><span>MySQL</span></strong>安裝目錄，然後使用<span><b><span>safe_mysqld</span></b></span>。如果您想要作為一些特定的用戶運行伺服器，在<span>/etc/my.cnf</span>選項檔案的<span>[<b>mysqld</b>]</span>組增加相應<span>user</span>選項，如本節後面所示。<span>(</span>如果您有在一個非標準的地點安裝的二進制分發版，您可能需要編輯<span><b><span>mysql.server</span></b></span>。修改它，運行<span><b><span>safe_mysqld</span></b></span>前，<span>cd</span>到正確的目錄。注意如果您修改<span><b><span>mysql.server</span></b></span>，那麼某個時候升級<strong><span>MySQL</span></strong>時，您的修改版本將被覆蓋，因此您應該做一個您可重新安裝的編輯過的版本的拷貝）<span>。
				</span></p>
				<p><span><b><span>
				mysql.server stop</span></b></span>通過向伺服器發出一個信號停止它。您可手動執行<span><b><span>mysqladmin 
				shutdown</span></b></span>關閉伺服器。</p>
				<p>要想在伺服器上自動啟動和停止<span>MySQL</span>，應在<tt >「<span>/etc/rc 
				* </span></tt>檔案中適當的地方增加啟動、停止命令。</p>
				<p>如果您使用<span>Linux</span>伺服器<span>RPM</span>安裝軟件包<span>(</span><span>MySQL-server-VERSION.rpm</span><span>)</span>，<b><span>mysql.server</span></b>指令安裝在<span>/etc/init.d</span>目錄中，名為<span>MySQL</span>。您不需要手動安裝它。關於<span>Linux 
				RPM</span>軟件包的詳細訊息參見<a href="#linux-rpm" title="2.4. Installing MySQL on Linux">2.4節，「在Linux下安裝MySQL」</a>。</p>
				<p>一些供應商提供的<span>RPM</span>軟件包安裝的啟動指令名字不同，例如<b><span>mysqld</span></b>。</p>
				<p>如果從不自動安裝<strong><span  style="font-family:
細明體">mysql.server</span></strong>的原始碼分發版或二進制分發版格式來安裝<span>MySQL</span>，可以手動安裝它。可以在<span>MySQL</span>安裝目錄下或<span>MySQL
				</span>原始碼樹的<span>support-files</span>目錄中找到指令。</p>
				<p>要想手動安裝<strong><span  style="font-family:
細明體">mysql.server</span></strong>，用名稱<strong><span  style="font-family:
細明體">mysql</span></strong>將它複製到<span>/etc/init.d</span>目錄，然後將它變為可執行檔案。只需要將位置更改為<b><span>mysql.server</span></b><span>is</span>所在並執行這些命令的相應目錄：</p>
				<pre><span>shell&gt; </span><span><b><span>cp mysql.server /etc/init.d/mysql</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>chmod +x /etc/init.d/mysql</span></b></span></pre>
				<p>舊的<span>Red Hat</span>系統使用<span>/etc/rc.d/init.d</span>目錄，不使用<span>/etc/init.d</span>。相應地調節前面的命令。也可以首先建立指向<span>/etc/rc.d/init.d</span>的符號連接<span>/etc/init.d</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>cd /etc</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>ln -s rc.d/init.d .</span></b></span></pre>
				<p>安裝指令後，用來激活它以便在系統啟動時運行所需要的命令取決於您的作業系統。在<span>Linux</span>中，您可以使用<span>chkconfig</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>chkconfig --addMySQL</span></b></span></pre>
				<p>在一些<span>Linux</span>系統中，還需要下面的命令來完全激活<span>MySQL</span>指令：</p>
				<pre><span>shell&gt; </span><span><b><span>chkconfig --level 345MySQL on</span></b></span></pre>
				<p>在<span>FreeBSD</span>中，啟動指令通常應當位於<span>/usr/local/etc/rc.d/</span>。手冊的<span>rc(8)</span>頁內說明只有該目錄指令的基本名匹配<span>*.sh</span><span> 
				shell</span>檔案名模式，指令才會執行。目錄內的其它檔案或目錄將被忽略掉。換句話說，在<span>FreeBSD</span>中，應當將<span>mysql.server</span>指令安裝為 
				<span>/usr/local/etc/rc.d/mysql.server.sh</span>以便自動啟動。</p>
				<p>前面設置的另一種情況是，一些作業系統啟動時也使用<span>/etc/rc.local</span>或<span>/etc/init.d/boot.local</span><span>
				</span>來啟動其它服務。要想使用該方法啟動<span>MySQL</span>，您可以在相應啟動檔案後面追加一條命令：</p>
				<pre><span>/bin/sh -c &#39;cd /usr/local/mysql; ./bin/mysqld_safe --user=mysql &amp;&#39;</span></pre>
				<p>對於其它系統，查閱作業系統的文檔來查看安裝啟動指令的方法。</p>
				<p>您也可以在一個全局<tt >「<span>/etc/my.cnf</span>」</tt>檔案中增加<span><b><span>mysql.server</span></b></span>的選項。一個典型<tt >的「<span>/etc/my.cnf</span>」</tt>檔案可能看起來像這樣：</p>
				<pre><span>[mysqld]</span></pre>
				<pre><span>datadir=/usr/local/mysql/var</span></pre>
				<pre><span>socket=/var/tmp/mysql.sock</span></pre>
				<pre><span>port=3306</span></pre>
				<pre><span>user=mysql</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>[<b>mysql.server</b>]</span></pre>
				<pre><span>basedir=/usr/local/mysql</span></pre>
				<p><span>mysql.server</span>指令使用下列變數：<span>basedir</span>、<span>datadir</span>和<span>pid-file</span>。定義後，必須將它們放到選項檔案中，不能放到命令行。<strong><span>mysql.server</span></strong>只識別<span>start</span>和<span>stop</span>命令行參數。</p>
				<p>下面的資料表顯示了伺服器和每個啟動指令從選項檔案讀取哪個選項組：</p>
				<table border="1" cellpadding="0" id="table8">
					<tr>
						<td width="140">
						<p><strong>
						<span>指令</span></strong></td>
						<td width="309">
						<p><strong>
						<span>選項組</span></strong></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysqld</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[server]</span><span>,
						</span>
						<span>[mysqld-major-version]</span></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysql.server</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[mysql.server]</span><span>,
						</span>
						<span>[server]</span></td>
					</tr>
					<tr>
						<td width="140">
						<p><strong>
						<span>mysqld_safe</span></strong></td>
						<td width="309">
						<p>
						<span>[mysqld]</span><span>,
						</span>
						<span>[server]</span><span>,
						</span>
						<span>[mysqld_safe]</span></td>
					</tr>
				</table>
				<p>
				<span  >[mysqld-major-version]</span><span>意味著名為</span><span  >[mysqld-5.0]</span>的<span>組</span><span>，</span><span  >[mysqld-5.1]</span><span>用於版本為<span>5.0.x</span></span><span>、</span><span >5.1.x</span><span>等的伺服器。該特性可以用來指定只被給定發佈系列的伺服器讀取的選項。</span></p>
				<p>為了向後兼容，<strong><span  style="font-family:
細明體">mysql.server</span></strong>還讀取<span>[mysql_server]</span>組，<b><span>mysqld_safe</span></b>還讀取<span>[safe_mysqld]</span>組。然而，當使用<span>MySQL 
				5.1</span>時，您應當更新選項檔案，使用<span>[mysql.server]</span>和<span>[mysqld_safe]</span>組。</p>
				<p>參見<a href="using-mysql-programs.html#option-files" title="4.3.2. Using Option Files">4.3.2節，「使用選項檔案」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="starting-server"></a>
				2.9.2.3.&nbsp;啟動MySQL伺服器以及其故障診斷和排除</h4></div></div></div><a class="indexterm" name="id2722543"></a><a class="indexterm" name="id2722554"></a>
				<p>如果啟動伺服器時有問題，可以嘗試：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>指定您使用的儲存引擎需要的任何特殊選項。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>確保伺服器知道從哪裡找到數據目錄。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>確保伺服器可以使用數據目錄。數據目錄和內容的所有權和允許必須設置成伺服器可以訪問和修改它們。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>檢查錯誤日誌查看伺服器為何不啟動。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>驗證伺服器想要使用的網絡接口可用。</p>
				<p>一些儲存引擎有一些選項可以控制其行為。您可以建立一個<span>my.cnf</span>檔案並為計劃使用的引擎設置啟動選項。如果您將要使用支援事務處理資料表<span> 
				(</span><span>InnoDB</span>，<span>BDB</span><span>)</span>的儲存引擎，應確保啟動伺服器之前按照您的期望對它們進行了配置：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您正使用<span>InnoDB</span>資料表，參閱<span>InnoDB</span><span>-specific</span>啟動選項。如果您未指定選項，<span>InnoDB</span>使用預設值作為配置選項。請參見<a href="storage-engines.html#innodb-configuration" title="15.2.3. InnoDB Configuration">15.2.3節，「InnoDB配置」</a>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您正使用<span>BDB</span><span> 
				(Berkeley DB)</span>資料表，您應當熟悉不同的<span>BDB</span><span>-specific</span>啟動選項。請參見<a href="storage-engines.html#bdb-start" title="15.5.3. BDB Startup Options">15.5.3節，「BDB啟動選項」</a>。</p>
				<p>當<b><span>mysqld</span></b>伺服器啟動時，它進入數據目錄。在這裡它可以找到資料庫並寫入日誌檔案。在<span>Unix</span>中，伺服器還在數據目錄中寫<span>pid(</span>過程<span> 
				ID)</span>檔案。</p>
				<p>當編譯伺服器時確定數據目錄。這是伺服器預設尋找數據目錄的位置。如果數據目錄位於系統中的其它位置，伺服器不能正確工作。用<span>--verbose</span>和<span>--help</span>選項使用<b><span>mysqld</span></b>您可以找出預設路徑設定值。</p>
				<p>如果預設值與您的系統中的<span>MySQL</span>安裝佈局不匹配，您可以在命令行中為<b><span>mysqld</span></b><span>
				</span>或<strong><span>mysqld_safe</span></strong>指定選項來覆蓋它們。您還可以在選項檔案中列出選項。</p>
				<p>要想明顯指定數據目錄的位置，使用<span>--datadir</span>選項。一般情況下，您可以告訴<b><span>mysqld</span></b>基本目錄的位置，<span>MySQL</span>安裝在該目錄下，並且它在該目錄中尋找數據目錄。您可以使用<span>--basedir</span>選項來實現。</p>
				<p>要想檢查指定路徑選項的結果，用<span>--verbose</span>和<span>--help</span>選項使用<b><span>mysqld</span></b>。例如，如果您進入<b><span>mysqld</span></b>的安裝目錄，然後運行下面的命令，它顯示啟動伺服器的結果，基本目錄為<span>/usr/local</span>：</p>
				<pre><span>shell&gt; </span><span><b><span>./mysqld --basedir=/usr/local --verbose --help</span></b></span></pre>
				<p>您可以指定其它選項，例如<span>--datadir</span>，但是請注意<span>--verbose</span>和<span>--help</span>必須為最後的選項。</p>
				<p>一旦您確定了您想要的路徑設定值，用<span>--verbose</span>和<span>-- 
				help</span>啟動伺服器。</p>
				<p>如果<b><span>mysqld</span></b>正在運行，執行下列命令您可以找出它所使用的路徑設定值：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqladmin variables</span></b></span></pre>
				<p>或：</p>
				<pre><span>shell&gt; </span><span><b><span>mysqladmin -h <i>host_name</i> variables</span></b></span></pre>
				<p><span><i>
				<span>host_name</span></i></span>是<span>MySQL</span>伺服器主機的名稱。</p>
				<p>如果啟動<b><span>mysqld</span></b>時遇到<span>Errcode 
				13</span><span>(</span>意味著<span>Permission 
				denied</span><span>)</span>，這意味著數據目錄或其內容的訪問權限不允許伺服器訪問。此時，您需要更改所使用檔案和目錄的權限，使伺服器有權使用它們。您還可以用<span>root</span>啟動伺服器，但是這樣會造成安全問題，應當避免。</p>
				<p>在<span>Unix</span>中，進入數據目錄，檢查數據目錄和其內容的所有權，確保伺服器可以訪問。例如，如果數據目錄是<span>/usr/local/mysql/var</span>，使用命令：</p>
				<pre><span>shell&gt; </span><span><b><span>ls -la /usr/local/mysql/var</span></b></span></pre>
				<p>如果數據目錄或其檔案或子目錄不屬於您運行伺服器使用的帳號，將所有權改為該帳號：</p>
				<pre><span>shell&gt; </span><span><b><span>chown </span><span>–</span><span>R mySQL /usr/local/mysql/var</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>chgrp </span><span>–</span><span>R mySQL /usr/local/mysql/var</span></b></span></pre>
				<p>如果伺服器不能正確啟動，檢查錯誤日誌檔案，看看是否可以找到原因。日誌檔案位於數據目錄<span>(</span>在<span>Windows</span>中一般為<span>C:\Program 
				Files\MySQL\MySQL Server 5.1\data</span>，<span>Unix</span>二進制分發版為<span>/usr/local/mysql/data</span>，<span>Unix</span>原始碼分發版為<span>/usr/local/var</span><span>)</span>。搜尋數據目錄中的<span><i><span>host_name</span></i><span>.err</span></span>和<span><i><span>host_name</span></i><span>.log</span></span>檔案，其中<span><i><span>host_name</span></i></span>是您的伺服器主機名。然後檢查檔案的最後幾行。在<span>Unix</span>中，可以使用<span>tail</span>來顯示：</p>
				<pre><span>shell&gt; </span><span><b><span>tail <i>host_name</i>.err</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>tail <i>host_name</i>.log</span></b></span></pre>
				<p>錯誤日誌包含指示伺服器不能啟動的訊息。例如，您可以看見日誌中：</p>
				<pre><span>000729 14:50:10&nbsp; bdb:&nbsp; Recovery function for LSN 1 27595 failed</span></pre>
				<pre><span>000729 14:50:10&nbsp; bdb:&nbsp; warning: ./test/t1.db: No such file or directory</span></pre>
				<pre><span>000729 14:50:10&nbsp; Can&#39;t init databases</span></pre>
				<p>這意味著您沒有用<span>--bdb-no-recover</span>選項啟動<strong><span>mysqld</span></strong>，<span>Berkeley 
				DB</span>恢復資料庫時發現其日誌檔案有一些問題。要想繼續，您應當將舊的<span>Berkeley 
				DB </span>日誌檔案從資料庫目錄移到其它地方，以後您可以在那兒檢查它們。<span>BDB</span>日誌檔案以<span>log.0000000001</span>開頭，按順序命名。</p>
				<p>如果您運行支援<span>BDB</span><span>
				</span>資料表的<b><span>mysqld</span></b><span>,<b>mysqld</b></span>啟動時內核崩潰，該可能是由於<span>BDB</span><span>
				</span>恢復日誌的問題。此時，您可以嘗試用<span>--bdb-no-recover</span>啟動<b><span>mysqld</span></b>。如果有幫助，您應當從數據目錄移走所有<span>BDB</span>日誌檔案並嘗試不用<span>--bdb-no-recover</span>選項重新啟動<b><span>mysqld</span></b>。</p>
				<p>如果出現下面的錯誤，說明其它程式<span>(</span>也許是另一個<strong><span>mysqld</span></strong>伺服器<span>)</span>正使用<b><span>mysqld</span></b>正試圖使用的<span>TCP/IP</span>端口或<span>Unix
				</span>套接字檔案：</p>
				<pre><span>Can&#39;t start server: Bind on TCP/IP port: Address already in use</span></pre>
				<pre><span>Can&#39;t start server: Bind </span>在<span>Unix</span>中<span> socket...</span></pre>
				<p>使用<strong><span>ps</span></strong>來確定是否另有一個<strong><span>mysqld</span></strong>伺服器正在運行。如果如此，關閉伺服器重新啟動<b><span>mysqld</span></b>。<span>(</span>如果另一個伺服器正運行，您的確想要運行多個伺服器，您可以在<a href="database-administration.html#multiple-servers" title="5.12. Running Multiple MySQL Servers on the Same Machine">5.12節，「在同一台機器上運行多個MySQL伺服器」</a>中發現相關訊息<span>)</span>。</p>
				<p>如果沒有其它伺服器在運行，嘗試執行命令 
				<span>telnet your-host-name 
				tcp-ip-port-number</span>。<span>(</span>預設<span>MySQL</span>端口號是<span>3306</span>）<span>。</span>然後按兩次<span>Enter</span>（回車）鍵。如果出現<span>telnet: 
				Unable to connect to remote host: Connection refused</span>錯誤消息，其它程式正使用<b><span>mysqld</span></b>試圖使用的<span> 
				TCP/IP</span>端口。您需要跟蹤這是哪個程式並禁用它，或讓<b><span>mysqld</span></b>用<span>--port</span>選項幀聽其它端口。此時，當通過<span>TCP/IP</span>協議連接伺服器時，您還需要為客戶端程式指定端口號。</p>
				<p>端口不能訪問的另一個原因可能是防火牆正運行，阻擋了與它的連接。如果如此，修改防火牆設置允許對該端口的訪問。</p>
				<p>如果伺服器已經啟動但是您不能與它連接，您應當確保在<span>/etc/hosts</span>中有下面所示條目：</p>
				<pre><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost</span></pre>
				<p>該問題只發生在沒有工作線程庫，並且<span>MySQL</span>必須配置為使用<span>MIT-pthreads</span>的系統。</p>
				<p>如果您不能啟動<b><span>mysqld</span></b>，您可以使用<span>--debug</span>選項嘗試編寫一個跟蹤檔案來找到問題。請參見<a href="porting.html#making-trace-files" title="E.1.2. Creating Trace Files">E.1.2節，「建立跟蹤檔案」</a>。</p>
				<p>關於在<span>Windows</span>安裝中排錯的詳細訊息，參見<a href="#windows-troubleshooting" title="2.3.14. Troubleshooting a MySQL Installation Under Windows">2.3.14節，「在Windows環境下對MySQL安裝的故障診斷與排除」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="default-privileges"></a>
			2.9.3.&nbsp;使初始MySQL帳號安全</h3></div></div></div><a class="indexterm" name="id2723215"></a><a class="indexterm" name="id2723225"></a><a class="indexterm" name="id2723235"></a><a class="indexterm" name="id2723242"></a><a class="indexterm" name="id2723249"></a><a class="indexterm" name="id2723259"></a><a class="indexterm" name="id2723269"></a><a class="indexterm" name="id2723279"></a><a class="indexterm" name="id2723286"></a>
			<p><span>MySQL</span>安裝過程包括設置含有授權資料表的<span>MySQL</span>資料庫：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>Windows</span>分發版包含預初始化的授權資料表，可以自動安裝。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Unix</span>中，用<b><span>mysql_install_db</span></b>程式來安裝
			授權資料表。可以通過一些安裝方法來運行該程式。否則您需要手動執行。詳細訊息參見<a href="#unix-post-installation" title="2.9.2. Unix Post-Installation Procedures">2.9.2節，「Unix下安裝後的過程」</a>。</p>
			<p>授權資料表定義了初始<span>MySQL</span>用戶帳號和訪問權限。按照以下步驟對這些帳號進行設置：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用用戶<span>root
			</span>建立兩個帳號。這些帳號為超用戶帳號，可以執行任何操作。初始<span>root</span>帳號的密碼為空，因此任何人可以用<span>root</span>帳號不用任何密碼來連接<span>MySQL</span>伺服器，並具有所有權限。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，一個<span>root</span>帳號用來從本機連接<span>MySQL</span>伺服器，另一個允許從任何主機連接。</p>
			<p>
			<span >
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Unix</span>中，兩個<span>root</span>帳號均用於從本機連接。<span>必須從本機進行連接，一個帳號主機名應指定為</span><span>localhost</span><span>，另一個帳號為實際的主機名或<span>IP</span>號。</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>建立了兩個匿名用戶帳號，每個帳號的帳號均為空。匿名帳號沒有密碼，因此任何人可以使用匿名帳號來連接<span>MySQL</span>伺服器。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Windows</span>中，一個匿名帳號用來從本機進行連接。它具有所有權限，同<span>root</span><span>
			</span>帳號一樣。另一個可以從任何主機上連接，具有<span>test</span>資料庫或其它以<span>test</span>開始的資料庫的所有權限。</p>
			<p>
			<span>
			o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
			</span>在<span>Unix</span>中，兩個匿名帳號均用於從本機連接。<span>必須從本機進行連接，一個帳號主機名應指定為</span><span>localhost</span><span>，另一個帳號為實際的主機名或<span>IP</span>號</span>。兩個帳號具有<span>test</span>資料庫或其它以<span>test</span>開始的資料庫的所有權限。</p>
			<p>如前面所述，所有初始帳號均沒有密碼。這意味著在您執行下述操作前，<span>MySQL</span>安裝未受保護：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您想要防止客戶端不使用密碼用匿名用戶來連接，您應當為匿名帳號指定密碼或刪掉匿名帳號。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>您應當為<span>MySQL </span>
			<span>root</span>帳號指定密碼。</p>
			<p>下面的說明描述了如何為初始<span>MySQL</span>帳號設置密碼，先為匿名帳號設置然後為<span>root</span>帳號設置。在例子中用實際密碼替換「<span><i><span>newpwd</span></i></span>」。說明還包括如果您不想用匿名帳號訪問，如何刪掉匿名帳號。</p>
			<p>您可能想要在以後設置密碼，因此不需要在進一步的設置或測試中指定密碼。但是，一定要在實際生產作業、使用安裝前設置好密碼。</p>
			<p>要想為匿名帳號指定密碼，可以使用<span>SET 
			PASSWORD</span>或<span>UPDATE</span>。在兩種情況中，一定要使用<span>PASSWORD()</span>函數為密碼加密。</p>
			<p>在<span>Windows</span>中使用<span>PASSWORD</span>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;%&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>在<span>Unix</span>中使用<span>PASSWORD</span>的方法：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>用伺服器主機名替換第二個<span>SET 
			PASSWORD</span>語句中的<span><i><span>host_name</span></i></span>。這是指定的<span>user</span>資料表中的<span>root</span><span> 
			non-</span><span>localhost</span>記錄的<span>Host</span>列名。如果您不知道是哪個主機名，在<span>SET 
			PASSWORD</span>之前執行下面的語句：</p>
			<pre><span>mysql&gt; </span><span><b><span>SELECT Host, User FROM mysql.user;</span></b></span></pre>
			<p>搜尋在<span>User</span>列有<span>root</span>和在<span>Host</span>列沒有<span>localhost</span>的記錄。然後在第二個<span>SET 
			PASSWORD</span>語句中使用該<span>Host</span>值。</p>
			<p>為匿名帳號指定密碼的另一種方法是使用<span>UPDATE</span>直接修改用戶資料表。用<span>root</span>連接伺服器，運行<span>UPDATE</span>語句為相應<span>user</span>資料表記錄的<span>Password</span>列指定一個值。在<span>Windows</span>和<span>Unix</span>中的過程是相同的。下面的<span>UPDATE</span>語句同時為兩個匿名帳號指定密碼：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password = PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WHERE User = &#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>在<span>user</span>資料表中直接使用<span>UPDATE</span>更新密碼後，必須讓伺服器用<span>FLUSH 
			PRIVILEGES</span>重新讀授權資料表。否則，重新啟動伺服器前，不會使用更改。</p>
			<p>如果您寧願刪除匿名帳號，操作方法是：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>DELETE FROM mysql.user WHERE User = &#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>可以在<span>Windows</span>和<span>Unix</span>中使用<span>DELETE</span>語句。在<span>Windows</span>中，如果您只想刪掉具有與<span>root</span>相同權限的匿名帳號，方法為：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>DELETE FROM mysql.user WHERE Host=&#39;localhost&#39; AND User=&#39;&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>該帳號允許匿名訪問，但是擁有全部的權限，因此刪掉它可以提高安全。</p>
			<p>您可以用幾種方法為<span>root</span>帳號指定密碼。以下介紹了三種方法：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>SET 
			PASSWORD</span>語句</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<b><span>mysqladmin</span></b>命令行客戶端程式</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>使用<span>UPDATE</span>語句</p>
			<p>要想使用<span>SET 
			PASSWORD</span>指定密碼，用<span>root</span>連接伺服器並執行兩個<span>SET 
			PASSWORD</span>語句。一定要使用<span>PASSWORD()</span>函數來加密密碼。</p>
			<p>在<span>Windows</span>中的語句：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;%&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>在<span>Unix</span>中的語句：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>SET PASSWORD FOR &#39;root&#39;@&#39;<i>host_name</i>&#39; = PASSWORD(&#39;<i>newpwd</i>&#39;);</span></b></span></pre>
			<p>用伺服器主機名替換第二個<span>SET 
			PASSWORD</span>語句中的<span><i><span>host_name</span></i></span>。這是您指定匿名帳號密碼的主機名。</p>
			<p>要想使用<strong><span>mysqladmin</span></strong>為<span>root</span>帳號指定密碼，執行下面的命令：</p>
			<pre><span>&nbsp; shell&gt; <b>mysqladmin</b> -u root password &quot;</span><span><i><span>newpwd</span></i></span><span>&quot;</span></pre>
			<pre><span>&nbsp; shell&gt; <b>mysqladmin</b> -u root -h </span><span><i><span>host_name</span></i></span><span> password &quot;</span><span><i><span>newpwd</span></i></span><span>&quot;</span></pre>
			<p>上述命令適用於<span>Windows</span>和<span>Unix</span>。用伺服器主機名替換第二個命令中的<span><i><span>host_name</span></i></span>。不一定需要將密碼用雙引號引起來，但是您如果密碼中包含空格或專用於命令解釋的其它字元，則需要用雙引號引起來。</p>
			<p>您還可以使用<span>UPDATE</span>直接修改<span>user</span>資料表。下面的<span>UPDATE</span>語句可以同時為兩個<span>root</span>帳號指定密碼：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>UPDATE mysql.user SET Password = PASSWORD(&#39;<i>newpwd</i>&#39;)</span></b></span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -&gt;&nbsp;&nbsp;&nbsp;&nbsp; </span><span><b><span>WHERE User = &#39;root&#39;;</span></b></span></pre>
			<pre><span>mysql&gt; </span><span><b><span>FLUSH PRIVILEGES;</span></b></span></pre>
			<p>
			<span>UPDATE</span>語句適用於<span>Windows</span>和<span>Unix</span>。</p>
			<p>設置完密碼後，當您連接伺服器時您必須提供相應密碼。例如，如果您想要用<strong><span>mysqladmin</span></strong><span>
			</span>關閉伺服器，可以使用下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin -u root -p shutdown</span></b></span></pre>
			<pre><span>Enter password: </span><span><b><span>(enter root password here)</span></b></span></pre>
			<p><strong><span>註釋：</span></strong>如果您設置了<span>root</span>密碼後忘記了密碼，從<a href="problems.html#resetting-permissions" title="A.4.1. How to Reset the Root Password">A.4.1節，「如何復位根用戶密碼」</a>中查閱重設密碼的方法。</p>
			<p>您可以使用<span>GRANT</span>語句設置新帳號。相關說明參見<a href="database-administration.html#adding-users" title="5.8.2. Adding New User Accounts to MySQL">5.8.2節，「向MySQL增加新用戶帳號」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="upgrade"></a>
		2.10.&nbsp;升級MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#upgrading-from-5-0">
			2.10.1. 從5.0版升級</a></span></dt><dt><span class="section">
			<a href="#upgrading-grant-tables">
			2.10.2. 升級授權資料表</a></span></dt><dt><span class="section">
			<a href="#upgrading-to-arch">
			2.10.3. 將MySQL資料庫拷貝到另一台機器</a></span></dt></dl></div><a class="indexterm" name="id2724118"></a>
		<p>做為一般原則，我們建議從一個發佈系列升級到另一個發佈系列時，您應當先升級到它的下一個系列而不要跳過。例如，如果您目前正運行<span>MySQL 
		3.23</span>，想要升級到較新的系列，要升級到<span>MySQL 4.0</span>而不要升級到<span>5.0</span>或<span>5.1</span>。</p>
		<p>下面的項列出了升級時的相關訊息：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>從<span>MySQL 5.0</span>升級到<span>5.1</span>前<span>,</span>請閱讀<a href="#upgrading-from-5-0" title="2.10.1. Upgrading from Version 5.0">2.10.1節，「從5.0版升級」</a>和<a href="news.html" title="Appendix D. MySQL Change History">附錄D：<i>MySQL變更史</i></a>。其中提供了<span>MySQL 
		5.1</span>相對於<span>MySQL 5.0</span>的新特性或不同特性。如果您想要從<span>MySQL 
		5.0</span>以前的發佈系列升級<span>,</span>應當依次升級到下一個發佈系列，直到達到<span>MySQL 
		5.0</span>，然後再升級到<span>MySQL 5.1</span>。關於從<span>MySQL 
		5.0</span>升級的訊息<span>,</span>參見<span>MySQL<em><span> 
		5.0 </span></em></span><em><span style="font-family:
細明體">參考手冊</span></em>；對於更早的發佈，參見<span>MySQL<em><span style="font-family:
細明體"> 4.1</span></em></span><em><span>參考手冊</span></em>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>在升級前應先備份資料庫。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果在<span>Windows</span>中運行<span>MySQL</span>伺服器，參見<a href="#windows-upgrading" title="2.3.15. Upgrading MySQL on Windows">2.3.15節，「在Windows下升級MySQL」</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>從<span>MySQL 5.0</span>升級到<span>5.1</span>更改<span>MySQL</span>資料庫中的
		授權資料表；增加了列和資料表以支援新功能。為了充分利用這些特性，應確保授權資料表是最新的。升級授權資料表的過程參見<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。在升級前，您可能想要使用<strong><span>mysqldump</span></strong>來轉儲資料表；升級後，可以使用<strong><span>mysql</span></strong>或<span>mysqlimport</span>重建、重裝
		授權資料表來重載<span>dump(</span>備份<span>)</span>檔案。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果您正複製，關於升級複製設置的訊息參見<a href="replication.html#replication-upgrade" title="6.6. Upgrading a Replication Setup">6.6節，「升級複製設置」</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果安裝包括<b><span>mysqld<strong><span>-max</span></strong></span></b>伺服器的<span>MySQL-Max</span>分發版，則後面要升級到非<span>Max</span>版的<span>MySQL</span>，<strong><span>mysqld_safe</span></strong>仍然試圖運行舊的<b><span>mysqld<strong><span>-max</span></strong></span></b>伺服器。如果升級，應當手動刪掉舊的<b><span>mysqld<strong><span>-max</span></strong></span></b>伺服器以確保<strong><span>mysqld_safe</span></strong>運行新的<b><span>mysqld</span></b>伺服器。</p>
		<p>只要您的<span>MySQL</span>版本屬於相同的發佈系列，總是可以在不同的版本之間的相同架構上移動<span>MySQL</span>格式檔案和數據檔案。目前的產品發佈系列是<span>5.1</span>。如果運行<span>MySQL</span>時更改字元編碼，必須對所有<span>MyISAM</span>資料表運行<strong><span>myisamchk 
		-r -q --set-character-set=</span></strong><span><b><i><span>charset</span></i></b></span>。否則，索引順序將會出錯，因為更改字元編碼也會更改排序。</p>
		<p>如果您使用新版本時比較小心，在安裝新的<span>MySQL</span>前可以重新命名舊的<b><span>mysqld</span></b>。例如，如果您想要從<span>MySQL 
		5.0.13</span>升級到<span>5.1.10, </span>將當前的伺服器從<b><span>mysqld</span></b>重新命名為<b><span>mysqld<strong><span>-5.0.13</span></strong></span><strong><span>。</span></strong></b>如果新的<b><span>mysqld</span></b>出現問題，只需要關閉並用舊的<b><span>mysqld</span></b>重新啟動。</p>
		<p>升級後，如果您遇到重新編譯的客戶端程式問題，例如<span>Commands 
		out of sync</span>或不期望的內核轉儲，可能是編譯程式時使用了舊的頭檔案或庫檔案。出現這種情況，應當檢查<span>mysql.h</span>檔案和<span>libmysqlclient.a</span>庫的日期，以驗證它們是否來自新的<span>MySQL</span>分發版。如果不是，用新的頭檔案和庫重新編譯程式。</p>
		<p>如果出現問題，例如新<b><span>mysqld</span></b>伺服器不啟動或沒有密碼不能連接，驗證是否使用了以前安裝的舊<span>my.cnf</span>檔案。可以用<span>--print-defaults</span>選項檢查<span>(</span>例如，<strong><span>mysqld 
		--print-defaults</span></strong><span>)</span>。如果顯示程式名之外的其它內容，說明有一個活動<span>my.cnf</span>檔案影響了伺服器或客戶端操作。</p>
		<p>當安裝新的<span>MySQL</span>發佈時，最好重建並重裝<span>Perl
		</span><span>
		<span>DBD</span><span>：：<span>mysql</span></span></span><span>
		</span>模塊。同樣適用於其它<span>MySQL</span>接口，例如<span>PHP
		</span>
		<span>mysql</span>延伸名和<span>Python
		</span>
		<span>MySQLdb</span>模塊。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-from-5-0"></a>
			2.10.1.&nbsp;從5.0版升級</h3></div></div></div>
			<p><strong><span>當從<span>5.0</span>升級到<span>5.0.10</span>或更高版本時</span></strong>請注意<em><span>必須</span></em>運行<strong><span>mysql_fix_privilege_tables</span></strong><span>(</span>或在<span>Windows</span>中運行<span>mysql_fix_privilege_tables.sql</span><span>)</span>。否則，不能建立保存的過程。相關過程參見<a href="#upgrading-grant-tables" title="2.10.2. Upgrading the Grant Tables">2.10.2節，「升級授權資料表」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-grant-tables"></a>
			2.10.2.&nbsp;升級授權資料表</h3></div></div></div><a class="indexterm" name="id2724461"></a><a class="indexterm" name="id2724472"></a>
			<p>一些發佈對授權資料表<span>(MySQL</span>資料庫中的資料表<span>)</span>的結構進行了更改以增加新的權限或特性。當您更新到新版本<span> 
			MySQL</span>時，要想確保授權資料表最新，應當運行<strong><span>mysql_fix_privilege_tables</span></strong>指令來更新
			授權資料表。相關過程參見<a href="database-administration.html#mysql-fix-privilege-tables" title="5.4. mysql_fix_privilege_tables — Upgrade MySQL System Tables">5.4節，「mysql_fix_privilege_tables：升級MySQL系統資料表」</a>。</p>
			<p>如果您從<span>MySQL 4.1</span>或更早版本升級，授權資料表升級過程為<span>CREATE 
			VIEW</span>和<span>SHOW 
			VIEW</span>權限增加了視圖相關的列。這些權限位於全局和資料庫 級。在這種情況下，<span>MySQL 
			5.1</span>版<span>MySQL<strong><span>_fix_privilege_ 
			tables</span></strong></span>將<span>user</span>資料表中的<span>Create_priv</span>值複製到<span>Create_view_priv</span>和 
			<span>Show_view_priv</span>列。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="upgrading-to-arch"></a>
			2.10.3.&nbsp;將MySQL資料庫拷貝到另一台機器</h3></div></div></div><a class="indexterm" name="id2724552"></a><a class="indexterm" name="id2724562"></a><a class="indexterm" name="id2724569"></a>
			<p>您可以在支援相同浮點格式的不同架構之間為<span>MyISAM</span>資料表複製<span>.frm</span>、<span>.MYI</span>和<span>.MYD</span>檔案。<span>(MySQL</span>關注所有字節交換問題）<span>。</span>請參見<a href="storage-engines.html#myisam-storage-engine" title="15.1. The MyISAM Storage Engine">15.1節，「MyISAM儲存引擎」</a>。</p>
			<p>如果您需要在不同的架構之間轉移資料庫，可以使用<strong><span>mysqldump</span></strong>建立含有<span>SQL</span>語句的檔案。然後您可以將檔案轉移到其它機器上，並將它輸入到<span>MySQL</span>客戶端。</p>
			<p>使用<strong><span>mysqldump --help</span></strong>來看有哪些選項可用。如果您正將數據移動到更新版本的<span>MySQL</span>，您應當使用<strong><span>mysqldump
			</span><span>–<span>opt</span></span><span>來</span></strong>利用各種最佳化性能來產生更小、可以更快處理的轉儲檔案。</p>
			<p>在兩台機器之間移動資料庫的最簡單<span>(</span>儘管不是最快<span>)</span>的方法是在資料庫所在的機器上運行下面的命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin -h &#39;<i>other_hostname</i>&#39; create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqldump --opt <i>db_name</i> | mysql -h &#39;<i>other_hostname</i>&#39; <i>db_name</i></span></b></span></pre>
			<p>如果您想要從遠程機器通過慢速網絡複製資料庫，可以使用：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqldump -h &#39;<i>other_hostname</i>&#39; --opt --compress <i>db_name</i> | mysql <i>db_name</i></span></b></span></pre>
			<p>
			還可以將結果保存到檔案中，然後將檔案轉移到目標機器上並將檔案裝載到資料庫中。例如，可以在源機器上使用下面的命令將資料庫備份到檔案中：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqldump --quick <i>db_name</i> | gzip &gt; <i>db_name.contents</i>.gz</span></b></span></pre>
			<p><span>(</span>該例子中建立的檔案是壓縮格式）<span>。</span>將含有資料庫內容的檔案到目標機上並運行命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i></span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>gunzip &lt; <i>db_name.contents</i>.gz | mysql <i>db_name</i></span></b></span></pre>
			<p>還可以使用<strong><span>mysqldump</span></strong>和<strong><span>mysqlimport</span></strong>來轉移資料庫。對於大的資料表，比只是使用<strong><span>mysqldump</span></strong>要快得多。在下面的命令中，<span>DUMPDIR</span>代資料表用來保存<b><span>mysqld<strong><span>ump</span></strong></span></b>輸出的目錄全路徑名。</p>
			<p>首先，建立保存輸出檔案的目錄並備份資料庫：</p>
			<pre><span>shell&gt; </span><span><b><span>mkdir DUMPDIR</span></b></span></pre>
			<pre><span>shell&gt;<b>mysqld</b></span><span><b><span>ump --tab=DUMPDIR <i>db_name</i></span></b></span></pre>
			<p>然後將<span>DUMPDIR</span>目錄中的檔案轉移到目標機上相應的目錄中並將檔案裝載到<span>MySQL</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>mysqladmin create <i>db_name</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # create database</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>cat DUMPDIR/*.sql | mysql <i>db_name</i>&nbsp;&nbsp; # create tables in database</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysqlimport <i>db_name</i> DUMPDIR/*.txt&nbsp;&nbsp; # load data into tables</span></b></span></pre>
			<p>不要忘記複製<span>MySQL</span>資料庫，因為授權資料表保存在該資料庫中。您可能需要在新機器上用<span>MySQL
			</span>
			<span>root</span>用戶運行命令，直到產生<span>MySQL</span>資料庫。</p>
			<p>將<span>mysql</span>資料庫導入目標機器後，執行<b><span>mysqladmin<strong><span> 
			flush-privileges</span></strong></span></b>，以便伺服器重載授權資料表訊息。</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="downgrading"></a>
		2.11.&nbsp;降級MySQL</h2></div></div></div><a class="indexterm" name="id2724906"></a>
		<p>本節描述了舊版本<span>MySQL</span>比新版本工作得好的情況下，如何降級到舊的<span>MySQL</span>版本。</p>
		<p>如果您在同一發佈系列<span>(</span>例如，從<span> 5.0.13 </span>
		到<span>5.0.12)</span>內降級，一般規則是只需要在舊版本的頂部安裝新的二進制。不需要對資料庫進行任何操作。但是，最好是先進行備份。</p>
		<p>下面的項列出了進行降級時應執行的操作：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>閱讀您將要降級的發佈系列的升級部分，確定它沒有您需要的功能。<a href="#upgrade" title="2.10. Upgrading MySQL">2.10節，「升級MySQL」</a>。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>如果該版本有降級部分，您也應當閱讀。</p>
		<p>只要<span>MySQL</span>版本屬於相同的發佈系列，您總是可以在不同的版本之間的相同架構上移動<span>MySQL</span>格式檔案和數據檔案。目前的產品發佈系列是<span>5.1</span>。</p>
		<p>如果您從一個發佈系列降級到另一個發佈系列，資料表儲存格式可能不兼容。在這種情況下，您可以在降級嵌使用<strong><span>mysqldump</span></strong>來轉儲資料表。降級後，使用<strong><span>mysql</span></strong>或<span>mysqlimport</span>重載轉儲檔案來重新建立資料表。請參見<a href="#upgrading-to-arch" title="2.10.3. Copying MySQL Databases to Another Machine">2.10.3節，「將MySQL資料庫拷貝到另一台機器」</a>。</p>
		<p>資料表格式不向下兼容的一般跡像是降級時不能打開資料表。在這種情況下，使用下面的過程：</p>
		<p><span>1.<span>&nbsp;&nbsp;&nbsp;
		</span></span>停止您想要降級到的舊的<span>MySQL</span>伺服器。</p>
		<p><span>2.<span>&nbsp;&nbsp;&nbsp;
		</span></span>重新啟動將被降級的新的<span>MySQL</span>伺服器。</p>
		<p><span>3.<span>&nbsp;&nbsp;&nbsp;
		</span></span>使用<strong><span>mysqldump</span></strong>建立一個<span>dump</span>（轉儲）檔案來轉儲不能被舊伺服器訪問的所有資料表。</p>
		<p><span>4.<span>&nbsp;&nbsp;&nbsp;
		</span></span>停止新<span>MySQL</span>伺服器，重新啟動舊<span>MySQL</span>伺服器。</p>
		<p>將<span>dump</span>（轉儲）檔案重載入舊伺服器。資料表應當可訪問。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="operating-system-specific-notes"></a>
		2.12.&nbsp;具體作業系統相關的注意事項</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#linux">
			2.12.1. Linux注意事項</a></span></dt><dt><span class="section">
			<a href="#mac-os-x">
			2.12.2. Mac OS X注意事項</a></span></dt><dt><span class="section">
			<a href="#solaris">
			2.12.3. Solaris注意事項</a></span></dt><dt><span class="section">
			<a href="#bsd-notes">
			2.12.4. BSD注意事項</a></span></dt><dt><span class="section">
			<a href="#other-unix-notes">
			2.12.5. 其它Unix注意事項</a></span></dt><dt><span class="section">
			<a href="#os-2">
			2.12.6. OS/2注意事項</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="linux"></a>
			2.12.1.&nbsp;Linux注意事項</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#linux-os">
				2.12.1.1. Linux作業系統注意事項</a></span></dt><dt><span class="section">
				<a href="#binary-notes-linux">
				2.12.1.2. Linux二進制分發版說明</a></span></dt><dt><span class="section">
				<a href="#source-notes-linux">
				2.12.1.3. Linux原始碼分發版說明</a></span></dt><dt><span class="section">
				<a href="#linux-post-install">
				2.12.1.4. Linux後期安裝注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-x86">
				2.12.1.5. Linux x86注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-sparc">
				2.12.1.6. Linux SPARC注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-alpha">
				2.12.1.7. Linux Alpha注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-powerpc">
				2.12.1.8. Linux PowerPC注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-mips">
				2.12.1.9. Linux MIPS注意事項</a></span></dt><dt><span class="section">
				<a href="#linux-ia-64">
				2.12.1.10. Linux IA-64注意事項</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本節討論發現的在<span>Linux</span>中出現的問題。前面幾節描述了一般作業系統相關的問題，使用二進制或原始碼分發版時可能出現的問題和安裝後的問題。後面幾節討論在具體<span>Linux</span>平台上出現的問題。<p>
				請注意這些問題的大多數出現在舊的<span>Linux </span>
				版本中。如果您運行最新的版本，可能不會發現這些問題。</p>
				<h4 class="title"><a name="linux-os"></a>2.12.1.1.&nbsp;Linux作業系統注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>至少需要<span>Linux 2.0</span>版本。<p>
				<strong><span>警告：</span></strong>我們已經發現在<span>SMP</span>系統中<span>Linux 
				2.2.14 </span>和<span>MySQL</span>會出現一些奇怪的問題。我們還收到來自一些<span>MySQL</span>用戶的報告說他們用內核<span>2.2.14</span>使用<span>MySQL</span>時遇到了嚴重的穩定性問題。如果您正使用該內核，應當升級到<span>2.2.19 
				(</span>或更新版<span>)</span>或到<span>2.4</span>內核。如果您有一個多<span>CPU</span>盒，應當考慮使用<span>2.4</span>，因為它能大大加速。您的系統將會更穩定。</p>
				<p>當使用<span>LinuxThreads</span>時，您應當至少可以看見有三個<b><span>mysqld</span></b><span>
				</span>程序在運行。這些實際上是線程。有一個線程是<span>LinuxThreads</span>管理器，一個線程處理連接，另一個線程處理告警和信號。</p>
				<h4 class="title"><a name="binary-notes-linux"></a>
				2.12.1.2.&nbsp;Linux二進制分發版說明</h4></div></div></div><a class="indexterm" name="id2725148"></a><a class="indexterm" name="id2725159"></a></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>的<span>Linux-Intel</span>二進制和<span>RPM</span>發佈配置為最高的可能速度。我們一直在嘗試使用可用的最快的穩定的編譯器。<p>
				二進制發佈用<span>-static</span><span>is</span>連接，說明一般情況您不需要關心系統庫的版本。您也不需要安裝<span>LinuxThreads</span>。用<span>-static</span><span>is</span>連接的程式稍微大於動態連接程式，但也稍微快一些<span>(3-5%)</span>。但是，靜態連接程式的一個問題是您不能使用用戶定義函數<span>(UDF)</span>。如果您將要寫或使用<span>UDF(</span>只適用於<span>C</span>或<span>C++
				</span>編程人員<span>)</span>，您必須使用動態連結自己編譯<span>MySQL</span>。</p>
				<p>二進制分發版的一個已知問題是在使用<span>libc</span>的舊的<span>Linux</span>系統<span>(</span>例如<span>Red 
				Hat 4.x</span>或<span>Slackware)</span>上，您會遇到一些<span>(</span>非致命<span>)</span>主機名解析問題。如果系統使用<span>libc</span>沒有使用<span>glibc2,</span>您可能會遇到一些主機名解析和<span>getpwnam()</span>問題。這是因為<span>glibc</span>依靠一些外部庫來執行主機名解析和<span>getpwent()</span><span>,
				</span>即使用<span>-static</span><span>is</span>編譯也如此。這些問題出現在兩個方面：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當運行<strong><span>mysql_install_db</span></strong><b>時，</b>您會看見下面的錯誤消息：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>Sorry, the host &#39;</span><span><i><span>xxxx</span></i></span><span>&#39; could not be looked up</span></pre>
				<p>您可以通過執行<b><span>mysql_install_db<strong><span> 
				--force</span></strong></span></b>來解決該問題，並不在<b><span>mysql_install_db</span></b>中執行<strong><span  style="font-family:
細明體">resolveip</span></strong>測試。不利方面是 您不能在授權資料表中使用主機名：除了<span>localhost</span>，必須使用<span>IP</span>號。如果您正使用不支援<span><span>—</span><span>force</span></span>的舊版本<span>MySQL</span>，必須使用文本編輯器手動卸載<span>mysql_install</span>中的<span>resolveip</span>測試。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>當您嘗試用<span>--user</span>選項運行<strong><span>mysqld</span><span>時</span></strong>您還會看見下面的錯誤：</p>
				<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>getpwnam: No such file or directory</span></pre>
				<p>要解決該問題，使用<span>su</span>命令啟動<strong><span>mysqld</span></strong>，不要指定<span>--user</span>選項。這樣使系統自己更改<b><span>mysqld</span></b>程序的用戶<span>ID</span>，<b><span>mysqld</span></b>不再需要這樣做。</p>
				<p>另一個解決辦法可以解決兩個問題，即不使用二進制分發版。獲得<span>MySQL</span>原始碼分發版<span>(RPM</span>或<span>tar.gz</span>格式<span>)</span>並安裝。</p>
				<p>在一些<span>Linux 2.2</span>版本中，當客戶端通過<span>TCP/IP</span>建立大量與<b><span>mysqld</span></b>伺服器的新連接時，您可能會遇到錯誤<span>Resource 
				temporarily unavailable</span>。該問題是<span>Linux</span>在您關閉<span>TCP/IP</span>套接字的時間和系統實際釋放該套接字的時間之間有一個延遲。只有有限數目的<span>TCP/IP</span>時段有空間，因此如果客戶端試圖在短時間內建立許多新<span>TCP/IP</span>連接時，您會遇到源不可用錯誤。例如，當您通過<span>TCP/IP</span>運行<span>MySQL</span><span> 
				test-connect</span>基準測試時您會看見該錯誤。</p>
				<p>我們已經多次向不同的<span> Linux </span>
				郵件列資料表詢問該問題，但是一直沒有找到合適的解決辦法。唯一知道的「<span class="quote">解決辦法</span>」是客戶端使用永久連接，或，如果您在同一機器上運行資料庫伺服器和客戶端，使用<span>Unix</span>套接字檔案來連接，不要使用<span>TCP/IP</span>連接。</p>
				<h4 class="title"><a name="source-notes-linux"></a>
				2.12.1.3.&nbsp;Linux原始碼分發版說明</h4></div></div></div><a class="indexterm" name="id2725403"></a><a class="indexterm" name="id2725413"></a></div><div class="section"><div class="titlepage"><div><div>
				下面關於<span>glibc</span>的注意事項只適用您自己構建<span>MySQL</span>時。如果在<span>x86</span>機器上運行<span>Linux</span>，在大多數情況下最好使用我們的二進制。我們將二進制連接到了我們能找到的打了最好補丁的<span>glibc</span>版本，並使用了最優的編譯器選項，盡力使它適合高負荷伺服器。對於典型用戶，即使對於超過<span>2GB</span>限制的大量並行連接或資料表設置，在大多數情況下，我們的二進制仍然是最佳選擇。閱讀下面的內容後，如果您不清楚怎樣做，先試用我們的二進制看它是否滿足您的需求。如果您發現它不夠完善，那麼您可以嘗試您自己的構建。在這種情況下，我們很希望能看到相關註釋，以便我們下次可以構建更好的二進制。<p>
				<strong>
				<span>
				MySQL</span></strong>在<span>Linux</span>上使用<span> 
				LinuxThreads </span>。如果您正在使用一個沒有<span>glibc2</span>的老的<span>Linux</span>版本，您必須在嘗試編譯<strong><span>MySQL</span></strong>前安裝<span>LinuxThreads</span>。您可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/os-linux.html"><span>
				<u><span style="color:blue">
				http://dev.mysql.com/downloads/os-linux.html</span></u></span></a></span>獲得<span>LinuxThreads</span>。</p>
				<p>注意：當您執行<span>INSERT 
				DELAYED</span>時，所用的包括<span>2.1.1</span>及以前的<span>glibc</span>版本在<span><span>pthread_</span><span>互斥<span>_timedwait()</span></span></span>處理上有一個致命錯誤，如果您正在使用<span>INSERT 
				DELAYED</span>，我們建議<strong><span>先升級</span></strong><span>glibc</span>。</p>
				<p>請注意<span>Linux </span>內核和<span>LinuxThreads</span>庫預設情況下最多可以處理<span>1,024</span>個線程。如果您計劃使用超過<span>1,000</span>個並行連接，需要對<span>LinuxThreads</span>進行一些更改，如下所示：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>將<span>sysdeps/unix/sysv/linux/bits/local_lim.h</span>中的<span>PTHREAD_THREADS_MAX
				</span>增加到<span>4096</span>，將<span>LinuxThreads/internals.h</span><span>
				</span>中的<span>STACK_SIZE</span>減少到<span>256KB</span>。路徑相對於<span>glibc</span>的根目錄。<span>(</span>請注意如果<span>STACK_SIZE</span>為預設值<span>2MB</span>，<span>MySQL</span>有<span>600-1000</span>個連接時不穩定）<span>。</span></p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>重新編譯<span>LinuxThreads</span>，生成新的<span>libpthreads.a</span>庫，並重新連接<span>MySQL</span>。</p>
				<p>可以從<span><a target="_top"  href="http://www.volano.com/linuxnotes.html">http://www.volano.com/linuxnotes.html<span>
				</span></a></span>查閱關於<span>LinuxThreads</span>線程限制的詳細訊息。</p>
				<p>還有一個問題會嚴重影響<span>MySQL</span>的性能，特別是在<span>SMP</span>系統中。在<span>glibc</span><span> 
				2.1</span>的<span>LinuxThreads</span>中，對於擁有很多只是短時間內佔有互斥體的線程的程式，不能很好地執行互斥。結果出現荒謬的現象：在許多情況下，如果您使用未修改的<span>LinuxThreads</span>連接<span>MySQL</span>，從<span>SMP</span>中去掉卸載處理器實際上會提高<span>MySQL</span>的性能。我們提供了一個<span>glibc</span><span> 
				2.1.3</span>的補丁來糾正該行為<span>(<a target="_top"  href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch<span>
				</span></a>)</span>。</p>
				<p>在<span>glibc</span><span> 
				2.2.2</span>中<span>,MySQL</span>使用修改後的互斥，這樣甚至比打了補丁的<span>glibc</span><span> 
				2.1.3</span>還要好得多。但是，需要注意的是在某些條件下，當前<span>glibc</span><span> 
				2.2.2</span>中的互斥代碼會高旋，影響了<span>MySQL</span>的性能。通過最佳化<b><span>mysqld</span></b>程序到最高優先級，可以降低在這種情況下出現這種問題的可能性。我們還可以通過補丁來糾正高旋問題，可以從<span><a target="_top"  href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch</a></span>下載。它集成高旋的糾正、線程最大數目和堆棧空間於一體。您需要用補丁<span>patch 
				-p0 &lt;/tmp/linuxthreads-2.2.2.patch</span>在<span>LinuxThreads</span>目錄下使用。我們 
				希望在將來的<span>glibc</span><span> 
				2.2</span>發佈中能以某種形式將它包括進來。在任何情況下，如果您連接<span>glibc</span><span> 
				2.2.2,</span>仍然需要糾正<span>STACK_SIZE</span>和 
				<span>
				<span>PTHREAD_THREADS_MAX</span><span>。</span></span>我們希望在將來能將預設值糾正到某種程度上可以接受的值，適合高負荷<span>MySQL</span>設置，因此用來產生您自己的構建的<span>&nbsp;
				</span>命令可以簡化到到<strong><span>./configure; 
				make; make install</span></strong>。</p>
				<p>我們建議您使用這些補丁來構建專用的<span>libpthreads.a</span>靜態版本，並只使用它同<span>MySQL</span>實現靜態連結。我們知道這些補丁對於<span>MySQL</span>很安全 
				並大大改善了它的性能，但是我們還不能斷言它在其它應用程式上的效果如何。如果您需要將其它使用<span>LinuxThreads</span>的應用程式同打了補丁的靜態版本的庫連接，或構建一個打了補丁的共享版本，並將它安裝到系統中，您將自己承擔風險。</p>
				<p>如果您在安裝<span>MySQL</span>的過程中遇到任何奇怪的問題，或一些常用實用工具被懸掛起來，很可能是庫或編譯器相關問題。在這種情況下，使用我們的二進制來解決。</p>
				<p>如果您連接您自己的<span>MySQL</span>客戶端程式，運行時您會看見下面的錯誤：</p>
				<pre><span>ld.so.1: fatal: libmysqlclient.so.#:</span></pre>
				<pre><span>open failed: No such file or directory</span></pre>
				<p>使用下面的方法可以避免該問題：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>-Wl,r/full/path/to/libmysqlclient.so</span>標記連接客戶端，不要使用<span>-Lpath</span><span>)</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>將<span>libmysqclient.so</span>複製到<span>/usr/lib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>運行客戶端程式前，將<span>libmysqlclient.so</span>所在目錄的路徑名增加到<span>LD_RUN_PATH</span>環境變數。</p>
				<p>如果使用<span>Fujitsu</span>編譯器<span> (</span><span>fcc/FCC</span><span>)</span>，編譯<span>MySQ</span>時可能會出現一些問題，因為<span>Linux</span>頭檔案主要面向<strong><span>gcc</span></strong>。以下的<strong><span>configure</span></strong>行應當結合<strong><span>fcc/FCC</span></strong>使用：</p>
				<pre><span>CC=fcc CFLAGS=&quot;-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -DCONST=const -DNO_STRTOLL_PROTO&quot; \</span></pre>
				<pre><span>CXX=FCC CXXFLAGS=&quot;-O -K fast -K lib \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; &#39;-D_EXTERN_INLINE=static __inline&#39;&quot; \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --enable-assembler \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory</span></pre>
				<h4 class="title"><a name="linux-post-install"></a>
				2.12.1.4.&nbsp;Linux後期安裝注意事項</h4></div></div></div>
				<p>在<span>MySQL</span>安裝目錄或<span>MySQL</span>原始碼樹下的<span>support-files</span>目錄下可以找到<strong><span  style="font-family:
細明體">mysql.server</span></strong>。您可以將它安裝為<span>/etc/init.d/mysql</span>，以便自動啟動和關閉<span>MySQL</span>。請參見<a href="#automatic-start" title="2.9.2.2. Starting and Stopping MySQL Automatically">2.9.2.2節，「自動啟動和停止MySQL」</a>。</p>
				<p>如果<span>MySQL</span>不能打開足夠的檔案或連接，可能是您沒有將<span>Linux</span>配置為處理足夠的檔案。</p>
				<p>在<span>Linux 2.2</span>及以上版本中，您可以檢查分配的檔案的數目：</p>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/file -max</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/dquot-max</span></b></span></pre>
				<pre><span>shell&gt; </span><span><b><span>cat /proc/sys/fs/super-max</span></b></span></pre>
				<p>如果有超過<span>16MB</span>的內存，應當在啟動指令中增加如下內容<span>(</span>例如，在<span>SuSE 
				Linux</span>中：<span>/etc/init.d/boot.local</span><span>)</span>：</p>
				<pre><span>echo 65536 &gt; /proc/sys/fs/file-max</span></pre>
				<pre><span>echo 8192 &gt; /proc/sys/fs/dquot-max</span></pre>
				<pre><span>echo 1024 &gt; /proc/sys/fs/super-max</span></pre>
				<p>還可以用<span>root</span>從命令行運行<span>echo</span>命令，但是下一次重新啟動計算機時這些設定值會丟掉。</p>
				<p>另外，可以使用許多<span>Linux</span>分發版使用的<span>sysctl</span>工具設置啟動參數<span>(</span>包括<span>SuSE 
				Linux 8.0</span>和以後版本<span>)</span>。將下面的值放到檔案 
				<span>/etc/sysctl.conf</span>中：</p>
				<pre><span># Increase some values for MySQL</span></pre>
				<pre><span>fs.file-max = 65536</span></pre>
				<pre><span>fs.dquot-max = 8192</span></pre>
				<pre><span>fs.super-max = 1024</span></pre>
				<p>您還應將以下內容加入<span>/etc/my.cnf</span>：</p>
				<pre><span>[<b>mysqld</b>_safe]</span></pre>
				<pre><span>open-files-limit=8192</span></pre>
				<p>這樣伺服器連接和打開檔案的總數目可以達到<span>8,192</span>。</p>
				<p><span>LinuxThreads</span>的<span>STACK_SIZE</span>常數控制在尋址空間中線程堆棧的佔用空間。它需要足夠大，以保證每個線程堆棧有足夠的空間，但是應足夠小，防止某些線程的堆棧運行全局<b><span>mysqld</span></b>數據。遺憾的是，根據我們的發現，如果您用<span>mmap()</span>映射目前正使用的尋址，<span>Linux</span>成功運行<span>&nbsp;
				</span>後不會映射映射區，將會清空整個地址頁上的數據而不會返回錯誤訊息。因此，<b><span>mysqld</span></b>或其它線程應用程式的安全依靠建立線程的代碼的「<span class="quote">紳士</span>」行為。用戶必須採取措施以確保在任何時間運行線程的數目相對線程堆棧應足夠低，以防止全局堆內存。使用<b><span>mysqld</span></b>時，您應當為<span>max_connections</span>變數設置合理的值強制該行為。</p>
				<p>如果您自己構建<span>MySQL</span>，您可以為<span>LinuxThreads</span>打補丁以便更好地使用堆棧。請參見<a href="#source-notes-linux" title="2.12.1.3. Linux Source Distribution Notes">2.12.1.3節，「Linux原始碼分發版說明」</a>。如果您不想為<span>LinuxThreads</span>打補丁，您應當將<span>max_connections</span>的值設置為不超過<span>500</span>。如果您有大的關鍵字緩衝區、大的堆內存資料表，或其它使<b><span>mysqld</span></b>分配大量內存的東西，或如果您用<span>2GB</span>的補丁運行<span>2.2</span>內核，<span>max_connections</span>的值應當更低。如果您正使用我們的二進制或<span>RPM</span>版本，可以安全地將<span>max_connections</span>設置為<span>1500</span>（假定沒有大的關鍵字緩衝區或有大量數據的堆內存資料表。將<span>LinuxThreads</span>中的<span>STACK_SIZE</span>降低得越低，可以安全地建立越多的線程。我們推薦的值的範圍為<span>128KB</span>到<span>256KB</span>。</p>
				<p>如果您正使用大量的並行連接，在<span>2.2</span>內核中您可能會遇到一個「特性」，即通過對程序的分支或克隆子程序的行為進行罰分，來試圖防止轟炸攻擊。這樣您增加並行客戶端的數量時，<span>MySQL</span>不能正確響應。在單<span>CPU</span>系統中，我們已經發現該現象，即線程建立地很慢；連接<span>MySQL</span>的時間很長<span>(</span>長達<span>1</span>分鐘<span>)</span>，並且關閉的時間也很長。在多<span>CPU</span>系統中，我們已經觀察到隨著客戶端數目的增加，查詢速度逐漸下降。在尋求解決辦法的過程中，我們收到了一個用戶的內核補丁，他聲稱該補丁可以解決他的問題。從<span><a target="_top"  href="http://www.mysql.com/Downloads/Patches/linux-fork.patch"><span><u><span style="color:blue">http://www.mysql.com/Downloads/Patches/linux-fork.patch</span></u></span></a></span>可以下載該補丁。我們已經在開發和生產系統上對該補丁進行了廣泛的測試。它可以大大改善<span>MySQL</span>的性能，而不會造成任何問題，我們向仍然在<span>2.2</span>內核運行高負荷伺服器的用戶推薦它。</p>
				<p>在<span>2.4</span>內核中已經對該問題進行了修復，因此如果您不滿意當前系統的性能，不要為<span>2.2
				</span>內核打補丁，在<span>SMP</span>系統中升級到<span>2.4</span>版要容易地多，升級不僅可以修復錯誤，還可以使<span>SMP</span>更好地加速。</p>
				<p>我們已經在雙<span>CPU</span>機器上在<span>2.4</span>內核中對<span>MySQL</span>進行了測試，發現<span>MySQL</span>的比例要好得多。<span>1,000</span>名客戶查詢時，還看不到速度有實質上的下降，<span>MySQL</span>的比例因子<span>(</span>最大吞吐量與一個客戶端的吞吐量的比例<span>)</span>為<span>180%</span>。我們在四<span>-CPU</span>系統中也觀察到了類似的結果：當客戶數目上升到<span>1,000</span>名時還沒有實質上的減慢<span>,
				</span>比例因子為<span>300%</span>。根據這些結果，對於使用<span>2.2</span>內核的高負荷<span>SMP</span>伺服器，我們絕對建議升級到<span> 
				2.4</span>內核。</p>
				<p>我們已經發現，在<span>2.4</span>內核中應使用可能的最高優先級來運行<b><span>mysqld</span></b>程序，以獲得最佳性能。可以通過為<strong><span>mysqld_safe</span></strong>加<span>renice 
				-20 $$</span>命令來實現。在四<span>-CPU</span>系統中的測試中，提高優先級在<span>400</span>個客戶時會使吞吐量增加<span>60%</span>。</p>
				<p>我們目前還想搜集關於<span>MySQL</span>在<span>four-way</span>和<span>eight-way</span>系統上用<span>2.4</span>內核執行的性能的更詳細訊息。如果您訪問了這些系統並進行了一些基準測試，請將結果用<span>email</span>發送到<span>&lt;<a  href="mailto:benchmarks@mysql.com">benchmarks@mysql.com</a>&gt;</span>。我們將對它們進行審查以包括進手冊中。</p>
				<p>如果用<strong><span>ps</span></strong>運行<b><span>mysqld</span></b>伺服器程序時發現程序死掉了，一半是<span>MySQL</span>中有問題或資料庫資料表崩潰了。請參見<a href="problems.html#crashing" title="A.4.2. What to Do If MySQL Keeps Crashing">A.4.2節，「如果MySQL依然崩潰，應作些什麼」</a>。</p>
				<p><span>如果<b><span>mysqld</span></b>死掉並給出</span><span  >SIGSEGV</span><span>信號，要想在<span>Linux</span>中對內核進行調試，您可以用</span><span>--core-file</span><span>選項啟動<strong><span>mysqld</span></strong>。注意您還可能需要通過向</span><strong><span>mysqld_safe</span></strong><span>新增</span><strong><span>ulimit 
				-c 1000000</span></strong><span>或用</span><span>--core-file-size=1000000</span><span>啟動</span><strong><span>mysqld_safe</span></strong><span>來加大內核檔案的大小。請參見</span><a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a><span>。</span></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-x86"></a>
				2.12.1.5.&nbsp;Linux x86注意事項</h4></div></div></div>
				<p><span>MySQL</span>需要<span>5.4.12</span>或更新版本的<span>libc</span>。已知它可以在<span>libc</span><span> 
				5.4.46</span>中工作。<span>glibc</span><span> 
				2.0.6</span>和更新版本應當也可以工作。<span>Red Hat</span>的<span>glibc</span><span> 
				RPM</span>有一些問題，因此如果您遇到問題，應看看是否有更新版。已知<span>glibc</span><span> 
				2.0.7-19</span>和<span>2.0.7-29 RPM</span>可以工作。</p>
				<p>如果您正使用<span>Red Hat 8.0</span>或更新的<span>glibc</span><span> 
				2.2.x</span>庫，您會看見<b><span>mysqld</span></b>執行<span>gethostbyaddr()</span>時會死掉。這是因為新的<span>glibc</span>庫在執行該使用時需要大於<span>128KB</span>的堆棧空間。要想修復該問題，用<span>--thread-stack=192K</span>選項啟動<strong><span>mysqld</span></strong>。<span>(</span>在<span>MySQL 
				4</span>以前的版本中應使用<span><span>-O 
				thread_stack=192K</span><span>）</span></span><span>。
				</span>在<span>MySQL 4.0.10</span>和以上版本中，該堆棧空間值即為預設值，因此您不會看見該問題。</p>
				<p>如果您正使用<strong><span  style="font-family:
細明體">gcc</span></strong><span> 3.0</span>和以上版本編譯<span>MySQL</span>，在編譯<span>MySQL</span>前您必須先安裝<span>libstdc++v3</span>庫；如果不這樣做，在聯接過程中會遇到關於丟失<span>__cxa_pure_virtual</span>符號的錯誤。</p>
				<p>在一些舊的<span>Linux</span>分發版中，<strong><span>configure</span></strong>會生成如下錯誤：</p>
				<pre><span>Syntax error in sched.h. Change _P to __P in the</span></pre>
				<pre><span>/usr/include/sched.h file.</span></pre>
				<pre><span>See the Installation chapter in the Reference Manual.</span></pre>
				<p>只需要按照錯誤消息的提示操作。對只有一條下劃線的<span>_P</span>名再增加一條下劃線，然後重新嘗試。</p>
				<p>編譯時可能會出現警告。下面的警告可以忽略：</p>
				<pre><b><span>mysqld</span></b><span>.cc -o objs-thread/<b>mysqld</b>.o</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc: In function `void init_signals()&#39;:</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc:315: warning: assignment of negative value `-1&#39; to</span></pre>
				<pre><span>`long unsigned int&#39;</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc: In function `void * signal_hand(void *)&#39;:</span></pre>
				<pre><b><span>mysqld</span></b><span>.cc:346: warning: assignment of negative value `-1&#39; to</span></pre>
				<pre><span>`long unsigned int&#39;</span></pre>
				<p>如果<b><span>mysqld</span></b>啟動時總是出現轉儲內核， 
				問題可能是您使用了舊的<span>/lib/libc.a</span>。嘗試重新對其命名，然後刪掉<span>sql/<b>mysqld</b></span>並重新執行<strong><span  style="font-family:
細明體">make install</span></strong>然後再次嘗試。已經報導在部分<span>Slackware</span>安裝中出現了該問題。</p>
				<p>當連結<b><span>mysqld</span></b>時如果出現下面的錯誤，說明<span>libg++.a</span>安裝不正確：</p>
				<pre><span>/usr/lib/libc.a(putc.o): In function `_IO_putc&#39;:</span></pre>
				<pre><span>putc.o(.text+0x0): multiple definiti</span>在<span>of `_IO_putc&#39;</span></pre>
				<p>您可以使用<span>libg++.a</span>運行<strong><span>configure</span></strong>來避免該問題：</p>
				<pre><span>shell&gt; </span><span><b><span>CXX=gcc ./configure</span></b></span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-sparc"></a>
				2.12.1.6.&nbsp;Linux SPARC注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在部分執行過程中，<span>readdir_r()</span>會中斷。現象是<span>SHOW 
				DATABASES</span>語句總是返回空子集。可以在完成配置、進行編譯前從<span>config.h</span>中刪掉<span>HAVE_READDIR_R</span>來修復。<h4 class="title"><a name="linux-alpha"></a>
				2.12.1.7.&nbsp;Linux Alpha注意事項</h4></div></div></div>
				<p>我們已經用我們的基準和測試套件在<span>Alpha</span>中測試了<span>MySQL 
				5.1</span>，看起來工作得不錯。</p>
				<p>我們目前在配置<span>Alpha EV6</span>處理器的<span>Compaq 
				DS20</span>機器上，在<span>SuSE Linux 7.0</span>中對<span>AXP</span>、內核<span>2.4.4-SMP</span>、<span>Compaq 
				C</span>編譯器<span>(V6.2-505)</span>和<span>Compaq 
				C++</span>編譯器<span>(V6.3-006)</span>構建<span>MySQL</span>二進制軟件包。</p>
				<p>您可以從<span><a target="_top"  href="http://www.support.compaq.com/alpha-tools/"><span>
				<u><span style="color:blue">
				http://www.support.compaq.com/alpha-tools/</span></u> </span>
				</a></span>找到上述編譯器。使用這些編譯器，得到的<span>MySQL</span>性能比<strong><span>gcc</span></strong>要好<span>9-14%</span>。</p>
				<p>在<span>Alpha</span>版<span>MySQL</span>中，我們在編譯選項中使用<span>-arch 
				generic</span>標記，可以確保二進制在所有<span>Alpha</span>處理器中運行。我們還採用靜態編譯以避免庫問題。<strong><span>configure</span></strong>命令應為：</p>
				<pre><span>CC=ccc CFLAGS=&quot;-fast -arch generic&quot; CXX=cxx \</span></pre>
				<pre><span>CXXFLAGS=&quot;-fast -arch generic -noexceptions -nortti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>如果想要使用<strong><span  style="font-family:
細明體">egcs</span></strong>，可以使用下面的<strong><span>configure</span></strong>行：</p>
				<pre><span>CFLAGS=&quot;-O3 -fomit-frame-pointer&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fomit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>已知的在<span>Linux-Alpha</span>中運行<span>MySQL</span>的問題：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>gdb 
				4.18 </span>中不能調試線程應用程式。您應當使用<strong><span>gdb</span></strong><span> 
				5.1</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>使用<strong><span>gcc</span></strong>時如果您嘗試靜態連結<b><span>mysqld</span></b>，啟動時映像會導致轉儲內核。換句話說，使用<strong><span>gcc</span></strong>時不要使用<span>--with-mysqld-ldflags=-all-static</span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux-powerpc"></a>
				2.12.1.8.&nbsp;Linux PowerPC注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<span>MySQL</span>應當可以在使用最新<span>glibc</span>安裝軟件包<span>(</span>用<span>glibc</span><span> 
				2.0.7</span>測試<span>)</span>的<span>MkLinux</span>上工作。<h4 class="title"><a name="linux-mips"></a>
				2.12.1.9.&nbsp;Linux MIPS注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				為了使<span>MySQL</span>在<span>Qube2(Linux Mips)</span>上工作，需要最新的<span>glibc</span>庫。已知<span>glibc-2.0.7-29C2</span>可以工作。還必須使用<strong><span>egcs</span></strong><span> 
				C++</span>編譯器<span>(<strong><span>egcs</span></strong> 
				1.0.2-9</span>、<strong><span>gcc</span></strong><span> 
				2.95.2</span>或更新版<span>)</span>。<h4 class="title"><a name="linux-ia-64"></a>
				2.12.1.10.&nbsp;Linux IA-64注意事項</h4></div></div></div>
				<p>要想讓<span>MySQL</span>在<span>Linux IA-64</span>中編譯<span>,</span>我們用 
				<strong><span>gcc</span></strong><span> 
				2.96</span>構建時使用下面的<strong><span>configure</span></strong>命令：</p>
				<pre><span>CC=gcc \</span></pre>
				<pre><span>CFLAGS=&quot;-O3 -fno-omit-frame-pointer&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; &quot;--with-comment=Official MySQL binary&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex</span></pre>
				<p>在<span>IA-64</span>中<span>,MySQL</span>客戶端二進制使用共享庫。這意味著如果您將我們的二進制分發版安裝到<span>/usr/local/mysql</span>之外的其它位置，需要將<span>libmysqlclient.so</span>安裝目錄路徑加到<span>/etc/ld.so.conf</span>檔案或<span>LD_LIBRARY_PATH</span>環境變數中。</p>
				<p>參見<a href="problems.html#link-errors" title="A.3.1. Problems Linking to the MySQL Client Library">A.3.1節，「與MySQL客戶端庫的連結問題」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mac-os-x"></a>
			2.12.2.&nbsp;Mac OS X注意事項</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#mac-os-x-10-x">2.12.2.1. Mac OS X 10.x (Darwin)</a></span></dt><dt><span class="section">
				<a href="#mac-os-x-server">2.12.2.2. Mac OS X Server 1.2 (Rhapsody)</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
			在<span>Mac OS X</span>中，<strong><span>tar</span></strong>不能處理長檔案名。如果您需要解包<span>.tar.gz</span>分發版，應使用<strong><span>gnutar</span></strong>。<h4 class="title"><a name="mac-os-x-10-x"></a>2.12.2.1. Mac OS X 10.x (Darwin)</h4></div></div></div>
			<p><span>MySQL</span>應當可以在<span>Mac OS X 
			10.x(Darwin)</span>中工作，不會有重大問題。</p>
			<p>已知的問題有：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>連接時間<span>(</span><span>wait_timeout</span>、<span>interactive_timeout</span>和<span>net_read_timeout</span><span>)</span>值不理想。</p>
			<p>
			這可能是線程庫中的信號處理問題，信號不能中斷掛起的讀命令，我們希望將來能對線程庫進行更新以修復該問題。</p>
			<p>在<span>Darwin 6.3</span>中用下面的<strong><span>configure</span></strong>行對<span>Mac 
			OS X</span>二進制進行了編譯：</p>
			<pre><span>CC=gcc CFLAGS=&quot;-O3 -fno-omit-frame-pointer&quot; CXX=gcc \</span></pre>
			<pre><span>CXXFLAGS=&quot;-O3 -fno-omit-frame-pointer -felide-constructors \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot; \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --enable-local-infile --disable-shared</span></pre>
			<p>參見<a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">2.5節，「在Mac OS X上安裝MySQL」</a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mac-os-x-server"></a>2.12.2.2. Mac OS X Server 1.2 (Rhapsody)</h4></div></div></div>
				<p>對於當前版本的<span>Mac OS X</span>伺服器，編譯<span>MySQL</span>之前不需要對作業系統進行更改。在伺服器平台上的編譯與客戶端版本<span>Mac 
				OS X</span>相同。</p>
				<p>對於舊的版本<span>(Mac OS X Server 1.2, a.k.a. Rhapsody)</span>，在配置<span>MySQL</span>之前必須先安裝<span>pthread</span>軟件包。</p>
				<p>參見<a href="#mac-os-x-installation" title="2.5. Installing MySQL on Mac OS X">2.5節，「在Mac OS X上安裝MySQL」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>
			2.12.3.&nbsp;Solaris注意事項</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#solaris-2-7">
				2.12.3.1. Solaris 2.7/2.8注意事項</a></span></dt><dt><span class="section">
				<a href="#solaris-x86">
				2.12.3.2. Solaris x86注意事項</a></span></dt></dl></div><a class="indexterm" name="id2726836"></a><a class="indexterm" name="id2726843"></a><a class="indexterm" name="id2726853"></a><a class="indexterm" name="id2726863"></a><a class="indexterm" name="id2726873"></a><a class="indexterm" name="id2726880"></a>
			<p>在<span>Solaris</span>中，甚至在解壓縮<span>MySQL</span>分發版時，您也會遇到問題，因為<span>Solaris
			<strong><span>tar</span></strong></span>不能處理長檔案名。這說明解壓縮<span>MySQL</span>分發版時會遇見錯誤。</p>
			<p>如果出現這種問題，必須使用<span>GNU <strong>
			<span>tar</span></strong>(<strong><span style="font-family:
細明體">gtar</span></strong>)</span>來解壓縮分發版。可以從<span><a target="_top"  href="http://dev.mysql.com/downloads/os-solaris.html">http://dev.mysql.com/downloads/os-solaris.html</a></span>找到預編譯的<span>Solaris</span>版本。</p>
			<p><span>Sun</span>原生線程只在<span>Solaris 2.5</span>和更高版本中工作。對於版本<span>2.4</span>和更早版本，<span>MySQL</span>自動使用<span>MIT-pthreads</span>。請參見<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5節，「MIT-pthreads注意事項」</a>。</p>
			<p>如果您運行<strong><span  style="font-family:
細明體">configure</span></strong>時遇到下面的錯誤，說明編譯器安裝得有問題：</p>
			<pre><span>checking for restartable system calls... configure: error can not</span></pre>
			<pre><span>run test programs while cross compiling</span></pre>
			<p>在這種情況下，應當將編譯器升級到較新的版本。還可以在<span>config.cache</span>檔案中插入下面的行來解決該問題：</p>
			<pre><span>ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls=&#39;no&#39;}</span></pre>
			<p>如果在<span>SPARC</span>上使用<span>Solaris</span>，建議使用編譯器<strong><span>gcc</span></strong><span> 
			2.95.2</span>或<span>3.2</span>。可以從<span><a target="_top"  href="http://gcc.gnu.org/">http://gcc.gnu.org/</a></span>下載。請注意<strong><span>egcs</span></strong><span> 
			1.1.1</span>和<strong><span>gcc</span></strong><span> 
			2.8.1</span>不能在<span>SPARC</span>上可靠地工作。</p>
			<p>當使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>時建議的<strong><span>configure</span></strong>行：</p>
			<pre><span>CC=gcc CFLAGS=&quot;-O3&quot; \</span></pre>
			<pre><span>CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors -fno-exceptions -fno-rtti&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --with-low-memory \</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; --enable-assembler</span></pre>
			<p>如果您使用<span>UltraSPARC</span>系統，在<span >CFLAGS</span>和<span >CXXFLAGS</span>環境變數中加上<span><span>-mcpu=v8 
			-Wa,-xarch=v8plusa</span><span>，</span></span>性能可以提高<span>4%</span>。</p>
			<p>如果您有<span>Sun Forte 5.0(</span>或更新版<span>)</span>編譯器，可以運行：</p>
			<pre><span>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt&quot; \</span></pre>
			<pre><span>CXX=CC CXXFLAGS=&quot;-noex -mt&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
			<p>要想用<span>Sun Forte </span>編譯器建立<span>64-</span>位二進制，使用下面的配置選項：</p>
			<pre><span>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt -xarch=v9&quot; \</span></pre>
			<pre><span>CXX=CC CXXFLAGS=&quot;-noex -mt -xarch=v9&quot; ASFLAGS=&quot;-xarch=v9&quot; \</span></pre>
			<pre><span>./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
			<p>要想使用<strong><span>gcc</span></strong>建立<span>64-</span>位<span>Solaris</span>二進制，在<span >CFLAGS</span>和<span><span>CXXFLAGS</span>中</span>增加<span>-m64</span>，並從<strong><span>configure</span></strong>行刪掉<span>--enable-assembler</span>。</p>
			<p>在<span>MySQL</span>基準測試中，在<span>UltraSPARC</span>上使用<span>32</span>位模式的<span>Forte 
			5.0</span>，同使用帶<span>-mcpu</span>標記的<strong><span>gcc</span></strong><span> 
			3.2</span>比較，速度提高了<span>4%</span>。</p>
			<p>如果建立了<span>64</span>位的<b><span>mysqld</span></b>二進制，速度要比<span>32-</span>位二進制慢<span>4%</span>，但是可以處理更多的線程和內存。</p>
			<p>當為<span>x86_64</span>使用<span>Solaris 10</span>時<span>,</span>您應當安裝用<span>forcedirectio</span>選項保存<span>InnoDB</span>檔案的檔案系統。<span>(</span>預設情況不用該選項來安裝<span>)</span>。如果不這樣做，當在該平台上使用<span>InnoDB
			</span>儲存引擎時將會造成嚴重的性能下降。</p>
			<p>如果<span>fdatasync</span>或<span>sched_yield</span>出現問題，您可以在<strong><span  style="font-family:
細明體">configure</span></strong>行加<span>LIBS=-lrt</span>修復該問題。</p>
			<p>對於早於<span>WorkShop 5.3</span>的編譯器<span>,</span>您可能需要編輯<strong><span>configure</span></strong>指令。應將該行：</p>
			<pre><span>#if !defined(__STDC__) || __STDC__ != 1</span></pre>
			<p>更該為：</p>
			<pre><span>#if !defined(__STDC__)</span></pre>
			<p>如果您用<span>-Xc</span><span>
			</span>選項打開<span>__STDC__</span>，<span>Sun
			</span>編譯器不能用<span>Solaris </span>
			<span>pthreads.h</span><span>
			</span>頭檔案編譯。這是一個<span>Sun </span>問題<span>(</span>中斷的編譯器或<span>include</span>檔案<span>)</span>。</p>
			<p>如果運行<b><span>mysqld</span></b>時出現下面的錯誤消息，原因是您企圖不啟用<span>-mt</span><span> 
			multi-thread</span>選項而用<span>Sun</span>編譯器編譯<span>MySQL</span>：</p>
			<p><span>libc internal error: _rmutex_unlock: rmutex not 
			held</span></p>
			<p>將<span>-mt</span>加到<span>CFLAGS</span>和<span>CXXFLAGS</span>上並重新編譯。</p>
			<p>如果您正使用<strong><span  style="font-family:
細明體">gcc</span></strong>的<span>SFW</span>版本<span>(</span>在<span>Solaris 
			8</span>安裝包內<span>)</span>，運行<strong><span>configure</span></strong>之前您必須將<span>/opt/sfw/lib</span>加到環境變數<span>LD_LIBRARY_PATH</span>上。</p>
			<p>如果您正使用從<span>sunfreeware.com</span>下載的<strong><span>gcc</span></strong>，會遇到許多問題。要想避免，應當在運行機器上重新編譯<strong><span>gcc</span></strong>和<span>GNU
			</span>
			<span>binutils</span>。</p>
			<p>如果您用<strong><span>gcc</span></strong>編譯<span>MySQL</span>時遇到下面的錯誤，說明<strong><span>gcc</span></strong>配置不適合<span>Solaris</span>的版本：</p>
			<pre><span>shell&gt; </span><span><b><span>gcc -O3 -g -O2 -DDBUG_OFF&nbsp; -o thr_alarm ...</span></b></span></pre>
			<pre><span>./thr_alarm.c: In function `signal_hand&#39;:</span></pre>
			<pre><span>./thr_alarm.c:556: too many arguments to function `sigwait&#39;</span></pre>
			<p>在這種情況下正確的做法是得到最新版本的<strong><span>gcc</span></strong>，並用您當前的<strong><span>gcc</span></strong>編譯器編譯。至少對於<span>Solaris 
			2.5,</span>幾乎所有二進製版本的<strong><span>gcc</span></strong>有舊的不再使用的<span>include</span>檔案<span>,</span>中斷了所有使用線程的程式，也可能會中斷其它程式。</p>
			<p><span>Solaris</span>不提供靜態版本的系統庫<span>(</span><span>libpthreads</span>和<span>libdl</span><span>)</span>，因此您不能用<span>--static</span>編譯<span>MySQL</span>。如果您試圖這樣做，會遇到下面的錯誤：</p>
			<pre><span>ld: fatal: library -ldl: not found</span></pre>
			<pre><span>undefined reference to `dlopen&#39;</span></pre>
			<pre><span>cannot find -lrt</span></pre>
			<p>如果您連接您自己的<span>MySQL</span>客戶端程式，運行時會出現下面的錯誤：</p>
			<pre><span>ld.so.1: fatal: libmysqlclient.so.#:</span></pre>
			<pre><span>open failed: No such file or directory</span></pre>
			<p>可以通過下面的方法避免該問題：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用<span>-Wl,r/full/path/to/libmysqlclient.so</span>標記而不要用<span>-Lpath</span><span>)</span>連接客戶端。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>將<span>libmysqclient.so</span>複製到<span>/usr/lib</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>運行客戶端程式前，將<span>libmysqlclient.so</span>目錄的路徑名加到<span>LD_RUN_PATH</span>環境變數上。</p>
			<p>如果您未安裝<span>zlib</span>用 
			<span>-lz</span>連接時<strong><span>configure</span></strong>出現問題，您有兩個選則：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您想要使用壓縮通信協議，您需要從<span>ftp.gnu.org</span>獲得並安裝<span>zlib</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>構建<span>MySQL</span>時用<span>--with-named-z-libs=no</span>選項運行<strong><span>configure</span></strong>。</p>
			<p>如果您正使用<strong><span  style="font-family:
細明體">gcc</span></strong>，向<span>MySQL</span>使用用戶定義函數<span>(UDF)</span>時出現問題，嘗試向<span>UDF</span>連接行新增<span>-lgcc</span>到。</p>
			<p>如果想讓<span>MySQL</span>自動啟動，可以將<span>support-files/mysql.server</span>複製到<span><span>/etc/init.d</span><span>，</span></span>並建立<span>/etc/rc3.d/S99<b>mysql.server</b></span>符號連接。</p>
			<p>如果有太多程序試圖快速連接<b><span>mysqld</span></b>，您應當能再<span>MySQL</span>日誌只看見錯誤：</p>
			<pre><span>Error in accept: Protocol error</span></pre>
			<p>可以嘗試用<span>--back_log=50</span>選項啟動伺服器來解決該問題。<span>(</span>在<span>MySQL 
			4</span>以前的版本中使用<span>-O 
			back_log=50</span>）<span>。 </span></p>
			<p><span>Solaris</span>不支援<span>setuid()</span><span>
			</span>應用程式所需的內核檔案，因此如果您使用<span>--user</span>選項您不能從<b><span>mysqld</span></b>遇到內核檔案。</p>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-2-7"></a>
				2.12.3.1.&nbsp;Solaris 2.7/2.8注意事項</h4></div></div></div>
				<p>一般情況，可以在<span>Solaris 2.7</span>和<span>2.8</span>中使用<span>Solaris 
				2.6</span>二進制。大多數<span>Solaris 2.6</span>發佈也適用<span>Solaris 
				2.7</span>和<span>2.8</span>。</p>
				<p><span>MySQL</span>應當能夠自動檢測到新的<span>Solaris</span>版本並解決下面的問題。</p>
				<p><span>Solaris 2.7/2.8</span>的<span>include</span>檔案中有一些問題。當使用<strong><span>gcc</span><span>時</span></strong>您會看見下面的錯誤：</p>
				<pre><span>/usr/include/widec.h:42: warning: `getwc&#39; redefined</span></pre>
				<pre><span>/usr/include/wchar.h:326: warning: this is the location of the previous</span></pre>
				<pre><span>definition</span></pre>
				<p>如果出現該問題，修復的辦法是將<span>/usr/include/widec.h</span>複製到<span>.../lib/gcc-lib/os/gcc-version/include</span>，並將<span>41</span>行從：</p>
				<pre><span>#if&nbsp;&nbsp;&nbsp;&nbsp; !defined(lint) &amp;&amp; !defined(__lint)</span></pre>
				<p>更改為：</p>
				<pre><span>#if&nbsp;&nbsp;&nbsp;&nbsp; !defined(lint) &amp;&amp; !defined(__lint) &amp;&amp; !defined(getwc)</span></pre>
				<p>另外，可以直接編輯<span>/usr/include/widec.h</span>。用任何一種方法修復後，應當刪掉<span>config.cache</span>並再次運行<strong><span  style="font-family:
細明體">configure</span></strong>。</p>
				<p>如果運行<strong><span>make</span></strong>時遇到下面的錯誤，這是因為<strong><span>configure</span></strong>不能檢測到<span>curses.h</span>檔案<span>(</span>可能是因為<span>/usr/include/widec.h</span>中的錯誤<span>)</span>：</p>
				<pre><span>In file included from mysql.cc:50:</span></pre>
				<pre><span>/usr/include/term.h:1060: syntax error before `,&#39;</span></pre>
				<pre><span>/usr/include/term.h:1081: syntax error before `;&#39;</span></pre>
				<p>可以用下面任何一種方法解決該問題：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>CFLAGS=-DHAVE_CURSES_H 
				CXXFLAGS=-DHAVE_CURSES_H ./configure</span>配置。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>根據前面的討論編輯<span>/usr/include/widec.h</span>並重新<strong><span>configure</span></strong>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>刪掉<span>config.h</span>檔案中的<span>#define 
				HAVE_TERM</span>行並重新運行<strong><span  style="font-family:
細明體">make</span></strong>。</p>
				<p>如果連結客戶端程式時連接器找不到<span>-lz</span>，問題可能是<span>libz.so</span>檔案安裝到了<span>/usr/local/lib</span>。可以用下面任何一種方法解決該問題：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>向<span>LD_LIBRARY_PATH</span>增加<span>/usr/local/lib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>增加到<span>libz.so</span><span> 
				from </span>
				<span>/lib</span>的連接。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果使用<span>Solaris 8,</span>可以安裝<span>Solaris 
				8 CD</span>分發版中的可選項<span>zlib</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>構建<span>MySQL</span>時用<span>--with-named-z-libs=no</span>選項運行<strong><span>configure</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-x86"></a>
				2.12.3.2.&nbsp;Solaris x86注意事項</h4></div></div></div>
				<p>在<span>x86 Solaris 8</span>上<span>,
				</span>如果使用<span>strip</span>刪除調試符號，<strong><span>mysqld</span></strong>轉儲內核。</p>
				<p>如果正在<span> Solaris x86</span>上使用<strong><span>gcc</span></strong>或<strong><span>egcs</span></strong>，並且您碰到了在裝載時的內核轉儲問題，應該使用下列<strong><span>configure</span></strong>命令：</p>
				<pre><span>CC=gcc CFLAGS=&quot;-O3 -fomit-frame-pointer -DHAVE_CURSES_H&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-O3 -fomit-frame-pointer -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti -DHAVE_CURSES_H&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>
				用<span>libstdc++</span>庫和與<span>C++</span>異常處理來避免這個問題。<span>
				</span></p>
				<p>如果這沒有幫助，您應該編譯一個調試版本並且用一個蹤跡檔案運行它或在<span>gdb</span>下運行它。請參見<a href="porting.html#using-gdb-on-mysqld" title="E.1.3. Debugging mysqld under gdb">E.1.3節，「在gdb環境下調試m<span><strong class="command">ysqld</strong></span>」</a>。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="bsd-notes"></a>
			2.12.4.&nbsp;BSD注意事項</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#freebsd">
				2.12.4.1. FreeBSD注意事項</a></span></dt><dt><span class="section">
				<a href="#netbsd">
				2.12.4.2. NetBSD注意事項</a></span></dt><dt><span class="section">
				<a href="#openbsd">
				2.12.4.3. OpenBSD 2.5版注意事項</a></span></dt><dt><span class="section">
				<a href="#bsdi">
				2.12.4.4. BSD/OS 2.x版注意事項</a></span></dt><dt><span class="section">
				<a href="#bsdi3">
				2.12.4.5. BSD/OS 3.x版注意事項</a></span></dt><dt><span class="section">
				<a href="#bsdi4">
				2.12.4.6. BSD/OS 4.x版注意事項</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div>
				本節提供在各種<span>BSD Unix</span>中使用<span>MySQL</span>的相關訊息。<h4 class="title"><a name="freebsd"></a>
				2.12.4.1.&nbsp;FreeBSD注意事項</h4></div></div></div>
				<p>對於運行<span>MySQL</span>，推薦使用<span>FreeBSD 
				4.x</span>或更新版本，因為其線程包更加完整。要想遇到一個安全、穩定的系統，您應當只使用標記<span>-RELEASE</span>的<span>FreeBSD</span>內核。</p>
				<p>
				最容易因此是比較受喜歡的安裝方法是使用<strong><span>mysql-server</span></strong>和<span>mysql-client</span>移植，可從<span><a  href="http://www.freebsd.org">http://www.freebsd.org</a></span>得到。</p>
				<p>使用這些移植的益處包括：</p>
				<ul type="disc">
					<li>
					一個全最佳化的工作在<span>FreeBSD</span>版本上的<strong><span>MySQL</span></strong>。</li>
					<li>
					自動配置和構建。</li>
					<li>
					啟動指令安裝在<span>/usr/local/etc/rc.d</span>。</li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>用<span>pkg_info -L</span>察看哪個檔案被安裝的能力</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您在那台機器上不再想要<strong><span>MySQL</span></strong>，用<span>pkg_delete</span>完全刪除它們。</p>
				<p>
				建議在<span>FreeBSD 2.x</span>版上使用<span> 
				MIT-pthreads</span>，在版本<span>3</span>和以上版本用原生線程。在一些<span>2.2.x</span>的以後版本使用原生線程運行是可能的，但是您可能碰到<b><span>mysqld</span></b>關掉的問題。</p>
				<p>遺憾的是，<span>FreeBSD</span>使用的某些函數還不能完全保證線程安全。特別令人注意的是，包括<span>gethostbyname()</span>函數，<span> 
				MySQL</span>使用該函數將主機名轉換為<span>IP</span>地址。在某些環境中，<b><span>mysqld</span></b>程序會突然造成<span>100%</span>的<span>CPU</span>負荷，不再響應。如果您遇到該問題，嘗試使用<span>--skip-name-resolve</span>選項啟動<span>MySQL</span>。</p>
				<p><span>另外，還可以將<span>FreeBSD 
				4.x</span>中的<span>MySQL</span>同<span>LinuxThreads</span>庫連接，這樣可以避免一些原生<span>FreeBSD</span>線程執行時的問題。為了更好地將<span>LinuxThreads</span>同原生線程進行對比，參見<span>Jeremy 
				Zawodny</span>的文章</span><em><span>FreeBSD 
				or Linux for your MySQL Server?</span></em><span>
				</span>地址：<span><a target="_top"  href="http://jeremy.zawodny.com/blog/archives/000697.html"><span><u><span style="color:blue">http://jeremy.zawodny.com/blog/archives/000697.html</span></u>
				</span></a></span>。</p>
				<p>在<span>FreeBSD</span>使用<span>LinuxThreads</span>的已知問題有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>連接時間<span>(</span><span>wait_timeout</span>、<span>interactive_timeout</span>和<span>net_read_timeout</span><span>)</span>值不理想。現象是永久連接掛起較長時間，不能關閉，只有線程執行新命令時<span> 
				&#39;kill&#39;</span>線程方有效。</p>
				<p>這可能是線程庫中的信號處理問題，信號不能中斷掛起的讀命令。期望在<span>FreeBSD 
				5.0</span>中修復。</p>
				<p><span>MySQL</span>構建程序需要<span>GNU make(<strong><span>gmake</span></strong>)</span>工作。如果沒有<span>GNU
				<strong><span>make</span></strong></span>，必須在編譯<span>MySQL</span>前先安裝它。</p>
				<p>建議的在<span>FreeBSD</span>中用<strong><span>gcc</span></strong><span>(2.95.2</span>和以上版本<span>)</span>編譯和安裝<span>MySQL</span>的方法是：</p>
				<pre><span>CC=gcc CFLAGS=&quot;-O2 -fno-strength-reduce&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; CXX=gcc CXXFLAGS=&quot;-O2 -fno-rtti -fno-exceptions \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -felide-constructors -fno-strength-reduce&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ./configure --prefix=/usr/local/mysql --enable-assembler</span></pre>
				<pre><span>gmake</span></pre>
				<pre><span>gmake install</span></pre>
				<pre><span>cd /usr/local/mysql</span></pre>
				<pre><span>bin/mysql_install_db --user=mysql</span></pre>
				<pre><span>bin/mysqld_safe &amp;</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>如果<strong><span>configure</span></strong>使用<span>MIT-pthreads</span>，應當閱讀<span>MIT-pthreads</span>注意事項。請參見<a href="#mit-pthreads" title="2.8.5. MIT-pthreads Notes">2.8.5節，「MIT-pthreads注意事項」</a>。</p>
				<p>如果您從<span><b><span>make 
				install</span></b></span>遇到一個它不能找到<tt >「<span>/usr/include/pthreads</span>」</tt>的錯誤，<span><b><span>configure</span></b></span>沒有檢測出您需要<span>MIT-pthreads</span>。要修復該問題，移走<span>config.cache</span>，然後用<span>--with-mit-threads</span>選項重新運行<strong><span  style="font-family:
細明體">configure</span></strong>。</p>
				<p>
				確定讓您的名字解析程式安裝正確，否則當連接<b><span>mysqld</span></b>時，您可能會遇到解析延時或失敗。保證在<tt >「<span>/etc/hosts</span>」</tt>檔案中的<span>localhost</span>入口是正確的。<tt >「<span>/etc/hosts</span>」</tt>檔案應該以下面一行開始：</p>
				<pre><span>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost localhost.your.domain</span></pre>
				<p>已知<span>FreeBSD</span>的檔案句柄限制預設值很低。請參見<a href="problems.html#not-enough-file-handles" title="A.2.17. File Not Found">A.2.17節，「檔案未找到」</a>。使用<span>--open-files-limit</span>選項執行<strong><span>mysqld_safe</span></strong>啟動伺服器，或在<span>/etc/login.conf</span>為<strong><span>mysqld</span></strong>用戶提高限制並用<span>cap_mkdb 
				/etc/login.conf</span>重建它。如果您不使用預設名<span>(</span>即使用<span>chpass 
				mysqld-user-name)</span>，還要保證為該用戶設置在密碼檔案中的相應級別。請參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
				<p><span>FreeBSD</span>將程序空間限制到<span>512MB</span>，即使系統有很多的可用<span>RAM</span>也如此。因此您可能會遇到如下所示錯誤：</p>
				<pre><span>Out of memory (Needed 16391 bytes)</span></pre>
				<p>在當前版本的<span>FreeBSD(</span>至少<span>4.x</span>和更高版本<span>)</span>中，您可以在<span>/boot/loader.conf</span>檔案中增加下面的條目並重啟機器增加該限制<span>(</span>不能在運行時間用<strong><span>sysctl</span></strong>命令更改這些設定值<span>)</span>：</p>
				<pre><span>kern.maxdsiz=&quot;1073741824&quot; # 1GB</span></pre>
				<pre><span>kern.dfldsiz=&quot;1073741824&quot; # 1GB</span></pre>
				<pre><span>kern.maxssiz=&quot;134217728&quot; # 128MB</span></pre>
				<p>在舊版本的<span>FreeBSD</span>中，必須重新編譯內核，以便更改程序的最大數據段空間。在這種情況下，應當查看<span>LINT</span>配置檔案中的<span>MAXDSIZ</span>選項查看更詳細的訊息。</p>
				<p>如果<span>MySQL</span>的當前日期有問題，設置<span>TZ</span>變數將會有幫助。請參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="netbsd"></a>
				2.12.4.2.&nbsp;NetBSD注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				為了在<span>NetBSD</span>上編譯，您需要<span>GNU</span><span> 
				make</span>，否則當<span>make</span>試圖在<span>C++</span>檔案上運行<span>lint</span>時，編譯將失敗。</p>
				<h4 class="title"><a name="openbsd"></a>2.12.4.3.&nbsp;OpenBSD 
				2.5版注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				在<span>OpenBSD 2.5</span>上，可以用下列選項編譯帶原生線程的<strong><span>MySQL</span></strong>：<pre><span>CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no</span></pre>
				<h4 class="title"><a name="bsdi"></a>2.12.4.4.&nbsp;BSD/OS 2.x版注意事項</h4></div></div></div>
				<p>如果在編譯<strong><span>MySQ</span><span>L</span></strong>時，遇到下列錯誤<span>,
				</span>說明虛擬內存的<span><b><span>ulimit</span></b></span>值太低了：</p>
				<pre><span>item_func.h: In method</span></pre>
				<pre><span>`Item_func_ge::Item_func_ge(const Item_func_ge &amp;)&#39;:</span></pre>
				<pre><span>item_func.h:28: virtual memory exhausted</span></pre>
				<pre><span>make[2]: *** [item_func.o] Error 1</span></pre>
				<p>
				試試使用<span><b><span>ulimit 
				-v 80000</span></b></span>並再次運行<span><b><span>make</span></b></span>。如果這還不行並且您正在使用<span><b><span>bash</span></b></span>，試試換到<span><b><span>csh</span></b></span>或<span><b><span>sh</span></b></span>；一些<span>BSDI</span>用戶報告了使用<span><b><span>bash</span></b></span>和<span><b><span>ulimit</span></b></span>有問題。</p>
				<p>如果您正在使用<span><b><span>gcc</span></b></span>，可能必須為<span><b><span>configure</span></b></span>使用<span>--with-low-memory</span>標誌才能編<tt >譯「<span>sql_yacc.cc</span>」</tt>。</p>
				<p>如果<span>MySQL</span>的當前日期有問題，設置<span>TZ</span>變數將會有幫助。請參見<a href="environment-variables.html" title="Appendix F. Environment Variables">附錄F：<i>環境變數</i></a>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="bsdi3"></a>
				2.12.4.5.&nbsp;BSD/OS 3.x版注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				升級到<span>BSD/OS 3.1</span>。如果不能升級，則安裝<span>BSDI 
				patch M300-038</span>。</p>
				<p>在配置<strong><span style="font-family:
細明體;">MySQL</span></strong>時，使用下列命令<span>:</span></p>
				<pre><span>env CXX=shlicc++ CC=shlicc2 \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --localstatedir=/var/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --without-perl \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-unix-socket-path=/var/mysql/mysql.sock</span></pre>
				<p>已知下面的項可以工作：</p>
				<pre><span>env CC=gcc CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-unix-socket-path=/var/mysql/mysql.sock</span></pre>
				<p>
				如果您願意，可以改變目錄位置，或不指定任何位置而使用預設目錄。</p>
				<p>
				如果在重負載下的性能有問題，試試使用<span>--skip-thread-priority</span>選項執行<strong><span>mysqld</span></strong>！這將以相同優先級運行所有線程；在<span>BSDI 
				3.1</span>上，可以得到較好的性能<span>(</span>至少直到<span>BSDI</span>可以修正其線程調度程式<span>)</span>。<span>
				</span></p>
				<p>如果在編譯時遇到<span>virtual 
				memory exhausted</span>錯誤，試試使用<span><b><span>ulimit 
				-v 80000</span></b></span>並再次運行<span><b><span>make</span></b></span>。如果這還不行並且您正在使用<span><b><span>bash</span></b></span>，試試換到<span><b><span>csh</span></b></span>或<span><b><span>sh</span></b></span>；一些<span>BSDI</span>用戶報告了使用<span><b><span>bash</span></b></span>和<span><b><span>ulimit</span></b></span>會有問題。</p>
				<h4 class="title"><a name="bsdi4"></a>2.12.4.6.&nbsp;BSD/OS 4.x版注意事項</h4></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
			<span>BSDI 4.x</span>有一些線程有關的問題。如果您想要在這上面使用<strong><span>MySQL</span></strong>，應該安裝所有與線程相關的補丁，至少應該安裝<span>M400-023</span>。<p>
			在一些<span> BSDI 4.x</span>系統中，您可能會遇到共享庫問題。現象是不能執行任何客戶端程式，例如，<strong><span>mysqladmin</span></strong>。在這種情況下，需要重新配置，用<span>disable-shared</span>選項禁用庫的共享以便進行配置。</p>
			<p>一些客戶在<span>BSDI 4.0.1</span>中遇到了嚴重問題，即<b><span>mysqld</span></b>二進制過一會兒不能打開資料表。這是因為一些庫<span>/</span>系統相關錯誤使<b><span>mysqld</span></b>未得到指令便更改了當前目錄。</p>
			<p>修復方法是升級<span>MySQL</span>到最低<span>3.23.34</span>版或更高版，運行<strong><span>configure</span></strong>後，運行<strong><span>make</span><span style="font-family:
細明體;">前刪掉</span></strong><span>config.h</span>中的行<span>#define 
			HAVE_REALPATH</span>。</p>
			<p>請注意這說明您不能通過符號連接將資料庫目錄連接到另一個資料庫目錄，或通過符號連接將資料表連接到<span>BSDI</span>上的另一個資料庫。<span>(</span>可以通過符號連接連接到另一個硬盤<span>)</span>。</p>
			<h3 class="title"><a name="other-unix-notes"></a>
			2.12.5.&nbsp;其它Unix注意事項</h3></div></div></div><div class="toc"><dl><dt><span class="section">
				<a href="#hp-ux-10-20">
				2.12.5.1. HP-UX 10.20版注意事項</a></span></dt><dt><span class="section">
				<a href="#hp-ux-11-x">
				2.12.5.2. HP-UX 11.x版注意事項</a></span></dt><dt><span class="section">
				<a href="#ibm-aix">
				2.12.5.3. IBM-AIX注意事項</a></span></dt><dt><span class="section">
				<a href="#sunos">
				2.12.5.4. SunOS 4注意事項</a></span></dt><dt><span class="section">
				<a href="#alpha-dec-unix">
				2.12.5.5. Alpha-DEC-UNIX(Tru64)版注意事項</a></span></dt><dt><span class="section">
				<a href="#alpha-dec-osf1">
				2.12.5.6. Alpha-DEC-OSF/1注意事項</a></span></dt><dt><span class="section">
				<a href="#sgi-irix">
				2.12.5.7. SGI Irix注意事項</a></span></dt><dt><span class="section">
				<a href="#sco">
				2.12.5.8. SCO UNIX和OpenServer 5.0.x版注意事項</a></span></dt><dt><span class="section">
				<a href="#sco-unixware">
				2.12.5.9. SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事項</a></span></dt><dt><span class="section">
				<a href="#sco-openserver">
				2.12.5.10. SCO OpenServer 6.0.x版注意事項</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="hp-ux-10-20"></a>
				2.12.5.1.&nbsp;HP-UX 10.20版注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				在<span>HP-UX</span>上編譯<strong><span>MySQL</span></strong>時，有一些「小」問題。我們推薦您使用<span><b><span>gcc</span></b></span>而不是<span>HP-UX</span>自己的編譯器，因為<span><b><span>gcc</span></b></span>可以生成更好的代碼！</p>
				<p>我們推薦在<span>HP-UX</span>上使用<b><span>gcc</span></b><span> 
				2.95</span>，不使用高度最佳化標誌<span>(</span>類似<span>-O6)</span>，因為這在<span>HP-UX
				</span>上可能不安全。</p>
				<p>下面的<strong><span>configure</span></strong>行在<strong><span>gcc</span></strong><span> 
				2.95</span>中應當工作：</p>
				<pre><span>CFLAGS=&quot;-I/opt/dce/include -fpic&quot; \</span></pre>
				<pre><span>CXXFLAGS=&quot;-I/opt/dce/include -felide-constructors -fno-exceptions \</span></pre>
				<pre><span>-fno-rtti&quot; \</span></pre>
				<pre><span>CXX=gcc \</span></pre>
				<pre><span>./configure --with-pthread \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&#39;-ldce&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>下面的<strong><span>configure</span></strong>行在<strong><span>gcc</span></strong><span> 
				3.1</span>中應當工作：</p>
				<pre><span>CFLAGS=&quot;-DHPUX -I/opt/dce/include -O3 -fPIC&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-DHPUX -I/opt/dce/include -felide-constructors \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti -O3 -fPIC&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-charsets=complex --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-local-infile&nbsp; --with-pthread \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --disable-shared</span></pre>
				<h4 class="title"><a name="hp-ux-11-x"></a>2.12.5.2.&nbsp;HP-UX 
				11.x版注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				由於在標準<span> HP-UX</span>庫中有一些嚴重錯誤，試圖在<span>HP-UX 
				11.0</span>上運行<span>MySQL</span>前應當安裝下面的補丁：<pre><span>PHKL_22840 Streams cumulative</span></pre>
				<pre><span>PHNE_22397 ARPA cumulative</span></pre>
				<p>這樣可以解決線上程應用程式中運行<span>recv()</span>時得到<span>EWOULDBLOCK</span>和執行<span>accept()</span>時得到<span>EBADF</span>的問題。</p>
				<p>如果您在未打補丁的<span>HP-UX 11.x</span>系統中使用<strong><span>gcc</span></strong><span> 
				2.95.1</span>，可能會遇到下面的錯誤：</p>
				<pre><span>In file included from /usr/include/unistd.h:11,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from ../include/global.h:125,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from mysql_priv.h:15,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from item.cc:19:</span></pre>
				<pre><span>/usr/include/sys/unistd.h:184: declaration of C function ...</span></pre>
				<pre><span>/usr/include/sys/pthread.h:440: previous declaration ...</span></pre>
				<pre><span>In file included from item.h:306,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from mysql_priv.h:158,</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from item.cc:19:</span></pre>
				<p>問題是<span>HP-UX</span>沒有一致地定義<span>pthreads_atfork()</span>。它同<span>/usr/include/sys/unistd.h</span>：<span>184</span>和<span>/usr/include/sys/pthreads.h</span>：<span>440</span>中的原型衝突。</p>
				<p>一個解決辦法是將<span>/usr/include/sys/unistd.h</span>複製到<span>MySQL</span><span>/include</span>並編輯<span>unistd.h</span>，對它進行更改以匹配<span>pthreads.h</span>中的定義。搜尋下列行：</p>
				<pre><span>extern int pthreads_atfork(void (*prepare)()</span>，<span>void (*parent)(),</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void (*child)())</span>；</pre>
				<p>將它更改為：</p>
				<pre><span>extern int pthreads_atfork(void (*prepare)(void)</span>，<span>void (*parent)(void),</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void (*child)(void))</span>；</pre>
				<p>更改完後，下面的<strong><span  style="font-family:
細明體">configure</span></strong>行應當工作：</p>
				<pre><span>CFLAGS=&quot;-fomit-frame-pointer -O3 -fpic&quot; CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti -O3&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --disable-shared</span></pre>
				<p>如果您使用<span>HP-UX </span>編譯器，可以使用下面的命令<span>(</span>已經用<strong><span>cc</span></strong><span> 
				B.11.11.04</span>進行了測試<span>)</span>：</p>
				<pre><span>CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-extra-character-set=complex</span></pre>
				<p>您可以忽略下面類型的任何錯誤：</p>
				<pre><span>aCC: warning 901: unknown option: `-3&#39;: use +help for online</span></pre>
				<pre><span>documentation</span></pre>
				<p>如果運行<strong><span>configure</span></strong>時遇到下面的錯誤，請驗證在到<span>HP-UX 
				C</span>和<span>C++</span>編譯器的路徑前是否有到<span>K&amp;R</span>編譯器的路徑：</p>
				<pre><span>checking for cc option to accept ANSI C... no</span></pre>
				<pre><span>configure: error: MySQL requires an ANSI C compiler (and a C++ compiler).</span></pre>
				<pre><span>Try gcc. See the Installation chapter in the Reference Manual.</span></pre>
				<p>不能編譯的另一個原因可能是您沒有按照前面所述定義<span>+DD64</span>標記。</p>
				<p>對於<span>HP-UX 11</span>，另一個辦法是使用<span><a target="_top"  href="http://dev.mysql.com/downloads/"><span><u><span style="color:blue">http://dev.mysql.com/downloads/</span></u></span></a></span>提供的<span>MySQL</span>二進制，這是我們已經構建並測試過的。我們也收到了<span>MySQL</span>的<span>HP-UX 
				10.20</span>二進制可以在<span>HP-UX 11</span>上成功運行的報告。如果您遇到問題，一定要檢查<span>HP-UX</span>補丁的版本。</p>
				<h4 class="title"><a name="ibm-aix"></a>
				2.12.5.3.&nbsp;IBM-AIX注意事項</h4></div></div></div><a class="indexterm" name="id2728887"></a>
				<p><span>Autoconf</span>中沒有了<span>xlC</span>自動檢測，因此運行<strong><span>configure</span><span>前</span></strong>，需要設置許多變數。以下例子使用<span>IBM</span>編譯器：</p>
				<pre><span>export CC=&quot;xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 &quot;</span></pre>
				<pre><span>export CXX=&quot;xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192&quot;</span></pre>
				<pre><span>export CFLAGS=&quot;-I /usr/local/include&quot;</span></pre>
				<pre><span>export LDFLAGS=&quot;-L /usr/local/lib&quot;</span></pre>
				<pre><span>export CPPFLAGS=$CFLAGS</span></pre>
				<pre><span>export CXXFLAGS=$CFLAGS</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>./configure --prefix=/usr/local \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --localstatedir=/var/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --sbindir=&#39;/usr/local/bin&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --libexecdir=&#39;/usr/local/bin&#39; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --enable-large-files</span></pre>
				<pre><span>&nbsp;</span></pre>
				<p>可以從<span><a target="_top"  href="http://www-frec.bull.com/">http://www-frec.bull.com/</a></span>找到上述編譯<span>MySQL</span>分發版的選項。</p>
				<p>如果您將前面的<strong><span  style="font-family:
細明體">configure</span></strong>行中的<span>-O3</span>改為<span>-O2</span>，必須刪掉<span>-qstrict</span>選項。這是對<span>IBM 
				C</span>編譯器的限制。</p>
				<p>如果您正在使用<strong><span>gcc</span></strong>或<span><b><span>egcs</span></b></span>編譯<strong><span style="font-family:
細明體;">MySQL</span></strong>，<strong><span>必須</span></strong>使用<span>-fno-exceptions</span>標誌，因為<strong><span>gcc</span><span>/</span><span>egcs</span></strong>的異常處理不是對線程安全的！（已經用<span><b><span>egcs</span></b></span><span>1.1</span>測試過）。<span>IBM</span>彙編程式也有一些已知問題，當使用<strong><span>gcc</span></strong>時可以生成壞的代碼。</p>
				<p>在<span> AIX </span>上使用<span><b><span>egcs</span></b></span>和<span><b><span>gcc</span></b></span><b><span> 
				2.95</span></b>，我們推薦下列<strong><span>configure</span></strong>行：</p>
				<pre><span>CC=&quot;gcc -pipe -mcpu=power -Wa,-many&quot; \</span></pre>
				<pre><span>CXX=&quot;gcc -pipe -mcpu=power -Wa,-many&quot; \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-low-memory</span></pre>
				<p>為了成功編譯，需要使用<span>-Wa,-many</span>選項。<span>IBM</span>知道該問題，但是由於工作區的原因，不急於修復它。我們不知道<strong><span>gcc</span></strong><span> 
				2.95</span>是否需要<span>-fno-exceptions</span>選項<span>,</span>但是因為<span>MySQL</span>不使用例外，並且該選項可以產生快速的代碼，我們建議使用<strong><span>egcs</span></strong><span>/<strong><span>gcc</span></strong></span>時使用該選項。</p>
				<p>如果彙編碼有問題，試試更改<span>-mcpu=<i>xxx</i></span>選項以匹配您的<span>CPU</span>。一般情況可能需要使用<span >power2</span>、<span >power</span>或<span >powerpc</span>。另外，您可能需要使用<span>604</span>或<span>604e</span>。我們不能絕對肯定但懷疑<span>power</span>一般應安全，即使在<span>power2</span>機器上也安全。</p>
				<p>如果您不知道您的<span>CPU</span>是什麼樣的，可以執行<span>uname 
				-m</span>命令。可以產生類似<span>000514676700</span>的字串，格式為<span>xxyyyyyymmss</span>，其中<span>xx</span>和<span>ss</span>總是<span>00,yyyyyy</span>是唯一的系統<span>ID</span>，<span>mm</span>是<span>CPU 
				Planar</span>的<span>ID</span>。從<span><a target="_top"  href="http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm"><span><u><span style="color:blue">http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm</span></u></span></a></span>可以找到這些值的圖資料表。</p>
				<p>該圖資料表可以給出您可以使用的機器類型和機器型號，確定<span>CPU</span>的類型。</p>
				<p>如果遇到信號問題<span>(<strong><span>MySQL</span></strong></span>在高負載下出人意料地死掉<span>)</span>，您可能已經發現了與線程和信號有關的一個<span>OS
				</span>問題。在這種情況下，您可以用如下配置告訴<strong><span>MySQL</span></strong>不使用信號：</p>
				<pre><span>CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \</span></pre>
				<pre><span>CXXFLAGS=&quot;-felide-constructors -fno-exceptions -fno-rtti \</span></pre>
				<pre><span>-DDONT_USE_THR_ALARM&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-debug \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory</span></pre>
				<p>這不影響<strong><span style="font-family:
細明體;">MySQL</span></strong>的性能，但是有副作用，就是不能用<span><b><span>mysqladmin 
				kill</span></b></span>或<span><b><span>mysqladmin 
				shutdown</span></b></span>殺死在一個連接上「睡眠」的客戶端。相反，當客戶端發出下一個命令時，它將死掉。</p>
				<p>在<span>AIX</span>的一些版本上用<span>libbind.a</span>連結使得<span>getservbyname</span>（）內核轉儲，這是<span>AIX</span>的一個問題並且應該報告<span>IBM</span>。</p>
				<p>對於<span>AIX 4.2.1</span>和<strong><span>gcc</span></strong>，進行下面的更改。</p>
				<p>配置完後，編輯<span>config.h</span>和<span>include/my_config.h</span>，將下面的行：</p>
				<pre><span>#define HAVE_SNPRINTF 1</span></pre>
				<p>更改為：</p>
				<pre><span>#undef HAVE_SNPRINTF</span></pre>
				<p>最後需要在<span>mysqld</span><span>.cc</span>中為<span>initgroups 
				()</span>新增：</p>
				<pre><span>#ifdef _AIX41</span></pre>
				<pre><span>extern &quot;C&quot; int initgroups(const char *,int);</span></pre>
				<pre><span>#endif</span></pre>
				<p>如果您需要為<b><span>mysqld</span></b>程序分配大量內存，只使用<strong><span>ulimit 
				-d unlimited</span></strong>是不夠的。還可以需要修改<strong><span>mysqld_safe</span></strong>，增加下面的行：</p>
				<pre><span>export LDR_CNTRL=&#39;MAXDATA=0x80000000&#39;</span></pre>
				<p>關於使用大量內存的訊息請查閱<span><a target="_top"  href="http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm"><span><u><span style="color:blue">http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm</span></u>
				</span></a></span>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sunos"></a>
				2.12.5.4.&nbsp;SunOS 4注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				<p>
				在<span>SunOS 4</span>上，需要用<span>MIT-pthreads</span>編譯<strong><span style="font-family:
細明體;">MySQL</span></strong>，反過來這意味著需要使用<span>GNU</span><span> 
				make</span>。</p>
				<p>
				一些<span>SunOS 4</span>系統的動態庫和<span><b><span>libtool</span></b></span>有問題。可以使用下列<span><b><span>configure</span></b></span>行來避免這個問題：</p>
				<pre><span>./configure --disable-shared --with-mysqld-ldflags=-all-static</span></pre>
				<p>
				當編譯<span>readline</span>時，可能會遇到關於重複定義的警告，可以忽略。<span>
				</span></p>
				<p>當編譯<span><b><span>mysqld</span></b></span>的時候，將會遇到<span>implicit 
				declaration of function</span>警告，可以忽略。</p>
				<h4 class="title"><a name="alpha-dec-unix"></a>
				2.12.5.5.&nbsp;Alpha-DEC-UNIX(Tru64)版注意事項</h4></div></div></div>
				<p>如果您在<span>Digital Unix</span>上使用<strong><span>egcs</span></strong><span> 
				1.1.2</span>，應當升級到<strong><span>gcc</span></strong><span> 
				2.95.2,</span>因為<strong><span>egcs</span></strong>在<span>DEC</span>上有一些嚴重問題！</p>
				<p>
				當在<span>Digital UNIX</span>下編譯線程程式時，文檔推薦對於<span><b><span>cc</span></b></span>和<span><b><span>cxx</span></b></span>使用<span>-pthread</span>選項和<span>-lmach 
				-lexc</span>庫（除了<span>-lpthread</span>外<span>)</span>。您應該像下面這樣運行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CC=&quot;cc -pthread&quot; CXX=&quot;cxx -pthread -O&quot; \</span></pre>
				<pre><span>./configure --with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span></pre>
				<p>當編譯<b><span>mysqld</span></b>時，會看見下面的警告：</p>
				<pre><span>mysqld.cc: In function void handle_connections()&#39;:</span></pre>
				<pre><span>mysqld.cc:626: passing long unsigned int *&#39; as argument 3 of</span></pre>
				<pre><span>accept(int,sockadddr *, int *)&#39;</span></pre>
				<p>
				您可以放心地忽略這些警告，它們的發生是因為<span><b><span>configure</span></b></span>只能檢測出錯誤，而不是警告。</p>
				<p>如果直接從命令行啟動伺服器，當退出時，可能有死掉的問題。（當您退出時，重要程序收到一個<span>SIGHUP</span>信號<span>)</span>，如果如此，試著像這樣啟動伺服器：</p>
				<pre><span>nohup mysqld [</span><span><i><span>options</span></i></span><span>] &amp;</span></pre>
				<p>
				<span>nohup</span>使得後面的命令忽視從終端發來的任何<span>SIGHUP</span>信號了。另外，通過運行<span><b><span>safe_mysqld</span></b></span>啟動伺服器，可以讓<span><b><span>nohup</span></b></span>使用<span><b><span>mysqld</span></b></span>。請參見<a href="database-administration.html#mysqld-safe" title="5.1.3. mysqld_safe — MySQL Server Startup Script">5.1.3節，「mysqld_safe：MySQL伺服器啟動指令」</a>。</p>
				<p>如果編譯<span>mysys/get_opt.c</span>時遇到問題，只需要從啟動檔案刪掉<span>#define 
				_NO_PROTO</span>行。</p>
				<p>如果使用<span>Compaq</span>的<span>CC</span>編譯器，下面的<strong><span>configure</span><span>行</span></strong>應當工作：</p>
				<pre><span>CC=&quot;cc -pthread&quot;</span></pre>
				<pre><span>CFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host&quot;</span></pre>
				<pre><span>CXX=&quot;cxx -pthread&quot;</span></pre>
				<pre><span>CXXFLAGS=&quot;-O4 -ansi_alias -ansi_args -fast -inline speed all \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -arch host -noexceptions -nortti&quot;</span></pre>
				<pre><span>export CC CFLAGS CXX CXXFLAGS</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-low-memory \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-large-files \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-shared=yes \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span></pre>
				<pre><span>gnumake</span></pre>
				<p>如果用共享庫編譯時<strong><span  style="font-family:
細明體">libtool</span></strong>出現問題，應當能夠在連結<strong><span  style="font-family:
細明體">mysql</span></strong>時通過下述命令解決該問題：</p>
				<pre><span>cd mysql</span></pre>
				<pre><span>/bin/sh ../libtool --mode=link cxx -pthread&nbsp; -O3 -DDBUG_OFF \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -speculate all \ -arch host&nbsp; -DUNDEF_HAVE_GETHOSTBYNAME_R \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; -o mysql&nbsp; mysql.o readline.o sql_string.o completion_hash.o \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ../readline/libreadline.a -lcurses \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; ../libmysql/.libs/libmysqlclient.so&nbsp; -lm</span></pre>
				<pre><span>cd ..</span></pre>
				<pre><span>gnumake</span></pre>
				<pre><span>gnumake install</span></pre>
				<pre><span>scripts/mysql_install_db</span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="alpha-dec-osf1"></a>
				2.12.5.6.&nbsp;Alpha-DEC-OSF/1注意事項</h4></div></div></div>
				<p>如果遇到編譯問題並安裝了<span>DEC<b> </b></span>
				<span><b><span>CC</span></b></span>和<span><b><span>gcc</span></b></span>，嘗試這樣運行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>如果遇到<tt >「<span>c_asm.h</span>」</tt>檔案的問題，可以建立並使用一個「啞<span>(dummy)</span>」<tt >「<span>c_asm.h</span>」</tt>檔案：</p>
				<pre><span>touch include/c_asm.h</span></pre>
				<pre><span>CC=gcc CFLAGS=-I./include \</span></pre>
				<pre><span>CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql</span></pre>
				<p>請注意從<span><a target="_top"  href="http://ftp.support.compaq.com/public/unix/">http://ftp.support.compaq.com/public/unix/</a></span>下載最新的<span>DEC(Compaq)</span>補丁可以修復<strong><span>ld</span></strong>程式的下面問題。</p>
				<p>在<span>OSF1 V4.0D</span>和編譯器<span>&quot;DEC 
				C V5.6-071 on Digital UNIX V4.0 (Rev. 878)&quot; </span>
				上，編譯器有了一些奇怪的行為<span>(</span>未定義<span>asm</span>標誌<span>)</span>。<span>/bin/ld</span>好像也被破壞<span>(</span>當連結<span><b><span>mysqld</span></b></span>時，發生<span>_exit 
				undefined</span>問題<span>)</span>。在這個系統上，從<span>OSF 
				4.0C</span>的版本替換了<span>/bin/ld</span>後，我們設法用下列<span><b><span>configure</span></b></span>命令行編譯<strong><span>MySQL</span></strong>：</p>
				<pre><span>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</span></pre>
				<p>用<span>Digital</span>編譯器「<span>C++ 
				V6.1-029」，下列命令應該工作：</span></p>
				<pre><span>CC=cc -pthread</span></pre>
				<pre><span>CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -speculate all -arch host</span></pre>
				<pre><span>CXX=cxx -pthread</span></pre>
				<pre><span>CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -speculate all -arch host -noexceptions -nortti</span></pre>
				<pre><span>export CC CFLAGS CXX CXXFLAGS</span></pre>
				<pre><span>./configure --prefix=/usr/mysql/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-mysqld-ldflags=-all-static --disable-shared \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lmach -lexc -lc&quot;</span></pre>
				<p>
				在<span>OSF1</span>的某些版本中，<span>alloca()</span>函數被破壞，通過刪除定義<span>&#39;HAVE_ALLOCA&#39;</span><tt >的「<span>config.h</span>」</tt>的行更正它。<span>
				</span></p>
				<p>
				<span>alloca()</span>函數也可能在<span>/usr/include/alloca.h</span>裡面有一個不正確的原型，源於此的警告可以忽略。<span>
				</span></p>
				<p>
				<span><b><span>configure</span></b></span>將自動地使用下列線程庫： 
				 
				<span>
				--with-named-thread-libs=&quot;-lpthread -lmach -lexc -lc&quot;</span>。</p>
				<p>當使用<span><b><span>gcc</span></b></span>時，也可以試試這樣運行<span><b><span>configure</span></b></span>：</p>
				<pre><span>CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....</span></pre>
				<p>如果您的信號有問題<span>(<strong><span>MySQL</span></strong></span>出人意料地在高負載下死掉<span>)</span>，可能遇到了一個線程和信號有關的<span>OS
				</span>問題。在這種情況下，您可以告訴<strong><span>MySQL</span><span>按</span></strong>如下配置不使用信號：</p>
				<pre><span>CFLAGS=-DDONT_USE_THR_ALARM \</span></pre>
				<pre><span>CXXFLAGS=-DDONT_USE_THR_ALARM \</span></pre>
				<pre><span>./configure </span></pre>
				<p>這不影響<strong><span style="font-family:
細明體;">MySQL</span></strong>性能，但是有副作用，就是不能用<span><b><span>mysqladmin 
				kill</span></b></span>或<span><b><span>mysqladmin 
				shutdown</span></b></span>殺死在一個連接上「睡眠」的客戶端。相反，當客戶端發出下一個命令時，它將死掉。</p>
				<p>使用<strong><span>gcc</span></strong><span> 
				2.95.2,</span>會遇到下面的編譯錯誤：</p>
				<pre><span>sql_acl.cc:1456: Internal compiler error in `scan_region&#39;,</span></pre>
				<pre><span>at except.c:2566</span></pre>
				<pre><span>Please submit a full bug report.</span></pre>
				<p>要修復該問題，應當進入<span>sql</span>目錄並剪切、複製最後<strong><span>一</span></strong>行<strong><span>gcc</span></strong>，但應將<span>-O3</span><span>
				</span>改為<span>-O0</span><span> 
				(</span>或如果編譯行沒有任何<span>-O</span>選項，應在<strong><span  style="font-family:
細明體">gcc</span></strong>後面增加<span>-O0</span><span>)</span>。之後，可以回到頂級目錄並重新運行<strong><span>make</span></strong>。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sgi-irix"></a>
				2.12.5.7.&nbsp;SGI Irix注意事項</h4></div></div></div>
				<p>如果使用<span>Irix 6.5.3</span>或更新版，如果用擁有<span>CAP_SCHED_MGT</span>權限的用戶<span>(</span>例如<span>root</span><span>)</span>運行<strong><span>mysqld</span></strong>或用下面的<span>shell</span>命令給<b><span>mysqld</span></b>伺服器該權限，<strong><span>mysqld</span></strong>能夠建立線程：</p>
				<pre><span>chcap &quot;CAP_SCHED_MGT+epi&quot; /opt/mysql/libexec/mysqld</span></pre>
				<p>可能需要在運行<span><b><span>configure</span></b></span>後且在編譯前定義<tt >「<span>config.h</span>」</tt>裡面的一些符號。</p>
				<p>
				在一些<span>Irix</span>實現中，<span>alloca()</span>函數被破壞。如果<span><b><span>mysqld</span></b></span>伺服器死於一些<span>SELECT</span>語句，把<tt >「<span>config.h</span>」</tt>定義<span>HAVE_ALLOC</span>和<span>HAVE_ALLOCA_H</span>的行刪除即可。如果<span><b><span>mysqladmin 
				create</span></b></span>不工作，把<tt >「<span>config.h</span>」</tt>定義<span>HAVE_READDIR_R</span>的行刪除，您也可能必須刪除<span>HAVE_TERM_H</span>行。<span>
				</span></p>
				<p><span>SGI</span>推薦將本頁上的所有補丁作為一個整體來安裝：</p>
				<p><span>
				<a target="_top"  href="http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html">
				http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html</a>
				</span></p>
				<p>
				至少，應該安裝最新的核心卷<span>(rollup)</span>、最新的<span>rld</span>卷和最新的<span>libc</span>卷。<span>
				</span></p>
				<p>很明確，對於<span>pthreads</span>支援，需要本頁上所有的<span>POSIX</span>補丁：</p>
				<p><span>
				<a target="_top"  href="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html">
				http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a></span></p>
				<p>
				如果在編譯<tt >「<span>mysql.cc</span>」</tt>時，遇到類似於下面的錯誤<span>:
				</span></p>
				<pre><span>&quot;/usr/include/curses.h&quot;, line 82: error(1084):</span></pre>
				<pre><span>invalid combinati</span>在<span>of type</span></pre>
				<p>那麼應在<strong><span>MySQL</span></strong>原始碼樹的頂級目錄輸入下列命令：</p>
				<pre><span>extra/replace bool curses_bool &lt; /usr/include/curses.h &gt; include/curses.h</span></pre>
				<pre><span>make</span></pre>
				<p>
				應該也有安排上的問題報告。如果只有一個線程正在運行，事情會變慢的。通過啟動另外一個客戶端來避免它，這可以導致此後其它線程的執行速度增加<span>2</span>到<span>10</span>倍。這是<span>Irix</span>線程難以理解的問題；可能必須臨時準備找出解決方案直到它能被修正。</p>
				<p>
				<span>&nbsp;</span></p>
				<p>
				如果您正在用<span>gcc</span>編譯，可以使用下列<span><b><span>configure</span></b></span>命令：</p>
				<p>
				<span>&nbsp;</span></p>
				<pre><span>CC=gcc CXX=gcc CXXFLAGS=-O3 \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --enable-thread-safe-client \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=-lpthread</span></pre>
				<p>在用原生<span>Irix C</span>和<span>C++</span>編譯器<span>7.3.1.2</span>的<span>Irix 
				6.5.11</span>上<span>,</span>下面的項工作：</p>
				<pre><span>CC=cc CXX=CC CFLAGS=&#39;-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \</span></pre>
				<pre><span>-L/usr/local/lib&#39; CXXFLAGS=&#39;-O3 -n32 -TARG:platform=IP22 \</span></pre>
				<pre><span>-I/usr/local/include -L/usr/local/lib&#39; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql --with-innodb --with-berkeley-db \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-libwrap=/usr/local \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-curses-libs=/usr/local/lib/libncurses.a</span></pre>
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sco"></a>
				2.12.5.8.&nbsp;SCO UNIX和OpenServer 5.0.x版注意事項</h4></div></div></div>
				<p>當前的移植僅在「<span>sco3.2v5.0.5</span>」<span>,</span>「<span>sco3.2v5.0.6<span>」和「</span>sco3.2v5.0.7<span>」系統上進行了測試</span></span>，在「<span>sco 
				3.2v4.2」上的移植也有很大進展。</span><span>OpenServer 
				5.0.8(Legend)</span>具有原生線程，允許檔案大於<span>2GB</span>。目前最大的檔案可以達到<span>2GB</span>。</p>
				<p>我們可以在<span>OpenServer</span>上用<strong><span>gcc</span></strong><span> 
				2.95.3</span>用下面的<strong><span>configure</span></strong>命令編譯<span>MySQL</span>。</p>
				<pre><span>CC=gcc CXX=gcc ./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-innodb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-openssl --with-vio --with-extra-charsets=complex</span></pre>
				<p>從<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj">ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj</a></span>可以得到<strong><span>gcc</span></strong><b>。</b></p>
				<p>該開發系統需要在<span>OpenServer 5.0.6O</span>的<span>penServer 
				Execution Environment Supplement oss646B</span>和<span>oss656B</span>，<span>OpenSource</span>庫位於<span> 
				gwxlibs</span>。所有<span>OpenSource</span>工具位於<span>opensrc</span>目錄。可以從<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5/opensrc/">ftp://ftp.sco.com/pub/openserver5/opensrc/</a></span>獲得。</p>
				<p>我們建議使用最新的<span>MySQL</span>產品發佈。</p>
				<p><span>SCO</span>提供的作業系統補丁：<span>OpenServer 
				5.0.[0-6]</span>：<span><a  href="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a></span>，<span>OpenServer 
				5.0.7</span>：<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserverv5/507">ftp://ftp.sco.com/pub/openserverv5/507</a></span>。</p>
				<p><span>SCO</span>提供的關於安全修復的訊息：<span>Server 
				5.0.x</span>：<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a></span>。</p>
				<p><span>OpenSever 5.0.x</span>系統上最大的檔案的大小為<span>2GB</span>。</p>
				<p>在<span>OpenServer 5.0.x</span>上，可供串緩衝區、<span>clist</span>和鎖定記錄分配的總內存不能超出<span>60MB</span>。</p>
				<p>串緩衝區的分配單位為<span>4096 </span>字節的頁，<span>clists</span>為<span>70</span>字節，鎖定記錄為<span>64</span>字節，因此為：</p>
				<p><span>(NSTRPAGES * 4096) + (NCLIST * 70) + (MAX_FLCKREC 
				* 64) &lt;= 62914560</span></p>
				<p>按照以下步驟來配置<span>Database Services</span>選項。如果您不確定應用程式是否需要，參見隨應用程式提供的文檔。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>用<span>root</span>登錄。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>編輯<span>/etc/conf/sdevice.d/suds</span>檔案啟用<span>SUDS</span>驅動程式。將第<span>2</span>個域內的<span>N</span>更改為<span>Y</span>。</p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用<span>mkdev 
				aio</span>或<span>Hardware/Kernel Manager</span>來啟用對<span>asynchronous 
				I/O</span>的支援，並重新連接內核。要想讓用戶鎖定內存用於該類<span>I/O</span>，更新<span>aiomemlock(F)</span>檔案。應當對該檔案進行更新，包括進可以使用<span>AIO</span>的用戶和可以鎖定的最大數量的內存。</p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>許多應用程式使用<span>setuid</span>二進制，因此您只能指定單個用戶
				。請參見隨應用程式提供的文檔來看是否應用程式是這種情況。</p>
				<p>完成該程序後，重新啟動系統，建立包括這些更改的新內核。</p>
				<p>預設情況，<span>/etc/conf/cf.d/mtune</span>中的條目設置為：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>NBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 450000</span></pre>
				<pre><span>NHBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>NMPBUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 512</span></pre>
				<pre><span>MAX_INODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>MAX_FILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>CTBUFSIZE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>MAX_PROC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>MAX_REGION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160000</span></pre>
				<pre><span>NCLIST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 170&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16640</span></pre>
				<pre><span>MAXUP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>NOFILES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;11000</span></pre>
				<pre><span>NHINODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>NAUTOUP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60</span></pre>
				<pre><span>NGROUPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128</span></pre>
				<pre><span>BDFLUSHR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300</span></pre>
				<pre><span>MAX_FLCKREC&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16000</span></pre>
				<pre><span>PUTBUFSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20000</span></pre>
				<pre><span>MAXSLICE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100</span></pre>
				<pre><span>ULIMIT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4194303&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2048&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4194303</span></pre>
				<pre><span>* Streams Parameters</span></pre>
				<pre><span>NSTREAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32768</span></pre>
				<pre><span>NSTRPUSH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9</span></pre>
				<pre><span>NMUXLINK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096</span></pre>
				<pre><span>STRMSGSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>STRCTLSZ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
				<pre><span>STRMAXBLK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4096&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288</span></pre>
				<pre><span>NSTRPAGES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8000</span></pre>
				<pre><span>STRSPLITFRAC&nbsp;&nbsp;&nbsp; 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100</span></pre>
				<pre><span>NLOG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span></pre>
				<pre><span>NUMSP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>NUMTIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8192</span></pre>
				<pre><span>NUMTRW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>* Semaphore Parameters</span></pre>
				<pre><span>SEMMAP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMNU&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span></pre>
				<pre><span>SEMMSL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150</span></pre>
				<pre><span>SEMOPM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024</span></pre>
				<pre><span>SEMUME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</span></pre>
				<pre><span>SEMVMX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32767</span></pre>
				<pre><span>SEMAEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16384</span></pre>
				<pre><span>* Shared Memory Parameters</span></pre>
				<pre><span>SHMMAX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 524288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 131072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2147483647</span></pre>
				<pre><span>SHMMIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span></pre>
				<pre><span>SHMMNI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000</span></pre>
				<pre><span>FILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64000</span></pre>
				<pre><span>NMOUNT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256</span></pre>
				<pre><span>NPROC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16000</span></pre>
				<pre><span>NREGION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160000</span></pre>
				<p>我們建議將這些值設置為：</p>
				<p>
				<span>NOFILES</span>應當為<span>4096</span>或<span>2048</span>。</p>
				<p>
				<span>MAXUP</span>應當為<span>2048</span>。</p>
				<p>要想更改內核，進入<span>/etc/conf/bin</span>並使用<strong><span>./idtune</span></strong><span>
				</span><span><i>
				<span>name parameter</span></i></span>來更改。例如，要將<span>SEMMS</span>改為<span>200</span>，用<span>root</span>帳號執行命令：</p>
				<pre><span># cd /etc/conf/bin</span></pre>
				<pre><span># ./idtune SEMMNS 200</span></pre>
				<p>我們建議對該系統進行調節，但是使用的正確參數值取決於訪問應用程式或資料庫的用戶數目和資料庫空間<span>(</span>也就是使用的緩衝池<span>)</span>。下面的項影響<span>/etc/conf/cf.d/stune</span>中定義的內核參數：</p>
				<p>
				<span>SHMMAX</span><span>(</span>推薦設定值：<span>128MB)</span>和<span>SHMSEG</span><span>(</span>推薦設定值：<span>15)</span>。這些參數影響建立用戶緩衝池的<span>MySQL</span>資料庫引擎。</p>
				<p>
				<span>NOFILES</span>和<span>MAXUP</span>至少應達到<span>2048</span>。</p>
				<p>
				<span>MAXPROC</span>至少應當設置到<span>3000/4000(</span>取決於用戶數<span>)</span>或更大值。</p>
				<p>建議使用下面的公式來計算<span>SEMMSL</span>、<span>SEMMNS</span>和<span>SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>發現<span>13</span>最適合程序和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系統上運行的<span>db</span>伺服器數目。</p>
				<p>
				<span>將<span>SEMMNS</span></span>設置為<span>SEMMSL</span>值乘以您在該系統上一次運行的<span>db</span>伺服器的<span>(</span>最大<span>)</span>數目。</p>
				<pre><span>SEMMNU = SEMMNS</span></pre>
				<p>將<span>SEMMNU</span>值設置為等於<span>SEMMNS</span>值。可以將該值設置為<span>75%</span>的<span>SEMMNS</span>，但是這是一個保守的估計。</p>
				<p>至少需要安裝<span>&quot;SCO OpenServer Linker and Application 
				Development Libraries&quot;</span>或<span>OpenServer</span>開發系統來使用<strong><span>gcc</span></strong>。您不能只使用<span>GCC 
				Dev</span>系統，而不安裝它們。</p>
				<p>您應當獲得<span>FSU PTHREADS</span>安裝軟件包並先安裝它。可以從<span><a target="_top"  href="http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz">http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz</a></span>獲得。您還可以從
          <a href="ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz" target="_top">
				ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz</a>獲得預編譯的安裝軟件包。</p>
				<p><span>FSU Pthreads</span>能用帶<span>tcpip</span>的<span>SCO 
				UNIX 4.2</span>編譯，或使用<span>OpenServer 3.0</span>或<span>Open 
				Desktop 3.0(OS 3.0 ODT 3.0)</span>，安裝帶有使用一個<span>GCC 
				2.5.X</span>的<span>SCO</span>開發系統。對<span>ODT</span>或<span>OS 
				3.0</span>，將需要一個<span>GCC </span><span>
				2.5.x</span>的良好移植。沒有一個良好的移植會有很多問題。對這個產品的移植需要<span>SCO 
				UNIX</span>開發系統，沒有它，缺少所需的庫和連結器。還需要<span>SCO-3.2v4.2-includes.tar.gz</span>。該檔案包含<span>SCO
				</span>開發<span>include </span>檔案的更改這是構建<span>MySQL</span>所需要的。需要用這些修改的頭檔案替換已有系統的<span>include</span>檔案。可以從 
				<span>
				<a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz">
				ftp<span>:</span>//ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a></span>獲得。</p>
				<p>為了在系統上構造<span>FSU Pthreads</span>，需要做的工作是運行<span>GNU
				<strong><span>make</span></strong></span>。啟動<span>FSU-threads-3.14.tar.gz</span>中的<span>Makefile</span>生成<span>FSU-</span>線程。</p>
				<p>在<tt >「<span>thread/src</span>」</tt>目錄下運行<span><b><span>./configure</span></b></span>並且選擇<span>SCO 
				OpenServer</span>選項。這個命令拷貝<tt >「<span>Makefile.SCO5」</span></tt>到<tt >「<span>Makefile</span>」</tt>。然後運行<strong><span>make</span></strong>。</p>
				<p>為了在預設<tt >的「<span>/usr/include</span>」</tt>目錄安裝，作為<span>root</span>登錄，然後<span>cd</span><span>
				</span><tt >到「<span>thread/src</span>」</tt>目錄，並運行<span><b><span>make 
				install</span></b></span>。</p>
				<p>記得在製作<strong><span>MySQL</span></strong>時要使用<span>GNU</span><span>
				<b>make</b></span>。</p>
				<p><strong><span>註釋：</span></strong>如果您不是作為<span>root</span>啟動<span><b><span>safe_mysqld</span></b></span>，將可能每程序只有
				預設的<span>110</span>個打開的檔案。<span><b><span>mysqld</span></b></span>將在日誌檔案寫下關於此的註解。</p>
				<p>用<span>SCO 3.2V4.2</span>時<span>,</span>應當使用<span>FSU 
				PTHREADS 3.14</span>或更新版。以下<strong><span  style="font-family:
細明體">configure</span></strong>命令應當工作：</p>
				<pre><span>CFLAGS=&quot;-D_XOPEN_XPG4&quot; CXX=gcc CXXFLAGS=&quot;-D_XOPEN_XPG4&quot; \</span></pre>
				<pre><span>./configure \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-thread-libs=&quot;-lgthreads -lsocket -lgen -lgthreads&quot; \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-named-curses-libs=&quot;-lcurses&quot;</span></pre>
				<p>您可能遇到<span>include</span>檔案的某些問題。在這種情況下，您能在<span><a  href="ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a></span>找到新的<span>SCO</span>特定的<span>include</span>檔案。您應該在<strong><span>MySQL</span></strong>原始碼樹<tt >的「<span>include</span>」</tt>目錄下打開這個檔案。<span>
				</span></p>
				<p><span>SCO</span>開發注意事項：</p>
				<ul type="disc">
					<li>
					<strong>
					<span>
					MySQL</span></strong>應該自動地檢測<span>FSU Pthreads</span>並且用<span>-lgthreads 
					-lsocket -lgthreads</span>選項連結<span><b><span>mysqld</span></b></span>。<span>
					</span></li>
					<li>
					<span>SCO</span>開發庫在<span>FSU 
					Pthreads</span>是重入<span>(reentrant)</span>的。<span>SCO</span>宣稱它的庫函數是重入的，因此他們一定在<span>FSU 
					Pthreads</span>中是重入的。在<span> OpenServer</span>上的<span> 
					FSU Pthreads </span>試圖使用<span>SCO</span>方案製作重入的庫。<span>
					</span></li>
					<li>
					<span>FSU Pthreads(</span>至少在<span><a target="_top"  href="ftp://:/ftp.zenez.com">ftp::/ftp.zenez.com</a></span>的版本<span>)</span>連結了<span>GNU</span><span> 
					malloc</span>，如果您遇到內存使用的問題，確定<tt >「<span>gmalloc.o</span>」</tt>包含在<tt >「<span>libgthreads.a</span>」</tt>和<tt >「<span>libgthreads.so</span>」</tt>中。<span>
					</span></li>
				</ul>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>在<span>FSU Pthreads</span>中，下列系統使用是<span>pthreads</span>感知的：<span>read()</span>、<span>write()</span>、<span>getmsg()</span>、<span>connect()</span>、<span>accept()</span>、<span>select()</span>和<span>wait()</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>CSSA-2001-SCO.35.2(</span>補丁列為定制<span>erg711905-dscr_remap</span>安全補丁<span>(</span>版本<span> 
				2.0.0))</span>中斷<span>FSU</span>線程並使<b><span>mysqld</span></b>不穩定。如果您想在<span> 
				OpenServer 5.0.6</span>機器上運行<strong><span>mysqld</span></strong>必須刪除它。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>如果您使用<span>SCO OpenServer 5,</span>可能需要用<span>-DDRAFT7<span> 
				in </span>CFLAGS</span>重新編譯<span>FSU pthreads</span>。否則，<b><span>mysqld</span></b>啟動時<span>InnoDB</span>會掛起。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a></span>提供了<span>OpenServer 
				5.0.x</span>的作業系統補丁。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/sse">ftp://ftp.sco.com/pub/security/sse</a></span>和<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/sse">ftp://ftp.sco.com/pub/security/sse</a></span>提供了<span>OpenServer 
				5.0.x</span>的安全修復和<span>libsocket.so.2</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span><span>Pre-OSR506</span>安全修復。在<span><a target="_top"  href="ftp://stage.caldera.com/pub/security/openserver/">ftp://stage.caldera.com/pub/security/openserver/</a></span>或<span><a target="_top"  href="ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/">ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/</a></span>提供了<span>libsocket.so.2</span>和<span>libresolv.so.1</span>的<span>telnetd</span>修復，以及在<span>pre-OSR506</span>系統上的安裝說明。</p>
				<p>最好在編譯<span>/</span>使用<span>MySQL</span>之前安裝這些補丁。</p>
				<p><span>Legend/ OpenServer 6.0.0</span>有原生線程，沒有<span>2GB</span>檔案大小限制。</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sco-unixware"></a>
				2.12.5.9.&nbsp;SCO UnixWare 7.1.x和OpenUNIX 8.0.0版注意事項</h4></div></div></div></div><div class="section"><div class="titlepage"><div><div>
				我們建議使用最新的<span>MySQL</span>產品發佈。<p>我們可以用下面的<strong><span  style="font-family:
細明體">configure</span><span style="font-weight:
normal">命令</span></strong>在<span>UnixWare 7.1.x</span>中編譯<span>MySQL</span>：</p>
				<pre><span>CC=&quot;cc&quot; CFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>CXX=&quot;CC&quot; CXXFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-berkeley-db=./bdb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-innodb --with-openssl --with-extra-charsets=complex</span></pre>
				<p>如果您想要使用<strong><span  style="font-family:
細明體">gcc</span></strong>，必須使用<strong><span>gcc</span></strong><span> 
				2.95.3</span>或更新版。</p>
				<pre><span>CC=gcc CXX=g++ ./configure --prefix=/usr/local/mysql</span></pre>
				<p>當構建<span>MySQL</span>時不使用<span>UnixWare 
				7.1.4</span>或<span>OpenServer 6.0.0</span>中的<span>Berkeley 
				DB</span>版本。<span>MySQL</span>使用自己的<span>Berkeley 
				DB</span>。用來構建靜態和動態庫的<strong><span  style="font-family:
細明體">configure</span><span style="font-weight:
normal">命令</span></strong>在<span><i><span>src_directory</span></i><span>/bdb/build_unix/</span></span>中，但是它不在<span>MySQL</span>自己的<span>BDB</span>版本中。工作區如下所示。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按常規配置<span>MySQL</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>進入<span>（<span>cd</span>）<span>bdb/build_unix/</span></span></p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>將<span> 
				-p Makefile</span>複製<span>(cp)</span>到<span>Makefile.sav</span></p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用同樣的選項並運行<strong><span  style="font-family:
細明體">../dist/configure</span></strong>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>運行<strong><span>gmake</span></strong>。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>cp -p Makefile.sav 
				Makefile</span></p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>進入頂級源目錄並運行<strong><span  style="font-family:
細明體">gmake</span></strong>。</p>
				<p>允許生成共享和動態庫並工作。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7">ftp://ftp.sco.com/pub/unixware7</a></span>提供了<span>UnixWare 
				7.1.1</span>的作業系統補丁<span>,</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7/713/">ftp://ftp.sco.com/pub/unixware7/713/</a>
				</span>提供了<span>UnixWare 7.1.3</span>的作業系統補丁<span>, 
				UnixWare 7.1.4</span>的見<span><a target="_top"  href="ftp://ftp.sco.com/pub/unixware7/714/">ftp://ftp.sco.com/pub/unixware7/714/</a>, 
				OpenUNIX 8.0.0</span>的見 <span>
				<a target="_top"  href="ftp://ftp.sco.com/pub/openunix8">
				ftp://ftp.sco.com/pub/openunix8</a> </span>。</p>
				<p><span>SCO</span>提供的安全修復相關訊息：<span>OpenUNIX</span>見<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenUNIX">ftp://ftp.sco.com/pub/security/OpenUNIX</a></span>，<span>UnixWare</span>見 
				<span>
				<a target="_top"  href="ftp://ftp.sco.com/pub/security/UnixWare">
				ftp://ftp.sco.com/pub/security/UnixWare</a></span>。</p>
				<p>預設情況，在<span>UnixWare 7.1.1</span>系統中最大檔案的大小為<span>1GB</span>，但是<span>UnixWare 
				7.1.4</span>中檔案大小限制是<span>1 TB</span>（用<span>VXFS</span>）。一些<span>OS</span>實用程式 
				的限制是<span>2GB</span>。在<span>UnixWare 7</span>中可能的最大檔案大小是<span>1TB</span>（用<span>VXFS</span>）。</p>
				<p>在<span>UnixWare 7.1.4</span>中，您不需要採取措施來獲得大檔案支援，但在<span>UnixWare 
				7.1.x</span>的以前版本中需要啟用大檔案支援，可以運行<span>fsadm</span>。</p>
				<pre><span># fsadm -Fvxfs -o largefiles /</span></pre>
				<pre><span># fsadm /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * Note</span></pre>
				<pre><span># ulimit unlimited</span></pre>
				<pre><span># cd /etc/conf/bin</span></pre>
				<pre><span># ./idtune SFSZLIM 0x7FFFFFFF&nbsp;&nbsp;&nbsp;&nbsp; ** Note</span></pre>
				<pre><span># ./idtune HFSZLIM 0x7FFFFFFF&nbsp;&nbsp;&nbsp;&nbsp; ** Note</span></pre>
				<pre><span># ./idbuild -B</span></pre>
				<pre><span>&nbsp;</span></pre>
				<pre><span>* This should report &quot;largefiles&quot;.</span></pre>
				<pre><span>** 0x7FFFFFFF represents infinity for these values.</span></pre>
				<p>用<span>shutdown</span>重啟系統。</p>
				<p>預設情況，<span>/etc/conf/cf.d/mtune</span>中的條目設置為：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>SVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<p>我們建議將這些值設置為：</p>
				<pre><span>SDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>HDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>SVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>SFNOLIM 2048</span></pre>
				<pre><span>HFNOLIM 2048</span></pre>
				<p>
				我們建議對該系統進行調節，但是使用的正確參數值取決於訪問應用程式或資料庫的用戶數目和資料庫空間<span>(</span>也就是使用的緩衝池<span>)</span>。下面的項影響<span  >/etc/conf/cf.d/stune</span>中定義的內核參數：</p>
				<p>
				<span  >
				SHMMAX</span><span>(</span>推薦設定值：<span>128MB)</span>和<span  >SHMSEG</span><span>(</span>推薦設定值：<span>15)</span>。這些參數影響建立用戶緩衝池的<span>MySQL</span>資料庫引擎。</p>
				<p>
				<span>SFNOLIM</span>和<span>HFNOLIM</span>至少應達到<span>2048</span>。</p>
				<p>
				<span>NPROC</span>至少應當設置到<span>3000/4000(</span>取決於用戶數<span>)</span>。</p>
				<p>建議使用下面的公式來計算<span  >SEMMSL</span>、<span  >SEMMNS</span>和<span  >SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>據發現<span>13</span>最適合程序和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系統上運行的<span>db</span>伺服器數目。</p>
				<p>將<span  >SEMMNS</span>設置為<span  >SEMMSL</span>值乘以您在該系統上一次運行的<span>db</span>伺服器的<span>(</span>最大<span>)</span>數目。</p>
				<p>
				<span>SEMMNU</span><span> 
				= </span>
				<span>SEMMNS</span><span>
				</span></p>
				<p>將<span  >SEMMNU</span>值設置為等於<span  >SEMMNS</span>值。可以將該值設置為<span>75%</span>的<span  >SEMMNS</span>，但是這是一個保守的估計。</p>
				<h4 class="title"><a name="sco-openserver"></a>2.12.5.10.&nbsp;SCO 
				OpenServer 6.0.x版注意事項</h4></div></div></div>
				<p><span>OpenServer6</span>的主要改進包括：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>大檔案支援，可達到<span>1 TB</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>多處理器支援，從<span>4</span>個處理器增加到<span>32</span>個處理器。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>增加的內存支援，可達到<span>64GB</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>將<span>UnixWare</span>的功能延伸到<span>OpenServer6</span>。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>性能的改進</p>
				<p><span>OpenServer6.0.0</span>具有：</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/bin</span>，用於與<span>OpenServer5.0.x</span>相同行為的命令。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/u95/bin</span>用於標準的命令，例如大檔案系統<span>(LFS)</span>支援。</p>
				<p>
				<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>/udk/bin</span>用於<span>UnixWare 
				7.1.4</span>中相同的命令，預設是<span>LFS</span>支援。</p>
				<p>下面是在<span>OpenServer6</span>上設置<span>PATH</span>的指導。如果用戶想使用傳統的<span>OpenServer5.0.x</span>，則路徑應當首先為<span>/bin</span>。如果用戶需要<span>LFS</span>支援，則 
				路徑應當為<span><span>/u95/bin</span><span>：<span>/bin</span></span></span>。如果用戶首選<span>UnixWare 
				7</span>支援，則路徑應為<span><span>/udk/bin</span><span>：<span>/u95/bin</span>：<span>/bin</span>：</span></span>。</p>
				<p>我們建議使用最新的<span>MySQL</span>產品發佈。</p>
				<p>我們可以在<span>OpenServer 6.0.x</span>用下面的<strong><span>configure</span><span>命令</span></strong>編譯<span>MySQL</span>：</p>
				<pre><span>CC=&quot;cc&quot; CFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>CXX=&quot;CC&quot; CXXFLAGS=&quot;-I/usr/local/include&quot; \</span></pre>
				<pre><span>./configure --prefix=/usr/local/mysql \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-thread-safe-client --with-berkeley-db=./bdb \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --with-innodb --with-openssl --with-extra-charsets=complex \</span></pre>
				<pre><span>&nbsp;&nbsp;&nbsp; --enable-readline</span></pre>
				<p>如果您想要使用<strong><span  style="font-family:
細明體">gcc</span></strong>，必須使用<strong><span>gcc</span></strong><span>2.95.3</span>或更新版。</p>
				<pre><span>CC=gcc CXX=g++ ./configure --prefix=/usr/local/mysql</span></pre>
				<p>當構建<span>MySQL</span>時不使用<span>UnixWare 
				7.1.4</span>或<span>OpenServer 6.0.0</span>中的<span>Berkeley 
				DB</span>版本。<span>MySQL</span>使用自己的<span>Berkeley 
				DB</span>。用來構建靜態和動態庫的<strong><span  style="font-family:
細明體">configure</span><span style="font-weight:
normal">命令</span></strong>在<span><i><span>src_directory</span></i><span>/bdb/build_unix/</span></span>中，但是它不在<span>MySQL</span>自己的<span>BDB</span>版本中。工作區如下所示。</p>
				<p>
				<span>1.<span>&nbsp;&nbsp;&nbsp;
				</span></span>按常規配置<span>MySQL</span>。</p>
				<p>
				<span>2.<span>&nbsp;&nbsp;&nbsp;
				</span></span>進入<span>（<span>cd</span>）<span>bdb/build_unix/</span></span></p>
				<p>
				<span>3.<span>&nbsp;&nbsp;&nbsp;
				</span></span>將<span> 
				-p Makefile</span>複製<span>(cp)</span>到<span>Makefile.sav</span></p>
				<p>
				<span>4.<span>&nbsp;&nbsp;&nbsp;
				</span></span>使用同樣的選項並運行<strong><span  style="font-family:
細明體">../dist/configure</span></strong>。</p>
				<p>
				<span>5.<span>&nbsp;&nbsp;&nbsp;
				</span></span>運行<strong><span>gmake</span></strong>。</p>
				<p>
				<span>6.<span>&nbsp;&nbsp;&nbsp;
				</span></span>
				<span>cp -p Makefile.sav 
				Makefile</span></p>
				<p>
				<span>7.<span>&nbsp;&nbsp;&nbsp;
				</span></span>進入頂級源目錄並運行<strong><span  style="font-family:
細明體">gmake</span></strong>。</p>
				<p>允許生成共享和動態庫並工作。<span>OpenServer6.0.0 </span>還需要<span>MySQL</span>原始碼樹的補丁和適用於<span>bdb/dist/config.guess</span>的<span>config.guess</span>的補丁。您可以從<span><a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.1.12-osr6-patches.tar.gz">ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.1.12-osr6-patches.tar.gz</a></span>和<span><a target="_top"  href="ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.x.x-osr6-patches">ftp://ftp.zenez.com/pub/zenez/prgms/mysql-4.x.x-osr6-patches</a></span>下載補丁。有一個<span  >README</span>檔案可以提供幫助。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/openserver6">ftp://ftp.sco.com/pub/openserver6</a></span>提供了<span>OpenServer6</span>的作業系統補丁。</p>
				<p><span>SCO</span>在<span><a target="_top"  href="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a></span>提供關於安全修復的訊息。</p>
				<p>預設情況，在<span>OpenServer6.0.0</span>系統的最大檔案大小為<span>1TB</span>。一些作業系統工具的限制是<span>2GB</span>。在<span>UnixWare 
				7</span>中最大檔案大小可以是<span>1TB</span>（用<span> 
				VXFS</span>或<span>HTFS</span>）。</p>
				<p>預設情況，<span>/etc/conf/cf.d/mtune</span>中的條目設置為：</p>
				<pre><span>Value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Max</span></pre>
				<pre><span>-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;-------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---</span></pre>
				<pre><span>SVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x9000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x1000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x2000&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x7FFFFFFF</span></pre>
				<p>我們建議將這些值設置為：</p>
				<pre><span>SDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>HDATLIM 0x7FFFFFFF</span></pre>
				<pre><span>SSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>HSTKLIM 0x7FFFFFFF</span></pre>
				<pre><span>SVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>HVMMLIM 0x7FFFFFFF</span></pre>
				<pre><span>SFNOLIM 2048</span></pre>
				<pre><span>HFNOLIM 2048</span></pre>
				<p>
				我們建議對該系統進行調節，但是使用的正確參數值取決於訪問應用程式或資料庫的用戶數目和資料庫空間<span>(</span>也就是使用的緩衝池<span>)</span>。下面的項影響<span  >/etc/conf/cf.d/stune</span>中定義的內核參數：</p>
				<p>
				<span  >
				SHMMAX</span><span>(</span>推薦設定值：<span>128MB)</span>和<span  >SHMSEG</span><span>(</span>推薦設定值：<span>15)</span>。這些參數影響建立用戶緩衝池的<span>MySQL</span>資料庫引擎。</p>
				<p>
				<span>SFNOLIM</span>和<span>HFNOLIM</span>至少應達到<span>2048</span>。</p>
				<p>
				<span>NPROC</span>至少應當設置到<span>3000/4000(</span>取決於用戶數<span>)</span>。</p>
				<p>建議使用下面的公式來計算<span  >SEMMSL</span>、<span  >SEMMNS</span>和<span  >SEMMNU</span>的值：</p>
				<pre><span>SEMMSL = 13</span></pre>
				<p>發現<span>13</span>最適合程序和<span>MySQL</span>。</p>
				<p>
				<span>SEMMNS</span><span> 
				= </span>
				<span>SEMMSL</span><span> 
				* </span>系統上運行的<span>db</span>伺服器數目。</p>
				<p>將<span  >SEMMNS</span>設置為<span  >SEMMSL</span>值乘以您在該系統上一次運行的<span>db</span>伺服器的<span>(</span>最大<span>)</span>數目。</p>
				<p>
				<span>SEMMNU</span><span> 
				= </span>
				<span>SEMMNS</span><span>
				</span></p>
				<p>將<span  >SEMMNU</span>值設置為等於<span  >SEMMNS</span>值。可以將該值設置為<span>75%</span>的<span  >SEMMNS</span>，但是這是一個保守的估計。</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="os-2"></a>
			2.12.6.&nbsp;OS/2注意事項</h3></div></div></div></div></div><div class="section"><div class="titlepage"><div><div>
		<strong><span>
		MySQL</span></strong>使用太多的打開檔案。因此，應該增加類似下面的東西到<tt >「<span>CONFIG.SYS</span>」</tt>檔案：<pre><span>SET EMXOPT=-c -n -h1024</span></pre>
		<p>如果不這樣做，將可能碰到下列錯誤：</p>
		<pre><span >File &#39;</span><i><span>xxxx</span></i><span >&#39; not found (Errcode: 24)</span><span>『</span></pre>
		<p>
		當<span>OS/2 Warp 3</span>上使用<strong><span style="font-family:
細明體;">MySQL</span></strong>時，要求<span>FixPack 29</span>或以上版本。用<span>OS/2 
		Wrap 4</span>，要求<span>FixPack 4</span>或以上版本。這是<span>Pthreads</span>庫的一個要求。<strong><span>MySQ</span><span>L</span></strong>必須安裝在支援長檔案名的一個分區上，如<span>HPFS</span>、<span>FAT32</span>等等。</p>
		<p>
		<tt >「<span>INSTALL.CMD</span>」</tt>指令必須從<span>OS/2</span>自己的<tt >「<span>CMD.EXE</span>」</tt>運行並且不能工作在替代外殼如<tt >「<span>4OS2.EXE</span></tt>」。</p>
		<p>
		<tt >「<span>scripts/mysql-install-db</span>」</tt>指令已經被重新命名了：它稱為<tt >「<span>install.cmd</span>」</tt>並且是一個<span>REXX</span>指令，將安裝
		預設的<strong><span>MySQL</span></strong>安全配置並為<strong><span>MySQL</span></strong>建立<span>WorkPlace 
		Shell</span>圖標。</p>
		<p>
		動態模塊支援通過編譯但沒有充分測試，動態模塊應該使用<span>Pthreads</span>運行時刻庫編譯。</p>
		<p>
		<span>&nbsp;</span></p>
		<pre><span>gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \</span></pre>
		<pre><span>&nbsp;&nbsp;&nbsp; -o example udf_example.cc -L../lib -lmysqlclient udf_example.def</span></pre>
		<pre><span>mv example.dll example.udf</span></pre>
		<p><strong><span>註釋：</span></strong>由於<span>OS/2</span>的限制，<span>UDF</span>模塊名字的詞幹不能超過<span>8</span>個字元。模塊儲存在<tt >「<span>/mysql2/udf</span>」</tt>目錄；<span>safe-mysqld.cmd</span>指令將把這個目錄放在<span>BEGINLIBPATH</span>環境變數中。當使用<span>UDF</span>模塊時，指定的延伸名被忽略<span>--</span>它被假定為<tt >「<span>.udf</span>」</tt>。例如，在<span> 
		Unix</span>上，共享模塊可能被命名<tt >為「<span>example.so</span>」</tt>並且可以像這樣從它裝載函數：</p>
		<p><span>mysql&gt;
		</span><span>CREATE FUNCTION metaphon RETURNS STRING SONAME &#39;example.so&#39;</span><span><b>；</b></span></p>
		<p>在<span>OS/2</span>中<span>, </span>模塊被命名為<span  >example.udf</span>，但是不能指定模塊延伸名：</p>
		<pre><span >mysql&gt; </span><b><span>CREATE FUNCTION metaphon RETURNS STRING SONAME &#39;example&#39;</span></b><span><b><span>；</span></b></span></pre>
		<h2 class="title"><a name="perl-support"></a>
		2.13.&nbsp;Perl安裝注意事項</h2></div></div></div><div class="toc"><dl><dt><span class="section">
			<a href="#perl-installation">
			2.13.1. 在Unix中安裝Perl</a></span></dt><dt><span class="section">
			<a href="#activestate-perl">
			2.13.2. 在Windows下安裝ActiveState Perl</a></span></dt><dt><span class="section">
			<a href="#perl-support-problems">
			2.13.3. 使用Perl DBI/DBD接口的問題<code class="literal"></code></a></span></dt></dl></div><a class="indexterm" name="id2731838"></a><a class="indexterm" name="id2731848"></a>
		<p>
		<span>Perl</span>對<strong><span style="
">MySQ</span><span>L</span></strong>的支援借助<span>DBI</span><span>/</span><span>DBD</span>客戶端接口。接口要求<span>Perl 
		5.6.0</span>或以後版本。如果您的<span>Perl</span>版本更舊，接口<em><span>將不能工作</span></em>。</p>
		<p>如果想要在<span>Perl DBI</span>中使用事務，需要有<span>1.2216</span>版或更新版<span><span>DBD</span><span>：：</span><span>mysql</span></span>。建議使用<span>2.9003</span>版或更新版。</p>
		<p>如果您使用<span>MySQL 4.1</span>客戶端庫，必須使用<span><span>DBD</span><span>：：<span>mysql</span></span></span><span> 
		2.9003</span>或更新版。</p>
		<p><span>MySQL</span>分發版不包含<span>Perl</span>支援。可以從<span><a target="_top"  href="http://search.cpan.org">http://search.cpan.org</a></span>獲得<span>Unix</span>需要的模塊，或在<span>Windows</span>中使用<span>ActiveState
		<strong><span>ppm</span></strong></span>程式。以下章節描述了如何做。</p>
		<p>如果您想要運行<span>MySQL</span>基準指令，必須安裝<span>Perl</span>支援。請參見<a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">7.1.4節，「MySQL基準套件」</a>。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="perl-installation"></a>
			2.13.1.&nbsp;在Unix中安裝Perl</h3></div></div></div>
			<p><strong>
			<span>MySQL</span></strong><span> 
			Perl</span>支援也要求您安裝了<strong><span style="font-family:
細明體;">MySQL</span></strong>客戶端編程支援<span>(</span>庫和頭檔案<span>)</span>。大多數安裝中安裝了必要的檔案。但是，如果您在<span>Linux</span>中從<span>RPM</span>檔案安裝<span>MySQL</span>，確保安裝了開發者<span>RPM</span>。客戶端程式在客戶端<span>RPM</span>中，但是客戶端編程支援在開發者<span>RPM</span>。</p>
			<p>如果您想要安裝<span>Perl</span>支援，需要的檔案能從<span><a target="_top"  href="http://search.cpan.org">http://search.cpan.org</a></span>的<span>CPAN 
			(Comprehensive Perl Archive Network)</span>獲得。</p>
			<p>在<span>Unix</span>中安裝<span>Perl</span>模塊最簡單的方法是使用<span>CPAN</span>模塊。例如：</p>
			<pre><span>shell&gt; </span><span><b><span>perl -MCPAN -e shell</span></b></span></pre>
			<pre><span>cpan&gt; install DBI</span></pre>
			<pre><span>cpan&gt; install DBD::mysql</span></pre>
			<p><span>
			<span>DBD</span><span>：：<span>mysql</span></span></span>安裝運行許多測試。測試中使用預設帳號和密碼嘗試連接本地<span>MySQL</span>伺服器。<span>(</span>預設帳號是<span>Unix</span>中的登錄名和<span>Windows</span>中的<span>ODBC</span>。預設密碼「沒有<span class="quote">密碼。</span>」<span>)
			</span>如果您不能通過這些值連接伺服器<span> (</span>例如，如果您的帳號有密碼<span>)</span>，測試失敗。可以使用<span  >force 
			install DBD::mysql</span>忽略失敗的測試。</p>
			<p>
			<span>DBI</span>需要<span  >Data::Dumper</span>模塊。應該可以安裝；如果不能，應當在安裝<span>DBI</span>前安裝<span  >Data::Dumper</span>模塊。</p>
			<p>還可以下載<strong><span  style="font-family:
細明體">tar</span></strong>檔案壓縮格式的模塊分發版，並手動構建模塊。例如，解壓縮和構建<span>DBI</span>分發版的過程為：</p>
			<p>
			<span>1.<span>&nbsp;&nbsp;&nbsp;
			</span>&nbsp;</span>將分發版解壓縮到當前目錄：</p>
			<pre><span>2.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><b><span>gunzip &lt; DBI-<i>VERSION</i>.tar.gz | tar xvf </span></b><span><b><span>-</span></b></span></pre>
			<p>該命令建立目錄 
			<span>DBI-</span><i><span  >VERSION</span></i>。</p>
			<p>
			<span>3.<span>&nbsp;&nbsp;&nbsp;
			</span></span>進入解壓縮分發版的頂級目錄：</p>
			<pre><span>4.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>cd DBI-</span></b></span><b><i><span>VERSION</span></i></b></pre>
			<p>
			<span>5.<span>&nbsp;&nbsp;&nbsp;
			</span></span>構建分發版並編譯：</p>
			<pre><span>6.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>perl Makefile.PL</span></b></span></pre>
			<pre><span>7.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>8.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make test</span></b></span></pre>
			<pre><span>9.<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<p>
			<span><b><span>make test</span></b></span>命令很重要，因為它驗證模塊正在工作。注意：在您<span  >DBD::mysql</span>安裝期間運行該命令試驗接口代碼時，<strong><span>MySQL</span></strong>伺服器必須正在運行，否則測試將失敗。<span>
			</span></p>
			<p>
			無論何時您安裝一個新版本的<strong><span>MySQL</span></strong>，重建並且重新安裝<span  >DBD::mysql</span>分發版是一個好主意<span>,
			</span>特別是在升級<strong><span>MySQL</span></strong>後，觀察所有異常，如<span>DBI</span>指令失敗。<span>
			</span></p>
			<p>如果您沒有權限在系統目錄下安裝<span>Perl</span>模塊，或如果您安裝本地<span>Perl</span>模塊，下列參考書可以幫助您：<span><a target="_top"  href="http://servers.digitaldaze.com/extensions/perl/modules.html#modules">http://servers.digitaldaze.com/extensions/perl/modules.html#modules</a></span></p>
			<p>在標題「<span><span>Installing 
			New Modules that Require Locally Installed Modules</span><span>」</span></span>下面搜尋。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="activestate-perl"></a>
			2.13.2.&nbsp;在Windows下安裝ActiveState Perl</h3></div></div></div><a class="indexterm" name="id2732167"></a><a class="indexterm" name="id2732177"></a><a class="indexterm" name="id2732188"></a>
			<p>在<span>Windows</span>中，應當按照以下步驟安裝帶<span>ActiveState 
			Perl</span>的<span>MySQL </span>
			<span>DBD</span>模塊：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>從<span><a target="_top"  href="http://www.activestate.com/Products/ActivePerl/">http://www.activestate.com/Products/ActivePerl/</a></span>獲得<span>ActiveState 
			Perl</span>並安裝。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>打開控制台窗口<span>(</span>「<span class="quote"><span>DOS</span>窗口</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果需要，設置<span  >HTTP_proxy</span>變數。例如，您可以試試：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>set HTTP_proxy=my.proxy.com:3128</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>啟動<span>PPM</span>程式：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>C</span>：<span>\&gt; </span><span><b><span>C</span><span>：<span>\perl\bin\ppm.pl</span></span></b></span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果您還沒有安裝<span>DBI</span>，則安裝：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ppm&gt; install DBI</span></pre>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>如果成功，運行下面的命令：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>install\</span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>ftp://ftp.de.uu.net/pub/CPAN/authors/id/JWIED/DBD-mysql-1.2212.x86.ppd</span></pre>
			<p>該程序應當在<span>ActiveState Perl 5.6</span>或更新版本中工作。</p>
			<p>如果您不能使上述步驟工作，應該安裝<strong><span>MyODBC</span></strong>驅動程式並且通過<span>ODBC</span>連接<strong><span style="
">MySQL</span></strong>伺服器：</p>
			<pre><span>use DBI;</span></pre>
			<pre><span>$dbh= DBI-&gt;connect(&quot;DBI:ODBC:$dsn&quot;,$user,$password) ||</span></pre>
			<pre>die "Got error $DBI::errstr when connecting to $dsn\n";</pre>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="perl-support-problems"></a>
			2.13.3.&nbsp;使用Perl DBI/DBD接口的問題<code class="literal"></code></h3></div></div></div><a class="indexterm" name="id2732326"></a><a class="indexterm" name="id2732336"></a>
			<p>如果<span>Perl</span>報告它不能發現<span  >../mysql/mysql.so</span>模塊，可能試因為<span>Perl</span>不能定位共享庫<span  >libmysqlclient.so</span>。</p>
			<p>可以使用下面的方法修復該問題：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>用<span  >perl 
			Makefile.PL -static -config</span>而不要用<span  >perl 
			Makefile.PL</span>編譯<span><span>DBD</span><span>：：<span>mysql</span></span></span>分發版。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>將<span  >libmysqlclient.so</span>複製到其它共享庫所在的目錄<span> 
			(</span>可能為<span>/usr/lib</span><span>
			</span>或<span>/lib</span><span>)</span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>修改用來編譯<span><span>DBD</span><span>：：<span>mysql</span></span></span>的<span>-L</span>選項，反應<span  >libmysqlclient.so</span>的實際位置。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在<span>Linux</span>中，您可以將<span  >libmysqlclient.so</span>的目錄路徑名增加到<span  >/etc/ld.so.conf</span>檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>將<span  >libmysqlclient.so</span>的目錄路徑名增加到<span  >LD_RUN_PATH</span>環境變數。一些系統使用<span  >LD_LIBRARY_PATH</span>。</p>
			<p>注意如果連接器沒有找到另一個庫，您還可能需要修改<span>-L</span>選項。例如，如果因為<span>libc</span>在<span>/lib</span>下並且連接命令指定了<span>-L/usr/lib</span>，連接器不能找到它，將<span>-L</span>選項更改為<span>-L/lib</span>或在連接命令中增加<span>-L/lib</span>。</p>
			<p>如果您遇到下面的<span><span>DBD</span><span>：：<span>mysql</span></span></span>錯誤，您可能使用了<strong><span  style="font-family:
細明體">gcc</span></strong><span>(</span>或使用了用<strong><span>gcc</span></strong>編譯的舊的二進制<span>)</span>：</p>
			<pre><span>/usr/bin/perl: can&#39;t resolve symbol &#39;__moddi3&#39;</span></pre>
			<pre><span>/usr/bin/perl: can&#39;t resolve symbol &#39;__divdi3&#39;</span></pre>
			<p>當構建<span  >mysql.so</span>庫是在連接命令中增加<span>-L/usr/lib/gcc-lib/... 
			-lgcc</span><span>(</span>當編譯<span>Perl</span>客戶端時檢查生成<span  >mysql.so</span>的<strong><span>make</span></strong>的輸出<span>)</span>。<span>-L</span>選項應指定<span>libgcc.a</span>在系統中的安裝目錄的路徑名。</p>
			<p>該問題的另一個原因是<span>Perl</span>和<span>MySQL</span>沒有用<strong><span>gcc</span></strong>編譯。在這種情況下，您可以用<strong><span>gcc</span></strong>編譯二者來解決。</p>
			<p>當您運行測試時您會從<span><span>DBD</span><span>：：<span>mysql</span></span></span>看見下面的錯誤：</p>
			<pre><span>t/00base............install_driver(mysql) failed:</span></pre>
			<pre><span>Can&#39;t load &#39;../blib/arch/auto/DBD/mysql/mysql.so&#39; for module DBD::mysql:</span></pre>
			<pre><span>../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol:</span></pre>
			<pre><span>uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.</span></pre>
			<p>這意味著您需要在連接行包括<span>-lz</span><span>
			</span>壓縮庫。可以通過更改檔案<span  >lib/DBD/mysql/Install.pm</span>的下列行來實現：</p>
			<pre><span>$sysliblist .= &quot; -lm&quot;;</span></pre>
			<p>更改為：</p>
			<pre><span>$sysliblist .= &quot; -lm -lz&quot;;</span></pre>
			<p>然後，您必須運行<strong><span  style="font-family:
細明體">make realclean</span></strong><span> </span>然後重新安裝。</p>
			<p>如果您想要在<span>SCO</span>上安裝<span>DBI</span>，需要在<span>DBI-</span><span><i><span>xxx</span></i></span><span>
			</span>和每個子目錄中編輯<span  >Makefile</span>。請注意下面的更新假定使用<strong><span>gcc</span></strong><span> 
			2.95.2</span>或更新版：</p>
			<pre><span>舊：</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>新：</span></pre>
			<pre><span>CC = cc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CC = gcc</span></pre>
			<pre><span>CCCDLFLAGS = -KPIC -W1,-Bexport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CCCDLFLAGS = -fpic</span></pre>
			<pre><span>CCDLFLAGS = -wl,-Bexport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CCDLFLAGS =</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>LD = ld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD = gcc -G -fpic</span></pre>
			<pre><span>LDDLFLAGS = -G -L/usr/local/lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDDLFLAGS = -L/usr/local/lib</span></pre>
			<pre><span>LDFLAGS = -belf -L/usr/local/lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDFLAGS = -L/usr/local/lib</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>LD = ld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD = gcc -G -fpic</span></pre>
			<pre><span>OPTIMISE = -Od&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OPTIMISE = -O1</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>舊：</span></pre>
			<pre><span>CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>新：</span></pre>
			<pre><span>CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include</span></pre>
			<p>這些更改是必需的，因為用<strong><span>icc</span></strong>或<strong><span>cc</span></strong>編譯的<span>Perl</span>動態裝載器不裝載<span>DBI</span>模塊。</p>
			<p>如果您想要在不支援動態連結<span>(</span>例如<span> SCO)</span>的系統中使用<span>Perl</span>模塊，可以生成一個包括<span>DBI</span>和<span><span>DBD</span><span>：：<span>mysql</span></span></span>的靜態版本的<span>Perl</span>。方法是生成一個用<span>DBI</span>代碼連接的<span>Perl</span>版本，並將它安裝到當前<span>Perl</span>的頂級目錄。然後構建一個含<span>DBD</span>代碼連接的<span>Perl</span>版本並安裝。</p>
			<p>在<span>SCO</span>中，必須將下面的環境變數設置為：</p>
			<pre><span>LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib</span></pre>
			<p><span>Or</span>：</p>
			<pre><span>LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/progressive/lib:/usr/skunk/lib</span></pre>
			<pre><span>LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/progressive/lib:/usr/skunk/lib</span></pre>
			<pre><span>MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:\</span></pre>
			<pre><span>&nbsp;&nbsp;&nbsp; /usr/skunk/man:</span></pre>
			<p>首先，在<span>DBD</span>分發版的安裝目錄運行下述命令來建立一個包括靜態連接的<span>DBD</span>模塊的<span>Perl</span>：</p>
			<pre><span>shell&gt; </span><span><b><span>perl Makefile.PL -static -config</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make perl</span></b></span></pre>
			<p>然後必須安裝新的<span>Perl</span>。<strong><span>make 
			perl</span></strong>的輸出資料表示安裝時需要執行的<strong><span>make</span></strong>命令。在<span>SCO</span>中，為<strong><span>make 
			-f Makefile.aperl inst_perl MAP_TARGET=perl</span></strong>。</p>
			<p>然後，使用剛剛建立的<span>Perl</span>，在<span><span>DBD</span><span>：：<span>mysql</span></span></span>分發版的安裝目錄運行下述命令來建立另一個<span>Perl</span>，應包括靜態連接的<span><span>DBD</span><span>：：<span>mysql</span></span></span>：</p>
			<pre><span>shell&gt; </span><span><b><span>perl Makefile.PL -static -config</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make install</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>make perl</span></b></span></pre>
			<p>最後，應當安裝新的<span>Perl</span>。<strong><span>make 
			perl</span><span>的</span></strong>輸出指示了使用的命令。</div></div></div><div><hr>
	<p>
	這是MySQL參考手冊的翻譯版本，關於MySQL參考手冊，請訪問<a target="_top"  href="http://dev.mysql.com/doc/mysql/en">dev.mysql.com.</a>。原始參考手冊為英文版，與英文版參考手冊相比，本翻譯版可能不是最新的。</div>
</body></html>
