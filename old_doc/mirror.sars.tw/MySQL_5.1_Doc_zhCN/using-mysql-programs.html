<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 4. Using MySQL Programs</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="tutorial.html" title="Chapter 3. Tutorial"><link rel="next" href="database-administration.html" title="Chapter 5. Database Administration">
<style>
<!--
span.quote
	{}
 table.MsoNormalTable
	{mso-style-parent:"";
	font-size:10.0pt;
	
	}
-->
</style>
</head><body><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="using-mysql-programs"></a>
	第4章：MySQL程式概述</h2></div></div></div><div class="toc"><p><b>目錄</b></p><dl><dt><span class="section"><a href="using-mysql-programs.html#program-overview">
		4.1. MySQL程式概述</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#invoking-programs">
		4.2. 使用MySQL程式</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#program-options">
		4.3. 指定程式選項</a></span></dt><dd><dl><dt><span class="section"><a href="using-mysql-programs.html#command-line-options">
			4.3.1. 在命令行上使用選項</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#option-files">
			4.3.2. 使用選項檔案</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#environment-variable-options">
			4.3.3. 用環境變數指定選項</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#program-variables">
			4.3.4. 使用選項設置程式變數</a></span></dt></dl></dd></dl></div>
	<p>本章簡要概述了<span>MySQL AB</span>提供的命令行程式，並討論了運行這些程式時如何指定選項。大多數程式具有其操作專用的選項，但指定選項的語法都近似。後面的幾章更加詳細地描述了各個程式，包括它們識別的選項。</p>
	<p><span>MySQL AB</span>還提供了<span>3</span>個<span>GUI</span>客戶程式供<span>MySQL</span>伺服器使用：</p>
	<p>
	<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	</span></span><span>
	<a target="_top"  href="http://dev.mysql.com/doc/administrator/en/">
	MySQL<span>管理器</span></a></span>：該工具用於管理<span>MySQL</span>伺服器、資料庫、資料表以及用戶。</p>
	<p>
	<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	</span></span><span>
	<a target="_top"  href="http://dev.mysql.com/doc/query-browser/en/">
	MySQL<span>查詢瀏覽器</span></a></span>：該圖形工具由<span>MySQL 
	AB</span>提供，用於建立、執行以及最佳化對<span>MySQL</span>資料庫的查詢。</p>
	<p>
	<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	</span></span><span>
	<a target="_top"  href="http://dev.mysql.com/doc/migration-toolkit/en/">
	MySQL<span>移植工具包</span></a></span>：該工具可以幫助您將計劃和數據從其它關係資料庫管理系統移植到<span>MySQL</span>。</p>
	<div class="section">
		<div class="titlepage">
			<div>
				<div>
					<h2 class="title">
					<a name="program-overview"></a>
		4.1.&nbsp;MySQL程式概述</h2></div></div></div>
		<p><span>MySQL AB</span>提供了幾種類型的程式：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><span>MYSQL</span>伺服器和伺服器啟動指令：</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysqld</span></strong>是<span>MySQL</span>伺服器</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>
		mysqld_safe</span></strong>、<strong><span>mysql.server</span></strong>和<strong><span>mysqld_multi</span></strong>是伺服器啟動指令</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>
		mysql_install_db</span></strong>初始化數據目錄和初始資料庫</p>
		<p>在<a href="database-administration.html">第5章：</a><a href="database-administration.html" title="Chapter 5. Database Administration"><i>資料庫管理</i></a>中詳細討論了這些程式。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>訪問伺服器的客戶程式：</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysql</span></strong>是一個命令行客戶程式，用於交互式或以批處理模式執行<span>SQL</span>語句。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysqladmin</span></strong>是用於管理功能的客戶程式。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysqlcheck</span></strong>執行資料表維護操作。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysqldump</span></strong>和<strong><span>mysqlhotcopy</span></strong>負責資料庫備份。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>
		mysqlimport</span></strong>導入數據檔案。<span>&nbsp; </span></p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>mysqlshow</span></strong>顯示訊息資料庫和資料表的相關訊息。</p>
		<p>在<a href="client-side-scripts.html" title="Chapter 8. Client and Utility Programs">第8章：<i>客戶端和實用工具程式</i></a>中詳細討論了這些程式。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>獨立於伺服器操作的工具程式：</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>myisamchk</span></strong>執行資料表維護操作。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>myisampack</span></strong>產生壓縮、只讀的資料表。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>
		mysqlbinlog</span></strong>是處理二進制日誌檔案的實用工具。</p>
		<p>
		<span>o<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span><strong><span>perror</span></strong>顯示錯誤代碼的含義。</p>
		<p>在<a href="database-administration.html">第5章：</a><a href="database-administration.html" title="Chapter 5. Database Administration"><i>資料庫管理</i></a>中詳細討論了<strong><span>myisamchk</span></strong>。在<a href="client-side-scripts.html" title="Chapter 8. Client and Utility Programs">第8章：<i>客戶端和實用工具程式</i></a>中詳細討論了其它程式。</p>
		<p>大多數<span>MySQL</span>分發包括上述的全部程式，只是不包含那些與平台相關的程式。<span>(</span>例如，在<span>Windows</span>中不使用伺服器啟動指令）<span>。</span>不同的只是<span>RPM</span>分發更加具體化。可能一個<span>RPM</span>是伺服器分發，另一個<span>RPM</span>是客戶程式分發等等。如果您丟失了一個或多個程式，要想查閱關於分發類型和它們所包含內容的訊息，參見<a href="installing.html" title="Chapter 2. Installing MySQL">第2章：安裝MySQL</a>。也可能需要安裝一些其它內容。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="invoking-programs"></a>
		4.2.&nbsp;使用MySQL程式</h2></div></div></div>
		<p>要想從命令行使用<span>MySQL</span>程式<span>(</span>即從<span>shell</span>或命令提示<span>)</span>，應輸入程式名，並隨後輸入指導操作發的選項或其它參量。下面的命令顯示了一些程式使用的例子。「<span>shell&gt;</span>」資料表示命令解釋符提示；並不是輸入的部分。您所看見的具體提示取決於命令解釋符。典型提示符：<strong><span>sh</span></strong>或<strong><span>bash</span></strong>為<span>$</span>，<strong><span>csh</span></strong>或<strong><span>tcsh</span></strong>為<span>%</span>，<span>Windows
		<strong><span>command.com</span></strong></span>或<strong><span>cmd.exe</span></strong>為<span>C:\&gt;</span>。</p>
		<pre><span>shell&gt; </span><span><b><span>mysql test</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>mysqladmin extended-status variables</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>mysqlshow --help</span></b></span></pre>
		<pre><span>shell&gt; </span><span><b><span>mysqldump --user=root personnel</span></b></span></pre>
		<p>以破折號開始的參數為選項參量。它們通常指定程式與伺服器的連接類型或影響其操作模式。關於選項語法的描述參見<a href="using-mysql-programs.html#program-options" title="4.3. Specifying Program Options">4.3節，「指定程式選項」</a>。</p>
		<p>非選項參數<span>(</span>不以破折號開始的參量<span>)</span>可以為程式提供更詳細的訊息。例如，<strong><span>mysql</span></strong>程式將第一個非選項參量解釋為資料庫名，因此命令 
		 
		<span>
		mysql test</span>資料表示您想要使用<span>test</span>資料庫。</p>
		<p>後面的章節描述了具體的程式，資料表示程式可以理解的選項，並描述了其它非選項參量的含義。</p>
		<p>部分選項對部分程式是通用的。最常用的是指定連接參數的<span>--host</span>、<span>--user</span>和<span>--password</span>選項。它們指示<span>MySQL</span>伺服器運行的主機和<span>MySQL</span>帳號的帳號和
		密碼。所有<span>MySQL</span>客戶程式可以理解這些選項；它們允許您指定連接哪個伺服器，以及在該伺服器上使用的
		帳號。</p>
		<p>您也許會發現需要使用<span>MySQL</span>程式安裝的<span>bin</span>目錄的路徑名來使用<span>MySQL</span>程式。如果您試圖不在<span>bin</span>目錄下運行<span>MySQL</span>程式，可能會遇到「<span class="quote">程式未找到</span>」錯誤。為了更方便地使用<span>MySQL</span>，可以將<span>bin</span>目錄的路徑名新增到<span>PATH</span>環境變數中。然後運行程式時只需要輸入程式名，而不需要輸入整個路徑名。</p>
		<p>關於設置<span>PATH</span>的指令的命令解釋符請查閱相關文檔。設置環境變數的語法與解釋符有關。</div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="program-options"></a>
		4.3.&nbsp;指定程式選項</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="using-mysql-programs.html#command-line-options">
			4.3.1. 在命令行上使用選項</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#option-files">
			4.3.2. 使用選項檔案</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#environment-variable-options">
			4.3.3. 用環境變數指定選項</a></span></dt><dt><span class="section"><a href="using-mysql-programs.html#program-variables">
			4.3.4. 使用選項設置程式變數</a></span></dt></dl></div>
		<p>可以用幾種方式提供<span>MySQL</span>程式的選項：</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>在命令行中在程式名後面提供。這對於具體程式使用時使用的選項很普遍。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>在程式啟動時讀取的選項檔案中設置。這對於每次程式運行時使用的選項很普遍。</p>
		<p>
		<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span></span>在環境變數中設置。這對每次程式運行時所使用的選項很有用，儘管實際上最常用選項檔案。<span>(</span><a href="database-administration.html#multiple-unix-servers" title="5.12.2. Running Multiple Servers on Unix">5.12.2節，「在Unix中運行多個伺服器」</a>中討論了環境變數會很有幫助的一種情況。描述了使用這些變數來指定伺服器和客戶程式的<span>TCP/IP</span>端口號和<span>Unix</span>套接字檔案的各種技術）<span>。</span></p>
		<p><span>MySQL</span>程式首先檢查環境變數，然後檢查選項檔案，然後檢查命令行來確定給出了哪些選項。如果多次指定一個選項，最後出現的選項佔先。這說明環境變數具有最低的優先級，命令行選項具有最高優先級。</p>
		<p>可以在選項檔案中指定程式選項的預設值來讓<span>MySQL</span>程式處理各選項。不需要在每次運行程式時輸入選項，但可以根據需要通過命令行選項來覆蓋預設值。</p>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="command-line-options"></a>
			4.3.1.&nbsp;在命令行上使用選項</h3></div></div></div>
			<p>在命令行中指定的程式選項遵從下述規則：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>在命令名後面緊跟選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>選項參量以一個和兩個破折號開始，取決於它具有短名還是長名。許多選項有兩種形式。例如，<span>-?</span>和<span>--help</span>是指導<span>MySQL</span>程式顯示幫助消息的選項的短名和長名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>選項名對大小寫敏感。<span>-v</span>和<span>-V</span>均有效，但具有不同的含義。<span>(</span>它們是<span>--verbose</span>和<span>--version</span>選項的短名）<span>。
			</span></p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>部分選項在選項名後面緊隨選項值。例如，<span>-h 
			localhost</span>或<span>--host=localhost</span>資料表示客戶程式的<span>MySQL</span>伺服器主機。選項值可以告訴程式<span>MySQL</span>伺服器運行的主機名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>對於帶選項值的長選項，通過一個『<span>=</span>』將選項名和值隔離開來。對於帶選項值的短選項，選項值可以緊隨選項字母后面，或者二者之間可以用一個空格隔開。<span>(</span><span>-hlocalhost</span>和<span>-h 
			localhost</span>是等效的）<span>。</span>該規則的例外情況是指定<span>MySQL</span>密碼的選項。該選項的形式可以為<span>--password=<i>pass_val</i></span>或<span>--password</span>。在後一種情況<span>(</span>未給出
			密碼值<span>)</span>，程式將提示輸入密碼。也可以給出密碼選項，短形式為<span>-p<i>pass_val</i></span>或<span>-p</span>。然而，對於短形式，如果給出了
			密碼值，必須緊跟在選項後面，<em><span>中間不能插入空格</span></em>。這樣要求的原因是如果選項後面有空格，程式沒有辦法來告知後面的參量是
			密碼值還是其它某種參量。因此，下面兩個命令的含義完全不同：</p>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -ptest</span></b></span></pre>
			<pre><span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>shell&gt; </span><span><b><span>mysql -p test</span></b></span></pre>
			<p>第一個命令讓<strong><span>mysql</span></strong>使用密碼<span>test</span>，但沒有指定預設資料庫。第二個命令讓<strong><span>mysql</span></strong>提示輸入
			密碼並使用<span>test</span>作為預設資料庫。</p>
			<p>部分選項控制可以開關的行為。例如，<strong><span>mysql</span></strong>客戶端支援<span>--column-names</span>選項，確定是否在查詢結果開頭顯示一行欄目名。預設情況，該選項被啟用。但是可能在某些情況下您想要禁用它，例如將<strong><span>mysql</span></strong>的輸出發送到另一個只希望看到數據而不希望看到開始的標題行的程式中。</p>
			<p>要想禁用列名，可以使用下面的形式來指定選項：</p>
			<pre><span>--disable-column-names</span></pre>
			<pre><span>--skip-column-names</span></pre>
			<pre><span>--column-names=0</span></pre>
			<p>
			<span>--disable</span>和<span>--skip</span>前綴與<span>=0</span>後綴的效果相同：它們均關閉選項。</p>
			<p>可以用下述方法「<span class="quote">啟用</span>」選項：</p>
			<pre><span>--column-names</span></pre>
			<pre><span>--enable-column-names</span></pre>
			<pre><span>--column-names=1</span></pre>
			<p>如果選項有前綴<span>--loose</span>，如果程式未識別出選項不會提示錯誤退出，但是會發出一條警告：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --loose-no-such-option</span></b></span></pre>
			<pre><span>mysql: WARNING: unknown option &#39;--no-such-option&#39;</span></pre>
			<p>當您從安裝了多個<span>MySQL</span>的同一台機器上運行程式時，<span>--loose</span>前綴會很有用。當您在一個選項檔案中列出選項時，該前綴會特別有用。有可能不能被程式的所有版本識別的選項可以冠以<span>--loose</span>前綴<span>(</span>或在選項檔案中用<span>loose</span><span>)</span>。不能識別選項的程式版本將會發出一條警告並忽視該選項。</p>
			<p>對<strong><span>mysql</span></strong>偶爾有用的另一個選項是<span>-e</span>或<span>--execute</span>選項，可用來將<span>SQL</span>語句傳遞給伺服器。該語句必須用引號引起來<span>(</span>單引號或雙引號<span>)</span>。<span>(</span>然而，如果想要在查詢中將值引起來，則對於查詢應使用雙引號，查詢中引用的值應使用單引號）<span>。</span>當使用該選項時，語句被執行，然後<strong><span>mysql</span></strong>立即退出命令外殼。</p>
			<p>例如，您可以用下面的命令獲得用戶帳號列資料表：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root -p -e &quot;SELECT User, Host FROM User&quot; mysql</span></b></span></pre>
			<pre><span>Enter password: </span><span><b><span>******</span></b></span></pre>
			<pre><span>+------+-----------+</span></pre>
			<pre><span>| User | Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+------+-----------+</span></pre>
			<pre><span>|&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;| gigan&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>| root | gigan&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | localhost |</span></pre>
			<pre><span>| jon&nbsp; | localhost |</span></pre>
			<pre><span>| root | localhost |</span></pre>
			<pre><span>+------+-----------+</span></pre>
			<pre><span>shell&gt;</span></pre>
			<p>請注意<span>mysql</span>資料庫名作為一個獨立的參量傳遞。然而，相同的查詢可能已經使用<strong><span>mysql 
			-u root -p -e &quot;SELECT User</span><span>，<span>Host 
			FROM mysql.User&quot;</span></span></strong>從外殼中執行。</p>
			<p>可以按這種方式傳遞多個<span>SQL</span>語句，用分號隔開：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql -u root -p --execute=&quot;SELECT Name FROM Country WHERE Name LIKE &#39;AU%&#39;;SELECT COUNT(*) FROM City&quot; world</span></b></span></pre>
			<pre><span>Enter password: </span><span><b><span>******</span></b></span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>| Australia |</span></pre>
			<pre><span>| Austria&nbsp;&nbsp; |</span></pre>
			<pre><span>+-----------+</span></pre>
			<pre><span>+----------+</span></pre>
			<pre><span>| COUNT(*) |</span></pre>
			<pre><span>+----------+</span></pre>
			<pre><span>|&nbsp;&nbsp;&nbsp;&nbsp; 4079 |</span></pre>
			<pre><span>+----------+</span></pre>
			<p>請注意長形式<span>(</span><span>--execute</span><span>)</span>後面必須緊跟一個等號<span>(</span><span>=</span><span>)</span>。</p>
			<p>
			<span>-e</span>選項也可以以類似方式用來將命令傳遞給<span>MySQL</span>叢集的<strong><span>ndb_mgm</span></strong>管理客戶端。相關例子參見<a href="ndbcluster.html#multi-shutdown-restart" title="17.3.6. Safe Shutdown and Restart">17.3.6節，「安全關閉和重啟」</a>。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="option-files"></a>
			4.3.2.&nbsp;使用選項檔案</h3></div></div></div><a class="indexterm" name="id2741041"></a><a class="indexterm" name="id2741048"></a><a class="indexterm" name="id2741055"></a><a class="indexterm" name="id2741065"></a>
			<p><span>MySQL</span>程式可以從選項檔案<span>(</span>有時也稱為配置檔案<span>)</span>讀取啟動選項。選項檔案提供了一種很方便的方式來指定常用的選項，因此不需要每次運行程式時從命令行輸入。</p>
			<p>下面的程式支援選項檔案：<strong><span>myisamchk</span></strong>、<strong><span>myisampack</span></strong>、<strong><span>mysql</span></strong>、<strong><span>mysql.server</span></strong>、<strong><span>mysqladmin</span></strong>、<strong><span>mysqlbinlog</span></strong>、<strong><span>mysqlcc</span></strong>、<strong><span>mysqlcheck</span></strong>、<strong><span>mysqld_safe</span></strong>、<strong><span>mysqldump</span></strong>、<strong><span>mysqld</span></strong>、<strong><span>mysqlhotcopy</span></strong>、<strong><span>mysqlimport</span></strong>和<strong><span>mysqlshow</span></strong>。</p>
			<p><strong><span>註釋：</span></strong><span>MySQL</span>叢集程式使用的選項檔案參見<a href="ndbcluster.html#mysql-cluster-configuration" title="17.4. MySQL Cluster Configuration">17.4節，「MySQL叢集的配置」</a>。</p>
			<p>在<span>Windows</span>中，<span>MySQL</span>程式從以下檔案讀取啟動選項：</p>
			<table border="1" cellpadding="0" id="table1">
				<tr>
					<td>
					<p><strong><span>
					檔案名</span></strong></td>
					<td width="349">
					<p><strong><span>目的</span></strong></td>
				</tr>
				<tr>
					<td>
					<p><span><i>
					<span>WINDIR</span></i><span>\my.ini</span></span></td>
					<td width="349">
					<p>全局選項</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>C:\my.cnf</span></td>
					<td width="349">
					<p>全局選項</td>
				</tr>
				<tr>
					<td>
					<p><span><i>
					<span>INSTALLDIR</span></i><span>\my.ini</span></span></td>
					<td width="349">
					<p>全局選項</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>
					defaults-extra-file</span></td>
					<td width="349">
					<p>用<span>--defaults-extra-file=<i>path</i></span>指定的檔案，如果有</td>
				</tr>
			</table>
			<p><span><i>
			<span>WINDIR</span></i></span>資料表示<span>Windows</span>目錄的位置。通常為<span>C:\WINDOWS</span>或<span>C:\WINNT</span>。您可以使用下面的命令通過環境變數<span>WINDIR</span>的值確定其確切位置：</p>
			<pre><span>C:\&gt; </span><span><b><span>echo %WINDIR%</span></b></span></pre>
			<p><span><i>
			<span>INSTALLDIR</span></i></span>資料表示<span>MySQL</span>的安裝目錄。一般為<span>C:\<i>PROGRAMDIR</i>\MySQL\MySQL 
			5.1 Server</span>，其中<span><i><span>PROGRAMDIR</span></i></span>資料表示程式目錄<span>(</span>通常為<span>Windows</span>英文版的<span>Program 
			Files</span><span>)</span>，<span>MySQL 
			5.1</span>的安裝是根據安裝和配置嚮導完成的。參見<a href="installing.html#mysql-config-wizard-file-location" title="2.3.5.14. The Location of the my.ini File">2.3.5.14節，「my.ini檔案的位置」</a>。</p>
			<p>在<span>Unix</span>中，<span>MySQL</span>程式從下面的檔案讀取啟動選項：</p>
			<table border="1" cellpadding="0" id="table2">
				<tr>
					<td>
					<p><strong><span>
					檔案名</span></strong></td>
					<td>
					<p><strong><span>目的</span></strong></td>
				</tr>
				<tr>
					<td>
					<p>
					<span>/etc/my.cnf</span></td>
					<td>
					<p>全局選項</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>$MYSQL_HOME/my.cnf</span></td>
					<td>
					<p>伺服器相關選項</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>
					defaults-extra-file</span></td>
					<td>
					<p>用<span>--defaults-extra-file=<i>path</i></span>指定的檔案，如果有</td>
				</tr>
				<tr>
					<td>
					<p>
					<span>~/.my.cnf</span></td>
					<td>
					<p>用戶相關選項</td>
				</tr>
			</table>
			<p>
			<span>MYSQL_HOME</span>是一個環境變數，包含伺服器相關的<span>my.cnf</span>檔案駐留的目錄路徑。</p>
			<p>如果未設置<span>MYSQL_HOME</span>，並且<span><i><span>DATADIR</span></i></span>中有一個<span>my.cnf</span>檔案，<span><i><span>BASEDIR</span></i></span>中沒有<span>my.cnf</span>檔案，<span>mysqld_safe</span>將<span>MYSQL_HOME</span>設置為<span><i><span>DATADIR</span></i></span>。否則，如果未設置<span>MYSQL_HOME</span>並且在<span><i><span>DATADIR</span></i></span>中沒有<span>my.cnf</span>，則<span>mysqld_safe</span>將<span>MYSQL_HOME</span>設置為<span><i><span>BASEDIR</span></i></span>。</p>
			<p>典型情況二進制安裝的目錄為<span>/usr/local/mysql/data</span>或源代碼安裝的目錄為<span>/usr/local/var</span>。請注意這是配置時指定的數據目錄的位置，而不是 
			<strong><span>mysqld</span></strong>啟動時用<span>--datadir</span>指定的。運行時使用<span>--datadir</span>對尋找選項檔案的伺服器沒有效果，因為伺服器在處理命令行參量之前尋找這些選項。</p>
			<p><span>MySQL</span>按照上述順序尋找選項檔案，並讀存在的選項檔案。如果您想要使用的某個選項檔案不存在，則用明文文本編輯器建立。如果存在多個選項檔案，檔案中指定的後讀取的選項要優先檔案中指定的先讀取的選項。</p>
			<p><strong><span>註釋：</span></strong>在<span>Unix</span>平台上，<span>MySQL</span>忽略人人可寫的配置檔案。這是故意的，是一個安全措施。</p>
			<p>任何可以在運行<span>MySQL</span>程式時在命令行給出的長選項也可以在選項檔案中給出。要想列出程式的適用選項，用<span>--help</span>選項運行程式。</p>
			<p>在選項檔案中指定選項的語法類似於命令行語法，例外的是要忽略掉兩個破折號。例如，命令行中的<span>--quick</span>或<span>--host=localhost</span>在選項檔案中應指定為<span>quick</span>或<span>host=localhost</span>。要想在選項檔案中指定<span>--loose-<i>opt_name</i></span>形式的選項，應寫為<span>loose-<i>opt_name</i></span>。</p>
			<p>選項檔案中的空行被忽略掉。非空行可以採用下面任何形式：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span>
			<span>#</span><i><span>註釋</span></i></span>，<span>；<i>註釋</i></span></p>
			<p>註釋行以『<span>#</span>』或『<span>；</span>』開頭。『<span>#</span>』註釋也可以從行的中部開始。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>[<i>group</i>]</span></p>
			<p><span><i>
			<span>group</span></i></span>是您想要設置選項的程式名或組名。在組行後面，任何<span><i><span>opt_name</span></i></span>或<span>set-variable</span>行適用於組名，直到選項檔案結尾或給出其它組行。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><i>
			<span>opt_name</span></i></span></p>
			<p>等價於命令行中的<span>--<i>opt_name</i></span>。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span><span><i>
			<span>opt_name</span></i><span>=<i>value</i></span></span></p>
			<p>等價於命令行中的<span>--<i>opt_name</i>=<i>value</i></span>。在選項檔案中，『<span>=</span>』字元附近可以有空格，而在命令行中是不允許的。您可以用單引號或雙引號來引用值。如果值包含一個『<span>#</span>』註釋字元或空格時很有用。</p>
			<p>選項名和值前後的空白將自動刪除掉。您可以在選項值中使用轉義序列『<span>\b</span>』、『<span>\t</span>』、『<span>\n</span>』、『<span>\r</span>』、『<span>\\</span>』以及『<span>\s</span>』來資料表示退格、<span>tab</span>、換行符、回車以及空格字元。</p>
			<p>在<span>Windows</span>中，如果某個選項值資料表示一個路徑名，應使用『<span>/</span>』而不是『<span>\</span>』作為路徑名間隔符來指定值。如果使用『<span>\</span>』，必須用雙斜線『<span>\\</span>』，因為『<span>\</span>』在<span>MySQL</span>中為轉義字元。</p>
			<p>如果選項組名與程式名相同，則組內的選項專用於該程式。</p>
			<p>所有客戶程式<span>(</span>但<em><span>不能</span></em>被<strong><span>mysqld</span></strong><span>)</span>讀取<span>[client]</span>選項組。這樣允許您指定適用於所有客戶端的選項。例如，<span>[client]</span>是用於指定連接伺服器的
			密碼的理想的組。<span>(</span>但應確保該選項檔案只能由您自己讀寫，以便其他人不能發現您的密碼）<span>。</span>一定不要隨意在<span>[client]</span>組內放置選項，除非它可以被您使用的所有客戶程式識別。如果您試圖運行程式，如果程式不理解選項則會顯示一條錯誤消息後退出。</p>
			<p>從<span>5.0</span>系列的<span>MySQL 5.0.4</span>開始，可以在選項檔案中使用<span>!include</span>指令來包括具體檔案和<span>!includedir</span>來搜索選項檔案的具體目錄。例如，要包括檔案<span>/home/mydir/myopt.cnf</span>，可以使用：</p>
			<pre><span>!include /home/me/myopt.cnf</span></pre>
			<p>要搜索所有以<span>.cnf</span>結尾的檔案的目錄<span>/home/mydir</span>並作為選項檔案讀取，應使用：</p>
			<pre><span>!includedir /home/mydir</span></pre>
			<p>請注意這些選項與節有關。例如，假定您想要使用<span>my.cnf</span>中的某些內容，如下所示：</p>
			<pre><span>[mysqld]</span></pre>
			<pre><span>!include /home/mydir/myopt.cnf</span></pre>
			<p>在這種情況下，只為該伺服器處理檔案<span>myopt.cnf</span>，並且<span>!include</span>指令將被客戶應用程式忽略。然而，如果您使用下面的部分：</p>
			<pre><span>[mysqldump]</span></pre>
			<pre><span>!includedir /home/mydir/my-dump-option</span></pre>
			<p>則只有<strong><span>mysqldump</span></strong>為以<span>.cnf</span>結尾的檔案檢查目錄<span>/home/mydir/my-dump-option</span>，伺服器或其它客戶應用程式均不檢查。</p>
			<p><strong><span>註釋：</span></strong>目前，在<span>Unix</span>作業系統中，所發現的使用<span>!includedir</span>指令包括的檔案的檔案名<em><span>必須</span></em>以<span>.cnf</span>為延伸名。在<span>Windows</span>中，該指令也為有<span>.ini</span>延伸名<span>(</span>包括<span>.cnf</span><span>)</span>的檔案做檢查。</p>
			<p>如果您想要建立只由一個具體<strong><span>mysqld</span></strong>伺服器發佈系列讀取的選項組，選項組可以用<span>[mysqld-5.0]</span>、<span>[mysqld-5.1]</span>等名稱。下面的組資料表示<span>--new</span>選項只能用於<span>5.1.x
			</span>版本的<span>MySQL</span>伺服器：</p>
			<pre><span>[mysqld-5.1]</span></pre>
			<pre><span>new</span></pre>
			<p>下面是一個典型的全局選項檔案：</p>
			<pre><span>[client]</span></pre>
			<pre><span>port=3306</span></pre>
			<pre><span>socket=/tmp/mysql.sock</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqld]</span></pre>
			<pre><span>port=3306</span></pre>
			<pre><span>socket=/tmp/mysql.sock</span></pre>
			<pre><span>key_buffer_size=16M</span></pre>
			<pre><span>max_allowed_packet=8M</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqldump]</span></pre>
			<pre><span>quick</span></pre>
			<p>在上述的選項檔案中，設置<span>key_buffer_size</span>和<span>max_allowed_packet</span>變數的行使用了<span><i><span>var_name</span></i><span>=<i>value</i></span></span>語法。</p>
			<p>下面是一個典型的用戶選項檔案：</p>
			<pre><span>[client]</span></pre>
			<pre><span># The following password will be sent to all standard MySQL clients</span></pre>
			<pre><span>password=&quot;my_password&quot;</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysql]</span></pre>
			<pre><span>no-auto-rehash</span></pre>
			<pre><span>connect_timeout=2</span></pre>
			<pre><span>&nbsp;</span></pre>
			<pre><span>[mysqlhotcopy]</span></pre>
			<pre><span>interactive-timeout</span></pre>
			<pre><span>&nbsp;</span></pre>
			<p>如果您有一個源代碼分發，可以從<span>support-file</span>目錄中找到名為<span>my-<i>xxxx</i>.cnf</span>的示範選項檔案。如果您有一個二進制分發，在<span>MySQL</span>安裝目錄的<span>support-file</span>目錄中搜尋。在<span>Windows</span>中，示範選項檔案也可以位於<span>MySQL</span>的安裝目錄<span>(</span>如果您不知道在哪裡，查閱本節前面或<a href="installing.html" title="Chapter 2. Installing MySQL">第2章：安裝MySQL</a><span>)</span>。目前有小、中等、大以及非常大的系統的示範選項檔案。要想練習這些檔案，在<span>Windows</span>中複製到<span>C:\my.cnf</span>或在<span>Unix</span>中複製到根目錄的<span>.my.cnf</span>。</p>
			<p><strong><span>註釋：</span></strong>在<span>Windows</span>中，可以不顯示<span>.cnf</span>選項檔案的延伸名。</p>
			<p>所有支援選項檔案的<span>MySQL</span>程式可以處理下面的命令行選項：</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--no-defaults</span></p>
			<p>不讀取任何選項檔案。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--print-defaults</span></p>
			<p>打印從選項檔案中獲得的程式名和所有選項。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-file=<i>path_name</i></span></p>
			<p>只使用給出的選項檔案。<span><i><span>path_name</span></i></span>是檔案的全路徑名。</p>
			<p>
			<span>·<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</span></span>
			<span>--defaults-extra-file=<i>path_name</i></span></p>
			<p>在全局選項檔案後但在用戶選項檔案前讀該選項檔案。<span><i><span>path_name</span></i></span>是檔案的全路徑名。</p>
			<p>為了正確工作，每個選項必須緊隨命令行中的命令名後，例外情況是<span>--print-defaults</span>可以緊隨<span>--defaults-file</span>或<span>--defaults-extra-file</span>。</p>
			<p>在<span>shell</span>指令中，可以使用<strong><span>my_print_defaults</span></strong>程式來分析選項檔案。下面的例子顯示了當要求顯示<span>[client]</span>和<span>[mysql]</span>組內發現的選項時<strong><span>my_print_defaults</span></strong>產生的輸出：</p>
			<pre><span>shell&gt; </span><span><b><span>my_print_defaults client mysql</span></b></span></pre>
			<pre><span>--port=3306</span></pre>
			<pre><span>--socket=/tmp/mysql.sock</span></pre>
			<pre><span>--no-auto-rehash</span></pre>
			<p><strong><span>開發人員請注意</span></strong>：在<span>C</span>客戶程式庫中，只是通過處理命令行參量前面的所有匹配選項<span>(</span>即相應組內的選項<span>)</span>來處理選項檔案。對於使用多次指定的最後的選項實例的程式，可以很好地工作。如果您有一個<span>C</span>或<span>C++</span>程式按這種方式處理多次指定的選項，但不讀取選項檔案，只需要新增兩行來實現該功能。檢查標準<span>MySQL</span>客戶程式的源代碼來看看如何做。</p>
			<p>其它幾個<span>MySQL</span>語言接口基於<span>C</span>客戶庫，它們中的一部分提供了訪問選項檔案的一種方式。包括<span>Perl</span>和<span>Python</span>。關於接口的詳細訊息參見相關文檔。</p>
			<div class="titlepage">
				<div>
					<div>
						<h3 class="title">
						<a name="environment-variable-options"></a>4.3.3.&nbsp;用環境變數指定選項</h3>
					</div></div></div><a class="indexterm" name="id2742255"></a>
			<p>要想用環境變數指定選項，使用適用註釋處理器的語法來設置變數。例如，在<span>Windows</span>或<span>NetWare</span>中，可以設置<span>USER</span>變數來指定<span>MySQL</span>帳號名。要想實現，使用語法：</p>
			<pre><span>SET USER=</span><span><i><span>your_name</span></i></span></pre>
			<p>在<span>Unix</span>中的語法取決於您的外殼。假定您想要使用<span>MYSQL_TCP_PORT</span>變數指定<span>TCP/IP</span>端口號。典型的語法為<span>(</span>例如<strong><span>sh</span></strong>、<span>bash</span>、<strong><span>zsh</span></strong>等等<span>)</span>：</p>
			<pre><span>MYSQL_TCP_PORT=3306</span></pre>
			<pre><span>export MYSQL_TCP_PORT</span></pre>
			<p>第<span>1</span>個命令設置變數，<span>export</span>命令將變數導出到外殼環境，以便其值可供<span>MySQL</span>和其它程序訪問。</p>
			<p><strong><span>csh</span></strong>和<strong><span>tcsh</span></strong>有類似的問題。運行這些外殼時，使用<strong><span>setenv</span></strong>使外殼變數適用環境：</p>
			<pre><span>setenv MYSQL_TCP_PORT 3306</span></pre>
			<p>
			可以在命令提示符下執行設置環境變數的命令，以便立即生效。這些設定值持續到您註銷。要向讓這些設定值在您每次登錄時生效，將相應命令放入每次啟動時命令解釋符所讀的啟動檔案中。在<span>Windows</span>中典型啟動檔案為<span>AUTOEXEC.BAT</span>，<strong><span>bash</span></strong>為<span>.bash_profile</span>，或者<strong><span>tcsh</span></strong>為<span>.tcshrc</span>。關於命令解釋符的具體細節請查閱文檔。</p>
			<p><a href="environment-variables.html">附錄</a><a href="environment-variables.html" title="Appendix F. Environment Variables">F：<i>環境變數</i></a><span>
			</span>了列出影響<span>MySQL</span>程式操作的所有環境變數。</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="program-variables"></a>
			4.3.4.&nbsp;使用選項設置程式變數</h3></div></div></div><a class="indexterm" name="id2742389"></a><a class="indexterm" name="id2742399"></a>
			<p>許多<span>MySQL</span>程式有一些內部變數可以在運行時設置。程式變數的設置與帶有值的其它長選項相同。例如，<strong><span>mysql</span></strong>有一個<span>max_allowed_packet</span>變數，可以控制其通信緩衝區的最大長度。要想為<strong><span>mysql</span></strong>將<span>max_allowed_packet</span>變數的值設置為<span>16MB</span>，使用下面的任何一個命令：</p>
			<pre><span>shell&gt; </span><span><b><span>mysql --max_allowed_packet=16777216</span></b></span></pre>
			<pre><span>shell&gt; </span><span><b><span>mysql --max_allowed_packet=16M</span></b></span></pre>
			<p>第<span>1</span>個命令以字節指定值。第<span>2</span>個命令以兆字節指定值。變數值可以有一個後綴<span>K</span>、<span>M</span>或者<span>G</span><span>(</span>可以為大寫或小寫<span>)</span>來資料表示千字節、兆字節或者十億字節的單位。</p>
			<p>在選項檔案中，變數設定值沒有引導破折號：</p>
			<pre><span>[mysql]</span></pre>
			<pre><span>max_allowed_packet=16777216</span></pre>
			<p>或：</p>
			<pre><span>[mysql]</span></pre>
			<pre><span>max_allowed_packet=16M</span></pre>
			<p>如果您喜歡，變數名的下劃線可以為破折號。</p>
			<p><strong><span>註釋：</span></strong><span>MySQL 
			5.1</span>仍然能識別舊的語法<span>--set-variable 
			= <i>option</i>=<i>value</i></span>，但現在不贊成使用。</p>
			<p>部分伺服器變數可以在運行時設置。詳情參見<a href="database-administration.html#dynamic-system-variables" title="5.3.3.1. Dynamic System Variables">5.3.3.1節，「動態系統變數」</a>。</div></div></div><div><hr>
	<p><span>
	這是MySQL參考手冊的翻譯版本，關於MySQL參考手冊，請訪問<a target="_top"  href="http://dev.mysql.com/doc/mysql/en">dev.mysql.com.</a>。原始參考手冊為英文版，與英文版參考手冊相比，本翻譯版可能不是最新的。</span></div>
</body></html>
