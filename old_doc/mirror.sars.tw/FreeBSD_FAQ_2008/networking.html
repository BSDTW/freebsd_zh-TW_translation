<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Networking</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="HOME" title="FreeBSD 5.X、6.X 常見問答集" href="index.html" />
<link rel="PREVIOUS" title="X Window System 及 Virtual Consoles" href="x.html" />
<link rel="NEXT" title="系統安全篇" href="security.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="CHAPTER" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD 5.X、6.X 常見問答集</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="x.html" accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href="security.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="CHAPTER">
<h1><a id="NETWORKING" name="NETWORKING"></a>Chapter 12 Networking</h1>

Biing Jong Lin

<div class="QANDASET">
<dl>
<dt>12.1. <a href="networking.html#DISKLESS-BOOTING">我應該到哪邊找有關無磁碟開機
“diskless booting” 的資料？</a></dt>

<dt>12.2. <a href="networking.html#ROUTER">FreeBSD
的主機可以當作某個網路上的路由器(router)嗎？</a></dt>

<dt>12.3. <a href="networking.html#WIN95-CONNECTION">我可以透過 FreeBSD 將我的 Win95
機器連上 Internet 嗎？</a></dt>

<dt>12.4. <a href="networking.html#SLIP-PPP-SUPPORT">FreeBSD 支援 SLIP 和 PPP
嗎？</a></dt>

<dt>12.5. <a href="networking.html#NATD">FreeBSD 支援 NAT 或 Masquerading 嗎？</a></dt>

<dt>12.6. <a href="networking.html#PARALLEL-CONNECT">我如何將兩台 FreeBSD 主機用平行埠
(parallel line) 透過 PLIP 連線？</a></dt>

<dt>12.7. <a href="networking.html#CREATE-DEV-NET">我沒有辦法建立 <tt
class="FILENAME">/dev/ed0</tt> 這個 device， 為什麼？</a></dt>

<dt>12.8. <a href="networking.html#ETHERNET-ALIASES">我如何建立 Ethernet
aliases？</a></dt>

<dt>12.9. <a href="networking.html#PORT-3C503">我如何指定我的 3C503 使用其他不同的的
network port？</a></dt>

<dt>12.10. <a href="networking.html#NFS">為什麼我在使用 FreeBSD 的 NFS
時出現問題？</a></dt>

<dt>12.11. <a href="networking.html#NFS-LINUX">為什麼我不能 NFS-mount Linux
的機器？</a></dt>

<dt>12.12. <a href="networking.html#NFS-SUN">為什麼我不能 NFS-mount Sun 的機器？</a></dt>

<dt>12.13. <a href="networking.html#EXPORTS-ERRORS">為什麼 <tt
class="COMMAND">mountd</tt> 一直鬼叫說 “<tt class="ERRORNAME">can't change
attributes</tt>” 而且我一直看到 “<tt class="ERRORNAME">bad exports list</tt>”
這個訊息在我的 FreeBSD NFS 伺服器上？</a></dt>

<dt>12.14. <a href="networking.html#PPP-NEXTSTEP">為什麼我在使用 PPP 連線到 NeXTStep
機器時有問題？</a></dt>

<dt>12.15. <a href="networking.html#IP-MULTICAST">我要怎樣才能把 IP multicast support
打開？</a></dt>

<dt>12.16. <a href="networking.html#DEC-PCI-CHIPSET">哪些網路卡是使用 DEC PCI
chipset？</a></dt>

<dt>12.17. <a href="networking.html#FQDN-HOSTS">為什麼要用 FQDN
才能連到其他機器？</a></dt>

<dt>12.18. <a href="networking.html#NETWORK-PERMISSION-DENIED">為什麼我在連線時一直出現
“<tt class="ERRORNAME">Permission denied</tt>” 的錯誤訊息？</a></dt>

<dt>12.19. <a href="networking.html#IPFW-OVERHEAD">IPFW 會造成多大的網路延遲？</a></dt>

<dt>12.20. <a href="networking.html#IPFW-FWD">為什麼我的 <tt class="COMMAND">ipfw</tt>
“fwd” redirect 規則將服務轉向其他機器時無法正常運作？</a></dt>

<dt>12.21. <a
href="networking.html#SERVICE-REDIRECT">要如何把對某台機器的網路服務要求(service
request)轉向到另一台？</a></dt>

<dt>12.22. <a
href="networking.html#BANDWIDTH-MGR-TOOL">那裡可以找到管理頻寬的工具？</a></dt>

<dt>12.23. <a href="networking.html#BPF-NOT-CONFIGURED">怎麼會跑出 “<tt
class="ERRORNAME">/dev/bpf0: device not configured</tt>”這個訊息？</a></dt>

<dt>12.24. <a href="networking.html#MOUNT-SMB-SHARE">我要怎樣才能將 Windows
機器中的磁碟掛入系統, 就像 Linux 提供 的 smbmount 那樣？</a></dt>

<dt>12.25. <a href="networking.html#ICMP-RESPONSE-BW-LIMIT">我在系統日誌中發現以下訊息：
“icmp-response bandwidth limit 300/200 pps”，這是 蝦米碗糕？</a></dt>

<dt>12.26. <a href="networking.html#UNKNOWN-HW-ADDR-FORMAT">這個錯誤訊息 “<tt
class="ERRORNAME">arp: unknown hardware address format</tt>” 是什麼意思？</a></dt>

<dt>12.27. <a href="networking.html#CVSUP-MISSING-LIBS">我剛剛裝好 CVSup
套件，但是在嘗試執行時發生了錯誤，要怎麼辦？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DISKLESS-BOOTING" name="DISKLESS-BOOTING"></a><b>12.1.</b>
我應該到哪邊找有關無磁碟開機 “diskless booting” 的資料？</p>
</div>

<div class="ANSWER">
<p><b></b>“Diskless booting” 就是讓 FreeBSD 主機從網路 上開機，並且從網路上的 server
上讀取其他必要的檔案，而非由主機 的硬碟上取得這些檔案。詳細的資料可以參考 <a
href="../handbook/diskless.html" target="_top">FreeBSD 手冊的無磁碟開機篇</a> 。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ROUTER" name="ROUTER"></a><b>12.2.</b> FreeBSD
的主機可以當作某個網路上的路由器(router)嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的。請參考 FreeBSD 手冊的網路進階篇 <a href="../handbook/routing.html"
target="_top">advanced networking</a>，尤其是路由與閘道器 <a
href="../handbook/routing.html#DEDICATED-ROUTER" target="_top">routing and
gateways</a>的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="WIN95-CONNECTION" name="WIN95-CONNECTION"></a><b>12.3.</b> 我可以透過 FreeBSD
將我的 Win95 機器連上 Internet 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>基本上，會問這種問題的人在家裡至少有兩台電腦，一台跑 FreeBSD 另外一台跑
Win95；這個想法是將 FreeBSD 主機連上 Internet，然後透 過這台 FreeBSD 主機，讓跑 Win95
的電腦能夠上網。這個問題算是前一 個問題的一個特例</p>

<p>... 答案是：可以的！在 FreeBSD 3.x 版中，使用者模式(user-mode)的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> 包含了 <code
class="OPTION">-nat</code> 選項。如果你在 <tt class="FILENAME">/etc/rc.conf</tt>
使用<code class="OPTION">-nat</code>選項並 設定 <tt class="LITERAL">gateway_enable</tt>
為 <span class="emphasis"><b class="EMPHASIS">YES</b></span> ，以這種設定啟動 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
，並且正確的設定你的 Windows 主機的 話，這個做法應該是可以正常使用的。</p>

<p>關於本主題更詳細的資料可以參考 Steve Sims 所撰寫的 <a href="../ppp-primer/index.html"
target="_top">Pedantic PPP Primer</a> 一文。</p>

<p>如果你使用的是核心模式 (kernel-mode) PPP，或者你有區域連線 (Ethernet connection)
可通達 Internet 的話，你將需要使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>。請查閱 FAQ
中關於 <a href="networking.html#NATD">natd</a> 的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SLIP-PPP-SUPPORT" name="SLIP-PPP-SUPPORT"></a><b>12.4.</b> FreeBSD 支援 SLIP 和
PPP 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>是的。你可以查查 man pages 中關於 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">slattach</span>(8)</span></a>， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sliplogin</span>(8)</span></a>，<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>，以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppd</span>(8)</span></a> 的部分。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> 及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">pppd</span>(8)</span></a>
提供進出雙向連線的支援，另外 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">sliplogin</span>(8)</span></a>
專門提供進入連線的支援，而 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">slattach</span>(8)</span></a>
專門提供向外連線的支援。</p>

<p>如果你需要更進一步的資料的話,請查閱 <a href="../handbook/ppp-and-slip.html"
target="_top">FreeBSD 手冊中關於 PPP 與 SLIP 的說明</a>。</p>

<p>如果你只能夠過 “shell account” 連線到 Internet 的話，你也許可以試試 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/slirp/pkg-descr"><tt
class="FILENAME">net/slirp</tt></a>
這個套件程式。這個套件程式可以提供你的電腦直接連上某些(限定的)服務 連線，如 ftp 及 http
等等。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NATD" name="NATD"></a><b>12.5.</b> FreeBSD 支援 NAT 或 Masquerading 嗎？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你有一個近端的子網路(有一台以上的機器)，但是你的 Internet provider
卻只分配一個 IP number 給你(或者你只分配到一個 動態的 IP number)，你可以參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a> 這個程式。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>
讓你可以透過這一個 IP number 讓整個子網路的電腦都能連上 internet。</p>

<p><a href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
這個程式也提供類似的功能，如果你指定 <code class="OPTION">-nat</code> 選項。alias library
(<a href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">libalias</span>(3)</span></a>)
在這兩個處理方式中都會被使用到。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PARALLEL-CONNECT" name="PARALLEL-CONNECT"></a><b>12.6.</b> 我如何將兩台 FreeBSD
主機用平行埠 (parallel line) 透過 PLIP 連線？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考手冊中關於 <a href="../handbook/plip.html" target="_top">PLIP section</a>
的部分。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CREATE-DEV-NET" name="CREATE-DEV-NET"></a><b>12.7.</b> 我沒有辦法建立 <tt
class="FILENAME">/dev/ed0</tt> 這個 device， 為什麼？</p>
</div>

<div class="ANSWER">
<p><b></b>因為不需要！在 Berkeley 網路架構中，只有 kernel 程式碼可以直
接存取網路界面卡。請參考 <tt class="FILENAME">/etc/rc.network</tt> 這 個檔案和 manual
pages 取得與其他不同網路程式。更進一步的資訊：如
果你覺得你完全搞混了的話，您應該找一本與其他 BSD 相關作業系統網路
管理有關書來參考；除了少數顯著的不同外，FreeBSD 的網路管理基本上和 SunOS 4.0 和 Ultrix
是一樣的。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ETHERNET-ALIASES" name="ETHERNET-ALIASES"></a><b>12.8.</b> 我如何建立 Ethernet
aliases？</p>
</div>

<div class="ANSWER">
<p><b></b>如果你的 alias 位址跟你目前網路介面的位址在同一個子網路下的 話，加入一個 <tt
class="LITERAL">netmask 0xffffffff</tt> 在你的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
command-line，範例如下：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ifconfig ed0 alias 192.0.2.2 netmask 0xffffffff</kbd>
</pre>

<p>不然的話，就如同加入一個新的網路位址一樣輸入你的網路位址與子 網路遮罩：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ifconfig ed0 alias 172.16.141.5 netmask 0xffffff00</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PORT-3C503" name="PORT-3C503"></a><b>12.9.</b> 我如何指定我的 3C503
使用其他不同的的 network port？</p>
</div>

<div class="ANSWER">
<p><b></b>如果您想使用其他的 port，你必須在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> 的命令中
指定額外的參數。內定的 port 是 <tt class="LITERAL">link0</tt>。要使用 AUI port 代替 BNC
port 的話，改用 <tt class="LITERAL">link2</tt>。這些 flags 應該改變ifconfig_*
的變數來指定， 你可以在 <tt class="FILENAME">/etc/rc.conf</tt> 這個檔案裡面找到 (請參考
<a href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>)。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS" name="NFS"></a><b>12.10.</b> 為什麼我在使用 FreeBSD 的 NFS
時出現問題？</p>
</div>

<div class="ANSWER">
<p><b></b>我們用含蓄一點的說法，某些 PC 的網路卡比其他的好，這種狀況在 造成 NFS
這種對網路敏感的程式有時會出現問題。</p>

<p>參考 <a href="../handbook/nfs.html" target="_top">the Handbook entry on NFS</a>
以獲得這個主題的更多資訊。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS-LINUX" name="NFS-LINUX"></a><b>12.11.</b> 為什麼我不能 NFS-mount Linux
的機器？</p>
</div>

<div class="ANSWER">
<p><b></b>某些版本的 Linux NFS 程式碼只接受 privileged port 的 mount
request；試用這行指令看看</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -o -P linuxbox:/blah /mnt</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NFS-SUN" name="NFS-SUN"></a><b>12.12.</b> 為什麼我不能 NFS-mount Sun
的機器？</p>
</div>

<div class="ANSWER">
<p><b></b>跑 SunOS 4.X 的 Sun 工作站只接受來自 privileged port 的 mount
request；試用這行指令看看</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -o -P sunbox:/blah /mnt</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="EXPORTS-ERRORS" name="EXPORTS-ERRORS"></a><b>12.13.</b> 為什麼 <tt
class="COMMAND">mountd</tt> 一直鬼叫說 “<tt class="ERRORNAME">can't change
attributes</tt>” 而且我一直看到 “<tt class="ERRORNAME">bad exports list</tt>”
這個訊息在我的 FreeBSD NFS 伺服器上？</p>
</div>

<div class="ANSWER">
<p><b></b>這個問題最常發生的原因是在於不了解 <tt class="FILENAME">/etc/exports</tt>
的正確格式。請詳讀 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">exports</span>(5)</span></a>
以及手冊中關於 <a href="../handbook/nfs.html" target="_top">NFS</a> 的部分，特別是<a
href="../handbook/nfs.html#CONFIGURING-NFS" target="_top">configuring NFS</a>這一段。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PPP-NEXTSTEP" name="PPP-NEXTSTEP"></a><b>12.14.</b> 為什麼我在使用 PPP 連線到
NeXTStep 機器時有問題？</p>
</div>

<div class="ANSWER">
<p><b></b>把 TCP extensions 取消，這個設定在 <tt class="FILENAME">/etc/rc.conf</tt>
裡面(參考 <a href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>) 把
以下這個值設成 NO：</p>

<pre class="PROGRAMLISTING">
tcp_extensions=NO
</pre>

<p>Xylogic 的 Annex 主機也有相同的問題，您要做相同的修改才能連 上這些主機。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IP-MULTICAST" name="IP-MULTICAST"></a><b>12.15.</b> 我要怎樣才能把 IP multicast
support 打開？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 2.0 以後的版本內定都有 支援 Multicast host 操作。如果
您想將您的主機設定成 multicast router 的話，您必須重新 compile 您 的 kernel，加入 <tt
class="LITERAL">MROUTING</tt> 的選項，並且執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8&amp;manpath=FreeBSD+7.0-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mrouted</span>(8)</span></a>
FreeBSD 2.2 及之後的版本會在開機時執行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8&amp;manpath=FreeBSD+7.0-RELEASE+and+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mrouted</span>(8)</span></a>
如果在 <tt class="FILENAME">/etc/rc.conf</tt> 中 <tt class="LITERAL">mrouted_enable</tt>
設定為 <tt class="LITERAL">"YES"</tt></p>

<p>MBONE 的各種工具可以在他們 ports 下所屬叫做 <a
href="http://www.FreeBSD.org/ports/mbone.html" target="_top">mbone</a> 目錄
中找到。如果您在找視訊會議的工具如 <tt class="COMMAND">vic</tt> 以及 <tt
class="COMMAND">vat</tt>的話，到那邊找找吧！</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEC-PCI-CHIPSET" name="DEC-PCI-CHIPSET"></a><b>12.16.</b> 哪些網路卡是使用 DEC
PCI chipset？</p>
</div>

<div class="ANSWER">
<p><b></b>以下是 Glen Foster <code class="EMAIL">&#60;<a
href="mailto:gfoster@driver.nsta.org">gfoster@driver.nsta.org</a>&#62;</code>
提供的清單：</p>

<div class="TABLE"><a id="AEN4462" name="AEN4462"></a>
<p><b>Table 12-1. Network cards based on the DEC PCI chipset</b></p>

<table border="1" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>Vendor</th>
<th>Model</th>
</tr>
</thead>

<tbody>
<tr>
<td>ASUS</td>
<td>PCI-L101-TB</td>
</tr>

<tr>
<td>Accton</td>
<td>ENI1203</td>
</tr>

<tr>
<td>Cogent</td>
<td>EM960PCI</td>
</tr>

<tr>
<td>Compex</td>
<td>ENET32-PCI</td>
</tr>

<tr>
<td>D-Link</td>
<td>DE-530</td>
</tr>

<tr>
<td>Dayna</td>
<td>DP1203, DP2100</td>
</tr>

<tr>
<td>DEC</td>
<td>DE435, DE450</td>
</tr>

<tr>
<td>Danpex</td>
<td>EN-9400P3</td>
</tr>

<tr>
<td>JCIS</td>
<td>Condor JC1260</td>
</tr>

<tr>
<td>Linksys</td>
<td>EtherPCI</td>
</tr>

<tr>
<td>Mylex</td>
<td>LNP101</td>
</tr>

<tr>
<td>SMC</td>
<td>EtherPower 10/100 (Model 9332)</td>
</tr>

<tr>
<td>SMC</td>
<td>EtherPower (Model 8432)</td>
</tr>

<tr>
<td>TopWare</td>
<td>TE-3500P</td>
</tr>

<tr>
<td>Znyx (2.2.x)</td>
<td>ZX312, ZX314, ZX342, ZX345, ZX346, ZX348</td>
</tr>

<tr>
<td>Znyx (3.x)</td>
<td>ZX345Q, ZX346Q, ZX348Q, ZX412Q, ZX414, ZX442, ZX444, ZX474, ZX478, ZX212, ZX214
(10mbps/hd)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FQDN-HOSTS" name="FQDN-HOSTS"></a><b>12.17.</b> 為什麼要用 FQDN
才能連到其他機器？</p>
</div>

<div class="ANSWER">
<p><b></b>你也許會發現要連的機器其實是在另一個網域。舉個例子，假設你是在 foo.bar.edu
這個網域中，想要連到在一台叫 <tt class="HOSTID">mumble</tt> 的主機，他在 <tt
class="HOSTID">example.org</tt> 網域下， 你必須用 Fully-Qualified Domain Name <tt
class="HOSTID">mumble.example.org</tt>，而不是只用 <tt class="HOSTID">mumble</tt>。</p>

<p>傳統的 BSD BIND resolver 允許用這種方式解出機器的位址，但是 FreeBSD 內附 <b
class="APPLICATION">bind</b> (see <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>)
版本內定方式，則是除了你所在的網域以外，不支援其他非 FQDN 的縮寫。 所以如 <tt
class="HOSTID">mumble</tt> 必須在 <tt
class="HOSTID">mumble.foo.example.org</tt>，否則就會從網域的最底 層開始找。</p>

<p>這和先前的做法不同，也就是不用 <tt class="HOSTID">mumble.example.org</tt>，和 <tt
class="HOSTID">mumble.edu</tt> 繼續搜尋。 看一下 RFC
1535，裡面有提到為什麼之前的做法不好，甚至算是個安全 漏洞。</p>

<p>這裡有個不錯的解法, 你可以加入一行</p>

<pre class="PROGRAMLISTING">
search foo.example.org example.org
</pre>

<p>instead of the previous</p>

<pre class="PROGRAMLISTING">
domain foo.example.org
</pre>

<p>在你的 <tt class="FILENAME">/etc/resolv.conf</tt> 檔案中 (請參考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span
class="CITEREFENTRY"><span
class="REFENTRYTITLE">resolv.conf</span>(5)</span></a>)。但是要確定搜尋順序不會違反 RFC
1535 所謂的 “boundary between local and public administration”。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="NETWORK-PERMISSION-DENIED" name="NETWORK-PERMISSION-DENIED"></a><b>12.18.</b>
為什麼我在連線時一直出現 “<tt class="ERRORNAME">Permission denied</tt>”
的錯誤訊息？</p>
</div>

<div class="ANSWER">
<p><b></b> 如果在編譯 kernel 時加入 <tt class="LITERAL">IPFIREWALL</tt> 選項， 請注意
2.1.7R 內定是拒絕所有未經核准的網路封包(但在開發 2.1-STABLE 時改掉了)。</p>

<p>I如果不小心弄錯了 firewall 的設定，你可以以 <tt class="USERNAME">root</tt>
執行以下命令網路功能就會恢復正常：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">ipfw add 65534 allow all from any to any</kbd>
</pre>

<p>也可以在 <tt class="FILENAME">/etc/rc.conf</tt> 加入 <tt
class="LITERAL">firewall_type="open"</tt> 的選項。</p>

<p>如果想知道如何設定 FreeBSD firewall，請參考 <a href="../handbook/firewalls.html"
target="_top">手冊中相關章節</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IPFW-OVERHEAD" name="IPFW-OVERHEAD"></a><b>12.19.</b> IPFW
會造成多大的網路延遲？</p>
</div>

<div class="ANSWER">
<p><b></b>請參考手冊中 <a href="../handbook/firewalls.html" target="_top">Firewalls</a>
章節，特別是 <a href="../handbook/firewalls.html#IPFW-OVERHEAD" target="_top">IPFW
Overhead &#38; Optimization</a> 這一段。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="IPFW-FWD" name="IPFW-FWD"></a><b>12.20.</b> 為什麼我的 <tt
class="COMMAND">ipfw</tt> “fwd” redirect 規則將服務轉向其他機器時無法正常運作？</p>
</div>

<div class="ANSWER">
<p><b></b>可能是你除了轉送封包以外還額外想進行位址轉譯 (network address translation,
NAT)，“fwd” 規則所進 行的動作就如同字面所示；僅轉送封包，它並不會去修改封包中的資料。
假設我們有如下的規則：</p>

<pre class="SCREEN">
01000 fwd <tt class="REPLACEABLE"><i>10.0.0.1</i></tt> from any to <tt
class="REPLACEABLE"><i>foo 21</i></tt>
</pre>

<p>當一個通往特定目標位址 <tt class="REPLACEABLE"><i>foo</i></tt> 的封包
送達主機時，根據這條規則，封包將被轉送至 <tt
class="REPLACEABLE"><i>10.0.0.1</i></tt>，但是它的目標位址卻仍然是 <tt
class="REPLACEABLE"><i>foo</i></tt>！封包的目標位址並 <span class="emphasis"><b
class="EMPHASIS">沒有</b></span> 更改為 <tt
class="REPLACEABLE"><i>10.0.0.1</i></tt>。大部分的主機會將封包丟棄，
因為他們並不是這個目標位址。因此，使用 “fwd” 規則
時往往不如使用者所預期的那般順利。這種行為是系統特性，而非錯誤。</p>

<p>參考 <a href="networking.html#SERVICE-REDIRECT">關於服務轉向的常見問 答集</a>， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>
手冊，或者是使用 <a href="../../../../ports/index.html" target="_top">ports
collection</a> 中許 多服務轉向的工具來正確的完成你想進行的工作。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SERVICE-REDIRECT" name="SERVICE-REDIRECT"></a><b>12.21.</b>
要如何把對某台機器的網路服務要求(service request)轉向到另一台？</p>
</div>

<div class="ANSWER">
<p><b></b>在 ports 目錄的“sysutils”分類中有個叫 <tt class="LITERAL">socket</tt>
的套件，可以幫你轉向 FTP 或其他類似的 網路服務。只要把該網路服務的命令改成呼叫 socket
即可，如下所示：</p>

<pre class="PROGRAMLISTING">
ftp stream tcp nowait nobody /usr/local/bin/socket socket <tt
class="REPLACEABLE"><i>ftp.example.com</i></tt> <tt class="REPLACEABLE"><i>ftp</i></tt>
</pre>

<p>其中 <tt class="REPLACEABLE"><i>ftp.example.com</i></tt> 與 <tt
class="REPLACEABLE"><i>ftp</i></tt> 分別是被轉到的機器和 port 名稱。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BANDWIDTH-MGR-TOOL" name="BANDWIDTH-MGR-TOOL"></a><b>12.22.</b>
那裡可以找到管理頻寬的工具？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 上有三套頻寬管理工具： <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">dummynet</span>(4)</span></a>
已經整合進入 FreeBSD 系統(更詳細的用途, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>); <a
href="http://www.csl.sony.co.jp/person/kjc/programs.html" target="_top">ALTQ</a>
可以免費使用，<a href="http://www.etinc.com/" target="_top">Emerging Technologies</a>
推出的 Bandwidth Manager 則是商用軟體。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="BPF-NOT-CONFIGURED" name="BPF-NOT-CONFIGURED"></a><b>12.23.</b> 怎麼會跑出
“<tt class="ERRORNAME">/dev/bpf0: device not configured</tt>”這個訊息？</p>
</div>

<div class="ANSWER">
<p><b></b>你執行了一個需要柏克萊封包過濾器 (Berkeley Packet Filter) 的 程式 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span
class="CITEREFENTRY"><span class="REFENTRYTITLE">bpf</span>(4)</span></a>)，但是你在
kernel 中沒有啟動它。把下面這一行加 入 kernel 設定檔中，編譯一個新的 kernel：</p>

<pre class="PROGRAMLISTING">
pseudo-device bpf        # Berkeley Packet Filter
</pre>

<p>在重新開機之後，還要做出 device node，在 <tt class="FILENAME">/dev</tt> 下執行：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh MAKEDEV bpf0</kbd>
</pre>

<p>如果想要更進一步知道如何做出各種 device node，請參閱 <a
href="../handbook/kernelconfig-nodes.html" target="_top">Handbook 關於週邊節點的說明</a>
。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MOUNT-SMB-SHARE" name="MOUNT-SMB-SHARE"></a><b>12.24.</b> 我要怎樣才能將
Windows 機器中的磁碟掛入系統, 就像 Linux 提供 的 smbmount 那樣？</p>
</div>

<div class="ANSWER">
<p><b></b>使用 <b class="APPLICATION">SMBFS</b> 工具組。這套工具組中 包含了一系列的
kernel 修改還有使用者的工具程式(userland programs)。 這些程式和資訊在 ports 收藏中 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/smbfs/pkg-descr"><tt
class="FILENAME">net/smbfs</tt></a> 下可以找到。在 4.5-RELEASE
之後的版本則是系統中內建。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="ICMP-RESPONSE-BW-LIMIT" name="ICMP-RESPONSE-BW-LIMIT"></a><b>12.25.</b>
我在系統日誌中發現以下訊息： “icmp-response bandwidth limit 300/200 pps”，這是
蝦米碗糕？</p>
</div>

<div class="ANSWER">
<p><b></b>這是系統核心告訴你有某些活動引發它送出比它所認為應該送出更 多的 ICMP 或 TCP
重置訊息 (RST)。ICMP 回應訊息常常是因為有人嘗 試連接未被使用的 UDP 通訊埠。TCP
重置訊息則是有人嘗試連接未開 放 TCP
通訊埠造成的結果。以下這些活動可能就是造成這些訊息的原因：</p>

<ul>
<li>
<p>暴力法的服務組絕攻擊(DoS)方式 (相較於針對特殊弱點使用單一封包的攻擊方式)。</p>
</li>

<li>
<p>大量的通訊埠掃描(相較於僅嘗試少數的常見服務通訊埠)。</p>
</li>
</ul>

<p>出現的數字中第一個代表根據這些流量 kernel 應該送出的封包數， 第二個數字則是 kernel
目前限制最大發送數。你可以利用 sysctl 修改 <code
class="VARNAME">net.inet.icmp.icmplim</code> 變數值來更改最大值。舉
例來說,如果希望修改限制為 <tt class="LITERAL">300</tt> packets per second：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w net.inet.icmp.icmplim=300</kbd>
</pre>

<p>如果你不想在系統紀錄中看到這些訊息，但是仍然希望保持回應的限 制的話，你可以利用 sysctl
修改 <code class="VARNAME">net.inet.icmp.icmplim_output</code> 變數來取消這些訊 息：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">sysctl -w net.inet.icmp.icmplim_output=0</kbd>
</pre>

<p>最後，如果你想取消這些限制的話，你可以設定 <code
class="VARNAME">net.inet.icmp.icmplim</code> (如上例所示) 為 <tt
class="LITERAL">0</tt>。基於上述理由，我們不建議你取消這些限制。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UNKNOWN-HW-ADDR-FORMAT" name="UNKNOWN-HW-ADDR-FORMAT"></a><b>12.26.</b>
這個錯誤訊息 “<tt class="ERRORNAME">arp: unknown hardware address format</tt>”
是什麼意思？</p>
</div>

<div class="ANSWER">
<p><b></b>這代表你的區域網路連線上有一些設備使用 FreeBSD 看不懂的 MAC
格式。這通常是代表有人在你的區域網路上進行實驗，最常見的就是 cable modem
的連線。這訊息無害，而且應該不至於影響到 FreeBSD 主 機的效能。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="CVSUP-MISSING-LIBS" name="CVSUP-MISSING-LIBS"></a><b>12.27.</b> 我剛剛裝好
CVSup 套件，但是在嘗試執行時發生了錯誤，要怎麼辦？</p>
</div>

<div class="ANSWER">
<p><b></b>首先，看看錯誤的訊息是否如下：</p>

<pre class="PROGRAMLISTING">
/usr/libexec/ld-elf.so.1: Shared object "libXaw.so.6" not found
</pre>

<p>這種錯誤訊息代表你主機上安裝的 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/cvsup/pkg-descr"><tt
class="FILENAME">net/cvsup</tt></a> 沒有包含 <b class="APPLICATION">XFree86</b>
套件。如果你想要使用 <b class="APPLICATION">CVSup</b> 內建的圖形介面 <acronym
class="ACRONYM">GUI</acronym> 的話，你需要安裝 <b
class="APPLICATION">XFree86</b>。此外，如果你只想以命令列方 式使用 <b
class="APPLICATION">CVSup</b> 的話，你應該先移除之前 安裝的套件。並安裝 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr"><tt
class="FILENAME">net/cvsup-without-gui</tt></a> 這套 軟體。在 FreeBSD 手冊中 <a
href="http://www.freebsd.org/handbook/cvsup.html" target="_top">CVSup</a>
段落中有更詳細的說明。</p>
</div>
</div>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="x.html" accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="security.html"
accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">X Window System 及 Virtual Consoles</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">系統安全篇</td>
</tr>
</table>
</div>

<p align="center"><small>本文及其他文件，可由此下載：<a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p>

<p align="center"><small>若有 FreeBSD 方面疑問，請先閱讀 <a
href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。<br />
關於本文件的問題，請洽詢 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

