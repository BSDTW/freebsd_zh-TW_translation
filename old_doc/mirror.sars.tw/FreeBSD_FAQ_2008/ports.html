<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Ports and Packages 常見問題</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="HOME" title="FreeBSD 5.X、6.X 常見問答集" href="index.html" />
<link rel="PREVIOUS" title="感謝" href="acknowledgments.html" />
<link rel="NEXT" title="Bibliography" href="bibliography.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="CHAPTER" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD 5.X、6.X 常見問答集</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="acknowledgments.html"
accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href="bibliography.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="CHAPTER">
<h1><a id="PORTS" name="PORTS"></a>Chapter 20 Ports and Packages 常見問題</h1>

Yi-Feng Tzeng

<div class="QANDASET">
<dl>
<dt>20.1. <a href="ports.html#MAKE-FETCH">如何只抓取 tarball？</a></dt>

<dt>20.2. <a href="ports.html#MAKE-EXTRACT">如何僅做到解開 tarball的步驟？</a></dt>

<dt>20.3. <a href="ports.html#MAKE-PATCH">如何僅做到解開 tarball 並補上官方提供的 patch
？</a></dt>

<dt>20.4. <a href="ports.html#MAKE-INSTALL">如何安裝一個新的 port？</a></dt>

<dt>20.5. <a href="ports.html#MAKE-PACKAGE">如何安裝一個新的
port，並打包(package)起來？</a></dt>

<dt>20.6. <a href="ports.html#MAKE-DEPEND-PACKAGE">如何打包一個 port，並將其所有相依的
ports 也打包起來？</a></dt>

<dt>20.7. <a href="ports.html#PKG-CREATE">如何對一個已經安裝的 port 打包？</a></dt>

<dt>20.8. <a href="ports.html#MAKE-CLEAN">如何清理 ports
編輯期間所產生的暫存資料？</a></dt>

<dt>20.9. <a href="ports.html#MAKE-DISTCLEAN">如何清理 ports
編輯期間所產生的暫存資料，以及 tarball 檔？</a></dt>

<dt>20.10. <a href="ports.html#MAKE-DEPENDS-LIST">如何在安裝 ports
前查詢所依賴的相關套件？</a></dt>

<dt>20.11. <a href="ports.html#MAKE-DEINSTALL">如何移除已安裝的 ports？</a></dt>

<dt>20.12. <a href="ports.html#MAKE-DEINSTALL-DEPENDS">如何一併移除所相依的
ports？</a></dt>

<dt>20.13. <a href="ports.html#MAKE-REINSTALL">如何重新安裝已安裝過的 ports？</a></dt>

<dt>20.14. <a href="ports.html#MAKE-SEARCH">如何以關鍵字搜尋 ports？</a></dt>

<dt>20.15. <a href="ports.html#UPGRADE-PORTS">如何升級已安裝的 ports？</a></dt>

<dt>20.16. <a href="ports.html#PKG-INFO">如何查詢目前系統安裝了哪些套件？</a></dt>

<dt>20.17. <a
href="ports.html#PKG-INFO-GREP">如何查詢目前系統有沒有安裝這個關鍵字的套件？</a></dt>

<dt>20.18. <a href="ports.html#PKG-INFO-W">如何查詢某個檔案是屬於哪些套件？</a></dt>

<dt>20.19. <a href="ports.html#PKG-INFO-L">如何查詢某個套件安裝了哪些檔案？</a></dt>

<dt>20.20. <a href="ports.html#REINSTALL-UPGRADE">如何安裝舊版的 ports？</a></dt>

<dt>20.21. <a href="ports.html#UPGRADE-PORTS-MK">如何更新 ports Mk？</a></dt>

<dt>20.22. <a href="ports.html#MAKE-USE-SED-INPLACE">如何解決安裝 ports 時出現 sed -i
的錯誤？</a></dt>

<dt>20.23. <a href="ports.html#PKG-VERSION">如何列出所有可以升級的 ports？</a></dt>

<dt>20.24. <a href="ports.html#GREP-DEFINED-MAKEFILE">如何得知 ports
所提供的編譯參數？</a></dt>

<dt>20.25. <a href="ports.html#MAKE-CONFIGURE-ARGS">如何手動加入編譯 ports
的參數？</a></dt>

<dt>20.26. <a href="ports.html#MAKE-PREFIX">如何指定 ports 的安裝路徑？</a></dt>

<dt>20.27. <a href="ports.html#FORCE-PKG-REGISTER">安裝 ports 出現 FORCE_PKG_REGISTER
的錯誤訊息</a></dt>

<dt>20.28. <a href="ports.html#SHARED-OBJECT-NOT-FOUND">安裝 ports 出現 Shared object
libintl.so.X not found 的錯誤訊息</a></dt>

<dt>20.29. <a href="ports.html#PKG-ADD">如何安裝 packages？</a></dt>

<dt>20.30. <a href="ports.html#PKG-ADD-FORCE">如何強制安裝 packages？</a></dt>

<dt>20.31. <a href="ports.html#PKG-INFO-R">如何查詢 packages 與其他 packages
之間的相依性？</a></dt>

<dt>20.32. <a href="ports.html#PKG-ADD-R">如何安裝遠端的 packages？</a></dt>

<dt>20.33. <a href="ports.html#MAKE-INDEX">如何更新 INDEX 對照表？</a></dt>

<dt>20.34. <a href="ports.html#MAKE-READMES">如何更新 INDEX HTML？</a></dt>

<dt>20.35. <a href="ports.html#SUP-REFUSE">如何針對某些 ports 不做 ports
update？</a></dt>

<dt>20.36. <a href="ports.html#DEINSTALL-VS-PKG-DELETE">make deinstall 與 pkg_delete
有什麼不同？</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-FETCH" name="MAKE-FETCH"></a><b>20.1.</b> 如何只抓取 tarball？</p>
</div>

<div class="ANSWER">
<p><b></b>如果只希望抓取 tarball 下來的話，僅需輸入以下指令即可：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetch</kbd>
</pre>

如果是要抓取單一的 port，以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：<br />
<br />
<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetch</kbd>
</pre>

<p>那麼，預設會將 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 的 tarball 下載至 <tt
class="FILENAME">/usr/ports/distfiles</tt> 目錄下。</p>

<p>如果是希望抓取安裝此 ports 所有相關相依 ports 的 tarball，以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/systuils/portupgrade/pkg-descr"><tt
class="FILENAME">systuils/portupgrade</tt></a> 為例的話， 則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/systuils/portupgrade</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetch-recursive</kbd>
</pre>

<p>預設會將此 port 與所有需要的其他 port 的 tarball，下載至 <tt
class="FILENAME">/usr/ports/distfiles</tt> 目錄下。</p>

<p>如果是希望抓取全部所有 ports 的 tarball ，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetch</kbd>
</pre>

<p>則會所將全部所有 ports 的 tarball 下載至 <tt
class="FILENAME">/usr/ports/distfiles</tt> 目錄下。</p>

<p>如果是希望抓取 ftp 分類下所有 ports 的 tarball ，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetch-recursive</kbd>
</pre>

<p>則會所將 ftp 分類下所有 ports 的 tarball 都下載至 <tt
class="FILENAME">/usr/ports/distfiles</tt> 目錄下。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-EXTRACT" name="MAKE-EXTRACT"></a><b>20.2.</b> 如何僅做到解開
tarball的步驟？</p>
</div>

<div class="ANSWER">
<p><b></b>有時候習慣自己 patch 原始碼的時候，會很常用到這個功能。以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make extract</kbd>
</pre>

<p>會將 tarball解開至 <tt class="FILENAME">/usr/ports/editors/joe/work</tt> 目錄下。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-PATCH" name="MAKE-PATCH"></a><b>20.3.</b> 如何僅做到解開 tarball
並補上官方提供的 patch ？</p>
</div>

<div class="ANSWER">
<p><b></b>此法與 <a href="ports.html#MAKE-EXTRACT">make extract</a>
的方法有一些類似，不同於是先補上官方提供的 patch，再行 patch 自己的修正。 有時候習慣自己
patch 原始碼的時候， 則這個方式正好符合您的需求。 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make patch</kbd>
</pre>

<p>會將 tarball解開至 <tt class="FILENAME">/usr/ports/editors/joe/work</tt> 目錄下
，並補上官方提供的 patch。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-INSTALL" name="MAKE-INSTALL"></a><b>20.4.</b> 如何安裝一個新的 port？</p>
</div>

<div class="ANSWER">
<p><b></b>如果系統上未安裝此軟體，則可以選擇安裝一個新的 port。 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make install</kbd>
</pre>

<p>如此會在系統上安裝一個新的 joe 軟體。
如果需要在安裝完成後，一併清除編輯時期所留下來的暫存目錄，則可配合 <kbd
class="USERINPUT">make clean</kbd> 的方法一起使用，如：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean</kbd>
</pre>

<p>如果想要一次清掉所有 ports 產生的暫存資料，則只要回到 ports 的根目錄執行即可：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-PACKAGE" name="MAKE-PACKAGE"></a><b>20.5.</b> 如何安裝一個新的
port，並打包(package)起來？</p>
</div>

<div class="ANSWER">
<p><b></b>將安裝完成的軟體打包起來，有許多便利性：包括在叢集系統中，可供其它機器使用，
或將未來此軟體出問題可重新利用此 package 重新快速安裝。 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make package</kbd>
</pre>

<p>如此會在系統上安裝一個新的 joe 軟體，並將此軟體打包(package)起來。 package 預設會在
<tt class="FILENAME">/usr/ports/editors/joe</tt>
目錄下，如果希望集中管理的話，建議做如下的步驟：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mkdir -p /usr/ports/packages</kbd>
</pre>

<p>以後打包的 packages 都會存放在此目錄下，並且系統會自動做分類，以方便管理。
如果需要在安裝完成後，一併清除編輯時期所留下來的暫存目錄，則可配合 make clean
一起使用，如：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make package clean</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-DEPEND-PACKAGE" name="MAKE-DEPEND-PACKAGE"></a><b>20.6.</b> 如何打包一個
port，並將其所有相依的 ports 也打包起來？</p>
</div>

<div class="ANSWER">
<p><b></b>因為 <a href="ports.html#MAKE-PACKAGE">make package</a> 只有打包單一套件，
中間依賴的 ports 並沒有一起打包，這會出現一個常遇到的問題： 就是如果一個 port
需要依賴其它的 ports，那麼必須將其它 ports 也一起打包，否則安裝 packages
會有相依性的問題。 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/sysutils/portupgrade</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">make DEPENDS_TARGET=package package</kbd>
</pre>

<p>如此會對所有 portupgrade 所相依賴的 ports 都一併打包，也包括自己本身。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-CREATE" name="PKG-CREATE"></a><b>20.7.</b> 如何對一個已經安裝的 port
打包？</p>
</div>

<div class="ANSWER">
<p><b></b>如果安裝好一個套件，事前並未打包，事後想打包的話，則： 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /var/db/pkg</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_create -b joe-{版本號}</kbd>
</pre>

<p>會將已安裝的 port 打包起來，放在 <tt class="FILENAME">/var/db/pkg</tt> 目錄下。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-CLEAN" name="MAKE-CLEAN"></a><b>20.8.</b> 如何清理 ports
編輯期間所產生的暫存資料？</p>
</div>

<div class="ANSWER">
<p><b></b>在安裝 port
的時候，會有編譯期間所需要的工作目錄(work)，因此通常安裝好一個套件後，會清除此暫存目錄，以節省硬碟空間。
以 <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean</kbd>
</pre>

<p>如果是希望清除所有 ports 的暫存目錄，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean</kbd>
</pre>

<p>如果是希望清除所有 ftp 分類的暫存目錄，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-DISTCLEAN" name="MAKE-DISTCLEAN"></a><b>20.9.</b> 如何清理 ports
編輯期間所產生的暫存資料，以及 tarball 檔？</p>
</div>

<div class="ANSWER">
<p><b></b>在 <a href="ports.html#MAKE-CLEAN">make clean</a>
僅只是清除編輯期間所需要的工作目錄(work)，並沒有將編譯 ports 時一併下載的 tarball
刪除(相對應之 tarball 預設會存放在 <tt class="FILENAME">/usr/ports/distfiles</tt>)
如果想把 tarball 一併清除的話，以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make distclean</kbd>
</pre>

<p><kbd class="USERINPUT">make distclean</kbd> 的步驟包含了 <kbd class="USERINPUT">make
clean</kbd> 的功能，也就是說除了會刪除 tarball 外，還會一併清除編譯時的暫存 work
目錄。</p>

<p>如果是希望清除所有 ports 的暫存 work 目錄及 tarball，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make distclean</kbd>
</pre>

<p>而如果是希望清除所有 ftp 分類的 work 目錄及 tarball，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make distclean</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-DEPENDS-LIST" name="MAKE-DEPENDS-LIST"></a><b>20.10.</b> 如何在安裝 ports
前查詢所依賴的相關套件？</p>
</div>

<div class="ANSWER">
<p><b></b>在安裝 ports 前，可以查詢所依賴的相關套件。 以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/p5-Mail-SpamAssassin/pkg-descr"><tt
class="FILENAME">mail/p5-Mail-SpamAssassin</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/mail/p5-Mail-SpamAssassin</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make all-depends-list</kbd>
</pre>

<p><kbd class="USERINPUT">make all-depends-list</kbd> 顯示此套件所有相依的套件。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/mail/p5-Mail-SpamAssassin</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">make pretty-print-build-depends-list</kbd>
</pre>

<p><kbd class="USERINPUT">make all-depends-list</kbd>
顯示此套件在編譯期間所需要的套件。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/mail/p5-Mail-SpamAssassin</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">make pretty-print-run-depends-list</kbd>
</pre>

<p><kbd class="USERINPUT">make all-depends-list</kbd>
顯示此套件要執行時所需要的套件。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-DEINSTALL" name="MAKE-DEINSTALL"></a><b>20.11.</b> 如何移除已安裝的
ports？</p>
</div>

<div class="ANSWER">
<p><b></b>以 <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make deinstall</kbd>
</pre>

<p>或是使用 <kbd class="USERINPUT">pkg_delete</kbd>：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_delete joe-{version}</kbd>
</pre>

<p>有時候套件之間的相依性會導致無法直接移除，如果要強制移除的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_delete -f joe-{version}</kbd>
</pre>

<p>但請注意：很有可能會導致其它相依到這軟體的套件執行起來出現問題。</p>

<p>至於二者的差別，請參考 <a href="ports.html#DEINSTALL-VS-PKG-DELETE">make deinstall 與
pkg_delete 有什麼不同</a></p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-DEINSTALL-DEPENDS" name="MAKE-DEINSTALL-DEPENDS"></a><b>20.12.</b>
如何一併移除所相依的 ports？</p>
</div>

<div class="ANSWER">
<p><b></b>以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/sysutils/portupgrade</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make deinstall-depends</kbd>
</pre>

<p>執行此步驟前，請注意是否會移除其他套件也有共同相依的部分。建議先參考 <a
href="ports.html#MAKE-DEPENDS-LIST">make-depends-list</a> 的方法來檢查。</p>

<p>或是使用</p>

<pre class="SCREEN">
<kbd class="USERINPUT">pkg_delete</kbd>
</pre>

<p>這樣若仍有相依該套件的話，會先警告而不會移除。除非有另外加了 -f 參數來強制移除。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">pkg_delete -r portupgrade-{version}</kbd>
</pre>

<p>至於二者的差別，請參考 <a href="ports.html#DEINSTALL-VS-PKG-DELETE">make deinstall 與
pkg_delete 有什麼不同</a></p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-REINSTALL" name="MAKE-REINSTALL"></a><b>20.13.</b> 如何重新安裝已安裝過的
ports？</p>
</div>

<div class="ANSWER">
<p><b></b>重新安裝的前提是：之前有安裝過或目前已安裝。以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make deinstall clean install</kbd>
</pre>

<p>或是</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make reinstall</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-SEARCH" name="MAKE-SEARCH"></a><b>20.14.</b> 如何以關鍵字搜尋 ports？</p>
</div>

<div class="ANSWER">
<p><b></b>如果要從全部的 ports collection 中找尋與關鍵字 "ldap" 有關的 ports，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make search key=ldap</kbd>
</pre>

<p>如果只要從與 ftp 相關的 ports 下找尋與關鍵字 "ldap" 有關的 ports，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make search key=ldap</kbd>
</pre>

<p>還有另一個用法，方法只是將 key 換成 name。如果已經知道要搜尋 ports
的名稱，或只想找名稱相關的關鍵字 "ldap"， 則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make search name=ldap</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UPGRADE-PORTS" name="UPGRADE-PORTS"></a><b>20.15.</b> 如何升級已安裝的
ports？</p>
</div>

<div class="ANSWER">
<p><b></b>如果已經安裝套件，事後欲升級的話，必須先移除舊版的 port。以 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make clean reinstall</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-INFO" name="PKG-INFO"></a><b>20.16.</b>
如何查詢目前系統安裝了哪些套件？</p>
</div>

<div class="ANSWER">
<p><b></b>查詢目前系統已安裝的全部套件：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_info</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-INFO-GREP" name="PKG-INFO-GREP"></a><b>20.17.</b>
如何查詢目前系統有沒有安裝這個關鍵字的套件？</p>
</div>

<div class="ANSWER">
<p><b></b>假設要找的關鍵字是 joe 的話：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_info | grep joe</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-INFO-W" name="PKG-INFO-W"></a><b>20.18.</b>
如何查詢某個檔案是屬於哪些套件？</p>
</div>

<div class="ANSWER">
<p><b></b>如果想查詢 <tt class="FILENAME">/usr/local/bin/joe</tt>
是屬於哪個套件的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_info -W /usr/local/bin/joe</kbd>
</pre>

<p>如果沒有回傳任何資訊的話，代表著這個檔案是由 FreeBSD 內建的。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-INFO-L" name="PKG-INFO-L"></a><b>20.19.</b>
如何查詢某個套件安裝了哪些檔案？</p>
</div>

<div class="ANSWER">
<p><b></b>如果想查詢目前系統所安裝的 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/joe/pkg-descr"><tt
class="FILENAME">joe</tt></a> 包含了哪些檔案，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">pkg_info -L /var/db/pkg/joe-{version}</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="REINSTALL-UPGRADE" name="REINSTALL-UPGRADE"></a><b>20.20.</b> 如何安裝舊版的
ports？</p>
</div>

<div class="ANSWER">
<p><b></b>有時候會因為相依性，或是新版有問題，而會想裝舊版本的套件。 這裡介紹的方法是利用
CVS 的好處，回歸到以前舊版本存在的日子，以安裝舊版本的套件。</p>

<p>首先，若我們要回復到某一個套件的版本時，需要去查詢 FreeBSD ports CVS repository。
最常見的就是 <a href="http://www.freshports.org/" target="_top">Freshports</a> 網站、
FreeBSD 的 <a href="http://lists.freebsd.org/pipermail/cvs-all/" target="_top">Mailing
FreeBSD cvs</a> 或是 FreeBSD <a href="http://www.freebsd.org/cgi/cvsweb.cgi/ports/"
target="_top">ports cvsweb</a>。</p>

<p>查到該套件版本所依存的日子後，就修改 CVS tag。一般預設 ports 的 CVS tag 會寫在 <tt
class="FILENAME">/usr/share/examples/cvsup/ports-supfile</tt> ，如要回溯到 2002/10/05
號的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">vi /usr/share/examples/cvsup/ports-supfile</kbd>
</pre>

<pre class="SCREEN">
*default date=2002.10.05.00.00.00  #將 date 改成當日
</pre>

<p>然後按照一般 CVSup 或 csup 的時候一樣，執行 CVSup 或 csup (make update)，此時的 ports
collections 就會回到當時的情形，那麼該套件的舊版也會出現在 ports collections
中，只要安裝即可。</p>

<p>如果僅是想回溯某部份的 ports，則必須加上額外的資訊，如僅希望把 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/lang/perl5.8/pkg-descr"><tt
class="FILENAME">lang/perl5.8</tt></a> 回溯， 而我們得知此屬於 lang 中的一支，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">vi /usr/share/examples/cvsup/ports-supfile</kbd>
</pre>

<pre class="SCREEN">
#ports-all #將 ports-all 標示起來
</pre>

<pre class="SCREEN">
ports-lang #加入這行
</pre>

<br />
<br />
<p>最後，執行 CVSup 或 csup ，並安裝即可。目前若希望單獨回溯單一的 port，則比較麻煩。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="UPGRADE-PORTS-MK" name="UPGRADE-PORTS-MK"></a><b>20.21.</b> 如何更新 ports
Mk？</p>
</div>

<div class="ANSWER">
<p><b></b>Mk (<tt class="FILENAME">/usr/ports/Mk</tt>) 是編譯 ports
時所參考的設定，有時若發生 ports collections 太新，而導致 Mk 的內容不符，此時就是應該更新
Mk 的時候了。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/src</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make update</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/src/share/mk</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make install</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-USE-SED-INPLACE" name="MAKE-USE-SED-INPLACE"></a><b>20.22.</b>
如何解決安裝 ports 時出現 sed -i 的錯誤？</p>
</div>

<div class="ANSWER">
<p><b></b>因為 BSD style 的 sed ，也就是 BSD 本身自有的 sed ，與一些 ports
編譯期間所執行的 sed 不一致，所以會導致一些語法錯誤。此時先安裝 sed_inplace (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/textproc/sed_inplace/pkg-descr"><tt
class="FILENAME">textproc/sed_inplace</tt></a>)，然後再安裝原本無法安裝的 ports：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make -DUSE_REINPLACE install</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-VERSION" name="PKG-VERSION"></a><b>20.23.</b> 如何列出所有可以升級的
ports？</p>
</div>

<div class="ANSWER">
<p><b></b>ports collection 的更新速度很快，在每次更新 ports collections
後，往往會出現比目前現
在安裝的套件還新的版本，可以令系統自行整理並提供可升級套件的列表：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_version -c</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="GREP-DEFINED-MAKEFILE" name="GREP-DEFINED-MAKEFILE"></a><b>20.24.</b> 如何得知
ports 所提供的編譯參數？</p>
</div>

<div class="ANSWER">
<p><b></b>所有的 ports collections 中所提供的編譯參數都會在對應的 Makefile 檔案內詳述，
如 <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a> 的話，則是位在 <tt
class="FILENAME">/usr/ports/sysutils/portupgrade/Makefile</tt> 檔案下。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/sysutils/portupgrade</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make -DNOPORTDOCS install</kbd>
</pre>

<p>那麼安裝此 ports 時，會將 NOPORTDOCS 所對應的相關參數指定進去。</p>

<p>有時候設定較人性化的 ports 會在安裝前提供參數供選擇，但是其實大部份的 ports 都沒有提
供，因此必須自行去搜尋可編譯的參數，在此我提供的方式如下：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/ports/sysutils/portupgrade</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">grep defined Makefile</kbd>
</pre>

<p>如此幾乎可以知道所有提供的可編譯參數，雖然有時會多出其它的資料，不會這個確實是一個不
錯可參考的方式。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-CONFIGURE-ARGS" name="MAKE-CONFIGURE-ARGS"></a><b>20.25.</b>
如何手動加入編譯 ports 的參數？</p>
</div>

<div class="ANSWER">
<p><b></b>在 <a href="ports.html#GREP-DEFINED-MAKEFILE">前面所述</a> 的方法，是 ports
collections 有提供的前提之下，有時候並不是所有該軟體所支援的參數都會收納在 ports
collections 中，因此有時候會需要手動加入編譯的參數。</p>

<p>如 ftp/pure-ftpd 中，如果不想把 inetd 的支援編入的選項，並沒有被 ports collections
所納入，因此必須手動加上這個編譯參數，如下：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp/pure-ftpd</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">make CONFIGURE_ARGS+="--without-inetd" install</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-PREFIX" name="MAKE-PREFIX"></a><b>20.26.</b> 如何指定 ports
的安裝路徑？</p>
</div>

<div class="ANSWER">
<p><b></b>預設 ports collecions 已安排安裝的路徑 (<tt
class="FILENAME">/usr/local/</tt>)，如果不想將套件安裝在預設路徑的話，可以手動指定安裝路徑。以
<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/editors/joe/pkg-descr"><tt
class="FILENAME">editors/joe</tt></a> 為例，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/editors/joe</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make PREFIX=/usr install</kbd>
</pre>

<p>那麼 joe 就會將檔案對應在 /usr 目錄下，而不是預設的 /usr/local 目錄下。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="FORCE-PKG-REGISTER" name="FORCE-PKG-REGISTER"></a><b>20.27.</b> 安裝 ports 出現
FORCE_PKG_REGISTER 的錯誤訊息</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 Ohaha 的 <a href="http://ohaha.ks.edu.tw/faq-0003.htm"
target="_top">FAQ</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SHARED-OBJECT-NOT-FOUND" name="SHARED-OBJECT-NOT-FOUND"></a><b>20.28.</b> 安裝
ports 出現 Shared object libintl.so.X not found 的錯誤訊息</p>
</div>

<div class="ANSWER">
<p><b></b>請參考 Ohaha 的 <a href="http://ohaha.ks.edu.tw/faq-0004.htm"
target="_top">FAQ</a>。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-ADD" name="PKG-ADD"></a><b>20.29.</b> 如何安裝 packages？</p>
</div>

<div class="ANSWER">
<p><b></b>目前 FreeBSD 的 packages 是由 .tgz 所打包。如果想安裝一個 packages ，可使用
pkg_add，如安裝一個 joe 的 tgz：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_add joe-{version}.tgz</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-ADD-FORCE" name="PKG-ADD-FORCE"></a><b>20.30.</b> 如何強制安裝
packages？</p>
</div>

<div class="ANSWER">
<p><b></b>由於有些 packages 會有與其他 packages 相依性的關係，所以必須先行安裝那些
packages 才 能正常安裝。</p>

<p>如果須要強制安裝 packages ，可以不須安裝那些有相依性 packages ，但要注意的是強制安裝
的結果可能會導致執行或運作的不正常。強制安裝 packages 的指令如下，如強制安裝一個 joe 的
tgz：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_add -f joe-{version}.tgz</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-INFO-R" name="PKG-INFO-R"></a><b>20.31.</b> 如何查詢 packages 與其他
packages 之間的相依性？</p>
</div>

<div class="ANSWER">
<p><b></b>由於有些 packages 會有與其他 packages 相依性的關係，所以必須先行安裝那些
packages 才 能正常安裝。</p>

<p>查詢 packages 與其他 packages 之間的相依性的指令如下，如查詢與 portupgrade 相依的其他
packages：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">pkg_info -r portupgrade-{version}.tgz</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="PKG-ADD-R" name="PKG-ADD-R"></a><b>20.32.</b> 如何安裝遠端的 packages？</p>
</div>

<div class="ANSWER">
<p><b></b>有兩種設定方式，首先是 PACKAGEROOT，如：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">setenv PACKAGEROOT ftp://ftp.tw.freebsd.org</kbd>
</pre>

<p>另一種方式是設定 PACKAGESITE，好處是若該站台的 packages 倉儲並不是符合官方的設定或你
想自己指定一個路徑。</p>

<p>以 ftp.tw.freebsd.org i386 的 current pakcages 為例：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">setenv PACKAGESITE ftp://ftp.tw.freebsd.org/pub/FreeBSD/ports/i386/packages-current/Latest/</kbd>
</pre>

<p>兩種方式選擇其中一種皆可，接下來的步驟都一樣。</p>

<p>往後要安裝 packages 的時候，如 portupgrade 的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_add -r portupgrade</kbd>
</pre>

<p>則系統會自動於 ftp.tw.freebsd.org 抓取所有與 portupgrade 相依的 packages 並安裝。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-INDEX" name="MAKE-INDEX"></a><b>20.33.</b> 如何更新 INDEX 對照表？</p>
</div>

<div class="ANSWER">
<p><b></b>4.x 的 INDEX 位於 <tt class="FILENAME">/usr/ports/INDEX</tt>，5.x 位於 <tt
class="FILENAME">/usr/ports/INDEX-5</tt>，以此類推。</p>

<p>INDEX 是對照 ports 所有相依等資訊的對照表，若長期未更新的話，會導致 ports 對照失敗。
官方有定期更新 INDEX，如果想自行更新的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make index</kbd>
</pre>

<p>如果想直接下載官方最新的 INDEX，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make fetchindex</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="MAKE-READMES" name="MAKE-READMES"></a><b>20.34.</b> 如何更新 INDEX HTML？</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 提供了用網頁的方式來觀看 ports collection，即可使用 lynx, w3m, links
或其它可瀏覽網頁的程式來查閱。製作全部 ports collection 的方式如下：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make readmes</kbd>
</pre>

<p>如果是僅須要做目前目錄下的資訊，或單一更新某一分類下的資訊，如 /usr/ports/ftp
的話，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/ports/ftp</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make readme</kbd>
</pre>

<p>則僅會更新 /usr/ports/ftp
這個目錄的資訊，其上與其下的目錄皆不會更動到。執行成功後，會在相對應的目錄下產生
README.html 的檔案。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="SUP-REFUSE" name="SUP-REFUSE"></a><b>20.35.</b> 如何針對某些 ports 不做 ports
update？</p>
</div>

<div class="ANSWER">
<p><b></b>若 ports 底下的某些分類完全用不到，則可以在 ports update
時，不做更新，以節省網路頻寬與時間。只要修改 <tt class="FILENAME">/usr/sup/refuse</tt>
這個檔。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ports/french</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ports/german</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ports/lang/perl5.8</kbd>
</pre>

<p>則上列目錄將不會更新。</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="DEINSTALL-VS-PKG-DELETE" name="DEINSTALL-VS-PKG-DELETE"></a><b>20.36.</b> make
deinstall 與 pkg_delete 有什麼不同？</p>
</div>

<div class="ANSWER">
<p><b></b>簡單來說，make deinstall 會移除該 port，並且不會參照其相依的相關套件。</p>

<p>pkg_delete 在移除該 port 前，會參照其相依的相關套件，並且 pkg_delete 有支援 wild card
，如要移除所有 p 開頭的 ports，則：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /var/db/pkg</kbd>
</pre>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_delete p*</kbd>
</pre>

<p>要注意的是，如果使用 make deinstall，則最好確定系統目前所安裝的版本，與 ports
collection 中顯示的版本符合，否則有可能會出現非預期性錯誤；而 pkg_delete 是因為直接
刪除系統中所安裝的版本，所以沒有此問題。</p>

<p>因此，換句話說，當系統所安裝的版本符合 ports collections 中的版本，則可以使用 make
deinstall 或 pkg_delete，否則的話最好用 pkg_delete。</p>
</div>
</div>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="acknowledgments.html"
accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="bibliography.html"
accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">感謝</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">Bibliography</td>
</tr>
</table>
</div>

<p align="center"><small>本文及其他文件，可由此下載：<a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p>

<p align="center"><small>若有 FreeBSD 方面疑問，請先閱讀 <a
href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。<br />
關於本文件的問題，請洽詢 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

